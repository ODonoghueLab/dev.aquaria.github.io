(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["wrapper"],{"113a":function(e,t,n){"use strict";n("61c9")},1380:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"matrix"}},[n("MatrixHeader"),n("LoadingPage"),n("div",{attrs:{id:"container"}})],1)},r=[],i=(n("99af"),n("4de4"),n("4160"),n("c975"),n("d81d"),n("13d5"),n("fb6a"),n("a434"),n("b0c0"),n("b64b"),n("ac1f"),n("3ca3"),n("466d"),n("5319"),n("1276"),n("159b"),n("ddb0"),n("2909")),s=(n("96cf"),n("1da1")),o=n("bc3a"),c=n.n(o),l=n("9cc6"),d=n("2fdb"),u=n("4360"),h={name:"Matrix",components:{MatrixHeader:l["a"],LoadingPage:d["a"]},data:function(){return{hostname:u["default"].state.url,publicPath:"/",structures:null,totalStructures:0,d3:n("5698"),green:"#7A9D5B",backgroundColour:"#ffffff",x:0,y:15,organismId:"2697049"}},mounted:function(){var e,t=this,n="".concat(window.BACKEND,"/").concat(this.organismId);c()({method:"get",url:n}).then((function(n){e=JSON.parse(n.data.primary_accessions),t.getStructures(t.organismId,e).then((function(e){console.log(e),t.getMatchingStructures(e).then((function(e){t.getProteinSynonyms(e).then((function(e){t.loadShapes(e).then((function(){document.querySelector(".matrixLoading")&&(document.querySelector(".matrixLoading").style.visibility="hidden",document.querySelector(".matrixLoading").style.display="none")}))}))}))})),t.structures=e})),window.addEventListener("resize",this.initialDisplay)},methods:{getResidueSize:function(e,t){return t*e},loadShapes:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,r,s,o,c,l,d,u,h,p,m,f,g,v,y,w,A,b,_,I;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:for(e=t.partitionToThree(e),a=0,r=960/Math.max.apply(Math,Object(i["a"])(e.map((function(e){return t.getListSum(e)})))),s=0;s<e.length;s++){for(o=t.d3.select("#container").append("svg").attr("class","row").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 960 360"),t.x=0,t.y=15,c=0,0!==s&&(l=e[s-1],d=l[l.length-1],u=e[s][0],h=Math.floor(u.length/500+1),p=!1,h>3&&(p=!0),m={id:"placeholder",placeholderLarge:p,primary_accession:d.primary_accession,name:d.name,synonym:d.synonym,placeholder:!0},t.drawArrow(o,m,150,20,20/1.5,c,r),t.drawRuler(o,m,a,150,20/1.5,c),c=c+150+20/1.5),f=0;f<e[s].length;f++)g=!1,v=20,y=v/1.5,w=t.getResidueSize(r,e[s][f].length)-y,w<0&&(y=t.getResidueSize(r,e[s][f].length),w=0),t.drawArrow(o,e[s][f],w,v,y,c,r),t.drawRuler(o,e[s][f],a,w,y,c),a=e[s][f].continuous?e[s][f].length:0,t.addNonDarkToFragments(e[s][f]),0!==e[s][f].fragments.length&&(t.y=t.y+33,g=!0),t.drawFragments(o,e[s][f].fragments,r,c),A=t.renderImage(o,e[s][f],w,v,c),t.drawMatchingStructures(o,e[s][f],w,v,y,c,A),c=c+w+y,g&&(t.y=t.y-33);0!==s&&s!==e.length-1&&(b=e[s+1],_=b[0],I=e[s-1],h=Math.floor(I[I.length-1].length/500+1),p=!1,h>3&&(p=!0),m={id:"placeholder",placeholderLarge:p,primary_accession:_.primary_accession,name:_.name,synonym:_.synonym,placeholder:!0},t.drawArrow(o,m,t.getResidueSize(r,b[0].length)-20/1.5,20,20/1.5,c,r),t.drawRuler(o,m,a,t.getResidueSize(r,b[0].length)-20/1.5,20/1.5,c)),t.drawExpandButton(o)}t.initialDisplay(!1);case 5:case"end":return n.stop()}}),n)})))()},fillData:function(e){var t=[{offset:"0%",color:"black"}];if(e.nonDark)for(var n=0;n<e.nonDark.length;n++){var a=e.nonDark[n];t.push({offset:a.Start/e.length*100+"%",color:"black"}),t.push({offset:a.Start/e.length*100+"%",color:this.green}),t.push({offset:a.Stop/e.length*100+"%",color:this.green}),t.push({offset:a.Stop/e.length*100+"%",color:"black"})}return e.placeholder&&(console.log(e),t=[{offset:"0%",color:"#CCCCCC"}]),t},getNonDarkBetween:function(e,t,n){var a=[];if(e.nonDark)for(var r=0;r<e.nonDark.length;r++)e.nonDark[r].Start<=t&&e.nonDark[r].Stop>=t?a.push({Start:0,Stop:e.nonDark[r].Stop-t}):e.nonDark[r].Start>=t&&e.nonDark[r].Stop<=n?a.push({Start:e.nonDark[r].Start-t,Stop:e.nonDark[r].Stop-t}):e.nonDark[r].Start<=n&&e.nonDark[r].Stop>=n&&a.push({Start:e.nonDark[r].Start-t,Stop:n-t});return a},splitToChunks:function(e,t){for(var n=[],a=t;a>0;a--)n.push(e.splice(0,Math.ceil(e.length/a)));return n},addNonDarkToFragments:function(e){if(e.fragments)for(var t=0;t<e.fragments.length;t++){var n=e.fragments[t];e.fragments[t].nonDark=this.getNonDarkBetween(e,n.Start,n.Stop)}},drawArrow:function(e,t,a,r,i,s,o){var c,l=this.fillData(t),d=t.id?t.id:t.primary_accession;if(l.length>14&&a>300)for(var u=0,h=JSON.parse(JSON.stringify(t.nonDark)),p=Math.floor(l.length/10)>4?Math.floor(l.length/10):4,m=this.splitToChunks(h,p),f=0,g=0;g<m.length;g++){var v=m[g].slice(-1)[0].Stop-f;g===m.length-1&&(v=t.length-f);for(var y=this.getResidueSize(o,v),w=0;w<m[g].length;w++)m[g][w].Start=m[g][w].Start-f,m[g][w].Stop=m[g][w].Stop-f;var A=this.fillData({length:v,nonDark:m[g]});if(e.append("linearGradient").attr("id","grad_partial_"+d+"_"+g).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").selectAll("stop").data(A).enter().append("stop").attr("offset",(function(e){return e.offset})).attr("stop-color",(function(e){return e.color})).attr("stop-opacity",1),g===m.length-1){var b=y-i,_=void 0;_=b>0?[this.x,this.y,this.x,this.y+r,this.x+b,this.y+r,this.x+b,this.y+.5*r+i,this.x+b+i,this.y+.5*r,this.x+b,this.y+.5*r-i,this.x+b,this.y]:[this.x,this.y+.5*r-i,this.x,this.y+.5*r+i,this.x+i,this.y+.5*r],e.append("svg:polygon").attr("points",_).attr("fill","url(#grad_partial_"+d+"_"+g+")").attr("id",d).attr("title",t.primary_accession).attr("transform","translate("+(s+u)+",0)").attr("class","arrow").on("mouseover",(function(e,t){var a=n("5698");a.select(this).attr("opacity",".85"),a.selectAll("rect#"+this.id).attr("opacity",".85")})).on("mouseout",(function(e,t){var a=n("5698");a.select(this).attr("opacity","1"),a.selectAll("rect#"+this.id).attr("opacity","1")})).on("click",(function(){var e=n("5698"),t=window.location.origin;window.open(t+"/"+e.select(this).attr("title"))})).append("svg:title").text(t.name)}else e.append("svg:rect").attr("fill","url(#grad_partial_"+d+"_"+g+")").attr("x",this.x).attr("y",this.y).attr("width",y).attr("height",r).attr("id",d).attr("class","arrow").attr("title",t.primary_accession).attr("transform","translate("+(s+u)+",0)").on("mouseover",(function(e,t){var a=n("5698");a.select(this).attr("opacity",".85"),a.selectAll("rect#"+this.id).attr("opacity",".85"),a.selectAll("polygon#"+this.id).attr("opacity",".85")})).on("mouseout",(function(e,t){var a=n("5698");a.select(this).attr("opacity","1"),a.selectAll("rect#"+this.id).attr("opacity","1"),a.selectAll("polygon#"+this.id).attr("opacity","1")})).on("click",(function(){var e=n("5698"),t=window.location.origin;window.open(t+"/"+e.select(this).attr("title"))})).append("svg:title").text(t.name);f+=v,u+=y}else e.append("linearGradient").attr("id","grad_"+d).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").selectAll("stop").data(l).enter().append("stop").attr("offset",(function(e){return e.offset})).attr("stop-color",(function(e){return e.color})).attr("stop-opacity",1),c=a>0?[this.x,this.y,this.x,this.y+r,this.x+a,this.y+r,this.x+a,this.y+.5*r+i,this.x+a+i,this.y+.5*r,this.x+a,this.y+.5*r-i,this.x+a,this.y]:[this.x,this.y+.5*r-i,this.x,this.y+.5*r+i,this.x+i,this.y+.5*r],e.append("svg:polygon").attr("points",c).attr("fill","url(#grad_"+d+")").attr("id",d).attr("title",t.primary_accession).attr("class","arrow").attr("transform","translate("+s+",0)").on("mouseover",(function(e,t){var a=n("5698");a.select(this).attr("opacity",".85")})).on("mouseout",(function(e,t){var a=n("5698");a.select(this).attr("opacity","1")})).on("click",(function(){var e=n("5698"),t=window.location.origin;window.open(t+"/"+e.select(this).attr("title"))})).append("svg:title").text(t.name);var I=e.append("text").attr("x",this.x+.5*(a+.5*i)).attr("y",this.y+.5*r).attr("transform","translate("+s+",0)").attr("dy",".35em").style("text-anchor","middle").attr("class","arrow").style("fill","white").text(t.name);if(I.node().getComputedTextLength()>a&&(I.text(t.synonym[0]),I.node().getComputedTextLength()>a)){var S=t.synonym.reduce((function(e,t){return e.length<=t.length?e:t}));S=S.replace("orf","").replace("ORF",""),I.text(S),I.node().getComputedTextLength()>a+.5*i&&(I.attr("y",this.y+1.5*r),I.style("fill",this.green),I.attr("class","rowContent"))}},drawRuler:function(e,t,n,a,r,i){var s=[1,a+r-1];n&&(s=[0,a+r]);var o=this.d3.scale.linear().domain([n,n+t.length]).range(s),c=Math.floor(t.length/500+1);if(c>3||t.placeholderLarge){t.placeholderLarge&&(c=0);var l=e.append("g").attr("transform","translate("+i+","+(this.y-15)+")").attr("style","").style("fill","gray").style("font-size","10px").attr("class","rowContent").call(this.d3.svg.axis().scale(o).tickSize(0,1).tickFormat((function(e,t){return 0===e||e%1e3!==0?" ":e})).orient("bottom").ticks(c));t.placeholder&&l.style("fill","#CCCCCC"),l.selectAll(".tick").attr("stroke","gray").attr("x1",this.x).attr("x2",this.x).attr("y2",0).attr("y1",3).attr("stroke-width","1")}else if(t.length>200||t.placeholder){c=2,t.placeholder&&(c=0);var d=e.append("g").attr("transform","translate("+i+","+(this.y-10)+")").style("fill","gray").attr("class","rowContent").call(this.d3.svg.axis().scale(this.d3.scale.linear().domain([0,1]).range([1,a+r-1])).tickSize(2,1).orient("top").ticks(c).tickFormat(""));d.selectAll(".tick").attr("stroke","gray").attr("x1",this.x).attr("y1",4).attr("y2",-1).attr("stroke-width","1"),t.placeholder&&d.style("fill","#CCCCCC");var u=e.append("text").attr("x",this.x+.5*(a+r)).attr("y",this.y-10).attr("dy",".35em").style("text-anchor","middle").attr("transform","translate("+i+",0)").style("fill","gray").style("font-size","10px").attr("class","rowContent").text(t.length);e.append("rect","text").datum((function(){return u.node().getBBox()})).attr("x",(function(e){return e.x-2})).attr("y",(function(e){return e.y})).style("fill",this.backgroundColour).attr("transform","translate("+i+",0)").attr("class","rowContent").attr("width",(function(e){return e.width+4})).attr("height",(function(e){return e.height})),u.node().parentNode.appendChild(u.node())}},drawFragments:function(e,t,n,a){for(var r=0;r<t.length;r++){var i={name:t[r].Name,primary_accession:t[r].Primary_Accession,synonym:[t[r].Short_Name].concat(t[r].Short_Name.match(/[0-9]+/g)),Start:t[r].Start,Stop:t[r].Stop,pdb:null,length:t[r].Stop-t[r].Start,id:t[r].Primary_Accession+"_"+t[r].Short_Name.match(/[0-9]+/g)[0],nonDark:t[r].nonDark},s=t[r].Stop-t[r].Start,o=20,c=o/1.5,l=this.getResidueSize(n,s)-c;l<0&&(c=this.getResidueSize(n,s),l=0),(0===r||t[r].Start>=t[r-1].Stop)&&(this.drawArrow(e,i,l,o,c,a,n),a=a+l+c)}},renderImage:function(e,t,n,a,r){var i=30,s=2*n<200?2*n:200,o=e.append("svg:image").attr("x",.5*n).attr("y",this.y+a).attr("transform","translate("+(r-s/2)+","+i+")").attr("width",s).attr("height",s);return t.dark||"2697049"!==this.organismId?t.dark?o.attr("xlink:href","../images/covid19/unknown-structure_1000.png"):o.attr("xlink:href","https://aquaria.ws:8080/image/"+t.primary_accession+"/"+t.pdb+"?color=0x000000&alpha=0"):o.attr("xlink:href","../images/covid19/WEBP/"+t.primary_accession+"_w500.webp"),i},drawMatchingStructures:function(e,t,n,a,r,i,s){if(!t.dark){var o=this.d3.scale.linear().domain([0,2]).range([2,n+r-2]).nice(),c=e.append("g").attr("transform","translate("+i+","+(this.y+a+10)+")").attr("style","").style("fill",this.green).style("font-size","10px").call(this.d3.svg.axis().scale(o).tickSize(0,1).tickFormat("").orient("bottom").ticks(2));this.d3.select(c.selectAll(".tick")[0][1]).attr("stroke",this.green).attr("x1",this.x).attr("x2",this.x).attr("y2",0).attr("y1",s).attr("stroke-width","1");var l=e.append("text").attr("x",this.x+.5*(n+r)).attr("y",this.y+a+s+5).attr("dy",".35em").style("text-anchor","middle").attr("transform","translate("+i+",0)").style("fill","white").style("font-size","12px").text(this.countMatchingStructures(t.clusters));e.append("rect","text").datum((function(){return l.node().getBBox()})).attr("x",(function(e){return e.x-4})).attr("y",(function(e){return e.y})).attr("rx",6).attr("ry",10).style("fill",this.green).attr("transform","translate("+i+",0)").attr("width",(function(e){return e.width+8})).attr("height",(function(e){return e.height})),l.node().parentNode.appendChild(l.node())}},drawExpandButton:function(e){var t=e.append("svg:rect").attr("x",0).attr("y",0).attr("stroke","#CCCCCC").attr("fill","#CCCCCC").attr("opacity",.8).attr("width",window.innerWidth).attr("height",30).attr("id","expand");window.innerHeight>window.innerWidth&&t.attr("display","none"),t.on("mouseover",(function(e,t){var a=n("5698");a.select(this.parentNode).select("path#expand:last-child").attr("stroke","orange")})).on("mouseout",(function(e,t){var a=n("5698");a.select(this.parentNode).select("path#expand:last-child").attr("stroke","#CCCCCC")})),t.on("click",(function(e,t){var a=n("5698");if(this.parentNode.className.baseVal.split(" ").indexOf("open")>-1)a.select(this.parentNode).classed("open",!1),a.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),a.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0);else{a.selectAll(".open").selectAll("rect#expand").attr("opacity",0),a.selectAll(".open").selectAll("rect#expand").attr("display","block"),a.selectAll(".open").selectAll("rect#expand").transition().duration(1e3).attr("opacity",.8),a.selectAll(".open").selectAll("path#expand").attr("opacity",0),a.selectAll(".open").selectAll("path#expand").attr("display","block"),a.selectAll(".open").selectAll("path#expand").transition().duration(1e3).attr("opacity",1),a.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=a.transform(a.select(this).attr("transform"));return"translate("+e.translate[0]+", -10)"})),a.selectAll(".row").classed("open",!1),a.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),a.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0),a.select(this.parentNode).classed("open",!0),a.select(this).attr("display","none"),a.select(this.parentNode).selectAll("path#expand").attr("display","none"),a.selectAll(".open").transition().duration(1e3).attr("viewBox","0 0 960 360"),a.selectAll(".open .rowContent").transition().duration(1e3).attr("opacity",1),a.select(this.parentNode).selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=a.transform(a.select(this).attr("transform"));return"translate("+e.translate[0]+", 0)"}));for(var r=a.selectAll(".row"),i=!1,s=!0,o=0;o<r[0].length;o++)a.select(r[0][o]).classed("open")&&(i=!0),i?(a.select(r[0][o]).select("path#expand").attr("transform","scale(1, -1) translate(480, -0)"),a.select(r[0][o]).select("path#expand:last-child").attr("transform","translate(480,0)")):(s=!1,a.select("#container").transition().duration(1e3).style("padding","8px 0px 0px 0px"),console.log(a.select(r[0][0]).style("height")),a.select(r[0][o]).select("path#expand").attr("transform","translate(480,30)"),a.select(r[0][o]).select("path#expand:last-child").attr("transform","scale(1, -1) translate(480, -30)"));s&&a.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px")}})),this.renderHalfMoon(e,480,0)},renderHalfMoon:function(e,t,a){var r=this.d3.svg.arc().outerRadius(20).innerRadius(0).startAngle(-Math.PI/2).endAngle(Math.PI/2),i=e.append("path").attr("transform","scale(1, -1) translate("+t+", -"+a+")").attr("d",r()).attr("fill","gray").attr("id","expand").on("mouseover",(function(e,t){var a=n("5698");a.select(this.parentNode).select("path#expand:last-child").attr("stroke","orange")})).on("mouseout",(function(e,t){var a=n("5698");a.select(this.parentNode).select("path#expand:last-child").attr("stroke","#CCCCCC")})),s=e.append("path").attr("transform","translate("+t+","+a+")").attr("d","M-8 12 0 5 8 12").attr("stroke","#CCCCCC").attr("stroke-width",3).attr("fill","transparent").attr("id","expand").on("mouseover",(function(e,t){var a=n("5698");a.select(this).attr("stroke","orange")})).on("mouseout",(function(e,t){var a=n("5698");a.select(this).attr("stroke","#CCCCCC")}));s.on("click",(function(e,t){var a=n("5698");a.selectAll(".open").selectAll("rect#expand").attr("opacity",0),a.selectAll(".open").selectAll("rect#expand").attr("display","block"),a.selectAll(".open").selectAll("rect#expand").transition().duration(1e3).attr("opacity",.8),a.selectAll(".open").selectAll("path#expand").attr("opacity",0),a.selectAll(".open").selectAll("path#expand").attr("display","block"),a.selectAll(".open").selectAll("path#expand").transition().duration(1e3).attr("opacity",1),a.selectAll(".row").classed("open",!1),a.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),a.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0),a.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=a.transform(a.select(this).attr("transform"));return"translate("+e.translate[0]+", -10)"})),a.selectAll(".row").classed("open",!1),a.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),a.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0),a.select(this.parentNode).classed("open",!0),a.select(this.parentNode).selectAll("rect#expand").attr("display","none"),a.select(this.parentNode).selectAll("path#expand").attr("display","none"),a.selectAll(".open").transition().duration(1e3).attr("viewBox","0 0 960 360"),a.selectAll(".open .rowContent").transition().duration(1e3).attr("opacity",1),a.select(this.parentNode).selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=a.transform(a.select(this).attr("transform"));return"translate("+e.translate[0]+", 0)"}));for(var r=a.selectAll(".row"),i=!1,s=!0,o=0;o<r[0].length;o++)a.select(r[0][o]).classed("open")&&(i=!0),i?(a.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px"),a.select(r[0][o]).select("path#expand").attr("transform","scale(1, -1) translate(480, -0)"),a.select(r[0][o]).select("path#expand:last-child").attr("transform","translate(480,0)")):(s=!1,a.select("#container").transition().duration(1e3).style("padding","8px 0px 0px 0px"),a.select(r[0][o]).select("path#expand").attr("transform","translate(480,30)"),a.select(r[0][o]).select("path#expand:last-child").attr("transform","scale(1, -1) translate(480, -30)"));s&&a.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px")})),i.on("click",(function(e,t){var a=n("5698");a.selectAll(".open").selectAll("rect#expand").attr("opacity",0),a.selectAll(".open").selectAll("rect#expand").attr("display","block"),a.selectAll(".open").selectAll("rect#expand").transition().duration(1e3).attr("opacity",.8),a.selectAll(".open").selectAll("path#expand").attr("opacity",0),a.selectAll(".open").selectAll("path#expand").attr("display","block"),a.selectAll(".open").selectAll("path#expand").transition().duration(1e3).attr("opacity",1),a.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=a.transform(a.select(this).attr("transform"));return"translate("+e.translate[0]+", -10)"})),a.selectAll(".row").classed("open",!1),a.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),a.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0),a.select(this.parentNode).classed("open",!0),a.select(this.parentNode).selectAll("rect#expand").attr("display","none"),a.select(this.parentNode).selectAll("path#expand").attr("display","none"),a.selectAll(".open").transition().duration(1e3).attr("viewBox","0 0 960 360"),a.selectAll(".open .rowContent").transition().duration(1e3).attr("opacity",1),a.select(this.parentNode).selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=a.transform(a.select(this).attr("transform"));return"translate("+e.translate[0]+", 0)"}));for(var r=a.selectAll(".row"),i=!1,s=!0,o=0;o<r[0].length;o++)a.select(r[0][o]).classed("open")&&(i=!0),i?(a.select(r[0][o]).select("path#expand").attr("transform","scale(1, -1) translate(480, -0)"),a.select(r[0][o]).select("path#expand:last-child").attr("transform","translate(480,0)")):(s=!1,a.select("#container").transition().duration(1e3).style("padding","8px 0px 0px 0px"),a.select(r[0][o]).select("path#expand").attr("transform","translate(480,30)"),a.select(r[0][o]).select("path#expand:last-child").attr("transform","scale(1, -1) translate(480, -30)"));s&&a.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px")}))},initialDisplay:function(e){if(window.innerHeight>window.innerWidth)this.d3.selectAll("rect#expand").attr("display","none"),this.d3.selectAll("path#expand").attr("display","none"),this.d3.selectAll(".row").classed("open",!0),this.d3.selectAll(".open").transition().duration(1e3).attr("viewBox","0 0 960 360"),this.d3.selectAll(".open .rowContent").transition().duration(1e3).attr("opacity",1),this.d3.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=n("5698"),t=e.transform(e.select(this).attr("transform"));return"translate("+t.translate[0]+", 0)"}));else if(window.innerHeight<.25*window.innerWidth)this.d3.selectAll("rect#expand").attr("display","block"),this.d3.selectAll("path#expand").attr("display","block"),this.d3.selectAll(".row").classed("open",!1),this.d3.selectAll(".row").transition().duration(500).attr("viewBox","0 0 960 35"),this.d3.selectAll(".rowContent").transition().duration(500).attr("opacity",0),this.d3.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=n("5698"),t=e.transform(e.select(this).attr("transform"));return"translate("+t.translate[0]+", -10)"}));else{var t=this.d3.select(".open");if(this.d3.selectAll("rect#expand").attr("display","block"),this.d3.selectAll("path#expand").attr("display","block"),this.d3.selectAll(".row").classed("open",!1),this.d3.selectAll(".row").transition().duration(500).attr("viewBox","0 0 960 35"),this.d3.selectAll(".rowContent").transition().duration(500).attr("opacity",0),e){t.classed("open",!0),t.select("rect#expand").attr("display","none"),t.selectAll("path#expand").attr("display","none"),t.transition().duration(1e3).attr("viewBox","0 0 960 360"),this.d3.selectAll(".open .rowContent").transition().duration(500).attr("opacity",1),this.d3.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=n("5698"),t=e.transform(e.select(this).attr("transform"));return"translate("+t.translate[0]+", -10)"})),t.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=n("5698"),t=e.transform(e.select(this).attr("transform"));return"translate("+t.translate[0]+", 0)"}));for(var a=this.d3.selectAll(".row"),r=!1,i=!0,s=0;s<a[0].length;s++)this.d3.select(a[0][s]).classed("open")&&(r=!0),r?(this.d3.select(a[0][s]).select("path#expand").attr("transform","scale(1, -1) translate(480, -0)"),this.d3.select(a[0][s]).select("path#expand:last-child").attr("transform","translate(480,0)")):(i=!1,this.d3.select("#container").transition().duration(1e3).style("padding","8px 0px 0px 0px"),this.d3.select(a[0][s]).select("path#expand").attr("transform","translate(480,30)"),this.d3.select(a[0][s]).select("path#expand:last-child").attr("transform","scale(1, -1) translate(480, -30)"));i&&this.d3.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px")}else t=this.d3.select(".row").classed("open",!0),this.d3.select("rect#expand").attr("display","none"),t.selectAll("path#expand").attr("display","none"),this.d3.selectAll(".open").transition().duration(500).attr("viewBox","0 0 960 360"),this.d3.selectAll(".open .rowContent").transition().duration(500).attr("opacity",1),this.d3.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=n("5698"),t=e.transform(e.select(this).attr("transform"));return"translate("+t.translate[0]+", -10)"})),t.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=n("5698"),t=e.transform(e.select(this).attr("transform"));return"translate("+t.translate[0]+", 0)"}))}},partitionToThree:function(e){var t=this.getListSum(e),n=t/3;e.push({name:"newPlaceholderNum",length:n});var a=this.partitionToTwo(e);a[1].pop();var r=this.partitionToTwo(a[0]);return[r[0],r[1],a[1]]},partitionToTwo:function(e){var t=this.getListSum(e),n=e.length-1;while(this.getListSum(e.slice(n))<t/2){if(this.getListSum(e.slice(n-1))>=t/2)break;n--}return[e.slice(0,n),e.slice(n)]},getListSum:function(e){return e.reduce((function(e,t){return e+t.length}),0)},sortStructures:function(e,t){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,n.getPositions(e);case 2:for(r=a.sent,i=0;i<t.length;i++)t[i].position=r[t[i].primary_accession];return t.sort((function(e,t){return e.position-t.position})),a.abrupt("return",t);case 6:case"end":return a.stop()}}),a)})))()},cleanProteins:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,r,i,s,o,c,l,d,u,h;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:for(a={},e.forEach((function(e){var t=a[e.position];t||(t=a[e.position]=[]),t.push(e)})),r=[],i=1;i<=Object.keys(a).length;i++)1!==a[i].length?function(){var e=void 0;a[i].forEach((function(t){e?t.length>e.length&&(e=t):e=t})),s=e;for(var n=0;n<a[i].length;n++)if(a[i][n].sequence!==e.sequence){for(o=t.findSubstring(a[i][n].sequence,e.sequence),s.sequence=s.sequence.replace(o,""),s.length=s.sequence.length,s.name=s.name+" (split)",a[i][n].continuous=!0,r.push(a[i][n]),s.fragments.length>0&&a[i][n].fragments.forEach((function(e){s.fragments=s.fragments.filter((function(t){return t.Name!==e.Name}))})),c=0;c<s.fragments.length;c++)s.fragments[c].Start=s.fragments[c].Start-a[i][n].length,s.fragments[c].Stop=s.fragments[c].Stop-a[i][n].length,s.fragments[c].Start<0&&(s.fragments[c].Start=0);for(s.fragments=s.fragments.filter((function(e){return e.Start>=0})),l=[],d=0;d<s.nonDark.length;d++)s.nonDark[d].Stop>a[i][n].length&&(u=s.nonDark[d].Start-a[i][n].length,u<0&&(u=0),h=s.nonDark[d].Stop-a[i][n].length,l.push({Primary_Accession:s.primary_accession,Start:u,Stop:h}));s.nonDark=l}s.continuous=!1,r.push(s)}():(a[i][0].continuous=!1,r.push(a[i][0]));return n.abrupt("return",r);case 5:case"end":return n.stop()}}),n)})))()},findSubstring:function(e,t){var n=e.length,a=0;while(a<n&&e.charAt(a)===t.charAt(a))a++;return e.substring(0,a)},getPositions:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="".concat(window.BACKEND,"/getGenomicPosition/").concat(e),a={},t.next=4,c()({method:"get",url:n}).then((function(e){for(var t=0;t<e.data.length;t++)a[e.data[t].primary_accession]=e.data[t].position_index}));case 4:return 0===Object.keys(a).length&&console.log("cannot get genomic positions of "+e+" in getPositions() Coverage.vue"),t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})))()},getProteinSynonyms:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=0;case 1:if(!(a<e.length)){n.next=9;break}return n.next=4,t.getSynonym(e[a].primary_accession);case 4:r=n.sent,e[a].synonym=r;case 6:a++,n.next=1;break;case 9:return n.abrupt("return",e);case 10:case"end":return n.stop()}}),n)})))()},getSynonym:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="".concat(window.BACKEND,"/getProteinSynonyms/").concat(e),a=[],t.next=4,c()({method:"get",url:n}).then((function(e){e.data.Synonym&&a.push(e.data.Synonym),a=a.concat(e.data.synonyms)}));case 4:return t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))()},getMatchingStructures:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=0;case 1:if(!(n<e.length)){t.next=9;break}return a={selector:[e[n].primary_accession]},r="".concat(window.BACKEND,"/get_matching_structures"),t.next=6,c()({method:"get",url:r,params:a}).then((function(t){"'Dark' protein"===t.data?(e[n].clusters=0,e[n].pdb=null):(e[n].clusters=t.data.clusters,e[n].pdb=t.data.Best_PDB.pdb_id)}));case 6:n++,t.next=1;break;case 9:return t.abrupt("return",e);case 10:case"end":return t.stop()}}),t)})))()},countMatchingStructures:function(e){return 0===e?0:e.reduce((function(e,t){return e+t.members.length}),0)},getNonDarkRegions:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=0;case 1:if(!(a<e.length)){n.next=9;break}return n.next=4,t.getNonDark(e[a].primary_accession);case 4:r=n.sent,e[a].nonDark=r;case 6:a++,n.next=1;break;case 9:return n.abrupt("return",e);case 10:case"end":return n.stop()}}),n)})))()},getNonDark:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="".concat(window.BACKEND,"getNonDarkRegions/").concat(e),a=[],t.next=4,c()({method:"get",url:n}).then((function(e){e.data&&(a=e.data)}));case 4:return t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))()},getStructures:function(e,t){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,i,s,o,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=[],a.next=3,n.sortStructures(e,t);case 3:t=a.sent,s=regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t[a].count=0,l={selector:[t[a].primary_accession]},i="".concat(window.BACKEND,"/get_3D_alignment"),e.next=5,c()({method:"get",url:i,params:l}).then((function(e){var i="";if(e.data.sequences){i=e.data.sequences[0];var s=i.length;console.log("Loaded ",t[a].synonym,s),r.push({name:t[a].synonym,primary_accession:t[a].primary_accession,sequence:i.sequence,position:t[a].position,length:s})}else i=e.data[t[a].primary_accession],r.push({name:t[a].synonym,primary_accession:t[a].primary_accession,sequence:i.sequence,position:t[a].position,length:i.length});return n.getFragments(t[a].primary_accession)})).then((function(e){r[a].fragments=e}));case 5:case"end":return e.stop()}}),e)})),o=0;case 6:if(!(o<t.length)){a.next=11;break}return a.delegateYield(s(o),"t0",8);case 8:o++,a.next=6;break;case 11:return a.next=13,n.getNonDarkRegions(r).then((function(e){return n.cleanProteins(e)}));case 13:return r=a.sent,a.abrupt("return",r);case 15:case"end":return a.stop()}}),a)})))()},getFragments:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="".concat(window.BACKEND,"/getProteinFragments/").concat(e),a=[],t.next=4,c()({method:"get",url:n}).then((function(e){e.data.length>0&&(a=e.data)}));case 4:return t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))()}}},p=h,m=(n("8c2b"),n("2877")),f=Object(m["a"])(p,a,r,!1,null,"441f3c45",null);t["default"]=f.exports},"20d9":function(e,t,n){e.exports=n.p+"img/search_dark.012aee91.png"},"22b1":function(e,t,n){n("4160"),n("b0c0"),n("159b");var a=n("1f25"),r=n("4b90"),i=function(e,t){var n=this;this.id=e,r.getUrlParameter("clearCache")&&localStorage.removeItem(this.id);var i=localStorage.getItem(this.id);if(this.cache=new a(t),null===i);else{var s=JSON.parse(i);s.forEach((function(e){n.cache.set(e.key,e.value)}))}};i.prototype.submitFired=function(e,t,n){var a={name:e,primary_accession:t,pdb_id:n};this.cache.set(t+n,a),this.save()},i.prototype.save=function(){var e=[];this.cache.forEach((function(t,n){e.push({key:n,value:t})}));var t=JSON.stringify(e);console.log("TopTen.save",e),localStorage.setItem(this.id,t)},i.prototype.getAll=function(){var e=[];return this.cache.forEach((function(t){e.push(t)})),e},i.prototype.savePDB=function(e,t){var n={};n.primary_acccession=e,n.pdb=t,this.cache.push(n)},i.prototype.previousLookup=function(e){var t=!1;return this.cache.forEach((function(n){n.primary_accession==e&&(t=n.pdb_id)})),t},i.prototype.previousLookupByName=function(e){var t=!1;return this.cache.forEach((function(n){n.name==e&&(t=n.pdb_id)})),t},i.prototype.updatePDB=function(e,t){this.cache.forEach((function(n){n.primary_accession==e&&(n.pdb_id=t)})),this.save()},e.exports=i},"23c5":function(e,t,n){},"2b1d":function(e,t,n){},"2bb0":function(e,t,n){n("7db0"),n("4160"),n("caad"),n("c975"),n("baa5"),n("d81d"),n("b0c0"),n("b64b"),n("d3b7"),n("4d63"),n("ac1f"),n("25f0"),n("2532"),n("466d"),n("5319"),n("841c"),n("1276"),n("2ca0");var a,r,i,s,o,c=n("9523"),l=n("29c86"),d=n("5698"),u=n("2ef0"),h=n("1157"),p=n("5a2b"),m=n("4b90"),f=n("1b1f"),g=n("4360");function v(){r=document.getElementById("structure-viewer").offsetWidth-AQUARIA.margin.right-AQUARIA.margin.left}function y(e){}var w,A=function(e,t){a=e||a,o=t||o,h("#featurelist div").remove(),AQUARIA.showMatchingStructures.drawAxisRuler("featurelist"),v(),i=0,s=0;var n=[],r=[],c=[];for(var l in AQUARIA.currentFeature={},AQUARIA.groupedFeatures=u.groupBy(a,(function(e){return e.Server})),AQUARIA.groupedFeatures=Object.keys(AQUARIA.groupedFeatures).map((function(e){return[String(e),AQUARIA.groupedFeatures[e]]})),a)n.push(a[l]);if(window.localStorage.getItem("featureOrder")&&window.localStorage.getItem("featureOrder").split(",").length>=AQUARIA.groupedFeatures.length){var f=window.localStorage.getItem("featureOrder").split(",");for(var l in f)for(var g=0;g<AQUARIA.groupedFeatures.length;g++)AQUARIA.groupedFeatures[g][0]==f[l]&&(c[l]=AQUARIA.groupedFeatures[g]);AQUARIA.groupedFeatures=c}var y=d.select("#featurelist").append("div").attr("id","featureContainer").append("div").attr("id","groupedFeatures");for(var l in AQUARIA.groupedFeatures){var w=y.append("div").attr("id",AQUARIA.groupedFeatures[l][0]).attr("class","featureCollection");w="UniProt"==AQUARIA.groupedFeatures[l][0]||"CATH"==AQUARIA.groupedFeatures[l][0]||"SNAP2"==AQUARIA.groupedFeatures[l][0]||"PredictProtein"==AQUARIA.groupedFeatures[l][0]?w.html("<div class='featureHeader'><p class='expand'>►</p><p class='featureName'>"+AQUARIA.groupedFeatures[l][0]+"</p><div class='info'>?</div></div><span class='tooltiptext'>"+AQUARIA.groupedFeatures[l][1][0].About+"</span>"):w.html("<div class='featureHeader'><p class='expand'>►</p><p class='featureName'>"+AQUARIA.groupedFeatures[l][0]+"</p><div class='info'>?</div><button id='remove' class='featureButtons'>Remove</button></div><span class='tooltiptext'>"+AQUARIA.groupedFeatures[l][1][0].About+"</span>"),w.append("div").attr("class","featureTrack").selectAll("div").data(AQUARIA.groupedFeatures[l][1]).enter().append("div").attr("class","track").html((function(e){if(""!=e.Type){if("UniProt"==e.Server||"PredictProtein"==e.Server||"CATH"==e.Server||"SNAP2"==e.Server||"COSMIC"==e.Server||"FunVar"==e.Server)var t="Curated Features";else t=e.Server;return"<p style='font-size: calc(9px + 0.1vw);'><b>"+e.Category+"</b> ("+e.Type.replace(/_/g," ")+") <span class='source'>"+t+"</span></p>"}return t="UniProt"==e.Server||"PredictProtein"==e.Server||"CATH"==e.Server||"SNAP2"==e.Server||"COSMIC"==e.Server||"FunVar"==e.Server?"Curated Features":e.Server,"<p><b>"+e.Category+"</b> <span class='source'>"+t+"</span></p>"})).each(S)}if(h("#featureCounter").show(),i>0){h("#featureCounter").text(i),h("#featureCounter").digits();var A="<p id='scrollToggle'><a href='javascript:$(\"#featureContainer\").toggleClass(\"noscroll\");'>Toggle scrolling</a></p>";h("#featureContainer").append(A)}else h("#featureCounter").text(i);function _(){if("none"!=document.getElementById("waitingFrame").style.display)setTimeout(_,50),console.log("REPEATING");else if(n.forEach((function(e){"Added Features"==e.Server&&r.push(e)})),r.length>0){console.log("Added features are (in featurelist.js "),console.log(r);var e=h('[id="Added Features"]').children().eq(2).children().eq(0).find("svg");if(e.length>0){var t=b(r);e.attr("class","loaded");var a=e.attr("id").split("_")[2];console.log("The addedFeatures[0] is "),console.log(r[t]),AQUARIA.customfeatureSet=r[t],AQUARIA.customfeatureSetioid=a,AQUARIA.passFeature(r[t],a),document.querySelector("#outerFeatureMap")&&document.querySelector("#outerFeatureMap").remove(),drawfeatureMap=p.createFeatureMap(r[t],o,!0),AQUARIA.addedFeature=!0,d.selectAll("svg.loaded rect.feature").attr("fill","#a4abdf"),d.select("svg.loaded").classed("loaded",!1)}}}d.selectAll(".expand").attr("style","font-size: calc(9px + 0.2vw);color: #848484;margin: 10px -7px 0px 0px;"),d.selectAll("#remove").on("click",(function(){h(this).parent().parent().remove()})),h("#groupedFeatures").sortable({axis:"y"}),h(".featureTrack").sortable({axis:"y"}).css({cursor:"move"}),h("#groupedFeatures").disableSelection(),h(".featureHeader").on("click",(function(){var e=h(this).parent().children().eq(2);e.slideToggle("slow"),e.is(":visible")&&h(this).addClass("actived"),"►"==h(this).children().eq(0).text()?(h(this).children().eq(0).text("▼"),h(this).children("button").css({visibility:"visible"})):(h(this).children().eq(0).text("►"),h(this).children("button").css({visibility:"hidden"}));var t=h('div[class*="actived"]').not(this);t.children().eq(0).text("►"),t.parent().children().eq(2).slideUp("slow"),t.children("button").css({visibility:"hidden"}),t.removeClass("actived")})),h(".featureHeader").on({mouseenter:function(){h(this).css({"background-color":"#BEBEBE",cursor:"pointer"})},mouseleave:function(){h(this).css({"background-color":"#cccccc"})},mousedown:function(){},mouseup:function(){h(this).css({cursor:"pointer"})}}),h(".info").find('span:contains("undefined")').parent().remove(),d.selectAll(".info").on({mouseenter:function(){h(this).css({"background-color":"orange",color:"white"}),h(this).parent().parent().children("span.tooltiptext").css({visibility:"visible"})},mouseleave:function(){h(this).css({"background-color":"white",color:"black"}),h(this).parent().parent().children("span.tooltiptext").css({visibility:"hidden"})}}),h(".tooltiptext").on({mouseenter:function(){h(this).css({visibility:"visible"})},mouseleave:function(){h(this).css({visibility:"hidden"})}}),f=new MutationObserver((function(e){var t=h("#groupedFeatures .featureCollection").map((function(){return h(this).attr("id")})).get();localStorage.setItem("featureOrder",t)})),f.observe(document.getElementById("groupedFeatures"),{attributes:!0,childList:!0});var I=new RegExp(/[A-Z a-z]+[0-9]+[A-za-z]+/),x=window.location.search.split("?")[1];(m.getUrlParameter("features")||x&&(I.test(x)||x.match(/^zenodo\./)))&&!AQUARIA.addedFeature&&_()};function b(e){var t=new RegExp(/[A-Z a-z]+[0-9]+[A-za-z]+/),n=window.location.search.split("?")[1],a=-1,r="",i=-1,s="",o=2,c=3;if(n&&(t.test(n)||n.match(/^zenodo\./))){var l=n.split(".");if(l.length<=2)return 0;isNaN(l[o])?(r=l[o],r=r.replace("%20"," ")):a=parseInt(l[o])-1,4==l.length?isNaN(l[c])?(s=l[c],s=s.replace("%20","")):i=parseInt(l[c])-1:i=0,console.log("The variables from the user are |"+a+"| |"+r+"| |"+i+"| |"+s+"|");var d,u=_(e),h="",p="";if(-1!=a)for(var m=Object.keys(u),f=0;f<m.length;f++)u[m[f]].order==a&&(h=m[f],console.log("Calculated 1 "+h+" idx_file "+a));else if(""!=r)for(var g=Object.keys(u),v=0;v<g.length;v++)g[v].startsWith(r)&&(h=g[v],console.log("Calculated 2 "+h+" name_file "+r));if(""==h)return console.log("Calculated no key_filename file "+h),0;if(-1!=i)for(var y=Object.keys(u[h]["featureSets"]),w=0;w<y.length;w++)u[h].featureSets[y[w]].order==i&&(p=y[w],d=u[h].featureSets[y[w]].posInTrack,console.log("Calculated 3 "+p+" idx_featSet "+i));else if(""!=s)for(var A=Object.keys(u[h]["featureSets"]),b=0;b<A.length;b++)A[b].startsWith(s)&&(p=A[b],d=u[h].featureSets[A[b]].posInTrack,console.log("Calculated 4 "+p+" name_featSet "+s));if(""==p){for(var I=Object.keys(u[h]["featureSets"]),S=-1,x=0;x<I.length;x++)(-1==S||u[h].featureSets[I[x]].order<S)&&(S=u[h].featureSets[I[x]].posInTrack,p=I[x]),console.log("The calculated minTrackVal "+S);d=S}return console.log("The calculated data is "+h+" "+p+" "+d),d}return 0}function _(e){for(var t,n={},a=0,r=0;r<e.length;r++)n.hasOwnProperty(e[r].Type)||(n[e[r].Type]={},n[e[r].Type]["order"]=a++,n[e[r].Type]["featureSets"]={}),n[e[r].Type]["featureSets"].hasOwnProperty(e[r].Category)||(t=I(n[e[r].Type]["featureSets"]),n[e[r].Type]["featureSets"][e[r].Category]={},n[e[r].Type]["featureSets"][e[r].Category]["order"]=t,n[e[r].Type]["featureSets"][e[r].Category]["posInTrack"]=r);return console.log("The re-built data structure is "),console.log(n),n}function I(e){var t=Object.keys(e);if(0==t.length)return 0;for(var n=0,a=0;a<t.length;a++)e[t[a]].order>n&&(n=e[t[a]].order);return n+1}function S(e,t){var n=e.Tracks;for(var a in viewBoxwidth=document.getElementById("structure-viewer").offsetWidth-window.AQUARIA.margin.right-window.AQUARIA.margin.left,e.Server,n){var c=d.select(this),l=p.createSVGforFeature(c,r+AQUARIA.margin.left,25,viewBoxwidth);for(var u in l.attr("id","s_"+s+"_"+a).on("click",(function(){if("loaded"==d.select(this).attr("class"))AQUARIA.currentFeature.oid=null,AQUARIA.currentFeature.data=null,document.querySelector(".featureHeader.actived").click(),d.select("svg.loaded").classed("loaded",!1),g.default.commit("showLoader",!0),g.default.commit("setLoaderMsg","Removing feature..."),g.default.commit("showLoader",!1),"function"===typeof AQUARIA.onFeatureChange&&AQUARIA.onFeatureChange(null,0),U(),document.querySelector("#outerFeatureMap").remove(),document.querySelector("#popup").style.display="none",AQUARIA.showMatchingStructures.showMap(AQUARIA.showMatchingStructures.cluster),f.hidePanels();else{document.querySelector("#outerFeatureMap")&&document.querySelector("#outerFeatureMap").remove();var t=d.select(this).attr("id").split("_")[2];AQUARIA.currentFeature.oid=t,AQUARIA.currentFeature.data=e,g.default.commit("showLoader",!0),g.default.commit("setLoaderMsg","Loading feature..."),g.default.commit("showLoader",!1),"Added Features"!=e.Server&&(AQUARIA.addedFeature=!1),"function"===typeof AQUARIA.onFeatureChange&&AQUARIA.onFeatureChange(e,t),d.selectAll("svg.loaded rect.feature").attr("fill","#a4abdf"),d.select("svg.loaded").classed("loaded",!1),d.select(this).attr("class","loaded"),drawfeatureMap=p.createFeatureMap(AQUARIA.currentFeature.data,o),AQUARIA.passFeature(e,t,this),f.hidePanels()}})).on("mouseover",(function(){d.select(this).selectAll("rect.feature").attr("fill",(function(){return d.select(this).attr("color")}))})).on("mouseout",(function(){"loaded"!==d.select(this).attr("class")&&d.select(this).selectAll("rect.feature").attr("fill","#a4abdf")})).append("rect").attr("width",r+AQUARIA.margin.left).attr("height",25).attr("class","bg").attr("fill","none"),d.select("svg#s_"+s+"_"+a).append("g").attr("transform","translate("+AQUARIA.margin.left+",0)").append("rect").attr("width",r).attr("height",1).attr("transform","translate(0,13)").attr("class","insertion"),n[a])i++,d.select("#s_"+s+"_"+a+" g").append("rect").attr("width",(function(){return(n[a][u].size+1)*AQUARIA.srw>2?(n[a][u].size+1)*AQUARIA.srw:2})).attr("height",14).attr("id","r_"+s+"_"+a+"_"+u).attr("transform","translate("+n[a][u].start*(AQUARIA.srw-.0085)+",6)").attr("color",n[a][u].color).attr("fill","#a4abdf").attr("fill-opacity",(function(){return"single_track"==e.Class?.3:1})).attr("class","feature").on("mouseover",x(n[a][u])).on("mouseout",(function(){var e=d.select(this).attr("id");return d.select(this).call(k,e)}))}s++}function x(e){return function(){var t=d.select(this).attr("id");d.select(this).call(R,e,t)}}function R(e,t,n){w=setTimeout((function(){V(t,n)}),500),d.select("#"+n).attr("stroke-width","2px").attr("stroke","white")}function C(){return new Promise((function(e,t){var n=document.getElementById("superFamCharts_0_go");document.getElementById("superFamCharts").append(n)}))}function k(e,t){clearTimeout(w),d.select("#"+t).attr("stroke-width","0px"),setTimeout((function(){C().then((function(){h("div.popup").fadeOut()})).catch((function(e){h("div.popup").fadeOut()}))}),500)}function E(e){return new Promise((function(t,n){document.getElementById(e)&&document.getElementById(e).remove();var a=document.createElement("div");document.getElementById("superFamCharts").append(a),a.id=e,a.style="width: 100px; height: 100px; margin: 0 auto; background-color: white;",t()}))}function O(e,t,n,a,r,i,s,o,c,d,u){return new Promise((function(h,p){E(e).then((function(){try{l.chart(e,{chart:{type:"pie",margin:0},title:{text:a},plotOptions:{pie:{shadow:!1,center:["50%","50%"]}},tooltip:{valueSuffix:"%"},series:[{name:c,data:t,size:r,dataLabels:{enabled:!1,formatter:function(){return this.y>3?this.point.name:null},color:i,distance:s}},{name:d,data:n,innerSize:o,dataLabels:{enabled:!1,formatter:function(){return this.y>1?"<b>"+this.point.name+":</b> "+this.y+"%":null},color:u},id:"versions"}],responsive:{rules:[{condition:{maxWidth:100},chartOptions:{series:[{},{id:"versions",dataLabels:{enabled:!1}}]}}]}}),h()}catch(p){console.log("Highcharts error"),console.log(p),h(),console.log("In the highcharts plotting function")}}))}))}AQUARIA.passFeature=function(e,t,n){"function"===typeof AQUARIA.onFeatureChange&&AQUARIA.onFeatureChange(e,t),N(e,parseInt(t))};var P=n("9e89"),B=["A","C","D","E","F","G","H","I","K","L","M","N","P","Q","R","S","T","V","W","Y"];function V(e,t){console.log("showAnnotation.f is "),console.log(e),console.log(t);var n="";if(e.urls.length>0){n="<p>";for(var a=0;a<e.urls.length;a++)n+="<a href='"+e.urls[a].href+"' target='_blank'>"+e.urls[a].text+"</a><br>";n+="</p>"}h("div.popup").remove();var r="",i="";e.name.includes("&#8201;&#8594;&#8201;")&&(i=e.name.replace(/^.*\(/,""),i=i.replace(/\&.*$/,""));var s="<div id='buttons_eachAa'> <b>See also:</b><p class='pAaColor'> "+i+" &rarr;</p>";if(B.forEach((function(t,n){if(t!=i){var a=D(t,e.desc,e.start);s=s+"<button id='btnVI_"+t+"'",s=1==a?s+"class='btnAaBold_b'> <b>"+t+"</b> ":s+" class='btnAaBold'> "+t,s+="</button>"}})),s+="</div>",e.name.includes("span_missenseHeading")&&"undefined"!==typeof o){for(var c in o)!1===o[c]&&!0}var l="<b>"+e.label+"</b>";e.name.includes("span_missenseHeading")||(l+=" (",l=e.start===e.end?l+"Residue "+e.start:l+"Residues "+e.start+"-"+e.end,l+=") "),e.name.includes("span_missenseHeading");var d=e.desc+"<br>"+n;e.name.includes("span_missenseHeading")?e.start!=e.end?(g.default.commit("setVariant",e.start+"-"+e.end),g.default.commit("setPopupTitle",e.label),T(e.start+"-"+e.end,e.label)):(g.default.commit("setVariant",e.start),g.default.commit("setPopupTitle",e.label),T(e.start,e.label)):(g.default.commit("setVariant",-1),g.default.commit("setPopupTitle",l),g.default.commit("setPopupText",d),g.default.commit("setVariantIdx",-1)),e.hasOwnProperty("hc_go")&&e.hasOwnProperty("hc_ec")&&e.hasOwnProperty("hc_species")?(console.log("CATH plot data"),console.log(e),L(e).then((function(){M()}))):(console.log("CATH plot no data"),console.log(e));var u=document.querySelector("#"+t).getBoundingClientRect(),p=document.querySelector("#"+t).getBBox(),m=p.width;P.appendPopup(r,u,m,!1)}function T(e,t){var n=g.default.getters.getVariantResidues;if(console.log("GAMMA "+e+" "+t),console.log(n),n.hasOwnProperty(e)&&n[e].hasOwnProperty("theOrigFeatStr"))for(var a=0;a<n[e].theOrigFeatStr.length;a++)if(t.includes(n[e].theOrigFeatStr[a])){g.default.commit("setVariantIdx",a),console.log("Set variant idx "+a);break}}function D(e,t,n){var a="<toReplace_varInfo_"+e+">",r="</toReplace_varInfo_"+e+">",i=t.indexOf(a),s=t.lastIndexOf(r),o=t.substring(i,s);return!!(o.match("UniProt")||o.match("FunVar")||o.match("COSMIC")||window.AQUARIA.variantStructs.hasOwnProperty(n)&&window.AQUARIA.variantStructs[n].hasOwnProperty(e)&&window.AQUARIA.variantStructs[n][e].hasOwnProperty("pdbs")&&window.AQUARIA.variantStructs[n][e]["pdbs"].length>0)}function L(e){return new Promise((function(t,n){"undefined"!==typeof e.hc_go&&e.hc_go.hasOwnProperty("data")&&e.hc_go.data.hasOwnProperty("series")&&e.hc_go.data.series.length>=2?O("hc_go_div",e.hc_go.data.series[0].data,e.hc_go.data.series[1].data,"",e.hc_go.data.series[0].size,e.hc_go.data.series[0].dataLabels.color,e.hc_go.data.series[0].dataLabels.dist,e.hc_go.data.series[1].innerSize,e.hc_go.data.series[0].name,e.hc_go.data.series[1].name,e.hc_go.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_div"))})).catch((function(e){console.log("CATH plot: 2"),E("hc_go_noData").then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_noData")),document.getElementById("hc_go_noData").innerHTML=document.getElementById("hc_go_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+e)}))})):(E("hc_go_noData").then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_noData")),document.getElementById("hc_go_noData").innerHTML=document.getElementById("hc_go_noData").innerHTML+"<br> <br> <center> No data</center>"})),console.log("CATH plot: 3")),"undefined"!==typeof e.hc_ec&&e.hc_ec.hasOwnProperty("data")&&e.hc_ec.data.hasOwnProperty("series")&&e.hc_ec.data.series.length>=2?O("hc_ec_div",e.hc_ec.data.series[0].data,e.hc_ec.data.series[1].data,"",e.hc_ec.data.series[0].size,e.hc_ec.data.series[0].dataLabels.color,e.hc_ec.data.series[0].dataLabels.dist,e.hc_ec.data.series[1].innerSize,e.hc_ec.data.series[0].name,e.hc_ec.data.series[1].name,e.hc_ec.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_div"))})).catch((function(e){E("hc_ec_noData").then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_noData")),document.getElementById("hc_ec_noData").innerHTML=document.getElementById("hc_ec_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+e)}))})):E("hc_ec_noData").then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_noData")),document.getElementById("hc_ec_noData").innerHTML=document.getElementById("hc_ec_noData").innerHTML+"<br> <br> <center> No data</center>"})).catch((function(){})),"undefined"!==typeof e.hc_species&&e.hc_species.hasOwnProperty("data")&&e.hc_species.data.hasOwnProperty("series")&&e.hc_species.data.series.length>=2?O("hc_species_div",e.hc_species.data.series[0].data,e.hc_species.data.series[1].data,"",e.hc_species.data.series[0].size,e.hc_species.data.series[0].dataLabels.color,e.hc_species.data.series[0].dataLabels.dist,e.hc_species.data.series[1].innerSize,e.hc_species.data.series[0].name,e.hc_species.data.series[1].name,e.hc_species.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_div"))})).catch((function(e){E("hc_species_noData").then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_noData")),document.getElementById("hc_species_noData").innerHTML=document.getElementById("hc_species_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+e)}))})):E("hc_species_noData").then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_noData")),document.getElementById("hc_species_noData").innerHTML=document.getElementById("hc_species_noData").innerHTML+"<br> <br> <center> No data</center>"})),t()}))}function M(){var e=document.getElementsByClassName("highcharts-pie-series");for(var t in e)if(e.hasOwnProperty(t)){var n=e[t].getElementsByTagName("path");for(var a in n)if(n.hasOwnProperty(a)){var r=n[a].getAttribute("fill");n[a].removeAttribute("fill"),n[a].setAttribute("style","fill:"+r)}}}function U(){var e=AQUARIA.currentAnnotationsIn3DViewer;if(void 0!==e){for(var t in e)AQUARIA.panel3d.seqId!=e[t].id&&AQUARIA.panel3d.removeAnnotation(e[t].id,e[t].annotationName);e.length=0}}function N(e,t){if(t="undefined"!==typeof t?t:-1,U(),t>=0)F(e,t);else for(t in e.Tracks)F(e,t)}function F(e,t){var n=new Array,a=new Array,r=new Array,i=new Array,s=new Array,o=new Array,l="#ffffff";if(void 0!=e){var d;for(var u in e.featureColours&&e.featureColours.length>0&&(l=e.featureColours[0]),e.Tracks[t])if(e.Tracks[t][u].show){if("multi_color"!==e.Class.color)e.Tracks[t][u].color.substring(1);for(var h in e.Tracks[t][u].color?n.push(e.Tracks[t][u].color):n.push(l),a.push(e.Tracks[t][u].label),r.push(e.Tracks[t][u].desc),i.push(e.Tracks[t][u].start+":"+e.Tracks[t][u].end),fURLs=new Array,fURLtxts=new Array,e.Tracks[t][u].urls)fURLs.push(e.Tracks[t][u].urls[h].href),fURLtxts.push(e.Tracks[t][u].urls[h].text);s.push(fURLs),o.push(fURLtxts)}var p=(d={id:e.ProteinID,annotationName:e.Category,featureColours:n,featureNames:a,featureDescriptions:r,featurePositions:i,featureURLs:s},c(d,"featureURLs",s),c(d,"featureURLtexts",o),c(d,"featureURLtexts",o),d);AQUARIA.currentAnnotationsIn3DViewer.push(p),Array.isArray(p.id)?AQUARIA.panel3d.addAnnotation(p.id[0],p.annotationName,n,a,r,i,s,o):AQUARIA.panel3d.addAnnotation(p.id,p.annotationName,n,a,r,i,s,o)}}AQUARIA.currentAnnotationsIn3DViewer=new Array,e.exports.updateFeatureUI=A,e.exports.updateFeatureTabTitle=y},"2c07":function(e,t,n){e.exports=n.p+"img/aquaria-symbol-01.057e39d9.svg"},"31c8":function(e,t,n){e.exports=n.p+"img/up.64c3e14c.png"},3403:function(e,t,n){},"361b":function(e,t,n){"use strict";n("b923")},"39b5":function(e,t,n){e.exports=n.p+"img/MS-01.f169151b.svg"},"39dd":function(e,t,n){"use strict";n("e4c6")},"3cb4":function(e,t,n){"use strict";n("23c5")},"41b6":function(e,t,n){"use strict";n("4f7f")},"46c7":function(e,t,n){},"4c7a":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAQCAYAAADqDXTRAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNq8020KgCAMBmAb0TGDQLyY0Ek6SbcoEHKg0YfWttLBK+iczy8bY8yilOpUvVrBL9rHVQLR0Yhan6EC7IJjIRyUhncQN3BolIJP4BUtAd/AFPonnARzaIT7D7AL8zbVhIfBUQhHcMxdgJcHuPArSEE5MAmkohSYDHLQJ5gFctEUzAYl6BFeJSBWK/yHCE0+s2R4E2AAhOs7b2YKWEMAAAAASUVORK5CYII="},"4d26":function(e,t,n){"use strict";n("9363")},"4f7f":function(e,t,n){},"55a4":function(e,t,n){"use strict";n("a968")},"5a2b":function(e,t,n){"use strict";n.r(t),n.d(t,"createFeatureMap",(function(){return h})),n.d(t,"createSVGforFeature",(function(){return p})),n.d(t,"drawTrack",(function(){return m})),n.d(t,"drawFeatures",(function(){return g})),n.d(t,"createMouseOverCallback",(function(){return v})),n.d(t,"mouseoverFeature",(function(){return _})),n.d(t,"mouseoutFeature",(function(){return I})),n.d(t,"moveTheDiv",(function(){return S})),n.d(t,"removeCurrentAnnotationFrom3DViewer",(function(){return R}));n("cb29"),n("4160"),n("caad"),n("c975"),n("baa5"),n("b0c0"),n("b64b"),n("d3b7"),n("ac1f"),n("2532"),n("466d"),n("5319"),n("1276"),n("159b");var a=n("5698"),r=n.n(a),i=n("1157"),s=n.n(i),o=n("1b1f"),c=n("9e89"),l=(n("ae8a"),n("4360")),d=n("29c86"),u="";function h(e,t,n){console.log("DOES IT COME HERE .... FEATURE MAP"),document.querySelectorAll("#selectedCluster [id*='r_'] rect").forEach((function(e){e.style.fill="#a5a5a5",e.style.stroke="#a5a5a5"})),document.querySelectorAll("#selectedCluster [id*='r_'] polygon").forEach((function(e){e.style.fill="#a5a5a5",e.style.stroke="#a5a5a5"})),this.width=document.getElementById("structure-viewer").offsetWidth/1.2-window.AQUARIA.margin.right-window.AQUARIA.margin.left,this.height=40-window.AQUARIA.margin.top-window.AQUARIA.margin.bottom+35,this.datum=e;var a=r.a.select("#selectedFeature").append("div").attr("id","outerFeatureMap");this.drawTrack(this.datum,this.createSVGforFeature(a,"100vw",this.height+10,this.width+1),t,n),r.a.select("#outerFeatureMap > svg").attr("class","loadedFeature")}function p(e,t,n,a){return this.nusvg=e.append("svg").attr("width",t).attr("height",n).attr("viewBox","0 0 "+a+" "+n).attr("preserveAspectRatio","none"),this.nusvg}function m(e,t,n,a){var i=this,s=[];this.nusvg=t;var c=window.AQUARIA;for(var d in c.currentFeature.oid&&e&&e.Tracks&&e.Tracks.length>1?s[0]=e.Tracks[c.currentFeature.oid]:e&&e.Tracks&&(s=e.Tracks),this.nusvg.on("click",(function(){if(r.a.select(this).attr("class").includes("loaded"))window.location.hash.includes("Features")&&(r.a.select("svg.loaded").classed("loaded",!1),l["default"].commit("showLoader",!0),l["default"].commit("setLoaderMsg","Removing feature..."),l["default"].commit("showLoader",!1),"function"===typeof c.onFeatureChange&&c.onFeatureChange(null,0),i.removeCurrentAnnotationFrom3DViewer(),c.currentFeature.oid=null,c.currentFeature.data=null,document.querySelector("#outerFeatureMap").remove(),document.querySelector("#popup").style.display="none",c.showMatchingStructures.showMap(c.showMatchingStructures.cluster),o["hidePanels"]());else{document.querySelector(".featureHeader.actived").click(),document.querySelector("#outerFeatureMap")&&document.querySelector("#outerFeatureMap").remove();var t=r.a.select(this).attr("id").split("_")[2];l["default"].commit("showLoader",!0),l["default"].commit("setLoaderMsg","Loading feature..."),l["default"].commit("showLoader",!1),"Added Features"!==e.Server&&(c.addedFeature=!1),c.passFeature(e,t,this),"function"===typeof c.onFeatureChange&&c.onFeatureChange(e,t),r.a.selectAll("svg.loaded rect.feature").attr("fill","#a4abdf"),r.a.select("svg.loaded").classed("loaded",!1),r.a.select(this).attr("class","loaded"),i.createFeatureMap(e,n),o["hidePanels"]()}})),this.nusvg.append("rect").attr("width",this.width+c.margin.left).attr("height",25).attr("class","bg").attr("fill","none"),s)this.nusg=this.nusvg.append("g").attr("transform","translate(0 ,20)"),this.nusg.append("rect").attr("width",this.width).attr("height",1).attr("transform","translate(0,13)").attr("class","insertion");for(var h in s[d])if(a&&"undefined"!==typeof a&&1==a){var p=f(s);if(-1!=p.o&&-1!=p.p){for(var m=0;m<s[p.o].length;m++)this.drawFeatures(m,p.o,s,n);r.a.selectAll("#selectedFeature rect.feature").attr("fill",(function(){return r.a.select(this).attr("color")})),u="r_"+p.o+"_"+p.p;var g=document.getElementById(u);console.log("The first specified element is "+g);var v=new MouseEvent("mouseover",{view:window,bubbles:!0,cancelable:!0});g.dispatchEvent(v),r.a.select("#"+u).attr("stroke-width","0px")}else this.drawFeatures(h,d,s,n,this)}else this.drawFeatures(h,d,s,n,this);r.a.selectAll("#selectedFeature rect.feature").attr("fill",(function(){return r.a.select(this).attr("color")}))}function f(e){for(var t=l["default"].getters.getVariantResidues,n="",a=Object.keys(t),r=0;r<a.length;r++)if(t[a[r]].hasOwnProperty("order")&&t[a[r]].order.includes(0)){var i=t[a[r]].order.indexOf(0);-1!==i&&(n=t[a[r]].theOrigFeatStr[i])}var s={o:-1,p:-1};if(""!=n&&e.length>0)for(r=0;r<e.length;r++)for(var o=0;o<e[r].length;o++)e[r][o].name.includes(n)&&(s.o=r,s.p=o,console.log("YAY THE FEATURE STRING WAS FOUND "+s.o+" "+s.p));return s}function g(e,t,n,a){document.getElementById("structure-viewer").offsetWidth;var i=window.AQUARIA.showMatchingStructures.sequence.length,s=r.a.scale.linear().domain([1,i]).range([1,document.getElementById("structure-viewer").offsetWidth/1.2-window.AQUARIA.margin.right-window.AQUARIA.margin.left-5]),o=s(parseInt(n[t][e].start));this.nusg.append("rect").attr("width",(function(){return parseInt((n[t][e].size+1)*window.AQUARIA.coverageMapsrw)>2?parseInt((n[t][e].size+1)*window.AQUARIA.coverageMapsrw):2})).attr("height",14).attr("id","r_"+t+"_"+e).attr("x",o).attr("transform","translate(0,6)").attr("color",n[t][e].color).attr("fill","#a4abdf").attr("class","feature").on("mouseover",v(n[t][e],a)).on("mouseout",(function(){var e=r.a.select(this).attr("id");return r.a.select(this).call(I,e)}))}function v(e,t){return function(){var n=r.a.select(this).attr("id");r.a.select(this).call(_,e,n,t)}}var y,w=["A","C","D","E","F","G","H","I","K","L","M","N","P","Q","R","S","T","V","W","Y"];function A(e,t,n){console.log("showAnnotation.f is "),console.log(e),console.log(t);var a="";if(e.urls.length>0){a="<p>";for(var r=0;r<e.urls.length;r++)a+="<a href='"+e.urls[r].href+"' target='_blank'>"+e.urls[r].text+"</a>";a+="</p>"}var i="",s="";e.name.includes("&#8201;&#8594;&#8201;")&&(s=e.name.replace(/^.*\(/,""),s=s.replace(/\&.*$/,""));var o='<div id="buttons_eachAa"> <b>See also:</b><p class="pAaColor"> '+s+" &rarr;</p>";if(w.forEach((function(t,n){if(t!==s){var a=x(t,e.desc,e.start);o=o+"<button id='btnVI_"+t+"'",o=!0===a?o+' class="btnAaBold_b"> <b>'+t+"</b> ":o+' class="btnAaBold"> '+t,o+="</button>"}})),o+="</div>",e.name.includes("span_missenseHeading")&&"undefined"!==typeof n){for(var d in n)!1===n[d]&&!0}var u="<b>"+e.label+"</b>";e.name.includes("span_missenseHeading")||(u+=" (",u=e.start===e.end?u+"Residue "+e.start:u+"Residues "+e.start+"-"+e.end,u+=") "),e.name.includes("span_missenseHeading");var h=e.desc+"<br>"+a;e.name.includes("span_missenseHeading")?e.start!=e.end?(l["default"].commit("setVariant",e.start+"-"+e.end),l["default"].commit("setPopupTitle",e.label),b(e.start+"-"+e.end,e.label)):(l["default"].commit("setVariant",e.start),l["default"].commit("setPopupTitle",e.label),b(e.start,e.label)):(l["default"].commit("setVariant",-1),l["default"].commit("setPopupTitle",u),l["default"].commit("setPopupText",h),l["default"].commit("setVariantIdx",-1)),Object.prototype.hasOwnProperty.call(e,"hc_go")&&Object.prototype.hasOwnProperty.call(e,"hc_ec")&&Object.prototype.hasOwnProperty.call(e,"hc_species")?C(e).then((function(){k()})):(console.log("CATH plot no data"),console.log(e));var p=document.querySelector("#"+t).getBoundingClientRect(),m=document.querySelector("#"+t).getBBox(),f=m.width;c["appendPopup"](i,p,f,!0)}function b(e,t){var n=l["default"].getters.getVariantResidues;if(console.log("GAMMA "+e+" "+t),console.log(n),n.hasOwnProperty(e)&&n[e].hasOwnProperty("theOrigFeatStr"))for(var a=0;a<n[e].theOrigFeatStr.length;a++)if(t.includes(n[e].theOrigFeatStr[a])){l["default"].commit("setVariantIdx",a),console.log("Set variant idx "+a);break}}function _(e,t,n,a){y=setTimeout((function(){A(t,n,a)}),500),r.a.select("#"+n).attr("stroke-width","2px").attr("stroke","white")}function I(e,t){clearTimeout(y),r.a.select("#"+t).attr("stroke-width","0px"),setTimeout((function(){S().then((function(){s()("div.popup").fadeOut()})).catch((function(e){console.log(e)}))}),500)}function S(){return new Promise((function(e,t){var n=document.getElementById("superFamCharts_0_go");document.getElementById("superFamCharts").append(n)}))}function x(e,t,n){var a="<toReplace_varInfo_"+e+">",r="</toReplace_varInfo_"+e+">",i=t.indexOf(a),s=t.lastIndexOf(r),o=t.substring(i,s);return!!(o.match("UniProt")||o.match("FunVar")||o.match("COSMIC")||window.AQUARIA.hasOwnProperty("variantStructs")&&window.AQUARIA.variantStructs&&window.AQUARIA.variantStructs.hasOwnProperty(n)&&window.AQUARIA.variantStructs[n].hasOwnProperty(e)&&window.AQUARIA.variantStructs[n][e].hasOwnProperty("pdbs")&&window.AQUARIA.variantStructs[n][e]["pdbs"].length>0)}function R(){var e=window.AQUARIA.currentAnnotationsIn3DViewer;if(void 0!==e){for(var t in e)window.AQUARIA.panel3d.removeAnnotation(e[t].id,e[t].annotationName);e.length=0}}function C(e){return new Promise((function(t,n){"undefined"!==typeof e.hc_go&&Object.prototype.hasOwnProperty.call(e.hc_go,"data")&&Object.prototype.hasOwnProperty.call(e.hc_go.data,"series")&&e.hc_go.data.series.length>=2?E("hc_go_div",e.hc_go.data.series[0].data,e.hc_go.data.series[1].data,"",e.hc_go.data.series[0].size,e.hc_go.data.series[0].dataLabels.color,e.hc_go.data.series[0].dataLabels.dist,e.hc_go.data.series[1].innerSize,e.hc_go.data.series[0].name,e.hc_go.data.series[1].name,e.hc_go.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_div"))})).catch((function(e){O("hc_go_noData").then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_noData")),document.getElementById("hc_go_noData").innerHTML=document.getElementById("hc_go_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+e)}))})):O("hc_go_noData").then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_noData")),document.getElementById("hc_go_noData").innerHTML=document.getElementById("hc_go_noData").innerHTML+"<br> <br> <center> No data</center>"})),"undefined"!==typeof e.hc_ec&&Object.prototype.hasOwnProperty.call(e.hc_ec,"data")&&Object.prototype.hasOwnProperty.call(e.hc_ec.data,"series")&&e.hc_ec.data.series.length>=2?E("hc_ec_div",e.hc_ec.data.series[0].data,e.hc_ec.data.series[1].data,"",e.hc_ec.data.series[0].size,e.hc_ec.data.series[0].dataLabels.color,e.hc_ec.data.series[0].dataLabels.dist,e.hc_ec.data.series[1].innerSize,e.hc_ec.data.series[0].name,e.hc_ec.data.series[1].name,e.hc_ec.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_div"))})).catch((function(e){O("hc_ec_noData").then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_noData")),document.getElementById("hc_ec_noData").innerHTML=document.getElementById("hc_ec_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+e)}))})):O("hc_ec_noData").then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_noData")),document.getElementById("hc_ec_noData").innerHTML=document.getElementById("hc_ec_noData").innerHTML+"<br> <br> <center> No data</center>"})).catch((function(){})),"undefined"!==typeof e.hc_species&&Object.prototype.hasOwnProperty.call(e.hc_species,"data")&&Object.prototype.hasOwnProperty.call(e.hc_species.data,"series")&&e.hc_species.data.series.length>=2?E("hc_species_div",e.hc_species.data.series[0].data,e.hc_species.data.series[1].data,"",e.hc_species.data.series[0].size,e.hc_species.data.series[0].dataLabels.color,e.hc_species.data.series[0].dataLabels.dist,e.hc_species.data.series[1].innerSize,e.hc_species.data.series[0].name,e.hc_species.data.series[1].name,e.hc_species.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_div"))})).catch((function(e){O("hc_species_noData").then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_noData")),document.getElementById("hc_species_noData").innerHTML=document.getElementById("hc_species_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+e)}))})):O("hc_species_noData").then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_noData")),document.getElementById("hc_species_noData").innerHTML=document.getElementById("hc_species_noData").innerHTML+"<br> <br> <center> No data</center>"})),t()}))}function k(){var e=document.getElementsByClassName("highcharts-pie-series");for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=e[t].getElementsByTagName("path");for(var a in n)if(Object.prototype.hasOwnProperty.call(n,a)){var r=n[a].getAttribute("fill");n[a].removeAttribute("fill"),n[a].setAttribute("style","fill:"+r)}}}function E(e,t,n,a,r,i,s,o,c,l,u){return new Promise((function(h,p){O(e).then((function(){try{d.chart(e,{chart:{type:"pie",margin:0},title:{text:a},plotOptions:{pie:{shadow:!1,center:["50%","50%"]}},tooltip:{valueSuffix:"%"},series:[{name:c,data:t,size:r,dataLabels:{enabled:!1,formatter:function(){return this.y>3?this.point.name:null},color:i,distance:s}},{name:l,data:n,innerSize:o,dataLabels:{enabled:!1,formatter:function(){return this.y>1?"<b>"+this.point.name+":</b> "+this.y+"%":null},color:u},id:"versions"}],responsive:{rules:[{condition:{maxWidth:100},chartOptions:{series:[{},{id:"versions",dataLabels:{enabled:!1}}]}}]}}),h()}catch(p){console.log("Highcharts error"),console.log(p),h()}}))}))}function O(e){return new Promise((function(t,n){document.getElementById(e)&&document.getElementById(e).remove();var a=document.createElement("div");document.getElementById("superFamCharts").append(a),a.id=e,a.style="width: 100px; height: 100px; margin: 0 auto; background-color: white;",t()}))}},"61c9":function(e,t,n){},"62bc":function(e,t,n){e.exports=n.p+"img/down.7ae68b7a.png"},"65ed":function(e,t,n){"use strict";n("77f0")},"69c8":function(e,t,n){},"715b":function(e,t,n){"use strict";n("ea62")},"734d":function(e,t,n){},"77f0":function(e,t,n){},7829:function(e,t,n){},"7f5f":function(e,t,n){"use strict";n("2b1d")},8673:function(e,t,n){e.exports=n.p+"img/aquaria-loader3.223aec7b.svg"},"88de":function(e,t,n){"use strict";n("a309")},"8c2b":function(e,t,n){"use strict";n("def1")},"8f69":function(e,t,n){},"8f89":function(e,t,n){"use strict";n("7829")},9216:function(e,t,n){},"92b5":function(e,t,n){"use strict";n("69c8")},9363:function(e,t,n){},"9bcc":function(e,t,n){},"9db5":function(e,t,n){e.exports=n.p+"img/FT-01.e4a6c439.svg"},a01c:function(e,t,n){"use strict";n("734d")},a309:function(e,t,n){},a356:function(e,t,n){"use strict";n("9216")},a6f5:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGoWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0NDYwLCAyMDIwLzA1LzEyLTE2OjA0OjE3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMC0xMS0wN1QxODo0Njo0OC0wNTowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjAtMTItMDlUMDg6NDk6MTYtMDU6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjAtMTItMDlUMDg6NDk6MTYtMDU6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjEzNGEyNTEtODFjYy00ZDNjLWJhMmQtY2VhMmM1MGY2YmQxIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ZTFkNTMwYWUtYzY2MS0wMjRlLTk1ZTItNTU4ODI4OWU1NTkxIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YjhlNjQyOWMtMjlkZS00NTc2LWEzN2MtMjM4NDJiNGUyZjA5IiB0aWZmOk9yaWVudGF0aW9uPSIxIiB0aWZmOlJlc29sdXRpb25Vbml0PSIyIiBleGlmOkNvbG9yU3BhY2U9IjEiIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSI3MDAiIGV4aWY6UGl4ZWxZRGltZW5zaW9uPSI3MDAiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiOGU2NDI5Yy0yOWRlLTQ1NzYtYTM3Yy0yMzg0MmI0ZTJmMDkiIHN0RXZ0OndoZW49IjIwMjAtMTItMDlUMDg6NDI6NTQtMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4yIChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoyMTM0YTI1MS04MWNjLTRkM2MtYmEyZC1jZWEyYzUwZjZiZDEiIHN0RXZ0OndoZW49IjIwMjAtMTItMDlUMDg6NDk6MTYtMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4yIChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtMh4BEAAAZoSURBVHja7Z17TNVlGMdPK4FlV3FqIDSJbF0sMqrF2rqRf5i1yrTsvsx1W6Os7LbZ1cxpq2hWFq78x8op5FKbRZOwaFZqm80tS6g0BwYiyOXAOfD2fT0v2xlwgvO87znv8x7eZ/uMjXH5Pb/P77383tsJCCECHj5wuIhjwDgwBRSD2eA+MBfMAdNAATgNHOeFJIYMUAjuB6VgHagBf4B/QRtoB02gFmwD68F74GFwGTjZC9FjEngElIMGoR8tYAN4RpUuL2SY3AI2icRHlSpxXkgM7gXbRfLjd1AC0ryQCLPAbmE/9qv2ZsQKOVPV6dxCdhYuGmlC7gJB3TvX29t79Gs4HBahUOgo8nvRaMSCkSJkeSIe62gBhoTI+Bykp6oQ+R7wk3AvZKN/dqoJOQXsEe7GEa5SKL+UqZ4y10OOBpzlupATwZ8idaIZ5LkspCbBN+gv8D34CmxEI14px7Hwtd5Qoz5YHHBVyLIE3IxfwTtgBshXI78D/jdEpIPzwG09PT2rwD7Dcja6JmSGYRFrwTXUi4aMUZAyG1QbFPOYK0JGGxRRDS40dfGQEYCU6aDOkJiJLgj5zJCMpxOVBGSkQcr7BqTs4C6k0ICIfeDiZCQDKTMNSLmTs5CfNZOTXeQxyUwIQqZqSmniKqTAwIxelo2kUFKu1JRyN0chWzQS6gGTbT5pEHKDhpS93IScq1k6buTQhURJeU0jhyJOQpZqJPI1pzdflJJ/iHms4yTkbw0hE5gJKdaouk7iIESnMS/jOKQNITuJ+dzBQcgCDSHZTIVMI+azgoOQco3pUbZTo5BSS8hpNwchtUQhszgLAYuI3fdTbQrJIsqQreY45iWkmJjb5TaFXEq86F+Ylw7J8aCDkNtcm0JuIgpZ7YAQyS5Cbs/ZFPIQUchiR4RQVla+blPI80QhJS4IQTtSRsjtXZtCFhGFuLIN4C1CbittCnmFKGSeI0JKuY8+9P/GU0Qh8x0R8hEht1KbQu4hCnnTESGVhNxetinkWqKQCkeE7CXk9oRNIecThexxQMZY0E3I7VabQuTa3U6ilDzBu8t7MzGvc2wPLm4jXjj3/XwfEhdqHGtbSBlRSA3zEnKIkFMVh+H32zUmqAqZyniAmM9LHISM0RBSzVRIIzGfS7gscvhOQ8pUZjIeJC5yaOS06mTegBmo4Sf1GyMZJ4Au4oP1AichGf0nc+J8ypYwEVKpUdIzOQmRvKpRSoSa7LK5avFFjfVY1hZsDLX1WWhKudqSjEc1F1tfwFFIQFU9A4TEmez0JMt4XFPGJpsle6gfGAVCmqUkaW/xkPGGgQ07kzgLidnjIiT+iUjQ5h1cyxTI+EHoh/XOCHkegSilWQ1njzYkIhcsNbThczOHnuFwf1CeBnrEkBQZB9XTmEMUUQBWgrAwF1UuCZFcZaDX1T/kUs2tYCGYqYa65RaANPUQpKtqrlDNZi7D/9uVoBMdZOwQlo8GjPcXSmJJMXiT5JB3vYgceXFQ0FYb6sT2ZA+56wgJqPnzREuxHd+6JGSkSNnskpBBh1ZSML5xSUhAvfClenzpkpCAGq86kOJSPnVJSN9A5Bqud7O7u7vLwJ/Z4JKQPq4TkU844BKHwfXBYDC7vb29TvePocOy3jUhAfViJZdfHrIoQpaIt0XUnvmurq4JENNgQMrHrgnpQ26WlGdkJfMEU9mWLY41JIOqKwdiGg1IKXdRSDRyTmSVevM2HfKDXypEZBdwxlDXEgqFpJT9BqRUuCwk+rhAeTqC3DizE7QSBcj94x+IyEcjjY/3OiBlImjWlSIP5JTHDLosZLDjyguVpPmq7ZGjACsUsh2Qm4ieFJHPIykyNacSDofPgJTDBqSsTSUhVoGUfEip59T7GtFClJQc0GpAyhovxNxc/GTQaqCD8YWIcRi0F0KQgpLSZEDKj16IOSnZJqovxLNeiDkp+ZDSQmhD5JhZ9KxnrhdirqHPQ++rKV4heOGM/laJF2JWShak6Ix9LfFCzEs5HdUQdexroReSAFBKclEVNfxfVRUjiryQBIFSMr6jo6MujoUdq30vK8EEg8HMzs7O4YwSyw8by/RCklN9jW1ra9sCYlVVcgRb68x7f6PjLymBlpaWK9CuLIeUrerNXI5jzfFjWSmIvwleiMcL8UI8XogX4vFCvBCPF+KF+JvghXi8EC/E44V4IR7j/Ac9YhOzv9yXfwAAAABJRU5ErkJggg=="},a968:function(e,t,n){},ae0b:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[n("Header"),n("Sequence"),n("div",[n("AboutAlignment")],1),n("div",[n("AboutPdb")],1),n("div",[n("AboutAquaria"),n("UserHelp"),n("Errors")],1),n("div",{attrs:{id:"heightinspector"}}),n("StructureViewer"),n("Tabs"),n("PopUp"),e.data.loader?n("Loader"):e._e(),n("a",{attrs:{href:e.data.hash}},[n("div",{staticClass:"hide",attrs:{id:"scrim"},on:{click:e.dismissPanel}})])],1)},r=[],i=(n("4160"),n("159b"),n("4360")),s=(n("99af"),n("caad"),n("c975"),n("a15b"),n("d81d"),n("ac1f"),n("2532"),n("466d"),n("1276"),n("2b3b"));window.AQUARIA={};var o=window.AQUARIA,c=n("1157"),l=n("2bb0"),d=n("ae8a"),u=n("356e"),h=n("22b1"),p=n("5698"),m=n("bc3a");n("b3c8");var f=10;(function(e){var t=[],n=function(e){t.push(e)};o.overlay=function(){var e=document.createElement("div");e.className="dimmer",document.body.append(e)},o.RemoveOverlay=function(){document.querySelectorAll("div.dimmer").forEach((function(e){return e.remove()}))},o.fireProteinSubmitListeners=function(e,n,a){t.forEach((function(t){t.submitFired(e,n,a)}))},o.proteinTopTen=new h("protein_top_ten",f),o.pdbTopTen=new h("pdbTopten",f),n(o.proteinTopTen);var a=1,r=null;try{window.aquariaReady=function(){};var s="";"applet"===window.threedViewer?s="simple":"webgl"!==window.threedViewer&&"jolecule"!==window.threedViewer||(s="detailed"),e("span#threedSwitcher a").attr("title",s),e("span#threedSwitcher").click((function(){"applet"===window.threedViewer?window.threedViewer="jolecule":"webgl"!==window.threedViewer&&"jolecule"!==window.threedViewer||(window.threedViewer="applet"),localStorage.setItem("3DViewer",window.threedViewer),location.reload()})),e("#biounitLeft").click((function(){a-=1,o.display_3D_structure(r)})),e("#biounitRight").click((function(){a+=1,o.display_3D_structure(r)}));var c=function(e){var t=e.split(":").map((function(e){return parseFloat(e)})),n=t[0]*t[5]*t[10]+t[1]*t[6]*t[8]+t[2]*t[4]*t[9]-(t[2]*t[5]*t[8]+t[1]*t[4]*t[10]+t[0]*t[6]*t[9]);return n<0&&(t[0]=-t[0],t[4]=-t[4],t[8]=-t[8]),t.join(":")};o.display_3D_structure=function(t,n){r=t,o.currentChain=t.pdb_chain;var s=t.alignment,l=t.pdb_chain,d=t.pdb_id,h=t.sequences,f=c(t.transforms[0]),g=t.common_names,v=t.source_primary_accession,y=t.conservations;if(a=!t.biounits||t.biounits<1?0:t.biounits,d.match(/^\d\w\w\w$/)){var w=e("#threeD").width(),A=w;A=e("#threeDSpan").innerHeight(),A<570&&(A=570);var b="".concat(window.BACKEND,"/getPubMedForPDB/").concat(d,"/").concat(window.AQUARIA.prefferedChain[0]?window.AQUARIA.prefferedChain[0]:l[0]);m({method:"get",url:b}).then((function(t){var r=t.data[0],c=r.Biounits;(!c||c<1)&&(a=0,r.Biounits=0),c>0&&"undefined"!==typeof r.experimental_method&&null!==r.experimental_method&&r.experimental_method.toLowerCase().indexOf("x-ray")>-1?(n&&(a=1,u.updatePDBPanel(r,g[0],n.alignment_identity_score)),a>c?a=0:a<0&&(a=c),0===a?(e("#biounitType").text("Asymmetric Unit"),e("#biounitCount").hide()):(e("#biounitType").text("Biological Assembly "),c>1?e("#biounitCount").show():e("#biounitCount").hide()),e("#biounitDisplay").show(),e("#biounitCount").text(a+"/"+c),a!==c?e("#biounitRight").show():e("#biounitRight").hide(),a>0?e("#biounitLeft").show():e("#biounitLeft").hide()):(r&&u.updatePDBPanel(r,g[0],n.alignment_identity_score),e("#biounitDisplay").hide(),a=0),o.pdb_data=r,p.selectAll("svg.loaded rect.feature").attr("fill","#a4abdf"),p.selectAll("svg.loaded").classed("loaded",!1);var m=o.panel3d.generateAttributes(w,A,d,l,a,v,h,g,s,"",f,y,o.structures2match.version_string);if(e("#jnlp_app_attributes").val(JSON.stringify(m)),window.hide3DViewer)i["default"].commit("showLoader",!0),i["default"].commit("setLoaderMsg","Applet is not enabled for this browser. Launch Application instead.");else{var b=function(e,t){var n=[];for(var a in window.AQUARIA.structures2match.clusters)for(var r in window.AQUARIA.structures2match.clusters[a].members)if(window.AQUARIA.structures2match.clusters[a].members[r].pdb_chain[0].includes(t)&&window.AQUARIA.structures2match.clusters[a].members[r].pdb_id.includes(e))return n.cluster=parseInt(a),n.member=parseInt(r),n},_=window.location.href.substr(window.location.origin.length+window.location.pathname.length);history.pushState(null,h[0].primary_accession,window.location.protocol+"//"+window.location.host+"/"+i["default"].state.Organism+"/"+i["default"].state.Gene+"/"+d+"/"+(window.AQUARIA.prefferedChain[0]?window.AQUARIA.prefferedChain[0]:l[0])+_),window.AQUARIA.PDBIndex=b(window.AQUARIA.currentMember.pdb_id,window.AQUARIA.currentMember.pdb_chain),o.panel3d.initialised?o.panel3d.reload(m):o?o.panel3d.load(m):(console.log("AQUARIA.display_3D_structure Error: Cannot load the applet!"),alert("Cannot load the Applet!"))}}))}else console.log("AQUARIA.display_3D_structure Error: Invalid PDB identifier")},o.display_features=function(e){var t=[],n=[];e.forEach((function(e){t.push(e.primary_accession),n.push(e.uniprot_hash)})),"undefined"!==typeof d?(o.blankPanel("#featurelist",!0),g(),d.fetch_annotations(t,(function(e,t){l.updateFeatureUI(e,t),o.blankPanel("#featurelist",!1)}))):alert("Could not find fetch_das_annotations.")};var g=function(){e("#featureCounter").show(),e("#waitForFeatures").show()};o.updateDocumentTitle=function(e,t,n,a){document.title="Aquaria: "+e+", "+t+"% Sequence Identity to PDB "+n+", chain "+a,l.updateFeatureTabTitle(e)},o.refresh=function(){"undefined"!==typeof o.showMatchingStructures&&(o.showMatchingStructures.refresh(),l.updateFeatureUI())},o.load3DAlignment=function(e,t){o.currentMember=e,o.updateDocumentTitle(o.preferred_protein_name,e.alignment_identity_score,e.pdb_id,window.AQUARIA.prefferedChain[0]?window.AQUARIA.prefferedChain[0]:e.pdb_chain[0]),o.fireProteinSubmitListeners(o.preferred_protein_name,t.primary_accession,e.pdb_id),i["default"].commit("showLoader",!0),i["default"].commit("setLoaderMsg","Waiting for PDB..."),o.blankPanel("#featurelist",!0),o.blankPanel("#aboutPDB",!0);var n={selector:[t.primary_accession],selectPDB:this.member.pdb_id,selectChain:window.AQUARIA.prefferedChain[0]?window.AQUARIA.prefferedChain[0]:this.member.pdb_chain[0]},a="".concat(window.BACKEND,"/get_3D_alignment");m({method:"get",url:a,params:n}).then((function(t){var n=t.data;o.display_3D_structure(n,e),o.blankPanel("#vis",!1),o.blankPanel("#aboutPDB",!1),o.blankPanel("#uniProtDesc",!1),o.blankPanel("#featurelist",!1)}))},o.display_member=function(e){"none"===document.querySelector("#waitingFrame").style.display&&(document.querySelector("#waitingFrame").style.display="block");var t=o.structures2match;t.clusters&&t.clusters.length>0?("undefined"===typeof e&&(e=t.clusters[t.Selected_PDB.cluster_number].members[t.Selected_PDB.member_number]),o.member=e,o.load3DAlignment(e,t.sequences[0])):"undefined"===typeof t.pdb_id?(store.commit("showLoader",!0),u.updateUniprotInfo(null),o.showMatchingStructures.removeAll()):(store.commit("showLoader",!0),store.commit("setLoaderMsg","Cannot find protein"),i["default"].commit("setErrorTitle","Cannot find protein."),u.updateUniprotInfo(null),o.showMatchingStructures.removeAll())}}catch(v){alert("Error with displaying structures: "+v.message)}})(c),o.margin={top:10,right:70,bottom:20,left:20},window.AQUARIA.chainSelected=s["chainSelected"],o.structures2match={},o.blankCount={},o.currentMember=null;var g=c;o.blankPanel=function(e,t,n){var a=e+" .blank";t?0===g(a).length&&(n?g(e).append('<div class="blank hidden"><br><p class="centered">'+n+"</p></div>"):g(e).append('<div class="blank hidden"></div>'),g(a).fadeIn("fast"),g(a).css("height",g(e).css("height"))):g(a).fadeOut("slow",(function(e){g(a).remove()}))};var v,y,w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"header"}},[n("div",{staticClass:"item fix level3",attrs:{id:"logo"}},[n("a",{attrs:{href:"#About"},on:{click:e.showScrim}},[n("img",{attrs:{src:e.aquariasymbol}})])]),n("Title"),n("div",{staticClass:"item fix level3",attrs:{id:"menu-btn"}},[n("a",{attrs:{href:"#Menu"}},[n("img",{attrs:{src:e.hamburger}})])]),n("Menu")],1)},A=[],b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"item title fix level5",attrs:{id:"title"}},[e.organism_name&&!e.seqRes?n("span",{attrs:{id:"org_prot"},on:{click:e.storeHash}},[n("a",{attrs:{href:"#Sequence"},on:{click:e.makeActive}},[n("img",{attrs:{src:e.search}}),e._v(" "+e._s(e.organism_name)+" "),n("strong",[e._v(e._s(e.primary_accession))])])]):e._e(),e.organism_name||e.seqRes?e._e():n("span",{staticClass:"titlepanel",attrs:{id:"uniprotpanel"},on:{click:e.storeHash}},[n("a",{attrs:{href:"#Sequence"},on:{click:e.makeActive}},[n("img",{attrs:{src:e.search}}),e._v(" Protein Sequence")])]),e.seqRes?e._e():n("span",{attrs:{id:"alignmt"},on:{click:e.storeHash}},[n("a",{attrs:{href:"#Alignment"},on:{click:e.makeActive}},[e._v("aligned onto")])]),e.pdb?e._e():n("span",{attrs:{id:"no_pdb_id"},on:{click:e.storeHash}},[n("a",{attrs:{href:"#Structure"},on:{click:e.makeActive}},[e._v("PDB ID")])]),e.pdb&&!e.seqRes?n("span",{attrs:{id:"pdb_id"},on:{click:e.storeHash}},[n("a",{attrs:{href:"#Structure"},on:{click:e.makeActive}},[e._v(e._s(e.pdb))]),n("span",{attrs:{id:"help"},on:{click:e.showHelp}},[e._v("?")])]):e._e(),e.seqRes?n("div",{attrs:{id:"titleAlign"}},[n("span",{staticClass:"titlepanel",on:{click:e.storeHash}},[n("a",{attrs:{href:"#Alignment"},on:{click:e.makeActive}},[n("strong",[e._v(e._s(e.primary_accession))]),e._v(" Sequence: "+e._s(e.seqRes)+" "),n("br"),n("strong",[e._v(e._s(e.pdb))]),e._v(" Structure: "+e._s(e.structRes)+" ")])])]):e._e(),n("a",{staticClass:"close",attrs:{href:e.data.hash},on:{click:e.dismissPanel}})])},_=[],I=(n("498a"),n("1b1f")),S={name:"Title",data:function(){return{organism_name:null,primary_accession:null,text:null,pdb:null,search:n("a6f5"),seqRes:null,structRes:null}},computed:{data:function(){return{hash:i["default"].state.hash,Gene:i["default"].state.Gene,Organism:i["default"].state.Organism}}},beforeMount:function(){var e=this;window.AQUARIA.update3DTitle=function(t,n,a,r,i){if(a&&r){var s=r;if(-1!==s.indexOf("(")&&(s=r.substring(0,r.indexOf("(")).trim()),window.AQUARIA.short_moleculeName=s,t&&n&&i){e.organism_name=e.data.Organism,e.primary_accession=e.data.Gene,e.text="aligned onto",e.pdb=n+"-"+a;var o=window.AQUARIA.currentMember.E_value;window.AQUARIA.explainTitle(t,window.AQUARIA.preferred_protein_name,s,n,a,i,o)}else e.organism_name=e.data.Organism,e.primary_accession=s,e.text="structure from",e.pdb=n+"-"+a}else document.querySelector("#uniProtDesc").text(window.AQUARIA.preferred_protein_name)}},methods:{showHelp:function(){i["default"].commit("setHelpTitle","Aquaria Help"),i["default"].commit("setUserStatus",!1),document.getElementById("UserHelp").classList.remove("hide"),document.getElementById("UserHelp").className+=" show",document.querySelector("div.dimmer")||(I["overlay"](),document.querySelector("div.dimmer").className+=" level7"),document.querySelector("div.dimmer").addEventListener("click",(function(){I["RemoveOverlay"](),document.getElementById("UserHelp").classList.remove("show"),document.getElementById("UserHelp").className+=" hide"}))},storeHash:function(){i["default"].commit("setHash",window.location.hash)},makeActive:function(e){document.querySelector("#pdb_id > span#help").style.visibility="hidden",document.querySelectorAll("#title span a").forEach((function(e){e.classList.remove("active")})),e.target.localName.includes("strong")&&(e.target=e.target.parentElement),e.target.className="active",-1===document.querySelector("#title").className.indexOf("active")&&(document.querySelector("#title").className+=" active"),document.querySelector("#scrim").className="show level2",null!==document.querySelector("#titleAlign")&&(document.querySelector("#titleAlign").className="active",i["default"].commit("setAlignment",window.AQUARIA.panel3d.joleculeAlignment.copyToClipboard()),i["default"].commit("setHash",window.location.hash))},dismissPanel:function(){document.querySelector("#pdb_id > span#help").style.visibility="visible",document.querySelector("#scrim").className="hide",document.querySelector("#title").className="item title fix level6",null!==document.querySelector("#titleAlign")&&(document.querySelector("#titleAlign").className=""),document.querySelectorAll("#title span a").forEach((function(e){e.className=""}))},resetSelection:function(){document.querySelectorAll("#titlebar span").forEach((function(e){e.className="titlepanel"})),document.querySelectorAll(".contents").forEach((function(e){e.style.display="none"}))},release:function(){document.querySelector("#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection").style.display="none",this.resetSelection()}},mounted:function(){this.resetSelection()},updated:function(){var e=this,t=new MutationObserver((function(){if("none"===document.querySelector("#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection").style.display)e.seqRes=null,e.structRes=null,i["default"].commit("setAlignment","");else{var t=document.querySelector("#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection").innerText.split("\n"),n=window.AQUARIA.currentMember.pdb_id+"-"+window.AQUARIA.currentMember.pdb_chain+":",a=e.data.Gene+":";e.seqRes=t[1].split(a)[1],e.structRes=t[0].split(n)[1]}}));t.observe(document.querySelector("#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection"),{attributes:!0,childList:!0,characterData:!0})}},x=S,R=(n("ee8d"),n("2877")),C=Object(R["a"])(x,b,_,!1,null,null,null),k=C.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel abs floating level7",attrs:{id:"Menu"}},[n("a",{staticClass:"close",attrs:{href:"#"}}),e._m(0),e._m(1),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selected=t.target.multiple?n:n[0]},function(t){return e.onChange(t)}]}},[n("option",{attrs:{id:"ribbon",selected:""}},[e._v("Ribbon")]),n("option",{attrs:{id:"sphere"}},[e._v("Sphere")]),n("option",{attrs:{id:"backbone"}},[e._v("Backbone")])])])},O=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a",{staticClass:"lnk",attrs:{id:"print",href:"#"}},[e._v("Print")]),n("a",{staticClass:"lnk",attrs:{id:"helpbtn",href:"#"}},[e._v("Help")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a",{staticClass:"lnk",attrs:{id:"Sidechains",href:"#Menu"}},[e._v("Sidechains")]),n("a",{staticClass:"lnk",attrs:{id:"Neighbors",href:"#Menu"}},[e._v("Neighbors")]),n("a",{staticClass:"lnk active",attrs:{id:"Ligands",href:"#Menu"}},[e._v("Ligands")]),n("a",{staticClass:"lnk",attrs:{id:"Water",href:"#Menu"}},[e._v("Water")])])}],P=(n("96cf"),n("1da1")),B=n("aaec"),V={name:"Menu",data:function(){return{selected:"Ribbon"}},methods:{onChange:function(e){var t=e.target.value.toLowerCase();document.querySelector("#threeDSpan-inner-menu-"+t).click()},showHelp:function(){var e=this;i["default"].commit("setHelpTitle","Aquaria Help"),i["default"].commit("setUserStatus",!1),document.getElementById("UserHelp").classList.remove("hide"),document.getElementById("UserHelp").className+=" show",document.querySelector("div.dimmer")||(I["overlay"](),document.querySelector("div.dimmer").className+=" level7"),document.querySelector("div.dimmer").addEventListener("click",(function(){I["RemoveOverlay"](),document.getElementById("UserHelp").classList.remove("show"),document.getElementById("UserHelp").className+=" hide";var t={};t.target=document.querySelector("#helpbtn"),e.toggleActive(t)}))},toggleActive:function(e){"lnk active"===e.target.className?e.target.className="lnk":e.target.className="lnk active"}},mounted:function(){var e=this;document.querySelector("#print").addEventListener("click",function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Object(B["a"])(7680,4320,0,0);case 3:n=e.sent,a=document.createElement("a"),a.href=n,a.download="aquaria-screenshot.png",a.click();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),document.querySelector("#helpbtn").addEventListener("click",(function(t){t.preventDefault(),e.toggleActive(t),e.showHelp()})),document.querySelector("#Sidechains").addEventListener("click",(function(t){t.preventDefault(),e.toggleActive(t),document.querySelector("#threeDSpan-inner > div.jolecule-embed-header.jolecule-embed-toolbar > span:nth-child(6)").click()})),document.querySelector("#Neighbors").addEventListener("click",(function(t){t.preventDefault(),e.toggleActive(t),document.querySelector("#threeDSpan-inner > div.jolecule-embed-header.jolecule-embed-toolbar > span:nth-child(7)").click()})),document.querySelector("#Ligands").addEventListener("click",(function(t){t.preventDefault(),e.toggleActive(t),document.querySelector("#threeDSpan-inner-menu-ligand").click()})),document.querySelector("#Water").addEventListener("click",(function(t){t.preventDefault(),e.toggleActive(t),document.querySelector("#threeDSpan-inner-menu-water").click()}))}},T=V,D=(n("b066"),Object(R["a"])(T,E,O,!1,null,"03995c7c",null)),L=D.exports,M={name:"Header",components:{Title:k,Menu:L},data:function(){return{aquariasymbol:n("2c07"),hamburger:n("b335")}},methods:{showScrim:function(){i["default"].commit("setHash",window.location.hash),document.querySelector("#scrim").className="show level3",document.querySelector("#xr-button").click()}}},U=M,N=(n("113a"),Object(R["a"])(U,w,A,!1,null,"34ef906a",null)),F=N.exports,q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel overlay about level3",attrs:{id:"Sequence"}},[n("SearchPanel"),n("AboutUniprot")],1)},H=[],Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"searchByName"}},[n("p",[e._v("Organism")]),n("SearchOrganism"),e._m(0),n("p",[e._v("Protein")]),n("SearchProtein"),n("div",{attrs:{id:"psyns"}},[n("p",[e._v("(example: "),n("a",{attrs:{href:"#"},on:{click:function(t){return e.fillin("p53")}}},[e._v("p53")]),e._v(" or "),n("a",{attrs:{href:"#"},on:{click:function(t){return e.fillin("P04637")}}},[e._v("P04637")]),e._v(")")])])],1)},j=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"osyns"}},[n("p")])}],G=n("1157"),Z=n.n(G),z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("autocomplete",{ref:"autocomplete",attrs:{id:"organism_syn_input",search:e.search,"get-result-value":e.getResultValue},on:{submit:e.handleSubmit}})],1)},W=[],Y=(n("d3b7"),n("bc3a")),J=n.n(Y),$=n("356e"),X=n("95bf"),K=(n("8b78"),{name:"SearchOrganism",components:{Autocomplete:X["a"]},data:function(){return{OrganismSynonyms:{}}},computed:{data:function(){return{OrgID:i["default"].state.OrgID,Organism:i["default"].state.Organism}}},methods:{getResultValue:function(e){return e.value},handleSubmit:function(e){var t=this;if(e.value&&0!==e.value.indexOf("No organisms for: ")&&e.id!==t.data.OrgID){var n="".concat(window.BACKEND,"/getOrganismSynonyms");J()({method:"get",url:n,params:{organism_id:e.id}}).then((function(t){var n=t.data;i["default"].commit("setOrgID",e.id),localStorage.preferred_organism_name=e.value,$["displayOrgSynonyms"](n),document.querySelector("#organism_syn_input").setAttribute("size",e.value.length)}))}},clear:function(){this.value="",this.$refs.autocomplete.value=""},search:function(e){var t,n=this,a=this.OrganismSynonyms,r=e;return this.value=e,new Promise((function(e){if(r in a)e(a[r]);else if(""!==r){var i="".concat(window.BACKEND,"/getQueryOrganism/").concat(r);J()({method:"get",url:i}).then((function(n){var i=n.data;i.length>0?(t=i.map((function(e){return{label:e.Synonym,value:e.Synonym,id:e.Organism_ID}})),a[r]=t):t={label:"No organisms for: "+r,value:0},document.querySelector("#autocomplete-result-list-1").style.zIndex=99,document.querySelector(".autocomplete-result-list").style.maxHeight="390px",e(t)}))}else t={label:n.data.Organism,value:n.data.OrgID},e(t)}))}}}),ee=K,te=Object(R["a"])(ee,z,W,!1,null,null,null),ne=te.exports,ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("autocomplete",{ref:"autocomplete",attrs:{id:"protein_syn_input",search:e.search,"get-result-value":e.getResultValue},on:{submit:e.handleSubmit}})},re=[],ie=(n("4de4"),n("13d5"),n("b0c0"),n("2ca0"),{name:"SearchProtein",components:{Autocomplete:X["a"]},data:function(){return{callbackData:{names:[],ids:[],pdbIDs:[]},cacheProteinSynonyms:{},term:null,proteinSynonymOrgId:null,pdbId:null,collectResponsevalues:null}},methods:{getResultValue:function(e){return e.value+" ("+e.id+")"},clear:function(){this.value="",this.$refs.autocomplete.value=""},handleSubmit:function(e){var t=this,n=window.AQUARIA;if(e.value&&0!==e.value.indexOf("No structures for: ")){var a=e.id;if(a.indexOf("/")>-1){var r=a.split("/");a=r[0],t.pdbId=r[1]}if("PDB"===e.type){console.log("AQUARIA.proteinAutocomplete.select pdb",e.value),i["default"].commit("showLoader",!0),i["default"].commit("setLoaderMsg","Waiting for data...");var o="".concat(window.BACKEND,"/getAccessionForPDB/").concat(e.value);J()({method:"get",url:o}).then((function(t){var n=t.data;s["loadAccession"]([n.Accession],e.value,null,!1,n.Accession)}))}else e.id===n.protein_primary_accession?e.value===n.preferred_protein_name?i["default"].commit("showLoader",!1):(console.log("AQUARIA.proteinAutocomplete.select same protein, different name",e.value),n.preferred_protein_name=e.value,o="".concat(window.BACKEND,"/getProteinSynonyms/").concat(n.protein_primary_accession,";"),J()({method:"get",url:o}).then((function(e){$["displayProtSynonyms"](e.data)}))):(document.querySelector("#protein_syn_input").placeholder=e.value,document.querySelector("#protein_syn_input").value="",i["default"].commit("showLoader",!0),i["default"].commit("setLoaderMsg","Waiting for data..."),s["loadAccession"]([a],t.pdbId,null,!1,e.value))}else event.preventDefault()},search:function(e){var t=window.AQUARIA,n=this;return n.term=e,n.callbackData.LRU=n.getLRU(),new Promise((function(e){if(""===n.term)n.collectResponse(),n.collectResponsevalues&&e(n.collectResponsevalues);else{if(n.proteinSynonymOrgId=n.term+"%"+t.Organism.ID,n.proteinSynonymOrgId in n.cacheProteinSynonyms)return void e(n.cacheProteinSynonyms[n.proteinSynonymOrgId]);document.querySelector(".autocomplete-result-list").style.maxHeight="390px";var a="".concat(window.BACKEND,"/queryProtein/").concat(n.term,"/").concat(t.Organism.ID);J()({method:"get",url:a}).then((function(t){var a=t.data;isNaN(parseInt(n.term.charAt(0)))?a.length>0?0===a[0].isID?(n.nameCallback(a),n.collectResponsevalues&&e(n.collectResponsevalues)):n.idCallback(a):0===a.isID?(n.nameCallback(a),n.collectResponsevalues&&e(n.collectResponsevalues)):(n.idCallback(a),n.collectResponsevalues&&e(n.collectResponsevalues)):(n.pdbCallback(a),n.collectResponsevalues&&e(n.collectResponsevalues))}))}}))},getLRU:function(){return window.AQUARIA.proteinTopTen.getAll().map((function(e){return{label:e.name,suffix:e.primary_accession+", "+e.pdb_id,value:e.name,type:"LRU",category:"Recent",id:e.primary_accession+"/"+e.pdb_id}}))},collectResponse:function(){var e=this,t=e.callbackData.LRU;t.length>0&&e.term&&e.term.length>0&&(t=t.filter((function(t){return t.label.toLowerCase().startsWith(e.term.toLowerCase())})));var n=!0,a=t.concat(e.callbackData.names).concat(e.callbackData.ids).concat(e.callbackData.pdbIDs);0===a.length&&(e.term&&e.term.length>0?a=[{label:"No structures for: "+e.term,value:0}]:n=!1),e.cacheProteinSynonyms[e.proteinSynonymOrgId]=a,n&&(e.collectResponsevalues=a)},nameCallback:function(e){var t,n=this;t=e.map((function(e){return{label:e.Synonym,suffix:null,value:e.Synonym,type:"Synonym",category:"Names",id:e.Primary_Accession,organism:e.Organism_ID}})),t.sort((function(e,t){return e.label>t.label?1:-1})),t.reduce((function(e,t){var n=e,a=t;return n&&n.value===a.value&&(n.dup||(n.suffix=n.id,n.dup=!0),a.dup||(a.suffix=a.id,a.dup=!0)),t}),null),n.callbackData.names=t,n.collectResponse()},idCallback:function(e){var t,n=this;t=e.map((function(e){var t=e.Source_Field;return"AC"!==t&&"ID"!==t||(t="UniProt"),{label:e.Synonym,suffix:t,value:e.Synonym,type:t,category:"Identifiers",id:e.Primary_Accession}})),t.sort((function(e,t){return e.label>t.label?1:-1})),n.callbackData.ids=t,n.collectResponse()},pdbCallback:function(e){var t,n=this;t=e.map((function(e){return{label:e.Synonym,suffix:"PDB",type:"PDB",value:e.Synonym,category:e.Category,id:e.Synonym}})),n.callbackData.pdbIDs=t,n.collectResponse()}}}),se=ie,oe=Object(R["a"])(se,ae,re,!1,null,null,null),ce=oe.exports,le={components:{SearchOrganism:ne,SearchProtein:ce},name:"SearchPanel",data:function(){return{search:n("20d9")}},methods:{fillin:function(e){document.getElementById("protein_syn_input").value=e,setTimeout((function(){window.location.href="/P04637"}),300)},selectOrganism:function(e){},placeholderText:function(e,t){var n=document.querySelector("#organism_syn_input"),a=document.querySelector("#protein_syn_input");n.placeholder=e,n.setAttribute("size",n.getAttribute("placeholder").length),a.placeholder=t,a.setAttribute("size",a.getAttribute("placeholder").length),Z()("#organism_syn_input").focus((function(){Z()(this).attr("placeholder","Specify an organism"),n.setAttribute("size",n.getAttribute("placeholder").length)})).blur((function(){Z()(this).attr("placeholder",e),n.setAttribute("size",n.getAttribute("placeholder").length)})),Z()("#protein_syn_input").focus((function(){Z()(this).attr("placeholder","Specify a protein"),a.setAttribute("size",a.getAttribute("placeholder").length)})).blur((function(){Z()(this).attr("placeholder",t),a.setAttribute("size",a.getAttribute("placeholder").length)}))}}},de=le,ue=(n("a01c"),Object(R["a"])(de,Q,j,!1,null,null,null)),he=ue.exports,pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"scrollable",attrs:{"data-intro":"UniProt summary of the specified protein's function.","data-position":"right"}},[e._m(0),e.uniprotDesc?n("div",{attrs:{id:"uniProtDesc"}}):e._e(),e._l(e.descriptions,(function(t,a){return n("div",{key:a,staticClass:"expandable"},[n("expandable-text-line",{attrs:{"use-click":""}},[n("p",[n("strong",[e._v(e._s(t[0]))]),e._v(" : "+e._s(t[1]))])])],1)}))],2)},me=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"none"},attrs:{id:"gsyns"}},[n("p",[e._v("Genes: ")])])}],fe=(n("a4d3"),n("e01a"),n("5319"),n("02a1")),ge={name:"AboutUniprot",components:{ExpandableTextLine:fe["a"]},data:function(){return{uniprotDesc:null,sections:[],descriptions:[],a:[1,2,3],tightSections:[],desc:null,list:[]}},mounted:function(){var e=this;e.waitForElement()},methods:{waitForElement:function(){var e=this;window.AQUARIA.structures2match.sequences&&window.AQUARIA.structures2match.sequences[0]?(e.uniprotDesc=window.AQUARIA.structures2match.sequences[0].description,e.updateUniprotInfo(e.uniprotDesc)):setTimeout(e.waitForElement,50)},updateUniprotInfo:function(e){var t=this;t.list=[],t.tightSections=[];var n=/\n[A-Z ]+:.*?$/;function a(){if(e&&e.length>0){var r=e.match(n);null!==r?(t.sections.unshift(r[0].split(": ")),e=e.replace(r[0],""),a()):t.sections.unshift(e.split(": "))}}function r(e){for(var n=null,a=0;a<e.length;a++)if(a<e.length-2){var r=e[a][0],i=e[a+1][0];if(i===r)null===n&&(n="<ul>"),n+="<li>"+e[a][1]+"</li>";else if(null===n)t.tightSections.push(e[a]);else{n+="<li>"+e[a][1]+"</li></ul>";var s=[r,n];t.tightSections.push(s),n=null}}else null===n?t.tightSections.push(e[a]):(n+="<li>"+e[a][1]+"</li></ul>",s=[r,n],t.tightSections.push(s),n=null);return t.tightSections}a(),this.sections.forEach((function(e){if(-1!==e[1].indexOf("URL=")){var t="",n="",a="",r="",i=e[1].split(";");i.forEach((function(e){e=e.split("="),-1!==e[0].indexOf("URL")&&(n=e[1]),-1!==e[0].indexOf("Name")&&(a=e[1]),-1!==e[0].indexOf("Note")&&(r=e[1])})),t="<a href="+n+' title="'+r+'" target="_blank">'+a+"</a>",e[1]=t}}));var i=r(t.sections);i.forEach((function(e){var n="";if(e.length>2){for(var a=1;a<e.length;a++)n=n+" "+e[a];e[1]=n}t.list.push(e)})),t.descriptions=t.list}}},ve=ge,ye=(n("a356"),Object(R["a"])(ve,pe,me,!1,null,"d77ebc60",null)),we=ye.exports,Ae={name:"Sequence",components:{SearchPanel:he,AboutUniprot:we}},be=Ae,_e=Object(R["a"])(be,q,H,!1,null,null,null),Ie=_e.exports,Se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel overlay about level3",attrs:{id:"Alignment"}},[n("div",{staticClass:"scrollable"},[e.data.alignment?n("p",{staticClass:"spacer"}):e._e(),n("p",[e._v("What you see in the 3D viewer is the experimentally-determined structure of "+e._s(e.pdbName)+" from "),n("a",{attrs:{href:"http://www.rcsb.org/pdb/explore.do?structureId={{}}",target:"_blank"}},[e._v(" PDB entry "+e._s(e.pdbId))]),e._v("chain "+e._s(e.chainId)+". ")]),n("p",[e._v(" The full-length sequence of the protein you specified ("+e._s(e.uniprotName)+") has been aligned onto the sequence used to determine this PDB structure.")]),n("p",[e._v(" Overall, the two sequences align with "+e._s(e.score)+"% identity; any amino acid substitutions are indicated using dark coloring (see legend).")]),n("p",{staticClass:"quality"},[e._v(" This alignment has an HHblits E-value of "+e._s(e.evalueString)+" × "),n("nobr",[e._v("10"),n("sup",[e._v(e._s(e.power))])]),e._v(", which is considered to be "+e._s(e.quality)+". Based on cross-validation, the likelihood that your specified protein ("+e._s(e.uniprotName)+") adopts a structure similar to that shown is estimated to be "+e._s(e.precisiontxt)+"%.")],1),n("p",[e._v("Note that the structure shown is taken directly from the PDB; it has not been derived by ab-initio or comparative modeling.")]),e.data.alignment?n("div",[n("p",[n("b",[e._v("Alignment:")]),n("br"),n("pre",[e._v(e._s(e.data.alignment))])])]):e._e()])])},xe=[],Re=(n("25f0"),n("5698")),Ce=n.n(Re),ke={name:"AboutAlignment",computed:{data:function(){return{alignment:i["default"].state.alignment}}},data:function(){return{pdbName:null,pdbId:null,chainId:null,score:null,qualClass:null,evalueString:null,quality:null,uniprotName:null,precisiontxt:null,power:null}},beforeMount:function(){var e=this;window.AQUARIA.explainTitle=function(t,n,a,r,i,s,o){var c;e.pdbName=a,e.pdbId=r,e.chainId=i,e.score=s,e.uniprotName=n,c=-Math.log(o)/Math.LN10;var l=100*e.BioScience_PlantDisease_Weibull_model(c);l=Math.round(l),e.evalueString=o.toString().split("e")[0],e.power=o.toString().split("e")[1],e.precisiontxt=0===o&&1===l?"close to 100":"≥ "+l,o>1e-71?(e.quality="in the twilight zone",e.qualClass="twilight"):(e.quality="high quality",e.qualClass="high")}},methods:{BioScience_PlantDisease_Weibull_model:function(e){var t;t=0;var n=-2.903935098912483,a=7.984666145922813,r=.4478023883120025;return t=1-Math.exp(-1*Math.pow((e-n)/a,r)),t},showBubble:function(e){0===document.getElementsByClassName("dimmer").length&&I["overlay"](),Z()("span#help3D.roundButton").css("background-position","0 -21px"),document.querySelector("div.dimmer").addEventListener("click",(function(){Z()("div.popup, div.dimmer").fadeOut().remove(),Z()("span#help3D.roundButton").css("background-position","0 0")}));var t="<div class='balloon'><h3>3D View Explained<span class='x'>&nbsp;</span></h3>";t=t+e+"</div>",Ce.a.select("body").append("div").attr("class","popup top").html(t);var n=Z()("#help3D").offset(),a=parseInt(n.left-230),r=parseInt(n.top+30);Z()("div.popup").css({left:a+"px",top:r+"px"}).draggable().fadeIn(600),Z()("span.x").click((function(){Z()("div.popup, div.dimmer").fadeOut().remove(),Z()("span#help3D.roundButton").css("background-position","0 0")}))},resetSelection:function(){document.querySelectorAll("#titlebar span").forEach((function(e){e.className="titlepanel"})),document.querySelectorAll(".contents").forEach((function(e){e.style.display="none"}))}},mounted:function(){this.resetSelection()}},Ee=ke,Oe=(n("361b"),Object(R["a"])(Ee,Se,xe,!1,null,"8e892dc6",null)),Pe=Oe.exports,Be=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Ve=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel overlay about level3",attrs:{id:"Structure"}},[n("div",{staticClass:"scrollable",attrs:{id:"description","data-intro":"PDB summary for the shown structure.","data-position":"bottom"}},[n("span",{staticClass:"content",attrs:{id:"description","data-intro":"PDB summary for the shown structure.","data-position":"bottom"}},[n("span",{staticStyle:{display:"none"},attrs:{id:"biounitDisplay"}},[n("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitLeft",title:"Navigate to other assemblies"}},[e._v("<")]),e._v(" "),n("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitType"}},[e._v("biounit")]),e._v(" "),n("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitCount"}},[e._v("x/x")]),e._v(" "),n("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitRight",title:"Navigate to other assemblies"}},[e._v(">")]),n("a",{attrs:{id:"helpBiounit",href:"https://pdb101.rcsb.org/learn/guide-to-understanding-pdb-data/biological-assemblies#Anchor-BioUnit",target:"_blank",title:"Go to PDB to view explanation of assembly"}},[n("span",{staticClass:"help roundButton"})])]),n("span",{staticStyle:{display:"none"},attrs:{id:"aboutPDBHider","data-intro":"PubMed Information about PDB structure","data-position":"left"}},[n("p",{attrs:{id:"classification"}},[e._v("Classification unavailable")]),n("h4",{attrs:{id:"reference_title"}},[e._v("Title unavailable")]),n("p",{attrs:{id:"reference_link"}},[n("a",{attrs:{href:"#"}},[e._v("PubMed Link unavailable")])]),n("p",{attrs:{id:"molecule",title:"View this structure in Aquaria","data-intro":"Information about currently focused PDB chain.","data-position":"left"}},[n("strong",[e._v("Molecule: ")]),n("span",{staticClass:"text"},[e._v("unavailable")])])]),n("p",{attrs:{id:"organism"}},[n("strong",[e._v("Organism: ")]),n("span",{staticClass:"text"},[e._v("unavailable")])]),n("p",{attrs:{id:"small_molecules"}},[n("strong",[e._v("Small molecules: ")]),n("span",{staticClass:"text"},[e._v("unavailable")])]),n("p",{attrs:{id:"method"}},[n("strong",[e._v("Method: ")]),n("span",{staticClass:"text"},[e._v("unavailable")])]),n("p",{attrs:{id:"resolution"}},[n("strong",[e._v("Resolution: ")]),n("span",{staticClass:"text"},[e._v("unavailable")])]),n("p",{attrs:{id:"pdb"}},[n("strong",[e._v("Protein Data Bank: ")]),n("span",{staticClass:"text"},[e._v("unavailable")])])])])])}],Te={name:"AboutPdb"},De=Te,Le=(n("f760"),Object(R["a"])(De,Be,Ve,!1,null,"01dba514",null)),Me=Le.exports,Ue=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Ne=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"structure-viewer"}},[n("span",{attrs:{id:"threeDSpan"}})])}],Fe={name:"StructureViewer",mounted:function(){function e(){var e=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(!navigator.platform)return!1;while(e.length)if(navigator.platform===e.pop()||screen.width>=300&&screen.width<=600)return!0}var t=e();if(t){var n=Math.max(window.innerHeight),a=document.body;document.addEventListener("scroll",(function(e){var t=Math.max(window.innerHeight);t-50>n?a.classList.contains("ios-toolbar")||a.classList.add("ios-toolbar"):a.classList.contains("ios-toolbar")&&a.classList.remove("ios-toolbar")}))}}},qe=Fe,He=(n("88de"),Object(R["a"])(qe,Ue,Ne,!1,null,null,null)),Qe=He.exports,je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"tabs rel level3"},[n("div",{staticClass:"tab",attrs:{id:"Structures"},on:{click:e.storeHash}},[n("a",{attrs:{href:"#Structures"}},[n("span",{staticClass:"icon"},[n("img",{attrs:{src:e.MS}})]),e._v(" Matching Structures "),n("span",{staticClass:"counter"})])]),n("MatchingStructures"),n("div",{staticClass:"tab",attrs:{id:"Features"},on:{click:e.storeHash}},[n("a",{attrs:{href:"#Features"}},[n("span",{staticClass:"icon"},[n("img",{attrs:{src:e.FT}})]),e._v(" Features "),n("span",{staticClass:"counter",attrs:{id:"featureCounter"}})])]),n("Features")],1),n("CoverageMap")],1)},Ge=[],Ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel"},[n("a",{staticClass:"close intab",attrs:{href:e.data.hash},on:{click:e.closeTab}}),e._m(0)])},ze=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"vis"}},[n("div",{attrs:{id:"allclusters","data-intro":"Visual summary of all structures in PDB matching the specified protein, grouped by region of match.","data-position":"left"}})])}],We=n("5530"),Ye=n("2f62"),Je={name:"MatchingStructures",data:function(){return{clusters:window.AQUARIA.structures2match.clusters,showTree:!1}},computed:Object(We["a"])({data:function(){return{hash:i["default"].state.hash,prop:null}}},Object(Ye["b"])(["getMatches"])),methods:{closeTab:function(){window.scrollBy(0,100),I["hidePanels"]()}},mounted:function(){var e=this;if(e.getMatches&&Object.hasOwnProperty.call(e.getMatches,"clusters"))for(var t=document.querySelectorAll("[id ^= structure_] > text"),n=0;n<t.length;n++)t[n].addEventListener("click",(function(){var e=this.parentElement.id;console.log(e)}))}},$e=Je,Xe=(n("3cb4"),Object(R["a"])($e,Ze,ze,!1,null,null,null)),Ke=Xe.exports,et=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel"},[n("a",{staticClass:"close",attrs:{href:"javascript:"},on:{click:e.closeTab}}),n("div",{attrs:{id:"featurelist"}})])},tt=[],nt={name:"Features",methods:{closeTab:function(){window.scrollBy(0,100),I["hidePanels"]()}}},at=nt,rt=(n("fc7c"),Object(R["a"])(at,et,tt,!1,null,null,null)),it=rt.exports,st=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},ot=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"rel level2",attrs:{id:"map"}},[n("div",{attrs:{id:"selectedCluster"}}),n("div",{attrs:{id:"selectedFeature"}})])}],ct={name:"CoverageMap"},lt=ct,dt=(n("d093"),Object(R["a"])(lt,st,ot,!1,null,"9c814ec8",null)),ut=dt.exports,ht={name:"Tabs",components:{MatchingStructures:Ke,Features:it,CoverageMap:ut},data:function(){return{MS:n("39b5"),FT:n("9db5")}},methods:{storeHash:function(){i["default"].commit("setHash",window.location.hash)}},mounted:function(){var e=function(e,t){document.querySelector("#"+e).style.display="block",document.querySelectorAll(".tab").className="tab inactive",document.querySelector("#"+t).className="tab active"},t=function(){if(window.AQUARIA.panel3d){var t=window.AQUARIA.panel3d.embededJolecule.controller;t.clearSelectedResidues()}e("vis","Structures"),I["hidePanel"]("featurelist","Features"),0===document.getElementsByClassName("dimmer").length&&I["overlay"](),document.querySelector("div.dimmer").className+=" level0",document.querySelector("div.dimmer").addEventListener("click",(function(){I["hidePanels"]()}))},n=function(){if(window.AQUARIA.panel3d){var t=window.AQUARIA.panel3d.embededJolecule.controller;t.clearSelectedResidues()}I["hidePanel"]("vis","Structures"),e("featurelist","Features"),0===document.getElementsByClassName("dimmer").length&&I["overlay"](),document.querySelector("div.dimmer").className+=" level0",document.querySelector("div.dimmer").addEventListener("click",(function(){document.querySelector("a.close").click(),I["hidePanels"]()}))};window.addEventListener("hashchange",(function(){window.location.hash.includes("Structures")&&t(),window.location.hash.includes("Features")&&n()}))}},pt=ht,mt=(n("55a4"),Object(R["a"])(pt,je,Ge,!1,null,"10255280",null)),ft=mt.exports,gt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"level3",attrs:{id:"popup"}},[n("div",{staticClass:"balloon",attrs:{id:"vueBased"}},[n("div",{staticClass:"headingC",attrs:{id:"headingC"}},[n("span",{attrs:{id:"loadedPin"},on:{click:function(t){return e.togglePinBehaviour()}}}),n("span",{domProps:{innerHTML:e._s(e.getIfLoading())}}),n("span",{attrs:{id:"popupheader"},domProps:{innerHTML:e._s(e.getPopupTitle)}}),n("span",{staticClass:"x",attrs:{id:"x_close"},on:{click:function(t){return e.closeAndReset()}}})]),n("div",{attrs:{id:"popupText_variant",hidden:e.isVarSpecified()}},[n("div",{staticClass:"aaLightBg"},[n("p",{attrs:{id:"spanDefaultDesc"}},[e._v(" "+e._s(e.getDefaultDesc())+" ")]),e._l(e.oneAaCodes,(function(t){return n("div",{key:t,attrs:{id:"divVarInfo_"+t}},[e._l(e.getAaDataAsArr(t),(function(t){return n("expandable-text-line",{key:t,attrs:{"use-click":""},domProps:{innerHTML:e._s(t+".")}})})),n("i",[e._v("Structures with "+e._s(e.getOldAa())+e._s(e.getVarDisplay())+e._s(t)+":")]),e._v(" "),n("span",{class:e.getIsShownVar(t),on:{click:function(n){return e.showTreeView(n,t)}}},[e._v(" "+e._s(e.getPdbCount(t))+" ")])],2)})),n("hr",{staticClass:"anAaHr",attrs:{id:"anAaHr",hidden:e.isHrHidden()}}),n("div",{attrs:{id:"divPosInfo"}},[n("span",{staticClass:"weight600"},[e._v(" Residue "+e._s(e.getVariant)+" ")]),n("br"),e._l(e.getPosInfoDataAsArr(),(function(t,a){return n("span",{key:a},[n("expandable-text-line",{attrs:{"use-click":""}},[n("i",[n("span",{domProps:{innerHTML:e._s(a)}}),e._v(": ")]),e._l(t,(function(t){return n("span",{key:t,domProps:{innerHTML:e._s(t+". ")}})}))],2)],1)})),n("i",[e._v("Structures with residue "+e._s(e.getVariant)+":")]),e._v(" "),n("span",{class:e.getIsShownRes(),on:{click:function(t){return e.showTreeView(t)}}},[e._v(" "+e._s(e.getTotalPdbCount)+" ")])],2)],2),n("div",{staticClass:"btnsDiv"},[n("span",{staticClass:"weight600"},[e._v("See also:")]),e._v(" "),n("span",{staticClass:"pAaColor"},[e._v(" "+e._s(e.getOldAa())+" → ")]),e._l(e.oneAaCodes,(function(t){return n("button",{key:t,class:e.getIfBoldInfoPres(t),attrs:{id:"btnVarInfo_"+t},on:{click:function(n){return e.showThisAaInfoHideOthers(t)}}},[e._v(e._s(t))])}))],2)]),n("div",{attrs:{id:"popupText_noVariant",hidden:!e.isVarSpecified()}},[n("span",{domProps:{innerHTML:e._s(e.getPopupText)}})])]),n("p",{attrs:{id:"popuptext"}},[e._v("Pop-up text box component for features")]),n("TreeView",{directives:[{name:"show",rawName:"v-show",value:e.showTree,expression:"showTree"}],staticClass:"level5",attrs:{id:"treeView",treeReady:e.data.prop,count:e.count,coordinates:e.data.coordinates}}),n("NodeLoader",{directives:[{name:"show",rawName:"v-show",value:e.showLoader,expression:"showLoader"}],attrs:{coordinates:e.data.coordinates,change:e.data.change}}),n("img",{attrs:{src:e.popupTail,id:"popupTail"}})],1)},vt=[],yt=(n("fb6a"),n("a434"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"scrim level6",on:{click:e.hideTree}}),n("div",{staticClass:"level7",attrs:{id:"arc"}})])}),wt=[],At=(n("4d63"),n("841c"),n("2909")),bt=n("1a88"),_t=n("fae8"),It=n("7792"),St=n("5a2b"),xt=10,Rt=450,Ct=450,kt=14,Et=new RegExp(/(p\.)?[A-Za-z]+[0-9]+[A-Za-z\*\_\?\[\]\(\)\%\=\.]+/),Ot={name:"TreeView",props:["treeReady","count","coordinates"],data:function(){return{pdbs:[],up:n("31c8"),down:n("62bc")}},computed:Object(We["a"])({},Object(Ye["b"])(["getGene","getOrganism"])),watch:{treeReady:function(e,t){var n=this;n.coordinates.clientX+Rt+5>=window.innerWidth?document.querySelector("#arc").style.left=window.innerWidth-Rt-5+"px":document.querySelector("#arc").style.left=n.coordinates.clientX+"px",document.querySelector("#arc").style.top=n.coordinates.clientY-400+"px",!0===this.$parent.showLoader?this.$parent.showLoader=!1:this.$parent.showTree=!1,console.log(n.count),console.log("Prop changed: ",e," | was: ",t);var a=e,r=a[0];if(Re["selectAll"]("#arc > *").remove(),a.length>xt){var i=n.chunk(a,xt);n.generateArc(i,r,0)}else n.generateArc(a,r)}},methods:{hideTree:function(){this.$parent.showTree=!1},nodeClick:function(e){var t=this,n=e[2].children[0],a=0;if(n.name=e[2].label,n.length=e[2].children.length,e[2].children.length>xt){var r=t.chunk(e[2].children,xt);t.generateArc(r,n,a)}else a+=1,this.generateArc(e[2].children,n)},chunk:function(e,t){var n,a=[];e=(n=[]).concat.apply(n,Object(At["a"])(e));while(e.length)a.push(e.splice(0,t));return a},generateArc:function(e,t,n){var a,r,i,s,o=this,c=60;if(r=void 0!==n?e[n]:e,Object.prototype.hasOwnProperty.call(r[0],"children")){void 0!==n&&null!==document.querySelector("svg#tree")&&document.querySelector("svg#tree").remove();var l=Re["select"]("#arc").append("svg").attr("id","tree").attr("width",Rt).attr("height",Ct);s=o.createLinks(l,"parent",e,t,n)}else document.querySelectorAll("outerElem").forEach((function(e){return e.remove()})),document.querySelectorAll("[id^=children_]").forEach((function(e){return e.parentNode.removeChild(e)})),l=Re["select"]("#arc").append("svg").attr("id","children_"+r[0].pdb_id+"_"+n).attr("width",Rt).attr("height",Ct),s=o.createLinks(l,"child",e,t,n);if(i=s.nodes,l=s.svg,Object.prototype.hasOwnProperty.call(r[0],"children")?(i.shift(),a=Re["select"]("svg#tree").selectAll("g#gParent").data(i).enter()):(t.dx=i[1][0]-c,t.dy=i[1][1]-kt/2,i.push([i[1][0]-c,i[1][1],t,"parent"]),document.querySelector("#tree").classList.add("hide"),i.shift(),a=Re["select"]("svg#children_"+r[0].pdb_id+"_"+n).selectAll("g").data(i).enter()),a=a.append("g").attr("class",(function(e,t){if(e.length>1)return Object.prototype.hasOwnProperty.call(e[2],"children")?"outerElem":"innerElem"})).attr("id",(function(e,t){if(e.length>1)return Object.prototype.hasOwnProperty.call(e[2],"children")?"out_"+e[2].children[0].pdb_id:void 0!==e[3]&&e[3].includes("parent")?"parentNode":"in_"+e[2].pdb_id})).attr("width",kt).attr("height",kt).on("click",(function(e,t){if(t>=0)if(Object.prototype.hasOwnProperty.call(e[2],"children"))o.nodeClick(e);else if(void 0===e[3]){var n=window.location.search;history.pushState("",document.title,"/"+o.getOrganism+"/"+o.getGene+"/"+e[2].pdb_id+"/"+e[2].pdb_chain+n),document.querySelectorAll(".coverage_map_container").forEach((function(e){e.remove()})),window.AQUARIA.structures2match.clusters.forEach((function(t,n){if(t.members.length>1){if(Object.prototype.hasOwnProperty.call(t.memberMap,e[2].pdb_id+e[2].pdb_chain))return t.E_value=t.memberMap[e[2].pdb_id+e[2].pdb_chain][0].E_value,window.AQUARIA.display_member(t),window.AQUARIA.showMatchingStructures.drawCoverageMap(t),null}else if(t.members[0].pdb_id===e[2].pdb_id&&t.members[0].pdb_chain[0]===e[2].pdb_chain)return t.E_value=t.members[0].E_value,window.AQUARIA.display_member(t),window.AQUARIA.showMatchingStructures.drawCoverageMap(t),null})),Et.test(n)&&o.waitForElement()}else document.querySelector("#tree").classList.remove("hide"),document.querySelectorAll("[id^=children_]").forEach((function(e){return e.parentNode.removeChild(e)}))})),Object.prototype.hasOwnProperty.call(r[0],"children"))a.append("rect").attr("transform",(function(e){return"translate("+e[0]+","+(e[1]-kt/2)+")"})).attr("class","label").attr("width",(function(e,t){return e[2].children?e[2].children.length>9?32:26:0})).attr("height",(function(e,t){return e[2].children?16:0})).attr("rx",6).attr("fill","#a3a3a3").attr("stroke","none");else{var d=Re["select"]("g#parentNode").selectAll("g").data([t]).enter();d.append("text").attr("x",(function(e){return e.dx-40-20})).attr("dy",(function(e){return e.dy+40})).attr("class","nbr_label").text((function(e){return e.name.length>15?e.name.substr(0,15)+"...":e.name})).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500),d.append("rect").attr("transform",(function(e){return"translate("+e.dx+","+e.dy+")"})).attr("class","label").attr("width",(function(e,t){return e.length?e.length>9?32:26:0})).attr("height",16).attr("rx",6).attr("fill","#a3a3a3").attr("stroke","none"),d.append("text").attr("x",(function(e){return e.dx+kt+2})).attr("dy",(function(e){return e.dy+kt-1})).attr("class","nbr_label").text((function(e){return e.length})).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500)}a.append("circle").attr("cx",(function(e){return e[0]})).attr("cy",(function(e){return e[1]})).attr("r",kt).style("fill","white").style("stroke","#999999").style("stroke-width","1"),a.append("clipPath").attr("id","clip_"+function(e,t){return t}).append("circle").attr("cx",(function(e){return e[0]})).attr("cy",(function(e){return e[1]})).attr("r",kt).attr("clip-rule","evenodd"),a.append("image").attr("width",2*(kt-1)+"px").attr("height",2*(kt-1)+"px").attr("x",(function(e){return e[0]-13})).attr("y",(function(e){return e[1]-13})).attr("clip-path",(function(e,t){var n=" ";return e[2].pdb_id&&(n="url(#clip_"+e[2].pdb_id+")"),e[2].children&&e[2].children[0].pdb_id&&(n="url(#clip_"+e[2].children[0].pdb_id+")"),n})).attr("xlink:href",(function(e,t){var n=" ";return e[2].pdb_id&&"undefined"===typeof e[2].children&&(n=e[2].pdb_id.toUpperCase()),e[2].children&&e[2].children[0].pdb_id&&(n=e[2].children[0].pdb_id.toUpperCase())," "===n?" ":"https://www.ebi.ac.uk/pdbe/static/entry/"+n.toLowerCase()+"_assembly_1_chain_front_image-200x200.png"})),a.append("text").attr("x",(function(e){return e[0]+kt+2})).attr("dy",(function(e){return e[1]+kt/2-1})).attr("class","nbr_label").text((function(e,t){if(e[2].label&&"undefined"!==e[2].label){var n=e[2].label;return e[2].label.length>30&&(n=e[2].label.substr(0,30)+"..."),e[2].children?e[2].children.length+"      "+n:" "}if(void 0===e[3])return e[2].pdb_id+"-"+e[2].pdb_chain})).attr("title",(function(e,t){return e[2].label_long?e[2].label_long:e[2].label})).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500)},createLinks:function(e,t,n,a,r){var i,s=[],o=0,c=[],l={},d=this,u=40;i=void 0!==r?n[r]:n,"child"===t&&(o=60);var h=Ct-u;c.push([10,h]);for(var p=0;p<i.length;p++)c.push([80+o,h-p*u]),c[p+1].push(i[p]);if(s.push(bt["a"]()({source:c[0],target:c[1]})),i.length>1){var m=[{xpoint:30+o,ypoint:h},{xpoint:45+o,ypoint:h-10},{xpoint:47+o,ypoint:h-20}],f=_t["a"]().x((function(e){return e.xpoint})).y((function(e){return e.ypoint})).curve(It["a"]);e.append("path").attr("d",f(m)).attr("fill","none").attr("class",(function(){return"outerElem"})).attr("stroke","#76c276").style("stroke-width",2);for(var g=2;g<c.length;g++){var v=[{xpoint:47+o,ypoint:c[g][1]+10},{xpoint:55+o,ypoint:c[g][1]},{xpoint:80+o,ypoint:c[g][1]}];e.append("path").attr("d",f(v)).attr("fill","none").attr("stroke","#76c276").style("stroke-width",2).attr("class",(function(e){return"outerElem"}))}e.append("line").style("stroke","#76c276").style("stroke-width",2).attr("x1",47+o).attr("y1",h+10-(c.length-2)*u).attr("x2",47+o).attr("y2",h-20).attr("class",(function(){return 1===t?"outerElem":"innerElem"}))}return e.append("path").attr("d",s).attr("stroke","#76c276").attr("fill","none").style("stroke-width",2),n.length>1&&(r+1<n.length&&(e.append("circle").attr("cx",80+o).attr("cy",h+30).attr("r",10).style("fill","#00b2ff"),e.append("image").attr("width","18px").attr("height","18px").attr("x",80+o-9).attr("y",h+21).attr("xlink:href",d.down).on("click",(function(){r<n.length-1&&d.generateArc(n,a,r+1)})),e.append("text").attr("x",95+o).attr("dy",h+35).attr("class","nbr_label").text("Next").attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500)),r+1>1&&(e.append("circle").attr("cx",80+o).attr("cy",Ct-c.length*u+10).attr("r",10).style("fill","#00b2ff"),e.append("image").attr("width","18px").attr("height","18px").attr("x",80+o-9).attr("y",Ct-c.length*u+1).attr("xlink:href",d.up).on("click",(function(){r-1>=0&&d.generateArc(n,a,r-1)})),e.append("text").attr("x",95+o).attr("dy",Ct-c.length*u+kt).attr("class","nbr_label").text("Previous").attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500))),e.append("rect").attr("x",0).attr("y",400).attr("rx",6).attr("ry",6).attr("width",d.coordinates.width).attr("height",d.coordinates.height).style("fill","orange").on("click",(function(){d.hideTree()})),e.append("text").attr("x",2).attr("dy",415).attr("class","nbr_label").text(d.count).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500),l.nodes=c,l.links=s,l.svg=e,l},waitForElement:function(){var e=this;window.AQUARIA.addedFeature=!0,"none"!==document.getElementById("waitingFrame").style.display?setTimeout(e.waitForElement,5):(window.AQUARIA.passFeature(window.AQUARIA.customfeatureSet,window.AQUARIA.customfeatureSetioid),St["createFeatureMap"](window.AQUARIA.customfeatureSet),Re["selectAll"]("svg.loaded rect.feature").attr("fill","#a4abdf"),Re["select"]("svg.loaded").classed("loaded",!1))}}},Pt=Ot,Bt=(n("41b6"),Object(R["a"])(Pt,yt,wt,!1,null,null,null)),Vt=Bt.exports,Tt=n("2b0e"),Dt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"scrim level6",attrs:{id:"nodeLoader"},on:{click:e.hideLoader}},[n("img",{attrs:{src:e.loader}})])},Lt=[],Mt={name:"NodeLoader",data:function(){return{loader:n("ae7d")}},props:["coordinates","change"],watch:{change:function(e,t){var n=this;document.querySelector("#nodeLoader > img").style.marginLeft=n.coordinates.clientX+"px",document.querySelector("#nodeLoader > img").style.marginTop=n.coordinates.clientY-10+"px"}},methods:{hideLoader:function(){this.$parent.showLoader=!1,this.$parent.showTree=!1}}},Ut=Mt,Nt=(n("39dd"),Object(R["a"])(Ut,Dt,Lt,!1,null,"26c15231",null)),Ft=Nt.exports,qt={name:"PopUp",components:{TreeView:Vt,ExpandableTextLine:fe["a"],NodeLoader:Ft},data:function(){return{popupTail:n("4c7a"),expandTextLine:[],oneAaCodes:["A","C","D","E","F","G","H","I","K","L","M","N","P","Q","R","S","T","V","W","Y"],threeAaCodes:["Ala","Cys","Asp","Glu","Phe","Gly","His","Ile","Lys","Leu","Met","Asn","Pro","Gln","Arg","Ser","Thr","Val","Trp","Tyr"],showTree:!1,isShowTreeViewClicked:!1,count:0,showLoader:!1}},filters:{structCntAa:function(e){return 0}},computed:Object(We["a"])(Object(We["a"])({data:function(){return{variantStructs:i["default"].state.variantStructs,variantResidues:i["default"].state.variantResidues,prop:null,coordinates:{},change:0}}},Object(Ye["b"])(["getVariant","getVariantStructs","getVariantResidues","getPopupTitle","getPopupText","getServersDone","getVariantIdx","getMatches"])),{},{getTotalPdbCount:function(){for(var e=0,t=this,n=0;n<t.oneAaCodes.length;n++)t.getVariantStructs&&t.getVariant&&Object.hasOwnProperty.call(t.getVariantStructs,t.getVariant)&&Object.hasOwnProperty.call(t.getVariantStructs[t.getVariant],t.oneAaCodes[n])&&Object.hasOwnProperty.call(t.getVariantStructs[t.getVariant][t.oneAaCodes[n]],"pdbs")&&(e+=t.getVariantStructs[t.getVariant][t.oneAaCodes[n]].pdbs.length);return e}}),created:function(){var e=this;window.addEventListener("click",(function(t){if(!e.$el.contains(t.target)){var n=document.getElementById("loadedPin");if(n.classList.contains("loadedPin")){var a=document.getElementById("x_close");a.click()}}}))},mounted:function(){this.dragElement(document.getElementById("popup")),this.handlePopupInitLoc(),this.resetLoadedPinState()},activated:function(){},updated:function(){var e=document.getElementById("popupTail");e.classList.contains("popupTail_noShow")&&e.classList.remove("popupTail_noShow"),e.classList.contains("popupTail_")||e.classList.add("popupTail_"),this.handlePopupInitLoc(),this.resetLoadedPinState(),!1===this.isShowTreeViewClicked&&(console.log("handle showTree "+this.isShowTreeViewClicked),this.handleInitAa())},methods:{closeAndReset:function(){this.resetLoadedPinState(),document.getElementById("popup").classList.add("fade"),this.resetToInitVar()},showTreeView:function(e,t){this.isShowTreeViewClicked=!0;var n=this,a=e.srcElement.getBoundingClientRect();if(n.data.coordinates.clientX=a.left,n.data.coordinates.clientY=a.top,n.data.coordinates.width=a.width,n.data.coordinates.height=a.height,n.data.change=n.data.change+1,n.showLoader=!0,n.getVariantStructs&&Object.hasOwnProperty.call(n.getVariantStructs,n.getVariant)){n.count=t?n.getPdbCount(t):n.getTotalPdbCount;var r="".concat(window.BACKEND,"/secondaryClusteringByResidue"),i={};i.selector=window.AQUARIA.protein_primaryAccession,i.sortedKeys=[n.getVariant],t&&(i.aaCode=t),J()({method:"get",url:r,params:i}).then((function(e){console.log(e.data),n.showTree=!0,n.data.prop=e.data}))}return 0},getVarDisplay:function(){return"string"===typeof this.getVariant&&this.getVariant.match("-")?this.getVariant.split("-")[0]:this.getVariant},resetToInitVar:function(){Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"theOrigFeatStr")&&this.getVariantIdx>-1&&(document.getElementById("urlVariant").innerHTML=this.getVariantResidues[this.getVariant].theOrigFeatStr[this.getVariantIdx]),Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"consequent")&&this.getVariantIdx>-1&&(document.getElementById("consInfo").innerHTML=this.getVariantResidues[this.getVariant].consequent[this.getVariantIdx]),this.handleInitAa(),document.getElementById("spanDefaultDesc").hidden=!1,!0===this.isHrHidden()&&(document.getElementById("anAaHr").hidden=!0)},resetLoadedPinState:function(){var e=this,t=document.getElementById("loadedPin");-1===e.getVariant||document.getElementById("Features")&&document.getElementById("Features").classList.contains("active")?(t.classList.contains("loadedPin_active")&&t.classList.remove("loadedPin_active"),t.classList.contains("loadedPin")||t.classList.add("loadedPin")):(t.classList.contains("loadedPin_active")||t.classList.add("loadedPin_active"),t.classList.contains("loadedPin")&&t.classList.remove("loadedPin"))},updateHrHidden:function(){document.getElementById("anAaHr").hidden=!1},isHrHidden:function(){var e=this.getDefaultDesc(),t=!1;return Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"newAas")&&this.getVariantIdx>-1&&this.oneAaCodes.includes(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0])&&(t=!0),""===e&&!1===t},toHideDefaultDesc:function(e){Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"newAas")&&this.getVariantIdx>-1&&this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx].includes(e)?document.getElementById("spanDefaultDesc").hidden=!1:document.getElementById("spanDefaultDesc").hidden=!0},handleFocusOut:function(){var e=document.getElementById("loadedPin");if(e.classList.contains("loadedPin")){var t=document.getElementsByClassName("x")[0];t.click()}},togglePinBehaviour:function(){var e=document.getElementById("loadedPin");e.classList.contains("loadedPin_active")?(e.classList.remove("loadedPin_active"),e.classList.add("loadedPin")):e.classList.contains("loadedPin")&&(e.classList.remove("loadedPin"),e.classList.add("loadedPin_active"))},rmExpandableIfNoOverflow:function(){for(var e=document.getElementsByClassName("expandable-text-line"),t=0;t<e.length;t++)this.checkTheOverflow(e[t])},getIfLoading:function(){return 0===this.getServersDone.length?"&nbsp;&nbsp;":'<img src="/images/tree-loader.gif" alt="Loading..."  width=15/>'},getDefaultDesc:function(){return this.getVariant&&this.getVariantResidues&&Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"defaultDesc")&&this.getVariantIdx>-1?this.getVariantResidues[this.getVariant].defaultDesc[this.getVariantIdx]:""},handleInitAa:function(){if(Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"newAas")&&this.getVariantIdx>-1&&this.oneAaCodes.includes(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0])){var e=document.getElementById("btnVarInfo_"+this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0]);e.click(),Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"consequent")&&this.getVariantIdx&&this.getVariantIdx>-1&&(document.getElementById("consInfo").innerHTML=this.getVariantResidues[this.getVariant].consequent[this.getVariantIdx])}else{this.getOldAa();for(var t=0;t<this.oneAaCodes.length;t++){var n=document.getElementById("divVarInfo_"+this.oneAaCodes[t]);"undefined"!==typeof n&&null!==n&&(document.getElementById("divVarInfo_"+this.oneAaCodes[t]).hidden=!0,document.getElementById("btnVarInfo_"+this.oneAaCodes[t]).classList.remove("selCol")),this.oneAaCodes[t]}this.updateSpanAa("")}},updateSpanAa:function(e){if(console.log("Value to display is "+e+this.getVariantIdx),document.getElementById("span_missenseHeading"))if(this.getVariantResidues&&Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"isOne")&&this.getVariantIdx>-1&&!0===this.getVariantResidues[this.getVariant].isOne[this.getVariantIdx]){var t=this.oneAaCodes.indexOf(e);document.getElementById("newAa").innerHTML=-1!==t?this.threeAaCodes[t]:""}else document.getElementById("newAa").innerHTML=e},updateUserSpecifiedAa:function(e){if(document.getElementById("urlVariant"))if(this.getVariantResidues&&Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"isOne")&&this.getVariantIdx>-1&&!0===this.getVariantResidues[this.getVariant].isOne[this.getVariantIdx])document.getElementById("varSpe_toRep").innerHTML=e;else{var t=this.oneAaCodes.indexOf(e);document.getElementById("varSpe_toRep").innerHTML=-1!==t?this.threeAaCodes[t]:""}},getInitLoadedPin:function(){var e=this;return-1===e.getVariant||document.getElementById("Features")&&document.getElementById("Features").classList.contains("active")?"loadedPin":"loadedPin_active"},isVarSpecified:function(){return-1===this.getVariant},getAaDataAsArr:function(e){var t=[];if(Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],e)){for(var n=0;n<this.getVariantResidues[this.getVariant][e].length;n++);return this.getVariantResidues[this.getVariant][e]}return t},setupDivForLen:function(e){var t=document.getElementById("forTextLen");t.innerHTML=e},checkTheOverflow:function(e){var t=e.innerText;t=t.replace(/<[^>]*>?/gm,""),this.setupDivForLen(t),this.$nextTick((function(){var t=this.checkOverflow();"anAaHr"===t&&(e.classList.remove("expandable-text-line"),e.classList.add("noExpandableCursor"))}))},checkOverflow:function(){var e=document.getElementById("forTextLen");return e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight?"anAaHr":""},getPosInfoDataAsArr:function(){return Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"positionInfo")?this.getVariantResidues[this.getVariant].positionInfo:[]},showThisAaInfoHideOthers:function(e){for(var t=this.getOldAa(),n=0;n<this.oneAaCodes.length;n++){var a=document.getElementById("divVarInfo_"+this.oneAaCodes[n]);"undefined"!==typeof a&&null!==a&&(e===this.oneAaCodes[n]?(document.getElementById("divVarInfo_"+this.oneAaCodes[n]).hidden=!1,document.getElementById("btnVarInfo_"+this.oneAaCodes[n]).classList.add("selCol"),this.updateSpanAa(e),this.updateUserSpecifiedAa(e),this.toHideDefaultDesc(e),this.updateHrHidden(e),Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"consequent")&&(this.oneAaCodes[n]===t?document.getElementById("consInfo").innerHTML="Synonymous ":document.getElementById("consInfo").innerHTML="Missense ")):(document.getElementById("divVarInfo_"+this.oneAaCodes[n]).hidden=!0,document.getElementById("btnVarInfo_"+this.oneAaCodes[n]).classList.remove("selCol"),this.oneAaCodes[n]!==t&&(document.getElementById("btnVarInfo_"+this.oneAaCodes[n]).hidden=!1)))}},getIsShownVar:function(e){if(this.getMatches&&Object.hasOwnProperty.call(this.getMatches,"Selected_PDB")&&Object.hasOwnProperty.call(this.getMatches.Selected_PDB,"pdb_id")&&Object.hasOwnProperty.call(this.getMatches.Selected_PDB,"pdb_chain")){var t=this.getMatches.Selected_PDB.pdb_id+":"+this.getMatches.Selected_PDB.pdb_chain;return this.getVariant&&this.getVariantStructs&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],e)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][e],"pdbs")&&this.getVariantStructs[this.getVariant][e].pdbs.includes(t)?"selCol_padded":this.getVariant&&this.getVariantStructs&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],e)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][e],"pdbs")&&!this.getVariantStructs[this.getVariant][e].pdbs.includes(t)?"noSelCol_padded":""}},getIsShownRes:function(){return console.log("The variant structs is "),console.log(this.getVariantStructs),console.log(this.getMatches),this.getVariantStructs&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],"isShown")&&!0===this.getVariantStructs[this.getVariant].isShown?"selCol_padded":this.getVariantStructs&&this.getVariant>-1&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],"isShown")&&!1===this.getVariantStructs[this.getVariant].isShown||0!==this.getTotalPdbCount?"noSelCol_padded":""},listWithNoOldAa:function(){var e=this.oneAaCodes.slice(),t=this.getOldAa();if(""===t)return e;var n=e.indexOf(t);return-1!==n&&e.splice(n,1),e},getOldAa:function(){return Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"oldAa")?this.getVariantResidues[this.getVariant].oldAa:""},getIfBoldInfoPres:function(e){var t=!1;if(Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],e))for(var n=0;n<this.getVariantResidues[this.getVariant][e].length;n++)(this.getVariantResidues[this.getVariant][e][n].match("UniProt")||this.getVariantResidues[this.getVariant][e][n].match("FunVar")||this.getVariantResidues[this.getVariant][e][n].match("COSMIC")||this.getVariantStructs&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],e)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][e],"pdbs")&&this.getVariantStructs[this.getVariant][e].pdbs.length>0)&&(t=!0);return!0===t?"btnAaBold_b":"btnAaBold"},getPdbCount:function(e){return this.getVariantStructs&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],e)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][e],"pdbs")?this.getVariantStructs[this.getVariant][e].pdbs.length:0},handler:function(){var e=this;this.dragElement(document.getElementById("popup"));var t=Tt["default"].extend(fe["a"]),n=["A","C","D","E","F","G","H","I","K","L","M","N","P","Q","R","S","T","V","W","Y"],a=document.getElementsByTagName("toReplace_posInfo");if(a.length>0){for(var r=document.getElementById("divVI_posInfo"),i=function(n){var i=new t({data:function(){return{p:a[n].innerHTML}},propsData:{useClick:!0}});i.$mount(),i.$el.innerHTML=a[n].innerHTML,r.appendChild(i.$el),e.expandTextLine.push(i)},s=0;s<a.length;s++)i(s);document.getElementById("balloon").appendChild(document.getElementById("divVariantInfo")),document.getElementById("divVariantInfo").appendChild(document.getElementById("divVI_chosen")),document.getElementById("divVariantInfo").appendChild(document.getElementById("divVI_posInfo")),document.getElementById("balloon").appendChild(document.getElementById("buttons_eachAa"));for(var o=function(e){document.getElementById("btnVI_"+n[e])&&document.getElementById("btnVI_"+n[e]).addEventListener("click",(function(){this.updateSpanAa(n[e]),p(n[e]),m(n[e])}))},c=0;c<n.length;c++)o(c)}for(var l=0,d=a.length;l!==d;++l)a[0].parentNode.removeChild(a[0]);for(var u=0;u<n.length;u++){var h;if(document.getElementsByTagName("toReplace_varInfo_"+n[u]))(function(){var a=document.getElementsByTagName("toReplace_varInfo_"+n[u]);if(a.length>0&&document.getElementById("divVI_varInfo_"+n[u])){h=document.getElementById("divVI_varInfo_"+n[u]);for(var r=function(n){var r=new t({data:function(){return{p:a[n].innerHTML}},propsData:{useClick:!0}});r.$mount(),r.$el.innerHTML=a[n].innerHTML,h.appendChild(r.$el),e.expandTextLine.push(r)},i=0;i<a.length;i++)r(i);document.getElementById("divVI_varInfo").appendChild(document.getElementById("divVI_varInfo_"+n[u]));for(var s=0,o=a.length;s!==o;++s)a[0].parentNode.removeChild(a[0]);f()}})()}function p(e){for(var t=0;t<n.length;t++)e===n[t]?document.getElementById("btnVI_"+e)&&document.getElementById("btnVI_"+e).classList.add("selCol"):document.getElementById("btnVI_"+n[t])&&document.getElementById("btnVI_"+n[t]).classList.remove("selCol")}function m(e){for(var t=0;t<n.length;t++)e===n[t]?document.getElementById("divVI_varInfo_"+e)&&document.getElementById("divVI_chosen").appendChild(document.getElementById("divVI_varInfo_"+e)):document.getElementById("divVI_varInfo_"+n[t])&&document.getElementById("divVI_varInfo").appendChild(document.getElementById("divVI_varInfo_"+n[t]))}function f(){if(document.getElementById("span_missenseHeading")){var e=document.getElementById("span_missenseHeading").getElementById("newAa").innerHTML;this.oneAaCodes.includes(e)&&(p(e),m(e))}}},handlePopupInitLoc:function(){var e,t=document.getElementById("popup").offsetWidth,n=document.getElementById("popup").left,a=parseInt(n+t/2-120);if(a<0&&(console.log("Popup tail - option 1"),e=107+a+3,document.querySelector("#popupTail").style.marginLeft=e+"px",document.querySelector("div#popup").style.left="-5px",console.log("Popup tail (1). "),document.getElementById("popupTail").style.display="inline"),a+document.querySelector("div#popup").offsetWidth+10>document.querySelector("#structure-viewer").clientWidth){console.log("Popup tail - option 2");var r=document.getElementById("popup").offsetWidth;document.querySelector("div#popup").style.left=document.querySelector("#structure-viewer").clientWidth+11-r+"px",e=r-(document.querySelector("#structure-viewer").clientWidth-a)-11+107,document.querySelector("#popupTail").style.marginLeft=e+"px",console.log("Popup tail (2). "+r+" "+e),document.getElementById("popupTail").style.display="inline"}},dragElement:function(e){var t=0,n=0,a=0,r=0;function i(e){e=e||window.event,e.preventDefault(),a=e.clientX,r=e.clientY,document.onmouseup=o,document.onmousemove=s}function s(i){i=i||window.event,i.preventDefault(),t=a-i.clientX,n=r-i.clientY,a=i.clientX,r=i.clientY,e.style.top=e.offsetTop-n+"px",e.style.left=e.offsetLeft-t+"px";var s=document.getElementById("popupTail");s.classList.contains("popupTail_")&&s.classList.remove("popupTail_"),s.classList.contains("popupTail_noShow")||s.classList.add("popupTail_noShow")}function o(){document.onmouseup=null,document.onmousemove=null}document.getElementById("headingC")&&(document.getElementById("headingC").onmousedown=i)}}},Ht=qt,Qt=(n("cda5"),n("65ed"),Object(R["a"])(Ht,gt,vt,!1,null,"17a731fa",null)),jt=Qt.exports,Gt=n("8ac5"),Zt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.data.error?n("div",{staticClass:"ErrorPanel overlay level3",attrs:{id:"AboutError"}},[n("a",{staticClass:"close",attrs:{href:"#"},on:{click:e.loadLastSuccess}}),n("div",[n("p",{staticClass:"thetitle"},[e._v(e._s(e.data.error))]),n("p",{staticClass:"intro1"},[e._v(e._s(e.data.errorMsg)+" "),e.data.errorMsg?n("br"):e._e(),e._v(" "),e.data.errorMsg?n("br"):e._e(),e._v(" Press 'Report Issue' to tell the Aquaria team, or press 'OK' to return to previous structure.")]),n("div",[n("md-button",{staticClass:"md-raised md-primary",attrs:{href:e.lastURL}},[e._v("OK")]),n("md-button",{staticClass:"md-raised md-primary",attrs:{href:e.issuesURL,target:"_blank"}},[e._v("Report Issue")])],1)])]):e._e()},zt=[],Wt={name:"Errors",data:function(){return{issues:"",title:"",changes:"https://github.com/aqclient/dev.aqclient.github.io/issues/new?labels=enhancement",logo:n("3198")}},computed:{data:function(){return{message:i["default"].state.message,error:i["default"].state.error,errorMsg:i["default"].state.errorMsg}},issuesURL:function(){return'https://github.com/aqclient/dev.aqclient.github.io/issues/new?title=Problem with this page&labels=bug&body=<a href="'+encodeURIComponent(window.location.href)+'">'+this.data.error+"</a>"},pageUrl:function(){return window.location.href},lastURL:function(){return window.location.origin}},methods:{loadLastSuccess:function(){window.location.pathname=localStorage.getItem("LastSuccess")?localStorage.getItem("LastSuccess"):"/P04637"}}},Yt=Wt,Jt=(n("715b"),Object(R["a"])(Yt,Zt,zt,!1,null,"72919d45",null)),$t=Jt.exports,Xt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"HelpPanel hide dialouge-window overlay level7",attrs:{id:"UserHelp"}},[n("a",{staticClass:"close",attrs:{href:"#"},on:{click:e.closeHelp}}),n("div",{staticClass:"fill",attrs:{id:"fullwindow-video"}},e._l(e.videos,(function(t){return n("youtube",{key:t.id,ref:"youtube",refInFor:!0,staticClass:"hide",attrs:{id:t.id,"video-id":t.id},on:{paused:function(t){return e.paused(t)},ended:function(t){return e.finished(t)}}})})),1),n("div",{attrs:{id:"contents"}},[n("p",{staticClass:"thetitle"},[e._v(e._s(e.data.title))]),n("p",{staticClass:"intro"},[e._v("Watch tutorial videos to get started.")]),n("p",{staticClass:"intro"},[e._v("Skip watching tutorial videos and start using Aquaria.")]),e.data.newUser?e._e():n("Playlist",{attrs:{playlist:e.videos}}),e.data.newUser?n("div",[n("youtube",{ref:"youtube",attrs:{id:"intro-video","video-id":"FAQ3yVGYSzY"},on:{playing:function(t){return e.playing(t)},paused:function(t){return e.paused(t)},ended:function(t){return e.finished(t)}}})],1):e._e(),n("a",{attrs:{href:"#",id:"skip"},on:{click:e.closeHelp}},[e._v("Skip > ")])],1)])},Kt=[],en=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"playlists"}},e._l(e.playlist,(function(t){return n("span",{key:t.id,attrs:{id:t.id},on:{click:function(n){return e.play(t.id)}}},[n("div",{staticClass:"thumbnail-container"},[n("img",{attrs:{src:"https://img.youtube.com/vi/"+t.id+"/0.jpg"}}),n("button",{staticClass:"btn"},[e._v("▶")])]),n("p",[e._v(e._s(t.title))])])})),0)},tn=[],nn={name:"Playlist",props:["playlist"],methods:{play:function(e){document.querySelector("#contents").className=" hide",document.getElementById(e).className+=" show",document.getElementById("UserHelp").classList.remove("overlay"),document.getElementById("UserHelp").classList.remove("level7"),document.getElementById("UserHelp").classList.remove("dialouge-window"),document.getElementById("UserHelp").className+=" fullwindow";for(var t=0;t<this.$parent.$children.length;t++)if(this.$parent.$children[t].$attrs.id===e)var n=t;this.$parent.$children[n].player.playVideo()}}},an=nn,rn=(n("4d26"),Object(R["a"])(an,en,tn,!1,null,null,null)),sn=rn.exports,on={name:"UserHelp",components:{Playlist:sn},data:function(){return{videos:[{id:"FAQ3yVGYSzY",title:"Introduction to Aquaria"},{id:"UZNEmPOaVrA",title:"How to Calculate Distances"}]}},computed:{data:function(){return{title:i["default"].state.helpTitle,newUser:i["default"].state.newUser}}},methods:{closeHelp:function(){var e=this;if(document.querySelector("iframe.show")){var t=document.querySelector("iframe.show").id;document.getElementById("contents").classList.remove("hide"),document.getElementById(t).classList.remove("show"),document.getElementById("UserHelp").className+=" dialouge-window",document.getElementById("UserHelp").className+=" overlay",document.getElementById("UserHelp").className+=" level7",document.getElementById("UserHelp").classList.remove("fullwindow");var n={h:{}};n.h.id=t,e.paused(n)}else document.getElementById("UserHelp").classList.remove("show"),document.getElementById("UserHelp").className+=" hide",I["RemoveOverlay"](),document.querySelector("#helpbtn").classList.contains("active")&&e.toggleActive(document.querySelector("#helpbtn"))},toggleActive:function(e){"lnk active"===e.className?e.className="lnk":e.className="lnk active"},getIndex:function(e){for(var t=0;t<this.$refs.youtube.length;t++)if(this.$refs.youtube[t].$attrs.id===e)return t},playing:function(e){if(v=e.h.id,this.$refs.youtube.length)y=this.getIndex(v),this.$refs.youtube[y].player.playVideo();else{this.$refs.youtube.player.playVideo();var t=document.querySelector("#intro-video"),n=t.requestFullScreen||t.mozRequestFullScreen||t.webkitRequestFullScreen;n&&n.bind(t)()}},paused:function(e){v=e.h.id,document.querySelector("iframe.active")?this.closeHelp():(this.$refs.youtube.length?(y=this.getIndex(v),this.$refs.youtube[y].player.pauseVideo()):this.$refs.youtube.player.pauseVideo(),(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)&&document.exitFullscreen())},finished:function(e){v=e.h.id,this.$refs.youtube.length?(y=this.getIndex(v),this.$refs.youtube[y].player.stopVideo()):this.$refs.youtube.player.stopVideo(),document.querySelector("iframe.active")&&document.querySelector("#UserHelp a.close").click(),document.exitFullscreen(),this.closeHelp()}}},cn=on,ln=(n("7f5f"),Object(R["a"])(cn,Xt,Kt,!1,null,null,null)),dn=ln.exports,un=n("7d7f"),hn=n.n(un),pn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"waitingFrame"}},[n("div",{attrs:{id:"waitinghtml"}},[n("img",{attrs:{src:e.loader}}),n("p",{attrs:{id:"appletMessage"}},[e._v(" "+e._s(e.data.loaderMsg)+" ")])])])},mn=[],fn={name:"Loader",data:function(){return{loader:n("8673")}},computed:{data:function(){return{loaderMsg:i["default"].state.LoaderMsg}}}},gn=fn,vn=(n("92b5"),Object(R["a"])(gn,pn,mn,!1,null,"4d0fb015",null)),yn=vn.exports,wn={name:"Wrapper",components:{Header:F,Sequence:Ie,AboutAlignment:Pe,AboutPdb:Me,StructureViewer:Qe,Tabs:ft,PopUp:jt,AboutAquaria:Gt["a"],Errors:$t,UserHelp:dn,Loader:yn},props:["urlRequest"],computed:{data:function(){return{loader:i["default"].state.Loader,hash:i["default"].state.hash,arrayOfVideos:["https://youtu.be/FAQ3yVGYSzY?list=PLsGaleFn8YydVFkxDhOvHHE5NoTsl6D1e","https://www.youtube.com/watch?v=UZNEmPOaVrA&list=PLsGaleFn8YydVFkxDhOvHHE5NoTsl6D1e&index=2"]}}},methods:{closeHelp:function(){var e=this;document.getElementById("UserHelp").classList.remove("show"),document.getElementById("UserHelp").className+=" hide",document.querySelector(".dimmer").style.display="none",document.querySelector("#helpbtn").classList.contains("active")&&(I["RemoveOverlay"](),e.toggleActive(document.querySelector("#helpbtn")))},checkPhone:function(){var e=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(!navigator.platform)return!1;while(e.length)if(navigator.platform===e.pop()||screen.width>=300&&screen.width<=600)return!0},inspectHeight:function(){document.querySelector("#heightinspector").innerHTML="reset";var e=window.outerHeight-window.innerHeight;document.querySelector("#heightinspector").innerHTML="HO:"+window.outerHeight+", hDiff:"+e+", scroll: "+window.scrollY+" bodyHeight: "+document.body.scrollHeight},dismissPanel:function(){document.querySelector("#scrim").className="hide",document.querySelector("#title").className="item title fix level6",null!==document.querySelector("#titleAlign")&&(document.querySelector("#titleAlign").className=""),document.querySelectorAll("#title span a").forEach((function(e){e.className=""})),document.querySelector("#pdb_id > span#help").style.visibility="visible"},toggleActive:function(e){"lnk active"===e.className&&(e.className="lnk")}},mounted:function(){window.AQUARIA.panel3d=new hn.a("#threeDSpan",s["chainSelected"]),window.scrollBy(0,100),s["loadAccession"]([this.$props.urlRequest.uniprotAccession],this.$props.urlRequest.pdbID,this.$props.urlRequest.chain),window.addEventListener("resize",(function(){window.scrollBy(0,100),document.querySelector("#vis > .ruler").remove(),document.querySelectorAll("#vis > #allclusters .outer_container").forEach((function(e){return e.remove()})),window.AQUARIA.refresh();var e=window.outerHeight-window.innerHeight;document.querySelector("#heightinspector").innerHTML="HO:"+window.outerHeight+", hDiff:"+e+", scroll: "+window.scrollY+" bodyHeight: "+document.body.scrollHeight})),setTimeout((function(){document.querySelector(".matrixLoading")&&(document.querySelector(".matrixLoading").style.visibility="hidden",document.querySelector(".matrixLoading").style.display="none")}),1500)},updated:function(){}},An=wn,bn=(n("8f89"),Object(R["a"])(An,a,r,!1,null,null,null));t["default"]=bn.exports},ae7d:function(e,t,n){e.exports=n.p+"img/node.cac6f4f6.gif"},b066:function(e,t,n){"use strict";n("d673")},b335:function(e,t,n){e.exports=n.p+"img/aquaria-menu.1a89fbab.svg"},b3c8:function(e,t,n){(function(e){n("ac1f"),n("5319"),e.fn.digits=function(){return this.each((function(){e(this).text(e(this).text().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"))}))},e(document).ready((function(){e("#protein_syn_input, #organism_syn_input").focus((function(){e(".infocus").removeClass("infocus"),e("#searchByName").addClass("infocus")})),e("#help3D").hide()})),e((function(){e(document).tooltip({position:{my:"right top+15",at:"right center",collision:"none"}},{show:{delay:1200}})}))}).call(this,n("1157"))},b923:function(e,t,n){},cda5:function(e,t,n){"use strict";n("3403")},d093:function(e,t,n){"use strict";n("9bcc")},d673:function(e,t,n){},def1:function(e,t,n){},e352:function(e,t,n){},e4c6:function(e,t,n){},ea62:function(e,t,n){},ee8d:function(e,t,n){"use strict";n("46c7")},f760:function(e,t,n){"use strict";n("8f69")},fc7c:function(e,t,n){"use strict";n("e352")}}]);
//# sourceMappingURL=wrapper.5376b579.js.map