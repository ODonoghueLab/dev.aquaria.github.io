(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["wrapper"],{"0319":function(t,e,a){},"05b9":function(t,e,a){"use strict";a("5f75")},"0d58":function(t,e,a){"use strict";a("4d40")},1202:function(t,e,a){},1380:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"matrix"}},[a("MatrixHeader"),a("LoadingPage"),a("div",{attrs:{id:"container"}})],1)},n=[],s=a("2909"),i=a("1da1"),o=(a("96cf"),a("99af"),a("d81d"),a("b0c0"),a("a434"),a("a4d3"),a("e01a"),a("e9c4"),a("fb6a"),a("d3b7"),a("ac1f"),a("5319"),a("466d"),a("4de4"),a("4e82"),a("159b"),a("1276"),a("b64b"),a("3ca3"),a("ddb0"),a("bc3a")),c=a.n(o),l=a("9cc6"),u=a("2fdb"),d=a("4360"),h={name:"Matrix",components:{MatrixHeader:l["a"],LoadingPage:u["a"]},data:function(){return{hostname:d["a"].state.url,publicPath:"/",structures:null,totalStructures:0,d3:a("5698"),green:"#7A9D5B",backgroundColour:"#ffffff",x:0,y:15,organismId:"2697049"}},mounted:function(){var t,e=this,a="".concat(window.BACKEND,"/").concat(this.organismId);c()({method:"get",url:a}).then((function(a){t=JSON.parse(a.data.primary_accessions),e.getStructures(e.organismId,t).then((function(t){console.log(t),e.getMatchingStructures(t).then((function(t){e.getProteinSynonyms(t).then((function(t){e.loadShapes(t).then((function(){document.querySelector(".matrixLoading")&&(document.querySelector(".matrixLoading").style.visibility="hidden",document.querySelector(".matrixLoading").style.display="none")}))}))}))})),e.structures=t})),window.addEventListener("resize",this.initialDisplay)},methods:{getResidueSize:function(t,e){return e*t},loadShapes:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n,i,o,c,l,u,d,h,p,g,m,f,v,y,b,w,_,S;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(t=e.partitionToThree(t),r=0,n=960/Math.max.apply(Math,Object(s["a"])(t.map((function(t){return e.getListSum(t)})))),i=0;i<t.length;i++){for(o=e.d3.select("#container").append("svg").attr("class","row").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 960 360"),e.x=0,e.y=15,c=0,0!==i&&(l=t[i-1],u=l[l.length-1],d=t[i][0],h=Math.floor(d.length/500+1),p=!1,h>3&&(p=!0),g={id:"placeholder",dark:!0,placeholderLarge:p,primary_accession:u.primary_accession,name:u.name,synonym:u.synonym,placeholder:!0},e.drawArrow(o,g,150,20,20/1.5,c,n),e.drawRuler(o,g,r,150,20/1.5,c),c=c+150+20/1.5),m=0;m<t[i].length;m++)f=!1,v=20,y=v/1.5,b=e.getResidueSize(n,t[i][m].length)-y,b<0&&(y=e.getResidueSize(n,t[i][m].length),b=0),e.drawArrow(o,t[i][m],b,v,y,c,n),e.drawRuler(o,t[i][m],r,b,y,c),r=t[i][m].continuous?t[i][m].length:0,e.addNonDarkToFragments(t[i][m]),0!==t[i][m].fragments.length&&(e.y=e.y+33,f=!0),e.drawFragments(o,t[i][m].fragments,n,c),e.drawMatchingStructures(o,t[i][m],b,v,y,c,n),c=c+b+y,f&&(e.y=e.y-33);0!==i&&i!==t.length-1&&(w=t[i+1],_=w[0],S=t[i-1],h=Math.floor(S[S.length-1].length/500+1),p=!1,h>3&&(p=!0),g={id:"placeholder",dark:!0,placeholderLarge:p,primary_accession:_.primary_accession,name:_.name,synonym:_.synonym,placeholder:!0},e.drawArrow(o,g,e.getResidueSize(n,w[0].length)-20/1.5,20,20/1.5,c,n),e.drawRuler(o,g,r,e.getResidueSize(n,w[0].length)-20/1.5,20/1.5,c)),e.drawExpandButton(o)}e.initialDisplay(!1);case 5:case"end":return a.stop()}}),a)})))()},fillData:function(t){var e=[{offset:"0%",color:"black"}];if(t.nonDark){console.log(t.nonDark);for(var a=0;a<t.nonDark.length;a++){var r=t.nonDark[a];e.push({offset:r.Start/t.length*100+"%",color:"black"}),e.push({offset:r.Start/t.length*100+"%",color:this.green}),e.push({offset:r.Stop/t.length*100+"%",color:this.green}),e.push({offset:r.Stop/t.length*100+"%",color:"black"})}}return t.placeholder&&(e=[{offset:"0%",color:"#CCCCCC"}]),e},getNonDarkBetween:function(t,e,a){var r=[];if(t.nonDark)for(var n=0;n<t.nonDark.length;n++)t.nonDark[n].Start<=e&&t.nonDark[n].Stop>=e?r.push({Start:0,Stop:t.nonDark[n].Stop-e}):t.nonDark[n].Start>=e&&t.nonDark[n].Stop<=a?r.push({Start:t.nonDark[n].Start-e,Stop:t.nonDark[n].Stop-e}):t.nonDark[n].Start<=a&&t.nonDark[n].Stop>=a&&r.push({Start:t.nonDark[n].Start-e,Stop:a-e});return r},splitToChunks:function(t,e){for(var a=[],r=e;r>0;r--)a.push(t.splice(0,Math.ceil(t.length/r)));return a},addNonDarkToFragments:function(t){if(t.fragments)for(var e=0;e<t.fragments.length;e++){var a=t.fragments[e];t.fragments[e].nonDark=this.getNonDarkBetween(t,a.Start,a.Stop)}},drawArrow:function(t,e,r,n,s,i,o){var c=this.fillData(e),l=e.id?e.id:e.primary_accession;console.log(l);var u,d=e.description?e.description:e.name;if(c.length>14&&r>300)for(var h=0,p=JSON.parse(JSON.stringify(e.nonDark)),g=Math.floor(c.length/10)>4?Math.floor(c.length/10):4,m=this.splitToChunks(p,g),f=0,v=0;v<m.length;v++){var y=m[v].slice(-1)[0].Stop-f;v===m.length-1&&(y=e.length-f);for(var b=this.getResidueSize(o,y),w=0;w<m[v].length;w++)m[v][w].Start=m[v][w].Start-f,m[v][w].Stop=m[v][w].Stop-f;var _=this.fillData({length:y,nonDark:m[v]});if(t.append("linearGradient").attr("id","grad_partial_"+l+"_"+v).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").selectAll("stop").data(_).enter().append("stop").attr("offset",(function(t){return t.offset})).attr("stop-color",(function(t){return t.color})).attr("stop-opacity",1),v===m.length-1){var S=b-s,x=void 0;x=S>0?[this.x,this.y,this.x,this.y+n,this.x+S,this.y+n,this.x+S,this.y+.5*n+s,this.x+S+s,this.y+.5*n,this.x+S,this.y+.5*n-s,this.x+S,this.y]:[this.x,this.y+.5*n-s,this.x,this.y+.5*n+s,this.x+s,this.y+.5*n],t.append("svg:polygon").attr("points",x).attr("fill","url(#grad_partial_"+l+"_"+v+")").attr("id",l).attr("title",l).attr("transform","translate("+(i+h)+",0)").attr("class","arrow").on("mouseover",(function(t,e){var r=a("5698");r.select(this).attr("opacity",".85"),r.selectAll("rect#"+this.id).attr("opacity",".85"),this.style.cursor="pointer"})).on("mouseout",(function(t,e){var r=a("5698");r.select(this).attr("opacity","1"),r.selectAll("rect#"+this.id).attr("opacity","1")})).on("click",(function(){var t=a("5698"),e=window.location.origin;window.open(e+"/"+t.select(this).attr("title"))})).append("svg:title").text(d)}else t.append("svg:rect").attr("fill","url(#grad_partial_"+l+"_"+v+")").attr("x",this.x).attr("y",this.y).attr("width",b).attr("height",n).attr("id",l).attr("class","arrow").attr("title",l).attr("transform","translate("+(i+h)+",0)").on("mouseover",(function(t,e){var r=a("5698");r.select(this).attr("opacity",".85"),r.selectAll("rect#"+this.id).attr("opacity",".85"),r.selectAll("polygon#"+this.id).attr("opacity",".85"),this.style.cursor="pointer"})).on("mouseout",(function(t,e){var r=a("5698");r.select(this).attr("opacity","1"),r.selectAll("rect#"+this.id).attr("opacity","1"),r.selectAll("polygon#"+this.id).attr("opacity","1")})).on("click",(function(){var t=a("5698"),e=window.location.origin;window.open(e+"/"+t.select(this).attr("title"))})).append("svg:title").text(d);f+=y,h+=b}else t.append("linearGradient").attr("id","grad_"+l).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").selectAll("stop").data(c).enter().append("stop").attr("offset",(function(t){return t.offset})).attr("stop-color",(function(t){return t.color})).attr("stop-opacity",1),u=r>0?[this.x,this.y,this.x,this.y+n,this.x+r,this.y+n,this.x+r,this.y+.5*n+s,this.x+r+s,this.y+.5*n,this.x+r,this.y+.5*n-s,this.x+r,this.y]:[this.x,this.y+.5*n-s,this.x,this.y+.5*n+s,this.x+s,this.y+.5*n],t.append("svg:polygon").attr("points",u).attr("fill","url(#grad_"+l+")").attr("id",l).attr("title",l).attr("class","arrow").attr("transform","translate("+i+",0)").on("mouseover",(function(t,e){var r=a("5698");this.style.cursor="pointer",r.select(this).attr("opacity",".85")})).on("mouseout",(function(t,e){var r=a("5698");r.select(this).attr("opacity","1")})).on("click",(function(){var t=a("5698"),e=window.location.origin;window.open(e+"/"+t.select(this).attr("title"))})).append("svg:title").text(d);var A=t.append("text").attr("x",this.x+.5*(r+.5*s)).attr("y",this.y+.5*n).attr("transform","translate("+i+",0)").attr("dy",".35em").style("text-anchor","middle").attr("class","arrow").style("fill","white").text(e.name);if(A.node().getComputedTextLength()>r&&(A.text(e.synonym[0]),A.node().getComputedTextLength()>r)){var C=e.synonym.reduce((function(t,e){return t.length<=e.length?t:e}));C=C.replace("orf","").replace("ORF",""),A.text(C),A.node().getComputedTextLength()>r+.5*s&&(A.attr("y",this.y+1.5*n),A.style("fill",this.green),A.attr("class","rowContent"))}},drawRuler:function(t,e,a,r,n,s){var i=[1,r+n-1];a&&(i=[0,r+n]);var o=this.d3.scale.linear().domain([a,a+e.length]).range(i),c=Math.floor(e.length/500+1);if(c>3||e.placeholderLarge){e.placeholderLarge&&(c=0);var l=t.append("g").attr("transform","translate("+s+","+(this.y-15)+")").attr("style","").style("fill","gray").style("font-size","10px").attr("class","rowContent").call(this.d3.svg.axis().scale(o).tickSize(0,1).tickFormat((function(t,e){return 0===t||t%1e3!==0?" ":t})).orient("bottom").ticks(c));e.placeholder&&l.style("fill","#CCCCCC"),l.selectAll(".tick").attr("stroke","gray").attr("x1",this.x).attr("x2",this.x).attr("y2",0).attr("y1",3).attr("stroke-width","1")}else if(e.length>200||e.placeholder){c=2,e.placeholder&&(c=0);var u=t.append("g").attr("transform","translate("+s+","+(this.y-10)+")").style("fill","gray").attr("class","rowContent").call(this.d3.svg.axis().scale(this.d3.scale.linear().domain([0,1]).range([1,r+n-1])).tickSize(2,1).orient("top").ticks(c).tickFormat(""));u.selectAll(".tick").attr("stroke","gray").attr("x1",this.x).attr("y1",4).attr("y2",-1).attr("stroke-width","1"),e.placeholder&&u.style("fill","#CCCCCC");var d=t.append("text").attr("x",this.x+.5*(r+n)).attr("y",this.y-10).attr("dy",".35em").style("text-anchor","middle").attr("transform","translate("+s+",0)").style("fill","gray").style("font-size","10px").attr("class","rowContent").text(e.length);t.append("rect","text").datum((function(){return d.node().getBBox()})).attr("x",(function(t){return t.x-2})).attr("y",(function(t){return t.y})).style("fill",this.backgroundColour).attr("transform","translate("+s+",0)").attr("class","rowContent").attr("width",(function(t){return t.width+4})).attr("height",(function(t){return t.height})),d.node().parentNode.appendChild(d.node())}},drawFragments:function(t,e,a,r){for(var n=0;n<e.length;n++){console.log(e);var s={name:e[n].Name,primary_accession:e[n].Primary_Accession,synonym:[e[n].Short_Name].concat(e[n].Short_Name.match(/[0-9]+/g)),Start:e[n].Start,Stop:e[n].Stop,pdb:null,length:e[n].Stop-e[n].Start,id:e[n].Primary_Accession+"_"+e[n].Short_Name,nonDark:e[n].nonDark,description:e[n].Description},i=e[n].Stop-e[n].Start,o=20,c=o/1.5,l=this.getResidueSize(a,i)-c;l<0&&(c=this.getResidueSize(a,i),l=0),(0===n||e[n].Start>=e[n-1].Stop)&&(this.drawArrow(t,s,l,o,c,r,a),r=r+l+c)}},renderImage:function(t,e,r,n,s,i,o){var c=(r<120?r:120)+10,l=e.Start?e.Start:0;if(o){t.append("rect","text").attr("x",.5*r+l).attr("y",this.y+n).style("fill",this.backgroundColour).attr("transform","translate("+(s-c/2)+","+(20+i)+")").attr("width",c).attr("height",200).attr("title",o).on("mouseover",(function(t,e){var r=a("5698");r.select(this).transition().duration(500).style("fill","orange"),this.style.cursor="pointer"})).on("mouseout",(function(t,e){var r=a("5698");r.select(this).transition().duration(500).style("fill","white")})).on("click",(function(){var t=a("5698"),e=t.select(this).attr("title");if(e){var r=window.location.origin;window.open(r+"/"+t.select(this).attr("title"))}}));var u=t.append("svg:image").attr("x",.5*r+l).attr("y",this.y+n).attr("transform","translate("+(s-c/2)+","+(20+i)+")").attr("width",c).attr("height",c).style("pointer-events","none");!e.dark&&e.pdb?u.attr("xlink:href","../images/pdb/"+e.pdb+".png"):(u.attr("xlink:href","../images/covid19/unknown-structure_1000.png"),u.style("visibility","hidden"))}},splitLargeGaps:function(t){for(var e=0;e<t.length;e++){var a=t[e];if(a.seq_start.length>1)for(var r=0;r<a.seq_start.length-1;r++)if(a.seq_start[r+1]-a.seq_end[r]>100){var n=JSON.parse(JSON.stringify(a));n.seq_start=a.seq_start.slice(0,r+1),n.seq_end=a.seq_end.slice(0,r+1),t[e].seq_start=a.seq_start.slice(r+1),t[e].seq_end=a.seq_end.slice(r+1),t.push(n);break}}return t},drawMatchingStructures:function(t,e,r,n,i,o,c){var l=this,u=30;if(e.clusters){e.clusters=this.splitLargeGaps(e.clusters),e.clusters=e.clusters.filter((function(t){return t.seq_start[0]>=0})),e.clusters.sort((function(t,e){return t.cluster_size>e.cluster_size?-1:e.cluster_size>t.cluster_size?1:0}));var d=1;while(d<e.clusters.length){var h=0,p=!1;while(h<d&&!p){var g=Math.min.apply(Math,Object(s["a"])(e.clusters[h].seq_start)),m=Math.min.apply(Math,Object(s["a"])(e.clusters[d].seq_start)),f=Math.max.apply(Math,Object(s["a"])(e.clusters[h].seq_end)),v=Math.max.apply(Math,Object(s["a"])(e.clusters[d].seq_end));g<=m&&f>=v?(e.clusters[h].cluster_size+=e.clusters[d].cluster_size,e.clusters.splice(d,1),p=!0):(g>m&&g-m<.9*(v-m)||f<v&&v-f<.9*(v-m))&&(e.clusters[h].cluster_size+=e.clusters[d].cluster_size,e.clusters[h].seq_start=[Math.min(g,m)],e.clusters[h].seq_end=[Math.max(f,v)],e.clusters.splice(d,1),p=!0),h++}p||d++}e.clusters=e.clusters.filter((function(t){return Math.max.apply(Math,Object(s["a"])(t.seq_end))-Math.min.apply(Math,Object(s["a"])(t.seq_start))>20})),e.clusters.forEach((function(r){var s=l.getResidueSize(c,r.seq_start[0]);if(!(r.seq_start<0)){var i=l.getResidueSize(c,r.seq_end[r.seq_end.length-1]);if(!(r.seq_end>e.length)){var d=l.d3.scale.linear().domain([0,2]).range([s+1,i-1]).nice(),h=t.append("g").attr("transform","translate("+o+","+(l.y+n+10)+")").attr("style","").style("fill",l.green).style("font-size","10px").call(l.d3.svg.axis().scale(d).tickSize(0,1).tickFormat("").orient("bottom").ticks(2));l.d3.select(h.selectAll(".tick")[0][1]).attr("stroke",l.green).attr("x1",l.x).attr("x2",l.x).attr("y2",0).attr("y1",u).attr("stroke-width","1");var p=t.append("text").datum((function(){return h.node().getBBox()})).attr("x",(function(t){return t.x+.5*t.width})).attr("y",l.y+n+u+5).attr("dy",".35em").style("text-anchor","middle").attr("transform","translate("+o+",0)").style("fill","white").style("font-size","12px").text(r.cluster_size).attr("title",e.primary_accession+"/"+r.pdb_id).style("pointer-events","none");t.append("rect","text").datum((function(){return p.node().getBBox()})).attr("x",(function(t){return t.x-4})).attr("y",(function(t){return t.y})).attr("rx",6).attr("ry",10).style("fill",l.green).attr("transform","translate("+o+",0)").attr("width",(function(t){return t.width+8})).attr("height",(function(t){return t.height})).attr("title",e.primary_accession+"/"+r.pdb_id).on("click",(function(){var t=a("5698");console.log(t.select(this).attr("title"));var e=window.location.origin;window.open(e+"/"+t.select(this).attr("title"))})).on("mouseover",(function(){this.style.cursor="pointer"})),p.node().parentNode.appendChild(p.node());var g={name:r.pdb_id,primary_accession:e.primary_accession,Start:s,Stop:i,pdb:r.pdb_id,length:i-s,id:e.primary_accession+"_"+r.pdb_id,nonDark:!0};l.renderImage(t,g,i-s,n,o,u,e.primary_accession+"/"+r.pdb_id)}}}))}else this.renderImage(t,e,r,n,o,u,"")},drawExpandButton:function(t){var e=t.append("svg:rect").attr("x",0).attr("y",0).attr("stroke","#CCCCCC").attr("fill","#CCCCCC").attr("opacity",.8).attr("width",window.innerWidth).attr("height",30).attr("id","expand");window.innerHeight>window.innerWidth&&e.attr("display","none"),e.on("mouseover",(function(t,e){var r=a("5698");r.select(this.parentNode).select("path#expand:last-child").attr("stroke","orange"),this.style.cursor="pointer"})).on("mouseout",(function(t,e){var r=a("5698");r.select(this.parentNode).select("path#expand:last-child").attr("stroke","#CCCCCC")})),e.on("click",(function(t,e){var r=a("5698");if(this.parentNode.className.baseVal.split(" ").indexOf("open")>-1)r.select(this.parentNode).classed("open",!1),r.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),r.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0);else{r.selectAll(".open").selectAll("rect#expand").attr("opacity",0),r.selectAll(".open").selectAll("rect#expand").attr("display","block"),r.selectAll(".open").selectAll("rect#expand").transition().duration(1e3).attr("opacity",.8),r.selectAll(".open").selectAll("path#expand").attr("opacity",0),r.selectAll(".open").selectAll("path#expand").attr("display","block"),r.selectAll(".open").selectAll("path#expand").transition().duration(1e3).attr("opacity",1),r.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=r.transform(r.select(this).attr("transform"));return"translate("+t.translate[0]+", -10)"})),r.selectAll(".row").classed("open",!1),r.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),r.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0),r.select(this.parentNode).classed("open",!0),r.select(this).attr("display","none"),r.select(this.parentNode).selectAll("path#expand").attr("display","none"),r.selectAll(".open").transition().duration(1e3).attr("viewBox","0 0 960 360"),r.selectAll(".open .rowContent").transition().duration(1e3).attr("opacity",1),r.select(this.parentNode).selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=r.transform(r.select(this).attr("transform"));return"translate("+t.translate[0]+", 0)"}));for(var n=r.selectAll(".row"),s=!1,i=!0,o=0;o<n[0].length;o++)r.select(n[0][o]).classed("open")&&(s=!0),s?(r.select(n[0][o]).select("path#expand").attr("transform","scale(1, -1) translate(480, -0)"),r.select(n[0][o]).select("path#expand:last-child").attr("transform","translate(480,0)")):(i=!1,r.select("#container").transition().duration(1e3).style("padding","8px 0px 0px 0px"),r.select(n[0][o]).select("path#expand").attr("transform","translate(480,30)"),r.select(n[0][o]).select("path#expand:last-child").attr("transform","scale(1, -1) translate(480, -30)"));i&&r.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px")}})),this.renderHalfMoon(t,480,0)},renderHalfMoon:function(t,e,r){var n=this.d3.svg.arc().outerRadius(20).innerRadius(0).startAngle(-Math.PI/2).endAngle(Math.PI/2),s=t.append("path").attr("transform","scale(1, -1) translate("+e+", -"+r+")").attr("d",n()).attr("fill","gray").attr("id","expand").on("mouseover",(function(t,e){var r=a("5698");r.select(this.parentNode).select("path#expand:last-child").attr("stroke","orange"),this.style.cursor="pointer"})).on("mouseout",(function(t,e){var r=a("5698");r.select(this.parentNode).select("path#expand:last-child").attr("stroke","#CCCCCC")})),i=t.append("path").attr("transform","translate("+e+","+r+")").attr("d","M-8 12 0 5 8 12").attr("stroke","#CCCCCC").attr("stroke-width",3).attr("fill","transparent").attr("id","expand").on("mouseover",(function(t,e){var r=a("5698");r.select(this).attr("stroke","orange"),this.style.cursor="pointer"})).on("mouseout",(function(t,e){var r=a("5698");r.select(this).attr("stroke","#CCCCCC")}));i.on("click",(function(t,e){var r=a("5698");r.selectAll(".open").selectAll("rect#expand").attr("opacity",0),r.selectAll(".open").selectAll("rect#expand").attr("display","block"),r.selectAll(".open").selectAll("rect#expand").transition().duration(1e3).attr("opacity",.8),r.selectAll(".open").selectAll("path#expand").attr("opacity",0),r.selectAll(".open").selectAll("path#expand").attr("display","block"),r.selectAll(".open").selectAll("path#expand").transition().duration(1e3).attr("opacity",1),r.selectAll(".row").classed("open",!1),r.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),r.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0),r.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=r.transform(r.select(this).attr("transform"));return"translate("+t.translate[0]+", -10)"})),r.selectAll(".row").classed("open",!1),r.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),r.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0),r.select(this.parentNode).classed("open",!0),r.select(this.parentNode).selectAll("rect#expand").attr("display","none"),r.select(this.parentNode).selectAll("path#expand").attr("display","none"),r.selectAll(".open").transition().duration(1e3).attr("viewBox","0 0 960 360"),r.selectAll(".open .rowContent").transition().duration(1e3).attr("opacity",1),r.select(this.parentNode).selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=r.transform(r.select(this).attr("transform"));return"translate("+t.translate[0]+", 0)"}));for(var n=r.selectAll(".row"),s=!1,i=!0,o=0;o<n[0].length;o++)r.select(n[0][o]).classed("open")&&(s=!0),s?(r.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px"),r.select(n[0][o]).select("path#expand").attr("transform","scale(1, -1) translate(480, -0)"),r.select(n[0][o]).select("path#expand:last-child").attr("transform","translate(480,0)")):(i=!1,r.select("#container").transition().duration(1e3).style("padding","8px 0px 0px 0px"),r.select(n[0][o]).select("path#expand").attr("transform","translate(480,30)"),r.select(n[0][o]).select("path#expand:last-child").attr("transform","scale(1, -1) translate(480, -30)"));i&&r.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px")})),s.on("click",(function(t,e){var r=a("5698");r.selectAll(".open").selectAll("rect#expand").attr("opacity",0),r.selectAll(".open").selectAll("rect#expand").attr("display","block"),r.selectAll(".open").selectAll("rect#expand").transition().duration(1e3).attr("opacity",.8),r.selectAll(".open").selectAll("path#expand").attr("opacity",0),r.selectAll(".open").selectAll("path#expand").attr("display","block"),r.selectAll(".open").selectAll("path#expand").transition().duration(1e3).attr("opacity",1),r.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=r.transform(r.select(this).attr("transform"));return"translate("+t.translate[0]+", -10)"})),r.selectAll(".row").classed("open",!1),r.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),r.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0),r.select(this.parentNode).classed("open",!0),r.select(this.parentNode).selectAll("rect#expand").attr("display","none"),r.select(this.parentNode).selectAll("path#expand").attr("display","none"),r.selectAll(".open").transition().duration(1e3).attr("viewBox","0 0 960 360"),r.selectAll(".open .rowContent").transition().duration(1e3).attr("opacity",1),r.select(this.parentNode).selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=r.transform(r.select(this).attr("transform"));return"translate("+t.translate[0]+", 0)"}));for(var n=r.selectAll(".row"),s=!1,i=!0,o=0;o<n[0].length;o++)r.select(n[0][o]).classed("open")&&(s=!0),s?(r.select(n[0][o]).select("path#expand").attr("transform","scale(1, -1) translate(480, -0)"),r.select(n[0][o]).select("path#expand:last-child").attr("transform","translate(480,0)")):(i=!1,r.select("#container").transition().duration(1e3).style("padding","8px 0px 0px 0px"),r.select(n[0][o]).select("path#expand").attr("transform","translate(480,30)"),r.select(n[0][o]).select("path#expand:last-child").attr("transform","scale(1, -1) translate(480, -30)"));i&&r.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px")}))},initialDisplay:function(t){if(window.innerHeight>window.innerWidth)this.d3.selectAll("rect#expand").attr("display","none"),this.d3.selectAll("path#expand").attr("display","none"),this.d3.selectAll(".row").classed("open",!0),this.d3.selectAll(".open").transition().duration(1e3).attr("viewBox","0 0 960 360"),this.d3.selectAll(".open .rowContent").transition().duration(1e3).attr("opacity",1),this.d3.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=a("5698"),e=t.transform(t.select(this).attr("transform"));return"translate("+e.translate[0]+", 0)"}));else if(window.innerHeight<.25*window.innerWidth)this.d3.selectAll("rect#expand").attr("display","block"),this.d3.selectAll("path#expand").attr("display","block"),this.d3.selectAll(".row").classed("open",!1),this.d3.selectAll(".row").transition().duration(500).attr("viewBox","0 0 960 35"),this.d3.selectAll(".rowContent").transition().duration(500).attr("opacity",0),this.d3.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=a("5698"),e=t.transform(t.select(this).attr("transform"));return"translate("+e.translate[0]+", -10)"}));else{var e=this.d3.select(".open");if(this.d3.selectAll("rect#expand").attr("display","block"),this.d3.selectAll("path#expand").attr("display","block"),this.d3.selectAll(".row").classed("open",!1),this.d3.selectAll(".row").transition().duration(500).attr("viewBox","0 0 960 35"),this.d3.selectAll(".rowContent").transition().duration(500).attr("opacity",0),t){e.classed("open",!0),e.select("rect#expand").attr("display","none"),e.selectAll("path#expand").attr("display","none"),e.transition().duration(1e3).attr("viewBox","0 0 960 360"),this.d3.selectAll(".open .rowContent").transition().duration(500).attr("opacity",1),this.d3.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=a("5698"),e=t.transform(t.select(this).attr("transform"));return"translate("+e.translate[0]+", -10)"})),e.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=a("5698"),e=t.transform(t.select(this).attr("transform"));return"translate("+e.translate[0]+", 0)"}));for(var r=this.d3.selectAll(".row"),n=!1,s=!0,i=0;i<r[0].length;i++)this.d3.select(r[0][i]).classed("open")&&(n=!0),n?(this.d3.select(r[0][i]).select("path#expand").attr("transform","scale(1, -1) translate(480, -0)"),this.d3.select(r[0][i]).select("path#expand:last-child").attr("transform","translate(480,0)")):(s=!1,this.d3.select("#container").transition().duration(1e3).style("padding","8px 0px 0px 0px"),this.d3.select(r[0][i]).select("path#expand").attr("transform","translate(480,30)"),this.d3.select(r[0][i]).select("path#expand:last-child").attr("transform","scale(1, -1) translate(480, -30)"));s&&this.d3.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px")}else e=this.d3.select(".row").classed("open",!0),this.d3.select("rect#expand").attr("display","none"),e.selectAll("path#expand").attr("display","none"),this.d3.selectAll(".open").transition().duration(500).attr("viewBox","0 0 960 360"),this.d3.selectAll(".open .rowContent").transition().duration(500).attr("opacity",1),this.d3.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=a("5698"),e=t.transform(t.select(this).attr("transform"));return"translate("+e.translate[0]+", -10)"})),e.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var t=a("5698"),e=t.transform(t.select(this).attr("transform"));return"translate("+e.translate[0]+", 0)"}))}},partitionToThree:function(t){var e=this.getListSum(t),a=e/3;t.push({name:"newPlaceholderNum",length:a});var r=this.partitionToTwo(t);r[1].pop();var n=this.partitionToTwo(r[0]);return[n[0],n[1],r[1]]},partitionToTwo:function(t){var e=this.getListSum(t),a=t.length-1;while(this.getListSum(t.slice(a))<e/2){if(this.getListSum(t.slice(a-1))>=e/2)break;a--}return[t.slice(0,a),t.slice(a)]},getListSum:function(t){return t.reduce((function(t,e){return t+e.length}),0)},sortStructures:function(t,e){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,a.getPositions(t);case 2:for(n=r.sent,s=0;s<e.length;s++)e[s].position=n[e[s].primary_accession];return e.sort((function(t,e){return t.position-e.position})),r.abrupt("return",e);case 6:case"end":return r.stop()}}),r)})))()},cleanProteins:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n,s,i,o,c,l,u,d,h,p,g,m;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(r={},t.forEach((function(t){var e=r[t.position];e||(e=r[t.position]=[]),e.push(t)})),n=[],s=1;s<=Object.keys(r).length;s++)1!==r[s].length?function(){var t=void 0;r[s].forEach((function(e){t?e.length>t.length&&(t=e):t=e})),i=t;for(var a=0;a<r[s].length;a++)if(r[s][a].sequence!==t.sequence){for(o=e.findSubstring(r[s][a].sequence,t.sequence),i.sequence=i.sequence.replace(o,""),i.length=i.sequence.length,i.name=i.name+" (split)",r[s][a].continuous=!0,n.push(r[s][a]),i.fragments.length>0&&r[s][a].fragments.forEach((function(t){i.fragments=i.fragments.filter((function(e){return e.Name!==t.Name}))})),c=0;c<i.fragments.length;c++)i.fragments[c].Start=i.fragments[c].Start-r[s][a].length,i.fragments[c].Stop=i.fragments[c].Stop-r[s][a].length,i.fragments[c].Start<0&&(i.fragments[c].Start=0);for(i.fragments=i.fragments.filter((function(t){return t.Start>=0})),l=[],u=0;u<i.nonDark.length;u++)i.nonDark[u].Stop>r[s][a].length&&(d=i.nonDark[u].Start-r[s][a].length,d<0&&(d=0),h=i.nonDark[u].Stop-r[s][a].length,l.push({Primary_Accession:i.primary_accession,Start:d,Stop:h}));if(i.clusters)for(p=0;p<i.clusters.length;p++){for(g=0;g<i.clusters[p].seq_start.length;g++)i.clusters[p].seq_start[g]=i.clusters[p].seq_start[g]-r[s][a].length;for(m=0;m<i.clusters[p].seq_end.length;m++)i.clusters[p].seq_end[m]=i.clusters[p].seq_end[m]-r[s][a].length}i.nonDark=l}i.continuous=!1,n.push(i)}():(r[s][0].continuous=!1,n.push(r[s][0]));return a.abrupt("return",n);case 5:case"end":return a.stop()}}),a)})))()},findSubstring:function(t,e){var a=t.length,r=0;while(r<a&&t.charAt(r)===e.charAt(r))r++;return t.substring(0,r)},getPositions:function(t){return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="".concat(window.BACKEND,"/getGenomicPosition/").concat(t),r={},e.next=4,c()({method:"get",url:a}).then((function(t){for(var e=0;e<t.data.length;e++)r[t.data[e].primary_accession]=t.data[e].position_index}));case 4:return 0===Object.keys(r).length&&console.log("cannot get genomic positions of "+t+" in getPositions() Coverage.vue"),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))()},getProteinSynonyms:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=0;case 1:if(!(r<t.length)){a.next=9;break}return a.next=4,e.getSynonym(t[r].primary_accession);case 4:n=a.sent,t[r].synonym=n;case 6:r++,a.next=1;break;case 9:return a.abrupt("return",t);case 10:case"end":return a.stop()}}),a)})))()},getSynonym:function(t){return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="".concat(window.BACKEND,"/getProteinSynonyms/").concat(t),r=[],e.next=4,c()({method:"get",url:a}).then((function(t){t.data.Synonym&&r.push(t.data.Synonym),r=r.concat(t.data.synonyms)}));case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))()},getMatchingStructures:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=0;case 1:if(!(r<t.length)){a.next=10;break}return n={selector:[t[r].primary_accession]},console.log(n),s="".concat(window.BACKEND,"/get_matching_structures"),a.next=7,c()({method:"get",url:s,params:n}).then((function(e){console.log(e),"'Dark' protein"===e.data?(t[r].clusters=0,t[r].pdb=null):(t[r].clusters=e.data.clusters,t[r].pdb=e.data.Best_PDB.pdb_id)}));case 7:r++,a.next=1;break;case 10:return a.abrupt("return",e.cleanProteins(t));case 11:case"end":return a.stop()}}),a)})))()},countMatchingStructures:function(t){return 0===t?0:t.reduce((function(t,e){return t+e.members.length}),0)},getNonDarkRegions:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=0;case 1:if(!(r<t.length)){a.next=10;break}return console.log(t[r].primary_accession),a.next=5,e.getNonDarkCoverage(t[r].primary_accession);case 5:n=a.sent,t[r].nonDark=n;case 7:r++,a.next=1;break;case 10:return a.abrupt("return",t);case 11:case"end":return a.stop()}}),a)})))()},getNonDark:function(t){return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="".concat(window.BACKEND,"/getNonDarkRegions/").concat(t),r=[],e.next=4,c()({method:"get",url:a}).then((function(t){t.data&&(r=t.data)}));case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))()},getNonDarkCoverage:function(t){return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={selector:[t]},r="".concat(window.BACKEND,"/getCoverageMap"),n={},s=[],e.next=6,c()({method:"get",url:r,params:a}).then((function(t){if("'Dark' protein"!==t.data){n=t.data,console.log("nondarK: ",n);for(var e=0;e<n.seq_start.length;e++)s.push({Start:n.seq_start[e],Stop:n.seq_end[e]})}}));case 6:return e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})))()},getStructures:function(t,e){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,s,i,o,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=[],r.next=3,a.sortStructures(t,e);case 3:e=r.sent,i=regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e[r].count=0,l={selector:[e[r].primary_accession]},s="".concat(window.BACKEND,"/get_3D_alignment"),t.next=5,c()({method:"get",url:s,params:l}).then((function(t){var s="";if(t.data.sequences){s=t.data.sequences[0];var i=s.length;console.log("Loaded ",e[r].synonym,i),n.push({name:e[r].synonym,primary_accession:e[r].primary_accession,sequence:s.sequence,position:e[r].position,length:i})}else s=t.data[e[r].primary_accession],n.push({name:e[r].synonym,primary_accession:e[r].primary_accession,sequence:s.sequence,position:e[r].position,length:s.length});return a.getFragments(e[r].primary_accession)})).then((function(t){n[r].fragments=t}));case 5:case"end":return t.stop()}}),t)})),o=0;case 6:if(!(o<e.length)){r.next=11;break}return r.delegateYield(i(o),"t0",8);case 8:o++,r.next=6;break;case 11:return r.next=13,a.getNonDarkRegions(n);case 13:return n=r.sent,r.abrupt("return",n);case 15:case"end":return r.stop()}}),r)})))()},getFragments:function(t){return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="".concat(window.BACKEND,"/getProteinFragments/").concat(t),r=[],e.next=4,c()({method:"get",url:a}).then((function(t){t.data.length>0&&(r=t.data)}));case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))()}}},p=h,g=(a("0d58"),a("2877")),m=Object(g["a"])(p,r,n,!1,null,"69cdfee8",null);e["default"]=m.exports},"1be6":function(t,e,a){},"20d9":function(t,e,a){t.exports=a.p+"img/search_dark.012aee91.png"},"21d9":function(t,e,a){"use strict";a("0319")},"23c5":function(t,e,a){},"2b1d":function(t,e,a){},"2c07":function(t,e,a){t.exports=a.p+"img/aquaria-symbol-01.057e39d9.svg"},"31c8":function(t,e,a){t.exports=a.p+"img/up.64c3e14c.png"},"39b5":function(t,e,a){t.exports=a.p+"img/MS-01.f169151b.svg"},"3b50":function(t,e,a){},"3c16":function(t,e,a){"use strict";a("3b50")},"3cb4":function(t,e,a){"use strict";a("23c5")},"41b6":function(t,e,a){"use strict";a("4f7f")},4481:function(t,e,a){},"4ace":function(t,e,a){},"4c7a":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAQCAYAAADqDXTRAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNq8020KgCAMBmAb0TGDQLyY0Ek6SbcoEHKg0YfWttLBK+iczy8bY8yilOpUvVrBL9rHVQLR0Yhan6EC7IJjIRyUhncQN3BolIJP4BUtAd/AFPonnARzaIT7D7AL8zbVhIfBUQhHcMxdgJcHuPArSEE5MAmkohSYDHLQJ5gFctEUzAYl6BFeJSBWK/yHCE0+s2R4E2AAhOs7b2YKWEMAAAAASUVORK5CYII="},"4d26":function(t,e,a){"use strict";a("9363")},"4d40":function(t,e,a){},"4f7f":function(t,e,a){},"4f95":function(t,e,a){},"5f75":function(t,e,a){},"62a6":function(t,e,a){"use strict";a("1be6")},"62bc":function(t,e,a){t.exports=a.p+"img/down.7ae68b7a.png"},6813:function(t,e,a){"use strict";a("b1e2")},"6eaa":function(t,e,a){},"715b":function(t,e,a){"use strict";a("ea62")},"734d":function(t,e,a){},7829:function(t,e,a){},"7bd5":function(t,e,a){"use strict";a("e26a")},"7f5f":function(t,e,a){"use strict";a("2b1d")},"80d8":function(t,e,a){"use strict";a("4f95")},8673:function(t,e,a){t.exports=a.p+"img/aquaria-loader3.223aec7b.svg"},"88de":function(t,e,a){"use strict";a("a309")},"8c53":function(t,e,a){},"8c8c":function(t,e,a){"use strict";a("6eaa")},"8f69":function(t,e,a){},"8f89":function(t,e,a){"use strict";a("7829")},9363:function(t,e,a){},"9b02":function(t,e,a){"use strict";a("8c53")},"9b83":function(t,e,a){"use strict";a("c48f")},"9db5":function(t,e,a){t.exports=a.p+"img/FT-01.e4a6c439.svg"},a01c:function(t,e,a){"use strict";a("734d")},a309:function(t,e,a){},a6f5:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGoWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0NDYwLCAyMDIwLzA1LzEyLTE2OjA0OjE3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMC0xMS0wN1QxODo0Njo0OC0wNTowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjAtMTItMDlUMDg6NDk6MTYtMDU6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjAtMTItMDlUMDg6NDk6MTYtMDU6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjEzNGEyNTEtODFjYy00ZDNjLWJhMmQtY2VhMmM1MGY2YmQxIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ZTFkNTMwYWUtYzY2MS0wMjRlLTk1ZTItNTU4ODI4OWU1NTkxIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YjhlNjQyOWMtMjlkZS00NTc2LWEzN2MtMjM4NDJiNGUyZjA5IiB0aWZmOk9yaWVudGF0aW9uPSIxIiB0aWZmOlJlc29sdXRpb25Vbml0PSIyIiBleGlmOkNvbG9yU3BhY2U9IjEiIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSI3MDAiIGV4aWY6UGl4ZWxZRGltZW5zaW9uPSI3MDAiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiOGU2NDI5Yy0yOWRlLTQ1NzYtYTM3Yy0yMzg0MmI0ZTJmMDkiIHN0RXZ0OndoZW49IjIwMjAtMTItMDlUMDg6NDI6NTQtMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4yIChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoyMTM0YTI1MS04MWNjLTRkM2MtYmEyZC1jZWEyYzUwZjZiZDEiIHN0RXZ0OndoZW49IjIwMjAtMTItMDlUMDg6NDk6MTYtMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4yIChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtMh4BEAAAZoSURBVHja7Z17TNVlGMdPK4FlV3FqIDSJbF0sMqrF2rqRf5i1yrTsvsx1W6Os7LbZ1cxpq2hWFq78x8op5FKbRZOwaFZqm80tS6g0BwYiyOXAOfD2fT0v2xlwgvO87znv8x7eZ/uMjXH5Pb/P77383tsJCCECHj5wuIhjwDgwBRSD2eA+MBfMAdNAATgNHOeFJIYMUAjuB6VgHagBf4B/QRtoB02gFmwD68F74GFwGTjZC9FjEngElIMGoR8tYAN4RpUuL2SY3AI2icRHlSpxXkgM7gXbRfLjd1AC0ryQCLPAbmE/9qv2ZsQKOVPV6dxCdhYuGmlC7gJB3TvX29t79Gs4HBahUOgo8nvRaMSCkSJkeSIe62gBhoTI+Bykp6oQ+R7wk3AvZKN/dqoJOQXsEe7GEa5SKL+UqZ4y10OOBpzlupATwZ8idaIZ5LkspCbBN+gv8D34CmxEI14px7Hwtd5Qoz5YHHBVyLIE3IxfwTtgBshXI78D/jdEpIPzwG09PT2rwD7Dcja6JmSGYRFrwTXUi4aMUZAyG1QbFPOYK0JGGxRRDS40dfGQEYCU6aDOkJiJLgj5zJCMpxOVBGSkQcr7BqTs4C6k0ICIfeDiZCQDKTMNSLmTs5CfNZOTXeQxyUwIQqZqSmniKqTAwIxelo2kUFKu1JRyN0chWzQS6gGTbT5pEHKDhpS93IScq1k6buTQhURJeU0jhyJOQpZqJPI1pzdflJJ/iHms4yTkbw0hE5gJKdaouk7iIESnMS/jOKQNITuJ+dzBQcgCDSHZTIVMI+azgoOQco3pUbZTo5BSS8hpNwchtUQhszgLAYuI3fdTbQrJIsqQreY45iWkmJjb5TaFXEq86F+Ylw7J8aCDkNtcm0JuIgpZ7YAQyS5Cbs/ZFPIQUchiR4RQVla+blPI80QhJS4IQTtSRsjtXZtCFhGFuLIN4C1CbittCnmFKGSeI0JKuY8+9P/GU0Qh8x0R8hEht1KbQu4hCnnTESGVhNxetinkWqKQCkeE7CXk9oRNIecThexxQMZY0E3I7VabQuTa3U6ilDzBu8t7MzGvc2wPLm4jXjj3/XwfEhdqHGtbSBlRSA3zEnKIkFMVh+H32zUmqAqZyniAmM9LHISM0RBSzVRIIzGfS7gscvhOQ8pUZjIeJC5yaOS06mTegBmo4Sf1GyMZJ4Au4oP1AichGf0nc+J8ypYwEVKpUdIzOQmRvKpRSoSa7LK5avFFjfVY1hZsDLX1WWhKudqSjEc1F1tfwFFIQFU9A4TEmez0JMt4XFPGJpsle6gfGAVCmqUkaW/xkPGGgQ07kzgLidnjIiT+iUjQ5h1cyxTI+EHoh/XOCHkegSilWQ1njzYkIhcsNbThczOHnuFwf1CeBnrEkBQZB9XTmEMUUQBWgrAwF1UuCZFcZaDX1T/kUs2tYCGYqYa65RaANPUQpKtqrlDNZi7D/9uVoBMdZOwQlo8GjPcXSmJJMXiT5JB3vYgceXFQ0FYb6sT2ZA+56wgJqPnzREuxHd+6JGSkSNnskpBBh1ZSML5xSUhAvfClenzpkpCAGq86kOJSPnVJSN9A5Bqud7O7u7vLwJ/Z4JKQPq4TkU844BKHwfXBYDC7vb29TvePocOy3jUhAfViJZdfHrIoQpaIt0XUnvmurq4JENNgQMrHrgnpQ26WlGdkJfMEU9mWLY41JIOqKwdiGg1IKXdRSDRyTmSVevM2HfKDXypEZBdwxlDXEgqFpJT9BqRUuCwk+rhAeTqC3DizE7QSBcj94x+IyEcjjY/3OiBlImjWlSIP5JTHDLosZLDjyguVpPmq7ZGjACsUsh2Qm4ieFJHPIykyNacSDofPgJTDBqSsTSUhVoGUfEip59T7GtFClJQc0GpAyhovxNxc/GTQaqCD8YWIcRi0F0KQgpLSZEDKj16IOSnZJqovxLNeiDkp+ZDSQmhD5JhZ9KxnrhdirqHPQ++rKV4heOGM/laJF2JWShak6Ix9LfFCzEs5HdUQdexroReSAFBKclEVNfxfVRUjiryQBIFSMr6jo6MujoUdq30vK8EEg8HMzs7O4YwSyw8by/RCklN9jW1ra9sCYlVVcgRb68x7f6PjLymBlpaWK9CuLIeUrerNXI5jzfFjWSmIvwleiMcL8UI8XogX4vFCvBCPF+KF+JvghXi8EC/E44V4IR7j/Ac9YhOzv9yXfwAAAABJRU5ErkJggg=="},ae0b:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("GdprConsentModal"),a("Header"),a("Sequence"),a("div",[a("AboutAlignment")],1),a("div",[a("AboutPdb")],1),a("div",[a("AboutAquaria"),a("UserHelp"),a("Errors")],1),a("div",{attrs:{id:"heightinspector"}}),a("StructureViewer"),a("Tabs"),a("CoverageMap"),a("Loader"),a("PopUp"),a("a",{attrs:{href:t.data.hash}},[a("div",{staticClass:"hide",attrs:{id:"scrim"},on:{click:t.dismissPanel}})])],1)},n=[],s=(a("d3b7"),a("159b"),a("4360")),i=a("87a7");a("b3c8");var o=10,c=[],l=function(t){c.push(t)},u=i["a"]("protein_top_ten",o);l(u);var d,h,p,g,m,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"header"}},[a("div",{staticClass:"item fix level3",attrs:{id:"logo"}},[a("a",{attrs:{href:"#About"},on:{click:t.showScrim}},[a("img",{attrs:{src:t.aquariasymbol}})])]),a("Title"),a("div",{staticClass:"item fix level3",attrs:{id:"menu-btn"}},[a("a",{attrs:{href:"#Menu"}},[a("img",{attrs:{src:t.hamburger}})])]),a("Menu")],1)},v=[],y=(a("caad"),a("2532"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item title fix level5",attrs:{id:"title"}},[a("span",{attrs:{id:"org_prot"}},[t.getOrganism&&!t.seqRes?a("a",{staticClass:"seqPanel",attrs:{href:"#Sequence"},on:{click:function(e){return t.makeActive("seqPanel")}}},[a("img",{attrs:{src:t.search}}),t._v(" "+t._s(t.getOrganism.replaceAll("_"," "))+" "),a("strong",[t._v(t._s(t.getGene))])]):t._e(),t.getOrganism||t.seqRes?t._e():a("a",{staticClass:"seqPanel",attrs:{href:""},on:{click:function(e){return t.makeActive("seqPanel")}}},[a("img",{attrs:{src:t.search}}),t._v(" Protein Sequence ")])]),t.seqRes?t._e():a("span",{attrs:{id:"alignment"}},[a("a",{staticClass:"alignPanel",attrs:{href:"#Alignment"},on:{click:function(e){return t.makeActive("alignPanel")}}},[t._v("aligned onto")])]),t.seqRes?t._e():a("span",{attrs:{id:"struct"}},[t.getStructure.pdb?t._e():a("a",{staticClass:"structPanel",attrs:{href:"#Structure"},on:{click:function(e){return t.makeActive("structPanel")}}},[t._v("PDB ID")]),t.getStructure.pdb&&!t.seqRes?a("a",{staticClass:"structPanel",attrs:{href:"#Structure"},on:{click:function(e){return t.makeActive("structPanel")}}},[t._v(t._s(t.getStructure.pdb+"-"+t.getStructure.chain))]):t._e(),a("span",{style:{visibility:t.helpOption?"visible":"hidden"},attrs:{id:"help"},on:{click:t.showHelp}},[t._v("?")])]),t.seqRes?a("div",{attrs:{id:"titleAlign"}},[a("span",{staticClass:"titlepanel"},[a("a",{staticClass:"selectionPanel",attrs:{href:"#Alignment"},on:{click:function(e){return t.makeActive("selectionPanel")}}},[a("strong",[t._v(t._s(t.getGene))]),t._v(" sequence: "+t._s(t.seqRes)+" "),a("br"),a("strong",[t._v(t._s(t.pdb))]),t._v(" structure: "+t._s(t.structRes)+" ")])])]):t._e(),a("a",{staticClass:"close",attrs:{href:t.data.hash},on:{click:t.dismissPanel}})])}),b=[],w=a("5530"),_=(a("ac1f"),a("1276"),a("1b1f")),S=a("2f4a"),x=a("2f62"),A=a("2b3b"),C={name:"Title",data:function(){return{pdb:null,search:a("a6f5"),seqRes:null,structRes:null,helpOption:!0}},computed:Object(w["a"])({data:function(){return{hash:s["a"].state.hash}},scrim:function(){return s["a"].state.showScrim}},Object(x["b"])(["getHash","getOrganism","getGene","getStructure"])),watch:{scrim:function(t){var e=this;t||e.dismissPanel()}},methods:{showHelp:function(){s["a"].commit("setHelpTitle","Aquaria Help"),s["a"].commit("setUserStatus",!1),document.getElementById("UserHelp").classList.remove("hide"),document.getElementById("UserHelp").className+=" show",document.querySelector("div.dimmer")||(_["overlay"](),document.querySelector("div.dimmer").className+=" level7"),document.querySelector("div.dimmer").addEventListener("click",(function(){_["RemoveOverlay"](),document.getElementById("UserHelp").classList.remove("show"),document.getElementById("UserHelp").className+=" hide"}))},storeHash:function(){""===window.location.hash?s["a"].commit("setHash","#(0,0,0)"):(window.location.hash.includes("-")||window.location.hash.includes("("))&&s["a"].commit("setHash",window.location.hash)},makeActive:function(t){this.helpOption=!1,this.storeHash(),document.querySelectorAll("#title span a").forEach((function(t){t.classList.remove("active")})),document.querySelector("."+t).classList+=" active",-1===document.querySelector("#title").className.indexOf("active")&&(document.querySelector("#title").className+=" active"),document.querySelector("#scrim").className="show level2",s["a"].commit("setScrim",!0),null!==document.querySelector("#titleAlign")&&(document.querySelector("#titleAlign").className="active",s["a"].commit("setAlignment",S["joleculeAlignment"].copyToClipboard()),s["a"].commit("setHash",window.location.hash))},dismissPanel:function(){this.helpOption=!0;var t=document.getElementById("scrim");t.classList.contains("show")&&(t.classList.remove("show"),t.classList.add("hide")),s["a"].commit("setHash",this.getHash),document.querySelector("#title").className="item title fix level6",null!==document.querySelector("#titleAlign")&&(document.querySelector("#titleAlign").className=""),document.querySelectorAll("#title span a").forEach((function(t){t.classList.remove("active")}))},resetSelection:function(){document.querySelectorAll("#titlebar span").forEach((function(t){t.className="titlepanel"})),document.querySelectorAll(".contents").forEach((function(t){t.style.display="none"}))},release:function(){document.querySelector("#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection").style.display="none",this.resetSelection()}},mounted:function(){this.resetSelection()},updated:function(){var t=this;t.primary_accession=t.getGene;var e=new MutationObserver((function(){if("none"===document.querySelector("#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection").style.display)t.seqRes=null,t.structRes=null,s["a"].commit("setAlignment","");else{var e=Object(A["c"])(t.getStructure.pdb,t.getStructure.chain),a=s["a"].state.Matches.clusters[e.cluster].members[e.member],r=document.querySelector("#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection").innerText.split("\n"),n=a.pdb_id+"["+a.model+"]-"+a.pdb_chain+":",i=t.getGene+":";t.seqRes=r[1].split(i)[1],t.structRes=r[0].split(n)[1]}}));e.observe(document.querySelector("#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection"),{attributes:!0,childList:!0,characterData:!0})}},k=C,I=(a("9b02"),a("2877")),P=Object(I["a"])(k,y,b,!1,null,"0608e828",null),O=P.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel abs floating level7",attrs:{id:"Menu"}},[a("a",{staticClass:"close",attrs:{href:"#"}}),t._m(0),t._m(1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selected=e.target.multiple?a:a[0]},function(e){return t.onChange(e)}]}},[a("option",{attrs:{id:"ribbon",selected:""}},[t._v("Ribbon")]),a("option",{attrs:{id:"sphere"}},[t._v("Sphere")]),a("option",{attrs:{id:"backbone"}},[t._v("Backbone")])])])},q=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a",{staticClass:"lnk",attrs:{id:"print",href:"#"}},[t._v("Print")]),a("a",{staticClass:"lnk",attrs:{id:"helpbtn",href:"#"}},[t._v("Help")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a",{staticClass:"lnk",attrs:{id:"Sidechains",href:"#Menu"}},[t._v("Sidechains")]),a("a",{staticClass:"lnk",attrs:{id:"Neighbors",href:"#Menu"}},[t._v("Neighbors")]),a("a",{staticClass:"lnk active",attrs:{id:"Ligands",href:"#Menu"}},[t._v("Ligands")]),a("a",{staticClass:"lnk",attrs:{id:"Water",href:"#Menu"}},[t._v("Water")])])}],D=a("1da1"),R=(a("96cf"),a("aaec")),M=a("2fac"),V={name:"Menu",data:function(){return{selected:"Ribbon"}},methods:{onChange:function(t){var e=t.target.value.toLowerCase();document.querySelector("#threeDSpan-inner-menu-"+e).click()},showHelp:function(){var t=this;s["a"].commit("setHelpTitle","Aquaria Help"),s["a"].commit("setUserStatus",!1),document.getElementById("UserHelp").classList.remove("hide"),document.getElementById("UserHelp").className+=" show",document.querySelector("div.dimmer")||(_["overlay"](),document.querySelector("div.dimmer").className+=" level7"),document.querySelector("div.dimmer").addEventListener("click",(function(){_["RemoveOverlay"](),document.getElementById("UserHelp").classList.remove("show"),document.getElementById("UserHelp").className+=" hide";var e={};e.target=document.querySelector("#helpbtn"),t.toggleActive(e)}))},toggleActive:function(t){"lnk active"===t.target.className?t.target.className="lnk":t.target.className="lnk active"}},mounted:function(){var t=this;document.querySelector("#print").addEventListener("click",function(){var t=Object(D["a"])(regeneratorRuntime.mark((function t(e){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,Object(R["a"])(7680,4320,0,0);case 3:a=t.sent,r=document.createElement("a"),r.href=a,r.download="aquaria-screenshot.png",r.click();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),document.querySelector("#helpbtn").addEventListener("click",(function(e){e.preventDefault(),t.toggleActive(e),t.showHelp()})),document.querySelector("#Sidechains").addEventListener("click",(function(e){e.preventDefault(),t.toggleActive(e),e.currentTarget.classList.contains("active")&&M["b"](),document.querySelector("#threeDSpan-inner > div.jolecule-embed-header.jolecule-embed-toolbar > span:nth-child(5)").click()})),document.querySelector("#Neighbors").addEventListener("click",(function(e){e.preventDefault(),t.toggleActive(e),document.querySelector("#threeDSpan-inner > div.jolecule-embed-header.jolecule-embed-toolbar > span:nth-child(6)").click()})),document.querySelector("#Ligands").addEventListener("click",(function(e){e.preventDefault(),t.toggleActive(e),document.querySelector("#threeDSpan-inner-menu-ligand").click()})),document.querySelector("#Water").addEventListener("click",(function(e){e.preventDefault(),t.toggleActive(e),document.querySelector("#threeDSpan-inner-menu-water").click()}))}},L=V,T=(a("8c8c"),Object(I["a"])(L,E,q,!1,null,"3cbdef84",null)),B=T.exports,N={name:"Header",components:{Title:O,Menu:B},data:function(){return{aquariasymbol:a("2c07"),hamburger:a("b335")}},methods:{showScrim:function(){""===window.location.hash&&s["a"].commit("setHash","#(0,0,0)"),window.location.hash.includes("(")&&s["a"].commit("setHash",window.location.hash),document.querySelector("#scrim").className="show level3",document.querySelector("#xr-button").click()}}},j=N,H=(a("3c16"),Object(I["a"])(j,f,v,!1,null,"1e15f6b6",null)),F=H.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel overlay about level3",attrs:{id:"Sequence"}},[a("SearchPanel"),a("AboutUniprot")],1)},G=[],z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"searchByName"}},[a("p",[t._v("Organism")]),a("SearchOrganism"),t._m(0),a("p",[t._v("Protein")]),a("SearchProtein"),a("div",{attrs:{id:"psyns"}},[a("p",[t._v("(example: "),a("a",{attrs:{href:"#"},on:{click:function(e){return t.fillin("p53")}}},[t._v("p53")]),t._v(" or "),a("a",{attrs:{href:"#"},on:{click:function(e){return t.fillin("P04637")}}},[t._v("P04637")]),t._v(")")])])],1)},Z=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"osyns"}},[a("p",[t._v(" ")])])}],Y=a("1157"),W=a.n(Y),J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("autocomplete",{ref:"autocomplete",attrs:{id:"organism_syn_input",search:t.search,"get-result-value":t.getResultValue},on:{submit:t.handleSubmit}})],1)},Q=[],$=(a("99af"),a("d81d"),a("bc3a")),X=a.n($),K=a("356e"),tt=a("95bf"),et=(a("8b78"),{name:"SearchOrganism",components:{Autocomplete:tt["a"]},data:function(){return{OrganismSynonyms:{}}},computed:{data:function(){return{OrgID:s["a"].state.OrgID,Organism:s["a"].state.Organism}}},methods:{getResultValue:function(t){return t.value},handleSubmit:function(t){var e=this;if(t.value&&0!==t.value.indexOf("No organisms for: ")&&t.id!==e.data.OrgID){var a="".concat(window.BACKEND,"/getOrganismSynonyms");X()({method:"get",url:a,params:{organism_id:t.id}}).then((function(e){var a=e.data;s["a"].commit("setOrgID",t.id),localStorage.preferred_organism_name=t.value,K["a"](a),document.querySelector("#organism_syn_input").setAttribute("size",t.value.length)}))}},clear:function(){this.value="",this.$refs.autocomplete.value=""},search:function(t){var e,a=this,r=this.OrganismSynonyms,n=t;return this.value=t,new Promise((function(t){if(n in r)t(r[n]);else if(""!==n){var s="".concat(window.BACKEND,"/getQueryOrganism/").concat(n);X()({method:"get",url:s}).then((function(a){var s=a.data;s.length>0?(e=s.map((function(t){return{label:t.Synonym,value:t.Synonym,id:t.Organism_ID}})),r[n]=e):e={label:"No organisms for: "+n,value:0},document.querySelector("#autocomplete-result-list-1").style.zIndex=99,document.querySelector(".autocomplete-result-list").style.maxHeight="390px",t(e)}))}else e={label:a.data.Organism,value:a.data.OrgID},t(e)}))}}}),at=et,rt=Object(I["a"])(at,J,Q,!1,null,null,null),nt=rt.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("autocomplete",{ref:"autocomplete",attrs:{id:"protein_syn_input",search:t.search,"get-result-value":t.getResultValue},on:{submit:t.handleSubmit}})},it=[],ot=(a("b0c0"),a("4de4"),a("2ca0"),a("4e82"),{name:"SearchProtein",components:{Autocomplete:tt["a"]},data:function(){return{callbackData:{names:[],ids:[],pdbIDs:[]},cacheProteinSynonyms:{},term:null,proteinSynonymOrgId:null,pdbId:null,collectResponsevalues:null}},methods:{getResultValue:function(t){return t.value+" ("+t.id+")"},clear:function(){this.value="",this.$refs.autocomplete.value=""},handleSubmit:function(t){var e=this;if(t.value&&0!==t.value.indexOf("No structures for: ")){var a=t.id;if(a.indexOf("/")>-1){var r=a.split("/");a=r[0],e.pdbId=r[1]}if("PDB"===t.type){console.log("AQUARIA.proteinAutocomplete.select pdb",t.value),s["a"].commit("showLoader",!0),s["a"].commit("setLoaderMsg","Waiting for data...");var n="".concat(window.BACKEND,"/getAccessionForPDB/").concat(t.value);X()({method:"get",url:n}).then((function(e){var a=e.data;A["f"]([a.Accession],t.value,null)}))}else t.id===s["a"].getters.getStructure.accession?t.value===s["a"].getters.getGene?s["a"].commit("showLoader",!1):(console.log("AQUARIA.proteinAutocomplete.select same protein, different name",t.value),s["a"].commit("setGene",t.value),n="".concat(window.BACKEND,"/getProteinSynonyms/").concat(s["a"].getters.getStructure.accession,";"),X()({method:"get",url:n}).then((function(t){K["b"](t.data)}))):(document.querySelector("#protein_syn_input").placeholder=t.value,document.querySelector("#protein_syn_input").value="",s["a"].commit("showLoader",!0),s["a"].commit("setLoaderMsg","Waiting for data..."),s["a"].commit("setGene",t.value),A["f"]([a],e.pdbId,null))}else event.preventDefault()},search:function(t){var e=this;return e.term=t,e.callbackData.LRU=e.getLRU(),new Promise((function(t){if(""===e.term)e.collectResponse(),e.collectResponsevalues&&t(e.collectResponsevalues);else{if(e.proteinSynonymOrgId=e.term+"%"+e.$store.state.OrgID,e.proteinSynonymOrgId in e.cacheProteinSynonyms)return void t(e.cacheProteinSynonyms[e.proteinSynonymOrgId]);document.querySelector(".autocomplete-result-list").style.maxHeight="390px";var a="".concat(window.BACKEND,"/queryProtein/").concat(e.term,"/").concat(e.$store.state.OrgID);X()({method:"get",url:a}).then((function(a){var r=a.data;isNaN(parseInt(e.term.charAt(0)))?r.length>0?0===r[0].isID?(e.nameCallback(r),e.collectResponsevalues&&t(e.collectResponsevalues)):e.idCallback(r):0===r.isID?(e.nameCallback(r),e.collectResponsevalues&&t(e.collectResponsevalues)):(e.idCallback(r),e.collectResponsevalues&&t(e.collectResponsevalues)):(e.pdbCallback(r),e.collectResponsevalues&&t(e.collectResponsevalues))}))}}))},getLRU:function(){return Object(i["b"])().map((function(t){return{label:t.name,suffix:t.primary_accession+", "+t.pdb_id,value:t.name,type:"LRU",category:"Recent",id:t.primary_accession+"/"+t.pdb_id}}))},collectResponse:function(){var t=this,e=t.callbackData.LRU;e.length>0&&t.term&&t.term.length>0&&(e=e.filter((function(e){if(e.label)return e.label.toLowerCase().startsWith(t.term.toLowerCase())})));var a=!0,r=e.concat(t.callbackData.names).concat(t.callbackData.ids).concat(t.callbackData.pdbIDs);0===r.length&&(t.term&&t.term.length>0?r=[{label:"No structures for: "+t.term,value:0}]:a=!1),t.cacheProteinSynonyms[t.proteinSynonymOrgId]=r,a&&(t.collectResponsevalues=r)},nameCallback:function(t){var e,a=this;e=t.map((function(t){return{label:t.Synonym,suffix:null,value:t.Synonym,type:"Synonym",category:"Names",id:t.Primary_Accession,organism:t.Organism_ID}})),e.sort((function(t,e){return t.label>e.label?1:-1})),e.reduce((function(t,e){var a=t,r=e;return a&&a.value===r.value&&(a.dup||(a.suffix=a.id,a.dup=!0),r.dup||(r.suffix=r.id,r.dup=!0)),e}),null),a.callbackData.names=e,a.collectResponse()},idCallback:function(t){var e,a=this;e=t.map((function(t){var e=t.Source_Field;return"AC"!==e&&"ID"!==e||(e="UniProt"),{label:t.Synonym,suffix:e,value:t.Synonym,type:e,category:"Identifiers",id:t.Primary_Accession}})),e.sort((function(t,e){return t.label>e.label?1:-1})),a.callbackData.ids=e,a.collectResponse()},pdbCallback:function(t){var e,a=this;e=t.map((function(t){return{label:t.Synonym,suffix:"PDB",type:"PDB",value:t.Synonym,category:t.Category,id:t.Synonym}})),a.callbackData.pdbIDs=e,a.collectResponse()}}}),ct=ot,lt=Object(I["a"])(ct,st,it,!1,null,null,null),ut=lt.exports,dt={components:{SearchOrganism:nt,SearchProtein:ut},name:"SearchPanel",data:function(){return{search:a("20d9")}},methods:{fillin:function(t){document.getElementById("protein_syn_input").value=t,setTimeout((function(){window.location.href="/P04637"}),300)},selectOrganism:function(t){},placeholderText:function(t,e){var a=document.querySelector("#organism_syn_input"),r=document.querySelector("#protein_syn_input");a.placeholder=t,a.setAttribute("size",a.getAttribute("placeholder").length),r.placeholder=e,r.setAttribute("size",r.getAttribute("placeholder").length),W()("#organism_syn_input").focus((function(){W()(this).attr("placeholder","Specify an organism"),a.setAttribute("size",a.getAttribute("placeholder").length)})).blur((function(){W()(this).attr("placeholder",t),a.setAttribute("size",a.getAttribute("placeholder").length)})),W()("#protein_syn_input").focus((function(){W()(this).attr("placeholder","Specify a protein"),r.setAttribute("size",r.getAttribute("placeholder").length)})).blur((function(){W()(this).attr("placeholder",e),r.setAttribute("size",r.getAttribute("placeholder").length)}))}}},ht=dt,pt=(a("a01c"),Object(I["a"])(ht,z,Z,!1,null,null,null)),gt=pt.exports,mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"scrollable",attrs:{"data-intro":"UniProt summary of the specified protein's function.","data-position":"right"}},[t._m(0),t.uniprotDesc?a("div",{attrs:{id:"uniProtDesc"}}):t._e(),t._l(t.descriptions,(function(e,r){return a("div",{key:r,staticClass:"expandable"},[a("expandable-text-line",{attrs:{"use-hover":""},domProps:{innerHTML:t._s("<strong>"+e[0]+"</strong>:"+e[1])}})],1)}))],2)},ft=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{display:"none"},attrs:{id:"gsyns"}},[a("p",[t._v("Genes:  ")])])}],vt=(a("a4d3"),a("e01a"),a("466d"),a("5319"),a("02a1")),yt={name:"AboutUniprot",components:{ExpandableTextLine:vt["a"]},data:function(){return{uniprotDesc:null,sections:[],descriptions:[],a:[1,2,3],tightSections:[],desc:null,list:[]}},computed:Object(w["a"])({},Object(x["b"])(["getSequences"])),watch:{getSequences:function(t){var e=this;t.length>0&&(e.uniprotDesc=e.getSequences[0].description,e.updateUniprotInfo(e.uniprotDesc))}},methods:{updateUniprotInfo:function(t){var e=this;e.list=[],e.tightSections=[];var a=/\n[A-Z ]+:.*?$/;function r(){if(t&&t.length>0){var n=t.match(a);null!==n?(e.sections.unshift(n[0].split(": ")),t=t.replace(n[0],""),r()):e.sections.unshift(t.split(": "))}}function n(t){for(var a=null,r=0;r<t.length;r++)if(r<t.length-2){var n=t[r][0],s=t[r+1][0];if(s===n)null===a&&(a="<ul>"),a+="<li>"+t[r][1]+"</li>";else if(null===a)e.tightSections.push(t[r]);else{a+="<li>"+t[r][1]+"</li></ul>";var i=[n,a];e.tightSections.push(i),a=null}}else null===a?e.tightSections.push(t[r]):(a+="<li>"+t[r][1]+"</li></ul>",i=[n,a],e.tightSections.push(i),a=null);return e.tightSections}r(),this.sections.forEach((function(t){if(-1!==t[1].indexOf("URL=")){var e="",a="",r="",n="",s=t[1].split(";");s.forEach((function(t){t=t.split("="),-1!==t[0].indexOf("URL")&&(a=t[1]),-1!==t[0].indexOf("Name")&&(r=t[1]),-1!==t[0].indexOf("Note")&&(n=t[1])})),e="<a href="+a+' title="'+n+'" target="_blank">'+r+"</a>",t[1]=e}}));var s=n(e.sections);s.forEach((function(t){var a="";if(t.length>2){for(var r=1;r<t.length;r++)a=a+" "+t[r];t[1]=a}e.list.push(t)})),e.descriptions=e.list}}},bt=yt,wt=(a("80d8"),Object(I["a"])(bt,mt,ft,!1,null,"739206f9",null)),_t=wt.exports,St={name:"Sequence",components:{SearchPanel:gt,AboutUniprot:_t}},xt=St,At=Object(I["a"])(xt,U,G,!1,null,null,null),Ct=At.exports,kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel overlay about level3",attrs:{id:"Alignment"}},[a("div",{staticClass:"scrollable"},[t.data.alignment?a("p",{staticClass:"spacer"},[t._v(" ")]):t._e(),a("p",[t._v("What you see in the 3D viewer is the experimentally-determined structure of "+t._s(t.pdbName)+" from "),a("a",{attrs:{href:"http://www.rcsb.org/pdb/explore.do?structureId={{}}",target:"_blank"}},[t._v(" PDB entry "+t._s(t.pdbId))]),t._v(" chain "+t._s(t.chainId)+". ")]),a("p",[t._v(" The full-length sequence of the protein you specified ("+t._s(t.uniprotName)+") has been aligned onto the sequence used to determine this PDB structure.")]),a("p",[t._v(" Overall, the two sequences align with "+t._s(t.score)+"% identity; any amino acid substitutions are indicated using dark coloring (see legend).")]),a("p",{staticClass:"quality"},[t._v(" This alignment has an HHblits E-value of "+t._s(t.evalueString)+" × "),a("nobr",[t._v("10"),a("sup",[t._v(t._s(t.power))])]),t._v(", which is considered to be "+t._s(t.quality)+". Based on cross-validation, the likelihood that your specified protein ("+t._s(t.uniprotName)+") adopts a structure similar to that shown is estimated to be "+t._s(t.precisiontxt)+"%.")],1),a("p",[t._v("Note that the structure shown is taken directly from the PDB; it has not been derived by ab-initio or comparative modeling.")]),t.data.alignment?a("div",[a("p",[a("b",[t._v("Alignment:")]),a("br"),a("pre",[t._v(t._s(t.data.alignment))])])]):t._e()])])},It=[],Pt=Object(w["a"])(Object(w["a"])({name:"AboutAlignment"},Object(x["b"])(["getPdbData"])),{},{computed:{data:function(){return{alignment:s["a"].state.alignment}},pdb:function(){return s["a"].state.pdbData}},data:function(){return{pdbName:null,pdbId:null,chainId:null,score:null,qualClass:null,evalueString:null,quality:null,uniprotName:null,precisiontxt:null,power:null}},watch:{pdb:function(t){var e=this;t.pdbName&&(e.pdbName=t.pdbName,e.pdbId=t.pdb_id,e.chainId=t.pdb_chain,e.score=t.score,e.qualClass=t.qualClass,e.evalueString=t.evalueString,e.quality=t.quality,e.uniprotName=t.uniprotName,e.precisiontxt=t.precisiontxt,e.power=t.power)}},methods:{resetSelection:function(){document.querySelectorAll("#titlebar span").forEach((function(t){t.className="titlepanel"})),document.querySelectorAll(".contents").forEach((function(t){t.style.display="none"}))}},mounted:function(){this.resetSelection()}}),Ot=Pt,Et=(a("6813"),Object(I["a"])(Ot,kt,It,!1,null,"181d1cba",null)),qt=Et.exports,Dt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Rt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel overlay about level3",attrs:{id:"Structure"}},[a("div",{staticClass:"scrollable",attrs:{id:"description","data-intro":"PDB summary for the shown structure.","data-position":"bottom"}},[a("span",{staticClass:"content",attrs:{id:"description","data-intro":"PDB summary for the shown structure.","data-position":"bottom"}},[a("span",{staticStyle:{display:"none"},attrs:{id:"biounitDisplay"}},[a("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitLeft",title:"Navigate to other assemblies"}},[t._v("<")]),t._v("  "),a("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitType"}},[t._v("biounit")]),t._v("  "),a("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitCount"}},[t._v("x/x")]),t._v("   "),a("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitRight",title:"Navigate to other assemblies"}},[t._v(">")]),a("a",{attrs:{id:"helpBiounit",href:"https://pdb101.rcsb.org/learn/guide-to-understanding-pdb-data/biological-assemblies#Anchor-BioUnit",target:"_blank",title:"Go to PDB to view explanation of assembly"}},[a("span",{staticClass:"help roundButton"})])]),a("span",{staticStyle:{display:"none"},attrs:{id:"aboutPDBHider","data-intro":"PubMed Information about PDB structure","data-position":"left"}},[a("p",{attrs:{id:"classification"}},[t._v("Classification unavailable")]),a("h4",{attrs:{id:"reference_title"}},[t._v("Title unavailable")]),a("p",{attrs:{id:"reference_link"}},[a("a",{attrs:{href:"#"}},[t._v("PubMed Link unavailable")])]),a("p",{attrs:{id:"molecule",title:"View this structure in Aquaria","data-intro":"Information about currently focused PDB chain.","data-position":"left"}},[a("strong",[t._v("Molecule: ")]),a("span",{staticClass:"text"},[t._v("unavailable")])])]),a("p",{attrs:{id:"organism"}},[a("strong",[t._v("Organism: ")]),a("span",{staticClass:"text"},[t._v("unavailable")])]),a("p",{attrs:{id:"small_molecules"}},[a("strong",[t._v("Small molecules: ")]),a("span",{staticClass:"text"},[t._v("unavailable")])]),a("p",{attrs:{id:"method"}},[a("strong",[t._v("Method: ")]),a("span",{staticClass:"text"},[t._v("unavailable")])]),a("p",{attrs:{id:"resolution"}},[a("strong",[t._v("Resolution: ")]),a("span",{staticClass:"text"},[t._v("unavailable")])]),a("p",{attrs:{id:"pdb"}},[a("strong",[t._v("Protein Data Bank: ")]),a("span",{staticClass:"text"},[t._v("unavailable")])])])])])}],Mt={name:"AboutPdb"},Vt=Mt,Lt=(a("f760"),Object(I["a"])(Vt,Dt,Rt,!1,null,"01dba514",null)),Tt=Lt.exports,Bt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Nt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"structure-viewer"}},[a("span",{attrs:{id:"threeDSpan"}},[a("div",{attrs:{id:"threeDSpan-inner"}})])])}],jt={name:"StructureViewer",mounted:function(){function t(){var t=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(!navigator.platform)return!1;while(t.length)if(navigator.platform===t.pop()||screen.width>=300&&screen.width<=600)return!0}var e=t();if(e){var a=Math.max(window.innerHeight),r=document.body;document.addEventListener("scroll",(function(t){var e=Math.max(window.innerHeight);e-50>a?r.classList.contains("ios-toolbar")||r.classList.add("ios-toolbar"):r.classList.contains("ios-toolbar")&&r.classList.remove("ios-toolbar")}))}}},Ht=jt,Ft=(a("88de"),Object(I["a"])(Ht,Bt,Nt,!1,null,null,null)),Ut=Ft.exports,Gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"tabs rel level3"},[a("div",{staticClass:"tab",attrs:{id:"Structures"},on:{click:t.renderClusters}},[a("a",{attrs:{href:"#Structures"}},[a("span",{staticClass:"icon"},[a("img",{attrs:{src:t.MS}})]),t._v("  Matching Structures  "),t.getStructCount>0?a("span",{staticClass:"counter"},[t._v(" "+t._s(t.getStructCount.toLocaleString()))]):t._e()])]),a("MatchingStructures"),a("div",{staticClass:"tab",attrs:{id:"Features"},on:{click:t.renderFeatures}},[a("a",{attrs:{href:"#Features"}},[a("span",{staticClass:"icon"},[a("img",{attrs:{src:t.FT}})]),t._v("  Features  "),t.getFeatCount?a("span",{staticClass:"counter",attrs:{id:"featureCounter"}},[t._v(t._s(t.getFeatCount.toLocaleString()))]):t._e()])]),a("Features")],1)])},zt=[],Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel"},[a("a",{staticClass:"close intab",attrs:{href:t.data.hash},on:{click:t.closeTab}}),t._m(0),a("TreeView",{directives:[{name:"show",rawName:"v-show",value:t.showTree,expression:"showTree"}],staticClass:"level5",attrs:{id:"treeView",treeReady:t.prop,count:t.count,coordinates:t.treeCoordinates,parentElem:t.parentElem}}),a("NodeLoader",{directives:[{name:"show",rawName:"v-show",value:t.showLoader,expression:"showLoader"}],attrs:{coordinates:t.treeCoordinates,change:t.change}})],1)},Yt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"vis"}},[a("div",{attrs:{id:"allclusters","data-intro":"Visual summary of all structures in PDB matching the specified protein, grouped by region of match.","data-position":"left"}})])}],Wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"scrim level6",on:{click:t.hideTree}}),a("div",{staticClass:"level7",attrs:{id:"arc"}})])},Jt=[],Qt=a("2909"),$t=(a("4d63"),a("c607"),a("2c3e"),a("25f0"),a("a434"),a("841c"),a("00b4"),a("5698")),Xt=a.n($t),Kt=a("9f50"),te=a("fae8"),ee=a("7792"),ae=a("d4ec"),re=a("bee2"),ne=a("1b1f"),se=function(){function t(e,a,r,n,s,i,o){Object(ae["a"])(this,t),this.width=n,this.height=s,this.xScale=r,this.onTextClick=i,this.clustSize=0,this.onClusterItemClick=o,this.rank=a,this.cluster=e;var c=this.drawClusterContainer(e,a);"undefined"!==typeof c&&this.drawCluster(e,a)}return Object(re["a"])(t,[{key:"updateCluster",value:function(t){var e=this;this.cluster=t,this.clustSize=t.cluster_size;var a=this.cluster.pdb_id.toLowerCase()+"_"+this.rank;"undefined"!==typeof this.nusvg&&this.nusvg.select("g#structure_"+a+" text").text((function(){return e.clustSize}))}},{key:"drawClusterContainer",value:function(t,e){var a=this,r=(t.members[0],t.pdb_chain[0]);if(0!==t.secondary_structure.length&&0!==t.secondary_structure[0].length){var n=this.xScale(t.secondary_structure[0][0].start),i=this.xScale(t.secondary_structure[0][t.secondary_structure[0].length-1].end),o=t.pdb_id.toLowerCase()+"_"+e;this.clustSize=t.cluster_size;var c=t.alignment_identity_score,l=0;this.clustSize>99&&(l=8),this.clustSize>999&&(l=18),this.clustSize<10&&(l=-6);var u=Xt.a.select("#allclusters").append("div").attr("id","out_"+o).attr("class","outer_container");u.append("svg").attr("width",40).attr("height",40).attr("viewBox","0 0 40 40").attr("preserveAspectRatio","none").append("text").attr("text-anchor","end").attr("class","percentage").attr("x",28).attr("y",26).text(c+"%"),this.nusvg=u.append("div").attr("id","c_"+o).attr("class","container").append("svg").attr("width",this.width+200).attr("height",this.height+30).attr("viewBox","0 0 "+(this.width+200)+" "+(this.height+30)).attr("preserveAspectRatio","none"),this.nusvg.append("g").attr("id","structure_"+o).attr("transform","translate("+(s["a"].state.margin.left+n)+",20)").on("mouseover",(function(){return Xt.a.select(this).call(a.mouseover,a)})).on("mouseout",(function(){return Xt.a.select(this).call(a.mouseout,a)})).append("rect").attr("transform","translate("+(i-n-5)+",5)").attr("class","handle").attr("width",32+l).attr("height",16).attr("rx",6),this.nusvg.select("g#structure_"+o).append("g").attr("class","cluster").attr("title","Click to load "+o.substr(0,4)+", chain "+r+" into structure view. Compared to the specified protein, this structure has "+c+"% sequence identity. ").attr("width",i-n+2).attr("height",26).on("click",(function(){return Xt.a.select(this.parentNode).call((function(t){console.log("ClusterRenderer.nusvg.select clicked! "+t),ne.hidePanels(),a.onClusterItemClick(t)}))})),this.nusvg.select("g#structure_"+o+" g.cluster").append("rect").attr("class","cluster").attr("width",i-n+3).attr("height",26).attr("rx",6),this.nusvg.select("g#structure_"+o+" g.cluster").append("rect").attr("width",i-n).attr("height",1).attr("transform","translate(0,13)").attr("class","insertion"),this.addThumbnails(o,n,i,l),this.nusvg.select("g#structure_"+o).append("text").attr("text-anchor","end").attr("fill","white").style("font-size","16px").attr("x",i-n+24+l).attr("y",13).attr("dx",-3).attr("dy",".35em");var d="Click to see "+a.clustSize+" structures in this cluster";return this.nusvg.select("g#structure_"+o+" text, g#structure_"+o).attr("class","expandable").attr("title",d),this.nusvg.select("g#structure_"+o+" text").on("click",(function(){a.onTextClick(Xt.a.select(this.parentNode),this.getBoundingClientRect())})),u}console.log("ClusterRenderer.drawClusterContainer error: cannot draw cluster as it has no secondary structure: ",t)}},{key:"drawCluster",value:function(t,e){var a=this;t.secondary_structure[0].forEach((function(r,n){r.start=+r.start,r.end=+r.end,a.drawClusterResidues(t,e,r)})),this.setConservation(e,t)}},{key:"drawClusterResidues",value:function(t,e,a){for(var r=t.secondary_structure[0][0].start,n=0,i=a.start;i<=a.end;i++){var o=t.conservationArray[0][i];if(i==a.end||o!==t.conservationArray[0][i+1]){var c=this.nusvg.select("g#structure_"+t.pdb_id.toLowerCase()+"_"+e+" g.cluster").append("g").attr("class","residue "+a.type).attr("id","r_"+e+"_"+i).attr("transform","translate("+(i-r-n)*s["a"].state.srw+",8)").append("rect").attr("class",o).attr("width",s["a"].state.srw*(n+1)).attr("height",10);"SHEET"==a.type&&(c.attr("height",14).attr("transform","translate(0,-2)"),i==a.end&&(c.attr("width",s["a"].state.srw*n),this.nusvg.select("g.residue#r_"+e+"_"+i).append("svg:polygon").attr("class",o).attr("transform","translate("+s["a"].state.srw*n+",0)").attr("points",s["a"].state.srw+",0 0,-6 0,16 "+s["a"].state.srw+",10"))),"HELIX"==a.type&&this.nusvg.select("g.residue#r_"+e+"_"+i+" rect").attr("height",16).attr("class",o).attr("transform","translate(0,-3)"),n=0}else n++}}},{key:"setConservation",value:function(t,e){for(var a=[],r=this,n=0;n<e.seq_end.length-1;n++){var s=[];s[0]=e.seq_end[n]+1,s[1]=e.seq_start[n+1]-1,a.push(s)}this.nusvg.selectAll("g.residue").data(a).each((function(e){for(var a=e[0];a<=e[1];a++)r.nusvg.select("g.residue#r_"+t+"_"+a+" rect").attr("height",1).attr("transform","translate(0,5)").attr("class","insertion")}))}},{key:"addThumbnails",value:function(t,e,a,r){var n=t.substring(0,4).toUpperCase();Xt.a.select("g#structure_"+t+" g.cluster").append("line").attr("x1",a-e+6+r).attr("y1",13).attr("x2",this.width-e+60).attr("y2",13).attr("class","connector").attr("stroke-width",1),Xt.a.select("g#structure_"+t).append("g").attr("class","thumbnail").attr("transform","translate("+(this.width-e+28)+",-18)").append("circle").attr("cx",30).attr("cy",30).attr("r",16).attr("fill","#FFF").attr("stroke","#797979").attr("stroke-width",2),Xt.a.select("g#structure_"+t+" g.thumbnail").append("clipPath").attr("id","path_"+t).append("circle").attr("cx",30).attr("cy",30).attr("r",15).attr("clip-rule","evenodd");Xt.a.select("g#structure_"+t+" g.thumbnail").append("image").attr("width","30px").attr("height","30px").attr("x",15).attr("y",15).attr("xlink:href","https://www.ebi.ac.uk/pdbe/static/entry/"+n.toLowerCase()+"_assembly_1_chain_front_image-200x200.png").attr("clip-path","url(#path_"+t+")")}},{key:"mouseover",value:function(t,e){e.origin=Xt.a.select("#"+t.attr("id")+" g.thumbnail").attr("transform");var a=parseFloat(e.origin.substring(e.origin.indexOf("(")+1,e.origin.indexOf(","))),r=t.attr("id").substr(9);Xt.a.select("#"+t.attr("id")+" g.cluster, #"+t.attr("id")).classed("active",!0),Xt.a.select("#"+t.attr("id")+" g.thumbnail").attr("transform","translate("+(a+32)+", -18)"),Xt.a.select("#"+t.attr("id")+" g.thumbnail circle").attr("r",30),Xt.a.select("#"+t.attr("id")+" g.thumbnail #path"+r+" circle").attr("r",29),Xt.a.select("#"+t.attr("id")+" g.thumbnail image").attr("width","60px").attr("height","60px").attr("x",0).attr("y",0)}},{key:"mouseout",value:function(t,e){var a=t.attr("id").substr(9);Xt.a.select("#"+t.attr("id")+" g.cluster, #"+t.attr("id")).classed("active",!1),Xt.a.select("#"+t.attr("id")+" g.thumbnail").attr("transform",e.origin),Xt.a.select("#"+t.attr("id")+" g.thumbnail circle").attr("r",16),Xt.a.select("#"+t.attr("id")+" g.thumbnail #path"+a+" circle").attr("r",15),Xt.a.select("#"+t.attr("id")+" g.thumbnail image").attr("width","30px").attr("height","30px").attr("x",15).attr("y",15)}}]),t}(),ie=[];function oe(t,e){var a=parseInt(t.attr("id").substr(15));s["a"].commit("setTreeData",a),s["a"].commit("setTreeCoordinates",e)}function ce(t,e){var a=[];a.cluster=parseInt(e),a.member=0,s["a"].commit("setPdbIndex",a),document.querySelector("g.loaded")&&document.querySelector("g.loaded").classList.remove("loaded"),Xt.a.select("div.container.loaded").classed("loaded",!1),Xt.a.select("g#structure_"+t+"_"+e).classed("loaded",!0),Xt.a.select("div#c_"+t+"_"+e).classed("loaded",!0)}function le(t){g=0;var e=t.length;d=document.getElementById("structure-viewer").offsetWidth-s["a"].state.margin.right-s["a"].state.margin.left-50,h=40-s["a"].state.margin.top-s["a"].state.margin.bottom+35,p=Xt.a.scale.linear().domain([1,e]).range([1,d]),s["a"].commit("setSrw",p(100)/100),document.querySelector("#vis > .ruler")&&document.querySelector("#vis > .ruler").remove(),me("vis")}function ue(t){m=t;for(var e=0;e<t.length;e++)ie[e].updateCluster(t[e])}function de(){ie=[],m=[],le(s["a"].state.sequences[0]);var t=s["a"].state.Matches.clusters;t.forEach((function(t){he(t)})),ue(t),ce()}function he(t){var e=new se(t,g,p,d,h,(function(t,e){console.log("ShowMatchingStructures.addCluster.onclick",e),oe(t,e)}),ge,"#allclusters");ie.push(e),g++}function pe(t){return parseInt(t.attr("id").substr(15))}function ge(t){history.pushState("",document.title,window.location.pathname+window.location.search);var e=t.attr("id").substr(10,4),a=pe(t);ce(e,a),console.log("ShowMatchingStructures.clusterItemClick","shortId: "+e,"cluster-number: "+a,m[a]);var r=m[a].members[0];A["b"](r)}function me(t){d=document.getElementById("structure-viewer").offsetWidth-s["a"].state.margin.right-s["a"].state.margin.left-50;var e=Xt.a.select("#"+t).insert("div",":first-child").attr("class","ruler").attr("data-intro","Graphical representation of the specified protein's sequence").attr("data-position","left").append("svg").attr("width",parseInt(d+s["a"].state.margin.left)).attr("viewBox","0 0 "+parseInt(d+s["a"].state.margin.left)+" 15").attr("preserveAspectRatio","none").attr("height",15).append("g").attr("transform","translate("+s["a"].state.margin.left+",0)");e.append("g").attr("class","x axis").call(Xt.a.svg.axis().scale(p).orient("bottom").tickSize(4,2,6).tickPadding(2));for(var a=[],r=Xt.a.selectAll("#vis div.ruler g.x text")[0],n=0;n<r.length;n++)a.push(+r[n].textContent);a=a.filter(fe),a.push(s["a"].state.sequences[0].length),a.unshift(1),Xt.a.select("#"+t+" div.ruler g.x").call(Xt.a.svg.axis().scale(p).orient("bottom").tickSize(4,2,6).tickPadding(2).tickValues(a)),Xt.a.selectAll("g.x text").attr("text-anchor","end")}function fe(t){var e=s["a"].state.sequences[0].length;return 1!==t&&t!==e&&t*s["a"].state.srw<e*s["a"].state.srw-30}var ve=10,ye=450,be=450,we=14,_e=new RegExp(/(p\.)?[A-Za-z]+[0-9]+[A-Za-z\*\_\?\[\]\(\)\%\=\.]+/),Se={name:"TreeView",props:["treeReady","count","coordinates","parentElem"],data:function(){return{pdbs:[],up:a("31c8"),down:a("62bc")}},computed:Object(w["a"])({},Object(x["b"])(["getGene","getOrganism","getMatches"])),watch:{treeReady:function(t,e){var a=this;a.coordinates.clientX+ye+5>=window.innerWidth&&window.innerWidth>500?document.querySelector(a.parentElem+" #arc").style.left=window.innerWidth-ye-5+"px":a.coordinates.clientX+ye+5>=window.innerWidth?document.querySelector(a.parentElem+" #arc").style.left="50px":document.querySelector(a.parentElem+" #arc").style.left=a.coordinates.clientX+"px",document.querySelector(a.parentElem+" #arc").style.top=a.coordinates.clientY-400+"px",!0===this.$parent.showLoader?this.$parent.showLoader=!1:this.$parent.showTree=!1,console.log(a.count),console.log("Prop changed: ",t," | was: ",e);var r=t,n=r[0];if($t["selectAll"](a.parentElem+" #arc > *").remove(),r.length>ve){var s=a.chunk(r,ve);a.generateArc(s,n,0)}else a.generateArc(r,n)}},methods:{hideTree:function(){s["a"].commit("setTreeData",null),this.$parent.showTree=!1},nodeClick:function(t){var e=this,a=t[2].children[0],r=0;if(a.name=t[2].label,a.length=t[2].children.length,t[2].children.length>ve){var n=e.chunk(t[2].children,ve);e.generateArc(n,a,r)}else r+=1,this.generateArc(t[2].children,a)},chunk:function(t,e){var a,r=[];t=(a=[]).concat.apply(a,Object(Qt["a"])(t));while(t.length)r.push(t.splice(0,e));return r},reversePdbArray:function(t){var e=[];return t.forEach((function(t){e.unshift(t)})),e},generateArc:function(t,e,a){var r,n,s,i,o,c=this,l=60;if(void 0!==a?(o=t,n=o[a]):(o=c.reversePdbArray(t),n=o),Object.prototype.hasOwnProperty.call(n[0],"children")){void 0!==a&&null!==document.querySelector("svg#tree")&&document.querySelector("svg#tree").remove();var u=$t["select"](c.parentElem+" #arc").append("svg").attr("id","tree").attr("width",ye).attr("height",be);i=c.createLinks(u,"parent",o,e,a)}else document.querySelectorAll("outerElem").forEach((function(t){return t.remove()})),document.querySelectorAll("[id^=children_]").forEach((function(t){return t.parentNode.removeChild(t)})),u=$t["select"](c.parentElem+" #arc").append("svg").attr("id","children_"+n[0].pdb_id+"_"+a).attr("width",ye).attr("height",be),i=c.createLinks(u,"child",o,e,a);if(s=i.nodes,u=i.svg,Object.prototype.hasOwnProperty.call(n[0],"children")?(s.shift(),r=$t["select"]("svg#tree").selectAll("g#gParent").data(s).enter()):(e.dx=s[1][0]-l,e.dy=s[1][1]-we/2,s.push([s[1][0]-l,s[1][1],e,"parent"]),document.querySelector("#tree").classList.add("hide"),s.shift(),r=$t["select"]("svg#children_"+n[0].pdb_id+"_"+a).selectAll("g").data(s).enter()),r=r.append("g").attr("class",(function(t,e){if(t.length>1)return Object.prototype.hasOwnProperty.call(t[2],"children")?"outerElem":"innerElem"})).attr("id",(function(t,e){if(t.length>1)return Object.prototype.hasOwnProperty.call(t[2],"children")?"out_"+t[2].children[0].pdb_id:void 0!==t[3]&&t[3].includes("parent")?"parentNode":"in_"+t[2].pdb_id})).attr("width",we).attr("height",we).on("click",(function(t,e){if(e>=0)if(Object.prototype.hasOwnProperty.call(t[2],"children"))c.nodeClick(t);else if(void 0===t[3]){var a=window.location.search;history.pushState("",document.title,"/"+c.getOrganism+"/"+c.getGene+"/"+t[2].pdb_id+"/"+t[2].pdb_chain+a),c.getMatches.clusters.forEach((function(e,a){if(e.members.length>1)e.members.forEach((function(r){if(r.pdb_id===t[2].pdb_id&&r.pdb_chain[0]===t[2].pdb_chain)return A["b"](r),ce(e.pdb_id,a),null}));else if(e.members[0].pdb_id===t[2].pdb_id&&e.members[0].pdb_chain[0]===t[2].pdb_chain)return e.E_value=e.members[0].E_value,A["b"](e),ce(e.pdb_id,a),null})),_e.test(a)&&c.waitForElement()}else document.querySelector("#tree").classList.remove("hide"),document.querySelectorAll("[id^=children_]").forEach((function(t){return t.parentNode.removeChild(t)}))})),Object.prototype.hasOwnProperty.call(n[0],"children"))r.append("rect").attr("transform",(function(t){return"translate("+t[0]+","+(t[1]-we/2)+")"})).attr("class","label").attr("width",(function(t,e){return t[2].children?t[2].children.length>9?32:26:0})).attr("height",(function(t,e){return t[2].children?16:0})).attr("rx",6).attr("fill","#a3a3a3").attr("stroke","none");else{var d=$t["select"]("g#parentNode").selectAll("g").data([e]).enter();d.append("text").attr("x",(function(t){return t.dx-40-20})).attr("dy",(function(t){return t.dy+40})).attr("class","nbr_label").text((function(t){return t.name.length>15?t.name.substr(0,15)+"...":t.name})).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500),d.append("rect").attr("transform",(function(t){return"translate("+t.dx+","+t.dy+")"})).attr("class","label").attr("width",(function(t,e){return t.length?t.length>9?32:26:0})).attr("height",16).attr("rx",6).attr("fill","#a3a3a3").attr("stroke","none"),d.append("text").attr("x",(function(t){return t.dx+we+2})).attr("dy",(function(t){return t.dy+we-1})).attr("class","nbr_label").text((function(t){return t.length})).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500)}r.append("circle").attr("cx",(function(t){return t[0]})).attr("cy",(function(t){return t[1]})).attr("r",we).style("fill","white").style("stroke","#999999").style("stroke-width","1"),r.append("clipPath").attr("id","clip_"+function(t,e){return e}).append("circle").attr("cx",(function(t){return t[0]})).attr("cy",(function(t){return t[1]})).attr("r",we).attr("clip-rule","evenodd"),r.append("image").attr("width",2*(we-1)+"px").attr("height",2*(we-1)+"px").attr("x",(function(t){return t[0]-13})).attr("y",(function(t){return t[1]-13})).attr("clip-path",(function(t,e){var a=" ";return t[2].pdb_id&&(a="url(#clip_"+t[2].pdb_id+")"),t[2].children&&t[2].children[0].pdb_id&&(a="url(#clip_"+t[2].children[0].pdb_id+")"),a})).attr("xlink:href",(function(t,e){var a=" ";return t[2].pdb_id&&"undefined"===typeof t[2].children&&(a=t[2].pdb_id.toUpperCase()),t[2].children&&t[2].children[0].pdb_id&&(a=t[2].children[0].pdb_id.toUpperCase())," "===a?" ":"https://www.ebi.ac.uk/pdbe/static/entry/"+a.toLowerCase()+"_assembly_1_chain_front_image-200x200.png"})),r.append("text").attr("x",(function(t){return t[0]+we+2})).attr("dy",(function(t){return t[1]+we/2-1})).attr("class","nbr_label").text((function(t,e){if(t[2].label&&"undefined"!==t[2].label){var a=t[2].label;return t[2].label.length>30&&(a=t[2].label.substr(0,15)+" ... "+t[2].label.substr(t[2].label.length-15)),t[2].children?t[2].children.length+"      "+a:" "}if(void 0===t[3])return t[2].pdb_id+"-"+t[2].pdb_chain})).attr("title",(function(t,e){return t[2].label_long?t[2].label_long:t[2].label})).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500)},createLinks:function(t,e,a,r,n){var s,i=[],o=0,c=[],l={},u=this,d=40;void 0!==n?(s=a[n],s=u.reversePdbArray(s)):s=a,"child"===e&&(o=60);var h=be-d;c.push([10,h]);for(var p=0;p<s.length;p++)c.push([80+o,h-p*d]),c[p+1].push(s[p]);if(i.push(Kt["a"]()({source:c[0],target:c[1]})),s.length>1){var g=[{xpoint:30+o,ypoint:h},{xpoint:45+o,ypoint:h-10},{xpoint:47+o,ypoint:h-20}],m=te["a"]().x((function(t){return t.xpoint})).y((function(t){return t.ypoint})).curve(ee["a"]);t.append("path").attr("d",m(g)).attr("fill","none").attr("class",(function(){return"outerElem"})).attr("stroke","#76c276").style("stroke-width",2);for(var f=2;f<c.length;f++){var v=[{xpoint:47+o,ypoint:c[f][1]+10},{xpoint:55+o,ypoint:c[f][1]},{xpoint:80+o,ypoint:c[f][1]}];t.append("path").attr("d",m(v)).attr("fill","none").attr("stroke","#76c276").style("stroke-width",2).attr("class",(function(t){return"outerElem"}))}t.append("line").style("stroke","#76c276").style("stroke-width",2).attr("x1",47+o).attr("y1",h+10-(c.length-2)*d).attr("x2",47+o).attr("y2",h-20).attr("class",(function(){return 1===e?"outerElem":"innerElem"}))}return t.append("path").attr("d",i).attr("stroke","#76c276").attr("fill","none").style("stroke-width",2),a.length>1&&(n+1<a.length&&(t.append("circle").attr("cx",80+o).attr("cy",h+30).attr("r",10).style("fill","#00b2ff"),t.append("image").attr("width","18px").attr("height","18px").attr("x",80+o-9).attr("y",h+21).attr("xlink:href",u.down).on("click",(function(){n<a.length-1&&u.generateArc(a,r,n+1)})),t.append("text").attr("x",95+o).attr("dy",h+35).attr("class","nbr_label").text("Next "+a[n+1].length).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500)),n+1>1&&(t.append("circle").attr("cx",80+o).attr("cy",be-c.length*d+10).attr("r",10).style("fill","#00b2ff"),t.append("image").attr("width","18px").attr("height","18px").attr("x",80+o-9).attr("y",be-c.length*d+1).attr("xlink:href",u.up).on("click",(function(){n-1>=0&&u.generateArc(a,r,n-1)})),t.append("text").attr("x",95+o).attr("dy",be-c.length*d+we).attr("class","nbr_label").text("Previous").attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500))),t.append("rect").attr("x",0).attr("y",400).attr("rx",6).attr("ry",6).attr("width",u.coordinates.width+2).attr("height",u.coordinates.height).style("fill","orange").attr("class","handle").on("click",(function(){u.hideTree()})),t.append("text").attr("x",3).attr("dy",415).attr("class","nbr_label").text(u.count).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500),l.nodes=c,l.links=i,l.svg=t,l},waitForElement:function(){var t=this;s["a"].commit("setIsCustomFeature",!0),"none"!==document.getElementById("waitingFrame").style.display?setTimeout(t.waitForElement,5):(window.AQUARIA.passFeature(window.AQUARIA.customfeatureSet,window.AQUARIA.customfeatureSetioid),$t["selectAll"]("svg.loaded rect.feature").attr("fill","#a4abdf"),$t["select"]("svg.loaded").classed("loaded",!1))}}},xe=Se,Ae=(a("41b6"),Object(I["a"])(xe,Wt,Jt,!1,null,null,null)),Ce=Ae.exports,ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"scrim level6",attrs:{id:"nodeLoader"},on:{click:t.hideLoader}},[a("img",{attrs:{src:t.loader}})])},Ie=[],Pe={name:"NodeLoader",data:function(){return{loader:a("ae7d")}},props:["coordinates","change"],watch:{change:function(t,e){var a=this;document.querySelectorAll("#nodeLoader > img").forEach((function(t){t.style.marginLeft=a.coordinates.clientX+"px",t.style.marginTop=a.coordinates.clientY-10+"px"}))}},methods:{hideLoader:function(){this.$parent.showLoader=!1,this.$parent.showTree=!1}}},Oe=Pe,Ee=(a("d2f8"),Object(I["a"])(Oe,ke,Ie,!1,null,"d0db7e78",null)),qe=Ee.exports,De={name:"MatchingStructures",components:{TreeView:Ce,NodeLoader:qe},data:function(){return{showTree:!1,prop:null,count:0,treeCoordinates:{},change:0,showLoader:!1,parentElem:".panel"}},watch:{sequence:function(t,e){e.accession!==t.accession&&null!==e.accession&&window.scrollBy(0,100)},treeData:function(t){var e=this;if(null!==t){e.change=e.change+1;var a=e.getTreeCoordinates;e.treeCoordinates.clientX=a.left,e.treeCoordinates.clientY=a.top,e.treeCoordinates.width=a.width,e.treeCoordinates.height=a.height,e.showLoader=!0;var r="".concat(window.BACKEND,"/get_secondary_clusters/");r=r+e.getStructure.accession+"/"+e.getStructure.pdb+"/"+e.getStructure.chain+"/"+t,X()({method:"get",url:r}).then((function(t){e.showTree=!0,e.prop=t.data,e.count=0,t.data.forEach((function(t){e.count+=t.children.length}))}))}else e.showTree=!1}},computed:Object(w["a"])({data:function(){return{hash:s["a"].state.hash,prop:null}},sequence:function(){return s["a"].state.structure},treeData:function(){return s["a"].state.treeData}},Object(x["b"])(["getMatches","getTreeCoordinates","getStructure"])),methods:{closeTab:function(){window.scrollBy(0,100),_["hidePanels"]()}},mounted:function(){var t=this;if(t.getMatches&&Object.hasOwnProperty.call(t.getMatches,"clusters"))for(var e=document.querySelectorAll("[id ^= structure_] > text"),a=0;a<e.length;a++)e[a].addEventListener("click",(function(){var t=this.parentElement.id;console.log(t)}))}},Re=De,Me=(a("3cb4"),Object(I["a"])(Re,Zt,Yt,!1,null,null,null)),Ve=Me.exports,Le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel"},[a("a",{staticClass:"close",attrs:{href:"#"},on:{click:t.closeTab}}),a("div",{attrs:{id:"featurePanel"}},[t.getfeatureSets?a("div",{staticClass:"ui-sortable",attrs:{id:"groupedFeatures"}},t._l(t.getfeatureSets,(function(e){return a("div",{key:e[0],staticClass:"featureCollection ui-sortable-handle",attrs:{id:e[0]},on:{click:function(a){return t.toggleTrack(e[0])}}},[a("div",{staticClass:"featureHeader",on:{mouseover:function(a){return t.hightlight(e[0])},mouseout:function(a){return t.removeHightlight(e[0])}}},[a("p",{attrs:{id:"arrow"}},[t._v("►")]),a("p",{staticClass:"featureName"},[t._v(t._s(e[0]))]),a("div",{staticClass:"info",on:{mouseover:function(a){return t.showInfo(e,a)}}},[t._v("?")])]),a("div",{staticClass:"featureTrack ui-sortable",staticStyle:{cursor:"move"}})])})),0):t._e(),a("br")])])},Te=[],Be=(a("b64b"),a("ade3")),Ne=a("53ca"),je=a("2ef0"),He=a.n(je),Fe=[];function Ue(t,e){We(t,parseInt(e))}function Ge(){var t=s["a"].state.currentAnnotation;if(void 0!==t&&null!==t){for(var e in t)S["removeAnnotation"](t[e].id,t[e].annotationName);t.length=0}}function ze(t){var e=S["embededJolecule"].controller;t.forEach((function(t){Ze(t)})),e.soupView.isUpdateSidechain=!0,e.soupView.isChanged=!0}function Ze(t){var e=t.split(".")[0],a="object"===Object(Ne["a"])(s["a"].state.structure.chain)?s["a"].state.structure.chain[0]:s["a"].state.structure.chain;if(e.includes("-")){var r=parseInt(e.split("-")[0].replace(/\D/g,"")),n=parseInt(e.split("-")[1].replace(/\D/g,""))+1;He.a.range(r,n).forEach((function(t){Ye(t,a)}))}else e.includes(",")?e.split(",").forEach((function(t){t=parseInt(t.replace(/\D/g,"")),Ye(t,a)})):(e=parseInt(e.replace(/\D/g,"")),Ye(e,a))}function Ye(t,e){var a=S["joleculeAlignment"],r=S["embededJolecule"].controller;t=a.mapSeqResToPdbResOfChain(0,t,e);var n=r.soup.findResidueIndices(0,e,t[2])[0];r.soup.getResidueProxy().load(n).sidechain=!0}function We(t,e){if(e="undefined"!==typeof e?e:-1,e>=0)Je(t,e);else for(e in t.Tracks)Je(t,e)}function Je(t,e){var a=new Array,r=new Array,n=new Array,i=new Array,o=new Array,c=new Array,l="#ffffff";if(void 0!=t){var u;for(var d in t.featureColours&&t.featureColours.length>0&&(l=t.featureColours[0]),t.Tracks[e])if(t.Tracks[e][d].show){if("multi_color"!==t.Class.color)t.Tracks[e][d].color.substring(1);t.Tracks[e][d].color?a.push(t.Tracks[e][d].color):a.push(l),r.push(t.Tracks[e][d].label),n.push(t.Tracks[e][d].desc),i.push(t.Tracks[e][d].start+":"+t.Tracks[e][d].end);var h=new Array,p=new Array;for(var g in t.Tracks[e][d].urls)h.push(t.Tracks[e][d].urls[g].href),p.push(t.Tracks[e][d].urls[g].text);o.push(h),c.push(p)}var m=t.ProteinID;if(t.hasOwnProperty("SeqHash")&&""!=t.SeqHash)for(var f=0;f<S["attributes"].sequences.length;f++)t.SeqHash==S["attributes"].sequences[f].uniprot_hash&&(m=S["attributes"].sequences[f].primary_accession,t.ProteinID=m);var v=(u={id:t.ProteinID,annotationName:t.Category,featureColours:a,featureNames:r,featureDescriptions:n,featurePositions:i,featureURLs:o},Object(Be["a"])(u,"featureURLs",o),Object(Be["a"])(u,"featureURLtexts",c),Object(Be["a"])(u,"featureURLtexts",c),u);Fe.push(v),s["a"].commit("setCurrentAnnotation",Fe),Array.isArray(v.id)?S["addAnnotation"](v.id[0],v.annotationName,a,r,n,i,o,c):S["addAnnotation"](v.id,v.annotationName,a,r,n,i,o,c)}}var Qe=a("ae8a"),$e={name:"Features",data:function(){return{jAlignment:null,jController:null,accession:""}},methods:{closeTab:function(){window.scrollBy(0,100),_["hidePanels"]()},clearResidues:function(){S["embededJolecule"].controller.clearSelectedResidues()},toggleTrack:function(t){var e=document.getElementById(t).lastChild;t=t.replace(/\s/g,"\\ "),"block"!==e.style.display?(e.style.display="block",document.querySelector("#"+t+" #arrow").innerText="▼"):(e.style.display="none",document.querySelector("#"+t+" #arrow").innerText="►")},hightlight:function(t){document.querySelector("#"+t.replace(/\s/g,"\\ ")+" > .featureHeader").style.background="#bebebe"},removeHightlight:function(t){document.querySelector("#"+t.replace(/\s/g,"\\ ")+" > .featureHeader").style.background="#ccc"},showInfo:function(t,e){s["a"].commit("setPopupTitle",t[0]),s["a"].commit("setPopupText",t[1][0].About),s["a"].commit("setIsDefaultFeature",!0),s["a"].commit("setVariantIdx",-1),s["a"].commit("setPopupCoordinates",e.srcElement.getBoundingClientRect())},fetch_features:function(t){var e=[],a=[];t.forEach((function(t){e.push(t.primary_accession),a.push(t.uniprot_hash)})),Qe["a"](e)},groupFeatureSets:function(t,e){if(t.length>0){var a=t||a,r=He.a.groupBy(a,(function(t){return t.Server}));r=Object.keys(r).map((function(t){return[String(t),r[t]]})),(null===s["a"].getters.getfeatureSets||s["a"].getters.getfeatureSets.length<r.length)&&s["a"].commit("setfeatureSets",r)}},checkAddedFeature:function(){var t=this,e=this.$store.state.featureSets?this.$store.state.featureSets:[];e.length>0&&e.forEach((function(e){e[0].includes("Added")&&null===t.getLoadedFeature.set&&s["a"].commit("setLoadedFeature",{set:e[1][0],track:0})}))},updateSelection:function(t){M["d"]()}},watch:{getcompleteServerNum:function(t,e){var a=this,r=this.$store.state.aggregatedAnnotations,n=this.$store.state.completeExtServers;t!==e&&(a.groupFeatureSets(r,n),a.getCoverageMap&&Object.keys(a.$route.query).length>0&&a.checkAddedFeature())},Loader:function(t){var e=this;t||(e.$store.state.structure.accession!==e.accession&&(e.accession=e.$store.state.structure.accession,e.fetch_features(this.$store.state.Matches.sequences)),(Object.keys(e.$route.query).length>0||e.getLoadedFeature.set)&&s["a"].commit("setLoadedFeature",{set:e.getLoadedFeature.set,track:0}),window.addEventListener("hashchange",(function(t){return e.updateSelection(window.location.hash)}),{}))},getLoadedFeature:function(t){t.set?(Ue(t.set,t.track),null!==this.sideChain&&ze(this.sideChain)):Ge()},getCoverageMap:function(t){var e=this;t&&(e.getLoadedFeature.set||e.checkAddedFeature())}},computed:Object(w["a"])({Loader:function(){return s["a"].state.Loader},sideChain:function(){return s["a"].state.sidechain}},Object(x["b"])(["getfeatureSets","getcompleteServerNum","getLoadedFeature","getCoverageMap"]))},Xe=$e,Ke=(a("fc7c"),Object(I["a"])(Xe,Le,Te,!1,null,null,null)),ta=Ke.exports,ea=a("29c86"),aa=["A","C","D","E","F","G","H","I","K","L","M","N","P","Q","R","S","T","V","W","Y"];function ra(){s["a"].commit("setPopupCoordinates",0)}function na(t,e){var a="";if(t.urls.length>0){a="<p>";for(var r=0;r<t.urls.length;r++)a+="<a href='"+t.urls[r].href+"' target='_blank'>"+t.urls[r].text+"</a><br>";a+="</p>"}var n="";t.name.includes("&#8201;&#8594;&#8201;")&&(n=t.name.replace(/^.*\(/,""),n=n.replace(/\&.*$/,""));var i="<div id='buttons_eachAa'> <b>See also:</b><p class='pAaColor'> "+n+" &rarr;</p>";aa.forEach((function(e,a){if(e!=n){var r=ia(e,t.desc,t.start);i=i+"<button id='btnVI_"+e+"'",i=1==r?i+"class='btnAaBold_b'> <b>"+e+"</b> ":i+" class='btnAaBold'> "+e,i+="</button>"}})),i+="</div>";var o=t.desc+"<br>"+a,c="<b>"+t.label+"</b>";t.name.includes("span_missenseHeading")?(s["a"].commit("setIsDefaultFeature",!1),t.start!=t.end?(s["a"].commit("setVariant",t.start+"-"+t.end),s["a"].commit("setPopupTitle",t.label),sa(t.start+"-"+t.end,t.label)):(s["a"].commit("setVariant",t.start),s["a"].commit("setPopupTitle",t.label),sa(t.start,t.label))):(s["a"].commit("setVariant",-1),s["a"].commit("setIsDefaultFeature",!0),c=t.start===t.end?c+"( Residue "+t.start+") ":c+"( Residues "+t.start+"-"+t.end+") ",s["a"].commit("setPopupTitle",c),s["a"].commit("setPopupText",o),s["a"].commit("setVariantIdx",-1),s["a"].commit("setPopupCoordinates",document.querySelector("#"+e.id).getBoundingClientRect())),t.hasOwnProperty("hc_go")&&t.hasOwnProperty("hc_ec")&&t.hasOwnProperty("hc_species")?(console.log("CATH plot data"),console.log(t),oa(t).then((function(){ca()}))):(console.log("CATH plot no data"),console.log(t))}function sa(t,e){var a=s["a"].getters.getVariantResidues;if(a.hasOwnProperty(t)&&a[t].hasOwnProperty("theOrigFeatStr"))for(var r=0;r<a[t].theOrigFeatStr.length;r++)if(e.includes(a[t].theOrigFeatStr[r])){s["a"].commit("setVariantIdx",r);break}}function ia(t,e,a){var r="<toReplace_varInfo_"+t+">",n="</toReplace_varInfo_"+t+">",i=e.indexOf(r),o=e.lastIndexOf(n),c=e.substring(i,o),l=s["a"].state.variantStructs.variantStructs;return!!(c.match("UniProt")||c.match("FunVar")||c.match("COSMIC")||l.hasOwnProperty(a)&&l[a].hasOwnProperty(t)&&l[a][t].hasOwnProperty("pdbs")&&l[a][t]["pdbs"].length>0)}function oa(t){return new Promise((function(e,a){"undefined"!==typeof t.hc_go&&t.hc_go.hasOwnProperty("data")&&t.hc_go.data.hasOwnProperty("series")&&t.hc_go.data.series.length>=2?la("hc_go_div",t.hc_go.data.series[0].data,t.hc_go.data.series[1].data,"",t.hc_go.data.series[0].size,t.hc_go.data.series[0].dataLabels.color,t.hc_go.data.series[0].dataLabels.distance,t.hc_go.data.series[1].innerSize,t.hc_go.data.series[0].name,t.hc_go.data.series[1].name,t.hc_go.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_div"))})).catch((function(t){console.log("CATH plot: 2"),ua("hc_go_noData").then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_noData")),document.getElementById("hc_go_noData").innerHTML=document.getElementById("hc_go_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+t)}))})):(ua("hc_go_noData").then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_noData")),document.getElementById("hc_go_noData").innerHTML=document.getElementById("hc_go_noData").innerHTML+"<br> <br> <center> No data</center>"})),console.log("CATH plot: 3")),"undefined"!==typeof t.hc_ec&&t.hc_ec.hasOwnProperty("data")&&t.hc_ec.data.hasOwnProperty("series")&&t.hc_ec.data.series.length>=2?la("hc_ec_div",t.hc_ec.data.series[0].data,t.hc_ec.data.series[1].data,"",t.hc_ec.data.series[0].size,t.hc_ec.data.series[0].dataLabels.color,t.hc_ec.data.series[0].dataLabels.distance,t.hc_ec.data.series[1].innerSize,t.hc_ec.data.series[0].name,t.hc_ec.data.series[1].name,t.hc_ec.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_div"))})).catch((function(t){ua("hc_ec_noData").then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_noData")),document.getElementById("hc_ec_noData").innerHTML=document.getElementById("hc_ec_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+t)}))})):ua("hc_ec_noData").then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_noData")),document.getElementById("hc_ec_noData").innerHTML=document.getElementById("hc_ec_noData").innerHTML+"<br> <br> <center> No data</center>"})).catch((function(){})),"undefined"!==typeof t.hc_species&&t.hc_species.hasOwnProperty("data")&&t.hc_species.data.hasOwnProperty("series")&&t.hc_species.data.series.length>=2?la("hc_species_div",t.hc_species.data.series[0].data,t.hc_species.data.series[1].data,"",t.hc_species.data.series[0].size,t.hc_species.data.series[0].dataLabels.color,t.hc_species.data.series[0].dataLabels.distance,t.hc_species.data.series[1].innerSize,t.hc_species.data.series[0].name,t.hc_species.data.series[1].name,t.hc_species.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_div"))})).catch((function(t){ua("hc_species_noData").then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_noData")),document.getElementById("hc_species_noData").innerHTML=document.getElementById("hc_species_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+t)}))})):ua("hc_species_noData").then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_noData")),document.getElementById("hc_species_noData").innerHTML=document.getElementById("hc_species_noData").innerHTML+"<br> <br> <center> No data</center>"})),e()}))}function ca(){var t=document.getElementsByClassName("highcharts-pie-series");for(var e in t)if(t.hasOwnProperty(e)){var a=t[e].getElementsByTagName("path");for(var r in a)if(a.hasOwnProperty(r)){var n=a[r].getAttribute("fill");a[r].removeAttribute("fill"),a[r].setAttribute("style","fill:"+n)}}}function la(t,e,a,r,n,s,i,o,c,l,u){return new Promise((function(d,h){ua(t).then((function(){try{ea.chart(t,{chart:{type:"pie",margin:0},title:{text:r},plotOptions:{pie:{shadow:!1,center:["50%","50%"]}},tooltip:{valueSuffix:"%"},series:[{name:c,data:e,size:n,dataLabels:{enabled:!1,formatter:function(){return this.y>3?this.point.name:null},color:s,distance:i}},{name:l,data:a,innerSize:o,dataLabels:{enabled:!1,formatter:function(){return this.y>1?"<b>"+this.point.name+":</b> "+this.y+"%":null},color:u},id:"versions"}],responsive:{rules:[{condition:{maxWidth:100},chartOptions:{series:[{},{id:"versions",dataLabels:{enabled:!1}}]}}]}}),d()}catch(h){console.log("Highcharts error"),console.log(h),d(),console.log("In the highcharts plotting function")}}))}))}function ua(t){return new Promise((function(e,a){document.getElementById(t)&&document.getElementById(t).remove();var r=document.createElement("div");document.getElementById("superFamCharts").append(r),r.id=t,r.style="width: 100px; height: 100px; margin: 0 auto; background-color: white;",e()}))}var da=0,ha=0;function pa(t){document.querySelector("#featurePanel > .ruler")&&document.querySelector("#featurePanel > .ruler").remove(),me("featurePanel"),t.forEach((function(t){var e=Xt.a.select("#"+t[0].replace(/\s/g,"\\ ")),a=e.select(".featureTrack").selectAll("div");for(var r in t[1])"Added Features"==t[0]&&t[1][r].hasOwnProperty("SeqHash")&&""!=t[1][r].SeqHash&&t[1][r].SeqHash!=s["a"].state.sequences[0].uniprot_hash||a.data([t[1][r]]).enter().append("div").attr("class","track").attr("id",(function(t){return"track_"+t.Category})).html((function(t){if(""!=t.Type){if("UniProt"==t.Server||"PredictProtein"==t.Server||"CATH"==t.Server||"SNAP2"==t.Server||"COSMIC"==t.Server||"FunVar"==t.Server)var e="Curated Features";else e=t.Server;return"<p><span class='featureSetName'>"+t.Category+'</span> <i class="featureSetName_">('+t.Type.replace(/_/g," ")+")</i> &nbsp;&nbsp; <span class='info'>?</span>  <span class='source'>"+e.replace(/[sS]$/,"")+"</span> </p> <span class='tooltiptext'>"+t.Description+"</span>"}return e="UniProt"==t.Server||"PredictProtein"==t.Server||"CATH"==t.Server||"SNAP2"==t.Server||"COSMIC"==t.Server||"FunVar"==t.Server?"Curated Features":t.Server,'<p><span class="featureSetName">'+t.Category+"</span> &nbsp;&nbsp; <span class='info'>?</span> <span class='source'>"+e.replace(/[sS]$/,"")+"</span></p> <span class='tooltiptext'>"+t.Description+"</span>"})).each(ga)}))}function ga(t,e){var a=t.Tracks;for(var r in a){var n=Xt.a.select(this),i=fa(n);i.attr("id","ftrack_"+da+"_"+r).on("click",(function(){if("loaded"==Xt.a.select(this).attr("class"))s["a"].commit("setLoadedFeature",{set:null,track:null}),Xt.a.select("svg.loaded").classed("loaded",!1),document.querySelector(".featureHeader").click(),Ge(),ra(),_["hidePanels"]();else{document.querySelector("#outerFeatureMap")&&document.querySelector("#outerFeatureMap").remove(),"Added Features"!=t.Server&&s["a"].commit("setIsCustomFeature",!1);var e=Xt.a.select(this).attr("id").split("_")[2];s["a"].commit("setLoadedFeature",{set:t,track:e}),Xt.a.selectAll("svg.loaded rect.feature").attr("fill","#a4abdf"),Xt.a.select("svg.loaded").classed("loaded",!1),Xt.a.select(this).attr("class","loaded"),_["hidePanels"]()}})).on("mouseover",(function(){Xt.a.select(this).selectAll("rect.feature").attr("fill",(function(){return Xt.a.select(this).attr("color")}))})).on("mouseout",(function(){"loaded"!==Xt.a.select(this).attr("class")&&Xt.a.select(this).selectAll("rect.feature").attr("fill","#a4abdf")})).append("rect").attr("width",ha+s["a"].state.margin.left).attr("height",25).attr("class","bg").attr("fill","none"),Xt.a.select("svg#ftrack_"+da+"_"+r).append("g").attr("transform","translate("+s["a"].state.margin.left+",0)").append("rect").attr("width",ha).attr("height",1).attr("transform","translate(0,13)").attr("class","insertion"),ma(t,a,r)}da++}function ma(t,e,a){for(var r in e[a]){var n=s["a"].state.featCount+1;s["a"].commit("setFeatCount",n),Xt.a.select("#ftrack_"+da+"_"+a+" g").append("rect").attr("width",(function(){return(e[a][r].size+1)*s["a"].state.srw>2?(e[a][r].size+1)*s["a"].state.srw:2})).attr("height",14).attr("id","feature_"+da+"_"+a+"_"+r).attr("transform","translate("+e[a][r].start*(s["a"].state.srw-.0085)+",6)").attr("color",e[a][r].color).attr("fill","#a4abdf").attr("fill-opacity",(function(){return"single_track"==t.Class?.3:1})).attr("class","feature").on("mouseover",(function(){Xt.a.select(this).attr("stroke-width","2px").attr("stroke","white"),na(e[this.id.split("_")[2]][this.id.split("_")[3]],this)})).on("mouseout",(function(){Xt.a.select(this).attr("stroke-width","0px"),ra()}))}}function fa(t){var e=document.getElementById("structure-viewer").offsetWidth-s["a"].state.margin.right-s["a"].state.margin.left;ha=document.getElementById("structure-viewer").offsetWidth-s["a"].state.margin.right;var a=40-s["a"].state.margin.top-s["a"].state.margin.bottom+35,r=t.append("svg").attr("width",ha).attr("height",a).attr("viewBox","0 0 "+e+" "+a).attr("preserveAspectRatio","none");return r}var va,ya,ba,wa={name:"Tabs",components:{MatchingStructures:Ve,Features:ta},data:function(){return{MS:a("39b5"),FT:a("9db5")}},computed:Object(w["a"])({},Object(x["b"])(["getFeatCount","getStructCount","getMatches"])),methods:{storeHash:function(){""===window.location.hash&&s["a"].commit("setHash","#(0,0,0)"),window.location.hash.includes("(")&&s["a"].commit("setHash",window.location.hash)},renderClusters:function(){if(this.storeHash(),!document.querySelector("#allclusters div")){if(le(this.$store.state.Matches.sequences[0]),!document.querySelector(".outer_container")){for(var t=this.getMatches.clusters,e=0;e<t.length;e++)he(t[e]);ue(this.getMatches.clusters)}var a=this.getMatches.Selected_PDB.cluster_number,r=this.getMatches.clusters[a];ce(r.pdb_id,a)}},renderFeatures:function(){this.storeHash(),le(this.$store.state.Matches.sequences[0]),pa(s["a"].state.featureSets)},showPanel:function(t,e){document.querySelector("#"+t).style.display="block",document.querySelectorAll(".tab").className="tab inactive",document.querySelector("#"+e).className="tab active"},showMatches:function(){var t=this;if(S){var e=S["embededJolecule"].controller;e.clearSelectedResidues()}t.showPanel("vis","Structures"),_["hidePanel"]("featurePanel","Features"),0===document.getElementsByClassName("dimmer").length&&_["overlay"](),document.querySelector("div.dimmer").className+=" level0",document.querySelector("div.dimmer").addEventListener("click",(function(){_["hidePanels"]()}))},showFeatures:function(){var t=this;if(S){var e=S["embededJolecule"].controller;e.clearSelectedResidues()}_["hidePanel"]("vis","Structures"),t.showPanel("featurePanel","Features"),0===document.getElementsByClassName("dimmer").length&&_["overlay"](),document.querySelector("div.dimmer").className+=" level0",document.querySelector("div.dimmer").addEventListener("click",(function(){document.querySelector("a.close").click(),_["hidePanels"]()}))}},mounted:function(){var t=this;window.addEventListener("hashchange",(function(){window.location.hash.includes("Structures")&&t.showMatches(),window.location.hash.includes("Features")&&t.showFeatures()}))}},_a=wa,Sa=(a("21d9"),Object(I["a"])(_a,Gt,zt,!1,null,"6a7657ae",null)),xa=Sa.exports,Aa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rel",attrs:{id:"map"}},[a("FeatureMap",{attrs:{drawFeature:t.drawFeature}}),t.showLoader?a("mapLoader"):t._e()],1)},Ca=[],ka=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"featureMap"}})},Ia=[],Pa={name:"FeatureMap",props:["drawFeature"],data:function(){return{seqLength:0,scale:null,coverageMapsrw:0,residueColor:null}},computed:Object(w["a"])({getLoadedFeature:function(){return s["a"].state.loadedFeature}},Object(x["b"])(["getVariantResidues","getLoadedFeature","getVariantIdx","getVariant","getMatches"])),watch:{getLoadedFeature:function(){var t=this;null===t.getLoadedFeature.set?document.querySelectorAll('[id^="feature_residue_').forEach((function(t){t.remove()})):document.querySelector('[id^="feature_residue_')?(document.querySelectorAll('[id^="feature_residue_').forEach((function(t){t.remove()})),t.drawMap(t.getLoadedFeature)):t.drawMap(t.getLoadedFeature)}},methods:{drawMap:function(t){var e=this,a=null;this.setScales(),t.set.Tracks[0].forEach((function(t,r){t.start=+t.start,t.end=+t.end,e.drawFeatureResidues(t,a)})),!this.$store.getters.getIsDefaultFeature&&this.getVariantResidues&&(e.loadPopup(t),console.log("The data here is "+e.getVariantIdx+" "+e.getVariant),console.log(t))},loadPopup:function(t){var e=this,a=Object.keys(e.getVariantResidues).sort((function(t,a){return e.getVariantResidues[t].order-e.getVariantResidues[a].order})),r=a[0],n='[id^="feature_residue_'+r+'"]',i=document.querySelector(n);t.set.Tracks[0].forEach((function(t){if(e.getVariantResidues[t.start]){var a=e.getVariantResidues[t.start];s["a"].commit("setPopupTitle",t.label),s["a"].commit("setPopupText",a),s["a"].commit("setVariantIdx",0),s["a"].commit("setIsDefaultFeature",!1),s["a"].commit("setVariant",t.start),null!=i&&s["a"].commit("setPopupCoordinates",i.getBoundingClientRect())}}))},setScales:function(){this.seqLength=this.getMatches.sequences[0].length,this.scale=$t["scale"].linear().domain([1,this.seqLength]).range([1,window.innerWidth]),this.coverageMapsrw=this.scale(this.seqLength)/this.seqLength},drawFeatureResidues:function(t){for(var e=this,a="",r="",n="",i=t.start;i<=t.end;i++){var o='[id^="residue_'+i+'"]',c=document.querySelector(o),l=document.querySelector(o+"> rect");if(c.id.includes("Dark")?(r=15,n=20):(r=25,n=document.querySelector(o+"> rect").getBoundingClientRect().height),"undefined"!==c&&"undefined"!==l&&null!=c&&null!=l){var u=$t["select"]("#map > #coverageMap > g");u.append("g").attr("id","feature_residue_"+i+"_"+document.querySelector(o).id.split("_")[3]).append("rect").attr("width",e.coverageMapsrw).attr("height",n).attr("transform",(function(){var t=document.querySelector(o+"> rect").getBoundingClientRect().height;return 18===t?"translate("+(i*e.coverageMapsrw-e.coverageMapsrw)+",17)":14===t?"translate("+(i*e.coverageMapsrw-e.coverageMapsrw)+",19)":19===t?"translate("+(i*e.coverageMapsrw-e.coverageMapsrw)+",16)":"translate("+(i*e.coverageMapsrw-e.coverageMapsrw)+","+r+")"})).attr("fill",t.color).on("mouseover",(function(r){e.residueColor=$t["select"](this).style("fill"),$t["select"](this).attr("stroke","white").attr("stroke-width",1),c.id.includes("Dark")?s["a"].commit("setPopupTitle",t.label+": Dark region"):s["a"].commit("setPopupTitle",t.label),t.desc!==t.label?e.getVariantResidues[t.start]?(a=e.getVariantResidues[t.start],s["a"].commit("setPopupText",a),s["a"].commit("setVariantIdx",0),s["a"].commit("setVariant",t.start)):t.desc.length>0?(a=t.desc+" </br> ",a+="Structures with residue "+this.parentElement.id.split("_")[1]+": ",s["a"].commit("setPopupText",a),s["a"].commit("setVariant",-1),s["a"].commit("setIsDefaultFeature",!1)):s["a"].commit("setPopupText","Structures with residue "+this.parentElement.id.split("_")[2]+": "):(s["a"].commit("setPopupText","Structures with residue "+this.parentElement.id.split("_")[2]+": "),s["a"].commit("setVariant",-1)),s["a"].commit("setIsDefaultFeature",!1),s["a"].commit("setTotalPDBres",this.parentElement.id.split("_")[3]),s["a"].commit("setPopupCoordinates",this.getBoundingClientRect())})).on("mouseout",(function(){$t["select"](this).attr("stroke",e.residueColor).attr("stroke-width",0)}))}}}}},Oa=Pa,Ea=(a("9b83"),Object(I["a"])(Oa,ka,Ia,!1,null,null,null)),qa=Ea.exports,Da=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Ra=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"animated"},[a("div",{staticClass:"innerGradient"})])}],Ma={name:"mapLoader"},Va=Ma,La=(a("be77"),Object(I["a"])(Va,Da,Ra,!1,null,"6934c327",null)),Ta=La.exports,Ba=50,Na=200,ja=[61,28],Ha={name:"CoverageMap",components:{FeatureMap:qa,mapLoader:Ta},data:function(){return{seqLength:0,scale:null,coverageMapsrw:0,residueColor:null,densityScale:null,darkRegions:[],myArray:[1],coverageMapData:null,drawFeature:!1,showLoader:!0,structure:{accession:null},docFrag:null}},computed:Object(w["a"])({getLoadedFeature:function(){return s["a"].state.loadedFeature},secondaryStructure:function(){return s["a"].state.secondaryStructure},sequence:function(){return s["a"].state.structure},loader:function(){return s["a"].state.Loader}},Object(x["b"])(["getGene","getStructure","getOneAaCodes","getThreeAaCodes","getLoadedFeature","getSequences","getCoveragemapOverlay"])),mounted:function(){this.init(this.$route.params.uniprotAccession)},methods:{updateUI:function(){var t=this;if(!document.querySelector("#map > #coverageMap")){t.drawMap(t.coverageMapData),document.querySelector("#map").appendChild(t.docFrag);var e=Object(A["c"])(t.getStructure.pdb,t.getStructure.chain),a=s["a"].state.Matches.clusters[e.cluster].members[e.member];null!==t.getLoadedFeature.set?(t.setStructFeatmap(a),t.drawFeature=!0):t.selectStructmap(a),s["a"].commit("setCoverageMap",!0),s["a"].commit("setCoveragemapOverlay",!1)}},init:function(t){var e=this;s["a"].commit("setCoveragemapOverlay",!0);var a="".concat(window.BACKEND,"/getCoverageMap"),r={selector:[t]};X()({method:"get",url:a,params:r}).then((function(t){console.log(t.data),e.coverageMapData=t.data}))},drawMap:function(t){var e=this;va=e.renderSVG(),va.append("rect").attr("id","selection"),this.drawLine(va),this.setScales(t),this.drawDarkRegions(t),t.secondaryStructures.forEach((function(a){a.start=+a.start,a.end=+a.end,e.drawResidues(a,t)}))},setScales:function(t){var e=this;this.seqLength=t.seqLength,this.scale=$t["scale"].linear().domain([1,this.seqLength]).range([1,window.innerWidth]),this.coverageMapsrw=this.scale(t.seqLength)/t.seqLength;var a=Math.max.apply(Math,Object(Qt["a"])(t.densityMap));e.densityScale=a<=Na?$t["scale"].linear().domain([Math.log(1),Math.log(Na)]).range(ja):$t["scale"].linear().domain([Math.log(1),Math.log(Math.max.apply(Math,Object(Qt["a"])(t.densityMap)))]).range(ja)},drawLine:function(t){t.append("line").style("stroke","#434343").attr("x1",1).attr("y1",26).attr("x2",window.innerWidth).attr("y2",26)},renderSVG:function(){this.docFrag=document.createDocumentFragment();var t=$t["select"](this.docFrag).append("svg").attr("id","coverageMap").attr("height",Ba).attr("width","100%").attr("viewBox","0, 0, "+window.innerWidth+","+Ba).attr("preserveAspectRatio","none"),e=t.append("g");return e},drawResidues:function(t,e){var a=va,r="",n="",i=this;if("SHEET"===t.Type)var o=18,c=17,l="sheet";else"COIL"===t.Type?(o=14,c=19,l="coil"):(o=19,c=16,l="helix");for(var u=t.start;u<=t.end;u++){var d="hsl(0, 0%,"+i.densityScale(Math.log(e.densityMap[u-1]))+"%)";a.append("g").attr("id","residue_"+u+"_"+t.Type+"_"+e.densityMap[u-1]).append("rect").attr("transform","translate("+(u*i.coverageMapsrw-i.coverageMapsrw)+","+c+")").attr("width",(function(){return i.coverageMapsrw<.5?i.coverageMapsrw+.25:i.coverageMapsrw})).attr("height",o).attr("fill",d).attr("class",l).attr("stroke-width",1).on("mouseover",(function(t){i.residueColor=$t["select"](this).style("fill"),$t["select"](this).attr("stroke","white").attr("stroke-width",1);var e=this.parentElement.id.split("_")[1];s["a"].commit("setRes",e);var a=i.getSequences[0].sequence[e-1],o=i.getOneAaCodes.indexOf(a),c=i.getThreeAaCodes[o];if(n='<span style="font-weight: 700;">'+i.getGene+"</span> sequence: "+c+"–"+e,this.parentElement.id.includes("active")){var l=S["joleculeAlignment"],u=S["embededJolecule"].controller,d=l.mapSeqResToPdbResOfChain(0,e,i.getStructure.chain),h=u.soup.findResidueIndices(0,d[1],d[2]),p=u.soup.getResidueProxy().load(h).resType;p=p.substr(0,1)+p.substr(1).toLowerCase(),r=i.getStructure.pdb+"-"+i.getStructure.chain+" structure: "+p+"-"+d[2]+"</br> Structures with residue "+this.parentElement.id.split("_")[1]+": "}else r="Structures with residue "+this.parentElement.id.split("_")[1]+": ";s["a"].commit("setPopupTitle",n),s["a"].commit("setPopupText",r),s["a"].commit("setTotalPDBres",this.parentElement.id.split("_")[3]),s["a"].commit("setPopupCoordinates",this.getBoundingClientRect())})).on("mouseout",(function(){$t["select"](this).attr("stroke",i.residueColor).attr("stroke-width",0)}))}},selectStructmap:function(t){var e=this;$t["selectAll"]('[id^="residue_"')[0].map((function(t,a){var r=t.id.split("_")[3];t.id.includes("active")&&(t.id=t.id.split("_active")[0]),$t["select"](t).select("rect").attr("fill","hsl(0, 0%,"+e.densityScale(Math.log(r))+"%)")}));var a=s["a"].getters.getSecondaryStructure[0],r=t.seq_start[0],n=t.seq_end[t.seq_start.length-1],i=(n-r)*e.coverageMapsrw+e.coverageMapsrw;document.querySelector("#map > #coverageMap > rect")&&document.querySelector("#map > #coverageMap > rect").remove(),$t["select"]("#map > #coverageMap > g").select("rect#selection").attr("width",i).attr("height",30).attr("transform","translate("+(r*e.coverageMapsrw-e.coverageMapsrw)+",11)").attr("fill","white").attr("stroke","#434343").attr("stroke-width",1).attr("rx",6).attr("ry",6),a.map((function(t){if(t.end)var a=t.start,r=t.end,n=t.type;else a=t.split("\n")[0].split(":")[1].split("-")[0],r=t.split("\n")[0].split(":")[1].split("-")[1],n=t.split("\n")[0].split(":")[0];for(var s=a;s<=r;s++){var i='[id^="residue_'+s+'_"]';if($t["select"](i+"> rect").attr({fill:e.getStructureColor(n)}),document.querySelector(i))document.querySelector(i).id=document.querySelector(i).id+"_active";else{var o={Type:"COIL"};o.start=s,o.end=s,e.drawResidues(o,e.coverageMapData),document.querySelector(i).id=document.querySelector(i).id+"_active"}}}))},setStructFeatmap:function(t){var e=this;$t["selectAll"]('[id^="residue_"')[0].map((function(t,a){var r=t.id.split("_")[3];$t["select"](t).select("rect").attr("fill","hsl(0, 0%,"+e.densityScale(Math.log(r))+"%)")}));var a=s["a"].getters.getSecondaryStructure[0],r=t.seq_start[0],n=t.seq_end[t.seq_start.length-1],i=(n-r)*e.coverageMapsrw+e.coverageMapsrw;document.querySelector("#map > #coverageMap > rect")&&document.querySelector("#map > #coverageMap > rect").remove(),$t["select"]("#map > #coverageMap > g > #selection").attr("width",i).attr("height",30).attr("transform","translate("+(r*e.coverageMapsrw-e.coverageMapsrw)+",11)").attr("fill","white").attr("stroke","#434343").attr("stroke-width",1).attr("rx",6).attr("ry",6),a.map((function(t){if(t.end)var e=t.start,a=t.end;else e=t.split("\n")[0].split(":")[1].split("-")[0],a=t.split("\n")[0].split(":")[1].split("-")[1];for(var r=e;r<=a;r++){var n='[id^="residue_'+r+'_"]';$t["select"](n+"> rect").attr({fill:"#cccccc"})}}))},getStructureColor:function(t){return"SHEET"===t?"#f6c719":"COIL"===t?"#6f9e52":"#6491b6"},drawDarkRegions:function(t){var e=[],a=this,r=va;return t.densityMap.forEach((function(t,e){if(0===t){var n=e+1;r.append("g").attr("id","residue_"+n+"_Dark_0").append("rect").attr("transform","translate("+(n*a.coverageMapsrw-a.coverageMapsrw)+",14)").attr("width",(function(){return a.coverageMapsrw<.5?a.coverageMapsrw+.25:a.coverageMapsrw})).attr("height",30).attr("fill","#434343").attr("opacity",0).attr("stroke-width",1).on("mouseover",(function(t){a.residueColor=$t["select"](this).style("fill"),$t["select"](this).attr("stroke","white").attr("stroke-width",1),s["a"].commit("setPopupTitle","Residue "+this.parentElement.id.split("_")[1]+" : Dark region"),s["a"].commit("setPopupText","Structures with residue "+this.parentElement.id.split("_")[1]+": "),s["a"].commit("setTotalPDBres",this.parentElement.id.split("_")[3]),s["a"].commit("setPopupCoordinates",this.getBoundingClientRect())})).on("mouseout",(function(){s["a"].commit("setPopupCoordinates",0),$t["select"](this).attr("stroke",a.residueColor).attr("stroke-width",0)}))}})),e}},watch:{getCoveragemapOverlay:function(t){this.showLoader=t},getLoadedFeature:function(t){var e=this,a=Object(A["c"])(e.getStructure.pdb,e.getStructure.chain),r=s["a"].state.Matches.clusters[a.cluster].members[a.member];null===t.set&&(e.drawFeature=!1),document.querySelector("#map > #coverageMap")?(e.setStructFeatmap(r),e.drawFeature=!0):e.updateUI()},secondaryStructure:function(){var t=this;if(document.querySelector("#map > #coverageMap")){var e=Object(A["c"])(t.getStructure.pdb,t.getStructure.chain),a=s["a"].state.Matches.clusters[e.cluster].members[e.member];t.selectStructmap(a)}else s["a"].state.pdbIndex.member&&t.updateUI()},sequence:function(t,e){var a=this;if(e.accession!==t.accession&&null!==e.accession){document.querySelector("#map > #coverageMap").remove(),a.init(t.accession);var r={selector:[t.accession],selectPDB:t.pdb,selectChain:t.chain},n="".concat(window.BACKEND,"/get_3D_alignment");X()({method:"get",url:n,params:r}).then((function(t){var e=t.data;s["a"].commit("setSecondaryStructure",e.secondary_structure)}))}},loader:function(t){var e=this;if(!t){var a=new M["a"](S["embededJolecule"]);a.addEventListener("viewcommit",(function(){document.querySelector("#map > #coverageMap")||e.updateUI()}))}}}},Fa=Ha,Ua=(a("cba8"),Object(I["a"])(Fa,Aa,Ca,!1,null,"621fa25c",null)),Ga=Ua.exports,za=a("8ac5"),Za=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.data.error?a("div",{staticClass:"ErrorPanel overlay level3",attrs:{id:"AboutError"}},[a("a",{staticClass:"close",attrs:{href:"#"},on:{click:t.loadLastSuccess}}),a("div",[a("p",{staticClass:"thetitle"},[t._v(t._s(t.data.error))]),a("p",{staticClass:"intro1"},[t._v(t._s(t.data.errorMsg)+" "),t.data.errorMsg?a("br"):t._e(),t._v(" "),t.data.errorMsg?a("br"):t._e(),t._v(" Press 'Report Issue' to tell the Aquaria team, or press 'OK' to return to previous structure.")]),a("div",[a("md-button",{staticClass:"md-raised md-primary",attrs:{href:t.lastURL}},[t._v("OK")]),a("md-button",{staticClass:"md-raised md-primary",attrs:{href:t.issuesURL,target:"_blank"}},[t._v("Report Issue")])],1)])]):t._e()},Ya=[],Wa={name:"Errors",data:function(){return{issues:"",title:"",changes:"https://github.com/aqclient/dev.aqclient.github.io/issues/new?labels=enhancement",logo:a("3198")}},computed:{data:function(){return{message:s["a"].state.message,error:s["a"].state.error,errorMsg:s["a"].state.errorMsg}},issuesURL:function(){return'https://github.com/aqclient/dev.aqclient.github.io/issues/new?title=Problem with this page&labels=bug&body=<a href="'+encodeURIComponent(window.location.href)+'">'+this.data.error+"</a>"},pageUrl:function(){return window.location.href},lastURL:function(){return window.location.origin}},methods:{loadLastSuccess:function(){window.location.pathname=localStorage.getItem("LastSuccess")?localStorage.getItem("LastSuccess"):"/P04637"}}},Ja=Wa,Qa=(a("715b"),Object(I["a"])(Ja,Za,Ya,!1,null,"72919d45",null)),$a=Qa.exports,Xa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"HelpPanel hide dialouge-window overlay level7",attrs:{id:"UserHelp"}},[a("a",{staticClass:"close",attrs:{href:"#"},on:{click:t.closeHelp}}),a("div",{staticClass:"fill",attrs:{id:"fullwindow-video"}},t._l(t.videos,(function(e){return a("youtube",{key:e.id,ref:"youtube",refInFor:!0,staticClass:"hide",attrs:{id:e.id,"video-id":e.id},on:{paused:function(e){return t.paused(e)},ended:function(e){return t.finished(e)}}})})),1),a("div",{attrs:{id:"contents"}},[a("p",{staticClass:"thetitle"},[t._v(t._s(t.data.title))]),a("p",{staticClass:"intro"},[t._v("Watch tutorial videos to get started.")]),a("p",{staticClass:"intro"},[t._v("Skip watching tutorial videos and start using Aquaria.")]),t.data.newUser?t._e():a("Playlist",{attrs:{playlist:t.videos}}),t.data.newUser?a("div",[a("youtube",{ref:"youtube",attrs:{id:"intro-video","video-id":"FAQ3yVGYSzY"},on:{playing:function(e){return t.playing(e)},paused:function(e){return t.paused(e)},ended:function(e){return t.finished(e)}}})],1):t._e(),a("a",{attrs:{href:"#",id:"skip"},on:{click:t.closeHelp}},[t._v("Skip > ")])],1)])},Ka=[],tr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"playlists"}},t._l(t.playlist,(function(e){return a("span",{key:e.id,attrs:{id:e.id},on:{click:function(a){return t.play(e.id)}}},[a("div",{staticClass:"thumbnail-container"},[a("img",{attrs:{src:"https://img.youtube.com/vi/"+e.id+"/0.jpg"}}),a("button",{staticClass:"btn"},[t._v("▶")])]),a("p",[t._v(t._s(e.title))])])})),0)},er=[],ar={name:"Playlist",props:["playlist"],methods:{play:function(t){document.querySelector("#contents").className=" hide",document.getElementById(t).className+=" show",document.getElementById("UserHelp").classList.remove("overlay"),document.getElementById("UserHelp").classList.remove("level7"),document.getElementById("UserHelp").classList.remove("dialouge-window"),document.getElementById("UserHelp").className+=" fullwindow";for(var e=0;e<this.$parent.$children.length;e++)if(this.$parent.$children[e].$attrs.id===t)var a=e;this.$parent.$children[a].player.playVideo()}}},rr=ar,nr=(a("4d26"),Object(I["a"])(rr,tr,er,!1,null,null,null)),sr=nr.exports,ir={name:"UserHelp",components:{Playlist:sr},data:function(){return{videos:[{id:"FAQ3yVGYSzY",title:"Introduction to Aquaria"},{id:"UZNEmPOaVrA",title:"How to Calculate Distances"}]}},computed:{data:function(){return{title:s["a"].state.helpTitle,newUser:s["a"].state.newUser}}},methods:{closeHelp:function(){var t=this;if(document.querySelector("iframe.show")){var e=document.querySelector("iframe.show").id;document.getElementById("contents").classList.remove("hide"),document.getElementById(e).classList.remove("show"),document.getElementById("UserHelp").className+=" dialouge-window",document.getElementById("UserHelp").className+=" overlay",document.getElementById("UserHelp").className+=" level7",document.getElementById("UserHelp").classList.remove("fullwindow");var a={h:{}};a.h.id=e,t.paused(a)}else document.getElementById("UserHelp").classList.remove("show"),document.getElementById("UserHelp").className+=" hide",_["RemoveOverlay"](),document.querySelector("#helpbtn").classList.contains("active")&&t.toggleActive(document.querySelector("#helpbtn"))},toggleActive:function(t){"lnk active"===t.className?t.className="lnk":t.className="lnk active"},getIndex:function(t){for(var e=0;e<this.$refs.youtube.length;e++)if(this.$refs.youtube[e].$attrs.id===t)return e},playing:function(t){if(ya=t.h.id,this.$refs.youtube.length)ba=this.getIndex(ya),this.$refs.youtube[ba].player.playVideo();else{this.$refs.youtube.player.playVideo();var e=document.querySelector("#intro-video"),a=e.requestFullScreen||e.mozRequestFullScreen||e.webkitRequestFullScreen;a&&a.bind(e)()}},paused:function(t){ya=t.h.id,document.querySelector("iframe.active")?this.closeHelp():(this.$refs.youtube.length?(ba=this.getIndex(ya),this.$refs.youtube[ba].player.pauseVideo()):this.$refs.youtube.player.pauseVideo(),(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)&&document.exitFullscreen())},finished:function(t){ya=t.h.id,this.$refs.youtube.length?(ba=this.getIndex(ya),this.$refs.youtube[ba].player.stopVideo()):this.$refs.youtube.player.stopVideo(),document.querySelector("iframe.active")&&document.querySelector("#UserHelp a.close").click(),document.exitFullscreen(),this.closeHelp()}}},or=ir,cr=(a("7f5f"),Object(I["a"])(or,Xa,Ka,!1,null,null,null)),lr=cr.exports,ur=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loader?a("div",{attrs:{id:"waitingFrame"}},[a("div",{attrs:{id:"waitinghtml"}},[a("img",{attrs:{src:t.overlay}}),a("p",{attrs:{id:"appletMessage"}},[t._v(" "+t._s(t.loaderMsg)+" ")])])]):t._e()},dr=[],hr={name:"Loader",data:function(){return{overlay:a("8673")}},computed:{loader:function(){return s["a"].state.Loader},loaderMsg:function(){return s["a"].state.LoaderMsg}}},pr=hr,gr=(a("7bd5"),Object(I["a"])(pr,ur,dr,!1,null,"cb681734",null)),mr=gr.exports,fr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"level4",attrs:{id:"popupshell"}},[a("div",{staticClass:"level4",style:{visibility:t.data.popupTitle?"visible":"hidden"},attrs:{id:"popupbody"}},[a("div",{attrs:{id:"popupheader"},on:{mousedown:function(e){return t.dragMouseDown(e)}}},[a("span",{staticClass:"loadedPin",attrs:{id:"loadedPin"},on:{click:function(e){return t.togglePinBehaviour()}}}),a("span",{domProps:{innerHTML:t._s(t.getPopupTitle)}}),a("span",{staticClass:"x",attrs:{id:"x_close"},on:{click:t.hidePopup}})]),t.getPopupText?a("div",{attrs:{id:"content"}},[t.isVariant?a("div",{staticClass:"aaLightBg"},[t.defaultDesc?a("p",{attrs:{id:"spanDefaultDesc"}},[t._v(" "+t._s(t.defaultDesc)+" ")]):t._e(),t._l(t.oneAaCodes,(function(e){return a("div",{key:e,style:{display:e===t.variant?"block":"none"},attrs:{id:"divVarInfo_"+e}},[t._l(t.getAaDataAsArr(e),(function(e){return a("expandable-text-line",{key:e,attrs:{"use-click":""},domProps:{innerHTML:t._s(e+".")}})})),a("i",[t._v("Structures with "+t._s(t.getOldAa())+t._s(t.getVarDisplay())+t._s(e)+":")]),t._v(" "),a("span",{class:t.getIsShownVar(t.variant),on:{click:function(a){return t.showTreeView(a,e)}}},[t._v(t._s(t.getPdbCount(e)))])],2)})),a("hr",{staticClass:"anAaHr",attrs:{id:"anAaHr",hidden:t.isHrHidden()}}),a("div",{attrs:{id:"divPosInfo"}},[a("span",{staticClass:"weight700",domProps:{innerHTML:t._s(t.getResInfo())}}),a("br"),t._l(t.getPosInfoDataAsArr(),(function(e,r){return a("span",{key:r},[a("expandable-text-line",{attrs:{"use-click":""}},[a("i",[a("span",{domProps:{innerHTML:t._s(r)}}),t._v(": ")]),t._l(e,(function(e){return a("span",{key:e,domProps:{innerHTML:t._s(e+". ")}})}))],2)],1)})),a("i",[t._v("Structures with residue "+t._s(t.getVariant)+": ")]),a("span",{class:t.getIsShownRes(),on:{click:function(e){return t.showTreeView(e)}}},[t._v(t._s(t.getTotalPdbCount))])],2)],2):t._e(),t.isVariant||t.getInfoPopup?t._e():a("div",{staticClass:"aaLightBg"},[a("i",{domProps:{innerHTML:t._s(t.getPopupText)}}),t.getIsDefaultFeature?t._e():a("span",{class:t.getTotalPdbCount>0?"hasStruct":"noStruct",on:{click:function(e){t.getTotalPdbCount>0&&t.showTreeView(e,null,t.getPopupText.replace(/\D/g,""))}}},[t._v(" "+t._s(t.getTotalPdbCount)+" ")])])]):t._e(),a("div",{staticClass:"btnsDiv",style:{display:t.isVariant?"block":"none"}},[a("span",[t._v("See also:")]),t._v(" "),a("span",{staticClass:"pAaColor"},[t._v(" "+t._s(t.getOldAa())+" → ")]),t._l(t.oneAaCodes,(function(e){return a("button",{key:e,class:t.getIfBoldInfoPres(e),attrs:{id:"btnVarInfo_"+e},on:{click:function(a){return t.highlightAa(e)}}},[t._v(t._s(e))])}))],2)]),a("TreeView",{directives:[{name:"show",rawName:"v-show",value:t.showTree,expression:"showTree"}],staticClass:"level5",attrs:{id:"treeView",treeReady:t.prop,count:t.count,coordinates:t.treeCoordinates,parentElem:t.parentElem}}),a("NodeLoader",{directives:[{name:"show",rawName:"v-show",value:t.showLoader,expression:"showLoader"}],attrs:{coordinates:t.treeCoordinates,change:t.change}}),a("img",{staticClass:"show",style:{visibility:t.data.popupTitle?"visible":"hidden"},attrs:{src:t.popupTail,id:"popupTail"}})],1)},vr=[],yr={name:"PopUp",components:{TreeView:Ce,ExpandableTextLine:vt["a"],NodeLoader:qe},watch:{popupCoordinates:function(t){var e=this;this.setDefault(),null!==t||0!==t?("object"===Object(Ne["a"])(s["a"].state.popupText)?(e.handleVariantPopup(),e.togglePinBehaviour()):e.isVariant=!1,this.PopupPos=t):e.hidePopup()}},data:function(){return{popupTail:a("4c7a"),oneAaCodes:["A","C","D","E","F","G","H","I","K","L","M","N","P","Q","R","S","T","V","W","Y"],threeAaCodes:["Ala","Cys","Asp","Glu","Phe","Gly","His","Ile","Lys","Leu","Met","Asn","Pro","Gln","Arg","Ser","Thr","Val","Trp","Tyr"],isVariant:!1,variant:null,defaultDesc:null,treeCoordinates:{},change:0,showTree:!1,isShowTreeViewClicked:!1,prop:null,showLoader:!1,count:0,PopupPos:null,pos:[0,0,0,0],hasVariant:!1,hasResidue:!1,parentElem:"#popupshell"}},computed:Object(w["a"])(Object(w["a"])({popupCoordinates:function(){return s["a"].state.popupCoordinates},data:function(){return{variantStructs:s["a"].state.variantStructs,variantResidues:s["a"].state.variantResidues,popupTitle:s["a"].state.popupTitle,popupText:s["a"].state.popupText,residue:s["a"].state.residue,popupCoordinates:s["a"].state.popupCoordinates}}},Object(x["b"])(["getGene","getTotalPDBres","getVariant","getVariantStructs","getVariantResidues","getPopupTitle","getPopupText","getServersDone","getVariantIdx","getMatches","getStructure","getInfoPopup","getIsDefaultFeature"])),{},{getTotalPdbCount:function(){var t=this;if(t.isVariant){for(var e=0,a=0;a<t.oneAaCodes.length;a++)t.getVariantStructs&&t.getVariant&&Object.hasOwnProperty.call(t.getVariantStructs,t.getVariant)&&Object.hasOwnProperty.call(t.getVariantStructs[t.getVariant],t.oneAaCodes[a])&&Object.hasOwnProperty.call(t.getVariantStructs[t.getVariant][t.oneAaCodes[a]],"pdbs")&&(e+=t.getVariantStructs[t.getVariant][t.oneAaCodes[a]].pdbs.length);return e}return t.getTotalPDBres}}),created:function(){var t=this;window.addEventListener("click",(function(e){if(!t.$el.contains(e.target)&&e.target.parentElement&&t.getPopupTitle&&!e.target.parentElement.id.includes("tree")){var a=document.getElementById("loadedPin");if(a.classList.contains("loadedPin")){var r=document.getElementById("x_close");r.click()}}}))},methods:{setPopupPos:function(t){this.getPopupTitle.includes("Dark")&&(t.y=t.y+20);var e=t.x-document.querySelector("#popupTail").getBoundingClientRect().width/2+t.width/2;document.querySelector("#popupTail").style.left=e+"px",t.height<=2?document.querySelector("#popupshell").style.top=t.y-t.height-document.querySelector("#popupTail").getBoundingClientRect().height+"px":t.height>=18?document.querySelector("#popupshell").style.top=t.y-t.height+5+"px":document.querySelector("#popupshell").style.top=t.y-t.height+"px",document.querySelector("#popupshell").style.left=e-10+"px";var a=document.querySelector("#popupshell").getBoundingClientRect().x+document.querySelector("#popupbody").getBoundingClientRect().width;a>window.innerWidth&&(document.querySelector("#popupshell").style.left=window.innerWidth-document.querySelector("#popupbody").getBoundingClientRect().width+7+"px"),document.querySelector("#popupbody").getBoundingClientRect().x<0&&(document.querySelector("#popupshell").style.left="-10px")},hidePopup:function(){var t=this;this.isShowTreeViewClicked?this.isShowTreeViewClicked=!1:s["a"].commit("setPopupTitle",""),this.getVariantStructs&&t.resetToInitVar()},setDefault:function(){var t=document.getElementById("loadedPin");t.classList.contains("loadedPin_active")&&(t.classList.remove("loadedPin_active"),t.classList.add("loadedPin"));var e=document.getElementById("popupTail");e.classList.contains("hide")&&(e.classList.remove("hide"),e.classList.add("show")),document.getElementById("popupshell").classList.remove("fade")},handleVariantPopup:function(){this.isVariant=!0,this.variant=this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase(),this.defaultDesc=this.getDefaultDesc(),this.handleInitAa()},showTreeView:function(t,e,a){this.isShowTreeViewClicked=!0;var r=this,n=t.srcElement.getBoundingClientRect();if(r.treeCoordinates.clientX=n.left,r.treeCoordinates.clientY=n.top,r.treeCoordinates.width=n.width,r.treeCoordinates.height=n.height,r.change=r.change+1,r.showLoader=!0,r.getVariantStructs&&Object.hasOwnProperty.call(r.getVariantStructs,r.getVariant)){r.count=e?r.getPdbCount(e):r.getTotalPdbCount;var s="".concat(window.BACKEND,"/secondaryClusteringByResidue"),i={};i.selector=[r.getStructure.accession],i.sortedKeys=a?[parseInt(a)]:[r.getVariant],e&&(i.aaCode=e),X()({method:"get",url:s,params:i}).then((function(t){console.log(t.data),r.showTree=!0,r.prop=t.data}))}else{s="".concat(window.BACKEND,"/secondaryClusteringByResidue"),r.count=r.getTotalPdbCount,i={},i.selector=[r.getStructure.accession];var o=t.srcElement.parentElement.innerText.split(":");o.length>2?i.sortedKeys=[parseInt(o[1].split("residue ")[1])]:i.sortedKeys=[parseInt(o[0].split("residue ")[1])],X()({method:"get",url:s,params:i}).then((function(t){console.log(t.data),r.showTree=!0,r.prop=t.data}))}return 0},getOldAa:function(){return Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"oldAa")?this.getVariantResidues[this.getVariant].oldAa:""},highlightAa:function(t){this.variant=t.toUpperCase();for(var e=0;e<this.oneAaCodes.length;e++)document.getElementById("btnVarInfo_"+this.oneAaCodes[e]).classList.remove("selCol");if(document.getElementById("btnVarInfo_"+t.toUpperCase()).classList+=" selCol",document.querySelector("#varSpe_toRep")&&(document.querySelector("#varSpe_toRep").innerText=t),document.querySelector("#newAa")){var a=this.oneAaCodes.indexOf(t);document.querySelector("#newAa").innerText=this.threeAaCodes[a]}},getIfBoldInfoPres:function(t){var e=!1;if(Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],t))for(var a=0;a<this.getVariantResidues[this.getVariant][t].length;a++)this.getVariantStructs&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],t)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][t],"pdbs")&&this.getVariantStructs[this.getVariant][t].pdbs.length>0&&(e=!0);if(this.getVariantResidues&&this.getVariant>0)return!0===e?t.toUpperCase().includes(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase())?"btnAaBold_b selCol":"btnAaBold_b":t.toUpperCase().includes(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase())?"btnAaBold selCol":"btnAaBold"},getAaDataAsArr:function(t){var e=[];if(Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],t)){for(var a=0;a<this.getVariantResidues[this.getVariant][t].length;a++);return this.getVariantResidues[this.getVariant][t]}return e},resetToInitVar:function(){Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"theOrigFeatStr")&&this.getVariantIdx>-1&&(document.getElementById("urlVariant").innerHTML=this.getVariantResidues[this.getVariant].theOrigFeatStr[this.getVariantIdx]),Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"consequent")&&this.getVariantIdx>-1&&(document.getElementById("consInfo").innerHTML=this.getVariantResidues[this.getVariant].consequent[this.getVariantIdx]),this.handleInitAa(),document.getElementById("spanDefaultDesc")&&(document.getElementById("spanDefaultDesc").hidden=!1),!0===this.isHrHidden()&&(document.getElementById("anAaHr").hidden=!0)},getVarDisplay:function(){return"string"===typeof this.getVariant&&this.getVariant.match("-")?this.getVariant.split("-")[0]:this.getVariant},getIsShownVar:function(t){if(this.getMatches&&Object.hasOwnProperty.call(this.getMatches,"Selected_PDB")&&Object.hasOwnProperty.call(this.getMatches.Selected_PDB,"pdb_id")&&Object.hasOwnProperty.call(this.getMatches.Selected_PDB,"pdb_chain")){var e=this.getMatches.Selected_PDB.pdb_id+":"+this.getMatches.Selected_PDB.pdb_chain;return this.getVariant&&this.getVariantStructs&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],t)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][t],"pdbs")&&this.getVariantStructs[this.getVariant][t].pdbs.includes(e)?"selCol_padded":this.getVariant&&this.getVariantStructs&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],t)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][t],"pdbs")&&!this.getVariantStructs[this.getVariant][t].pdbs.includes(e)?"noSelCol_padded":""}},getIsShownRes:function(){return console.log("The variant structs is "),console.log(this.getVariantStructs),console.log(this.getMatches),this.getVariantStructs&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],"isShown")&&!0===this.getVariantStructs[this.getVariant].isShown?"selCol_padded":this.getVariantStructs&&this.getVariant>-1&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],"isShown")&&!1===this.getVariantStructs[this.getVariant].isShown||0!==this.getTotalPdbCount?"noSelCol_padded":""},getPdbCount:function(t){return this.getVariantStructs&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],t)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][t],"pdbs")?this.getVariantStructs[this.getVariant][t].pdbs.length:0},isHrHidden:function(){var t=this.getDefaultDesc(),e=!1;return Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"newAas")&&this.getVariantIdx>-1&&this.oneAaCodes.includes(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase())&&(e=!0),""===t&&!1===e},getDefaultDesc:function(){return this.getVariant&&this.getVariantResidues&&Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"defaultDesc")&&this.getVariantIdx>-1?this.getVariantResidues[this.getVariant].defaultDesc[this.getVariantIdx]:""},getPosInfoDataAsArr:function(){return Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"positionInfo")?this.getVariantResidues[this.getVariant].positionInfo:[]},handleInitAa:function(){var t=this;if(console.log("handleInitAa runs "),console.log(this.getVariantIdx),Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"newAas")&&this.getVariantIdx>-1&&this.oneAaCodes.includes(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase()))t.highlightAa(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase());else{this.getOldAa();for(var e=0;e<this.oneAaCodes.length;e++){var a=document.getElementById("divVarInfo_"+this.oneAaCodes[e]);"undefined"!==typeof a&&null!==a&&(document.getElementById("divVarInfo_"+this.oneAaCodes[e]).hidden=!0,document.getElementById("btnVarInfo_"+this.oneAaCodes[e]).classList.remove("selCol")),this.oneAaCodes[e]}t.updateSpanAa("")}},updateSpanAa:function(t){if(console.log("Value to display is "+t+this.getVariantIdx),document.getElementById("span_missenseHeading"))if(this.getVariantResidues&&Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"isOne")&&this.getVariantIdx>-1&&!0===this.getVariantResidues[this.getVariant].isOne[this.getVariantIdx]){var e=this.oneAaCodes.indexOf(t);document.getElementById("newAa").innerHTML=-1!==e?this.threeAaCodes[e]:""}else document.getElementById("newAa").innerHTML=t},togglePinBehaviour:function(){var t=document.getElementById("loadedPin");t.classList.contains("loadedPin_active")?(t.classList.remove("loadedPin_active"),t.classList.add("loadedPin")):t.classList.contains("loadedPin")&&(t.classList.remove("loadedPin"),t.classList.add("loadedPin_active"))},dragMouseDown:function(t){t=t||window.event,t.preventDefault(),this.pos[2]=t.clientX,this.pos[3]=t.clientY,document.onmouseup=this.closeDragElement,document.onmousemove=this.elementDrag},elementDrag:function(t){t=t||window.event,t.preventDefault();var e=document.getElementById("popupshell");this.pos[0]=this.pos[2]-t.clientX,this.pos[1]=this.pos[3]-t.clientY,this.pos[2]=t.clientX,this.pos[3]=t.clientY,e.style.top=e.offsetTop-this.pos[1]+"px",e.style.left=e.offsetLeft-this.pos[0]+"px";var a=document.getElementById("popupTail");a.classList.contains("show")&&(a.classList.remove("show"),a.classList.add("hide"))},closeDragElement:function(){document.onmouseup=null,document.onmousemove=null},getResInfo:function(){var t=S["joleculeAlignment"],e=S["embededJolecule"].controller,a=t.mapSeqResToPdbResOfChain(0,this.getVariant,this.getStructure.chain);if(a){var r=e.soup.findResidueIndices(0,a[1],a[2]),n=e.soup.getResidueProxy().load(r).resType;return n=n.substr(0,1)+n.substr(1).toLowerCase(),this.getGene+" residue "+this.getVariant+'<span style="font-weight: 400; color: #a6a5a6;"> ('+this.getStructure.pdb+"-"+this.getStructure.chain+" residue "+n+"-"+a[2]+")"}return document.querySelector('[id^="residue_'+this.getVariant)?this.getGene+" residue "+this.getVariant+'<span style="font-weight: 400; color: #a6a5a6;">':this.getGene+" residue "+this.getVariant+'<span style="font-weight: 400; color: #a6a5a6;"> ( Dark region )'}},updated:function(){null!==this.PopupPos&&this.setPopupPos(this.PopupPos)}},br=yr,wr=(a("62a6"),a("05b9"),Object(I["a"])(br,fr,vr,!1,null,"3a6de90a",null)),_r=wr.exports,Sr=a("5e83"),xr={name:"Wrapper",components:{GdprConsentModal:Sr["a"],Header:F,Sequence:Ct,AboutAlignment:qt,AboutPdb:Tt,StructureViewer:Ut,Tabs:xa,CoverageMap:Ga,PopUp:_r,AboutAquaria:za["a"],Errors:$a,UserHelp:lr,Loader:mr},props:["urlRequest"],computed:{data:function(){return{hash:s["a"].state.hash,arrayOfVideos:["https://youtu.be/FAQ3yVGYSzY?list=PLsGaleFn8YydVFkxDhOvHHE5NoTsl6D1e","https://www.youtube.com/watch?v=UZNEmPOaVrA&list=PLsGaleFn8YydVFkxDhOvHHE5NoTsl6D1e&index=2"]}}},methods:{closeHelp:function(){var t=this;document.getElementById("UserHelp").classList.remove("show"),document.getElementById("UserHelp").className+=" hide",document.querySelector(".dimmer").style.display="none",document.querySelector("#helpbtn").classList.contains("active")&&(_["RemoveOverlay"](),t.toggleActive(document.querySelector("#helpbtn")))},checkPhone:function(){var t=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(!navigator.platform)return!1;while(t.length)if(navigator.platform===t.pop()||screen.width>=300&&screen.width<=600)return!0},inspectHeight:function(){document.querySelector("#heightinspector").innerHTML="reset";var t=window.outerHeight-window.innerHeight;document.querySelector("#heightinspector").innerHTML="HO:"+window.outerHeight+", hDiff:"+t+", scroll: "+window.scrollY+" bodyHeight: "+document.body.scrollHeight},dismissPanel:function(){document.querySelector("#scrim").className="hide",this.$store.commit("setScrim",!1)},toggleActive:function(t){"lnk active"===t.className&&(t.className="lnk")}},mounted:function(){Object(S["initialisePanel3d"])(),window.scrollBy(0,100),A["f"]([this.$props.urlRequest.uniprotAccession],this.$props.urlRequest.pdbID,this.$props.urlRequest.chain),window.addEventListener("resize",(function(){window.scrollBy(0,100),document.querySelectorAll("#vis > .ruler").forEach((function(t){return t.remove()})),document.querySelectorAll("#vis > #allclusters .outer_container").forEach((function(t){return t.remove()})),de();var t=window.outerHeight-window.innerHeight;document.querySelector("#heightinspector").innerHTML="HO:"+window.outerHeight+", hDiff:"+t+", scroll: "+window.scrollY+" bodyHeight: "+document.body.scrollHeight})),setTimeout((function(){document.querySelector(".matrixLoading")&&(document.querySelector(".matrixLoading").style.visibility="hidden",document.querySelector(".matrixLoading").style.display="none")}),1500)},updated:function(){}},Ar=xr,Cr=(a("8f89"),Object(I["a"])(Ar,r,n,!1,null,null,null));e["default"]=Cr.exports},ae7d:function(t,e,a){t.exports=a.p+"img/node.cac6f4f6.gif"},b1e2:function(t,e,a){},b335:function(t,e,a){t.exports=a.p+"img/aquaria-menu.1a89fbab.svg"},b3c8:function(t,e,a){(function(t){a("ac1f"),a("5319"),t.fn.digits=function(){return this.each((function(){t(this).text(t(this).text().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"))}))},t(document).ready((function(){t("#protein_syn_input, #organism_syn_input").focus((function(){t(".infocus").removeClass("infocus"),t("#searchByName").addClass("infocus")})),t("#help3D").hide()})),t((function(){t(document).tooltip({position:{my:"right top+15",at:"right center",collision:"none"}},{show:{delay:1200}})}))}).call(this,a("1157"))},be77:function(t,e,a){"use strict";a("4481")},c48f:function(t,e,a){},cba8:function(t,e,a){"use strict";a("1202")},d2f8:function(t,e,a){"use strict";a("4ace")},e26a:function(t,e,a){},e352:function(t,e,a){},ea62:function(t,e,a){},f760:function(t,e,a){"use strict";a("8f69")},fc7c:function(t,e,a){"use strict";a("e352")}}]);
//# sourceMappingURL=wrapper.0c3f233d.js.map