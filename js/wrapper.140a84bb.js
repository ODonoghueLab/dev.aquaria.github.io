(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["wrapper"],{"113a":function(e,t,n){"use strict";n("61c9")},1380:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"matrix"}},[n("MatrixHeader"),n("LoadingPage"),n("div",{attrs:{id:"container"}})],1)},r=[],s=n("2909"),i=n("1da1"),o=(n("96cf"),n("99af"),n("d81d"),n("b0c0"),n("a434"),n("a4d3"),n("e01a"),n("fb6a"),n("ac1f"),n("5319"),n("466d"),n("4de4"),n("4e82"),n("159b"),n("1276"),n("b64b"),n("3ca3"),n("ddb0"),n("bc3a")),c=n.n(o),l=n("9cc6"),u=n("2fdb"),d=n("4360"),p={name:"Matrix",components:{MatrixHeader:l["a"],LoadingPage:u["a"]},data:function(){return{hostname:d["default"].state.url,publicPath:"/",structures:null,totalStructures:0,d3:n("5698"),green:"#7A9D5B",backgroundColour:"#ffffff",x:0,y:15,organismId:"2697049"}},mounted:function(){var e,t=this,n="".concat(window.BACKEND,"/").concat(this.organismId);c()({method:"get",url:n}).then((function(n){e=JSON.parse(n.data.primary_accessions),t.getStructures(t.organismId,e).then((function(e){console.log(e),t.getMatchingStructures(e).then((function(e){t.getProteinSynonyms(e).then((function(e){t.loadShapes(e).then((function(){document.querySelector(".matrixLoading")&&(document.querySelector(".matrixLoading").style.visibility="hidden",document.querySelector(".matrixLoading").style.display="none")}))}))}))})),t.structures=e})),window.addEventListener("resize",this.initialDisplay)},methods:{getResidueSize:function(e,t){return t*e},loadShapes:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r,i,o,c,l,u,d,p,h,f,m,g,v,y,w,A,b,_;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:for(e=t.partitionToThree(e),a=0,r=960/Math.max.apply(Math,Object(s["a"])(e.map((function(e){return t.getListSum(e)})))),i=0;i<e.length;i++){for(o=t.d3.select("#container").append("svg").attr("class","row").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 960 360"),t.x=0,t.y=15,c=0,0!==i&&(l=e[i-1],u=l[l.length-1],d=e[i][0],p=Math.floor(d.length/500+1),h=!1,p>3&&(h=!0),f={id:"placeholder",dark:!0,placeholderLarge:h,primary_accession:u.primary_accession,name:u.name,synonym:u.synonym,placeholder:!0},t.drawArrow(o,f,150,20,20/1.5,c,r),t.drawRuler(o,f,a,150,20/1.5,c),c=c+150+20/1.5),m=0;m<e[i].length;m++)g=!1,v=20,y=v/1.5,w=t.getResidueSize(r,e[i][m].length)-y,w<0&&(y=t.getResidueSize(r,e[i][m].length),w=0),t.drawArrow(o,e[i][m],w,v,y,c,r),t.drawRuler(o,e[i][m],a,w,y,c),a=e[i][m].continuous?e[i][m].length:0,t.addNonDarkToFragments(e[i][m]),0!==e[i][m].fragments.length&&(t.y=t.y+33,g=!0),t.drawFragments(o,e[i][m].fragments,r,c),t.drawMatchingStructures(o,e[i][m],w,v,y,c,r),c=c+w+y,g&&(t.y=t.y-33);0!==i&&i!==e.length-1&&(A=e[i+1],b=A[0],_=e[i-1],p=Math.floor(_[_.length-1].length/500+1),h=!1,p>3&&(h=!0),f={id:"placeholder",dark:!0,placeholderLarge:h,primary_accession:b.primary_accession,name:b.name,synonym:b.synonym,placeholder:!0},t.drawArrow(o,f,t.getResidueSize(r,A[0].length)-20/1.5,20,20/1.5,c,r),t.drawRuler(o,f,a,t.getResidueSize(r,A[0].length)-20/1.5,20/1.5,c)),t.drawExpandButton(o)}t.initialDisplay(!1);case 5:case"end":return n.stop()}}),n)})))()},fillData:function(e){var t=[{offset:"0%",color:"black"}];if(e.nonDark)for(var n=0;n<e.nonDark.length;n++){var a=e.nonDark[n];t.push({offset:a.Start/e.length*100+"%",color:"black"}),t.push({offset:a.Start/e.length*100+"%",color:this.green}),t.push({offset:a.Stop/e.length*100+"%",color:this.green}),t.push({offset:a.Stop/e.length*100+"%",color:"black"})}return e.placeholder&&(t=[{offset:"0%",color:"#CCCCCC"}]),t},getNonDarkBetween:function(e,t,n){var a=[];if(e.nonDark)for(var r=0;r<e.nonDark.length;r++)e.nonDark[r].Start<=t&&e.nonDark[r].Stop>=t?a.push({Start:0,Stop:e.nonDark[r].Stop-t}):e.nonDark[r].Start>=t&&e.nonDark[r].Stop<=n?a.push({Start:e.nonDark[r].Start-t,Stop:e.nonDark[r].Stop-t}):e.nonDark[r].Start<=n&&e.nonDark[r].Stop>=n&&a.push({Start:e.nonDark[r].Start-t,Stop:n-t});return a},splitToChunks:function(e,t){for(var n=[],a=t;a>0;a--)n.push(e.splice(0,Math.ceil(e.length/a)));return n},addNonDarkToFragments:function(e){if(e.fragments)for(var t=0;t<e.fragments.length;t++){var n=e.fragments[t];e.fragments[t].nonDark=this.getNonDarkBetween(e,n.Start,n.Stop)}},drawArrow:function(e,t,a,r,s,i,o){var c=this.fillData(t),l=t.id?t.id:t.primary_accession;console.log(l);var u,d=t.description?t.description:t.name;if(c.length>14&&a>300)for(var p=0,h=JSON.parse(JSON.stringify(t.nonDark)),f=Math.floor(c.length/10)>4?Math.floor(c.length/10):4,m=this.splitToChunks(h,f),g=0,v=0;v<m.length;v++){var y=m[v].slice(-1)[0].Stop-g;v===m.length-1&&(y=t.length-g);for(var w=this.getResidueSize(o,y),A=0;A<m[v].length;A++)m[v][A].Start=m[v][A].Start-g,m[v][A].Stop=m[v][A].Stop-g;var b=this.fillData({length:y,nonDark:m[v]});if(e.append("linearGradient").attr("id","grad_partial_"+l+"_"+v).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").selectAll("stop").data(b).enter().append("stop").attr("offset",(function(e){return e.offset})).attr("stop-color",(function(e){return e.color})).attr("stop-opacity",1),v===m.length-1){var _=w-s,S=void 0;S=_>0?[this.x,this.y,this.x,this.y+r,this.x+_,this.y+r,this.x+_,this.y+.5*r+s,this.x+_+s,this.y+.5*r,this.x+_,this.y+.5*r-s,this.x+_,this.y]:[this.x,this.y+.5*r-s,this.x,this.y+.5*r+s,this.x+s,this.y+.5*r],e.append("svg:polygon").attr("points",S).attr("fill","url(#grad_partial_"+l+"_"+v+")").attr("id",l).attr("title",l).attr("transform","translate("+(i+p)+",0)").attr("class","arrow").on("mouseover",(function(e,t){var a=n("5698");a.select(this).attr("opacity",".85"),a.selectAll("rect#"+this.id).attr("opacity",".85"),this.style.cursor="pointer"})).on("mouseout",(function(e,t){var a=n("5698");a.select(this).attr("opacity","1"),a.selectAll("rect#"+this.id).attr("opacity","1")})).on("click",(function(){var e=n("5698"),t=window.location.origin;window.open(t+"/"+e.select(this).attr("title"))})).append("svg:title").text(d)}else e.append("svg:rect").attr("fill","url(#grad_partial_"+l+"_"+v+")").attr("x",this.x).attr("y",this.y).attr("width",w).attr("height",r).attr("id",l).attr("class","arrow").attr("title",l).attr("transform","translate("+(i+p)+",0)").on("mouseover",(function(e,t){var a=n("5698");a.select(this).attr("opacity",".85"),a.selectAll("rect#"+this.id).attr("opacity",".85"),a.selectAll("polygon#"+this.id).attr("opacity",".85"),this.style.cursor="pointer"})).on("mouseout",(function(e,t){var a=n("5698");a.select(this).attr("opacity","1"),a.selectAll("rect#"+this.id).attr("opacity","1"),a.selectAll("polygon#"+this.id).attr("opacity","1")})).on("click",(function(){var e=n("5698"),t=window.location.origin;window.open(t+"/"+e.select(this).attr("title"))})).append("svg:title").text(d);g+=y,p+=w}else e.append("linearGradient").attr("id","grad_"+l).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").selectAll("stop").data(c).enter().append("stop").attr("offset",(function(e){return e.offset})).attr("stop-color",(function(e){return e.color})).attr("stop-opacity",1),u=a>0?[this.x,this.y,this.x,this.y+r,this.x+a,this.y+r,this.x+a,this.y+.5*r+s,this.x+a+s,this.y+.5*r,this.x+a,this.y+.5*r-s,this.x+a,this.y]:[this.x,this.y+.5*r-s,this.x,this.y+.5*r+s,this.x+s,this.y+.5*r],e.append("svg:polygon").attr("points",u).attr("fill","url(#grad_"+l+")").attr("id",l).attr("title",l).attr("class","arrow").attr("transform","translate("+i+",0)").on("mouseover",(function(e,t){var a=n("5698");this.style.cursor="pointer",a.select(this).attr("opacity",".85")})).on("mouseout",(function(e,t){var a=n("5698");a.select(this).attr("opacity","1")})).on("click",(function(){var e=n("5698"),t=window.location.origin;window.open(t+"/"+e.select(this).attr("title"))})).append("svg:title").text(d);var x=e.append("text").attr("x",this.x+.5*(a+.5*s)).attr("y",this.y+.5*r).attr("transform","translate("+i+",0)").attr("dy",".35em").style("text-anchor","middle").attr("class","arrow").style("fill","white").text(t.name);if(x.node().getComputedTextLength()>a&&(x.text(t.synonym[0]),x.node().getComputedTextLength()>a)){var I=t.synonym.reduce((function(e,t){return e.length<=t.length?e:t}));I=I.replace("orf","").replace("ORF",""),x.text(I),x.node().getComputedTextLength()>a+.5*s&&(x.attr("y",this.y+1.5*r),x.style("fill",this.green),x.attr("class","rowContent"))}},drawRuler:function(e,t,n,a,r,s){var i=[1,a+r-1];n&&(i=[0,a+r]);var o=this.d3.scale.linear().domain([n,n+t.length]).range(i),c=Math.floor(t.length/500+1);if(c>3||t.placeholderLarge){t.placeholderLarge&&(c=0);var l=e.append("g").attr("transform","translate("+s+","+(this.y-15)+")").attr("style","").style("fill","gray").style("font-size","10px").attr("class","rowContent").call(this.d3.svg.axis().scale(o).tickSize(0,1).tickFormat((function(e,t){return 0===e||e%1e3!==0?" ":e})).orient("bottom").ticks(c));t.placeholder&&l.style("fill","#CCCCCC"),l.selectAll(".tick").attr("stroke","gray").attr("x1",this.x).attr("x2",this.x).attr("y2",0).attr("y1",3).attr("stroke-width","1")}else if(t.length>200||t.placeholder){c=2,t.placeholder&&(c=0);var u=e.append("g").attr("transform","translate("+s+","+(this.y-10)+")").style("fill","gray").attr("class","rowContent").call(this.d3.svg.axis().scale(this.d3.scale.linear().domain([0,1]).range([1,a+r-1])).tickSize(2,1).orient("top").ticks(c).tickFormat(""));u.selectAll(".tick").attr("stroke","gray").attr("x1",this.x).attr("y1",4).attr("y2",-1).attr("stroke-width","1"),t.placeholder&&u.style("fill","#CCCCCC");var d=e.append("text").attr("x",this.x+.5*(a+r)).attr("y",this.y-10).attr("dy",".35em").style("text-anchor","middle").attr("transform","translate("+s+",0)").style("fill","gray").style("font-size","10px").attr("class","rowContent").text(t.length);e.append("rect","text").datum((function(){return d.node().getBBox()})).attr("x",(function(e){return e.x-2})).attr("y",(function(e){return e.y})).style("fill",this.backgroundColour).attr("transform","translate("+s+",0)").attr("class","rowContent").attr("width",(function(e){return e.width+4})).attr("height",(function(e){return e.height})),d.node().parentNode.appendChild(d.node())}},drawFragments:function(e,t,n,a){for(var r=0;r<t.length;r++){console.log(t);var s={name:t[r].Name,primary_accession:t[r].Primary_Accession,synonym:[t[r].Short_Name].concat(t[r].Short_Name.match(/[0-9]+/g)),Start:t[r].Start,Stop:t[r].Stop,pdb:null,length:t[r].Stop-t[r].Start,id:t[r].Primary_Accession+"_"+t[r].Short_Name,nonDark:t[r].nonDark,description:t[r].Description},i=t[r].Stop-t[r].Start,o=20,c=o/1.5,l=this.getResidueSize(n,i)-c;l<0&&(c=this.getResidueSize(n,i),l=0),(0===r||t[r].Start>=t[r-1].Stop)&&(this.drawArrow(e,s,l,o,c,a,n),a=a+l+c)}},renderImage:function(e,t,a,r,s,i,o){var c=(a<120?a:120)+10,l=t.Start?t.Start:0;if(o){e.append("rect","text").attr("x",.5*a+l).attr("y",this.y+r).style("fill",this.backgroundColour).attr("transform","translate("+(s-c/2)+","+(20+i)+")").attr("width",c).attr("height",200).attr("title",o).on("mouseover",(function(e,t){var a=n("5698");a.select(this).transition().duration(500).style("fill","orange"),this.style.cursor="pointer"})).on("mouseout",(function(e,t){var a=n("5698");a.select(this).transition().duration(500).style("fill","white")})).on("click",(function(){var e=n("5698"),t=e.select(this).attr("title");if(t){var a=window.location.origin;window.open(a+"/"+e.select(this).attr("title"))}}));var u=e.append("svg:image").attr("x",.5*a+l).attr("y",this.y+r).attr("transform","translate("+(s-c/2)+","+(20+i)+")").attr("width",c).attr("height",c).on("error",(function(){var e=n("5698");e.select(this).attr("xlink:href","https://aquaria.ws:8080/image/"+t.primary_accession+"/"+t.pdb+"?color=0x000000&alpha=0")})).style("pointer-events","none");!t.dark&&t.pdb?u.attr("xlink:href","../images/pdb/"+t.pdb+".png"):(u.attr("xlink:href","../images/covid19/unknown-structure_1000.png"),u.style("visibility","hidden"))}},drawMatchingStructures:function(e,t,a,r,i,o,c){var l=this,u=30;if(t.clusters){t.clusters=t.clusters.filter((function(e){return e.seq_start[0]>=0})),t.clusters.sort((function(e,t){return e.cluster_size>t.cluster_size?-1:t.cluster_size>e.cluster_size?1:0}));var d=1;while(d<t.clusters.length){var p=0,h=!1;while(p<d&&!h){var f=Math.min.apply(Math,Object(s["a"])(t.clusters[p].seq_start)),m=Math.min.apply(Math,Object(s["a"])(t.clusters[d].seq_start)),g=Math.max.apply(Math,Object(s["a"])(t.clusters[p].seq_end)),v=Math.max.apply(Math,Object(s["a"])(t.clusters[d].seq_end));f<=m&&g>=v?(t.clusters[p].cluster_size+=t.clusters[d].cluster_size,t.clusters.splice(d,1),h=!0):(f>m&&f-m<.8*(v-m)||g<v&&v-g<.8*(v-m))&&(t.clusters[p].cluster_size+=t.clusters[d].cluster_size,t.clusters[p].seq_start=[Math.min(f,m)],t.clusters[p].seq_end=[Math.max(g,v)],t.clusters.splice(d,1),h=!0),p++}h||d++}t.clusters=t.clusters.filter((function(e){return Math.max.apply(Math,Object(s["a"])(e.seq_end))-Math.min.apply(Math,Object(s["a"])(e.seq_start))>20})),t.clusters.forEach((function(a){var s=l.getResidueSize(c,a.seq_start[0]);if(!(a.seq_start<0)){var i=l.getResidueSize(c,a.seq_end[a.seq_end.length-1]);if(!(a.seq_end>t.length)){var d=l.d3.scale.linear().domain([0,2]).range([s+1,i-1]).nice(),p=e.append("g").attr("transform","translate("+o+","+(l.y+r+10)+")").attr("style","").style("fill",l.green).style("font-size","10px").call(l.d3.svg.axis().scale(d).tickSize(0,1).tickFormat("").orient("bottom").ticks(2));l.d3.select(p.selectAll(".tick")[0][1]).attr("stroke",l.green).attr("x1",l.x).attr("x2",l.x).attr("y2",0).attr("y1",u).attr("stroke-width","1");var h=e.append("text").datum((function(){return p.node().getBBox()})).attr("x",(function(e){return e.x+.5*e.width})).attr("y",l.y+r+u+5).attr("dy",".35em").style("text-anchor","middle").attr("transform","translate("+o+",0)").style("fill","white").style("font-size","12px").text(a.cluster_size).attr("title",t.primary_accession+"/"+a.pdb_id).style("pointer-events","none");e.append("rect","text").datum((function(){return h.node().getBBox()})).attr("x",(function(e){return e.x-4})).attr("y",(function(e){return e.y})).attr("rx",6).attr("ry",10).style("fill",l.green).attr("transform","translate("+o+",0)").attr("width",(function(e){return e.width+8})).attr("height",(function(e){return e.height})).attr("title",t.primary_accession+"/"+a.pdb_id).on("click",(function(){var e=n("5698");console.log(e.select(this).attr("title"));var t=window.location.origin;window.open(t+"/"+e.select(this).attr("title"))})).on("mouseover",(function(){this.style.cursor="pointer"})),h.node().parentNode.appendChild(h.node());var f={name:a.pdb_id,primary_accession:t.primary_accession,Start:s,Stop:i,pdb:a.pdb_id,length:i-s,id:t.primary_accession+"_"+a.pdb_id,nonDark:!0};l.renderImage(e,f,i-s,r,o,u,t.primary_accession+"/"+a.pdb_id)}}}))}else this.renderImage(e,t,a,r,o,u,"")},drawExpandButton:function(e){var t=e.append("svg:rect").attr("x",0).attr("y",0).attr("stroke","#CCCCCC").attr("fill","#CCCCCC").attr("opacity",.8).attr("width",window.innerWidth).attr("height",30).attr("id","expand");window.innerHeight>window.innerWidth&&t.attr("display","none"),t.on("mouseover",(function(e,t){var a=n("5698");a.select(this.parentNode).select("path#expand:last-child").attr("stroke","orange"),this.style.cursor="pointer"})).on("mouseout",(function(e,t){var a=n("5698");a.select(this.parentNode).select("path#expand:last-child").attr("stroke","#CCCCCC")})),t.on("click",(function(e,t){var a=n("5698");if(this.parentNode.className.baseVal.split(" ").indexOf("open")>-1)a.select(this.parentNode).classed("open",!1),a.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),a.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0);else{a.selectAll(".open").selectAll("rect#expand").attr("opacity",0),a.selectAll(".open").selectAll("rect#expand").attr("display","block"),a.selectAll(".open").selectAll("rect#expand").transition().duration(1e3).attr("opacity",.8),a.selectAll(".open").selectAll("path#expand").attr("opacity",0),a.selectAll(".open").selectAll("path#expand").attr("display","block"),a.selectAll(".open").selectAll("path#expand").transition().duration(1e3).attr("opacity",1),a.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=a.transform(a.select(this).attr("transform"));return"translate("+e.translate[0]+", -10)"})),a.selectAll(".row").classed("open",!1),a.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),a.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0),a.select(this.parentNode).classed("open",!0),a.select(this).attr("display","none"),a.select(this.parentNode).selectAll("path#expand").attr("display","none"),a.selectAll(".open").transition().duration(1e3).attr("viewBox","0 0 960 360"),a.selectAll(".open .rowContent").transition().duration(1e3).attr("opacity",1),a.select(this.parentNode).selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=a.transform(a.select(this).attr("transform"));return"translate("+e.translate[0]+", 0)"}));for(var r=a.selectAll(".row"),s=!1,i=!0,o=0;o<r[0].length;o++)a.select(r[0][o]).classed("open")&&(s=!0),s?(a.select(r[0][o]).select("path#expand").attr("transform","scale(1, -1) translate(480, -0)"),a.select(r[0][o]).select("path#expand:last-child").attr("transform","translate(480,0)")):(i=!1,a.select("#container").transition().duration(1e3).style("padding","8px 0px 0px 0px"),a.select(r[0][o]).select("path#expand").attr("transform","translate(480,30)"),a.select(r[0][o]).select("path#expand:last-child").attr("transform","scale(1, -1) translate(480, -30)"));i&&a.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px")}})),this.renderHalfMoon(e,480,0)},renderHalfMoon:function(e,t,a){var r=this.d3.svg.arc().outerRadius(20).innerRadius(0).startAngle(-Math.PI/2).endAngle(Math.PI/2),s=e.append("path").attr("transform","scale(1, -1) translate("+t+", -"+a+")").attr("d",r()).attr("fill","gray").attr("id","expand").on("mouseover",(function(e,t){var a=n("5698");a.select(this.parentNode).select("path#expand:last-child").attr("stroke","orange"),this.style.cursor="pointer"})).on("mouseout",(function(e,t){var a=n("5698");a.select(this.parentNode).select("path#expand:last-child").attr("stroke","#CCCCCC")})),i=e.append("path").attr("transform","translate("+t+","+a+")").attr("d","M-8 12 0 5 8 12").attr("stroke","#CCCCCC").attr("stroke-width",3).attr("fill","transparent").attr("id","expand").on("mouseover",(function(e,t){var a=n("5698");a.select(this).attr("stroke","orange"),this.style.cursor="pointer"})).on("mouseout",(function(e,t){var a=n("5698");a.select(this).attr("stroke","#CCCCCC")}));i.on("click",(function(e,t){var a=n("5698");a.selectAll(".open").selectAll("rect#expand").attr("opacity",0),a.selectAll(".open").selectAll("rect#expand").attr("display","block"),a.selectAll(".open").selectAll("rect#expand").transition().duration(1e3).attr("opacity",.8),a.selectAll(".open").selectAll("path#expand").attr("opacity",0),a.selectAll(".open").selectAll("path#expand").attr("display","block"),a.selectAll(".open").selectAll("path#expand").transition().duration(1e3).attr("opacity",1),a.selectAll(".row").classed("open",!1),a.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),a.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0),a.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=a.transform(a.select(this).attr("transform"));return"translate("+e.translate[0]+", -10)"})),a.selectAll(".row").classed("open",!1),a.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),a.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0),a.select(this.parentNode).classed("open",!0),a.select(this.parentNode).selectAll("rect#expand").attr("display","none"),a.select(this.parentNode).selectAll("path#expand").attr("display","none"),a.selectAll(".open").transition().duration(1e3).attr("viewBox","0 0 960 360"),a.selectAll(".open .rowContent").transition().duration(1e3).attr("opacity",1),a.select(this.parentNode).selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=a.transform(a.select(this).attr("transform"));return"translate("+e.translate[0]+", 0)"}));for(var r=a.selectAll(".row"),s=!1,i=!0,o=0;o<r[0].length;o++)a.select(r[0][o]).classed("open")&&(s=!0),s?(a.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px"),a.select(r[0][o]).select("path#expand").attr("transform","scale(1, -1) translate(480, -0)"),a.select(r[0][o]).select("path#expand:last-child").attr("transform","translate(480,0)")):(i=!1,a.select("#container").transition().duration(1e3).style("padding","8px 0px 0px 0px"),a.select(r[0][o]).select("path#expand").attr("transform","translate(480,30)"),a.select(r[0][o]).select("path#expand:last-child").attr("transform","scale(1, -1) translate(480, -30)"));i&&a.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px")})),s.on("click",(function(e,t){var a=n("5698");a.selectAll(".open").selectAll("rect#expand").attr("opacity",0),a.selectAll(".open").selectAll("rect#expand").attr("display","block"),a.selectAll(".open").selectAll("rect#expand").transition().duration(1e3).attr("opacity",.8),a.selectAll(".open").selectAll("path#expand").attr("opacity",0),a.selectAll(".open").selectAll("path#expand").attr("display","block"),a.selectAll(".open").selectAll("path#expand").transition().duration(1e3).attr("opacity",1),a.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=a.transform(a.select(this).attr("transform"));return"translate("+e.translate[0]+", -10)"})),a.selectAll(".row").classed("open",!1),a.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),a.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0),a.select(this.parentNode).classed("open",!0),a.select(this.parentNode).selectAll("rect#expand").attr("display","none"),a.select(this.parentNode).selectAll("path#expand").attr("display","none"),a.selectAll(".open").transition().duration(1e3).attr("viewBox","0 0 960 360"),a.selectAll(".open .rowContent").transition().duration(1e3).attr("opacity",1),a.select(this.parentNode).selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=a.transform(a.select(this).attr("transform"));return"translate("+e.translate[0]+", 0)"}));for(var r=a.selectAll(".row"),s=!1,i=!0,o=0;o<r[0].length;o++)a.select(r[0][o]).classed("open")&&(s=!0),s?(a.select(r[0][o]).select("path#expand").attr("transform","scale(1, -1) translate(480, -0)"),a.select(r[0][o]).select("path#expand:last-child").attr("transform","translate(480,0)")):(i=!1,a.select("#container").transition().duration(1e3).style("padding","8px 0px 0px 0px"),a.select(r[0][o]).select("path#expand").attr("transform","translate(480,30)"),a.select(r[0][o]).select("path#expand:last-child").attr("transform","scale(1, -1) translate(480, -30)"));i&&a.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px")}))},initialDisplay:function(e){if(window.innerHeight>window.innerWidth)this.d3.selectAll("rect#expand").attr("display","none"),this.d3.selectAll("path#expand").attr("display","none"),this.d3.selectAll(".row").classed("open",!0),this.d3.selectAll(".open").transition().duration(1e3).attr("viewBox","0 0 960 360"),this.d3.selectAll(".open .rowContent").transition().duration(1e3).attr("opacity",1),this.d3.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=n("5698"),t=e.transform(e.select(this).attr("transform"));return"translate("+t.translate[0]+", 0)"}));else if(window.innerHeight<.25*window.innerWidth)this.d3.selectAll("rect#expand").attr("display","block"),this.d3.selectAll("path#expand").attr("display","block"),this.d3.selectAll(".row").classed("open",!1),this.d3.selectAll(".row").transition().duration(500).attr("viewBox","0 0 960 35"),this.d3.selectAll(".rowContent").transition().duration(500).attr("opacity",0),this.d3.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=n("5698"),t=e.transform(e.select(this).attr("transform"));return"translate("+t.translate[0]+", -10)"}));else{var t=this.d3.select(".open");if(this.d3.selectAll("rect#expand").attr("display","block"),this.d3.selectAll("path#expand").attr("display","block"),this.d3.selectAll(".row").classed("open",!1),this.d3.selectAll(".row").transition().duration(500).attr("viewBox","0 0 960 35"),this.d3.selectAll(".rowContent").transition().duration(500).attr("opacity",0),e){t.classed("open",!0),t.select("rect#expand").attr("display","none"),t.selectAll("path#expand").attr("display","none"),t.transition().duration(1e3).attr("viewBox","0 0 960 360"),this.d3.selectAll(".open .rowContent").transition().duration(500).attr("opacity",1),this.d3.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=n("5698"),t=e.transform(e.select(this).attr("transform"));return"translate("+t.translate[0]+", -10)"})),t.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=n("5698"),t=e.transform(e.select(this).attr("transform"));return"translate("+t.translate[0]+", 0)"}));for(var a=this.d3.selectAll(".row"),r=!1,s=!0,i=0;i<a[0].length;i++)this.d3.select(a[0][i]).classed("open")&&(r=!0),r?(this.d3.select(a[0][i]).select("path#expand").attr("transform","scale(1, -1) translate(480, -0)"),this.d3.select(a[0][i]).select("path#expand:last-child").attr("transform","translate(480,0)")):(s=!1,this.d3.select("#container").transition().duration(1e3).style("padding","8px 0px 0px 0px"),this.d3.select(a[0][i]).select("path#expand").attr("transform","translate(480,30)"),this.d3.select(a[0][i]).select("path#expand:last-child").attr("transform","scale(1, -1) translate(480, -30)"));s&&this.d3.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px")}else t=this.d3.select(".row").classed("open",!0),this.d3.select("rect#expand").attr("display","none"),t.selectAll("path#expand").attr("display","none"),this.d3.selectAll(".open").transition().duration(500).attr("viewBox","0 0 960 360"),this.d3.selectAll(".open .rowContent").transition().duration(500).attr("opacity",1),this.d3.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=n("5698"),t=e.transform(e.select(this).attr("transform"));return"translate("+t.translate[0]+", -10)"})),t.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=n("5698"),t=e.transform(e.select(this).attr("transform"));return"translate("+t.translate[0]+", 0)"}))}},partitionToThree:function(e){var t=this.getListSum(e),n=t/3;e.push({name:"newPlaceholderNum",length:n});var a=this.partitionToTwo(e);a[1].pop();var r=this.partitionToTwo(a[0]);return[r[0],r[1],a[1]]},partitionToTwo:function(e){var t=this.getListSum(e),n=e.length-1;while(this.getListSum(e.slice(n))<t/2){if(this.getListSum(e.slice(n-1))>=t/2)break;n--}return[e.slice(0,n),e.slice(n)]},getListSum:function(e){return e.reduce((function(e,t){return e+t.length}),0)},sortStructures:function(e,t){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,n.getPositions(e);case 2:for(r=a.sent,s=0;s<t.length;s++)t[s].position=r[t[s].primary_accession];return t.sort((function(e,t){return e.position-t.position})),a.abrupt("return",t);case 6:case"end":return a.stop()}}),a)})))()},cleanProteins:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r,s,i,o,c,l,u,d,p,h,f,m;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:for(a={},e.forEach((function(e){var t=a[e.position];t||(t=a[e.position]=[]),t.push(e)})),r=[],s=1;s<=Object.keys(a).length;s++)1!==a[s].length?function(){var e=void 0;a[s].forEach((function(t){e?t.length>e.length&&(e=t):e=t})),i=e;for(var n=0;n<a[s].length;n++)if(a[s][n].sequence!==e.sequence){for(o=t.findSubstring(a[s][n].sequence,e.sequence),i.sequence=i.sequence.replace(o,""),i.length=i.sequence.length,i.name=i.name+" (split)",a[s][n].continuous=!0,r.push(a[s][n]),i.fragments.length>0&&a[s][n].fragments.forEach((function(e){i.fragments=i.fragments.filter((function(t){return t.Name!==e.Name}))})),c=0;c<i.fragments.length;c++)i.fragments[c].Start=i.fragments[c].Start-a[s][n].length,i.fragments[c].Stop=i.fragments[c].Stop-a[s][n].length,i.fragments[c].Start<0&&(i.fragments[c].Start=0);for(i.fragments=i.fragments.filter((function(e){return e.Start>=0})),l=[],u=0;u<i.nonDark.length;u++)i.nonDark[u].Stop>a[s][n].length&&(d=i.nonDark[u].Start-a[s][n].length,d<0&&(d=0),p=i.nonDark[u].Stop-a[s][n].length,l.push({Primary_Accession:i.primary_accession,Start:d,Stop:p}));if(i.clusters)for(h=0;h<i.clusters.length;h++){for(f=0;f<i.clusters[h].seq_start.length;f++)i.clusters[h].seq_start[f]=i.clusters[h].seq_start[f]-a[s][n].length;for(m=0;m<i.clusters[h].seq_end.length;m++)i.clusters[h].seq_end[m]=i.clusters[h].seq_end[m]-a[s][n].length}i.nonDark=l}i.continuous=!1,r.push(i)}():(a[s][0].continuous=!1,r.push(a[s][0]));return n.abrupt("return",r);case 5:case"end":return n.stop()}}),n)})))()},findSubstring:function(e,t){var n=e.length,a=0;while(a<n&&e.charAt(a)===t.charAt(a))a++;return e.substring(0,a)},getPositions:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="".concat(window.BACKEND,"/getGenomicPosition/").concat(e),a={},t.next=4,c()({method:"get",url:n}).then((function(e){for(var t=0;t<e.data.length;t++)a[e.data[t].primary_accession]=e.data[t].position_index}));case 4:return 0===Object.keys(a).length&&console.log("cannot get genomic positions of "+e+" in getPositions() Coverage.vue"),t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})))()},getProteinSynonyms:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=0;case 1:if(!(a<e.length)){n.next=9;break}return n.next=4,t.getSynonym(e[a].primary_accession);case 4:r=n.sent,e[a].synonym=r;case 6:a++,n.next=1;break;case 9:return n.abrupt("return",e);case 10:case"end":return n.stop()}}),n)})))()},getSynonym:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="".concat(window.BACKEND,"/getProteinSynonyms/").concat(e),a=[],t.next=4,c()({method:"get",url:n}).then((function(e){e.data.Synonym&&a.push(e.data.Synonym),a=a.concat(e.data.synonyms)}));case 4:return t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))()},getMatchingStructures:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=0;case 1:if(!(a<e.length)){n.next=10;break}return r={selector:[e[a].primary_accession]},console.log(r),s="".concat(window.BACKEND,"/get_matching_structures"),n.next=7,c()({method:"get",url:s,params:r}).then((function(t){console.log(t),"'Dark' protein"===t.data?(e[a].clusters=0,e[a].pdb=null):(e[a].clusters=t.data.clusters,e[a].pdb=t.data.Best_PDB.pdb_id)}));case 7:a++,n.next=1;break;case 10:return n.abrupt("return",t.cleanProteins(e));case 11:case"end":return n.stop()}}),n)})))()},countMatchingStructures:function(e){return 0===e?0:e.reduce((function(e,t){return e+t.members.length}),0)},getNonDarkRegions:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=0;case 1:if(!(a<e.length)){n.next=11;break}return console.log(e[a].primary_accession),n.next=5,t.getNonDark(e[a].primary_accession);case 5:r=n.sent,e[a].nonDark=r,console.log(r);case 8:a++,n.next=1;break;case 11:return n.abrupt("return",e);case 12:case"end":return n.stop()}}),n)})))()},getNonDark:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="".concat(window.BACKEND,"getNonDarkRegions/").concat(e),a=[],t.next=4,c()({method:"get",url:n}).then((function(e){e.data&&(a=e.data)}));case 4:return t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))()},getNonDarkCoverage:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={selector:[e]},a="".concat(window.BACKEND,"getCoverageMap"),r={},t.next=5,c()({method:"get",url:a,params:n}).then((function(e){e.data&&(r=e.data)}));case 5:return t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})))()},getStructures:function(e,t){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,s,i,o,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=[],a.next=3,n.sortStructures(e,t);case 3:t=a.sent,i=regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t[a].count=0,l={selector:[t[a].primary_accession]},s="".concat(window.BACKEND,"/get_3D_alignment"),e.next=5,c()({method:"get",url:s,params:l}).then((function(e){var s="";if(e.data.sequences){s=e.data.sequences[0];var i=s.length;console.log("Loaded ",t[a].synonym,i),r.push({name:t[a].synonym,primary_accession:t[a].primary_accession,sequence:s.sequence,position:t[a].position,length:i})}else s=e.data[t[a].primary_accession],r.push({name:t[a].synonym,primary_accession:t[a].primary_accession,sequence:s.sequence,position:t[a].position,length:s.length});return n.getFragments(t[a].primary_accession)})).then((function(e){r[a].fragments=e}));case 5:case"end":return e.stop()}}),e)})),o=0;case 6:if(!(o<t.length)){a.next=11;break}return a.delegateYield(i(o),"t0",8);case 8:o++,a.next=6;break;case 11:return a.next=13,n.getNonDarkRegions(r);case 13:return r=a.sent,a.abrupt("return",r);case 15:case"end":return a.stop()}}),a)})))()},getFragments:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="".concat(window.BACKEND,"/getProteinFragments/").concat(e),a=[],t.next=4,c()({method:"get",url:n}).then((function(e){e.data.length>0&&(a=e.data)}));case 4:return t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))()}}},h=p,f=(n("2a3a"),n("2877")),m=Object(f["a"])(h,a,r,!1,null,"f907dd24",null);t["default"]=m.exports},"20d9":function(e,t,n){e.exports=n.p+"img/search_dark.012aee91.png"},"22b1":function(e,t,n){n("159b"),n("b0c0");var a=n("1f25"),r=n("4b90"),s=function(e,t){var n=this;this.id=e,r.getUrlParameter("clearCache")&&localStorage.removeItem(this.id);var s=localStorage.getItem(this.id);if(this.cache=new a(t),null===s);else{var i=JSON.parse(s);i.forEach((function(e){n.cache.set(e.key,e.value)}))}};s.prototype.submitFired=function(e,t,n){var a={name:e,primary_accession:t,pdb_id:n};this.cache.set(t+n,a),this.save()},s.prototype.save=function(){var e=[];this.cache.forEach((function(t,n){e.push({key:n,value:t})}));var t=JSON.stringify(e);console.log("TopTen.save",e),localStorage.setItem(this.id,t)},s.prototype.getAll=function(){var e=[];return this.cache.forEach((function(t){e.push(t)})),e},s.prototype.savePDB=function(e,t){var n={};n.primary_acccession=e,n.pdb=t,this.cache.push(n)},s.prototype.previousLookup=function(e){var t=!1;return this.cache.forEach((function(n){n.primary_accession==e&&(t=n.pdb_id)})),t},s.prototype.previousLookupByName=function(e){var t=!1;return this.cache.forEach((function(n){n.name==e&&(t=n.pdb_id)})),t},s.prototype.updatePDB=function(e,t){this.cache.forEach((function(n){n.primary_accession==e&&(n.pdb_id=t)})),this.save()},e.exports=s},"23c5":function(e,t,n){},"2a3a":function(e,t,n){"use strict";n("f61d")},"2b1d":function(e,t,n){},"2bb0":function(e,t,n){var a,r,s,i,o=n("9523").default;n("d81d"),n("b64b"),n("ac1f"),n("1276"),n("5319"),n("841c"),n("7db0"),n("4d63"),n("25f0"),n("466d"),n("4e82"),n("2ca0"),n("a434"),n("d3b7"),n("b0c0"),n("caad"),n("2532");var c,l=n("29c86"),u=n("0b16"),d=n("5698"),p=n("2ef0"),h=n("1157"),f=n("5a2b"),m=(u=n("4b90"),n("1b1f")),g=n("4360");function v(){r=document.getElementById("structure-viewer").offsetWidth-AQUARIA.margin.right-AQUARIA.margin.left}function y(e){}var w,A=function e(t,n){var r=document.getElementById("waitingFrame");if("undefined"!=r&&null!=r&&"none"!=document.getElementById("waitingFrame").style.display)setTimeout((function(){e(t,n)}),50),console.log("REPEATING");else{var o=function(){if(l.forEach((function(e){"Added Features"==e.Server&&f.push(e)})),f.length>0){var e=h('[id="Added Features"]').children().eq(2).children().eq(0).find("svg");if(e.length>0){var t=S(f);e.attr("class","loaded");var n=e.attr("id").split("_")[2];AQUARIA.customfeatureSet=f[t],AQUARIA.customfeatureSetioid=n,AQUARIA.passFeature(f[t],n),document.querySelector("#outerFeatureMap")&&document.querySelector("#outerFeatureMap").remove(),AQUARIA.addedFeature=!0,d.selectAll("svg.loaded rect.feature").attr("fill","#a4abdf"),d.select("svg.loaded").classed("loaded",!1)}}};a=t||a,c=n||c,h("#featurelist div").remove(),AQUARIA.showMatchingStructures.drawAxisRuler("featurelist"),v(),s=0,i=0;var l=[],f=[],m=[];for(var y in AQUARIA.currentFeature={},AQUARIA.onFeatureChange=function(e,t){g.default.commit("setFeature",{set:e,track:t})},AQUARIA.groupedFeatures=p.groupBy(a,(function(e){return e.Server})),AQUARIA.groupedFeatures=Object.keys(AQUARIA.groupedFeatures).map((function(e){return[String(e),AQUARIA.groupedFeatures[e]]})),a)l.push(a[y]);if(window.localStorage.getItem("featureOrder")&&window.localStorage.getItem("featureOrder").split(",").length>=AQUARIA.groupedFeatures.length){var w=window.localStorage.getItem("featureOrder").split(",");for(var y in w)for(var A=0;A<AQUARIA.groupedFeatures.length;A++)AQUARIA.groupedFeatures[A][0]==w[y]&&(m[y]=AQUARIA.groupedFeatures[A]);AQUARIA.groupedFeatures=m}var x=d.select("#featurelist").append("div").attr("id","featureContainer").append("div").attr("id","groupedFeatures");for(var y in AQUARIA.groupedFeatures){var I=x.append("div").attr("id",AQUARIA.groupedFeatures[y][0]).attr("class","featureCollection");I="UniProt"==AQUARIA.groupedFeatures[y][0]||"CATH"==AQUARIA.groupedFeatures[y][0]||"SNAP2"==AQUARIA.groupedFeatures[y][0]||"PredictProtein"==AQUARIA.groupedFeatures[y][0]?I.html("<div class='featureHeader'><p class='expand'>►</p><p class='featureName'>"+AQUARIA.groupedFeatures[y][0]+"</p><div class='info'>?</div></div><span class='tooltiptext'>"+AQUARIA.groupedFeatures[y][1][0].About+"</span>"):I.html("<div class='featureHeader'><p class='expand'>►</p><p class='featureName'>"+AQUARIA.groupedFeatures[y][0]+"</p><div class='info'>?</div><button id='remove' class='featureButtons'>Remove</button></div><span class='tooltiptext'>"+AQUARIA.groupedFeatures[y][1][0].About+"</span>");var k=I.append("div").attr("class","featureTrack").selectAll("div"),C=b(AQUARIA.groupedFeatures[y][1]);for(var E in _(AQUARIA.groupedFeatures[y],C),AQUARIA.groupedFeatures[y][1])"Added Features"==AQUARIA.groupedFeatures[y][0]&&AQUARIA.groupedFeatures[y][1][E].hasOwnProperty("SeqHash")&&""!=AQUARIA.groupedFeatures[y][1][E].SeqHash&&AQUARIA.groupedFeatures[y][1][E].SeqHash!=AQUARIA.showMatchingStructures.sequence.uniprot_hash||k.data([AQUARIA.groupedFeatures[y][1][E]]).enter().append("div").attr("class","track").attr("id",(function(e){return"track_"+e.Category})).html((function(e){if(""!=e.Type){if("UniProt"==e.Server||"PredictProtein"==e.Server||"CATH"==e.Server||"SNAP2"==e.Server||"COSMIC"==e.Server||"FunVar"==e.Server)var t="Curated Features";else t=e.Server;return"<p><span class='featureSetName'>"+e.Category+'</span> <i class="featureSetName_">('+e.Type.replace(/_/g," ")+")</i> &nbsp;&nbsp; <span class='info'>?</span>  <span class='source'>"+t.replace(/[sS]$/,"")+"</span> </p> <span class='tooltiptext'>"+e.Description+"</span>"}return t="UniProt"==e.Server||"PredictProtein"==e.Server||"CATH"==e.Server||"SNAP2"==e.Server||"COSMIC"==e.Server||"FunVar"==e.Server?"Curated Features":e.Server,'<p><span class="featureSetName">'+e.Category+"</span> &nbsp;&nbsp; <span class='info'>?</span> <span class='source'>"+t.replace(/[sS]$/,"")+"</span></p> <span class='tooltiptext'>"+e.Description+"</span>"})).each(R)}if(h("#featureCounter").show(),s>0){h("#featureCounter").text(s),h("#featureCounter").digits();var M="<p id='scrollToggle'><a href='javascript:$(\"#featureContainer\").toggleClass(\"noscroll\");'>Toggle scrolling</a></p>";h("#featureContainer").append(M)}else h("#featureCounter").text(s);d.selectAll(".expand").attr("style","font-size: calc(9px + 0.2vw);color: #848484;margin: 10px -7px 0px 0px;"),d.selectAll("#remove").on("click",(function(){h(this).parent().parent().remove(),console.log("Get to matching structures now :)"),AQUARIA.currentFeature.oid=null,AQUARIA.currentFeature.data=null,d.select("svg.loaded").classed("loaded",!1),g.default.commit("showLoader",!0),g.default.commit("setLoaderMsg","Removing feature..."),g.default.commit("showLoader",!1),"function"===typeof AQUARIA.onFeatureChange&&AQUARIA.onFeatureChange(null,0),F(),document.querySelector("#outerFeatureMap").remove(),document.querySelector("#popup").style.display="none",AQUARIA.showMatchingStructures.showMap(AQUARIA.showMatchingStructures.cluster);var e=String(window.location),t="?"+window.location.search.split("?")[1];e=e.replace(t,""),history.pushState({},"",e)})),h("#groupedFeatures").sortable({axis:"y"}),h(".featureTrack").sortable({axis:"y"}).css({cursor:"move"}),h("#groupedFeatures").disableSelection(),h(".featureHeader").on("click",(function(){var e=h(this).parent().children().eq(2);e.slideToggle("slow"),e.is(":visible")&&h(this).addClass("actived"),"►"==h(this).children().eq(0).text()?(h(this).children().eq(0).text("▼"),h(this).children("button").css({visibility:"visible"})):(h(this).children().eq(0).text("►"),h(this).children("button").css({visibility:"hidden"}));var t=h('div[class*="actived"]').not(this);t.children().eq(0).text("►"),t.parent().children().eq(2).slideUp("slow"),t.children("button").css({visibility:"hidden"}),t.removeClass("actived")})),h(".featureHeader").on({mouseenter:function(){h(this).css({"background-color":"#BEBEBE",cursor:"pointer"})},mouseleave:function(){h(this).css({"background-color":"#cccccc"})},mousedown:function(){},mouseup:function(){h(this).css({cursor:"pointer"})}}),h(".info").find('span:contains("undefined")').parent().remove();for(var D=document.querySelectorAll(".info"),U=0;U<D.length;U++)D[U].onmouseenter=function(){this.style.backgroundColor="orange",this.style.color="white",h(this).parent().parent().children("span.tooltiptext").css({visibility:"visible"})},D[U].onmouseleave=function(){var e=this;setTimeout((function(){e.style.backgroundColor="white",e.style.color="black",h(e).parent().parent().children("span.tooltiptext").css({visibility:"hidden"})}),3e3)};h(".tooltiptext").on({mouseenter:function(){h(this).css({visibility:"visible"})},mouseleave:function(){var e=this;setTimeout((function(){h(e).css({visibility:"hidden"})}),3e3)}}),w=new MutationObserver((function(e){var t=h("#groupedFeatures .featureCollection").map((function(){return h(this).attr("id")})).get();localStorage.setItem("featureOrder",t)})),w.observe(document.getElementById("groupedFeatures"),{attributes:!0,childList:!0});var P=new RegExp(/[A-Z a-z]+[0-9]+[A-za-z]+/),O=window.location.search.split("?")[1];(u.getUrlParameter("features")||O&&(P.test(O)||O.match(/^zenodo\./)))&&!AQUARIA.addedFeature&&o()}};function b(e){if("Added Features"==e[0].Server){new RegExp(/[A-Z a-z]+[0-9]+[A-za-z]+/);var t=window.location.search.split("?")[1];if(t=decodeURI(t),t&&t.match(/^zenodo\./)){var n=x(e);return n}}return{}}function _(e,t){if("Added Features"==e[0]){var n=window.location.search.split("?")[1];if(n=decodeURI(n),n&&n.match(/^zenodo\./)){var a=-1,r="",s=-1,i="",o=2,c=3,l=n.split(".");if(l.length<=2)return!0;isNaN(l[o])?(r=l[o],r=r.replace("%20"," ")):a=parseInt(l[o])-1,4==l.length?isNaN(l[c])?(i=l[c],i=i.replace("%20","")):s=parseInt(l[c])-1:s=0;var u="",d="";if(-1!=a)for(var p=Object.keys(t).sort(),h=0;h<p.length;h++)t[p[h]].order==a&&(u=p[h]);else if(""!=r)for(var f=Object.keys(t).sort(),m=0;m<f.length;m++)if(f[m].startsWith(r)){u=f[m];break}if(""==u)return;for(var g=[],v=0;v<e[1].length;v++)e[1][v].Category.startsWith(u)||g.push(v);var y=g.reverse();for(v=0;v<y.length;v++)e[1].splice(y[v],1);if(4==l.length){if(-1!=s)for(var w=Object.keys(t[u]["featureSets"]).sort(),A=0;A<w.length;A++)t[u].featureSets[w[A]].order==s&&(d=w[A],trackPos=t[u].featureSets[w[A]].posInTrack);else if(""!=i)for(var b=Object.keys(t[u]["featureSets"]).sort(),_=0;_<b.length;_++)if(b[_].startsWith(i)){d=b[_],trackPos=t[u].featureSets[b[_]].posInTrack;break}if(""==d)return;for(g=[],v=0;v<e[1].length;v++)e[1][v].Category.startsWith(u+"."+d)||g.push(v);for(y=g.reverse(),v=0;v<y.length;v++)e[1].splice(y[v],1)}}}}function S(e){var t=new RegExp(/[A-Z a-z]+[0-9]+[A-za-z]+/),n=window.location.search.split("?")[1],a=-1,r="",s=-1,i="",o=2,c=3;if(n=decodeURI(n),n&&(t.test(n)||n.match(/^zenodo\./))){var l=n.split(".");if(l.length<=2)return 0;isNaN(l[o])?(r=l[o],r=r.replace("%20"," ")):a=parseInt(l[o])-1,4==l.length?isNaN(l[c])?(i=l[c],i=i.replace("%20","")):s=parseInt(l[c])-1:s=0;var u=x(e);console.log("^^^^^^^^^^^^^^^^^^^^ The re-built data structure is "+n+" "+l[o]+" name_file:"+r),console.log(u);var d,p="",h="";if(-1!=a)for(var f=Object.keys(u),m=0;m<f.length;m++)u[f[m]].order==a&&(p=f[m]);else if(""!=r)for(var g=Object.keys(u),v=0;v<g.length;v++)if(g[v].startsWith(r)){p=g[v];break}if(""==p)return 0;if(-1!=s)for(var y=Object.keys(u[p]["featureSets"]).sort(),w=0;w<y.length;w++)u[p].featureSets[y[w]].order==s&&(h=y[w],d=u[p].featureSets[y[w]].posInTrack);else if(""!=i)for(var A=Object.keys(u[p]["featureSets"]).sort(),b=0;b<A.length;b++)if(A[b].startsWith(i)){h=A[b],d=u[p].featureSets[A[b]].posInTrack;break}if(""==h){for(var _=Object.keys(u[p]["featureSets"]),S=-1,I=0;I<_.length;I++)(-1==S||u[p].featureSets[_[I]].order<S)&&(S=u[p].featureSets[_[I]].posInTrack,h=_[I]);d=S}return d}return 0}function x(e){for(var t,n={},a=0,r=0;r<e.length;r++)if(!e[r].hasOwnProperty("SeqHash")||""==e[r].SeqHash||e[r].SeqHash==AQUARIA.showMatchingStructures.sequence.uniprot_hash){var s=e[r].Category.split(/\./)[1];console.log("Updated category "+s);var i=e[r].Category.split(/\./)[0];n.hasOwnProperty(i)||(n[i]={},n[i]["order"]=a++,n[i]["featureSets"]={}),n[i]["featureSets"].hasOwnProperty(s)||(t=I(n[i]["featureSets"]),n[i]["featureSets"][s]={},n[i]["featureSets"][s]["order"]=t,n[i]["featureSets"][s]["posInTrack"]=r)}return n}function I(e){var t=Object.keys(e);if(0==t.length)return 0;for(var n=0,a=0;a<t.length;a++)e[t[a]].order>n&&(n=e[t[a]].order);return n+1}function R(e,t){var n=e.Tracks;for(var a in viewBoxwidth=document.getElementById("structure-viewer").offsetWidth-window.AQUARIA.margin.right-window.AQUARIA.margin.left,n){var o=d.select(this),c=f.createSVGforFeature(o,r+AQUARIA.margin.left,25,viewBoxwidth);for(var l in c.attr("id","s_"+i+"_"+a).on("click",(function(){if("loaded"==d.select(this).attr("class"))AQUARIA.currentFeature.oid=null,AQUARIA.currentFeature.data=null,document.querySelector(".featureHeader.actived").click(),d.select("svg.loaded").classed("loaded",!1),g.default.commit("showLoader",!0),g.default.commit("setLoaderMsg","Removing feature..."),g.default.commit("showLoader",!1),"function"===typeof AQUARIA.onFeatureChange&&AQUARIA.onFeatureChange(null,0),F(),document.querySelector("#outerFeatureMap").remove(),document.querySelector("#popup").style.display="none",AQUARIA.showMatchingStructures.showMap(AQUARIA.showMatchingStructures.cluster),m.hidePanels();else{document.querySelector("#outerFeatureMap")&&document.querySelector("#outerFeatureMap").remove();var t=d.select(this).attr("id").split("_")[2];AQUARIA.currentFeature.oid=t,AQUARIA.currentFeature.data=e,g.default.commit("showLoader",!0),g.default.commit("setLoaderMsg","Loading feature..."),g.default.commit("showLoader",!1),"Added Features"!=e.Server&&(AQUARIA.addedFeature=!1),"function"===typeof AQUARIA.onFeatureChange&&AQUARIA.onFeatureChange(e,t),d.selectAll("svg.loaded rect.feature").attr("fill","#a4abdf"),d.select("svg.loaded").classed("loaded",!1),d.select(this).attr("class","loaded"),AQUARIA.passFeature(e,t,this),m.hidePanels()}})).on("mouseover",(function(){d.select(this).selectAll("rect.feature").attr("fill",(function(){return d.select(this).attr("color")}))})).on("mouseout",(function(){"loaded"!==d.select(this).attr("class")&&d.select(this).selectAll("rect.feature").attr("fill","#a4abdf")})).append("rect").attr("width",r+AQUARIA.margin.left).attr("height",25).attr("class","bg").attr("fill","none"),d.select("svg#s_"+i+"_"+a).append("g").attr("transform","translate("+AQUARIA.margin.left+",0)").append("rect").attr("width",r).attr("height",1).attr("transform","translate(0,13)").attr("class","insertion"),n[a])s++,d.select("#s_"+i+"_"+a+" g").append("rect").attr("width",(function(){return(n[a][l].size+1)*AQUARIA.srw>2?(n[a][l].size+1)*AQUARIA.srw:2})).attr("height",14).attr("id","r_"+i+"_"+a+"_"+l).attr("transform","translate("+n[a][l].start*(AQUARIA.srw-.0085)+",6)").attr("color",n[a][l].color).attr("fill","#a4abdf").attr("fill-opacity",(function(){return"single_track"==e.Class?.3:1})).attr("class","feature").on("mouseover",k(n[a][l])).on("mouseout",(function(){var e=d.select(this).attr("id");return d.select(this).call(M,e)}))}i++}function k(e){return function(){var t=d.select(this).attr("id");d.select(this).call(C,e,t)}}function C(e,t,n){w=setTimeout((function(){B(t,n)}),500),d.select("#"+n).attr("stroke-width","2px").attr("stroke","white")}function E(){return new Promise((function(e,t){var n=document.getElementById("superFamCharts_0_go");document.getElementById("superFamCharts").append(n)}))}function M(e,t){clearTimeout(w),d.select("#"+t).attr("stroke-width","0px"),setTimeout((function(){E().then((function(){h("div.popup").fadeOut()})).catch((function(e){h("div.popup").fadeOut()}))}),500)}function D(e){return new Promise((function(t,n){document.getElementById(e)&&document.getElementById(e).remove();var a=document.createElement("div");document.getElementById("superFamCharts").append(a),a.id=e,a.style="width: 100px; height: 100px; margin: 0 auto; background-color: white;",t()}))}function U(e,t,n,a,r,s,i,o,c,u,d){return new Promise((function(p,h){D(e).then((function(){try{l.chart(e,{chart:{type:"pie",margin:0},title:{text:a},plotOptions:{pie:{shadow:!1,center:["50%","50%"]}},tooltip:{valueSuffix:"%"},series:[{name:c,data:t,size:r,dataLabels:{enabled:!1,formatter:function(){return this.y>3?this.point.name:null},color:s,distance:i}},{name:u,data:n,innerSize:o,dataLabels:{enabled:!1,formatter:function(){return this.y>1?"<b>"+this.point.name+":</b> "+this.y+"%":null},color:d},id:"versions"}],responsive:{rules:[{condition:{maxWidth:100},chartOptions:{series:[{},{id:"versions",dataLabels:{enabled:!1}}]}}]}}),p()}catch(h){console.log("Highcharts error"),console.log(h),p(),console.log("In the highcharts plotting function")}}))}))}AQUARIA.passFeature=function(e,t,n){"function"===typeof AQUARIA.onFeatureChange&&AQUARIA.onFeatureChange(e,t),Q(e,parseInt(t))};var P=n("9e89"),O=["A","C","D","E","F","G","H","I","K","L","M","N","P","Q","R","S","T","V","W","Y"];function B(e,t){var n="";if(e.urls.length>0){n="<p>";for(var a=0;a<e.urls.length;a++)n+="<a href='"+e.urls[a].href+"' target='_blank'>"+e.urls[a].text+"</a><br>";n+="</p>"}h("div.popup").remove();var r="",s="";e.name.includes("&#8201;&#8594;&#8201;")&&(s=e.name.replace(/^.*\(/,""),s=s.replace(/\&.*$/,""));var i="<div id='buttons_eachAa'> <b>See also:</b><p class='pAaColor'> "+s+" &rarr;</p>";if(O.forEach((function(t,n){if(t!=s){var a=T(t,e.desc,e.start);i=i+"<button id='btnVI_"+t+"'",i=1==a?i+"class='btnAaBold_b'> <b>"+t+"</b> ":i+" class='btnAaBold'> "+t,i+="</button>"}})),i+="</div>",e.name.includes("span_missenseHeading")&&"undefined"!==typeof c){for(var o in c)!1===c[o]&&!0}var l="<b>"+e.label+"</b>";e.name.includes("span_missenseHeading")||(l+=" (",l=e.start===e.end?l+"Residue "+e.start:l+"Residues "+e.start+"-"+e.end,l+=") "),e.name.includes("span_missenseHeading");var u=e.desc+"<br>"+n;e.name.includes("span_missenseHeading")?e.start!=e.end?(g.default.commit("setVariant",e.start+"-"+e.end),g.default.commit("setPopupTitle",e.label),q(e.start+"-"+e.end,e.label)):(g.default.commit("setVariant",e.start),g.default.commit("setPopupTitle",e.label),q(e.start,e.label)):(g.default.commit("setVariant",-1),g.default.commit("setPopupTitle",l),g.default.commit("setPopupText",u),g.default.commit("setVariantIdx",-1),g.default.commit("setPopupCoordinates",document.querySelector("#"+t).getBoundingClientRect())),e.hasOwnProperty("hc_go")&&e.hasOwnProperty("hc_ec")&&e.hasOwnProperty("hc_species")?(console.log("CATH plot data"),console.log(e),L(e).then((function(){N()}))):(console.log("CATH plot no data"),console.log(e));var d=document.querySelector("#"+t).getBoundingClientRect(),p=document.querySelector("#"+t).getBBox(),f=p.width;P.appendPopup(r,d,f,!1)}function q(e,t){var n=g.default.getters.getVariantResidues;if(n.hasOwnProperty(e)&&n[e].hasOwnProperty("theOrigFeatStr"))for(var a=0;a<n[e].theOrigFeatStr.length;a++)if(t.includes(n[e].theOrigFeatStr[a])){g.default.commit("setVariantIdx",a);break}}function T(e,t,n){var a="<toReplace_varInfo_"+e+">",r="</toReplace_varInfo_"+e+">",s=t.indexOf(a),i=t.lastIndexOf(r),o=t.substring(s,i);return!!(o.match("UniProt")||o.match("FunVar")||o.match("COSMIC")||window.AQUARIA.hasOwnProperty("variantStructs")&&window.AQUARIA.variantStructs.hasOwnProperty(n)&&window.AQUARIA.variantStructs[n].hasOwnProperty(e)&&window.AQUARIA.variantStructs[n][e].hasOwnProperty("pdbs")&&window.AQUARIA.variantStructs[n][e]["pdbs"].length>0)}function L(e){return new Promise((function(t,n){"undefined"!==typeof e.hc_go&&e.hc_go.hasOwnProperty("data")&&e.hc_go.data.hasOwnProperty("series")&&e.hc_go.data.series.length>=2?U("hc_go_div",e.hc_go.data.series[0].data,e.hc_go.data.series[1].data,"",e.hc_go.data.series[0].size,e.hc_go.data.series[0].dataLabels.color,e.hc_go.data.series[0].dataLabels.dist,e.hc_go.data.series[1].innerSize,e.hc_go.data.series[0].name,e.hc_go.data.series[1].name,e.hc_go.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_div"))})).catch((function(e){console.log("CATH plot: 2"),D("hc_go_noData").then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_noData")),document.getElementById("hc_go_noData").innerHTML=document.getElementById("hc_go_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+e)}))})):(D("hc_go_noData").then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_noData")),document.getElementById("hc_go_noData").innerHTML=document.getElementById("hc_go_noData").innerHTML+"<br> <br> <center> No data</center>"})),console.log("CATH plot: 3")),"undefined"!==typeof e.hc_ec&&e.hc_ec.hasOwnProperty("data")&&e.hc_ec.data.hasOwnProperty("series")&&e.hc_ec.data.series.length>=2?U("hc_ec_div",e.hc_ec.data.series[0].data,e.hc_ec.data.series[1].data,"",e.hc_ec.data.series[0].size,e.hc_ec.data.series[0].dataLabels.color,e.hc_ec.data.series[0].dataLabels.dist,e.hc_ec.data.series[1].innerSize,e.hc_ec.data.series[0].name,e.hc_ec.data.series[1].name,e.hc_ec.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_div"))})).catch((function(e){D("hc_ec_noData").then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_noData")),document.getElementById("hc_ec_noData").innerHTML=document.getElementById("hc_ec_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+e)}))})):D("hc_ec_noData").then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_noData")),document.getElementById("hc_ec_noData").innerHTML=document.getElementById("hc_ec_noData").innerHTML+"<br> <br> <center> No data</center>"})).catch((function(){})),"undefined"!==typeof e.hc_species&&e.hc_species.hasOwnProperty("data")&&e.hc_species.data.hasOwnProperty("series")&&e.hc_species.data.series.length>=2?U("hc_species_div",e.hc_species.data.series[0].data,e.hc_species.data.series[1].data,"",e.hc_species.data.series[0].size,e.hc_species.data.series[0].dataLabels.color,e.hc_species.data.series[0].dataLabels.dist,e.hc_species.data.series[1].innerSize,e.hc_species.data.series[0].name,e.hc_species.data.series[1].name,e.hc_species.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_div"))})).catch((function(e){D("hc_species_noData").then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_noData")),document.getElementById("hc_species_noData").innerHTML=document.getElementById("hc_species_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+e)}))})):D("hc_species_noData").then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_noData")),document.getElementById("hc_species_noData").innerHTML=document.getElementById("hc_species_noData").innerHTML+"<br> <br> <center> No data</center>"})),t()}))}function N(){var e=document.getElementsByClassName("highcharts-pie-series");for(var t in e)if(e.hasOwnProperty(t)){var n=e[t].getElementsByTagName("path");for(var a in n)if(n.hasOwnProperty(a)){var r=n[a].getAttribute("fill");n[a].removeAttribute("fill"),n[a].setAttribute("style","fill:"+r)}}}function F(){var e=AQUARIA.currentAnnotationsIn3DViewer;if(void 0!==e){for(var t in e)AQUARIA.panel3d.removeAnnotation(e[t].id,e[t].annotationName);e.length=0}}function Q(e,t){if(t="undefined"!==typeof t?t:-1,t>=0)H(e,t);else for(t in e.Tracks)H(e,t)}function H(e,t){var n=new Array,a=new Array,r=new Array,s=new Array,i=new Array,c=new Array,l="#ffffff";if(void 0!=e){var u;for(var d in e.featureColours&&e.featureColours.length>0&&(l=e.featureColours[0]),e.Tracks[t])if(e.Tracks[t][d].show){if("multi_color"!==e.Class.color)e.Tracks[t][d].color.substring(1);for(var p in e.Tracks[t][d].color?n.push(e.Tracks[t][d].color):n.push(l),a.push(e.Tracks[t][d].label),r.push(e.Tracks[t][d].desc),s.push(e.Tracks[t][d].start+":"+e.Tracks[t][d].end),fURLs=new Array,fURLtxts=new Array,e.Tracks[t][d].urls)fURLs.push(e.Tracks[t][d].urls[p].href),fURLtxts.push(e.Tracks[t][d].urls[p].text);i.push(fURLs),c.push(fURLtxts)}var h=e.ProteinID;if(e.hasOwnProperty("SeqHash")&&""!=e.SeqHash)for(var f=0;f<AQUARIA.panel3d.attributes.sequences.length;f++)e.SeqHash==AQUARIA.panel3d.attributes.sequences[f].uniprot_hash&&(h=AQUARIA.panel3d.attributes.sequences[f].primary_accession,e.ProteinID=h);var m=(u={id:e.ProteinID,annotationName:e.Category,featureColours:n,featureNames:a,featureDescriptions:r,featurePositions:s,featureURLs:i},o(u,"featureURLs",i),o(u,"featureURLtexts",c),o(u,"featureURLtexts",c),u);AQUARIA.currentAnnotationsIn3DViewer.push(m),Array.isArray(m.id)?AQUARIA.panel3d.addAnnotation(m.id[0],m.annotationName,n,a,r,s,i,c):AQUARIA.panel3d.addAnnotation(m.id,m.annotationName,n,a,r,s,i,c)}}AQUARIA.currentAnnotationsIn3DViewer=new Array,e.exports.updateFeatureUI=A,e.exports.updateFeatureTabTitle=y},"2c07":function(e,t,n){e.exports=n.p+"img/aquaria-symbol-01.057e39d9.svg"},"31c8":function(e,t,n){e.exports=n.p+"img/up.64c3e14c.png"},"361b":function(e,t,n){"use strict";n("b923")},"36d6":function(e,t,n){},"39b5":function(e,t,n){e.exports=n.p+"img/MS-01.f169151b.svg"},"39dd":function(e,t,n){"use strict";n("e4c6")},"3cb4":function(e,t,n){"use strict";n("23c5")},"41b6":function(e,t,n){"use strict";n("4f7f")},"46c7":function(e,t,n){},"4c7a":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAQCAYAAADqDXTRAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNq8020KgCAMBmAb0TGDQLyY0Ek6SbcoEHKg0YfWttLBK+iczy8bY8yilOpUvVrBL9rHVQLR0Yhan6EC7IJjIRyUhncQN3BolIJP4BUtAd/AFPonnARzaIT7D7AL8zbVhIfBUQhHcMxdgJcHuPArSEE5MAmkohSYDHLQJ5gFctEUzAYl6BFeJSBWK/yHCE0+s2R4E2AAhOs7b2YKWEMAAAAASUVORK5CYII="},"4d26":function(e,t,n){"use strict";n("9363")},"4f7f":function(e,t,n){},"5a2b":function(e,t,n){"use strict";n.r(t),n.d(t,"createFeatureMap",(function(){return h})),n.d(t,"createSVGforFeature",(function(){return f})),n.d(t,"drawTrack",(function(){return m})),n.d(t,"drawFeatures",(function(){return v})),n.d(t,"createMouseOverCallback",(function(){return y})),n.d(t,"mouseoverFeature",(function(){return S})),n.d(t,"mouseoutFeature",(function(){return x})),n.d(t,"moveTheDiv",(function(){return I})),n.d(t,"removeCurrentAnnotationFrom3DViewer",(function(){return k}));n("159b"),n("cb29"),n("caad"),n("2532"),n("ac1f"),n("1276"),n("b64b"),n("b0c0"),n("5319"),n("d3b7"),n("466d");var a=n("5698"),r=n.n(a),s=n("1157"),i=n.n(s),o=n("1b1f"),c=n("9e89"),l=(n("ae8a"),n("4360")),u=n("29c86"),d="",p=!1;function h(e,t,n){document.querySelectorAll("#selectedCluster [id*='r_'] rect").forEach((function(e){e.style.fill="#a5a5a5",e.style.stroke="#a5a5a5"})),document.querySelectorAll("#selectedCluster [id*='r_'] polygon").forEach((function(e){e.style.fill="#a5a5a5",e.style.stroke="#a5a5a5"})),this.width=document.getElementById("structure-viewer").offsetWidth/1.2-window.AQUARIA.margin.right-window.AQUARIA.margin.left,this.height=40-window.AQUARIA.margin.top-window.AQUARIA.margin.bottom+35,this.datum=e;var a=r.a.select("#selectedFeature").append("div").attr("id","outerFeatureMap");this.drawTrack(this.datum,this.createSVGforFeature(a,"100vw",this.height+10,this.width+1),t,n),r.a.select("#outerFeatureMap > svg").attr("class","loadedFeature")}function f(e,t,n,a){return this.nusvg=e.append("svg").attr("width",t).attr("height",n).attr("viewBox","0 0 "+a+" "+n).attr("preserveAspectRatio","none"),this.nusvg}function m(e,t,n,a){var s=this,i=[];this.nusvg=t;var c=window.AQUARIA;for(var u in c.currentFeature.oid&&e&&e.Tracks&&e.Tracks.length>1?i[0]=e.Tracks[c.currentFeature.oid]:e&&e.Tracks&&(i=e.Tracks),this.nusvg.on("click",(function(){if(r.a.select(this).attr("class").includes("loaded"))window.location.hash.includes("Features")&&(r.a.select("svg.loaded").classed("loaded",!1),l["default"].commit("showLoader",!0),l["default"].commit("setLoaderMsg","Removing feature..."),l["default"].commit("showLoader",!1),"function"===typeof c.onFeatureChange&&c.onFeatureChange(null,0),s.removeCurrentAnnotationFrom3DViewer(),c.currentFeature.oid=null,c.currentFeature.data=null,document.querySelector("#outerFeatureMap").remove(),document.querySelector("#popup").style.display="none",c.showMatchingStructures.showMap(c.showMatchingStructures.cluster),o["hidePanels"]());else{document.querySelector(".featureHeader.actived").click(),document.querySelector("#outerFeatureMap")&&document.querySelector("#outerFeatureMap").remove();var t=r.a.select(this).attr("id").split("_")[2];l["default"].commit("showLoader",!0),l["default"].commit("setLoaderMsg","Loading feature..."),l["default"].commit("showLoader",!1),"Added Features"!==e.Server&&(c.addedFeature=!1),c.passFeature(e,t,this),"function"===typeof c.onFeatureChange&&c.onFeatureChange(e,t),r.a.selectAll("svg.loaded rect.feature").attr("fill","#a4abdf"),r.a.select("svg.loaded").classed("loaded",!1),r.a.select(this).attr("class","loaded"),s.createFeatureMap(e,n),o["hidePanels"]()}})),this.nusvg.append("rect").attr("width",this.width+c.margin.left).attr("height",25).attr("class","bg").attr("fill","none"),i)this.nusg=this.nusvg.append("g").attr("transform","translate(0 ,20)"),this.nusg.append("rect").attr("width",this.width).attr("height",1).attr("transform","translate(0,13)").attr("class","insertion");for(var h in i[u])if(0==p&&a&&"undefined"!==typeof a&&1==a){var f=g(i);if(-1!=f.o&&-1!=f.p){for(var m=0;m<i[f.o].length;m++)this.drawFeatures(m,f.o,i,n);r.a.selectAll("#selectedFeature rect.feature").attr("fill",(function(){return r.a.select(this).attr("color")})),d="r_"+f.o+"_"+f.p;var v=document.getElementById(d),y=new MouseEvent("mouseover",{view:window,bubbles:!0,cancelable:!0});v.dispatchEvent(y),r.a.select("#"+d).attr("stroke-width","0px")}else this.drawFeatures(h,u,i,n,this);p=!0}else this.drawFeatures(h,u,i,n,this);r.a.selectAll("#selectedFeature rect.feature").attr("fill",(function(){return r.a.select(this).attr("color")}))}function g(e){for(var t=l["default"].getters.getVariantResidues,n="",a=Object.keys(t),r=0;r<a.length;r++)if(t[a[r]].hasOwnProperty("order")&&t[a[r]].order.includes(0)){var s=t[a[r]].order.indexOf(0);-1!==s&&(n=t[a[r]].theOrigFeatStr[s])}var i={o:-1,p:-1},o={};if(""!=n&&e.length>0)for(r=0;r<e.length;r++)for(var c=0;c<e[r].length;c++)o[e[r][c].name]=[r,c],e[r][c].name.includes(n)&&(i.o=r,i.p=c);var u=-1;if(-1==i.o&&-1==i.p){for(r=0;r<e.length;r++)for(c=0;c<e[r].length;c++)o[e[r][c].name]=[r,c];var d=Object.keys(o);for(r=0;r<a.length;r++)for(c=0;c<t[a[r]].theOrigFeatStr.length;c++)for(var p=0;p<d.length;p++)d[p].includes(t[a[r]].theOrigFeatStr[c])&&(-1==u||t[a[r]].order[c]<u)&&(u=t[a[r]].order[c],i.o=o[d[p]][0],i.p=o[d[p]][1])}return i}function v(e,t,n,a){document.getElementById("structure-viewer").offsetWidth;var s=window.AQUARIA.showMatchingStructures.sequence.length,i=r.a.scale.linear().domain([1,s]).range([1,document.getElementById("structure-viewer").offsetWidth/1.2-window.AQUARIA.margin.right-window.AQUARIA.margin.left-5]),o=i(parseInt(n[t][e].start));this.nusg.append("rect").attr("width",(function(){return parseInt((n[t][e].size+1)*window.AQUARIA.coverageMapsrw)>2?parseInt((n[t][e].size+1)*window.AQUARIA.coverageMapsrw):2})).attr("height",14).attr("id","r_"+t+"_"+e).attr("x",o).attr("transform","translate(0,6)").attr("color",n[t][e].color).attr("fill","#a4abdf").attr("class","feature").on("mouseover",y(n[t][e],a)).on("mouseout",(function(){var e=r.a.select(this).attr("id");return r.a.select(this).call(x,e)}))}function y(e,t){return function(){var n=r.a.select(this).attr("id");r.a.select(this).call(S,e,n,t)}}var w,A=["A","C","D","E","F","G","H","I","K","L","M","N","P","Q","R","S","T","V","W","Y"];function b(e,t,n){var a="";if(e.urls.length>0){a="<p>";for(var r=0;r<e.urls.length;r++)a+="<a href='"+e.urls[r].href+"' target='_blank'>"+e.urls[r].text+"</a>";a+="</p>"}var s="",i="";e.name.includes("&#8201;&#8594;&#8201;")&&(i=e.name.replace(/^.*\(/,""),i=i.replace(/\&.*$/,""));var o='<div id="buttons_eachAa"> <b>See also:</b><p class="pAaColor"> '+i+" &rarr;</p>";if(A.forEach((function(t,n){if(t!==i){var a=R(t,e.desc,e.start);o=o+"<button id='btnVI_"+t+"'",o=!0===a?o+' class="btnAaBold_b"> <b>'+t+"</b> ":o+' class="btnAaBold"> '+t,o+="</button>"}})),o+="</div>",e.name.includes("span_missenseHeading")&&"undefined"!==typeof n){for(var u in n)!1===n[u]&&!0}var d="<b>"+e.label+"</b>";e.name.includes("span_missenseHeading")||(d+=" (",d=e.start===e.end?d+"Residue "+e.start:d+"Residues "+e.start+"-"+e.end,d+=") "),e.name.includes("span_missenseHeading");var p=e.desc+"<br>"+a;e.name.includes("span_missenseHeading")?e.start!=e.end?(l["default"].commit("setVariant",e.start+"-"+e.end),l["default"].commit("setPopupTitle",e.label),_(e.start+"-"+e.end,e.label)):(l["default"].commit("setVariant",e.start),l["default"].commit("setPopupTitle",e.label),_(e.start,e.label)):(l["default"].commit("setVariant",-1),l["default"].commit("setPopupTitle",d),l["default"].commit("setPopupText",p),l["default"].commit("setVariantIdx",-1)),Object.prototype.hasOwnProperty.call(e,"hc_go")&&Object.prototype.hasOwnProperty.call(e,"hc_ec")&&Object.prototype.hasOwnProperty.call(e,"hc_species")?C(e).then((function(){E()})):console.log("CATH plot no data");var h=document.querySelector("#"+t).getBoundingClientRect(),f=document.querySelector("#"+t).getBBox(),m=f.width;c["appendPopup"](s,h,m,!0)}function _(e,t){var n=l["default"].getters.getVariantResidues;if(n.hasOwnProperty(e)&&n[e].hasOwnProperty("theOrigFeatStr"))for(var a=0;a<n[e].theOrigFeatStr.length;a++)if(t.includes(n[e].theOrigFeatStr[a])){l["default"].commit("setVariantIdx",a),console.log("Set variant idx "+a);break}}function S(e,t,n,a){w=setTimeout((function(){b(t,n,a)}),500),r.a.select("#"+n).attr("stroke-width","2px").attr("stroke","white")}function x(e,t){clearTimeout(w),r.a.select("#"+t).attr("stroke-width","0px"),setTimeout((function(){I().then((function(){i()("div.popup").fadeOut()})).catch((function(e){console.log(e)}))}),500)}function I(){return new Promise((function(e,t){var n=document.getElementById("superFamCharts_0_go");document.getElementById("superFamCharts").append(n)}))}function R(e,t,n){var a="<toReplace_varInfo_"+e+">",r="</toReplace_varInfo_"+e+">",s=t.indexOf(a),i=t.lastIndexOf(r),o=t.substring(s,i);return!!(o.match("UniProt")||o.match("FunVar")||o.match("COSMIC")||window.AQUARIA.hasOwnProperty("variantStructs")&&window.AQUARIA.variantStructs&&window.AQUARIA.variantStructs.hasOwnProperty(n)&&window.AQUARIA.variantStructs[n].hasOwnProperty(e)&&window.AQUARIA.variantStructs[n][e].hasOwnProperty("pdbs")&&window.AQUARIA.variantStructs[n][e]["pdbs"].length>0)}function k(){var e=window.AQUARIA.currentAnnotationsIn3DViewer;if(void 0!==e){for(var t in e)window.AQUARIA.panel3d.removeAnnotation(e[t].id,e[t].annotationName);e.length=0}}function C(e){return new Promise((function(t,n){"undefined"!==typeof e.hc_go&&Object.prototype.hasOwnProperty.call(e.hc_go,"data")&&Object.prototype.hasOwnProperty.call(e.hc_go.data,"series")&&e.hc_go.data.series.length>=2?M("hc_go_div",e.hc_go.data.series[0].data,e.hc_go.data.series[1].data,"",e.hc_go.data.series[0].size,e.hc_go.data.series[0].dataLabels.color,e.hc_go.data.series[0].dataLabels.dist,e.hc_go.data.series[1].innerSize,e.hc_go.data.series[0].name,e.hc_go.data.series[1].name,e.hc_go.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_div"))})).catch((function(e){D("hc_go_noData").then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_noData")),document.getElementById("hc_go_noData").innerHTML=document.getElementById("hc_go_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+e)}))})):D("hc_go_noData").then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_noData")),document.getElementById("hc_go_noData").innerHTML=document.getElementById("hc_go_noData").innerHTML+"<br> <br> <center> No data</center>"})),"undefined"!==typeof e.hc_ec&&Object.prototype.hasOwnProperty.call(e.hc_ec,"data")&&Object.prototype.hasOwnProperty.call(e.hc_ec.data,"series")&&e.hc_ec.data.series.length>=2?M("hc_ec_div",e.hc_ec.data.series[0].data,e.hc_ec.data.series[1].data,"",e.hc_ec.data.series[0].size,e.hc_ec.data.series[0].dataLabels.color,e.hc_ec.data.series[0].dataLabels.dist,e.hc_ec.data.series[1].innerSize,e.hc_ec.data.series[0].name,e.hc_ec.data.series[1].name,e.hc_ec.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_div"))})).catch((function(e){D("hc_ec_noData").then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_noData")),document.getElementById("hc_ec_noData").innerHTML=document.getElementById("hc_ec_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+e)}))})):D("hc_ec_noData").then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_noData")),document.getElementById("hc_ec_noData").innerHTML=document.getElementById("hc_ec_noData").innerHTML+"<br> <br> <center> No data</center>"})).catch((function(){})),"undefined"!==typeof e.hc_species&&Object.prototype.hasOwnProperty.call(e.hc_species,"data")&&Object.prototype.hasOwnProperty.call(e.hc_species.data,"series")&&e.hc_species.data.series.length>=2?M("hc_species_div",e.hc_species.data.series[0].data,e.hc_species.data.series[1].data,"",e.hc_species.data.series[0].size,e.hc_species.data.series[0].dataLabels.color,e.hc_species.data.series[0].dataLabels.dist,e.hc_species.data.series[1].innerSize,e.hc_species.data.series[0].name,e.hc_species.data.series[1].name,e.hc_species.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_div"))})).catch((function(e){D("hc_species_noData").then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_noData")),document.getElementById("hc_species_noData").innerHTML=document.getElementById("hc_species_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+e)}))})):D("hc_species_noData").then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_noData")),document.getElementById("hc_species_noData").innerHTML=document.getElementById("hc_species_noData").innerHTML+"<br> <br> <center> No data</center>"})),t()}))}function E(){var e=document.getElementsByClassName("highcharts-pie-series");for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=e[t].getElementsByTagName("path");for(var a in n)if(Object.prototype.hasOwnProperty.call(n,a)){var r=n[a].getAttribute("fill");n[a].removeAttribute("fill"),n[a].setAttribute("style","fill:"+r)}}}function M(e,t,n,a,r,s,i,o,c,l,d){return new Promise((function(p,h){D(e).then((function(){try{u.chart(e,{chart:{type:"pie",margin:0},title:{text:a},plotOptions:{pie:{shadow:!1,center:["50%","50%"]}},tooltip:{valueSuffix:"%"},series:[{name:c,data:t,size:r,dataLabels:{enabled:!1,formatter:function(){return this.y>3?this.point.name:null},color:s,distance:i}},{name:l,data:n,innerSize:o,dataLabels:{enabled:!1,formatter:function(){return this.y>1?"<b>"+this.point.name+":</b> "+this.y+"%":null},color:d},id:"versions"}],responsive:{rules:[{condition:{maxWidth:100},chartOptions:{series:[{},{id:"versions",dataLabels:{enabled:!1}}]}}]}}),p()}catch(h){console.log("Highcharts error"),console.log(h),p()}}))}))}function D(e){return new Promise((function(t,n){document.getElementById(e)&&document.getElementById(e).remove();var a=document.createElement("div");document.getElementById("superFamCharts").append(a),a.id=e,a.style="width: 100px; height: 100px; margin: 0 auto; background-color: white;",t()}))}},"60fa":function(e,t,n){},"61c9":function(e,t,n){},"62bc":function(e,t,n){e.exports=n.p+"img/down.7ae68b7a.png"},"69c8":function(e,t,n){},"715b":function(e,t,n){"use strict";n("ea62")},"734d":function(e,t,n){},7829:function(e,t,n){},"7f5f":function(e,t,n){"use strict";n("2b1d")},8673:function(e,t,n){e.exports=n.p+"img/aquaria-loader3.223aec7b.svg"},"88de":function(e,t,n){"use strict";n("a309")},"8f69":function(e,t,n){},"8f89":function(e,t,n){"use strict";n("7829")},"92b5":function(e,t,n){"use strict";n("69c8")},9363:function(e,t,n){},"96a5":function(e,t,n){"use strict";n("b072")},9704:function(e,t,n){"use strict";n("36d6")},"9b83":function(e,t,n){"use strict";n("c48f")},"9b93":function(e,t,n){"use strict";n("60fa")},"9db5":function(e,t,n){e.exports=n.p+"img/FT-01.e4a6c439.svg"},a01c:function(e,t,n){"use strict";n("734d")},a309:function(e,t,n){},a6f5:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGoWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0NDYwLCAyMDIwLzA1LzEyLTE2OjA0OjE3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMC0xMS0wN1QxODo0Njo0OC0wNTowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjAtMTItMDlUMDg6NDk6MTYtMDU6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjAtMTItMDlUMDg6NDk6MTYtMDU6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjEzNGEyNTEtODFjYy00ZDNjLWJhMmQtY2VhMmM1MGY2YmQxIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ZTFkNTMwYWUtYzY2MS0wMjRlLTk1ZTItNTU4ODI4OWU1NTkxIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YjhlNjQyOWMtMjlkZS00NTc2LWEzN2MtMjM4NDJiNGUyZjA5IiB0aWZmOk9yaWVudGF0aW9uPSIxIiB0aWZmOlJlc29sdXRpb25Vbml0PSIyIiBleGlmOkNvbG9yU3BhY2U9IjEiIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSI3MDAiIGV4aWY6UGl4ZWxZRGltZW5zaW9uPSI3MDAiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiOGU2NDI5Yy0yOWRlLTQ1NzYtYTM3Yy0yMzg0MmI0ZTJmMDkiIHN0RXZ0OndoZW49IjIwMjAtMTItMDlUMDg6NDI6NTQtMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4yIChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoyMTM0YTI1MS04MWNjLTRkM2MtYmEyZC1jZWEyYzUwZjZiZDEiIHN0RXZ0OndoZW49IjIwMjAtMTItMDlUMDg6NDk6MTYtMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4yIChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtMh4BEAAAZoSURBVHja7Z17TNVlGMdPK4FlV3FqIDSJbF0sMqrF2rqRf5i1yrTsvsx1W6Os7LbZ1cxpq2hWFq78x8op5FKbRZOwaFZqm80tS6g0BwYiyOXAOfD2fT0v2xlwgvO87znv8x7eZ/uMjXH5Pb/P77383tsJCCECHj5wuIhjwDgwBRSD2eA+MBfMAdNAATgNHOeFJIYMUAjuB6VgHagBf4B/QRtoB02gFmwD68F74GFwGTjZC9FjEngElIMGoR8tYAN4RpUuL2SY3AI2icRHlSpxXkgM7gXbRfLjd1AC0ryQCLPAbmE/9qv2ZsQKOVPV6dxCdhYuGmlC7gJB3TvX29t79Gs4HBahUOgo8nvRaMSCkSJkeSIe62gBhoTI+Bykp6oQ+R7wk3AvZKN/dqoJOQXsEe7GEa5SKL+UqZ4y10OOBpzlupATwZ8idaIZ5LkspCbBN+gv8D34CmxEI14px7Hwtd5Qoz5YHHBVyLIE3IxfwTtgBshXI78D/jdEpIPzwG09PT2rwD7Dcja6JmSGYRFrwTXUi4aMUZAyG1QbFPOYK0JGGxRRDS40dfGQEYCU6aDOkJiJLgj5zJCMpxOVBGSkQcr7BqTs4C6k0ICIfeDiZCQDKTMNSLmTs5CfNZOTXeQxyUwIQqZqSmniKqTAwIxelo2kUFKu1JRyN0chWzQS6gGTbT5pEHKDhpS93IScq1k6buTQhURJeU0jhyJOQpZqJPI1pzdflJJ/iHms4yTkbw0hE5gJKdaouk7iIESnMS/jOKQNITuJ+dzBQcgCDSHZTIVMI+azgoOQco3pUbZTo5BSS8hpNwchtUQhszgLAYuI3fdTbQrJIsqQreY45iWkmJjb5TaFXEq86F+Ylw7J8aCDkNtcm0JuIgpZ7YAQyS5Cbs/ZFPIQUchiR4RQVla+blPI80QhJS4IQTtSRsjtXZtCFhGFuLIN4C1CbittCnmFKGSeI0JKuY8+9P/GU0Qh8x0R8hEht1KbQu4hCnnTESGVhNxetinkWqKQCkeE7CXk9oRNIecThexxQMZY0E3I7VabQuTa3U6ilDzBu8t7MzGvc2wPLm4jXjj3/XwfEhdqHGtbSBlRSA3zEnKIkFMVh+H32zUmqAqZyniAmM9LHISM0RBSzVRIIzGfS7gscvhOQ8pUZjIeJC5yaOS06mTegBmo4Sf1GyMZJ4Au4oP1AichGf0nc+J8ypYwEVKpUdIzOQmRvKpRSoSa7LK5avFFjfVY1hZsDLX1WWhKudqSjEc1F1tfwFFIQFU9A4TEmez0JMt4XFPGJpsle6gfGAVCmqUkaW/xkPGGgQ07kzgLidnjIiT+iUjQ5h1cyxTI+EHoh/XOCHkegSilWQ1njzYkIhcsNbThczOHnuFwf1CeBnrEkBQZB9XTmEMUUQBWgrAwF1UuCZFcZaDX1T/kUs2tYCGYqYa65RaANPUQpKtqrlDNZi7D/9uVoBMdZOwQlo8GjPcXSmJJMXiT5JB3vYgceXFQ0FYb6sT2ZA+56wgJqPnzREuxHd+6JGSkSNnskpBBh1ZSML5xSUhAvfClenzpkpCAGq86kOJSPnVJSN9A5Bqud7O7u7vLwJ/Z4JKQPq4TkU844BKHwfXBYDC7vb29TvePocOy3jUhAfViJZdfHrIoQpaIt0XUnvmurq4JENNgQMrHrgnpQ26WlGdkJfMEU9mWLY41JIOqKwdiGg1IKXdRSDRyTmSVevM2HfKDXypEZBdwxlDXEgqFpJT9BqRUuCwk+rhAeTqC3DizE7QSBcj94x+IyEcjjY/3OiBlImjWlSIP5JTHDLosZLDjyguVpPmq7ZGjACsUsh2Qm4ieFJHPIykyNacSDofPgJTDBqSsTSUhVoGUfEip59T7GtFClJQc0GpAyhovxNxc/GTQaqCD8YWIcRi0F0KQgpLSZEDKj16IOSnZJqovxLNeiDkp+ZDSQmhD5JhZ9KxnrhdirqHPQ++rKV4heOGM/laJF2JWShak6Ix9LfFCzEs5HdUQdexroReSAFBKclEVNfxfVRUjiryQBIFSMr6jo6MujoUdq30vK8EEg8HMzs7O4YwSyw8by/RCklN9jW1ra9sCYlVVcgRb68x7f6PjLymBlpaWK9CuLIeUrerNXI5jzfFjWSmIvwleiMcL8UI8XogX4vFCvBCPF+KF+JvghXi8EC/E44V4IR7j/Ac9YhOzv9yXfwAAAABJRU5ErkJggg=="},ae0b:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[n("Header"),n("Sequence"),n("div",[n("AboutAlignment")],1),n("div",[n("AboutPdb")],1),n("div",[n("AboutAquaria"),n("UserHelp"),n("Errors")],1),n("div",{attrs:{id:"heightinspector"}}),n("StructureViewer"),n("Tabs"),n("CoverageMap"),e.data.loader?n("Loader"):e._e(),n("a",{attrs:{href:e.data.hash}},[n("div",{staticClass:"hide",attrs:{id:"scrim"},on:{click:e.dismissPanel}})])],1)},r=[],s=(n("159b"),n("4360")),i=(n("d81d"),n("ac1f"),n("1276"),n("a15b"),n("466d"),n("99af"),n("caad"),n("2532"),n("2b3b"));window.AQUARIA={};var o=window.AQUARIA,c=n("1157"),l=n("2bb0"),u=n("ae8a"),d=n("356e"),p=n("22b1"),h=n("5698"),f=n("bc3a");n("b3c8");var m=10;(function(e){var t=[],n=function(e){t.push(e)};o.overlay=function(){var e=document.createElement("div");e.className="dimmer",document.body.append(e)},o.RemoveOverlay=function(){document.querySelectorAll("div.dimmer").forEach((function(e){return e.remove()}))},o.fireProteinSubmitListeners=function(e,n,a){t.forEach((function(t){t.submitFired(e,n,a)}))},o.proteinTopTen=new p("protein_top_ten",m),o.pdbTopTen=new p("pdbTopten",m),n(o.proteinTopTen);var a=1,r=null;try{window.aquariaReady=function(){};var i="";"applet"===window.threedViewer?i="simple":"webgl"!==window.threedViewer&&"jolecule"!==window.threedViewer||(i="detailed"),e("span#threedSwitcher a").attr("title",i),e("span#threedSwitcher").click((function(){"applet"===window.threedViewer?window.threedViewer="jolecule":"webgl"!==window.threedViewer&&"jolecule"!==window.threedViewer||(window.threedViewer="applet"),localStorage.setItem("3DViewer",window.threedViewer),location.reload()})),e("#biounitLeft").click((function(){a-=1,o.display_3D_structure(r)})),e("#biounitRight").click((function(){a+=1,o.display_3D_structure(r)}));var c=function(e){var t=e.split(":").map((function(e){return parseFloat(e)})),n=t[0]*t[5]*t[10]+t[1]*t[6]*t[8]+t[2]*t[4]*t[9]-(t[2]*t[5]*t[8]+t[1]*t[4]*t[10]+t[0]*t[6]*t[9]);return n<0&&(t[0]=-t[0],t[4]=-t[4],t[8]=-t[8]),t.join(":")};o.display_3D_structure=function(t,n){r=t,o.currentChain=t.pdb_chain;var i=t.alignment,l=t.pdb_chain,u=t.pdb_id,p=t.sequences,m=c(t.transforms[0]),g=t.common_names,v=t.source_primary_accession,y=t.conservations;if(a=!t.biounits||t.biounits<1?0:t.biounits,u.match(/^\d\w\w\w$/)){var w=e("#threeD").width(),A=w;A=e("#threeDSpan").innerHeight(),A<570&&(A=570);var b="".concat(window.BACKEND,"/getPubMedForPDB/").concat(u,"/").concat(window.AQUARIA.prefferedChain[0]?window.AQUARIA.prefferedChain[0]:l[0]);f({method:"get",url:b}).then((function(t){var r=t.data[0],c=r.Biounits;(!c||c<1)&&(a=0,r.Biounits=0),c>0&&"undefined"!==typeof r.experimental_method&&null!==r.experimental_method&&r.experimental_method.toLowerCase().indexOf("x-ray")>-1?(n&&(a=1,d.updatePDBPanel(r,g[0],n.alignment_identity_score)),a>c?a=0:a<0&&(a=c),0===a?(e("#biounitType").text("Asymmetric Unit"),e("#biounitCount").hide()):(e("#biounitType").text("Biological Assembly "),c>1?e("#biounitCount").show():e("#biounitCount").hide()),e("#biounitDisplay").show(),e("#biounitCount").text(a+"/"+c),a!==c?e("#biounitRight").show():e("#biounitRight").hide(),a>0?e("#biounitLeft").show():e("#biounitLeft").hide()):(r&&d.updatePDBPanel(r,g[0],n.alignment_identity_score),e("#biounitDisplay").hide(),a=0),o.pdb_data=r,h.selectAll("svg.loaded rect.feature").attr("fill","#a4abdf"),h.selectAll("svg.loaded").classed("loaded",!1);var f=o.panel3d.generateAttributes(w,A,u,l,a,v,p,g,i,"",m,y,o.structures2match.version_string);if(e("#jnlp_app_attributes").val(JSON.stringify(f)),window.hide3DViewer)s["default"].commit("showLoader",!0),s["default"].commit("setLoaderMsg","Applet is not enabled for this browser. Launch Application instead.");else{var b=function(e,t){var n=[];for(var a in window.AQUARIA.structures2match.clusters)for(var r in window.AQUARIA.structures2match.clusters[a].members)if(window.AQUARIA.structures2match.clusters[a].members[r].pdb_chain[0].includes(t)&&window.AQUARIA.structures2match.clusters[a].members[r].pdb_id.includes(e))return n.cluster=parseInt(a),n.member=parseInt(r),n},_=window.location.href.substr(window.location.origin.length+window.location.pathname.length);history.pushState(null,p[0].primary_accession,window.location.protocol+"//"+window.location.host+"/"+s["default"].getters.getOrganism+"/"+s["default"].getters.getGene+"/"+u+"/"+(window.AQUARIA.prefferedChain[0]?window.AQUARIA.prefferedChain[0]:l[0])+_),window.AQUARIA.PDBIndex=b(window.AQUARIA.currentMember.pdb_id,window.AQUARIA.currentMember.pdb_chain),o.panel3d.initialised?o.panel3d.reload(f):o?o.panel3d.load(f):(console.log("AQUARIA.display_3D_structure Error: Cannot load the applet!"),alert("Cannot load the Applet!"))}}))}else console.log("AQUARIA.display_3D_structure Error: Invalid PDB identifier")},o.display_features=function(e){var t=[],n=[];e.forEach((function(e){t.push(e.primary_accession),n.push(e.uniprot_hash)})),"undefined"!==typeof u?(o.blankPanel("#featurelist",!0),g(),u.fetch_annotations(t,(function(e,t){l.updateFeatureUI(e,t),o.blankPanel("#featurelist",!1)}))):alert("Could not find fetch_das_annotations.")};var g=function(){e("#featureCounter").show(),e("#waitForFeatures").show()};o.updateDocumentTitle=function(e,t,n,a){document.title="Aquaria: "+e+", "+t+"% Sequence Identity to PDB "+n+", chain "+a,l.updateFeatureTabTitle(e)},o.refresh=function(){"undefined"!==typeof o.showMatchingStructures&&(o.showMatchingStructures.refresh(),l.updateFeatureUI())},o.load3DAlignment=function(e,t){o.currentMember=e,o.updateDocumentTitle(o.preferred_protein_name,e.alignment_identity_score,e.pdb_id,window.AQUARIA.prefferedChain[0]?window.AQUARIA.prefferedChain[0]:e.pdb_chain[0]),o.fireProteinSubmitListeners(o.preferred_protein_name,t.primary_accession,e.pdb_id),s["default"].commit("showLoader",!0),s["default"].commit("setLoaderMsg","Waiting for PDB..."),o.blankPanel("#featurelist",!0),o.blankPanel("#aboutPDB",!0);var n={selector:[t.primary_accession],selectPDB:this.member.pdb_id,selectChain:window.AQUARIA.prefferedChain[0]?window.AQUARIA.prefferedChain[0]:this.member.pdb_chain[0]},a="".concat(window.BACKEND,"/get_3D_alignment");f({method:"get",url:a,params:n}).then((function(t){var n=t.data;s["default"].commit("setSecondaryStructure",n.secondary_structure),o.display_3D_structure(n,e),o.blankPanel("#vis",!1),o.blankPanel("#aboutPDB",!1),o.blankPanel("#uniProtDesc",!1),o.blankPanel("#featurelist",!1)}))},o.display_member=function(e){var t=o.structures2match;t.clusters&&t.clusters.length>0?("undefined"===typeof e&&(e=t.clusters[t.Selected_PDB.cluster_number].members[t.Selected_PDB.member_number]),o.member=e,o.load3DAlignment(e,t.sequences[0])):"undefined"===typeof t.pdb_id?(store.commit("showLoader",!0),d.updateUniprotInfo(null),o.showMatchingStructures.removeAll()):(store.commit("showLoader",!0),store.commit("setLoaderMsg","Cannot find protein"),s["default"].commit("setErrorTitle","Cannot find protein."),d.updateUniprotInfo(null),o.showMatchingStructures.removeAll())}}catch(v){alert("Error with displaying structures: "+v.message)}})(c),o.margin={top:10,right:70,bottom:20,left:20},window.AQUARIA.chainSelected=i["chainSelected"],o.structures2match={},o.blankCount={},o.currentMember=null;var g=c;o.blankPanel=function(e,t,n){var a=e+" .blank";t?0===g(a).length&&(n?g(e).append('<div class="blank hidden"><br><p class="centered">'+n+"</p></div>"):g(e).append('<div class="blank hidden"></div>'),g(a).fadeIn("fast"),g(a).css("height",g(e).css("height"))):g(a).fadeOut("slow",(function(e){g(a).remove()}))};var v,y,w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"header"}},[n("div",{staticClass:"item fix level3",attrs:{id:"logo"}},[n("a",{attrs:{href:"#About"},on:{click:e.showScrim}},[n("img",{attrs:{src:e.aquariasymbol}})])]),n("Title"),n("div",{staticClass:"item fix level3",attrs:{id:"menu-btn"}},[n("a",{attrs:{href:"#Menu"}},[n("img",{attrs:{src:e.hamburger}})])]),n("Menu")],1)},A=[],b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"item title fix level5",attrs:{id:"title"}},[e.organism_name&&!e.seqRes?n("span",{attrs:{id:"org_prot"},on:{click:e.storeHash}},[n("a",{attrs:{href:"#Sequence"},on:{click:e.makeActive}},[n("img",{attrs:{src:e.search}}),e._v(" "+e._s(e.organism_name)+" "),n("strong",[e._v(e._s(e.primary_accession))])])]):e._e(),e.organism_name||e.seqRes?e._e():n("span",{staticClass:"titlepanel",attrs:{id:"uniprotpanel"},on:{click:e.storeHash}},[n("a",{attrs:{href:"#Sequence"},on:{click:e.makeActive}},[n("img",{attrs:{src:e.search}}),e._v(" Protein Sequence")])]),e.seqRes?e._e():n("span",{attrs:{id:"alignmt"},on:{click:e.storeHash}},[n("a",{attrs:{href:"#Alignment"},on:{click:e.makeActive}},[e._v("aligned onto")])]),e.pdb?e._e():n("span",{attrs:{id:"no_pdb_id"},on:{click:e.storeHash}},[n("a",{attrs:{href:"#Structure"},on:{click:e.makeActive}},[e._v("PDB ID")])]),e.pdb&&!e.seqRes?n("span",{attrs:{id:"pdb_id"},on:{click:e.storeHash}},[n("a",{attrs:{href:"#Structure"},on:{click:e.makeActive}},[e._v(e._s(e.pdb))]),n("span",{attrs:{id:"help"},on:{click:e.showHelp}},[e._v("?")])]):e._e(),e.seqRes?n("div",{attrs:{id:"titleAlign"}},[n("span",{staticClass:"titlepanel",on:{click:e.storeHash}},[n("a",{attrs:{href:"#Alignment"},on:{click:e.makeActive}},[n("strong",[e._v(e._s(e.primary_accession))]),e._v(" Sequence: "+e._s(e.seqRes)+" "),n("br"),n("strong",[e._v(e._s(e.pdb))]),e._v(" Structure: "+e._s(e.structRes)+" ")])])]):e._e(),n("a",{staticClass:"close",attrs:{href:e.data.hash},on:{click:e.dismissPanel}})])},_=[],S=(n("498a"),n("1b1f")),x={name:"Title",data:function(){return{organism_name:null,primary_accession:null,text:null,pdb:null,search:n("a6f5"),seqRes:null,structRes:null}},computed:{data:function(){return{hash:s["default"].state.hash,Gene:s["default"].state.Gene,Organism:s["default"].state.Organism}}},beforeMount:function(){var e=this;window.AQUARIA.update3DTitle=function(t,n,a,r,s){if(a&&r){var i=r;if(-1!==i.indexOf("(")&&(i=r.substring(0,r.indexOf("(")).trim()),window.AQUARIA.short_moleculeName=i,t&&n&&s){e.organism_name=e.data.Organism,e.primary_accession=e.data.Gene,e.text="aligned onto",e.pdb=n+"-"+a;var o=window.AQUARIA.currentMember.E_value;window.AQUARIA.explainTitle(t,window.AQUARIA.preferred_protein_name,i,n,a,s,o)}else e.organism_name=e.data.Organism,e.primary_accession=i,e.text="structure from",e.pdb=n+"-"+a}else document.querySelector("#uniProtDesc").text(window.AQUARIA.preferred_protein_name)}},methods:{showHelp:function(){s["default"].commit("setHelpTitle","Aquaria Help"),s["default"].commit("setUserStatus",!1),document.getElementById("UserHelp").classList.remove("hide"),document.getElementById("UserHelp").className+=" show",document.querySelector("div.dimmer")||(S["overlay"](),document.querySelector("div.dimmer").className+=" level7"),document.querySelector("div.dimmer").addEventListener("click",(function(){S["RemoveOverlay"](),document.getElementById("UserHelp").classList.remove("show"),document.getElementById("UserHelp").className+=" hide"}))},storeHash:function(){""===window.location.hash?s["default"].commit("setHash","#(0,0,0)"):s["default"].commit("setHash",window.location.hash)},makeActive:function(e){document.querySelector("#pdb_id > span#help").style.visibility="hidden",document.querySelectorAll("#title span a").forEach((function(e){e.classList.remove("active")})),e.target.localName.includes("strong")&&(e.target=e.target.parentElement),e.target.className="active",-1===document.querySelector("#title").className.indexOf("active")&&(document.querySelector("#title").className+=" active"),document.querySelector("#scrim").className="show level2",null!==document.querySelector("#titleAlign")&&(document.querySelector("#titleAlign").className="active",s["default"].commit("setAlignment",window.AQUARIA.panel3d.joleculeAlignment.copyToClipboard()),s["default"].commit("setHash",window.location.hash))},dismissPanel:function(){document.querySelector("#pdb_id > span#help").style.visibility="visible",document.querySelector("#scrim").className="hide",s["default"].commit("setHash","#(0,0,0)"),document.querySelector("#title").className="item title fix level6",null!==document.querySelector("#titleAlign")&&(document.querySelector("#titleAlign").className=""),document.querySelectorAll("#title span a").forEach((function(e){e.className=""}))},resetSelection:function(){document.querySelectorAll("#titlebar span").forEach((function(e){e.className="titlepanel"})),document.querySelectorAll(".contents").forEach((function(e){e.style.display="none"}))},release:function(){document.querySelector("#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection").style.display="none",this.resetSelection()}},mounted:function(){this.resetSelection()},updated:function(){var e=this;e.primary_accession=e.data.Gene;var t=new MutationObserver((function(){if("none"===document.querySelector("#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection").style.display)e.seqRes=null,e.structRes=null,s["default"].commit("setAlignment","");else{var t=document.querySelector("#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection").innerText.split("\n"),n=window.AQUARIA.currentMember.pdb_id+"-"+window.AQUARIA.currentMember.pdb_chain+":",a=e.data.Gene+":";e.seqRes=t[1].split(a)[1],e.structRes=t[0].split(n)[1]}}));t.observe(document.querySelector("#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection"),{attributes:!0,childList:!0,characterData:!0})}},I=x,R=(n("ee8d"),n("2877")),k=Object(R["a"])(I,b,_,!1,null,null,null),C=k.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel abs floating level7",attrs:{id:"Menu"}},[n("a",{staticClass:"close",attrs:{href:"#"}}),e._m(0),e._m(1),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selected=t.target.multiple?n:n[0]},function(t){return e.onChange(t)}]}},[n("option",{attrs:{id:"ribbon",selected:""}},[e._v("Ribbon")]),n("option",{attrs:{id:"sphere"}},[e._v("Sphere")]),n("option",{attrs:{id:"backbone"}},[e._v("Backbone")])])])},M=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a",{staticClass:"lnk",attrs:{id:"print",href:"#"}},[e._v("Print")]),n("a",{staticClass:"lnk",attrs:{id:"helpbtn",href:"#"}},[e._v("Help")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a",{staticClass:"lnk",attrs:{id:"Sidechains",href:"#Menu"}},[e._v("Sidechains")]),n("a",{staticClass:"lnk",attrs:{id:"Neighbors",href:"#Menu"}},[e._v("Neighbors")]),n("a",{staticClass:"lnk active",attrs:{id:"Ligands",href:"#Menu"}},[e._v("Ligands")]),n("a",{staticClass:"lnk",attrs:{id:"Water",href:"#Menu"}},[e._v("Water")])])}],D=n("1da1"),U=(n("96cf"),n("aaec")),P={name:"Menu",data:function(){return{selected:"Ribbon"}},methods:{onChange:function(e){var t=e.target.value.toLowerCase();document.querySelector("#threeDSpan-inner-menu-"+t).click()},showHelp:function(){var e=this;s["default"].commit("setHelpTitle","Aquaria Help"),s["default"].commit("setUserStatus",!1),document.getElementById("UserHelp").classList.remove("hide"),document.getElementById("UserHelp").className+=" show",document.querySelector("div.dimmer")||(S["overlay"](),document.querySelector("div.dimmer").className+=" level7"),document.querySelector("div.dimmer").addEventListener("click",(function(){S["RemoveOverlay"](),document.getElementById("UserHelp").classList.remove("show"),document.getElementById("UserHelp").className+=" hide";var t={};t.target=document.querySelector("#helpbtn"),e.toggleActive(t)}))},toggleActive:function(e){"lnk active"===e.target.className?e.target.className="lnk":e.target.className="lnk active"}},mounted:function(){var e=this;document.querySelector("#print").addEventListener("click",function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Object(U["a"])(7680,4320,0,0);case 3:n=e.sent,a=document.createElement("a"),a.href=n,a.download="aquaria-screenshot.png",a.click();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),document.querySelector("#helpbtn").addEventListener("click",(function(t){t.preventDefault(),e.toggleActive(t),e.showHelp()})),document.querySelector("#Sidechains").addEventListener("click",(function(t){t.preventDefault(),e.toggleActive(t),document.querySelector("#threeDSpan-inner > div.jolecule-embed-header.jolecule-embed-toolbar > span:nth-child(6)").click()})),document.querySelector("#Neighbors").addEventListener("click",(function(t){t.preventDefault(),e.toggleActive(t),document.querySelector("#threeDSpan-inner > div.jolecule-embed-header.jolecule-embed-toolbar > span:nth-child(7)").click()})),document.querySelector("#Ligands").addEventListener("click",(function(t){t.preventDefault(),e.toggleActive(t),document.querySelector("#threeDSpan-inner-menu-ligand").click()})),document.querySelector("#Water").addEventListener("click",(function(t){t.preventDefault(),e.toggleActive(t),document.querySelector("#threeDSpan-inner-menu-water").click()}))}},O=P,B=(n("b066"),Object(R["a"])(O,E,M,!1,null,"03995c7c",null)),q=B.exports,T={name:"Header",components:{Title:C,Menu:q},data:function(){return{aquariasymbol:n("2c07"),hamburger:n("b335")}},methods:{showScrim:function(){s["default"].commit("setHash",window.location.hash),document.querySelector("#scrim").className="show level3",document.querySelector("#xr-button").click()}}},L=T,N=(n("113a"),Object(R["a"])(L,w,A,!1,null,"34ef906a",null)),F=N.exports,Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel overlay about level3",attrs:{id:"Sequence"}},[n("SearchPanel"),n("AboutUniprot")],1)},H=[],j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"searchByName"}},[n("p",[e._v("Organism")]),n("SearchOrganism"),e._m(0),n("p",[e._v("Protein")]),n("SearchProtein"),n("div",{attrs:{id:"psyns"}},[n("p",[e._v("(example: "),n("a",{attrs:{href:"#"},on:{click:function(t){return e.fillin("p53")}}},[e._v("p53")]),e._v(" or "),n("a",{attrs:{href:"#"},on:{click:function(t){return e.fillin("P04637")}}},[e._v("P04637")]),e._v(")")])])],1)},V=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"osyns"}},[n("p",[e._v(" ")])])}],z=n("1157"),G=n.n(z),Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("autocomplete",{ref:"autocomplete",attrs:{id:"organism_syn_input",search:e.search,"get-result-value":e.getResultValue},on:{submit:e.handleSubmit}})],1)},W=[],Y=(n("d3b7"),n("bc3a")),J=n.n(Y),$=n("356e"),X=n("95bf"),K=(n("8b78"),{name:"SearchOrganism",components:{Autocomplete:X["a"]},data:function(){return{OrganismSynonyms:{}}},computed:{data:function(){return{OrgID:s["default"].state.OrgID,Organism:s["default"].state.Organism}}},methods:{getResultValue:function(e){return e.value},handleSubmit:function(e){var t=this;if(e.value&&0!==e.value.indexOf("No organisms for: ")&&e.id!==t.data.OrgID){var n="".concat(window.BACKEND,"/getOrganismSynonyms");J()({method:"get",url:n,params:{organism_id:e.id}}).then((function(t){var n=t.data;s["default"].commit("setOrgID",e.id),localStorage.preferred_organism_name=e.value,$["displayOrgSynonyms"](n),document.querySelector("#organism_syn_input").setAttribute("size",e.value.length)}))}},clear:function(){this.value="",this.$refs.autocomplete.value=""},search:function(e){var t,n=this,a=this.OrganismSynonyms,r=e;return this.value=e,new Promise((function(e){if(r in a)e(a[r]);else if(""!==r){var s="".concat(window.BACKEND,"/getQueryOrganism/").concat(r);J()({method:"get",url:s}).then((function(n){var s=n.data;s.length>0?(t=s.map((function(e){return{label:e.Synonym,value:e.Synonym,id:e.Organism_ID}})),a[r]=t):t={label:"No organisms for: "+r,value:0},document.querySelector("#autocomplete-result-list-1").style.zIndex=99,document.querySelector(".autocomplete-result-list").style.maxHeight="390px",e(t)}))}else t={label:n.data.Organism,value:n.data.OrgID},e(t)}))}}}),ee=K,te=Object(R["a"])(ee,Z,W,!1,null,null,null),ne=te.exports,ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("autocomplete",{ref:"autocomplete",attrs:{id:"protein_syn_input",search:e.search,"get-result-value":e.getResultValue},on:{submit:e.handleSubmit}})},re=[],se=(n("b0c0"),n("4de4"),n("2ca0"),n("4e82"),{name:"SearchProtein",components:{Autocomplete:X["a"]},data:function(){return{callbackData:{names:[],ids:[],pdbIDs:[]},cacheProteinSynonyms:{},term:null,proteinSynonymOrgId:null,pdbId:null,collectResponsevalues:null}},methods:{getResultValue:function(e){return e.value+" ("+e.id+")"},clear:function(){this.value="",this.$refs.autocomplete.value=""},handleSubmit:function(e){var t=this,n=window.AQUARIA;if(e.value&&0!==e.value.indexOf("No structures for: ")){var a=e.id;if(a.indexOf("/")>-1){var r=a.split("/");a=r[0],t.pdbId=r[1]}if("PDB"===e.type){console.log("AQUARIA.proteinAutocomplete.select pdb",e.value),s["default"].commit("showLoader",!0),s["default"].commit("setLoaderMsg","Waiting for data...");var o="".concat(window.BACKEND,"/getAccessionForPDB/").concat(e.value);J()({method:"get",url:o}).then((function(t){var n=t.data;i["loadAccession"]([n.Accession],e.value,null,!1,n.Accession)}))}else e.id===n.protein_primary_accession?e.value===n.preferred_protein_name?s["default"].commit("showLoader",!1):(console.log("AQUARIA.proteinAutocomplete.select same protein, different name",e.value),n.preferred_protein_name=e.value,o="".concat(window.BACKEND,"/getProteinSynonyms/").concat(n.protein_primary_accession,";"),J()({method:"get",url:o}).then((function(e){$["displayProtSynonyms"](e.data)}))):(document.querySelector("#protein_syn_input").placeholder=e.value,document.querySelector("#protein_syn_input").value="",s["default"].commit("showLoader",!0),s["default"].commit("setLoaderMsg","Waiting for data..."),i["loadAccession"]([a],t.pdbId,null,!1,e.value))}else event.preventDefault()},search:function(e){var t=window.AQUARIA,n=this;return n.term=e,n.callbackData.LRU=n.getLRU(),new Promise((function(e){if(""===n.term)n.collectResponse(),n.collectResponsevalues&&e(n.collectResponsevalues);else{if(n.proteinSynonymOrgId=n.term+"%"+t.Organism.ID,n.proteinSynonymOrgId in n.cacheProteinSynonyms)return void e(n.cacheProteinSynonyms[n.proteinSynonymOrgId]);document.querySelector(".autocomplete-result-list").style.maxHeight="390px";var a="".concat(window.BACKEND,"/queryProtein/").concat(n.term,"/").concat(t.Organism.ID);J()({method:"get",url:a}).then((function(t){var a=t.data;isNaN(parseInt(n.term.charAt(0)))?a.length>0?0===a[0].isID?(n.nameCallback(a),n.collectResponsevalues&&e(n.collectResponsevalues)):n.idCallback(a):0===a.isID?(n.nameCallback(a),n.collectResponsevalues&&e(n.collectResponsevalues)):(n.idCallback(a),n.collectResponsevalues&&e(n.collectResponsevalues)):(n.pdbCallback(a),n.collectResponsevalues&&e(n.collectResponsevalues))}))}}))},getLRU:function(){return window.AQUARIA.proteinTopTen.getAll().map((function(e){return{label:e.name,suffix:e.primary_accession+", "+e.pdb_id,value:e.name,type:"LRU",category:"Recent",id:e.primary_accession+"/"+e.pdb_id}}))},collectResponse:function(){var e=this,t=e.callbackData.LRU;t.length>0&&e.term&&e.term.length>0&&(t=t.filter((function(t){return t.label.toLowerCase().startsWith(e.term.toLowerCase())})));var n=!0,a=t.concat(e.callbackData.names).concat(e.callbackData.ids).concat(e.callbackData.pdbIDs);0===a.length&&(e.term&&e.term.length>0?a=[{label:"No structures for: "+e.term,value:0}]:n=!1),e.cacheProteinSynonyms[e.proteinSynonymOrgId]=a,n&&(e.collectResponsevalues=a)},nameCallback:function(e){var t,n=this;t=e.map((function(e){return{label:e.Synonym,suffix:null,value:e.Synonym,type:"Synonym",category:"Names",id:e.Primary_Accession,organism:e.Organism_ID}})),t.sort((function(e,t){return e.label>t.label?1:-1})),t.reduce((function(e,t){var n=e,a=t;return n&&n.value===a.value&&(n.dup||(n.suffix=n.id,n.dup=!0),a.dup||(a.suffix=a.id,a.dup=!0)),t}),null),n.callbackData.names=t,n.collectResponse()},idCallback:function(e){var t,n=this;t=e.map((function(e){var t=e.Source_Field;return"AC"!==t&&"ID"!==t||(t="UniProt"),{label:e.Synonym,suffix:t,value:e.Synonym,type:t,category:"Identifiers",id:e.Primary_Accession}})),t.sort((function(e,t){return e.label>t.label?1:-1})),n.callbackData.ids=t,n.collectResponse()},pdbCallback:function(e){var t,n=this;t=e.map((function(e){return{label:e.Synonym,suffix:"PDB",type:"PDB",value:e.Synonym,category:e.Category,id:e.Synonym}})),n.callbackData.pdbIDs=t,n.collectResponse()}}}),ie=se,oe=Object(R["a"])(ie,ae,re,!1,null,null,null),ce=oe.exports,le={components:{SearchOrganism:ne,SearchProtein:ce},name:"SearchPanel",data:function(){return{search:n("20d9")}},methods:{fillin:function(e){document.getElementById("protein_syn_input").value=e,setTimeout((function(){window.location.href="/P04637"}),300)},selectOrganism:function(e){},placeholderText:function(e,t){var n=document.querySelector("#organism_syn_input"),a=document.querySelector("#protein_syn_input");n.placeholder=e,n.setAttribute("size",n.getAttribute("placeholder").length),a.placeholder=t,a.setAttribute("size",a.getAttribute("placeholder").length),G()("#organism_syn_input").focus((function(){G()(this).attr("placeholder","Specify an organism"),n.setAttribute("size",n.getAttribute("placeholder").length)})).blur((function(){G()(this).attr("placeholder",e),n.setAttribute("size",n.getAttribute("placeholder").length)})),G()("#protein_syn_input").focus((function(){G()(this).attr("placeholder","Specify a protein"),a.setAttribute("size",a.getAttribute("placeholder").length)})).blur((function(){G()(this).attr("placeholder",t),a.setAttribute("size",a.getAttribute("placeholder").length)}))}}},ue=le,de=(n("a01c"),Object(R["a"])(ue,j,V,!1,null,null,null)),pe=de.exports,he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"scrollable",attrs:{"data-intro":"UniProt summary of the specified protein's function.","data-position":"right"}},[e._m(0),e.uniprotDesc?n("div",{attrs:{id:"uniProtDesc"}}):e._e(),e._l(e.descriptions,(function(t,a){return n("div",{key:a,staticClass:"expandable"},[n("expandable-text-line",{attrs:{"use-hover":""},domProps:{innerHTML:e._s("<strong>"+t[0]+"</strong>:"+t[1])}})],1)}))],2)},fe=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"none"},attrs:{id:"gsyns"}},[n("p",[e._v("Genes:  ")])])}],me=(n("a4d3"),n("e01a"),n("5319"),n("02a1")),ge={name:"AboutUniprot",components:{ExpandableTextLine:me["a"]},data:function(){return{uniprotDesc:null,sections:[],descriptions:[],a:[1,2,3],tightSections:[],desc:null,list:[]}},mounted:function(){var e=this;e.waitForElement()},methods:{waitForElement:function(){var e=this;window.AQUARIA.structures2match.sequences&&window.AQUARIA.structures2match.sequences[0]?(e.uniprotDesc=window.AQUARIA.structures2match.sequences[0].description,e.updateUniprotInfo(e.uniprotDesc)):setTimeout(e.waitForElement,50)},updateUniprotInfo:function(e){var t=this;t.list=[],t.tightSections=[];var n=/\n[A-Z ]+:.*?$/;function a(){if(e&&e.length>0){var r=e.match(n);null!==r?(t.sections.unshift(r[0].split(": ")),e=e.replace(r[0],""),a()):t.sections.unshift(e.split(": "))}}function r(e){for(var n=null,a=0;a<e.length;a++)if(a<e.length-2){var r=e[a][0],s=e[a+1][0];if(s===r)null===n&&(n="<ul>"),n+="<li>"+e[a][1]+"</li>";else if(null===n)t.tightSections.push(e[a]);else{n+="<li>"+e[a][1]+"</li></ul>";var i=[r,n];t.tightSections.push(i),n=null}}else null===n?t.tightSections.push(e[a]):(n+="<li>"+e[a][1]+"</li></ul>",i=[r,n],t.tightSections.push(i),n=null);return t.tightSections}a(),this.sections.forEach((function(e){if(-1!==e[1].indexOf("URL=")){var t="",n="",a="",r="",s=e[1].split(";");s.forEach((function(e){e=e.split("="),-1!==e[0].indexOf("URL")&&(n=e[1]),-1!==e[0].indexOf("Name")&&(a=e[1]),-1!==e[0].indexOf("Note")&&(r=e[1])})),t="<a href="+n+' title="'+r+'" target="_blank">'+a+"</a>",e[1]=t}}));var s=r(t.sections);s.forEach((function(e){var n="";if(e.length>2){for(var a=1;a<e.length;a++)n=n+" "+e[a];e[1]=n}t.list.push(e)})),t.descriptions=t.list}}},ve=ge,ye=(n("bf44"),Object(R["a"])(ve,he,fe,!1,null,"6151a527",null)),we=ye.exports,Ae={name:"Sequence",components:{SearchPanel:pe,AboutUniprot:we}},be=Ae,_e=Object(R["a"])(be,Q,H,!1,null,null,null),Se=_e.exports,xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel overlay about level3",attrs:{id:"Alignment"}},[n("div",{staticClass:"scrollable"},[e.data.alignment?n("p",{staticClass:"spacer"},[e._v(" ")]):e._e(),n("p",[e._v("What you see in the 3D viewer is the experimentally-determined structure of "+e._s(e.pdbName)+" from "),n("a",{attrs:{href:"http://www.rcsb.org/pdb/explore.do?structureId={{}}",target:"_blank"}},[e._v(" PDB entry "+e._s(e.pdbId))]),e._v("chain "+e._s(e.chainId)+". ")]),n("p",[e._v(" The full-length sequence of the protein you specified ("+e._s(e.uniprotName)+") has been aligned onto the sequence used to determine this PDB structure.")]),n("p",[e._v(" Overall, the two sequences align with "+e._s(e.score)+"% identity; any amino acid substitutions are indicated using dark coloring (see legend).")]),n("p",{staticClass:"quality"},[e._v(" This alignment has an HHblits E-value of "+e._s(e.evalueString)+" × "),n("nobr",[e._v("10"),n("sup",[e._v(e._s(e.power))])]),e._v(", which is considered to be "+e._s(e.quality)+". Based on cross-validation, the likelihood that your specified protein ("+e._s(e.uniprotName)+") adopts a structure similar to that shown is estimated to be "+e._s(e.precisiontxt)+"%.")],1),n("p",[e._v("Note that the structure shown is taken directly from the PDB; it has not been derived by ab-initio or comparative modeling.")]),e.data.alignment?n("div",[n("p",[n("b",[e._v("Alignment:")]),n("br"),n("pre",[e._v(e._s(e.data.alignment))])])]):e._e()])])},Ie=[],Re=(n("25f0"),n("5698")),ke=n.n(Re),Ce={name:"AboutAlignment",computed:{data:function(){return{alignment:s["default"].state.alignment}}},data:function(){return{pdbName:null,pdbId:null,chainId:null,score:null,qualClass:null,evalueString:null,quality:null,uniprotName:null,precisiontxt:null,power:null}},beforeMount:function(){var e=this;window.AQUARIA.explainTitle=function(t,n,a,r,s,i,o){var c;e.pdbName=a,e.pdbId=r,e.chainId=s,e.score=i,e.uniprotName=n,c=-Math.log(o)/Math.LN10;var l=100*e.BioScience_PlantDisease_Weibull_model(c);l=Math.round(l),e.evalueString=o.toString().split("e")[0],e.power=o.toString().split("e")[1],e.precisiontxt=0===o&&1===l?"close to 100":"≥ "+l,o>1e-71?(e.quality="in the twilight zone",e.qualClass="twilight"):(e.quality="high quality",e.qualClass="high")}},methods:{BioScience_PlantDisease_Weibull_model:function(e){var t;t=0;var n=-2.903935098912483,a=7.984666145922813,r=.4478023883120025;return t=1-Math.exp(-1*Math.pow((e-n)/a,r)),t},showBubble:function(e){0===document.getElementsByClassName("dimmer").length&&S["overlay"](),G()("span#help3D.roundButton").css("background-position","0 -21px"),document.querySelector("div.dimmer").addEventListener("click",(function(){G()("div.popup, div.dimmer").fadeOut().remove(),G()("span#help3D.roundButton").css("background-position","0 0")}));var t="<div class='balloon'><h3>3D View Explained<span class='x'>&nbsp;</span></h3>";t=t+e+"</div>",ke.a.select("body").append("div").attr("class","popup top").html(t);var n=G()("#help3D").offset(),a=parseInt(n.left-230),r=parseInt(n.top+30);G()("div.popup").css({left:a+"px",top:r+"px"}).draggable().fadeIn(600),G()("span.x").click((function(){G()("div.popup, div.dimmer").fadeOut().remove(),G()("span#help3D.roundButton").css("background-position","0 0")}))},resetSelection:function(){document.querySelectorAll("#titlebar span").forEach((function(e){e.className="titlepanel"})),document.querySelectorAll(".contents").forEach((function(e){e.style.display="none"}))}},mounted:function(){this.resetSelection()}},Ee=Ce,Me=(n("361b"),Object(R["a"])(Ee,xe,Ie,!1,null,"8e892dc6",null)),De=Me.exports,Ue=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Pe=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel overlay about level3",attrs:{id:"Structure"}},[n("div",{staticClass:"scrollable",attrs:{id:"description","data-intro":"PDB summary for the shown structure.","data-position":"bottom"}},[n("span",{staticClass:"content",attrs:{id:"description","data-intro":"PDB summary for the shown structure.","data-position":"bottom"}},[n("span",{staticStyle:{display:"none"},attrs:{id:"biounitDisplay"}},[n("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitLeft",title:"Navigate to other assemblies"}},[e._v("<")]),e._v("  "),n("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitType"}},[e._v("biounit")]),e._v("  "),n("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitCount"}},[e._v("x/x")]),e._v("   "),n("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitRight",title:"Navigate to other assemblies"}},[e._v(">")]),n("a",{attrs:{id:"helpBiounit",href:"https://pdb101.rcsb.org/learn/guide-to-understanding-pdb-data/biological-assemblies#Anchor-BioUnit",target:"_blank",title:"Go to PDB to view explanation of assembly"}},[n("span",{staticClass:"help roundButton"})])]),n("span",{staticStyle:{display:"none"},attrs:{id:"aboutPDBHider","data-intro":"PubMed Information about PDB structure","data-position":"left"}},[n("p",{attrs:{id:"classification"}},[e._v("Classification unavailable")]),n("h4",{attrs:{id:"reference_title"}},[e._v("Title unavailable")]),n("p",{attrs:{id:"reference_link"}},[n("a",{attrs:{href:"#"}},[e._v("PubMed Link unavailable")])]),n("p",{attrs:{id:"molecule",title:"View this structure in Aquaria","data-intro":"Information about currently focused PDB chain.","data-position":"left"}},[n("strong",[e._v("Molecule: ")]),n("span",{staticClass:"text"},[e._v("unavailable")])])]),n("p",{attrs:{id:"organism"}},[n("strong",[e._v("Organism: ")]),n("span",{staticClass:"text"},[e._v("unavailable")])]),n("p",{attrs:{id:"small_molecules"}},[n("strong",[e._v("Small molecules: ")]),n("span",{staticClass:"text"},[e._v("unavailable")])]),n("p",{attrs:{id:"method"}},[n("strong",[e._v("Method: ")]),n("span",{staticClass:"text"},[e._v("unavailable")])]),n("p",{attrs:{id:"resolution"}},[n("strong",[e._v("Resolution: ")]),n("span",{staticClass:"text"},[e._v("unavailable")])]),n("p",{attrs:{id:"pdb"}},[n("strong",[e._v("Protein Data Bank: ")]),n("span",{staticClass:"text"},[e._v("unavailable")])])])])])}],Oe={name:"AboutPdb"},Be=Oe,qe=(n("f760"),Object(R["a"])(Be,Ue,Pe,!1,null,"01dba514",null)),Te=qe.exports,Le=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Ne=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"structure-viewer"}},[n("span",{attrs:{id:"threeDSpan"}})])}],Fe={name:"StructureViewer",mounted:function(){function e(){var e=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(!navigator.platform)return!1;while(e.length)if(navigator.platform===e.pop()||screen.width>=300&&screen.width<=600)return!0}var t=e();if(t){var n=Math.max(window.innerHeight),a=document.body;document.addEventListener("scroll",(function(e){var t=Math.max(window.innerHeight);t-50>n?a.classList.contains("ios-toolbar")||a.classList.add("ios-toolbar"):a.classList.contains("ios-toolbar")&&a.classList.remove("ios-toolbar")}))}}},Qe=Fe,He=(n("88de"),Object(R["a"])(Qe,Le,Ne,!1,null,null,null)),je=He.exports,Ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"tabs rel level3"},[n("div",{staticClass:"tab",attrs:{id:"Structures"},on:{click:e.storeHash}},[n("a",{attrs:{href:"#Structures"}},[n("span",{staticClass:"icon"},[n("img",{attrs:{src:e.MS}})]),e._v("  Matching Structures  "),n("span",{staticClass:"counter"})])]),n("MatchingStructures"),n("div",{staticClass:"tab",attrs:{id:"Features"},on:{click:e.storeHash}},[n("a",{attrs:{href:"#Features"}},[n("span",{staticClass:"icon"},[n("img",{attrs:{src:e.FT}})]),e._v("  Features  "),n("span",{staticClass:"counter",attrs:{id:"featureCounter"}})])]),n("Features")],1)])},ze=[],Ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel"},[n("a",{staticClass:"close intab",attrs:{href:e.data.hash},on:{click:e.closeTab}}),e._m(0)])},Ze=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"vis"}},[n("div",{attrs:{id:"allclusters","data-intro":"Visual summary of all structures in PDB matching the specified protein, grouped by region of match.","data-position":"left"}})])}],We=n("5530"),Ye=n("2f62"),Je={name:"MatchingStructures",data:function(){return{clusters:window.AQUARIA.structures2match.clusters,showTree:!1}},computed:Object(We["a"])({data:function(){return{hash:s["default"].state.hash,prop:null}}},Object(Ye["b"])(["getMatches"])),methods:{closeTab:function(){window.scrollBy(0,100),S["hidePanels"]()}},mounted:function(){var e=this;if(e.getMatches&&Object.hasOwnProperty.call(e.getMatches,"clusters"))for(var t=document.querySelectorAll("[id ^= structure_] > text"),n=0;n<t.length;n++)t[n].addEventListener("click",(function(){var e=this.parentElement.id;console.log(e)}))}},$e=Je,Xe=(n("3cb4"),Object(R["a"])($e,Ge,Ze,!1,null,null,null)),Ke=Xe.exports,et=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel"},[n("a",{staticClass:"close",attrs:{href:"#"},on:{click:e.closeTab}}),n("div",{attrs:{id:"featurelist"}})])},tt=[],nt={name:"Features",methods:{closeTab:function(){window.scrollBy(0,100),S["hidePanels"]()}}},at=nt,rt=(n("fc7c"),Object(R["a"])(at,et,tt,!1,null,null,null)),st=rt.exports,it={name:"Tabs",components:{MatchingStructures:Ke,Features:st},data:function(){return{MS:n("39b5"),FT:n("9db5")}},methods:{storeHash:function(){""===window.location.hash?s["default"].commit("setHash","#(0,0,0)"):s["default"].commit("setHash",window.location.hash)},showPanel:function(e,t){document.querySelector("#"+e).style.display="block",document.querySelectorAll(".tab").className="tab inactive",document.querySelector("#"+t).className="tab active"},showMatches:function(){var e=this;if(window.AQUARIA.panel3d){var t=window.AQUARIA.panel3d.embededJolecule.controller;t.clearSelectedResidues()}e.showPanel("vis","Structures"),S["hidePanel"]("featurelist","Features"),0===document.getElementsByClassName("dimmer").length&&S["overlay"](),document.querySelector("div.dimmer").className+=" level0",document.querySelector("div.dimmer").addEventListener("click",(function(){S["hidePanels"]()}))},showFeatures:function(){var e=this;if(window.AQUARIA.panel3d){var t=window.AQUARIA.panel3d.embededJolecule.controller;t.clearSelectedResidues()}S["hidePanel"]("vis","Structures"),e.showPanel("featurelist","Features"),0===document.getElementsByClassName("dimmer").length&&S["overlay"](),document.querySelector("div.dimmer").className+=" level0",document.querySelector("div.dimmer").addEventListener("click",(function(){document.querySelector("a.close").click(),S["hidePanels"]()}))}},mounted:function(){var e=this;window.addEventListener("hashchange",(function(){window.location.hash.includes("Structures")&&e.showMatches(),window.location.hash.includes("Features")&&e.showFeatures()}))}},ot=it,ct=(n("96a5"),Object(R["a"])(ot,Ve,ze,!1,null,"032b25de",null)),lt=ct.exports,ut=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"rel",attrs:{id:"map"}},[n("FeatureMap"),n("PopUp")],1)},dt=[],pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"featureMap"}})},ht=[],ft=window.outerWidth,mt=50,gt={name:"FeatureMap",data:function(){return{seqLength:0,scale:null,coverageMapsrw:0,residueColor:null}},computed:Object(We["a"])({feature:function(){return s["default"].state.feature}},Object(Ye["b"])(["getVariantResidues"])),watch:{feature:function(e,t){var n=this;null===e.set?document.querySelector("#map > #featureMap").remove():(window.addEventListener("resize",(function(){document.querySelector("#map > #featureMap").remove(),n.drawMap(e)})),document.querySelector("#map > #featureMap")?(document.querySelector("#map > #featureMap").remove(),n.drawMap(e)):n.drawMap(e))}},methods:{drawMap:function(e){var t=this,n=t.renderSVG();t.seqLength=window.AQUARIA.structures2match.sequences[0].length,t.scale=Re["scale"].linear().domain([1,t.seqLength]).range([1,window.innerWidth]),t.coverageMapsrw=t.scale(t.seqLength)/t.seqLength,e.set.Tracks[0].forEach((function(e){e.start=+e.start,e.end=+e.end,t.drawResidues(e,n)}))},renderSVG:function(){var e=Re["select"]("#map").append("svg").attr("id","featureMap").attr("width",ft).attr("height",mt),t=e.append("g");return t},drawResidues:function(e,t){for(var n=0,a=this,r=12,i=17,o=e.start;o<=e.end;o++)t.append("g").attr("id","feature_residue_"+o).append("rect").attr("transform","translate("+(o*a.coverageMapsrw-a.coverageMapsrw)+","+i+")").attr("width",a.coverageMapsrw*(n+1)).attr("height",r).attr("fill",e.color).on("mouseover",(function(t){a.residueColor=Re["select"](this).style("fill"),Re["select"](this).attr({stroke:"white"}),s["default"].commit("setPopupTitle",e.label),e.desc!==e.label?""!==e.desc?s["default"].commit("setPopupText",e.desc):a.getVariantResidues[e.start]&&s["default"].commit("setPopupText",a.getVariantResidues[e.start]):s["default"].commit("setPopupText",null),s["default"].commit("setPopupCoordinates",this.getBoundingClientRect())})).on("mouseout",(function(){Re["select"](this).attr({stroke:a.residueColor})}))}}},vt=gt,yt=(n("9b83"),Object(R["a"])(vt,pt,ht,!1,null,null,null)),wt=yt.exports,At=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"level4",attrs:{id:"popupshell"}},[n("div",{staticClass:"level4",style:{visibility:e.data.popupTitle?"visible":"hidden"},attrs:{id:"popupbody"}},[n("div",{attrs:{id:"popupheader"}},[n("span",{domProps:{innerHTML:e._s(e.getPopupTitle)}}),n("span",{staticClass:"x",attrs:{id:"x_close"},on:{click:e.hidePopup}})]),e.data.PopupText?n("div",{attrs:{id:"content"}},[n("expandable-text-line",{attrs:{"use-hover":""},domProps:{innerHTML:e._s(e.getPopupText)}}),n("div",{staticClass:"hide"},[n("TreeView"),n("ExpandableTextLine"),n("NodeLoader")],1)],1):e._e()]),n("img",{style:{visibility:e.data.popupTitle?"visible":"hidden"},attrs:{src:e.popupTail,id:"popupTail"}})])},bt=[],_t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"scrim level6",on:{click:e.hideTree}}),n("div",{staticClass:"level7",attrs:{id:"arc"}})])},St=[],xt=n("2909"),It=(n("4d63"),n("a434"),n("841c"),n("1a88")),Rt=n("fae8"),kt=n("7792"),Ct=n("5a2b"),Et=10,Mt=450,Dt=450,Ut=14,Pt=new RegExp(/(p\.)?[A-Za-z]+[0-9]+[A-Za-z\*\_\?\[\]\(\)\%\=\.]+/),Ot={name:"TreeView",props:["treeReady","count","coordinates"],data:function(){return{pdbs:[],up:n("31c8"),down:n("62bc")}},computed:Object(We["a"])({},Object(Ye["b"])(["getGene","getOrganism"])),watch:{treeReady:function(e,t){var n=this;n.coordinates.clientX+Mt+5>=window.innerWidth?document.querySelector("#arc").style.left=window.innerWidth-Mt-5+"px":document.querySelector("#arc").style.left=n.coordinates.clientX+"px",document.querySelector("#arc").style.top=n.coordinates.clientY-400+"px",!0===this.$parent.showLoader?this.$parent.showLoader=!1:this.$parent.showTree=!1,console.log(n.count),console.log("Prop changed: ",e," | was: ",t);var a=e,r=a[0];if(Re["selectAll"]("#arc > *").remove(),a.length>Et){var s=n.chunk(a,Et);n.generateArc(s,r,0)}else n.generateArc(a,r)}},methods:{hideTree:function(){this.$parent.showTree=!1},nodeClick:function(e){var t=this,n=e[2].children[0],a=0;if(n.name=e[2].label,n.length=e[2].children.length,e[2].children.length>Et){var r=t.chunk(e[2].children,Et);t.generateArc(r,n,a)}else a+=1,this.generateArc(e[2].children,n)},chunk:function(e,t){var n,a=[];e=(n=[]).concat.apply(n,Object(xt["a"])(e));while(e.length)a.push(e.splice(0,t));return a},reversePdbArray:function(e){var t=[];return e.forEach((function(e){t.unshift(e)})),t},generateArc:function(e,t,n){var a,r,s,i,o=this,c=60;if(e=o.reversePdbArray(e),r=void 0!==n?e[n]:e,Object.prototype.hasOwnProperty.call(r[0],"children")){void 0!==n&&null!==document.querySelector("svg#tree")&&document.querySelector("svg#tree").remove();var l=Re["select"]("#arc").append("svg").attr("id","tree").attr("width",Mt).attr("height",Dt);i=o.createLinks(l,"parent",e,t,n)}else document.querySelectorAll("outerElem").forEach((function(e){return e.remove()})),document.querySelectorAll("[id^=children_]").forEach((function(e){return e.parentNode.removeChild(e)})),l=Re["select"]("#arc").append("svg").attr("id","children_"+r[0].pdb_id+"_"+n).attr("width",Mt).attr("height",Dt),i=o.createLinks(l,"child",e,t,n);if(s=i.nodes,l=i.svg,Object.prototype.hasOwnProperty.call(r[0],"children")?(s.shift(),a=Re["select"]("svg#tree").selectAll("g#gParent").data(s).enter()):(t.dx=s[1][0]-c,t.dy=s[1][1]-Ut/2,s.push([s[1][0]-c,s[1][1],t,"parent"]),document.querySelector("#tree").classList.add("hide"),s.shift(),a=Re["select"]("svg#children_"+r[0].pdb_id+"_"+n).selectAll("g").data(s).enter()),a=a.append("g").attr("class",(function(e,t){if(e.length>1)return Object.prototype.hasOwnProperty.call(e[2],"children")?"outerElem":"innerElem"})).attr("id",(function(e,t){if(e.length>1)return Object.prototype.hasOwnProperty.call(e[2],"children")?"out_"+e[2].children[0].pdb_id:void 0!==e[3]&&e[3].includes("parent")?"parentNode":"in_"+e[2].pdb_id})).attr("width",Ut).attr("height",Ut).on("click",(function(e,t){if(t>=0)if(Object.prototype.hasOwnProperty.call(e[2],"children"))o.nodeClick(e);else if(void 0===e[3]){var n=window.location.search;history.pushState("",document.title,"/"+o.getOrganism+"/"+o.getGene+"/"+e[2].pdb_id+"/"+e[2].pdb_chain+n),document.querySelectorAll(".coverage_map_container").forEach((function(e){e.remove()})),window.AQUARIA.structures2match.clusters.forEach((function(t,n){if(t.members.length>1){if(Object.prototype.hasOwnProperty.call(t.memberMap,e[2].pdb_id+e[2].pdb_chain))return t.E_value=t.memberMap[e[2].pdb_id+e[2].pdb_chain][0].E_value,window.AQUARIA.display_member(e[2]),window.AQUARIA.showMatchingStructures.selectCluster(t,n),window.AQUARIA.showMatchingStructures.drawCoverageMap(t),null}else if(t.members[0].pdb_id===e[2].pdb_id&&t.members[0].pdb_chain[0]===e[2].pdb_chain)return t.E_value=t.members[0].E_value,window.AQUARIA.display_member(t),window.AQUARIA.showMatchingStructures.selectCluster(t,n),window.AQUARIA.showMatchingStructures.drawCoverageMap(t),null})),Pt.test(n)&&o.waitForElement()}else document.querySelector("#tree").classList.remove("hide"),document.querySelectorAll("[id^=children_]").forEach((function(e){return e.parentNode.removeChild(e)}))})),Object.prototype.hasOwnProperty.call(r[0],"children"))a.append("rect").attr("transform",(function(e){return"translate("+e[0]+","+(e[1]-Ut/2)+")"})).attr("class","label").attr("width",(function(e,t){return e[2].children?e[2].children.length>9?32:26:0})).attr("height",(function(e,t){return e[2].children?16:0})).attr("rx",6).attr("fill","#a3a3a3").attr("stroke","none");else{var u=Re["select"]("g#parentNode").selectAll("g").data([t]).enter();u.append("text").attr("x",(function(e){return e.dx-40-20})).attr("dy",(function(e){return e.dy+40})).attr("class","nbr_label").text((function(e){return e.name.length>15?e.name.substr(0,15)+"...":e.name})).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500),u.append("rect").attr("transform",(function(e){return"translate("+e.dx+","+e.dy+")"})).attr("class","label").attr("width",(function(e,t){return e.length?e.length>9?32:26:0})).attr("height",16).attr("rx",6).attr("fill","#a3a3a3").attr("stroke","none"),u.append("text").attr("x",(function(e){return e.dx+Ut+2})).attr("dy",(function(e){return e.dy+Ut-1})).attr("class","nbr_label").text((function(e){return e.length})).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500)}a.append("circle").attr("cx",(function(e){return e[0]})).attr("cy",(function(e){return e[1]})).attr("r",Ut).style("fill","white").style("stroke","#999999").style("stroke-width","1"),a.append("clipPath").attr("id","clip_"+function(e,t){return t}).append("circle").attr("cx",(function(e){return e[0]})).attr("cy",(function(e){return e[1]})).attr("r",Ut).attr("clip-rule","evenodd"),a.append("image").attr("width",2*(Ut-1)+"px").attr("height",2*(Ut-1)+"px").attr("x",(function(e){return e[0]-13})).attr("y",(function(e){return e[1]-13})).attr("clip-path",(function(e,t){var n=" ";return e[2].pdb_id&&(n="url(#clip_"+e[2].pdb_id+")"),e[2].children&&e[2].children[0].pdb_id&&(n="url(#clip_"+e[2].children[0].pdb_id+")"),n})).attr("xlink:href",(function(e,t){var n=" ";return e[2].pdb_id&&"undefined"===typeof e[2].children&&(n=e[2].pdb_id.toUpperCase()),e[2].children&&e[2].children[0].pdb_id&&(n=e[2].children[0].pdb_id.toUpperCase())," "===n?" ":"https://www.ebi.ac.uk/pdbe/static/entry/"+n.toLowerCase()+"_assembly_1_chain_front_image-200x200.png"})),a.append("text").attr("x",(function(e){return e[0]+Ut+2})).attr("dy",(function(e){return e[1]+Ut/2-1})).attr("class","nbr_label").text((function(e,t){if(e[2].label&&"undefined"!==e[2].label){var n=e[2].label;return e[2].label.length>30&&(n=e[2].label.substr(0,15)+" ... "+e[2].label.substr(e[2].label.length-15)),e[2].children?e[2].children.length+"      "+n:" "}if(void 0===e[3])return e[2].pdb_id+"-"+e[2].pdb_chain})).attr("title",(function(e,t){return e[2].label_long?e[2].label_long:e[2].label})).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500)},createLinks:function(e,t,n,a,r){var s,i=[],o=0,c=[],l={},u=this,d=40;s=void 0!==r?n[r]:n,"child"===t&&(o=60);var p=Dt-d;c.push([10,p]);for(var h=0;h<s.length;h++)c.push([80+o,p-h*d]),c[h+1].push(s[h]);if(i.push(It["a"]()({source:c[0],target:c[1]})),s.length>1){var f=[{xpoint:30+o,ypoint:p},{xpoint:45+o,ypoint:p-10},{xpoint:47+o,ypoint:p-20}],m=Rt["a"]().x((function(e){return e.xpoint})).y((function(e){return e.ypoint})).curve(kt["a"]);e.append("path").attr("d",m(f)).attr("fill","none").attr("class",(function(){return"outerElem"})).attr("stroke","#76c276").style("stroke-width",2);for(var g=2;g<c.length;g++){var v=[{xpoint:47+o,ypoint:c[g][1]+10},{xpoint:55+o,ypoint:c[g][1]},{xpoint:80+o,ypoint:c[g][1]}];e.append("path").attr("d",m(v)).attr("fill","none").attr("stroke","#76c276").style("stroke-width",2).attr("class",(function(e){return"outerElem"}))}e.append("line").style("stroke","#76c276").style("stroke-width",2).attr("x1",47+o).attr("y1",p+10-(c.length-2)*d).attr("x2",47+o).attr("y2",p-20).attr("class",(function(){return 1===t?"outerElem":"innerElem"}))}return e.append("path").attr("d",i).attr("stroke","#76c276").attr("fill","none").style("stroke-width",2),n.length>1&&(r+1<n.length&&(e.append("circle").attr("cx",80+o).attr("cy",p+30).attr("r",10).style("fill","#00b2ff"),e.append("image").attr("width","18px").attr("height","18px").attr("x",80+o-9).attr("y",p+21).attr("xlink:href",u.down).on("click",(function(){r<n.length-1&&u.generateArc(n,a,r+1)})),e.append("text").attr("x",95+o).attr("dy",p+35).attr("class","nbr_label").text("Next").attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500)),r+1>1&&(e.append("circle").attr("cx",80+o).attr("cy",Dt-c.length*d+10).attr("r",10).style("fill","#00b2ff"),e.append("image").attr("width","18px").attr("height","18px").attr("x",80+o-9).attr("y",Dt-c.length*d+1).attr("xlink:href",u.up).on("click",(function(){r-1>=0&&u.generateArc(n,a,r-1)})),e.append("text").attr("x",95+o).attr("dy",Dt-c.length*d+Ut).attr("class","nbr_label").text("Previous").attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500))),e.append("rect").attr("x",0).attr("y",400).attr("rx",6).attr("ry",6).attr("width",u.coordinates.width).attr("height",u.coordinates.height).style("fill","orange").on("click",(function(){u.hideTree()})),e.append("text").attr("x",2).attr("dy",415).attr("class","nbr_label").text(u.count).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500),l.nodes=c,l.links=i,l.svg=e,l},waitForElement:function(){var e=this;window.AQUARIA.addedFeature=!0,"none"!==document.getElementById("waitingFrame").style.display?setTimeout(e.waitForElement,5):(window.AQUARIA.passFeature(window.AQUARIA.customfeatureSet,window.AQUARIA.customfeatureSetioid),Ct["createFeatureMap"](window.AQUARIA.customfeatureSet),Re["selectAll"]("svg.loaded rect.feature").attr("fill","#a4abdf"),Re["select"]("svg.loaded").classed("loaded",!1))}}},Bt=Ot,qt=(n("41b6"),Object(R["a"])(Bt,_t,St,!1,null,null,null)),Tt=qt.exports,Lt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"scrim level6",attrs:{id:"nodeLoader"},on:{click:e.hideLoader}},[n("img",{attrs:{src:e.loader}})])},Nt=[],Ft={name:"NodeLoader",data:function(){return{loader:n("ae7d")}},props:["coordinates","change"],watch:{change:function(e,t){var n=this;document.querySelector("#nodeLoader > img").style.marginLeft=n.coordinates.clientX+"px",document.querySelector("#nodeLoader > img").style.marginTop=n.coordinates.clientY-10+"px"}},methods:{hideLoader:function(){this.$parent.showLoader=!1,this.$parent.showTree=!1}}},Qt=Ft,Ht=(n("39dd"),Object(R["a"])(Qt,Lt,Nt,!1,null,"26c15231",null)),jt=Ht.exports,Vt={name:"PopUp",components:{TreeView:Tt,ExpandableTextLine:me["a"],NodeLoader:jt},watch:{coordinates:function(e,t){var n=e.x-document.querySelector("#popupTail").getBoundingClientRect().width/2+e.width/2;document.querySelector("#popupshell").style.marginLeft=n-10+"px",document.querySelector("#popupshell").style.top=e.y-e.height+"px",document.querySelector("#popupTail").style.left=n+"px"}},data:function(){return{popupTail:n("4c7a")}},computed:Object(We["a"])({coordinates:function(){return s["default"].state.popupCoordinates},data:function(){return{variantStructs:s["default"].state.variantStructs,variantResidues:s["default"].state.variantResidues,popupTitle:s["default"].state.popupTitle,PopupText:s["default"].state.popupText}}},Object(Ye["b"])(["getVariant","getVariantStructs","getVariantResidues","getPopupTitle","getPopupText","getServersDone","getVariantIdx","getMatches"])),methods:{hidePopup:function(){s["default"].commit("setPopupTitle","")},getDefaultDesc:function(){return this.getVariant&&this.getVariantResidues&&Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"defaultDesc")&&this.getVariantIdx>-1?this.getVariantResidues[this.getVariant].defaultDesc[this.getVariantIdx]:""}}},zt=Vt,Gt=(n("9b93"),Object(R["a"])(zt,At,bt,!1,null,"b2553228",null)),Zt=Gt.exports,Wt=window.outerWidth,Yt=50,Jt={name:"CoverageMap",components:{FeatureMap:wt,PopUp:Zt},data:function(){return{seqLength:0,scale:null,coverageMapsrw:0,residueColor:null}},computed:{feature:function(){return s["default"].state.feature},structure:function(){return s["default"].state.secondaryStructure}},watch:{feature:function(e,t){var n=this;null===e.set?n.selectStructmap(window.AQUARIA.currentMember):(Re["selectAll"]('[id^="residue_"')[0].map((function(e,t){Re["select"](e).select("rect").attr({fill:"grey"})})),window.addEventListener("resize",(function(){Re["selectAll"]('[id^="residue_"')[0].map((function(e,t){Re["select"](e).select("rect").attr({fill:"grey"})}))}))),console.log("This is data",e,t)},structure:function(){this.selectStructmap(window.AQUARIA.currentMember)}},mounted:function(){var e=this,t="".concat(window.BACKEND,"/getCoverageMap"),n={selector:[e.$route.params.uniprotAccession]};J()({method:"get",url:t,params:n}).then((function(t){console.log(t.data),e.drawMap(t.data),window.addEventListener("resize",(function(){document.querySelector("#map > #coverageMap").remove(),e.drawMap(t.data),e.selectStructmap(window.AQUARIA.currentMember)}))}))},methods:{drawMap:function(e){var t=this,n=t.renderSVG();t.seqLength=e.seqLength,t.scale=Re["scale"].linear().domain([1,t.seqLength]).range([1,window.innerWidth]),t.coverageMapsrw=t.scale(e.seqLength)/e.seqLength,e.secondaryStructures.forEach((function(a){a.start=+a.start,a.end=+a.end,t.drawResidues(a,n,e)}))},renderSVG:function(){var e=Re["select"]("#map").append("svg").attr("id","coverageMap").attr("width",Wt).attr("height",Yt),t=e.append("g");return t},drawResidues:function(e,t,n){var a=0,r=this;if("SHEET"===e.Type)var s=18,i=17;else"COIL"===e.Type?(s=14,i=19):(s=19,i=16);for(var o=e.start;o<=e.end;o++)t.append("g").attr("id","residue_"+o+"_"+e.Type).append("rect").attr("transform","translate("+(o*r.coverageMapsrw-r.coverageMapsrw)+","+i+")").attr("width",r.coverageMapsrw*(a+1)).attr("height",s).attr("fill","grey").style("opacity",1-.7/n.densityMap[o-1]).on("mouseover",(function(){Re["select"](this).attr({stroke:"white"})})).on("mouseout",(function(){Re["select"](this).attr({stroke:r.residueColor})}))},selectStructmap:function(e){var t=this;Re["selectAll"]('[id^="residue_"')[0].map((function(e,t){Re["select"](e).select("rect").attr({fill:"grey"})}));var n=s["default"].getters.getSecondaryStructure[0],a=window.AQUARIA.currentMember.seq_start[0],r=window.AQUARIA.currentMember.seq_end[window.AQUARIA.currentMember.seq_start.length-1],i=(r-a)*t.coverageMapsrw+t.coverageMapsrw;document.querySelector("#map > #coverageMap > rect")&&document.querySelector("#map > #coverageMap > rect").remove(),Re["select"]("#map > #coverageMap").append("rect").attr("width",i).attr("height",25).attr("transform","translate("+(a*t.coverageMapsrw-t.coverageMapsrw)+",14)").attr("fill","none").attr("stroke","grey").attr("stroke-width",1).attr("rx",6).attr("ry",6),n.map((function(e){if(e.end)var n=e.start,a=e.end,r=e.type;else n=e.split("\n")[0].split(":")[1].split("-")[0],a=e.split("\n")[0].split(":")[1].split("-")[1],r=e.split("\n")[0].split(":")[0];for(var s=n;s<=a;s++){var i='[id^="residue_'+s+'_"]';Re["select"](i+"> rect").attr({fill:t.getStructureColor(r)})}}))},getStructureColor:function(e){return"SHEET"===e?"#f6c719":"COIL"===e?"#6f9e52":"#6491b6"}}},$t=Jt,Xt=(n("9704"),Object(R["a"])($t,ut,dt,!1,null,"1377106a",null)),Kt=Xt.exports,en=n("8ac5"),tn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.data.error?n("div",{staticClass:"ErrorPanel overlay level3",attrs:{id:"AboutError"}},[n("a",{staticClass:"close",attrs:{href:"#"},on:{click:e.loadLastSuccess}}),n("div",[n("p",{staticClass:"thetitle"},[e._v(e._s(e.data.error))]),n("p",{staticClass:"intro1"},[e._v(e._s(e.data.errorMsg)+" "),e.data.errorMsg?n("br"):e._e(),e._v(" "),e.data.errorMsg?n("br"):e._e(),e._v(" Press 'Report Issue' to tell the Aquaria team, or press 'OK' to return to previous structure.")]),n("div",[n("md-button",{staticClass:"md-raised md-primary",attrs:{href:e.lastURL}},[e._v("OK")]),n("md-button",{staticClass:"md-raised md-primary",attrs:{href:e.issuesURL,target:"_blank"}},[e._v("Report Issue")])],1)])]):e._e()},nn=[],an={name:"Errors",data:function(){return{issues:"",title:"",changes:"https://github.com/aqclient/dev.aqclient.github.io/issues/new?labels=enhancement",logo:n("3198")}},computed:{data:function(){return{message:s["default"].state.message,error:s["default"].state.error,errorMsg:s["default"].state.errorMsg}},issuesURL:function(){return'https://github.com/aqclient/dev.aqclient.github.io/issues/new?title=Problem with this page&labels=bug&body=<a href="'+encodeURIComponent(window.location.href)+'">'+this.data.error+"</a>"},pageUrl:function(){return window.location.href},lastURL:function(){return window.location.origin}},methods:{loadLastSuccess:function(){window.location.pathname=localStorage.getItem("LastSuccess")?localStorage.getItem("LastSuccess"):"/P04637"}}},rn=an,sn=(n("715b"),Object(R["a"])(rn,tn,nn,!1,null,"72919d45",null)),on=sn.exports,cn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"HelpPanel hide dialouge-window overlay level7",attrs:{id:"UserHelp"}},[n("a",{staticClass:"close",attrs:{href:"#"},on:{click:e.closeHelp}}),n("div",{staticClass:"fill",attrs:{id:"fullwindow-video"}},e._l(e.videos,(function(t){return n("youtube",{key:t.id,ref:"youtube",refInFor:!0,staticClass:"hide",attrs:{id:t.id,"video-id":t.id},on:{paused:function(t){return e.paused(t)},ended:function(t){return e.finished(t)}}})})),1),n("div",{attrs:{id:"contents"}},[n("p",{staticClass:"thetitle"},[e._v(e._s(e.data.title))]),n("p",{staticClass:"intro"},[e._v("Watch tutorial videos to get started.")]),n("p",{staticClass:"intro"},[e._v("Skip watching tutorial videos and start using Aquaria.")]),e.data.newUser?e._e():n("Playlist",{attrs:{playlist:e.videos}}),e.data.newUser?n("div",[n("youtube",{ref:"youtube",attrs:{id:"intro-video","video-id":"FAQ3yVGYSzY"},on:{playing:function(t){return e.playing(t)},paused:function(t){return e.paused(t)},ended:function(t){return e.finished(t)}}})],1):e._e(),n("a",{attrs:{href:"#",id:"skip"},on:{click:e.closeHelp}},[e._v("Skip > ")])],1)])},ln=[],un=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"playlists"}},e._l(e.playlist,(function(t){return n("span",{key:t.id,attrs:{id:t.id},on:{click:function(n){return e.play(t.id)}}},[n("div",{staticClass:"thumbnail-container"},[n("img",{attrs:{src:"https://img.youtube.com/vi/"+t.id+"/0.jpg"}}),n("button",{staticClass:"btn"},[e._v("▶")])]),n("p",[e._v(e._s(t.title))])])})),0)},dn=[],pn={name:"Playlist",props:["playlist"],methods:{play:function(e){document.querySelector("#contents").className=" hide",document.getElementById(e).className+=" show",document.getElementById("UserHelp").classList.remove("overlay"),document.getElementById("UserHelp").classList.remove("level7"),document.getElementById("UserHelp").classList.remove("dialouge-window"),document.getElementById("UserHelp").className+=" fullwindow";for(var t=0;t<this.$parent.$children.length;t++)if(this.$parent.$children[t].$attrs.id===e)var n=t;this.$parent.$children[n].player.playVideo()}}},hn=pn,fn=(n("4d26"),Object(R["a"])(hn,un,dn,!1,null,null,null)),mn=fn.exports,gn={name:"UserHelp",components:{Playlist:mn},data:function(){return{videos:[{id:"FAQ3yVGYSzY",title:"Introduction to Aquaria"},{id:"UZNEmPOaVrA",title:"How to Calculate Distances"}]}},computed:{data:function(){return{title:s["default"].state.helpTitle,newUser:s["default"].state.newUser}}},methods:{closeHelp:function(){var e=this;if(document.querySelector("iframe.show")){var t=document.querySelector("iframe.show").id;document.getElementById("contents").classList.remove("hide"),document.getElementById(t).classList.remove("show"),document.getElementById("UserHelp").className+=" dialouge-window",document.getElementById("UserHelp").className+=" overlay",document.getElementById("UserHelp").className+=" level7",document.getElementById("UserHelp").classList.remove("fullwindow");var n={h:{}};n.h.id=t,e.paused(n)}else document.getElementById("UserHelp").classList.remove("show"),document.getElementById("UserHelp").className+=" hide",S["RemoveOverlay"](),document.querySelector("#helpbtn").classList.contains("active")&&e.toggleActive(document.querySelector("#helpbtn"))},toggleActive:function(e){"lnk active"===e.className?e.className="lnk":e.className="lnk active"},getIndex:function(e){for(var t=0;t<this.$refs.youtube.length;t++)if(this.$refs.youtube[t].$attrs.id===e)return t},playing:function(e){if(v=e.h.id,this.$refs.youtube.length)y=this.getIndex(v),this.$refs.youtube[y].player.playVideo();else{this.$refs.youtube.player.playVideo();var t=document.querySelector("#intro-video"),n=t.requestFullScreen||t.mozRequestFullScreen||t.webkitRequestFullScreen;n&&n.bind(t)()}},paused:function(e){v=e.h.id,document.querySelector("iframe.active")?this.closeHelp():(this.$refs.youtube.length?(y=this.getIndex(v),this.$refs.youtube[y].player.pauseVideo()):this.$refs.youtube.player.pauseVideo(),(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)&&document.exitFullscreen())},finished:function(e){v=e.h.id,this.$refs.youtube.length?(y=this.getIndex(v),this.$refs.youtube[y].player.stopVideo()):this.$refs.youtube.player.stopVideo(),document.querySelector("iframe.active")&&document.querySelector("#UserHelp a.close").click(),document.exitFullscreen(),this.closeHelp()}}},vn=gn,yn=(n("7f5f"),Object(R["a"])(vn,cn,ln,!1,null,null,null)),wn=yn.exports,An=n("7d7f"),bn=n.n(An),_n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"waitingFrame"}},[n("div",{attrs:{id:"waitinghtml"}},[n("img",{attrs:{src:e.loader}}),n("p",{attrs:{id:"appletMessage"}},[e._v(" "+e._s(e.data.loaderMsg)+" ")])])])},Sn=[],xn={name:"Loader",data:function(){return{loader:n("8673")}},computed:{data:function(){return{loaderMsg:s["default"].state.LoaderMsg}}}},In=xn,Rn=(n("92b5"),Object(R["a"])(In,_n,Sn,!1,null,"4d0fb015",null)),kn=Rn.exports,Cn={name:"Wrapper",components:{Header:F,Sequence:Se,AboutAlignment:De,AboutPdb:Te,StructureViewer:je,Tabs:lt,CoverageMap:Kt,AboutAquaria:en["a"],Errors:on,UserHelp:wn,Loader:kn},props:["urlRequest"],computed:{data:function(){return{loader:s["default"].state.Loader,hash:s["default"].state.hash,arrayOfVideos:["https://youtu.be/FAQ3yVGYSzY?list=PLsGaleFn8YydVFkxDhOvHHE5NoTsl6D1e","https://www.youtube.com/watch?v=UZNEmPOaVrA&list=PLsGaleFn8YydVFkxDhOvHHE5NoTsl6D1e&index=2"]}}},methods:{closeHelp:function(){var e=this;document.getElementById("UserHelp").classList.remove("show"),document.getElementById("UserHelp").className+=" hide",document.querySelector(".dimmer").style.display="none",document.querySelector("#helpbtn").classList.contains("active")&&(S["RemoveOverlay"](),e.toggleActive(document.querySelector("#helpbtn")))},checkPhone:function(){var e=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(!navigator.platform)return!1;while(e.length)if(navigator.platform===e.pop()||screen.width>=300&&screen.width<=600)return!0},inspectHeight:function(){document.querySelector("#heightinspector").innerHTML="reset";var e=window.outerHeight-window.innerHeight;document.querySelector("#heightinspector").innerHTML="HO:"+window.outerHeight+", hDiff:"+e+", scroll: "+window.scrollY+" bodyHeight: "+document.body.scrollHeight},dismissPanel:function(){document.querySelector("#scrim").className="hide",document.querySelector("#title").className="item title fix level6",null!==document.querySelector("#titleAlign")&&(document.querySelector("#titleAlign").className=""),document.querySelectorAll("#title span a").forEach((function(e){e.className=""})),document.querySelector("#pdb_id > span#help").style.visibility="visible"},toggleActive:function(e){"lnk active"===e.className&&(e.className="lnk")}},mounted:function(){window.AQUARIA.panel3d=new bn.a("#threeDSpan",i["chainSelected"]),window.scrollBy(0,100),i["loadAccession"]([this.$props.urlRequest.uniprotAccession],this.$props.urlRequest.pdbID,this.$props.urlRequest.chain),window.addEventListener("resize",(function(){window.scrollBy(0,100),document.querySelector("#vis > .ruler").remove(),document.querySelectorAll("#vis > #allclusters .outer_container").forEach((function(e){return e.remove()})),window.AQUARIA.refresh();var e=window.outerHeight-window.innerHeight;document.querySelector("#heightinspector").innerHTML="HO:"+window.outerHeight+", hDiff:"+e+", scroll: "+window.scrollY+" bodyHeight: "+document.body.scrollHeight})),setTimeout((function(){document.querySelector(".matrixLoading")&&(document.querySelector(".matrixLoading").style.visibility="hidden",document.querySelector(".matrixLoading").style.display="none")}),1500)},updated:function(){}},En=Cn,Mn=(n("8f89"),Object(R["a"])(En,a,r,!1,null,null,null));t["default"]=Mn.exports},ae7d:function(e,t,n){e.exports=n.p+"img/node.cac6f4f6.gif"},b066:function(e,t,n){"use strict";n("d673")},b072:function(e,t,n){},b335:function(e,t,n){e.exports=n.p+"img/aquaria-menu.1a89fbab.svg"},b3c8:function(e,t,n){(function(e){n("ac1f"),n("5319"),e.fn.digits=function(){return this.each((function(){e(this).text(e(this).text().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"))}))},e(document).ready((function(){e("#protein_syn_input, #organism_syn_input").focus((function(){e(".infocus").removeClass("infocus"),e("#searchByName").addClass("infocus")})),e("#help3D").hide()})),e((function(){e(document).tooltip({position:{my:"right top+15",at:"right center",collision:"none"}},{show:{delay:1200}})}))}).call(this,n("1157"))},b923:function(e,t,n){},bf44:function(e,t,n){"use strict";n("c9a6")},c48f:function(e,t,n){},c9a6:function(e,t,n){},d673:function(e,t,n){},e352:function(e,t,n){},e4c6:function(e,t,n){},ea62:function(e,t,n){},ee8d:function(e,t,n){"use strict";n("46c7")},f61d:function(e,t,n){},f760:function(e,t,n){"use strict";n("8f69")},fc7c:function(e,t,n){"use strict";n("e352")}}]);
//# sourceMappingURL=wrapper.140a84bb.js.map