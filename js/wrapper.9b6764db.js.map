{"version":3,"sources":["webpack:///./src/components/Header/Header.vue?1d0a","webpack:///./src/views/Coverage.vue?06d9","webpack:///src/views/Coverage.vue","webpack:///./src/views/Coverage.vue?1d8f","webpack:///./src/views/Coverage.vue","webpack:///./src/assets/img/search_dark.png","webpack:///./src/components/AquariaLayout/helpers/topten.js","webpack:///./src/views/Coverage.vue?d161","webpack:///./src/components/Features/helpers/featurelist.js","webpack:///./src/assets/images/aquaria-symbol-01.svg","webpack:///./src/assets/img/up.png","webpack:///./src/components/InfoAbout/AboutAlignment.vue?7ce6","webpack:///./src/assets/img/MS-01.svg","webpack:///./src/components/AquariaLayout/NodeLoader.vue?0e3d","webpack:///./src/components/MatchingStructures/MatchingStructures.vue?bb56","webpack:///./src/components/MatchingStructures/TreeView.vue?9fb7","webpack:///./src/assets/img/popupTail.png","webpack:///./src/components/InfoAbout/Playlist.vue?3420","webpack:///./src/components/AquariaLayout/PopUp.vue?a91f","webpack:///./src/components/Features/helpers/featureMap.js","webpack:///./src/assets/img/down.png","webpack:///./src/components/AquariaLayout/PopUp.vue?0528","webpack:///./src/components/InfoAbout/Errors.vue?ed76","webpack:///./src/components/AquariaLayout/Tabs.vue?4deb","webpack:///./src/components/InfoAbout/UserHelp.vue?72f9","webpack:///./src/assets/img/aquaria-loader3.svg","webpack:///./src/components/StructureViewer/StructureViewer.vue?e2e1","webpack:///./src/views/Wrapper.vue?2d51","webpack:///./src/components/AquariaLayout/Loader.vue?4e76","webpack:///./src/assets/img/FT-01.svg","webpack:///./src/components/Search/SearchPanel.vue?dce5","webpack:///./src/components/InfoAbout/AboutUniprot.vue?bfc0","webpack:///./src/assets/img/search_100.png","webpack:///./src/views/Wrapper.vue?2914","webpack:///./src/components/AquariaLayout/helpers/aquaria.js","webpack:///./src/components/Header/Header.vue?8496","webpack:///src/components/InfoAbout/UserHelp.vue","webpack:///./src/components/Header/Title.vue?ac28","webpack:///src/components/Header/Title.vue","webpack:///./src/components/Header/Title.vue?fc25","webpack:///./src/components/Header/Title.vue","webpack:///./src/components/Header/Menu.vue?197c","webpack:///src/components/Header/Menu.vue","webpack:///./src/components/Header/Menu.vue?11f0","webpack:///./src/components/Header/Menu.vue","webpack:///src/components/Header/Header.vue","webpack:///./src/components/Header/Header.vue?cde9","webpack:///./src/components/Header/Header.vue","webpack:///./src/components/InfoAbout/Sequence.vue?f51c","webpack:///./src/components/Search/SearchPanel.vue?541b","webpack:///./src/components/Search/SearchOrganism.vue?9345","webpack:///src/components/Search/SearchOrganism.vue","webpack:///./src/components/Search/SearchOrganism.vue?f903","webpack:///./src/components/Search/SearchOrganism.vue","webpack:///./src/components/Search/SearchProtein.vue?1d55","webpack:///src/components/Search/SearchProtein.vue","webpack:///./src/components/Search/SearchProtein.vue?30f6","webpack:///./src/components/Search/SearchProtein.vue","webpack:///src/components/Search/SearchPanel.vue","webpack:///./src/components/Search/SearchPanel.vue?ad8b","webpack:///./src/components/Search/SearchPanel.vue","webpack:///./src/components/InfoAbout/AboutUniprot.vue?b552","webpack:///src/components/InfoAbout/AboutUniprot.vue","webpack:///./src/components/InfoAbout/AboutUniprot.vue?7045","webpack:///./src/components/InfoAbout/AboutUniprot.vue","webpack:///src/components/InfoAbout/Sequence.vue","webpack:///./src/components/InfoAbout/Sequence.vue?7531","webpack:///./src/components/InfoAbout/Sequence.vue","webpack:///./src/components/InfoAbout/AboutAlignment.vue?8f6e","webpack:///src/components/InfoAbout/AboutAlignment.vue","webpack:///./src/components/InfoAbout/AboutAlignment.vue?2b44","webpack:///./src/components/InfoAbout/AboutAlignment.vue","webpack:///./src/components/InfoAbout/AboutPdb.vue?16fd","webpack:///src/components/InfoAbout/AboutPdb.vue","webpack:///./src/components/InfoAbout/AboutPdb.vue?9380","webpack:///./src/components/InfoAbout/AboutPdb.vue","webpack:///./src/components/StructureViewer/StructureViewer.vue?288d","webpack:///src/components/StructureViewer/StructureViewer.vue","webpack:///./src/components/StructureViewer/StructureViewer.vue?4706","webpack:///./src/components/StructureViewer/StructureViewer.vue","webpack:///./src/components/AquariaLayout/Tabs.vue?ecb2","webpack:///./src/components/MatchingStructures/MatchingStructures.vue?273f","webpack:///src/components/MatchingStructures/MatchingStructures.vue","webpack:///./src/components/MatchingStructures/MatchingStructures.vue?3359","webpack:///./src/components/MatchingStructures/MatchingStructures.vue","webpack:///./src/components/Features/Features.vue?446e","webpack:///src/components/Features/Features.vue","webpack:///./src/components/Features/Features.vue?7da7","webpack:///./src/components/Features/Features.vue","webpack:///./src/components/MatchingStructures/CoverageMap.vue?a5f8","webpack:///src/components/MatchingStructures/CoverageMap.vue","webpack:///./src/components/MatchingStructures/CoverageMap.vue?a2b3","webpack:///./src/components/MatchingStructures/CoverageMap.vue","webpack:///src/components/AquariaLayout/Tabs.vue","webpack:///./src/components/AquariaLayout/Tabs.vue?112e","webpack:///./src/components/AquariaLayout/Tabs.vue","webpack:///./src/components/AquariaLayout/PopUp.vue?3c2e","webpack:///./src/components/MatchingStructures/TreeView.vue?f569","webpack:///src/components/MatchingStructures/TreeView.vue","webpack:///./src/components/MatchingStructures/TreeView.vue?7b19","webpack:///./src/components/MatchingStructures/TreeView.vue","webpack:///./src/components/AquariaLayout/NodeLoader.vue?f58d","webpack:///src/components/AquariaLayout/NodeLoader.vue","webpack:///./src/components/AquariaLayout/NodeLoader.vue?ba43","webpack:///./src/components/AquariaLayout/NodeLoader.vue","webpack:///src/components/AquariaLayout/PopUp.vue","webpack:///./src/components/AquariaLayout/PopUp.vue?4aff","webpack:///./src/components/AquariaLayout/PopUp.vue","webpack:///./src/components/InfoAbout/Errors.vue?da88","webpack:///src/components/InfoAbout/Errors.vue","webpack:///./src/components/InfoAbout/Errors.vue?851d","webpack:///./src/components/InfoAbout/Errors.vue","webpack:///./src/components/InfoAbout/UserHelp.vue?d32f","webpack:///./src/components/InfoAbout/Playlist.vue?411a","webpack:///src/components/InfoAbout/Playlist.vue","webpack:///./src/components/InfoAbout/Playlist.vue?be0a","webpack:///./src/components/InfoAbout/Playlist.vue","webpack:///./src/components/InfoAbout/UserHelp.vue?4c0c","webpack:///./src/components/InfoAbout/UserHelp.vue","webpack:///./src/components/AquariaLayout/Loader.vue?8a76","webpack:///src/components/AquariaLayout/Loader.vue","webpack:///./src/components/AquariaLayout/Loader.vue?1f62","webpack:///./src/components/AquariaLayout/Loader.vue","webpack:///src/views/Wrapper.vue","webpack:///./src/views/Wrapper.vue?083a","webpack:///./src/views/Wrapper.vue","webpack:///./src/assets/img/node.gif","webpack:///./src/components/Header/Menu.vue?d5ba","webpack:///./src/assets/images/aquaria-menu.svg","webpack:///./src/components/AquariaLayout/helpers/utilities.js","webpack:///./src/components/MatchingStructures/CoverageMap.vue?c4a0","webpack:///./src/components/Header/Title.vue?30f2","webpack:///./src/components/InfoAbout/AboutPdb.vue?74f2","webpack:///./src/components/Features/Features.vue?b8f3"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","name","components","MatrixHeader","LoadingPage","data","hostname","store","publicPath","structures","totalStructures","d3","green","backgroundColour","x","y","organismId","mounted","url","method","window","addEventListener","initialDisplay","methods","getResidueSize","length","scale","fillData","protein","nonDark","i","segment","push","placeholder","getNonDarkBetween","Start","start","Stop","splitToChunks","result","array","splice","Math","ceil","addNonDarkToFragments","fragments","j","fragment","drawArrow","fill","id","primary_accession","console","log","hoverText","description","width","prevOffset","nonDarkFragments","JSON","parse","stringify","numChunks","floor","newFill","prevStop","len","slice","fragmentWidth","k","shapeFill","svg","append","rectLen","triangleSize","p","height","lab","node","getComputedTextLength","text","synonym","shortest","reduce","replace","attr","style","drawRuler","range","continuous","xScale","linear","ticks","placeholderLarge","axis","selectAll","smallAxis","axisLabel","parentNode","appendChild","drawFragments","Name","Primary_Accession","Short_Name","concat","match","pdb","Description","offset","renderImage","imgSize","xOffset","link","img","dark","drawMatchingStructures","imgYOffset","clusters","filter","sort","spliced","start1","min","start2","end1","max","end2","cluster_size","seq_start","seq_end","forEach","cluster","end","matchingScale","matchingAxis","matchingLabel","imageObj","pdb_id","drawExpandButton","expandButton","innerHeight","innerWidth","on","d","select","cursor","className","baseVal","split","indexOf","classed","transition","duration","transform","translate","rows","foundOpen","topOpen","renderHalfMoon","arcGenerator","arc","semicircle","arrow","opened","isResize","partitionToThree","totalSum","getListSum","list","newNum","twoPart","partitionToTwo","pop","threePart","index","prev","cur","findSubstring","L","a1","charAt","a2","substring","countMatchingStructures","component","module","exports","LRU","require","URL","TopTen","MAX_SIZE","that","getUrlParameter","localStorage","removeItem","existing","getItem","cache","entries","entry","set","key","value","prototype","submitFired","last","save","saveArray","savedText","setItem","getAll","ret","savePDB","primary_acccession","previousLookup","previousLookupByName","updatePDB","featureSet","featureCount","groupCount","extServerIds_","Highcharts","_","$","featureMap","Panels","Store","createFeatureUI","document","getElementById","offsetWidth","AQUARIA","margin","right","left","updateFeatureTabTitle","preferredProteinName","t","updateFeatureUI","featureList","extServerIds_forLoading","waitingFrame","display","setTimeout","waitForElement","c","Server","addedFeatures","custom_feature","children","eq","find","trackPos","getFeatureSetIdxToShow","oid","customfeatureSet","customfeatureSetioid","passFeature","querySelector","remove","drawfeatureMap","createFeatureMap","addedFeature","showMatchingStructures","drawAxisRuler","orderedFeatures","currentFeature","groupedFeatures","groupBy","feature","Object","keys","map","String","featureOrder","featureDiv","featureHeader","html","About","fh","aFsIdx","hasOwnProperty","SeqHash","sequence","uniprot_hash","enter","Category","Type","source","each","drawTrack","show","digits","scrollToggle","parent","sortable","css","disableSelection","content","slideToggle","is","addClass","visibility","notThis","not","slideUp","removeClass","mouseenter","mouseleave","mousedown","mouseup","info_hovers","querySelectorAll","onmouseenter","backgroundColor","color","onmouseleave","this_","MutationObserver","mutations","sources","get","observe","attributes","childList","featureRegex","RegExp","searchParam","location","search","test","idx_file","name_file","idx_featSet","name_featSet","filePos","featsetPos","decodeURI","arr","isNaN","parseInt","dataStructure","revBuildStruct","key_filename","key_featSet","order","startsWith","featureSets","posInTrack","minTrackVal","order_featSet","orderOfOccur","category","type","getNextOrder","obj","maxOrder","datum","features","Tracks","o","viewBoxwidth","outerdiv","nusvg","createSVGforFeature","click","default","commit","onFeatureChange","removeCurrentAnnotationFrom3DViewer","showMap","hidePanels","size","srw","Class","createMouseOverCallback","ID","call","mouseoutFeature","mouseoverFeature","el","f","eid","showAnnotation","moveTheDiv","Promise","resolve","reject","aSuperFamFeature","clearTimeout","then","fadeOut","catch","error","createANewDiv_hcNoData","divId","newDiv","createElement","doThePlotting_v2","theSeriesData_inner","theSeriesData_outer","theTitle","theSize_inner","labelCol_inner","labelDist_inner","innerSize_outer","name_inner","name_outer","labelCol_outer","chart","title","plotOptions","pie","shadow","center","tooltip","valueSuffix","series","dataLabels","enabled","formatter","point","distance","innerSize","responsive","rules","condition","maxWidth","chartOptions","trk","nr","elmt","sentAnnotationTo3DViewer","common","oneAaCodes","urlhtml","urls","href","balloon","oldAa","includes","btnsDiv","anAa","_i","isUniCosOrFun","isUniCosOrFunPresent","desc","serverId","balloonTitle","label","balloonText","getIdxInVarRes","handleCathPopups","updateTheStyleOfHc","fpos","getBoundingClientRect","svgdim","getBBox","fwidth","appendPopup","resNum","popupText","varRes","getters","getVariantResidues","theOrigFeatStr","tag_open","tag_close","firstOpenPos","lastClosePos","lastIndexOf","variantStructs","hc_go","dist","prepend","innerHTML","hc_ec","hc_species","hcSeriesGroup","getElementsByClassName","thePaths","getElementsByTagName","pathKey","theColor","getAttribute","removeAttribute","setAttribute","currentAnnotationsIn3DViewer","undefined","panel3d","removeAnnotation","annotationName","annotations","trackNumber","reformatAndAddFeatureTo3DViewer","featureColours","Array","featureNames","featureDescriptions","featurePositions","featureURLs","featureURLtexts","lastColour","fURLs","fURLtxts","protId","ProteinID","sequences","annotationToAdd","isArray","addAnnotation","firstSpecifiedId","isPopupOpened","isAuto","part","stroke","top","bottom","viewboxWidth","_this","hash","nusg","arrayPositions","getTrackWithOrder0Label","drawFeatures","element","event","MouseEvent","dispatchEvent","origFeatStr","resNums","idx","values","featNames","minOrder","featNames_keys","seqLength","myScale","domain","trans_x","coverageMapsrw","tagOpen","tagClose","doThePlottingV2","createANewDivHcNoData","theSeriesDataInner","theSeriesDataOuter","theSizeInner","labelColInner","labelDistInner","innerSizeOuter","nameInner","nameOuter","labelColOuter","staticClass","_e","dismissPanel","jQuery","featurelist","fetch_das_annotations","textpanel","axios","MAX_PROTEIN_HISTORY","proteinSubmitListeners","addProteinSubmitListener","listener","overlay","elemDiv","body","RemoveOverlay","fireProteinSubmitListeners","proteinName","proteinTopTen","pdbTopTen","currentBiounit","currentData","aquariaReady","switcherText","threedViewer","reload","display_3D_structure","assert_orientation","m","parseFloat","det","join","member","currentChain","pdb_chain","alignment","transforms","common_names","source_primary_accession","conservations","biounits","threeDWidth","threeDHeight","BACKEND","prefferedChain","response","pdbData","Biounits","experimental_method","toLowerCase","updatePDBPanel","alignment_identity_score","hide","pdb_data","generateAttributes","structures2match","version_string","val","hide3DViewer","findPDBMember","pdbid","chain","pdbMember","clusterID","memberID","members","urlParams","substr","origin","pathname","history","pushState","protocol","host","getOrganism","getGene","PDBIndex","currentMember","initialised","load","alert","display_features","uniprot_sequence_MD5_hash","blankPanel","startSpin","fetch_annotations","featureInfo","completeServers","updateDocumentTitle","protein_name","score","refresh","load3DAlignment","preferred_protein_name","loadRequest","selector","selectPDB","selectChain","params","newData","display_member","selectedMember","Selected_PDB","cluster_number","member_number","updateUniprotInfo","removeAll","message","chainSelected","LoadAQUARIA","blankCount","panel","isOn","fadeIn","targetId","showScrim","aquariasymbol","hamburger","organism_name","seqRes","storeHash","makeActive","_v","_s","showHelp","structRes","computed","Gene","Organism","beforeMount","update3DTitle","accession","pdbId","chainId","moleculeName","shortName","trim","short_moleculeName","evalue","E_value","explainTitle","classList","ev","target","localName","parentElement","resetSelection","release","updated","selectedRes","residues","innerText","_m","directives","rawName","expression","$event","$$selectedVal","options","selected","_value","multiple","onChange","elem","toggleActive","preventDefault","Title","Menu","fillin","ref","getResultValue","handleSubmit","Autocomplete","OrganismSynonyms","OrgID","organism_id","clear","$refs","autocomplete","labelValues","term","input","callbackData","names","ids","pdbIDs","cacheProteinSynonyms","proteinSynonymOrgId","collectResponsevalues","primaryAccession","parts","getLRU","collectResponse","maxHeight","item","suffix","lruMatches","showPopup","allValues","nameCallback","nameData","Synonym","organism","Organism_ID","a","b","previous","current","dup","idCallback","idData","Source_Field","pdbCallback","SearchOrganism","SearchProtein","selectOrganism","placeholderText","orgInput","protInput","_l","staticStyle","ExpandableTextLine","uniprotDesc","sections","descriptions","tightSections","patt","extractLines","info","unshift","makeLists","n","fromCollection","head","nextHead","newList","linkCode","lhref","ltitle","lname","finalList","section","EachSec","SearchPanel","AboutUniprot","pdbName","uniprotName","evalueString","power","quality","precisiontxt","qualClass","Log10E","LN10","precision","round","toString","BioScience_PlantDisease_Weibull_model","temp","exp","pow","xIn","showBubble","msgHtml","bleft","btop","checkPhone","iDevices","navigator","platform","isPhone","e","newWindowHeight","baseWindowHeight","documentBody","contains","add","MS","FT","closeTab","showTree","prop","scrollBy","getMatches","inputs","w","outerWidth","h","drawMap","renderSVG","secondaryStructures","drawResidues","rect","thickness","MatchingStructures","Features","CoverageMap","showPanel","elem1","elem2","showMatches","soupController","clearSelectedResidues","showFeatures","togglePinBehaviour","domProps","getIfLoading","getPopupTitle","closeAndReset","isVarSpecified","getDefaultDesc","aaCode","getAaDataAsArr","dataStr","getOldAa","getVarDisplay","class","getIsShownVar","showTreeView","getPdbCount","isHrHidden","getVariant","getPosInfoDataAsArr","arrObj","keyStr","getIsShownRes","getTotalPdbCount","getIfBoldInfoPres","showThisAaInfoHideOthers","getPopupText","count","coordinates","change","popupTail","hideTree","limit","props","pdbs","up","down","watch","treeReady","clientX","$parent","showLoader","newVal","oldVal","chunks","chunk","generateArc","nodeClick","items","reversePdbArray","outputArray","nodes","elems","gap","pdbArray","createLinks","parentPDB","shift","dx","dy","pNode","links","output","verticalMargin","tier","nodeStartY","points","Gen","connector","hideLoader","loader","marginLeft","marginTop","clientY","TreeView","NodeLoader","expandTextLine","threeAaCodes","isShowTreeViewClicked","filters","structCntAa","variantResidues","getVariantStructs","totalNumStructs","created","thePin","closeBtn","dragElement","handlePopupInitLoc","resetLoadedPinState","activated","handleInitAa","resetToInitVar","cord","srcElement","protein_primaryAccession","sortedKeys","getVariantIdx","consequent","hidden","loadedPin","updateHrHidden","newAas","isAnAa","defaultDesc","toHideDefaultDesc","clickedAa","handleFocusOut","rmExpandableIfNoOverflow","checkTheOverflow","expandableDivs","getServersDone","aaBtn","updateSpanAa","valToDisp","updateUserSpecifiedAa","getInitLoadedPin","arrForExpandable","aa","setupDivForLen","divForTextLen","$nextTick","expClass","checkOverflow","clientWidth","scrollWidth","clientHeight","scrollHeight","positionInfo","isShown","listWithNoOldAa","noOldAaCodes","isMakeBold","handler","b2","posInfoDiv","componentinstance","$mount","$el","hideClickedUnhideOthrs","moveAndShowClickedDivAa","removeChild","selAa","handleInitVar","tailLeft","popupWidth","pos1","dragMouseDown","pos3","pos4","onmouseup","closeDragElement","onmousemove","elementDrag","pos2","elmnt","onmousedown","loadLastSuccess","errorMsg","lastURL","issuesURL","issues","changes","logo","encodeURIComponent","pageUrl","closeHelp","video","refInFor","paused","finished","newUser","videos","playing","play","$children","$attrs","player","playVideo","Playlist","activeVideoID","getIndex","youtube","iframe","requestFullScreen","mozRequestFullScreen","webkitRequestFullScreen","bind","pauseVideo","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","exitFullscreen","stopVideo","loaderMsg","Header","Sequence","AboutAlignment","AboutPdb","StructureViewer","Tabs","PopUp","AboutAquaria","Errors","UserHelp","Loader","arrayOfVideos","inspectHeight","hDiff","outerHeight","scrollY","fn","ready","focus","position","my","at","collision","delay"],"mappings":"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","file":"js/wrapper.9b6764db.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=style&index=0&id=34ef906a&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"matrix\"}},[_c('MatrixHeader'),_c('LoadingPage'),_c('div',{attrs:{\"id\":\"container\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id='matrix'>\n    <MatrixHeader />\n    <LoadingPage />\n     <div id='container'>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport MatrixHeader from '../components/MatrixLayout/MatrixHeader'\nimport LoadingPage from '../components/MatrixLayout/LoadingPage'\nimport store from '@/store/index'\n\nexport default {\n  name: 'Matrix',\n  components: {\n    MatrixHeader,\n    LoadingPage\n  },\n  data () {\n    return {\n      hostname: store.state.url,\n      publicPath: process.env.BASE_URL,\n      structures: null,\n      totalStructures: 0,\n      d3: require('d3'),\n      green: '#7A9D5B',\n      backgroundColour: '#ffffff',\n      x: 0,\n      y: 15,\n      organismId: '2697049' // COVID:2697049 SARS:694009 MERS:1263720\n    }\n  },\n  mounted () {\n    let allStructures\n    // window.BACKEND = 'https://odonoghuelab.org:8011/'\n\n    // gets an organism and runs all the functions and loads everything\n    var url = `${window.BACKEND}/${this.organismId}`\n    axios({\n      method: 'get',\n      url: url\n    })\n      .then(response => {\n        allStructures = JSON.parse(response.data.primary_accessions)\n        this.getStructures(this.organismId, allStructures).then(response => {\n          console.log(response)\n          this.getMatchingStructures(response).then(response => {\n            this.getProteinSynonyms(response).then(response => {\n              this.loadShapes(response).then(() => {\n                if (document.querySelector('.matrixLoading')) {\n                  document.querySelector('.matrixLoading').style.visibility = 'hidden'\n                  document.querySelector('.matrixLoading').style.display = 'none'\n                }\n              })\n            })\n          })\n        })\n        this.structures = allStructures\n      })\n\n    window.addEventListener('resize', this.initialDisplay)\n  },\n  methods: {\n    // TODO: add link to background? White rectangle with orange on hover?\n    // TODO: adding a gap if there is no gap between continous regions!!\n    // TODO: add a minimum image size as well as a max one.\n    // start writing a documentation about how things are done. IE, how polyproteins are split etc.\n\n    // given sequence length, return length of the rectangle to generate.\n    getResidueSize (scale, length) {\n      return length * scale\n    },\n\n    // This function takes in the protein data, and draws all the shapes\n    async loadShapes (data) {\n      // data in the format of [{name:string, primary_accession:string, sequence:string, position:int, length:int, clusters:array or 0, continuous:bool}]\n      data = this.partitionToThree(data)\n      var continuous = 0 // used to draw continuous axis over multiple proteins\n\n      // var svg = this.d3.select('#container').append('svg').attr('preserveAspectRatio', 'xMinYMin meet').attr('viewBox', '0 0 960 1200') // 960 width preserving aspect ratio instead of using window.innerWidth\n      var scale = 960 / Math.max(...(data.map(el => this.getListSum(el)))) // scale the viewport by the longest of the three lists in data\n\n      for (var i = 0; i < data.length; i++) {\n        var svg = this.d3.select('#container').append('svg').attr('class', 'row').attr('preserveAspectRatio', 'xMinYMin meet').attr('viewBox', '0 0 960 360') // 960 width preserving aspect ratio instead of using window.innerWidth\n\n        this.x = 0 // displacement from the left\n        this.y = 15\n        var offset = 0\n\n        if (i !== 0) { // PLACEHOLDER, SHOULD BE IF NOT THE LONGEST RESIDUE\n          // add arrow before\n          var prevLayer = data[i - 1]\n          var prefixName = prevLayer[prevLayer.length - 1]\n          var nextElem = data[i][0]\n          var prefixSize = Math.floor(nextElem.length / 500 + 1)\n          var large = false\n          if (prefixSize > 3) {\n            large = true\n          }\n          var placeholder = { id: 'placeholder', dark: true, placeholderLarge: large, primary_accession: prefixName.primary_accession, name: prefixName.name, synonym: prefixName.synonym, placeholder: true }\n          this.drawArrow(svg, placeholder, 150, 20, 20 / 1.5, offset, scale)\n          this.drawRuler(svg, placeholder, continuous, 150, 20 / 1.5, offset)\n          offset = offset + 150 + (20 / 1.5)\n        }\n\n        for (var n = 0; n < data[i].length; n++) {\n          var hadFragments = false\n          var height = 20 // the height of the rectangles, and the length of the triangle that is appended. Triangle width is 2*height\n          var triangleSize = height / 1.5\n          var width = this.getResidueSize(scale, data[i][n].length) - triangleSize // length of the residues, minus the width of the appended triangle\n          if (width < 0) {\n            triangleSize = this.getResidueSize(scale, data[i][n].length) // scale down the triangle\n            width = 0\n          }\n\n          // Draw the arrows for the protein\n          this.drawArrow(svg, data[i][n], width, height, triangleSize, offset, scale)\n\n          // draw the non-dark regions\n          // this.fillArrow(svg, data[i][n], width, height, triangleSize, offset, scale)\n\n          // Draw the axis\n          this.drawRuler(svg, data[i][n], continuous, width, triangleSize, offset)\n\n          if (data[i][n].continuous) {\n            continuous = data[i][n].length\n          } else {\n            continuous = 0\n          }\n\n          this.addNonDarkToFragments(data[i][n])\n\n          // Draw fragments if they exist\n          if (data[i][n].fragments.length !== 0) {\n            this.y = this.y + 33\n            hadFragments = true\n          }\n          this.drawFragments(svg, data[i][n].fragments, scale, offset)\n\n          // Draw the image of the protein if one exists, or fetch default if it does not\n          this.drawMatchingStructures(svg, data[i][n], width, height, triangleSize, offset, scale)\n\n          // Adjust the offset for the next protein\n          offset = offset + width + triangleSize\n          if (hadFragments) {\n            this.y = this.y - 33\n          }\n        }\n        if (i !== 0 && i !== data.length - 1) {\n          // add arrow after\n          var nextLayer = data[i + 1]\n          var nextName = nextLayer[0]\n          var prevElem = data[i - 1]\n          prefixSize = Math.floor(prevElem[prevElem.length - 1].length / 500 + 1)\n          large = false\n          if (prefixSize > 3) {\n            large = true\n          }\n          placeholder = { id: 'placeholder', dark: true, placeholderLarge: large, primary_accession: nextName.primary_accession, name: nextName.name, synonym: nextName.synonym, placeholder: true }\n          this.drawArrow(svg, placeholder, this.getResidueSize(scale, nextLayer[0].length) - 20 / 1.5, 20, 20 / 1.5, offset, scale)\n          // Draw the axis\n          this.drawRuler(svg, placeholder, continuous, this.getResidueSize(scale, nextLayer[0].length) - 20 / 1.5, 20 / 1.5, offset)\n        }\n\n        this.drawExpandButton(svg)\n      }\n      this.initialDisplay(false)\n    },\n\n    fillData (protein) {\n      var data = [{ offset: '0%', color: 'black' }]\n      if (protein.nonDark) {\n        for (var i = 0; i < protein.nonDark.length; i++) {\n          var segment = protein.nonDark[i]\n          data.push({ offset: '' + 100 * (segment.Start / protein.length) + '%', color: 'black' }) // end of the black\n          data.push({ offset: '' + 100 * (segment.Start / protein.length) + '%', color: this.green }) // start of the green\n          data.push({ offset: '' + 100 * (segment.Stop / protein.length) + '%', color: this.green }) // end of the green\n          data.push({ offset: '' + 100 * (segment.Stop / protein.length) + '%', color: 'black' }) // start of the black\n        }\n      }\n      if (protein.placeholder) {\n        data = [{ offset: '0%', color: '#CCCCCC' }]\n      }\n      // data.push({ offset: '100%', color: 'black' })\n      return data\n    },\n\n    getNonDarkBetween (protein, start, stop) {\n      var nonDark = []\n      if (protein.nonDark) {\n        for (var i = 0; i < protein.nonDark.length; i++) {\n          if (protein.nonDark[i].Start <= start && protein.nonDark[i].Stop >= start) {\n            nonDark.push({ Start: 0, Stop: (protein.nonDark[i].Stop - start) })\n          } else if (protein.nonDark[i].Start >= start && protein.nonDark[i].Stop <= stop) {\n            nonDark.push({ Start: (protein.nonDark[i].Start - start), Stop: (protein.nonDark[i].Stop - start) })\n          } else if (protein.nonDark[i].Start <= stop && protein.nonDark[i].Stop >= stop) {\n            nonDark.push({ Start: (protein.nonDark[i].Start - start), Stop: (stop - start) })\n          }\n        }\n      }\n      return nonDark\n    },\n\n    splitToChunks (array, parts) {\n      var result = []\n      for (let i = parts; i > 0; i--) {\n        result.push(array.splice(0, Math.ceil(array.length / i)))\n      }\n      return result\n    },\n\n    addNonDarkToFragments (protein) {\n      if (protein.fragments) {\n        for (var j = 0; j < protein.fragments.length; j++) {\n          var fragment = protein.fragments[j]\n          protein.fragments[j].nonDark = this.getNonDarkBetween(protein, fragment.Start, fragment.Stop)\n        }\n      }\n    },\n\n    /* eslint-enable */\n\n    drawArrow (svg, protein, width, height, triangleSize, offset, scale) {\n      // var fill = protein.dark ? 'black' : this.green\n      // create a rectangle\n      var fill = this.fillData(protein)\n      var id = protein.id ? protein.id : protein.primary_accession\n      console.log(id)\n      var hoverText = protein.description ? protein.description : protein.name\n\n      // split longer proteins into multiple rectangles to get around chrome issue. No more than 7 explicit start / end definitions\n      // this is necessary for some browers like chrome, which renders large gradients with many explicit divisions incorrectly\n      if (fill.length > 14 && width > 300) {\n        var prevOffset = 0\n        var nonDarkFragments = JSON.parse(JSON.stringify(protein.nonDark))\n        var numChunks = Math.floor(fill.length / 10) > 4 ? Math.floor(fill.length / 10) : 4\n\n        var newFill = this.splitToChunks(nonDarkFragments, numChunks) // can split into more chunks if needed to get around chrome blurring\n        var prevStop = 0\n        for (var i = 0; i < newFill.length; i++) {\n          var len = newFill[i].slice(-1)[0].Stop - prevStop\n          if (i === newFill.length - 1) {\n            len = protein.length - prevStop\n          }\n          var fragmentWidth = this.getResidueSize(scale, len)\n          for (var k = 0; k < newFill[i].length; k++) {\n            newFill[i][k].Start = newFill[i][k].Start - prevStop\n            newFill[i][k].Stop = newFill[i][k].Stop - prevStop\n          }\n\n          var shapeFill = this.fillData({ length: len, nonDark: newFill[i] })\n\n          svg.append('linearGradient')\n            .attr('id', 'grad_partial_' + id + '_' + i)\n            .attr('x1', '0%').attr('y1', '0%')\n            .attr('x2', '100%').attr('y2', '0%')\n            .selectAll('stop')\n            .data(shapeFill)\n            // .data([{\"offset\":\"0%\",\"color\":\"black\"},{\"offset\":\"0%\",\"color\":\"black\"},{\"offset\":\"0%\",\"color\":\"#7A9D5B\"},{\"offset\":\"2%\",\"color\":\"#7A9D5B\"},{\"offset\":\"2%\",\"color\":\"black\"},{\"offset\":\"3%\",\"color\":\"black\"},{\"offset\":\"3%\",\"color\":\"#7A9D5B\"},{\"offset\":\"4%\",\"color\":\"#7A9D5B\"},{\"offset\":\"4%\",\"color\":\"black\"},{\"offset\":\"18%\",\"color\":\"black\"},{\"offset\":\"18%\",\"color\":\"#7A9D5B\"},{\"offset\":\"21%\",\"color\":\"#7A9D5B\"},{\"offset\":\"21%\",\"color\":\"black\"},{\"offset\":\"23%\",\"color\":\"black\"},{\"offset\":\"23%\",\"color\":\"#7A9D5B\"},{\"offset\":\"27%\",\"color\":\"#7A9D5B\"},{\"offset\":\"27%\",\"color\":\"black\"},{\"offset\":\"27%\",\"color\":\"black\"},{\"offset\":\"27%\",\"color\":\"#7A9D5B\"},{\"offset\":\"42%\",\"color\":\"#7A9D5B\"},{\"offset\":\"42%\",\"color\":\"black\"},{\"offset\":\"42%\",\"color\":\"black\"},{\"offset\":\"42%\",\"color\":\"#7A9D5B\"},{\"offset\":\"45%\",\"color\":\"#7A9D5B\"},{\"offset\":\"45%\",\"color\":\"black\"},{\"offset\":\"71%\",\"color\":\"black\"},{\"offset\":\"71%\",\"color\":\"#7A9D5B\"},{\"offset\":\"72%\",\"color\":\"#7A9D5B\"},{\"offset\":\"72%\",\"color\":\"black\"},{\"offset\":\"72%\",\"color\":\"black\"},{\"offset\":\"72%\",\"color\":\"#7A9D5B\"},{\"offset\":\"81%\",\"color\":\"#7A9D5B\"},{\"offset\":\"81%\",\"color\":\"black\"},{\"offset\":\"87%\",\"color\":\"black\"},{\"offset\":\"87%\",\"color\":\"#7A9D5B\"},{\"offset\":\"99%\",\"color\":\"#7A9D5B\"},{\"offset\":\"99%\",\"color\":\"black\"}])\n            .enter().append('stop')\n            .attr('offset', function (d) { return d.offset })\n            .attr('stop-color', function (d) { return d.color })\n            .attr('stop-opacity', 1)\n\n          if (i === newFill.length - 1) {\n            var rectLen = fragmentWidth - triangleSize\n            let p\n            if (rectLen > 0) {\n              p = [this.x, this.y, this.x, this.y + height, this.x + rectLen, this.y + height, this.x + rectLen, this.y + (0.5 * height) + triangleSize, this.x + rectLen + triangleSize, this.y + 0.5 * height, this.x + rectLen, this.y + (0.5 * height) - triangleSize, this.x + rectLen, this.y]\n            } else {\n              p = [this.x, this.y + (0.5 * height) - triangleSize, this.x, this.y + (0.5 * height) + triangleSize, this.x + triangleSize, this.y + (0.5 * height)] // point 1 x coords, y coords. Point 2 x, y. Point 3 x,y.\n            }\n\n            // create an arrow\n            svg.append('svg:polygon')\n              .attr('points', p)\n              // .attr('fill', fill)\n              .attr('fill', 'url(#grad_partial_' + id + '_' + i + ')')\n              .attr('id', id)\n              .attr('title', id)\n              .attr('transform', 'translate(' + (offset + prevOffset) + ',0)')\n              .attr('class', 'arrow')\n              .on('mouseover', function (d, i) {\n                var d3 = require('d3')\n                d3.select(this).attr('opacity', '.85')\n                d3.selectAll('rect#' + this.id).attr('opacity', '.85')\n                this.style.cursor = 'pointer'\n              })\n              .on('mouseout', function (d, i) {\n                var d3 = require('d3')\n                d3.select(this).attr('opacity', '1')\n                d3.selectAll('rect#' + this.id).attr('opacity', '1')\n              })\n              .on('click', function () {\n                var d3 = require('d3')\n                var baseUrl = window.location.origin\n                window.open(baseUrl + '/' + d3.select(this).attr('title'))\n              })\n              .append('svg:title')\n              .text(hoverText)\n          } else {\n            // create an arrow\n            svg.append('svg:rect')\n              .attr('fill', 'url(#grad_partial_' + id + '_' + i + ')')\n              .attr('x', this.x)\n              .attr('y', this.y)\n              .attr('width', fragmentWidth)\n              .attr('height', height)\n              .attr('id', id)\n              .attr('class', 'arrow')\n              .attr('title', id)\n              .attr('transform', 'translate(' + (offset + prevOffset) + ',0)')\n              .on('mouseover', function (d, i) {\n                var d3 = require('d3')\n                d3.select(this).attr('opacity', '.85')\n                d3.selectAll('rect#' + this.id).attr('opacity', '.85')\n                d3.selectAll('polygon#' + this.id).attr('opacity', '.85')\n                this.style.cursor = 'pointer'\n              })\n              .on('mouseout', function (d, i) {\n                var d3 = require('d3')\n                d3.select(this).attr('opacity', '1')\n                d3.selectAll('rect#' + this.id).attr('opacity', '1')\n                d3.selectAll('polygon#' + this.id).attr('opacity', '1')\n              })\n              .on('click', function () {\n                var d3 = require('d3')\n                var baseUrl = window.location.origin\n                window.open(baseUrl + '/' + d3.select(this).attr('title'))\n              })\n              .append('svg:title')\n              .text(hoverText)\n          }\n          prevStop = prevStop + len\n          prevOffset = prevOffset + fragmentWidth\n        }\n      } else {\n        svg.append('linearGradient')\n          .attr('id', 'grad_' + id)\n          .attr('x1', '0%').attr('y1', '0%')\n          .attr('x2', '100%').attr('y2', '0%')\n          .selectAll('stop')\n          .data(fill)\n          // .data([{\"offset\":\"0%\",\"color\":\"black\"},{\"offset\":\"0%\",\"color\":\"black\"},{\"offset\":\"0%\",\"color\":\"#7A9D5B\"},{\"offset\":\"2%\",\"color\":\"#7A9D5B\"},{\"offset\":\"2%\",\"color\":\"black\"},{\"offset\":\"3%\",\"color\":\"black\"},{\"offset\":\"3%\",\"color\":\"#7A9D5B\"},{\"offset\":\"4%\",\"color\":\"#7A9D5B\"},{\"offset\":\"4%\",\"color\":\"black\"},{\"offset\":\"18%\",\"color\":\"black\"},{\"offset\":\"18%\",\"color\":\"#7A9D5B\"},{\"offset\":\"21%\",\"color\":\"#7A9D5B\"},{\"offset\":\"21%\",\"color\":\"black\"},{\"offset\":\"23%\",\"color\":\"black\"},{\"offset\":\"23%\",\"color\":\"#7A9D5B\"},{\"offset\":\"27%\",\"color\":\"#7A9D5B\"},{\"offset\":\"27%\",\"color\":\"black\"},{\"offset\":\"27%\",\"color\":\"black\"},{\"offset\":\"27%\",\"color\":\"#7A9D5B\"},{\"offset\":\"42%\",\"color\":\"#7A9D5B\"},{\"offset\":\"42%\",\"color\":\"black\"},{\"offset\":\"42%\",\"color\":\"black\"},{\"offset\":\"42%\",\"color\":\"#7A9D5B\"},{\"offset\":\"45%\",\"color\":\"#7A9D5B\"},{\"offset\":\"45%\",\"color\":\"black\"},{\"offset\":\"71%\",\"color\":\"black\"},{\"offset\":\"71%\",\"color\":\"#7A9D5B\"},{\"offset\":\"72%\",\"color\":\"#7A9D5B\"},{\"offset\":\"72%\",\"color\":\"black\"},{\"offset\":\"72%\",\"color\":\"black\"},{\"offset\":\"72%\",\"color\":\"#7A9D5B\"},{\"offset\":\"81%\",\"color\":\"#7A9D5B\"},{\"offset\":\"81%\",\"color\":\"black\"},{\"offset\":\"87%\",\"color\":\"black\"},{\"offset\":\"87%\",\"color\":\"#7A9D5B\"},{\"offset\":\"99%\",\"color\":\"#7A9D5B\"},{\"offset\":\"99%\",\"color\":\"black\"}])\n          .enter().append('stop')\n          .attr('offset', function (d) { return d.offset })\n          .attr('stop-color', function (d) { return d.color })\n          .attr('stop-opacity', 1)\n\n        let p\n        if (width > 0) {\n          p = [this.x, this.y, this.x, this.y + height, this.x + width, this.y + height, this.x + width, this.y + (0.5 * height) + triangleSize, this.x + width + triangleSize, this.y + 0.5 * height, this.x + width, this.y + (0.5 * height) - triangleSize, this.x + width, this.y]\n        } else {\n          p = [this.x, this.y + (0.5 * height) - triangleSize, this.x, this.y + (0.5 * height) + triangleSize, this.x + triangleSize, this.y + (0.5 * height)] // point 1 x coords, y coords. Point 2 x, y. Point 3 x,y.\n        }\n\n        // create an arrow\n        svg.append('svg:polygon')\n          .attr('points', p)\n          // .attr('fill', fill)\n          .attr('fill', 'url(#grad_' + id + ')')\n          .attr('id', id)\n          .attr('title', id)\n          .attr('class', 'arrow')\n          .attr('transform', 'translate(' + offset + ',0)')\n          .on('mouseover', function (d, i) {\n            var d3 = require('d3')\n            this.style.cursor = 'pointer'\n            d3.select(this).attr('opacity', '.85')\n            // d3.select('rect#' + this.id).transition().duration('50').attr('opacity', '.85')\n          })\n          .on('mouseout', function (d, i) {\n            var d3 = require('d3')\n            d3.select(this).attr('opacity', '1')\n            // d3.select('rect#' + this.id).transition().duration('50').attr('opacity', '1')\n          })\n          .on('click', function () {\n            var d3 = require('d3')\n            var baseUrl = window.location.origin\n            window.open(baseUrl + '/' + d3.select(this).attr('title'))\n          })\n          .append('svg:title')\n          .text(hoverText)\n      }\n\n      // append protein names to the rectangles\n      var lab = svg.append('text')\n        .attr('x', this.x + 0.5 * (width + 0.5 * triangleSize))\n        .attr('y', this.y + 0.5 * height)\n        .attr('transform', 'translate(' + offset + ',0)')\n        .attr('dy', '.35em')\n        .style('text-anchor', 'middle')\n        .attr('class', 'arrow')\n        .style('fill', 'white')\n        .text(protein.name)\n\n      if (lab.node().getComputedTextLength() > width) {\n        lab.text(protein.synonym[0]) // prefer the first synonym\n        if (lab.node().getComputedTextLength() > width) { // if it's too long\n          var shortest = protein.synonym.reduce((a, b) => a.length <= b.length ? a : b)\n          shortest = shortest.replace('orf', '').replace('ORF', '')\n          lab.text(shortest) // use the shortest name\n          if (lab.node().getComputedTextLength() > width + 0.5 * triangleSize) {\n            // if the shortest name still doesn't fit, display it below the arrow in green\n            lab.attr('y', this.y + height * 1.5)\n            lab.style('fill', this.green)\n            lab.attr('class', 'rowContent')\n          }\n        }\n      }\n    },\n\n    drawRuler (svg, protein, continuous, width, triangleSize, offset) {\n      // Draw the axis\n      var range = [1, width + triangleSize - 1]\n      if (continuous) range = [0, width + triangleSize]\n      var xScale = this.d3.scale.linear()\n        .domain([continuous, continuous + protein.length]) // This is what is written on the Axis: from 0 to length of residue\n        .range(range) // This is where the axis is placed: from start to end of triangle. Add a tiny bit of spacing between the two\n\n      var ticks = Math.floor(protein.length / 500 + 1) // a tick every 500 residues\n      if (ticks > 3 || protein.placeholderLarge) { // if longer than 1500 residues\n        if (protein.placeholderLarge) ticks = 0\n        var axis = svg\n          .append('g')\n          .attr('transform', 'translate(' + offset + ',' + (this.y - 15) + ')') // This controls the vertical position of the Axis\n          .attr('style', '')\n          .style('fill', 'gray')\n          .style('font-size', '10px')\n          .attr('class', 'rowContent')\n          .call(this.d3.svg.axis().scale(xScale).tickSize(0, 1).tickFormat((interval, i) => { return (interval === 0 || interval % 1000 !== 0) ? ' ' : interval }).orient('bottom').ticks(ticks)) // render only thousand ticks\n          // .call(g => g.selectAll('text')\n          //   .attr('y', 4)\n          //   .attr('dx', -4)) // shifts text to the left.\n        if (protein.placeholder) {\n          axis.style('fill', '#CCCCCC')\n        }\n\n        axis.selectAll('.tick')\n          .attr('stroke', 'gray')\n          .attr('x1', this.x)\n          .attr('x2', this.x)\n          .attr('y2', 0)\n          .attr('y1', 3)\n          .attr('stroke-width', '1')\n      } else if (protein.length > 200 || protein.placeholder) {\n        ticks = 2\n        if (protein.placeholder) ticks = 0\n        var smallAxis = svg.append('g')\n          .attr('transform', 'translate(' + offset + ',' + (this.y - 10) + ')')\n          .style('fill', 'gray')\n          .attr('class', 'rowContent')\n          .call(this.d3.svg.axis().scale(this.d3.scale.linear().domain([0, 1]).range([1, width + triangleSize - 1])).tickSize(2, 1).orient('top').ticks(ticks).tickFormat(''))\n\n        smallAxis.selectAll('.tick')\n          .attr('stroke', 'gray')\n          .attr('x1', this.x)\n          .attr('y1', 4) // height of the ticks\n          .attr('y2', -1) // displacement from the line\n          .attr('stroke-width', '1')\n\n        if (protein.placeholder) {\n          smallAxis.style('fill', '#CCCCCC')\n        }\n\n        var axisLabel = svg.append('text')\n          .attr('x', this.x + 0.5 * (width + triangleSize))\n          .attr('y', this.y - 10)\n          .attr('dy', '.35em')\n          .style('text-anchor', 'middle')\n          .attr('transform', 'translate(' + offset + ',0)')\n          .style('fill', 'gray')\n          .style('font-size', '10px')\n          .attr('class', 'rowContent')\n          .text(protein.length)\n\n        svg.append('rect', 'text') // draw a white rectangle\n          .datum(function () { return axisLabel.node().getBBox() })\n          .attr('x', function (d) { return d.x - 2 })\n          .attr('y', function (d) { return d.y })\n          .style('fill', this.backgroundColour)\n          .attr('transform', 'translate(' + offset + ',0)')\n          .attr('class', 'rowContent')\n          .attr('width', function (d) { return d.width + 2 * 2 })\n          .attr('height', function (d) { return d.height })\n\n        axisLabel.node().parentNode.appendChild(axisLabel.node()) // put label above rectangle\n      }\n    },\n\n    drawFragments (svg, fragments, scale, offset) {\n      for (var i = 0; i < fragments.length; i++) {\n        console.log(fragments)\n        var protein = {\n          name: fragments[i].Name,\n          primary_accession: fragments[i].Primary_Accession,\n          synonym: [fragments[i].Short_Name].concat(fragments[i].Short_Name.match(/[0-9]+/g)),\n          Start: fragments[i].Start,\n          Stop: fragments[i].Stop,\n          pdb: null,\n          length: (fragments[i].Stop - fragments[i].Start),\n          id: fragments[i].Primary_Accession + '_' + fragments[i].Short_Name,\n          nonDark: fragments[i].nonDark,\n          description: fragments[i].Description\n        }\n        var len = fragments[i].Stop - fragments[i].Start\n        var height = 20 // the height of the rectangles, and the length of the triangle that is appended. Triangle width is 2*height\n        var triangleSize = height / 1.5\n        var width = this.getResidueSize(scale, len) - triangleSize // length of the residues, minus the width of the appended triangle\n        if (width < 0) {\n          triangleSize = this.getResidueSize(scale, len) // scale down the triangle\n          width = 0\n        }\n        if (i === 0) {\n          this.drawArrow(svg, protein, width, height, triangleSize, offset, scale)\n          offset = offset + width + triangleSize\n        // if the start of the fragment is after the end of the previous fragment (not occupying the same space)\n        } else if (fragments[i].Start >= fragments[i - 1].Stop) {\n          this.drawArrow(svg, protein, width, height, triangleSize, offset, scale) // draw the fragment\n          offset = offset + width + triangleSize\n        }\n      }\n    },\n\n    renderImage (svg, protein, width, height, offset, imgYOffset, link) {\n      // Add the image of the protein if one exists\n      // TODO: trim images and crop them down.\n      // Add a rectangle? pass in the pdb id and link?\n      var imgSize = (width < 120 ? width : 120) + 10\n      var xOffset = protein.Start ? protein.Start : 0\n\n      if (link) {\n        svg.append('rect', 'text') // draw a white rectangle\n          .attr('x', width * 0.5 + xOffset) // for the nsp matching structures, add the starting distance of the fragment\n          .attr('y', this.y + height)\n          .style('fill', this.backgroundColour)\n          .attr('transform', 'translate(' + (offset - imgSize / 2) + ',' + (20 + imgYOffset) + ')')\n          .attr('width', imgSize)\n          .attr('height', 200)\n          .attr('title', link)\n          .on('mouseover', function (d, i) {\n            var d3 = require('d3')\n            d3.select(this).transition().duration(500).style('fill', 'orange')\n            this.style.cursor = 'pointer'\n          })\n          .on('mouseout', function (d, i) {\n            var d3 = require('d3')\n            d3.select(this).transition().duration(500).style('fill', 'white')\n          })\n          .on('click', function () {\n            var d3 = require('d3')\n            var l = d3.select(this).attr('title')\n            if (l) {\n              var baseUrl = window.location.origin\n              window.open(baseUrl + '/' + d3.select(this).attr('title'))\n            }\n          })\n\n        var img = svg.append('svg:image') // add the image of the protein\n          .attr('x', width * 0.5 + xOffset) // for the nsp matching structures, add the starting distance of the fragment\n          .attr('y', this.y + height)\n          .attr('transform', 'translate(' + (offset - imgSize / 2) + ',' + (20 + imgYOffset) + ')') // - half its width to have image anchor center\n          .attr('width', imgSize)\n          .attr('height', imgSize)\n          .on('error', function () {\n            var d3 = require('d3') // if a saved image doesnt exist, get one from server\n            d3.select(this).attr('xlink:href', 'https://aquaria.ws:8080/image/' + protein.primary_accession + '/' + protein.pdb + '?color=0x000000&alpha=0')\n          })\n          .style('pointer-events', 'none')\n\n        if (!protein.dark && protein.pdb) {\n          img.attr('xlink:href', '../images/pdb/' + protein.pdb + '.png')\n        } else {\n          img.attr('xlink:href', '../images/covid19/unknown-structure_1000.png')\n          img.style('visibility', 'hidden')\n        }\n      }\n    },\n\n    // add url to the structures, and merge the overlapping structures into the top ranked structure if overlaps by more than 80%? 70%?\n\n    drawMatchingStructures (svg, protein, width, height, triangleSize, offset, s) {\n      var imgYOffset = 30\n      // draw the bottom matching structures axis\n      if (protein.clusters) {\n        protein.clusters = protein.clusters.filter(c => c.seq_start[0] >= 0) // for split proteins, take only the sections that start after 0\n\n        // sort by length of matched structure, largest first\n        protein.clusters.sort((a, b) => (a.cluster_size > b.cluster_size) ? -1 : ((b.cluster_size > a.cluster_size) ? 1 : 0))\n\n        var i = 1\n        // for each protein j, check all later proteins i and merge any compatible ones.\n        while (i < protein.clusters.length) {\n          var j = 0\n\n          var spliced = false\n\n          // if i not merged into j\n          while (j < i && !spliced) {\n            // get the start and end of both sequences\n            var start1 = Math.min(...protein.clusters[j].seq_start)\n            var start2 = Math.min(...protein.clusters[i].seq_start)\n            var end1 = Math.max(...protein.clusters[j].seq_end)\n            var end2 = Math.max(...protein.clusters[i].seq_end)\n            // if i is within j, merge i into j\n            if (start1 <= start2 && end1 >= end2) {\n              protein.clusters[j].cluster_size += protein.clusters[i].cluster_size\n              protein.clusters.splice(i, 1)\n              spliced = true\n            // otherwise merge i into j if there is an 80% overlap\n            } else if ((start1 > start2 && start1 - start2 < 0.8 * (end2 - start2)) ||\n                      (end1 < end2 && end2 - end1 < 0.8 * (end2 - start2))) { // (Math.abs(start1 - start2) + Math.abs(end1 - end2) < 0.8 * (end1 - start1)) {\n              protein.clusters[j].cluster_size += protein.clusters[i].cluster_size\n              // modify the start and end locations of the new structure\n              protein.clusters[j].seq_start = [Math.min(start1, start2)]\n              protein.clusters[j].seq_end = [Math.max(end1, end2)]\n              protein.clusters.splice(i, 1)\n              spliced = true\n            }\n            j++\n          }\n\n          if (!spliced) {\n            i++\n          }\n        }\n\n        // TODO CURRENTLY JUST REMOVES ALL REMAINING < 20 RESIDUES in length\n        protein.clusters = protein.clusters.filter(c => Math.max(...c.seq_end) - Math.min(...c.seq_start) > 20)\n\n        protein.clusters.forEach(cluster => {\n          var start = this.getResidueSize(s, cluster.seq_start[0])\n          if (cluster.seq_start < 0) {\n            return\n          }\n          var end = this.getResidueSize(s, cluster.seq_end[cluster.seq_end.length - 1])\n          if (cluster.seq_end > protein.length) {\n            return\n          }\n\n          var matchingScale = this.d3.scale.linear()\n            .domain([0, 2]) // This is what is written on the Axis: from 0 to length of residue\n            // .range([2, width + triangleSize - 2]) // This is where the axis is placed: from start to end of triangle. Add a tiny bit of spacing between the two\n            .range([start + 1, end - 1]) // leave a small gap\n            .nice()\n\n          var matchingAxis = svg\n            .append('g')\n            .attr('transform', 'translate(' + offset + ',' + (this.y + height + 10) + ')') // This controls the vertical position of the Axis\n            .attr('style', '')\n            .style('fill', this.green)\n            .style('font-size', '10px')\n            .call(this.d3.svg.axis().scale(matchingScale).tickSize(0, 1).tickFormat('').orient('bottom').ticks(2)) // render only two ticks\n\n          // Create a long down tick in the centre of the bottom axis\n          this.d3.select(matchingAxis.selectAll('.tick')[0][1])\n            .attr('stroke', this.green)\n            .attr('x1', this.x)\n            .attr('x2', this.x)\n            .attr('y2', 0)\n            .attr('y1', imgYOffset)\n            .attr('stroke-width', '1')\n\n          var matchingLabel = svg.append('text') // set this as var la\n            .datum(function () { return matchingAxis.node().getBBox() })\n            // .attr('x', this.x + 0.5 * (width + triangleSize))\n            .attr('x', function (d) { return d.x + 0.5 * d.width })\n            .attr('y', this.y + height + imgYOffset + 5) // the axis offset from matchingAxis\n            .attr('dy', '.35em')\n            .style('text-anchor', 'middle')\n            .attr('transform', 'translate(' + offset + ',0)')\n            .style('fill', 'white')\n            .style('font-size', '12px')\n            .text(cluster.cluster_size)\n            .attr('title', protein.primary_accession + '/' + cluster.pdb_id)\n            .style('pointer-events', 'none')\n\n          svg.append('rect', 'text') // draw a green round rectangle\n            .datum(function () { return matchingLabel.node().getBBox() })\n            .attr('x', function (d) { return d.x - 4 })\n            .attr('y', function (d) { return d.y })\n            .attr('rx', 6)\n            .attr('ry', 10)\n            .style('fill', this.green)\n            .attr('transform', 'translate(' + offset + ',0)')\n            .attr('width', function (d) { return d.width + 4 * 2 })\n            .attr('height', function (d) { return d.height })\n            .attr('title', protein.primary_accession + '/' + cluster.pdb_id)\n            .on('click', function () {\n              var d3 = require('d3')\n              console.log(d3.select(this).attr('title'))\n              var baseUrl = window.location.origin\n              window.open(baseUrl + '/' + d3.select(this).attr('title'))\n            })\n            .on('mouseover', function () {\n              this.style.cursor = 'pointer'\n            })\n\n          matchingLabel.node().parentNode.appendChild(matchingLabel.node()) // put label above rectangle\n\n          var imageObj = {\n            name: cluster.pdb_id,\n            primary_accession: protein.primary_accession,\n            Start: start,\n            Stop: end,\n            pdb: cluster.pdb_id,\n            length: (end - start),\n            id: protein.primary_accession + '_' + cluster.pdb_id,\n            nonDark: true\n          }\n          // TODO: white rectangle behind render image?\n          this.renderImage(svg, imageObj, (end - start), height, offset, imgYOffset, protein.primary_accession + '/' + cluster.pdb_id)\n        })\n      } else {\n        this.renderImage(svg, protein, width, height, offset, imgYOffset, '')\n      }\n    },\n\n    drawExpandButton (svg) {\n      // Create the expand and collapse button\n      var expandButton = svg.append('svg:rect')\n        .attr('x', 0)\n        .attr('y', 0)\n        .attr('stroke', '#CCCCCC')\n        .attr('fill', '#CCCCCC')\n        .attr('opacity', 0.80)\n        .attr('width', window.innerWidth)\n        .attr('height', 30)\n        .attr('id', 'expand')\n\n      if (window.innerHeight > window.innerWidth) {\n        expandButton.attr('display', 'none')\n      }\n\n      expandButton.on('mouseover', function (d, i) {\n        var d3 = require('d3')\n        d3.select(this.parentNode).select('path#expand:last-child').attr('stroke', 'orange')\n        this.style.cursor = 'pointer'\n      })\n        .on('mouseout', function (d, i) {\n          var d3 = require('d3')\n          d3.select(this.parentNode).select('path#expand:last-child').attr('stroke', '#CCCCCC')\n        })\n\n      expandButton.on('click', function (d, i) {\n        var d3 = require('d3')\n\n        if (this.parentNode.className.baseVal.split(' ').indexOf('open') > -1) { // if current row is open\n          d3.select(this.parentNode).classed('open', false)\n          d3.selectAll('.row').transition().duration(1000).attr('viewBox', '0 0 960 35')\n          d3.selectAll('.rowContent').transition().duration(1000).attr('opacity', 0)\n        } else {\n          d3.selectAll('.open').selectAll('rect#expand').attr('opacity', 0)\n          d3.selectAll('.open').selectAll('rect#expand').attr('display', 'block')\n          d3.selectAll('.open').selectAll('rect#expand').transition().duration(1000).attr('opacity', 0.8)\n\n          d3.selectAll('.open').selectAll('path#expand').attr('opacity', 0)\n          d3.selectAll('.open').selectAll('path#expand').attr('display', 'block')\n          d3.selectAll('.open').selectAll('path#expand').transition().duration(1000).attr('opacity', 1)\n\n          d3.selectAll('.arrow').transition().duration(1000).attr('transform', function () {\n            var transform = d3.transform(d3.select(this).attr('transform'))\n            return 'translate(' + transform.translate[0] + ', -10)'\n          })\n\n          d3.selectAll('.row').classed('open', false)\n          d3.selectAll('.row').transition().duration(1000).attr('viewBox', '0 0 960 35')\n          d3.selectAll('.rowContent').transition().duration(1000).attr('opacity', 0)\n\n          d3.select(this.parentNode).classed('open', true)\n          d3.select(this).attr('display', 'none')\n          // d3.selectAll('.open').transition().duration(1000).attr('viewBox', '0 0 960 ' + viewboxHeight)\n          d3.select(this.parentNode).selectAll('path#expand').attr('display', 'none')\n          d3.selectAll('.open').transition().duration(1000).attr('viewBox', '0 0 960 360')\n          d3.selectAll('.open .rowContent').transition().duration(1000).attr('opacity', 1)\n\n          d3.select(this.parentNode).selectAll('.arrow').transition().duration(1000).attr('transform', function () {\n            var transform = d3.transform(d3.select(this).attr('transform'))\n            return 'translate(' + transform.translate[0] + ', 0)'\n          })\n\n          // change the direction of the semi-circle arrows\n          var rows = d3.selectAll('.row')\n          var foundOpen = false\n          var topOpen = true\n          for (var j = 0; j < rows[0].length; j++) {\n            if (d3.select(rows[0][j]).classed('open')) {\n              foundOpen = true\n            }\n            if (!foundOpen) {\n              topOpen = false\n              // document.getElementById('container').style.padding = '8px 0px 0px 0px'\n              d3.select('#container').transition().duration(1000).style('padding', '8px 0px 0px 0px')\n              d3.select(rows[0][j]).select('path#expand').attr('transform', 'translate(' + 480 + ',' + 30 + ')')\n              d3.select(rows[0][j]).select('path#expand:last-child').attr('transform', 'scale(1, -1) translate(' + 480 + ', -' + 30 + ')')\n            } else {\n              d3.select(rows[0][j]).select('path#expand').attr('transform', 'scale(1, -1) translate(' + 480 + ', -' + 0 + ')')\n              d3.select(rows[0][j]).select('path#expand:last-child').attr('transform', 'translate(' + 480 + ',' + 0 + ')')\n            }\n          }\n          if (topOpen) {\n            // document.getElementById('container').style.padding = '0px 0px 0px 0px'\n            d3.select('#container').transition().duration(1000).style('padding', '0px 0px 0px 0px')\n          }\n        }\n      })\n\n      this.renderHalfMoon(svg, 480, 0)\n    },\n\n    renderHalfMoon (svg, x, y) {\n      var arcGenerator = this.d3.svg.arc()\n        .outerRadius(20)\n        .innerRadius(0)\n        .startAngle(-Math.PI / 2)\n        .endAngle(Math.PI / 2)\n\n      var semicircle = svg.append('path')\n        .attr('transform', 'scale(1, -1) translate(' + x + ', -' + y + ')')\n        .attr('d', arcGenerator())\n        .attr('fill', 'gray')\n        .attr('id', 'expand')\n        .on('mouseover', function (d, i) {\n          var d3 = require('d3')\n          d3.select(this.parentNode).select('path#expand:last-child').attr('stroke', 'orange')\n          this.style.cursor = 'pointer'\n        })\n        .on('mouseout', function (d, i) {\n          var d3 = require('d3')\n          d3.select(this.parentNode).select('path#expand:last-child').attr('stroke', '#CCCCCC')\n        })\n\n      var arrow = svg.append('path')\n        .attr('transform', 'translate(' + x + ',' + y + ')')\n        .attr('d', 'M-8 12 0 5 8 12')\n        .attr('stroke', '#CCCCCC')\n        .attr('stroke-width', 3)\n        .attr('fill', 'transparent')\n        .attr('id', 'expand')\n        .on('mouseover', function (d, i) {\n          var d3 = require('d3')\n          d3.select(this).attr('stroke', 'orange')\n          this.style.cursor = 'pointer'\n        })\n        .on('mouseout', function (d, i) {\n          var d3 = require('d3')\n          d3.select(this).attr('stroke', '#CCCCCC')\n        })\n\n      arrow.on('click', function (d, i) {\n        var d3 = require('d3')\n\n        d3.selectAll('.open').selectAll('rect#expand').attr('opacity', 0)\n        d3.selectAll('.open').selectAll('rect#expand').attr('display', 'block')\n        d3.selectAll('.open').selectAll('rect#expand').transition().duration(1000).attr('opacity', 0.8)\n\n        d3.selectAll('.open').selectAll('path#expand').attr('opacity', 0)\n        d3.selectAll('.open').selectAll('path#expand').attr('display', 'block')\n        d3.selectAll('.open').selectAll('path#expand').transition().duration(1000).attr('opacity', 1)\n\n        d3.selectAll('.row').classed('open', false)\n        d3.selectAll('.row').transition().duration(1000).attr('viewBox', '0 0 960 35')\n        d3.selectAll('.rowContent').transition().duration(1000).attr('opacity', 0)\n\n        d3.selectAll('.arrow').transition().duration(1000).attr('transform', function () {\n          var transform = d3.transform(d3.select(this).attr('transform'))\n          return 'translate(' + transform.translate[0] + ', -10)'\n        })\n\n        d3.selectAll('.row').classed('open', false)\n        d3.selectAll('.row').transition().duration(1000).attr('viewBox', '0 0 960 35')\n        d3.selectAll('.rowContent').transition().duration(1000).attr('opacity', 0)\n\n        d3.select(this.parentNode).classed('open', true)\n        d3.select(this.parentNode).selectAll('rect#expand').attr('display', 'none')\n        d3.select(this.parentNode).selectAll('path#expand').attr('display', 'none')\n        d3.selectAll('.open').transition().duration(1000).attr('viewBox', '0 0 960 360')\n        d3.selectAll('.open .rowContent').transition().duration(1000).attr('opacity', 1)\n\n        d3.select(this.parentNode).selectAll('.arrow').transition().duration(1000).attr('transform', function () {\n          var transform = d3.transform(d3.select(this).attr('transform'))\n          return 'translate(' + transform.translate[0] + ', 0)'\n        })\n\n        // change the direction of the semi-circle arrows\n        var rows = d3.selectAll('.row')\n        var foundOpen = false\n        var topOpen = true\n        for (var j = 0; j < rows[0].length; j++) {\n          if (d3.select(rows[0][j]).classed('open')) {\n            foundOpen = true\n          }\n          if (!foundOpen) {\n            topOpen = false\n            d3.select('#container').transition().duration(1000).style('padding', '8px 0px 0px 0px')\n            d3.select(rows[0][j]).select('path#expand').attr('transform', 'translate(' + 480 + ',' + 30 + ')')\n            d3.select(rows[0][j]).select('path#expand:last-child').attr('transform', 'scale(1, -1) translate(' + 480 + ', -' + 30 + ')')\n          } else {\n            d3.select('#container').transition().duration(1000).style('padding', '0px 0px 0px 0px')\n            d3.select(rows[0][j]).select('path#expand').attr('transform', 'scale(1, -1) translate(' + 480 + ', -' + 0 + ')')\n            d3.select(rows[0][j]).select('path#expand:last-child').attr('transform', 'translate(' + 480 + ',' + 0 + ')')\n          }\n        }\n        if (topOpen) {\n          d3.select('#container').transition().duration(1000).style('padding', '0px 0px 0px 0px')\n        }\n      })\n\n      semicircle.on('click', function (d, i) {\n        var d3 = require('d3')\n\n        d3.selectAll('.open').selectAll('rect#expand').attr('opacity', 0)\n        d3.selectAll('.open').selectAll('rect#expand').attr('display', 'block')\n        d3.selectAll('.open').selectAll('rect#expand').transition().duration(1000).attr('opacity', 0.8)\n\n        d3.selectAll('.open').selectAll('path#expand').attr('opacity', 0)\n        d3.selectAll('.open').selectAll('path#expand').attr('display', 'block')\n        d3.selectAll('.open').selectAll('path#expand').transition().duration(1000).attr('opacity', 1)\n\n        d3.selectAll('.arrow').transition().duration(1000).attr('transform', function () {\n          var transform = d3.transform(d3.select(this).attr('transform'))\n          return 'translate(' + transform.translate[0] + ', -10)'\n        })\n\n        d3.selectAll('.row').classed('open', false)\n        d3.selectAll('.row').transition().duration(1000).attr('viewBox', '0 0 960 35')\n        d3.selectAll('.rowContent').transition().duration(1000).attr('opacity', 0)\n\n        d3.select(this.parentNode).classed('open', true)\n        d3.select(this.parentNode).selectAll('rect#expand').attr('display', 'none')\n        d3.select(this.parentNode).selectAll('path#expand').attr('display', 'none')\n        d3.selectAll('.open').transition().duration(1000).attr('viewBox', '0 0 960 360')\n        d3.selectAll('.open .rowContent').transition().duration(1000).attr('opacity', 1)\n\n        d3.select(this.parentNode).selectAll('.arrow').transition().duration(1000).attr('transform', function () {\n          var transform = d3.transform(d3.select(this).attr('transform'))\n          return 'translate(' + transform.translate[0] + ', 0)'\n        })\n\n        // change the direction of the semi-circle arrows\n        var rows = d3.selectAll('.row')\n        var foundOpen = false\n        var topOpen = true\n        for (var j = 0; j < rows[0].length; j++) {\n          if (d3.select(rows[0][j]).classed('open')) {\n            foundOpen = true\n          }\n          if (!foundOpen) {\n            topOpen = false\n            d3.select('#container').transition().duration(1000).style('padding', '8px 0px 0px 0px')\n            d3.select(rows[0][j]).select('path#expand').attr('transform', 'translate(' + 480 + ',' + 30 + ')')\n            d3.select(rows[0][j]).select('path#expand:last-child').attr('transform', 'scale(1, -1) translate(' + 480 + ', -' + 30 + ')')\n          } else {\n            d3.select(rows[0][j]).select('path#expand').attr('transform', 'scale(1, -1) translate(' + 480 + ', -' + 0 + ')')\n            d3.select(rows[0][j]).select('path#expand:last-child').attr('transform', 'translate(' + 480 + ',' + 0 + ')')\n          }\n        }\n        if (topOpen) {\n          d3.select('#container').transition().duration(1000).style('padding', '0px 0px 0px 0px')\n        }\n      })\n    },\n\n    initialDisplay (isResize) { // Change the display if the window is resized\n      if (window.innerHeight > window.innerWidth) { // expand everything\n        this.d3.selectAll('rect#expand').attr('display', 'none')\n        this.d3.selectAll('path#expand').attr('display', 'none')\n        this.d3.selectAll('.row').classed('open', true)\n        this.d3.selectAll('.open').transition().duration(1000).attr('viewBox', '0 0 960 360')\n        this.d3.selectAll('.open .rowContent').transition().duration(1000).attr('opacity', 1)\n        this.d3.selectAll('.arrow').transition().duration(1000).attr('transform', function () {\n          var d3 = require('d3')\n          var transform = d3.transform(d3.select(this).attr('transform'))\n          return 'translate(' + transform.translate[0] + ', 0)'\n        })\n      } else if (window.innerHeight < 0.25 * window.innerWidth) { // collapse everything\n        this.d3.selectAll('rect#expand').attr('display', 'block')\n        this.d3.selectAll('path#expand').attr('display', 'block')\n        this.d3.selectAll('.row').classed('open', false)\n        this.d3.selectAll('.row').transition().duration(500).attr('viewBox', '0 0 960 35')\n        this.d3.selectAll('.rowContent').transition().duration(500).attr('opacity', 0)\n        this.d3.selectAll('.arrow').transition().duration(1000).attr('transform', function () {\n          var d3 = require('d3')\n          var transform = d3.transform(d3.select(this).attr('transform'))\n          return 'translate(' + transform.translate[0] + ', -10)'\n        })\n      } else {\n        var opened = this.d3.select('.open')\n        this.d3.selectAll('rect#expand').attr('display', 'block')\n        this.d3.selectAll('path#expand').attr('display', 'block')\n        this.d3.selectAll('.row').classed('open', false)\n        this.d3.selectAll('.row').transition().duration(500).attr('viewBox', '0 0 960 35')\n        this.d3.selectAll('.rowContent').transition().duration(500).attr('opacity', 0)\n\n        if (!isResize) {\n          opened = this.d3.select('.row').classed('open', true)\n          this.d3.select('rect#expand').attr('display', 'none')\n          opened.selectAll('path#expand').attr('display', 'none')\n          this.d3.selectAll('.open').transition().duration(500).attr('viewBox', '0 0 960 360')\n          this.d3.selectAll('.open .rowContent').transition().duration(500).attr('opacity', 1)\n          this.d3.selectAll('.arrow').transition().duration(1000).attr('transform', function () {\n            var d3 = require('d3')\n            var transform = d3.transform(d3.select(this).attr('transform'))\n            return 'translate(' + transform.translate[0] + ', -10)'\n          })\n          opened.selectAll('.arrow').transition().duration(1000).attr('transform', function () {\n            var d3 = require('d3')\n            var transform = d3.transform(d3.select(this).attr('transform'))\n            return 'translate(' + transform.translate[0] + ', 0)'\n          })\n        } else {\n          opened.classed('open', true)\n          opened.select('rect#expand').attr('display', 'none')\n          opened.selectAll('path#expand').attr('display', 'none')\n          opened.transition().duration(1000).attr('viewBox', '0 0 960 360')\n          this.d3.selectAll('.open .rowContent').transition().duration(500).attr('opacity', 1)\n          this.d3.selectAll('.arrow').transition().duration(1000).attr('transform', function () {\n            var d3 = require('d3')\n            var transform = d3.transform(d3.select(this).attr('transform'))\n            return 'translate(' + transform.translate[0] + ', -10)'\n          })\n          opened.selectAll('.arrow').transition().duration(1000).attr('transform', function () {\n            var d3 = require('d3')\n            var transform = d3.transform(d3.select(this).attr('transform'))\n            return 'translate(' + transform.translate[0] + ', 0)'\n          })\n\n          // change the direction of the semi-circle arrows\n          var rows = this.d3.selectAll('.row')\n          var foundOpen = false\n          var topOpen = true\n          for (var j = 0; j < rows[0].length; j++) {\n            if (this.d3.select(rows[0][j]).classed('open')) {\n              foundOpen = true\n            }\n            if (!foundOpen) {\n              topOpen = false\n              this.d3.select('#container').transition().duration(1000).style('padding', '8px 0px 0px 0px')\n              this.d3.select(rows[0][j]).select('path#expand').attr('transform', 'translate(' + 480 + ',' + 30 + ')')\n              this.d3.select(rows[0][j]).select('path#expand:last-child').attr('transform', 'scale(1, -1) translate(' + 480 + ', -' + 30 + ')')\n            } else {\n              this.d3.select(rows[0][j]).select('path#expand').attr('transform', 'scale(1, -1) translate(' + 480 + ', -' + 0 + ')')\n              this.d3.select(rows[0][j]).select('path#expand:last-child').attr('transform', 'translate(' + 480 + ',' + 0 + ')')\n            }\n          }\n          if (topOpen) {\n            this.d3.select('#container').transition().duration(1000).style('padding', '0px 0px 0px 0px')\n          }\n        }\n      }\n    },\n\n    // algorithm to split the proteins list into three lists as close to equal as possible.\n    // It adds a new number to the list that is 1/3 the sum of all the numbers\n    // then it splits the new list into two roughly equal parts using parititionToTwo\n    // Remove the placeholder number from the part that contains it, and then split the other part into two with parititionToTwo\n    partitionToThree (list) {\n      var totalSum = this.getListSum(list)\n      var newNum = totalSum / 3\n      list.push({ name: 'newPlaceholderNum', length: newNum })\n      var twoPart = this.partitionToTwo(list)\n      twoPart[1].pop()\n\n      var threePart = this.partitionToTwo(twoPart[0])\n      return [threePart[0], threePart[1], twoPart[1]]\n    },\n\n    // This algorithm runs into weirdness if the last element is very large, as it would only contain placeholder num\n    // can get around it by just skipping any empty lists in loadShape or forcing each list to contain at least 1 element that isnt placeholder num\n    partitionToTwo (list) {\n      var totalSum = this.getListSum(list)\n      var index = list.length - 1\n      while (this.getListSum(list.slice(index)) < (totalSum / 2)) {\n        if (this.getListSum(list.slice(index - 1)) >= (totalSum / 2)) {\n          break\n        }\n        index--\n      }\n      return [list.slice(0, index), list.slice(index)]\n    },\n\n    getListSum (list) { // takes in data, and returns the sum of all elements .length\n      return list.reduce(function (prev, cur) { return prev + cur.length }, 0)\n    },\n\n    // Takes in an ID of the organism, and all the structures. Sorts all the structures by genomic position and returns it as a list\n    async sortStructures (organismId, allStructures) {\n      var pos = await this.getPositions(organismId)\n      for (let index = 0; index < allStructures.length; index++) {\n        allStructures[index].position = pos[allStructures[index].primary_accession]\n      }\n      allStructures.sort(function (first, second) {\n        return first.position - second.position\n      })\n      return allStructures\n    },\n\n    // checks if any proteins overlap in genomic position, and cuts them when necessary\n    async cleanProteins (proteins) {\n      var positionArrays = {}\n      proteins.forEach(function (protein) {\n        // Get the array for this position, if any\n        var positionArray = positionArrays[protein.position]\n        if (!positionArray) {\n          // There wasn't one, create it\n          positionArray = positionArrays[protein.position] = []\n        }\n        // Add this entry\n        positionArray.push(protein)\n      })\n\n      var proteinsCleaned = []\n      for (let i = 1; i <= Object.keys(positionArrays).length; i++) {\n        if (positionArrays[i].length !== 1) { // if there are multiple proteins at the same position\n          let longest\n          positionArrays[i].forEach(function (p) {\n            if (!longest) {\n              longest = p\n            } else if (p.length > longest.length) {\n              longest = p\n            }\n          })\n\n          var cur = longest\n          for (let n = 0; n < positionArrays[i].length; n++) {\n            if (positionArrays[i][n].sequence !== longest.sequence) {\n              // find longest common substring and delete it from cur\n              var substring = this.findSubstring(positionArrays[i][n].sequence, longest.sequence)\n              cur.sequence = cur.sequence.replace(substring, '')\n              cur.length = cur.sequence.length\n              cur.name = cur.name + ' (split)'\n              positionArrays[i][n].continuous = true\n              proteinsCleaned.push(positionArrays[i][n])\n\n              // if the protein has fragments, remove duplicate fragments from the longest protein\n              if (cur.fragments.length > 0) {\n                positionArrays[i][n].fragments.forEach(fragment => {\n                  cur.fragments = cur.fragments.filter(function (e) { return e.Name !== fragment.Name })\n                })\n              }\n\n              // change the starts and stops to be relative to the split protein\n              for (var k = 0; k < cur.fragments.length; k++) {\n                cur.fragments[k].Start = cur.fragments[k].Start - positionArrays[i][n].length\n                cur.fragments[k].Stop = cur.fragments[k].Stop - positionArrays[i][n].length\n                if (cur.fragments[k].Start < 0) {\n                  cur.fragments[k].Start = 0\n                }\n              }\n              cur.fragments = cur.fragments.filter(function (e) { return e.Start >= 0 })\n\n              // clean the non-dark regions data\n              var newNonDark = []\n              for (var j = 0; j < cur.nonDark.length; j++) {\n                if (cur.nonDark[j].Stop > positionArrays[i][n].length) {\n                  var start = cur.nonDark[j].Start - positionArrays[i][n].length\n                  if (start < 0) {\n                    start = 0\n                  }\n                  var stop = cur.nonDark[j].Stop - positionArrays[i][n].length\n                  newNonDark.push({ Primary_Accession: cur.primary_accession, Start: start, Stop: stop })\n                }\n              }\n\n              // clean the matching structure clusters data\n              if (cur.clusters) {\n                for (var cluster = 0; cluster < cur.clusters.length; cluster++) {\n                  for (var indexStart = 0; indexStart < cur.clusters[cluster].seq_start.length; indexStart++) {\n                    cur.clusters[cluster].seq_start[indexStart] = cur.clusters[cluster].seq_start[indexStart] - positionArrays[i][n].length\n                  }\n                  for (var indexEnd = 0; indexEnd < cur.clusters[cluster].seq_end.length; indexEnd++) {\n                    cur.clusters[cluster].seq_end[indexEnd] = cur.clusters[cluster].seq_end[indexEnd] - positionArrays[i][n].length\n                  }\n                }\n              }\n\n              cur.nonDark = newNonDark\n            }\n          }\n\n          cur.continuous = false\n          proteinsCleaned.push(cur) // append the modified longest protein to the protein list\n        } else {\n          positionArrays[i][0].continuous = false\n          proteinsCleaned.push(positionArrays[i][0])\n        }\n      }\n      return proteinsCleaned\n    },\n\n    findSubstring (a1, a2) {\n      var L = a1.length\n      var i = 0\n      while (i < L && a1.charAt(i) === a2.charAt(i)) i++\n      return a1.substring(0, i)\n    },\n\n    // get the genomic position of a particular protein using primary accession\n    async getPositions (id) {\n      var posUrl = `${window.BACKEND}/getGenomicPosition/${id}`\n      var r = {}\n      await axios({\n        method: 'get',\n        url: posUrl\n      })\n        .then(response => {\n          for (let i = 0; i < response.data.length; i++) {\n            r[response.data[i].primary_accession] = response.data[i].position_index\n          }\n        })\n      if (Object.keys(r).length === 0) {\n        console.log('cannot get genomic positions of ' + id + ' in getPositions() Coverage.vue')\n      }\n      return r\n    },\n\n    async getProteinSynonyms (proteins) {\n      for (var i = 0; i < proteins.length; i++) {\n        var synonym = await this.getSynonym(proteins[i].primary_accession)\n        proteins[i].synonym = synonym\n      }\n      return proteins\n    },\n\n    async getSynonym (id) {\n      var synUrl = `${window.BACKEND}/getProteinSynonyms/${id}`\n      var synonyms = []\n      await axios({\n        method: 'get',\n        url: synUrl\n      })\n        .then(response => {\n          if (response.data.Synonym) {\n            synonyms.push(response.data.Synonym) // TODO: if this gene name is short enough display it with priority over other synonyms\n          }\n          synonyms = synonyms.concat(response.data.synonyms)\n        })\n      return synonyms\n    },\n\n    async getMatchingStructures (proteins) {\n      for (var i = 0; i < proteins.length; i++) {\n        var loadRequest = {\n          selector: [proteins[i].primary_accession]\n        }\n        console.log(loadRequest)\n        var urlMatching = `${window.BACKEND}/get_matching_structures`\n        await axios({\n          method: 'get',\n          url: urlMatching,\n          params: loadRequest\n        })\n          .then(function (response) {\n            console.log(response)\n            if (response.data === '\\'Dark\\' protein') {\n              proteins[i].clusters = 0\n              proteins[i].pdb = null\n            } else {\n              proteins[i].clusters = response.data.clusters\n              proteins[i].pdb = response.data.Best_PDB.pdb_id\n            }\n          })\n      }\n      return this.cleanProteins(proteins)\n    },\n\n    countMatchingStructures (clusters) {\n      if (clusters === 0) {\n        return 0\n      } else {\n        return clusters.reduce(function (prev, cur) { return prev + cur.members.length }, 0)\n      }\n    },\n\n    async getNonDarkRegions (proteins) {\n      for (var i = 0; i < proteins.length; i++) {\n        console.log(proteins[i].primary_accession)\n        var nonDark = await this.getNonDark(proteins[i].primary_accession)\n        proteins[i].nonDark = nonDark\n        console.log(nonDark)\n\n        // var newnonDark = await this.getNonDarkCoverage(proteins[i].primary_accession)\n        // console.log('new:', newnonDark)\n      }\n      return proteins\n    },\n\n    async getNonDark (id) {\n      var url = `${window.BACKEND}getNonDarkRegions/${id}`\n      // var url = 'http://localhost:8010/getNonDarkRegions/' + id\n      var nonDark = []\n      await axios({\n        method: 'get',\n        url: url\n      })\n        .then(response => {\n          if (response.data) {\n            nonDark = response.data\n          }\n        })\n      return nonDark\n    },\n\n    async getNonDarkCoverage (primaryAccession) {\n      var loadRequest = {\n        selector: [primaryAccession]\n      }\n      var urlCoverage = `${window.BACKEND}getCoverageMap`\n      var nonDark = {}\n      await axios({\n        method: 'get',\n        url: urlCoverage,\n        params: loadRequest\n      })\n        .then(response => {\n          if (response.data) {\n            nonDark = response.data\n          }\n        })\n      return nonDark\n    },\n\n    // Gets all the structures of a particular organism, removes irrelevant information\n    async getStructures (organismId, allStructures) {\n      var proteins = []\n      var purl\n      allStructures = await this.sortStructures(organismId, allStructures)\n\n      for (let index = 0; index < allStructures.length; index++) {\n        allStructures[index].count = 0\n\n        var loadRequest = {\n          selector: [allStructures[index].primary_accession]\n        }\n        purl = `${window.BACKEND}/get_3D_alignment`\n        await axios({\n          method: 'get',\n          url: purl,\n          params: loadRequest\n        })\n          .then(response => {\n            var sequence = ''\n            if (response.data.sequences) {\n              sequence = response.data.sequences[0]\n              var seqLength = sequence.length\n              console.log('Loaded ', allStructures[index].synonym, seqLength)\n              proteins.push({ name: allStructures[index].synonym, primary_accession: allStructures[index].primary_accession, sequence: sequence.sequence, position: allStructures[index].position, length: seqLength })\n            } else {\n              // this is a dark protein\n              sequence = response.data[allStructures[index].primary_accession]\n              proteins.push({ name: allStructures[index].synonym, primary_accession: allStructures[index].primary_accession, sequence: sequence.sequence, position: allStructures[index].position, length: sequence.length })\n            }\n            return this.getFragments(allStructures[index].primary_accession)\n          }).then(fragments => {\n            proteins[index].fragments = fragments\n          })\n      }\n      proteins = await this.getNonDarkRegions(proteins) // .then(response => { return this.cleanProteins(response) })\n      return proteins\n    },\n\n    async getFragments (id) {\n      var posUrl = `${window.BACKEND}/getProteinFragments/${id}`\n      var r = []\n      await axios({\n        method: 'get',\n        url: posUrl\n      })\n        .then(response => {\n          if (response.data.length > 0) {\n            r = response.data\n          }\n        })\n      return r\n    }\n  }\n}\n</script>\n\n<style scoped>\n.v-lazy-image{\n  width: 100vw;\n}\n\n.infoLink{\n    position: absolute;\n    top: 10px;\n    height: 42px;\n    right: 125px;\n}\n\n/* Christian's work */\n@media screen and (min-width: 550px){\n  #matrix{\n    height: 99vh;\n    background: #c0c0c0 url('../assets/img/Resource-banner.svg') no-repeat calc(6px + 0.4vw) calc(8px + 0.1vh);\n    background-size: calc(115px + 5vw) calc(26px + 2vw);\n    text-align: center;\n  }\n}\n @media screen and (max-width: 549px){\n   #matrix{\n  height: 99vh;\n  background: #c0c0c0 url('../assets/img/AquariaLogo.svg') no-repeat calc(6px + 0.4vw) calc(8px + 0.1vh);\n  background-size: calc(130px + 1.5vw) calc(35px + 1.5vw);\n  text-align: center;\n  }\n}\n/* general layout and colors */\n    body {\n        margin: 0;\n        padding: 0;\n        background: #bbbbbb;\n        overflow: hidden;\n    }\n\n    div.no_match h3 {\n        font-weight:400;\n    }\n\n    .rowContent {\n      display: none;\n    }\n\n    .open .rowContent {\n      position: relative;\n      width: 100%;\n      height: 100%;\n      display: block;\n    }\n\n    .arrow {\n      cursor: pointer;\n    }\n\n    /* * * * * CSS grid * * * * */\n    #container {\n        /* display: grid; c0c0c0 */\n        grid-gap: 6px;\n        background: #ffffff;\n        padding: 0px; /* removed the padding here */\n        height: 95%;\n        margin: 0 auto;\n        /* overflow: scroll; */\n    }\n\n    /* TYPOGRAPHY */\n    /* responsive sizes */\n\n    @media screen and (min-width: 320px) {\n        #matrix .cell {\n            font-size: calc(8px + 6 * ((100vw - 320px) / 680));\n        }\n    }\n    /* Alignment */\n    h1, h3, p {\n        margin: 0;\n    }\n    span#count {\n        color:#383838;\n        font-weight: 300;\n        font-size: 60%;\n        margin-left: 20px;\n        overflow: hidden;\n    }\n    a span#help {\n        display:inline-block;\n        color:#ffffff;\n        background:#0876d6;\n        font-weight: 700;\n        font-size: 80%;\n        border-radius: 50%;\n        margin-left: 20px;\n        width: 1.2em;\n        line-height: 1.2em;\n    }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Coverage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Coverage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Coverage.vue?vue&type=template&id=f907dd24&scoped=true&\"\nimport script from \"./Coverage.vue?vue&type=script&lang=js&\"\nexport * from \"./Coverage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Coverage.vue?vue&type=style&index=0&id=f907dd24&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f907dd24\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/search_dark.012aee91.png\";","var LRU = require('lru-cache')\nvar URL = require('../../../utils/url')\n\nvar TopTen = function (id, MAX_SIZE) {\n  var that = this\n  this.id = id\n  if (URL.getUrlParameter('clearCache')) {\n\t  localStorage.removeItem(this.id)\n  }\n  var existing = localStorage.getItem(this.id)\n  this.cache = new LRU(MAX_SIZE)\n  if (existing === null) {\n  } else {\n    var entries = JSON.parse(existing)\n    entries.forEach(function (entry) {\n\t\t  that.cache.set(entry.key, entry.value)\n    })\n  }\n}\n\nTopTen.prototype.submitFired = function (name, primary_accession, pdb_id) {\n  var last = { name: name, primary_accession: primary_accession, pdb_id: pdb_id }\n  this.cache.set(primary_accession + pdb_id, last)\n  this.save()\n}\n\nTopTen.prototype.save = function () {\n  var saveArray = []\n  this.cache.forEach(function (value, key) {\n    saveArray.push({ key: key, value: value })\n  })\n  var savedText = JSON.stringify(saveArray)\n  console.log('TopTen.save', saveArray)\n  localStorage.setItem(this.id, savedText)\n}\n\nTopTen.prototype.getAll = function () {\n  var ret = []\n  this.cache.forEach(function (value) {\n\t  ret.push(value)\n  })\n  return ret\n}\n\nTopTen.prototype.savePDB = function (primary_acccession, pdb) {\n  var store = {}\n  store.primary_acccession = primary_acccession\n  store.pdb = pdb\n  this.cache.push(store)\n}\n\nTopTen.prototype.previousLookup = function (primary_accession) {\n  var pdb = false\n  this.cache.forEach(function (value) {\n    if (value.primary_accession == primary_accession) {\n      pdb = value.pdb_id\n    }\n  })\n  return pdb\n}\n\nTopTen.prototype.previousLookupByName = function (name) {\n  var pdb = false\n  this.cache.forEach(function (value) {\n    if (value.name == name) {\n      pdb = value.pdb_id\n    }\n  })\n  return pdb\n}\n\nTopTen.prototype.updatePDB = function (primary_accession, pdb) {\n  this.cache.forEach(function (value) {\n    if (value.primary_accession == primary_accession) {\n      value.pdb_id = pdb\n    }\n  })\n  this.save()\n}\n\nmodule.exports = TopTen\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Coverage.vue?vue&type=style&index=0&id=f907dd24&scoped=true&lang=css&\"","/* eslint-disable camelcase */\n/* eslint-disable no-mixed-spaces-and-tabs */\n/* eslint-disable no-tabs */\nvar featureSet\nvar width\n// var height\nvar featureCount\nvar groupCount\nvar Highcharts = require('./highstocks.js')\nvar d3 = require('d3')\nvar _ = require('lodash')\nvar $ = require('jquery')\nvar featureMap = require('./featureMap')\nvar URL = require('./../../../utils/url')\nvar Panels = require('../../AquariaLayout/helpers/hidePanels')\nvar extServerIds_\n// import Store from '../../../store/index'\nvar Store = require('../../../store/index.js')\n// const { default: store } = require('../../../store/index.js')\n//const { Store } = require('vuex')\n\nfunction createFeatureUI () {\n  width = document.getElementById('structure-viewer').offsetWidth - AQUARIA.margin.right - AQUARIA.margin.left\n//   height = 40 - AQUARIA.margin.top - AQUARIA.margin.bottom + 35 // height\n  // for one\n  // structure\n};\n\nfunction updateFeatureTabTitle (preferredProteinName) {\n  if (preferredProteinName !== 'unknown') {\n    // $(\"#featureExplanation\").text(\" for \" + preferredProteinName);\n  }\n};\n\n\nvar updateFeatureUI = function (featureList, extServerIds_forLoading) {\n\n  var waitingFrame = document.getElementById('waitingFrame')\n  if (waitingFrame != 'undefined' && waitingFrame != null && document.getElementById('waitingFrame').style.display != 'none') {\n    setTimeout(function(){\n      updateFeatureUI(featureList, extServerIds_forLoading)\n    }, 50)\n    console.log('REPEATING')\n  } else {\n    featureSet = featureList || featureSet\n    extServerIds_ = extServerIds_forLoading || extServerIds_\n\n    // console.log(\"featurelist.updateFeatureUI\");\n    // console.log(featureList)\n\n\n    $('#featurelist div').remove() // remove old contents\n    //\t$(\"#featureExplanation\").text(\" Loading...\");\n    //\t$(\"#featureCounter\").html(\"<img src='/images/89.GIF'/>\").show();\n\n    // draw axis ruler\n    AQUARIA.showMatchingStructures.drawAxisRuler('featurelist')\n\n    createFeatureUI()\n    featureCount = 0\n    groupCount = 0\n    var clusters = []\n    var addedFeatures = []\n    var orderedFeatures = []\n    AQUARIA.currentFeature = {}\n\n    // Group by feature source\n    AQUARIA.groupedFeatures = _.groupBy(featureSet, function (feature) {\n      return feature.Server\n    })\n\n    // Store as an object\n    AQUARIA.groupedFeatures = Object.keys(AQUARIA.groupedFeatures).map(function (key) {\n      return [String(key), AQUARIA.groupedFeatures[key]]\n    })\n\n    for (var key in featureSet) {\n      clusters.push(featureSet[key])\n      //console.log(\"Adding to cluster \")\n      //console.log(featureSet[key])\n    }\n\n    // Reorder grouped features\n    if ((window.localStorage.getItem('featureOrder')) && (window.localStorage.getItem('featureOrder').split(',').length >= AQUARIA.groupedFeatures.length)) {\n      var featureOrder = window.localStorage.getItem('featureOrder').split(',')\n      for (var key in featureOrder) {\n        for (var k = 0; k < AQUARIA.groupedFeatures.length; k++) {\n        if (AQUARIA.groupedFeatures[k][0] == featureOrder[key]) {\n            orderedFeatures[key] = AQUARIA.groupedFeatures[k]\n        }\n        }\n      }\n      AQUARIA.groupedFeatures = orderedFeatures\n    }\n\n      var featureDiv = d3.select('#featurelist').append('div').attr('id', 'featureContainer').append('div').attr('id', 'groupedFeatures')\n\n      for (var key in AQUARIA.groupedFeatures) {\n        // Feature Collection Header\n        var featureHeader = featureDiv.append('div').attr('id', AQUARIA.groupedFeatures[key][0]).attr('class', 'featureCollection')\n        if (AQUARIA.groupedFeatures[key][0] == 'UniProt' || AQUARIA.groupedFeatures[key][0] == 'CATH' || AQUARIA.groupedFeatures[key][0] == 'SNAP2' || AQUARIA.groupedFeatures[key][0] == 'PredictProtein') {\n          featureHeader = featureHeader.html(\"<div class='featureHeader'><p class='expand'>►</p><p class='featureName'>\" + AQUARIA.groupedFeatures[key][0] + \"</p><div class='info'>?</div></div><span class='tooltiptext'>\" + AQUARIA.groupedFeatures[key][1][0].About + '</span>')\n        } else {\n          featureHeader = featureHeader.html(\"<div class='featureHeader'><p class='expand'>►</p><p class='featureName'>\" + AQUARIA.groupedFeatures[key][0] + \"</p><div class='info'>?</div><button id='remove' class='featureButtons'>Remove</button>\" + \"</div><span class='tooltiptext'>\" + AQUARIA.groupedFeatures[key][1][0].About + '</span>')\n        }\n        // Feature tracks\n        // console.log('GROUPED FEATURES ')\n        // console.log(AQUARIA.groupedFeatures[key][1])\n\n        var fh = featureHeader.append('div')\n          .attr('class', 'featureTrack')\n          // .attr('id', 'featureTrack_' + key)\n          .selectAll('div')\n\n        for (var aFsIdx in AQUARIA.groupedFeatures[key][1]){\n        // for (var z =0; z < AQUARIA.groupedFeatures[key][1].length; z++){}\n          //.data(AQUARIA.groupedFeatures[key][1])\n\n          if (((AQUARIA.groupedFeatures[key][0] != 'Added Features') || (!AQUARIA.groupedFeatures[key][1][aFsIdx].hasOwnProperty('SeqHash')) || (AQUARIA.groupedFeatures[key][1][aFsIdx].SeqHash == '') || (AQUARIA.groupedFeatures[key][1][aFsIdx].SeqHash == AQUARIA.showMatchingStructures.sequence.uniprot_hash)) ) {\n\n            /* if (AQUARIA.groupedFeatures[key][1][aFsIdx].Server == 'Added Features'){\n              console.log(\"A feature idx is \" + aFsIdx)\n              console.log(AQUARIA.groupedFeatures[key][1][aFsIdx])\n            } */ \n\n\n            fh.data([AQUARIA.groupedFeatures[key][1][aFsIdx]])\n            .enter()\n            .append('div')\n            .attr('class', 'track')\n            .attr('id', function(d){\n              return 'track_' + d.Category\n            })\n            .html(\n              function (d) {\n                if (d.Type != '') {\n                  if (d.Server == 'UniProt' || d.Server == 'PredictProtein' || d.Server == 'CATH' || d.Server == 'SNAP2' || d.Server == 'COSMIC' || d.Server == 'FunVar') {\n                        var source = 'Curated Features'\n                  } else {\n                      source = d.Server\n                  }\n                  return \"<p><span class='featureSetName'>\" +\n                        d.Category +\n                        '</span> <i class=\"featureSetName_\">(' +\n                        d.Type.replace(/_/g, ' ') +\n                        \")</i> &nbsp;&nbsp; <span class='info'>?</span>  <span class='source'>\" +\n                        source.replace(/[sS]$/, '') +\n                        '</span> </p> <span class=\\'tooltiptext\\'>' + d.Description + '</span>'\n                } else {\n                  if (d.Server == 'UniProt' || d.Server == 'PredictProtein' || d.Server == 'CATH' || d.Server == 'SNAP2' || d.Server == 'COSMIC' || d.Server == 'FunVar') {\n                    source = 'Curated Features'\n                } else {\n                    source = d.Server\n                }\n                  return '<p><span class=\"featureSetName\">' +\n                        d.Category +\n                        \"</span> &nbsp;&nbsp; <span class='info'>?</span> <span class='source'>\" +\n                        source.replace(/[sS]$/, '')  +\n                        '</span></p> <span class=\\'tooltiptext\\'>' + d.Description + '</span>'\n                }\n              }\n            )\n            .each(drawTrack)\n          }\n          //drawTrack(d)\n          //.each(drawTrack)\n        }\n        //\tif (AQUARIA.preferred_protein_name !== \"unknown\") {\n        //\t\tupdateFeatureTabTitle(AQUARIA.preferred_protein_name);\n      }\n      $('#featureCounter').show()\n    if (featureCount > 0) {\n      $('#featureCounter').text(featureCount)\n      $('#featureCounter').digits()\n      //\t\t\t$(\"#waitForFeatures\").hide();\n      var scrollToggle = \"<p id='scrollToggle'><a href='javascript:$(\\\"#featureContainer\\\").toggleClass(\\\"noscroll\\\");'>Toggle scrolling</a></p>\"\n      $('#featureContainer').append(scrollToggle)\n    } else {\n      $('#featureCounter').text(featureCount)\n    }\n    //\t\telse { $(\"#featureCounter\").html(\"<img src='/images/89.GIF'/>\"); }\n    //\t}\n\n    // Following scripts displays the external URL features on structure\n\n    // Style featureHeader elements\n    d3.selectAll('.expand').attr('style', 'font-size: calc(9px + 0.2vw);color: #848484;margin: 10px -7px 0px 0px;')\n    d3.selectAll('#remove')\n      .on('click', function () {\n      $(this).parent().parent().remove()\n      })\n    $('#groupedFeatures').sortable({ axis: 'y' })\n    $('.featureTrack').sortable({ axis: 'y' }).css({ cursor: 'move' })\n    $('#groupedFeatures').disableSelection()\n    $('.featureHeader').on('click', function () {\n      var content = $(this).parent().children().eq(2)\n      content.slideToggle('slow')\n\n      if (content.is(':visible')) {\n        $(this).addClass('actived')\n      }\n      if ($(this).children().eq(0).text() == '►') {\n        $(this).children().eq(0).text('▼')\n        $(this).children('button').css({ visibility: 'visible' })\n      } else {\n        $(this).children().eq(0).text('►')\n        $(this).children('button').css({ visibility: 'hidden' })\n      }\n\n      var notThis = $('div[class*=\"actived\"]').not(this)\n\n      notThis.children().eq(0).text('►')\n      notThis.parent().children().eq(2).slideUp('slow')\n      notThis.children('button').css({ visibility: 'hidden' })\n      notThis.removeClass('actived')\n    })\n    //   var timer\n    $('.featureHeader').on({\n      mouseenter: function () {\n        $(this).css({ 'background-color': '#BEBEBE', cursor: 'pointer' })\n      },\n      mouseleave: function () {\n        $(this).css({ 'background-color': '#cccccc' })\n      },\n      mousedown: function () {\n      //   var that = this\n      //   timer = setTimeout(function () {\n        // \t  $(that).css({ cursor: 'move' })\n      //   }, 500)\n      },\n      mouseup: function () {\n        $(this).css({ cursor: 'pointer' })\n      }\n    })\n    $('.info').find('span:contains(\"undefined\")').parent().remove()\n    var info_hovers = document.querySelectorAll('.info')\n    for (var i=0; i< info_hovers.length; i++){\n\n      info_hovers[i].onmouseenter = function () {\n        console.log('mouseentered')\n        console.log(this)\n        this.style.backgroundColor = 'orange';\n        this.style.color = 'white';\n\n         // ({ 'background-color': 'orange', color: 'white' })\n        $(this).parent().parent().children('span.tooltiptext').css({ visibility: 'visible' })\n      };\n\n      info_hovers[i].onmouseleave = function () {\n        console.log('mouseleft')\n        var this_ = this;\n        setTimeout(function () {\n          // console.log(\"Here??\")\n          this_.style.backgroundColor = 'white';\n          this_.style.color = 'black';\n          // info_hovers[i].css({ 'background-color': 'white', color: 'black' })\n          $(this_).parent().parent().children('span.tooltiptext').css({ visibility: 'hidden' })\n        }, 3000);\n      }\n    }\n    // .each(function(d){\n\n    // })\n\n\n    /* d3.selectAll('.info').on({\n      mouseenter: function () {\n        $(this).css({ 'background-color': 'orange', color: 'white' })\n        $(this).parent().parent().children('span.tooltiptext').css({ visibility: 'visible' })\n      },\n      mouseleave: function () {\n        setTimeout(function () {\n          console.log(\"Here??\")\n          $(this).css({ 'background-color': 'white', color: 'black' })\n          $(this).parent().parent().children('span.tooltiptext').css({ visibility: 'hidden' })\n        }, 3000);\n      }\n    })*/\n\n    $('.tooltiptext').on({\n      mouseenter: function () {\n        $(this).css({ visibility: 'visible' })\n      },\n      mouseleave: function () {\n        var this_ = this;\n        setTimeout(function () {\n          $(this_).css({ visibility: 'hidden' })\n        }, 3000);\n      }\n    })\n\n    // Store ordering of feature source\n    featureOrder = new MutationObserver(function (mutations) {\n      var sources = $('#groupedFeatures .featureCollection').map(function () {\n        return $(this).attr('id')\n      }).get()\n      localStorage.setItem('featureOrder', sources)\n    })\n    featureOrder.observe(document.getElementById('groupedFeatures'), {\n      attributes: true,\n      childList: true\n    })\n\n    function waitForElement () {\n      // console.log('GROUPED FEATURES ')\n      // console.log(AQUARIA.groupedFeatures)\n      // console.log(clusters)\n\n      /* if (document.getElementById('waitingFrame').style.display != 'none') {\n        setTimeout(waitForElement, 50)\n        console.log('REPEATING')\n      } else { */\n        clusters.forEach(function (c) {\n          // console.log(\"The cluster is \" + c)\n          if (c.Server == 'Added Features') {\n            addedFeatures.push(c)\n          }\n        })\n        if (addedFeatures.length > 0){\n          // Remove annotation with different seqHash\n          /*\n          for (let i=0; i < addedFeatures.length; i++){\n            if (addedFeatures[i].hasOwnProperty('SeqHash') && addedFeatures[i].SeqHash != '' && addedFeatures[i].SeqHash != AQUARIA.showMatchingStructures.sequence.uniprot_hash){\n              // remove this annotation.\n              var track = document.getElementById('track_' + addedFeatures[i].Category)\n\n              addedFeatures[i].isFeatureList = false;\n\n              console.log(\"Found track as \")\n              console.log(track)\n              if (track){\n                track.parentNode.removeChild(track)\n              }\n            }\n          }\n          */\n          // Correct the pdbIds\n\n          // correctUniprotIds(addedFeatures).then(function(){\n\n\n\n              // for (let j =0; j< AQUARIA.panel3d.attributes.sequences.length; j++){\n                // if (addedFeatures[i].SeqHash == AQUARIA.showMatchingStructures.sequence.uniprot_hash ){//.panel3d.attributes.sequences[j].uniprot_hash){\n\n                  // console.log(\"Added features are (in featurelist.js \")\n                  // console.log(addedFeatures)\n\n                  var custom_feature = $('[id=\"Added Features\"]').children().eq(2).children().eq(0).find('svg')\n                  if (custom_feature.length > 0) {\n                    let trackPos = getFeatureSetIdxToShow(addedFeatures)\n                    custom_feature.attr('class', 'loaded')\n                    var oid = custom_feature.attr('id').split('_')[2]\n                    // console.log(\"The addedFeatures[0] is \")\n                    // console.log(addedFeatures[trackPos])\n                    AQUARIA.customfeatureSet = addedFeatures[trackPos]\n                    AQUARIA.customfeatureSetioid = oid\n                    AQUARIA.passFeature(addedFeatures[trackPos], oid)\n                    /* for (let i =0; i < addedFeatures.length; i++){\n                      // var oid = custom_feature.attr('id').split('_')[2]\n                     //  AQUARIA.customfeatureSetioid = oid\n                      for (let j =0; j<addedFeatures[i].Tracks.length; j++){\n                        AQUARIA.passFeature(addedFeatures[i], j)\n                      }\n\n                    } */\n                    if (document.querySelector('#outerFeatureMap')) {\n                      document.querySelector('#outerFeatureMap').remove()\n                    }\n                    drawfeatureMap = featureMap.createFeatureMap(addedFeatures[trackPos], extServerIds_, true)\n                    AQUARIA.addedFeature = true\n                    d3.selectAll('svg.loaded rect.feature').attr('fill', '#a4abdf')\n                    d3.select('svg.loaded').classed('loaded', false)\n\n                    // Adding all to 3D viewer:\n\n                  }\n\n\n\n\n                // }\n            // }\n\n            //rmFeatsWithNonRelSeqHash(addedFeatures).then(function(){\n\n\n            //})\n\n\n        }\n      // }\n    }\n\n    var featureRegex = new RegExp(/[A-Z a-z]+[0-9]+[A-za-z]+/)\n    var searchParam = window.location.search.split('?')[1]\n    // searchParam = window.location.search.split('=')[0]\n\n    // console.log('TESTING 1 2 3 ' + searchParam)\n    if ((URL.getUrlParameter('features') || (searchParam && (featureRegex.test(searchParam) || searchParam.match(/^zenodo\\./)))) && !AQUARIA.addedFeature) {\n      waitForElement()\n    }\n  }\n}\n\n\nfunction getFeatureSetIdxToShow(addedFeatures) {\n\n  let addedFeaturesPos = 0\n\n  var featureRegex = new RegExp(/[A-Z a-z]+[0-9]+[A-za-z]+/)\n  var searchParam = window.location.search.split('?')[1]\n\n  let idx_file = -1; let name_file = '';\n  let idx_featSet = -1; let name_featSet = '';\n  let filePos = 2; let featsetPos = 3;\n\n  searchParam = decodeURI(searchParam)\n\n  // console.log(\"In the featurelist, zenodo data is \" + searchParam)\n  if (searchParam && (featureRegex.test(searchParam) || searchParam.match(/^zenodo\\./))) {\n    let arr = searchParam.split(\".\")\n    if (arr.length <= 2) { // Nothing specified\n      return 0\n    }\n\n    // PART 1\n    // Atleast the file (name or number) provided\n    if (isNaN(arr[filePos])){\n      name_file = arr[filePos]\n      name_file = name_file.replace(\"%20\", ' ')\n    }\n    else {\n      idx_file = parseInt(arr[filePos]) - 1\n    }\n\n    // The feature set num to display\n    if (arr.length == 4) {\n      if (isNaN(arr[featsetPos])){\n        name_featSet = arr[featsetPos]\n        name_featSet = name_featSet.replace(\"%20\", '')\n      }\n      else {\n        idx_featSet = parseInt(arr[featsetPos]) - 1\n      }\n    }\n    else { // No feature set provided\n      idx_featSet = 0;\n    }\n\n    // console.log(\"The variables from the user are |\" + idx_file + \"| |\" + name_file + \"| |\" + idx_featSet + \"| |\" + name_featSet + \"|\")\n\n\n    // PART 2\n    let dataStructure = revBuildStruct(addedFeatures);\n\n    console.log('^^^^^^^^^^^^^^^^^^^^ The re-built data structure is ' + searchParam + ' ' + arr[filePos] + \" name_file:\" + name_file)\n    console.log(dataStructure)\n\n\n    // PART 3\n    let key_filename = ''; let key_featSet = '';\n\n    if (idx_file != -1) { // Use the order\n      let keys = Object.keys(dataStructure)\n      for (let i=0; i<keys.length; i++){\n        if (dataStructure[keys[i]].order == idx_file){\n          key_filename = keys[i]\n          // console.log(\"Calculated 1 \" + key_filename + \" idx_file \" + idx_file)\n        }\n      }\n    }\n    else if (name_file != '') { // Search by file name\n      let keys = Object.keys(dataStructure)\n      for (let i=0; i<keys.length; i++){\n        console.log(\"Why not working |\" + keys[i] + \"| |\" + name_file + \"|\")\n        if (keys[i].startsWith(name_file)){\n          key_filename = keys[i]\n          console.log(\"Calculated 2 \" + key_filename + \" name_file \" + name_file)\n        }\n      }\n    }\n\n    // if not found;\n    if (key_filename == ''){\n      // console.log(\"Calculated no key_filename file \" + key_filename)\n      return 0 // return the first track\n    }\n\n    // Finding the right feature set\n    let trackPos\n    if (idx_featSet != -1){\n      let keys = Object.keys(dataStructure[key_filename]['featureSets'])\n      for (let i=0; i<keys.length; i++){\n        if (dataStructure[key_filename].featureSets[keys[i]].order == idx_featSet){\n          key_featSet = keys[i]\n          trackPos = dataStructure[key_filename].featureSets[keys[i]].posInTrack;\n          // console.log(\"Calculated 3 \" + key_featSet + \" idx_featSet \" + idx_featSet)\n        }\n      }\n    }\n    else if (name_featSet != '') {\n      let keys = Object.keys(dataStructure[key_filename]['featureSets'])\n      for (let i=0; i<keys.length; i++){\n        if (keys[i].startsWith(name_featSet)){\n          key_featSet = keys[i]\n          trackPos = dataStructure[key_filename].featureSets[keys[i]].posInTrack;\n          // console.log(\"Calculated 4 \" + key_featSet + \" name_featSet \" + name_featSet)\n        }\n      }\n    }\n    if (key_featSet =='') { // return the first track in the feature set\n\n      let keys = Object.keys(dataStructure[key_filename]['featureSets'])\n      let minTrackVal = -1;\n      for (let i=0; i<keys.length; i++){\n        // Get the minimum value\n        if (minTrackVal == -1 || dataStructure[key_filename].featureSets[keys[i]].order < minTrackVal){\n          minTrackVal = dataStructure[key_filename].featureSets[keys[i]].posInTrack\n          key_featSet = keys[i]\n        }\n        // console.log(\"The calculated minTrackVal \" + minTrackVal)\n        /*\n        if (dataStructure[key_filename].featureSets[keys[i]].startsWith(idx_file)){\n          key_featSet = keys[i]\n          trackPos = dataStructure[key_filename].featureSets[keys[i]].posInTrack;\n          console.log(\"Calculated 5 \" + key_featSet + \" ... need to claculated minimum value here.\")\n        }\n        */\n      }\n      trackPos = minTrackVal\n    }\n\n    // console.log(\"The calculated data is \" + key_filename + \" \" + key_featSet + \" \" + trackPos)\n    return trackPos\n  }\n  else {\n    return 0\n  }\n}\n\nfunction revBuildStruct(addedFeatures){\n  let dataStructure = {} // {fn: order: num|featureSets: {order:num|trackNum:num}}\n\n  // console.log('An addedFeatures is what?')\n  // console.log(addedFeatures)\n\n  let orderOfOccur = 0; var order_featSet;\n  for (let i=0; i<addedFeatures.length; i++){\n    if (!addedFeatures[i].hasOwnProperty('SeqHash') || addedFeatures[i].SeqHash == '' || (addedFeatures[i].SeqHash == AQUARIA.showMatchingStructures.sequence.uniprot_hash)) {\n      let category = addedFeatures[i].Category.split(/\\./)[1]\n      console.log(\"Updated category \" + category)\n\n      let type = addedFeatures[i].Category.split(/\\./)[0]\n      if (!dataStructure.hasOwnProperty(type)){\n        dataStructure[type] = {}\n        dataStructure[type]['order'] = orderOfOccur++\n        dataStructure[type]['featureSets'] = {}\n      }\n\n\n      if (!dataStructure[type]['featureSets'].hasOwnProperty(category)){\n        // dataStructure[addedFeatures[i].Type]['featureSets'] = {} // .push(addedFeatures[i].Category)\n\n\n        order_featSet = getNextOrder(dataStructure[type]['featureSets'])\n        dataStructure[type]['featureSets'][category] = {}\n        dataStructure[type]['featureSets'][category]['order'] = order_featSet\n        dataStructure[type]['featureSets'][category]['posInTrack'] = i\n      }\n    }\n  }\n\n  // Retrospectively remove featureSet if no features.\n\n\n  return dataStructure\n}\n\nfunction getNextOrder(obj) {\n  let keys = Object.keys(obj)\n\n  if (keys.length == 0){\n    return 0\n  }\n\n  // find the max order\n  let maxOrder = 0;\n  for (let i =0; i<keys.length; i++){\n    if (obj[keys[i]].order > maxOrder){\n      maxOrder = obj[keys[i]].order\n    }\n  }\n\n  return (maxOrder + 1 )\n}\n\nfunction rearrangeFilesIfReq(filesData, filenames){\n\n  // console.log(\"The filenames & data is \" + filenames)\n  // console.log(filesData)\n\n  var featureRegex = new RegExp(/[A-Z a-z]+[0-9]+[A-za-z]+/)\n  var searchParam = window.location.search.split('?')[1]\n\n  let idx = 0; let filePos = 2\n  if (searchParam && (featureRegex.test(searchParam) || searchParam.match(/^zenodo\\./))) {\n    let arr = searchParam.split(\".\")\n    // console.log(\"Cloud 9 academy \" + arr)\n    if (arr.length <= 2) { // default\n      return\n    }\n    // Atleast the file number or name provided\n    if (isNaN(arr[filePos])){\n      // console.log('Integer not provided ' + arr[filePos])\n    }\n    else {\n      // console.log('Integer provided ' + arr[filePos])\n      idx = parseInt(arr[filePos])\n\n    }\n  }\n}\n\nfunction rmFeatsWithNonRelSeqHash(addedFeatures){\n  return new Promise(function(resolve, reject){\n\n    if (addedFeatures.length == 0){\n      // console.log('Resolving before The idx to rm calculated')\n      resolve()\n    }\n\n    let idxToRm = []\n\n    for (let i =0; i < addedFeatures.length; i++){\n      if (addedFeatures[i].hasOwnProperty('SeqHash') && addedFeatures[i].SeqHash != ''){\n        let isFound = false\n        for (let j =0; j< AQUARIA.panel3d.attributes.sequences.length; j++){\n          if (addedFeatures[i].SeqHash == AQUARIA.panel3d.attributes.sequences[j].uniprot_hash){\n            isFound = true\n          }\n        }\n        if (isFound == false){\n          idxToRm.push(i)\n          // console.log('The idx to rm is getting added?')\n        }\n      }\n      if (i == addedFeatures.length - 1){\n        // console.log(\"The idx to rm are \" + idxToRm)\n        // reverse sort\n        if (idxToRm.length == 0){\n          resolve()\n        }\n        idxToRm.reverse()\n        for (let k =0; k < idxToRm.length; k++){\n          let track = document.getElementById('track_' + addedFeatures[idxToRm[k]].Category)\n\n          // console.log(\"Track to remove is \");\n          // console.log(track)\n\n          // addedFeatures.splice(idxToRm[k], 1)\n          if (k == idxToRm.length - 1){\n            resolve()\n          }\n        }\n\n      }\n    }\n  })\n}\n\n/* function rmFeatsWithNonRelSeqHash(addedFeatures){\n  return new Promise(function(resolve, reject){\n    let idxToRm = []\n\n    if (addedFeatures.length == 0){\n      resolve()\n    }\n\n    for (let i =0; i < addedFeatures.length; i++){\n      if (addedFeatures[i].hasOwnProperty('SeqHash') && addedFeatures[i].SeqHash != ''){\n        let isFound = false\n        for (let j =0; j< AQUARIA.panel3d.attributes.sequences.length; j++){\n          if (addedFeatures[i].SeqHash == AQUARIA.panel3d.attributes.sequences[j].uniprot_hash){\n            isFound = true\n          }\n        }\n        if (isFound == false){\n          idxToRm.push(i)\n          console.log('The idx to rm is getting added?')\n        }\n      }\n      if (i == addedFeatures.length - 1){\n        console.log(\"The idx to rm are \" + idxToRm)\n        // reverse sort\n        if (idxToRm.length == 0){\n          resolve()\n        }\n        idxToRm.reverse()\n        for (let k =0; k < idxToRm.length; k++){\n          let track = document.getElementById('track_' + addedFeatures[idxToRm[k]].Category)\n\n          console.log(\"Track to remove is \");\n          console.log(track)\n\n          // addedFeatures.splice(idxToRm[k], 1)\n          if (k == idxToRm.length - 1){\n            resolve()\n          }\n        }\n\n      }\n    }\n  })\n} */\n\nfunction correctUniprotIds (addedFeatures) {\n  return new Promise(function(resolve, reject){\n\n\n    for (let i =0; i < addedFeatures.length; i++){\n      if (addedFeatures[i].hasOwnProperty('SeqHash') && addedFeatures[i].SeqHash != ''){\n\n        addedFeatures[i].ProteinID = ''\n        for (let j =0; j< AQUARIA.panel3d.attributes.sequences.length; j++){\n          // console.log(\"Updating \" + addedFeatures[i].SeqHash + \" | \" + AQUARIA.panel3d.attributes.sequences[j].primary_accession)\n          if (addedFeatures[i].SeqHash == AQUARIA.panel3d.attributes.sequences[j].uniprot_hash){\n            addedFeatures[i].ProteinID = AQUARIA.panel3d.attributes.sequences[j].primary_accession\n\n            // console.log(\"Updating uniprotId\")\n          }\n        }\n        // addedFeatures[i].ProteinID = ProteinID\n      }\n\n      // console.log(\"I is \" + i + \" \" + addedFeatures.length)\n      if (i == addedFeatures.length -1){\n        // console.log(\"Correct uniprotIds \")\n        // console.log(addedFeatures)\n        resolve()\n      }\n    }\n  })\n}\nfunction drawTrack (datum, i) {\n  // console.log(datum.Tracks);\n\n  /*\n  if (datum.Server == 'Added Features' && datum.SeqHash !== ''){\n    for (let j =0; j< AQUARIA.panel3d.attributes.sequences.length; j++){\n      if (datum.SeqHash == AQUARIA.panel3d.attributes.sequences[j].uniprot_hash){\n        return;\n      }\n    }\n  }\n  */\n\n  var features = datum.Tracks\n\n  viewBoxwidth = document.getElementById('structure-viewer').offsetWidth - window.AQUARIA.margin.right - window.AQUARIA.margin.left\n\n\n  for (var o in features) {\n    var outerdiv = d3.select(this)\n    var nusvg = featureMap.createSVGforFeature(outerdiv, width + AQUARIA.margin.left, 25, viewBoxwidth)\n    nusvg\n      .attr('id', 's_' + groupCount + '_' + o)\n    // .attr(\"title\", \"Click to load feature into 3D view; hover over features to see detailed info.\")\n\n      .on('click', function () {\n        if (d3.select(this).attr('class') == 'loaded') { // deselect feature (it's already displayed)\n          AQUARIA.currentFeature.oid = null\n          AQUARIA.currentFeature.data = null\n          document.querySelector('.featureHeader.actived').click()\n          d3.select('svg.loaded').classed('loaded', false)\n          Store.default.commit('showLoader', true)\n          Store.default.commit('setLoaderMsg', 'Removing feature...')\n          Store.default.commit('showLoader', false)\n          // Stu hack to detect feature changes\n          if (typeof AQUARIA.onFeatureChange === 'function') {\n            AQUARIA.onFeatureChange(null, 0)\n          }\n          removeCurrentAnnotationFrom3DViewer()\n          document.querySelector('#outerFeatureMap').remove()\n          document.querySelector('#popup').style.display = 'none'\n          AQUARIA.showMatchingStructures.showMap(AQUARIA.showMatchingStructures.cluster)\n          // document.querySelector('#selectedCluster > .outer_container').remove()\n          Panels.hidePanels()\n        } else { // console.log(\"clicked to display feature\");\n          // document.querySelector(\".featureHeader.actived\").click()\n          if (document.querySelector('#outerFeatureMap')) {\n            document.querySelector('#outerFeatureMap').remove()\n          }\n          var oid = d3.select(this).attr('id').split('_')[2]\n          AQUARIA.currentFeature.oid = oid\n          AQUARIA.currentFeature.data = datum\n          Store.default.commit('showLoader', true)\n          Store.default.commit('setLoaderMsg', 'Loading feature...')\n          Store.default.commit('showLoader', false)\n          if (datum.Server != 'Added Features') {\n            AQUARIA.addedFeature = false\n          }\n\n          // Stu hack to detect feature changes\n          if (typeof AQUARIA.onFeatureChange === 'function') {\n            AQUARIA.onFeatureChange(datum, oid)\n          }\n          /* console.log(\"Datum\");\n          console.log(datum);\n          console.log(oid); */\n          d3.selectAll('svg.loaded rect.feature').attr('fill', '#a4abdf')\n          d3.select('svg.loaded').classed('loaded', false)\n          d3.select(this).attr('class', 'loaded')\t// console.log(\"it's \" + d3.select(this).attr(\"class\"));\n\n          //if (datum.Server == 'Added Features'){\n          //  correctUniprotIds([datum]).then(function(){\n          //    if ( (datum.hasOwnProperty('SeqHash') && datum.SeqHash == '' && ((datum.ProteinID == window.AQUARIA.protein_primary_accession) || datum.ProteinID == '' )) || (datum.hasOwnProperty('SeqHash') && datum.SeqHash != '' && ((datum.ProteinID == window.AQUARIA.protein_primary_accession)))) {\n\n                //console.log(\"Currentfeaturedata\")\n                //console.log(AQUARIA.currentFeature.data)\n                drawfeatureMap = featureMap.createFeatureMap(AQUARIA.currentFeature.data, extServerIds_)\n                //console.log('seqhash again case 1')\n\n                AQUARIA.passFeature(datum, oid, this)\n          //    }\n          //    else {\n          //      drawfeatureMap = featureMap.createFeatureMap({}, extServerIds_)\n                // console.log('seqhash again case 2')\n          //      AQUARIA.passFeature(datum, oid, this)\n          //    }\n          //  })\n\n          // }\n\n\n          Panels.hidePanels()\n        }\n      })\n      .on('mouseover', function () {\n        d3.select(this).selectAll('rect.feature').attr(\n          'fill', function () {\n            return d3.select(this).attr('color')\n          })\n      })\n      .on('mouseout', function () {\n        if (d3.select(this).attr('class') !== 'loaded') {\n          d3.select(this).selectAll('rect.feature')\n            .attr('fill', '#a4abdf')\n        }\n      })\n    // add background for highlighting\n      .append('rect')\n      .attr('width', width + AQUARIA.margin.left)\n      .attr('height', 25)\n      .attr('class', 'bg')\n      .attr('fill', 'none')\n\n    d3.select('svg#s_' + groupCount + '_' + o)\n      .append('g')\n      .attr('transform', 'translate(' + AQUARIA.margin.left + ',0)')\n    // add center line\n      .append('rect')\n      .attr('width', width)\n      .attr('height', 1)\n      .attr('transform', 'translate(0,13)')\n      .attr('class', 'insertion')\n    // add features\n    for (var p in features[o]) {\n      // console.log(\"p is \");\n      // console.log(p);\n\n      featureCount++\n\n      d3\n        .select('#s_' + groupCount + '_' + o + ' g')\n        .append('rect')\n        .attr('width', function () {\n          return (/* parseInt */((features[o][p].size + 1) *\n\t\t\t\t\t\t\t\t\t\tAQUARIA.srw) > 2) ? /* parseInt */((features[o][p].size + 1) *\n\t\t\t\t\t\t\t\t\t\tAQUARIA.srw)\n            : 2\n        })\n        .attr('height', 14)\n        .attr('id', 'r_' + groupCount + '_' + o + '_' + p)\n        .attr('transform', 'translate(' + /* parseInt */ (features[o][p].start * (AQUARIA.srw - 0.0085)) + ',6)')\n        .attr('color', features[o][p].color).attr('fill', '#a4abdf')\n        .attr('fill-opacity', function () {\n          return (datum.Class == 'single_track') ? 0.3 : 1\n        })\n        .attr('class', 'feature')\n        .on('mouseover', createMouseOverCallback(features[o][p]))\n        .on('mouseout',\tfunction () {\n          var ID = d3.select(this).attr('id')\n          return d3.select(this)\n            .call(mouseoutFeature, ID)\n        })\n    }\n  }\n  groupCount++\n}\n\nAQUARIA.passFeature = function (trk, nr, elmt) {\n  if (typeof AQUARIA.onFeatureChange === 'function') {\n    AQUARIA.onFeatureChange(trk, nr)\n  }\n  // console.log(\"featurelist.passFeature \" + trk.Category + \" \" + trk.Type + \", Track \" + nr, trk); //console.log(elmt);\n  sentAnnotationTo3DViewer(trk, parseInt(nr))\n}\n\nfunction createMouseOverCallback (feature) {\n  return function () {\n    // console.log(\">>>>>>>>>> over here ....???\");\n    var ID = d3.select(this).attr('id')\n    d3.select(this).call(mouseoverFeature, feature, ID)\n  }\n}\n\nvar t, s\nfunction mouseoverFeature (el, f, eid) {\n  t = setTimeout(function () {\n    showAnnotation(f, eid)\n  }, 500)\n  d3.select('#' + eid).attr('stroke-width', '2px').attr('stroke', 'white')\n}\n\nfunction moveTheDiv () {\n  return new Promise(function (resolve, reject) {\n    const aSuperFamFeature = document.getElementById('superFamCharts_0_go')\n    document.getElementById('superFamCharts').append(aSuperFamFeature)\n  })\n}\n\nfunction mouseoutFeature (el, eid) {\n  clearTimeout(t)\n  d3.select('#' + eid).attr('stroke-width', '0px')\n  s = setTimeout(function () {\n    moveTheDiv().then(function () {\n      $('div.popup').fadeOut()\n    })\n      .catch(function (error) {\n        $('div.popup').fadeOut()\n      })\n  }, 500)\n}\n\nfunction createANewDiv_hcNoData (divId) {\n  return new Promise(function (resolve, reject) {\n    if (document.getElementById(divId)) {\n      document.getElementById(divId).remove() //  = '';\n    }\n    // if (!document.getElementById(divId)){\n    const newDiv = document.createElement('div')\n    document.getElementById('superFamCharts').append(newDiv)\n    newDiv.id = divId\n    newDiv.style = 'width: 100px; height: 100px; margin: 0 auto; background-color: white;'\n\n    // if (document.getElementById(divId)){\n    resolve()\n    // }\n    // }\n  })\n}\nfunction doThePlotting_v2 (divId, theSeriesData_inner, theSeriesData_outer, theTitle, theSize_inner, labelCol_inner, labelDist_inner, innerSize_outer, name_inner, name_outer, labelCol_outer) {\n  return new Promise(function (resolve, reject) {\n    // try{\n    //\tlet newDiv = document.createElement('div');\n    //\tnewDiv.id = divId;\n    //\tnewDiv.style = \"width: 100px; height: 100px; margin: 0 auto\";\n    //\tdocument.getElementById('superFamCharts').append(newDiv);\n\n\t\t  createANewDiv_hcNoData(divId).then(function () {\n      // First add new Div.\n      try {\n        Highcharts.chart(divId, {\n\t\t\t\t\t    chart: {\n\t\t\t\t\t        type: 'pie',\n            margin: 0\n\t\t\t\t\t    },\n\t\t\t\t\t    title: {\n\t\t\t\t\t        text: theTitle\n\t\t\t\t\t    }, /*\n\t\t\t\t\t    subtitle: {\n\t\t\t\t\t        text: 'Source: <a href=\"http://statcounter.com\" target=\"_blank\">statcounter.com</a>'\n\t\t\t\t\t    }, */\n\t\t\t\t\t    plotOptions: {\n\t\t\t\t\t        pie: {\n\t\t\t\t\t            shadow: false,\n\t\t\t\t\t            center: ['50%', '50%']\n\t\t\t\t\t        }\n\t\t\t\t\t    },\n\t\t\t\t\t    tooltip: {\n\t\t\t\t\t        valueSuffix: '%'\n\t\t\t\t\t    },\n\t\t\t\t\t    series: [{\n\t\t\t\t\t        name: name_inner,\n\t\t\t\t\t        data: theSeriesData_inner,\n\t\t\t\t\t        size: theSize_inner,\n\t\t\t\t\t        dataLabels: {\n              enabled: false,\n\t\t\t\t\t            formatter: function () {\n\t\t\t\t\t                return this.y > 3 ? this.point.name : null\n\t\t\t\t\t            },\n\t\t\t\t\t            color: labelCol_inner,\n\t\t\t\t\t            distance: labelDist_inner\n\t\t\t\t\t        }\n\t\t\t\t\t    }, {\n\t\t\t\t\t        name: name_outer,\n\t\t\t\t\t        data: theSeriesData_outer,\n\t\t\t\t\t        // size: '80%',\n\t\t\t\t\t        innerSize: innerSize_outer,\n\t\t\t\t\t        dataLabels: {\n              enabled: false,\n\t\t\t\t\t            formatter: function () {\n\t\t\t\t\t                // display only if larger than 1\n\t\t\t\t\t                return this.y > 1 ? '<b>' + this.point.name + ':</b> ' +\n\t\t\t\t\t                    this.y + '%' : null\n\t\t\t\t\t            },\n              color: labelCol_outer\n\t\t\t\t\t        },\n\t\t\t\t\t        id: 'versions'\n\t\t\t\t\t    }],\n\t\t\t\t\t    responsive: {\n\t\t\t\t\t        rules: [{\n\t\t\t\t\t            condition: {\n\t\t\t\t\t                maxWidth: 100\n\t\t\t\t\t            },\n\t\t\t\t\t            chartOptions: {\n\t\t\t\t\t                series: [{\n\t\t\t\t\t                }, {\n\t\t\t\t\t                    id: 'versions',\n\t\t\t\t\t                    dataLabels: {\n\t\t\t\t\t                        enabled: false\n\t\t\t\t\t                    }\n\t\t\t\t\t                }]\n\t\t\t\t\t            }\n\t\t\t\t\t        }]\n\t\t\t\t\t    }\n        })\n        resolve()\n        // console.log('In the highcharts plotting function')\n      } catch (error) {\n        console.log('Highcharts error')\n        console.log(error)\n        resolve()\n        console.log('In the highcharts plotting function')\n      }\n    })\n    /* }\n\t\tcatch(error){\n\t\t\tconsole.log(\"Highcharts error\");\n\t\t\tconsole.log(error);\n\t\t} */\n  })\n}\n\nvar common = require('../../AquariaLayout/helpers/common')\n// const { reverse } = require('core-js/core/array')\n// const keys = require('core-js/fn/array/keys')\nconst oneAaCodes = ['A', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'K', 'L', 'M', 'N', 'P', 'Q', 'R', 'S', 'T', 'V', 'W', 'Y']\n\nfunction showAnnotation (f, eid) {\n\n  //console.log('showAnnotation.f is ')\n  //console.log(f)\n  //console.log(eid)\n\n\n\n  \t// console.log(eid);\n  \t// console.log('Hovered ' + f.name)\n  \tvar urlhtml = ''\n  \tif (f.urls.length > 0) {\n  \t\t// var lnx = f.urls.split(\";\");\n  \t\turlhtml = '<p>'\n  \t\tfor (var i = 0; i < f.urls.length; i++) {\n  \t\t\turlhtml += \"<a href='\" + f.urls[i].href + \"' target='_blank'>\" +\n  \t\t\t\t\tf.urls[i].text + '</a><br>'\n  \t\t}\n  \t\turlhtml += '</p>'\n  \t}\n  \t$('div.popup').remove()\n    var balloon = ''\n  \t// var balloon = \"<div style='display: none;'> <div id='divVariantInfo' class='aaLightBg'></div><div id='divVI_chosen'></div> <div id='divVI_posInfo'><hr class='anAaHr'><b>Residue \" + f.start + '</b></div> '\n\n  \tlet oldAa = ''\n  \tif (f.name.includes('&#8201;&#8594;&#8201;')) {\n  \t\toldAa = f.name.replace(/^.*\\(/, '')\n  \t\toldAa = oldAa.replace(/\\&.*$/, '')\n  \t}\n  \tlet btnsDiv = \"<div id='buttons_eachAa'> <b>See also:</b><p class='pAaColor'> \" + oldAa + ' &rarr;</p>'\n  \t// balloon = balloon + \"<div id='divVI_varInfo'>\"\n  \toneAaCodes.forEach(function (anAa, _i) {\n  \t\tif (anAa != oldAa) {\n  \t\t\t// balloon = balloon + \"<div id='divVI_varInfo_\" + anAa + \"'></div>\"\n        const isUniCosOrFun = isUniCosOrFunPresent(anAa, f.desc, f.start)\n  \t\t\tbtnsDiv = btnsDiv + \"<button id='btnVI_\" + anAa + \"'\"\n  \t\t\tif (isUniCosOrFun == true) {\n  \t\t\t\tbtnsDiv = btnsDiv + \"class='btnAaBold_b'> <b>\" + anAa + '</b> '\n  \t\t\t} else {\n  \t\t\t\tbtnsDiv = btnsDiv + \" class='btnAaBold'> \" + anAa\n  \t\t\t}\n  \t\t\tbtnsDiv = btnsDiv + '</button>'\n  \t\t}\n  \t})\n\n  \t// balloon = balloon + '</div>'\n  \tbtnsDiv = btnsDiv + '</div>'\n  \t// balloon = balloon + btnsDiv\n  \t// balloon = balloon + \"</div><div class='balloon' id='balloon'><span class='x'>&nbsp;</span><p id='popupheader'>\"\n  \tif (f.name.includes('span_missenseHeading')) {\n    //  console.log(extServerIds_);\n  \t\tif (typeof extServerIds_ !== 'undefined') {\n  \t\t\t// console.log('extServerIds_forLoading')\n  \t\t\tlet isAnyFalse = false\n  \t\t\tfor (const serverId in extServerIds_) {\n  \t\t\t\tif (extServerIds_[serverId] === false) {\n  \t\t\t\t\tisAnyFalse = true\n  \t\t\t\t}\n  \t\t\t}\n  \t\t\tif (isAnyFalse == true) {\n  \t\t\t\t// balloon = balloon + '<img src=\"/images/ajax-loader1.gif\" alt=\"Loading...\"  width=15/> '\n  \t\t\t}\n  \t\t\t// console.log(extServerIds_)\n  \t\t}\n  \t}\n    let balloonTitle = '<b>' + f.label + '</b>'\n\n  \t// balloon = balloon\t+ f.label\n    if (!f.name.includes('span_missenseHeading')) {\n      // balloon = balloon + ' ('\n      balloonTitle = balloonTitle + ' ('\n      if (f.start === f.end) {\n        balloonTitle = balloonTitle + 'Residue ' + f.start\n        // Store.commit('setPopupTitle', 'Residue ' + f.start)\n        // balloon = balloon + 'Residue ' + f.start\n      } else {\n        balloonTitle = balloonTitle + 'Residues ' + f.start + '-' + f.end\n        // balloon = balloon + 'Residues ' + f.start + '-' + f.end\n      }\n      // balloon = balloon + ') '\n      balloonTitle = balloonTitle + ') '\n    }\n\n  \t/// END.\n\n  \tif (!f.name.includes('span_missenseHeading')) {\n  \t\t// balloon = balloon + '<br/>'\n  \t}\n\n    // balloon = balloon + f.desc + '</p>' + urlhtml + '</div>'\n    let balloonText = f.desc + \"<br>\" + urlhtml;\n    if (f.name.includes('span_missenseHeading')){\n      if (f.start != f.end){\n        Store.default.commit('setVariant', f.start + '-' + f.end)\n        Store.default.commit('setPopupTitle', f.label)\n\n        getIdxInVarRes(f.start + '-' + f.end, f.label)\n      }\n      else {\n        Store.default.commit('setVariant', f.start)\n        Store.default.commit('setPopupTitle', f.label)\n\n        getIdxInVarRes(f.start, f.label)\n      }\n    }\n    else {\n      Store.default.commit('setVariant', -1)\n      Store.default.commit('setPopupTitle', balloonTitle)\n      Store.default.commit('setPopupText', balloonText)\n      Store.default.commit('setVariantIdx', -1)\n    }\n  \t\t/* \tconsole.log(\"The urlhtml is \" + urlhtml);\n  \t\t\tconsole.log(\"The f.desc is \" + f.desc); */\n\n  \t// let theSuperFam = document.getElementById('superFamCharts_0_go'); // .cloneNode(true); //.getElementsByTagName('svg')[0];\n  \t// console.log(\"The superfam is \"+ theSuperFam);\n\n  \t// d3.select(\"body\")\n  \t// \t.append(\"div\")\n  \t// \t\t.attr(\"class\", \"popup\")\n  \t// \t\t.html(balloon);\n\n  \t\t\t// .append(theSuperFam);\n\n  \t// document.getElementById('balloon').append(theSuperFam);\n\n  \tif (f.hasOwnProperty('hc_go') && f.hasOwnProperty('hc_ec') && f.hasOwnProperty('hc_species')) {\n  \t\tconsole.log('CATH plot data')\n  \t\tconsole.log(f)\n  \t\thandleCathPopups(f).then(function () {\n  \t\t\tupdateTheStyleOfHc()\n  \t\t})\n  \t} else {\n  \t\tconsole.log('CATH plot no data')\n  \t\tconsole.log(f)\n  \t}\n\n  \t// var popheight = $(\"div.popup\").innerHeight();\n\n  \t// var fpos = $(\"#\" + eid).offset();\n  \t// var fwidth = $(\"#\" + eid).attr(\"width\");\n  \tvar fpos = document.querySelector('#' + eid).getBoundingClientRect()\n  \tvar svgdim = document.querySelector('#' + eid).getBBox()\n  \tvar fwidth = svgdim.width\n\n  \tcommon.appendPopup(balloon, fpos, fwidth, false)\n  \t// common.appendPopup(balloon, fpos, fwidth, s)\n  \t// var bleft = parseInt(fpos.left + fwidth / 2 - 160);\n  \t// var btop = parseInt(fpos.top - popheight);\n\n  \t// $(\"div.popup\").css({\n  \t// \t\"left\" : bleft + \"px\",\n  \t// \t\"top\" : btop + \"px\",\n  \t// \t\"width\": \"470px\"\n  \t// }).fadeIn(600);\n\n  \t// $(\"span.x\").click(function() {\n  \t// \t$(\"div.popup\").fadeOut();\n  \t// });\n\n  \t// $(\"div.popup\").hover(function() {\n  \t// \tclearTimeout(s);\n  \t// }, function() {\n  \t// \ts = setTimeout(function() {\n  \t// \t\t$(\"div.popup\").fadeOut();\n  \t// \t}, 500);\n  \t// });\n}\n\nfunction getIdxInVarRes(resNum, popupText){\n  var varRes = Store.default.getters.getVariantResidues\n  //console.log(\"GAMMA \" + resNum + \" \" + popupText)\n  //console.log(varRes)\n\n\n  if (varRes.hasOwnProperty(resNum) && varRes[resNum].hasOwnProperty('theOrigFeatStr')){\n    for (let i=0; i < varRes[resNum].theOrigFeatStr.length; i++){\n      if (popupText.includes(varRes[resNum].theOrigFeatStr[i])){\n        Store.default.commit('setVariantIdx', i)\n        console.log(\"Set variant idx \" + i)\n        break\n      }\n    }\n  }\n  /*\n  else { // handle the ranges (when seems like residue is only plotted on a single residue in track)\n    let resNums = Object.keys(varRes)\n    for (let j =0; j < resNums.length; j++) {\n      if (resNums[j].match(\"-\")) {\n        let arr = resNums[j].split(\"-\")\n        if (arr[0] == resNum){\n          for (let i=0; i < varRes[resNums[j]].theOrigFeatStr.length; i++){\n            if (popupText.includes(varRes[resNums[j]].theOrigFeatStr[i])){\n              Store.default.commit('setVariantIdx', i)\n              console.log(\"Set variant idx \" + i)\n              break\n            }\n          }\n        }\n      }\n    }\n  }\n  */\n}\n\nfunction isUniCosOrFunPresent (anAa, desc, resNum) {\n  const tag_open = '<toReplace_varInfo_' + anAa + '>'\n  const tag_close = '</toReplace_varInfo_' + anAa + '>'\n\n  const\tfirstOpenPos = desc.indexOf(tag_open)\n  const lastClosePos = desc.lastIndexOf(tag_close)\n\n  const description = desc.substring(firstOpenPos, lastClosePos)\n\n  if (description.match('UniProt') || description.match('FunVar') || description.match('COSMIC') || (window.AQUARIA.hasOwnProperty('variantStructs') && window.AQUARIA.variantStructs.hasOwnProperty(resNum) && window.AQUARIA.variantStructs[resNum].hasOwnProperty(anAa) && window.AQUARIA.variantStructs[resNum][anAa].hasOwnProperty('pdbs') && window.AQUARIA.variantStructs[resNum][anAa]['pdbs'].length > 0)) {\n    return true\n  }\n  return false\n}\n\nfunction handleCathPopups (f) {\n  return new Promise(function (resolve, reject) {\n    // handle this one.\n    if (typeof f.hc_go !== 'undefined' && f.hc_go.hasOwnProperty('data') && f.hc_go.data.hasOwnProperty('series') && f.hc_go.data.series.length >= 2) {\n      doThePlotting_v2('hc_go_div', f.hc_go.data.series[0].data, f.hc_go.data.series[1].data, '', f.hc_go.data.series[0].size, f.hc_go.data.series[0].dataLabels.color, f.hc_go.data.series[0].dataLabels.dist, f.hc_go.data.series[1].innerSize, f.hc_go.data.series[0].name, f.hc_go.data.series[1].name, f.hc_go.data.series[1].dataLabels.color).then(function () {\n        // console.log(\"CATH plot: 1\");\n        document.getElementById('hc_go').prepend(document.getElementById('hc_go_div'))\n      })\n        .catch(function (error) {\n          console.log('CATH plot: 2')\n          // if (!document.getElementById('hc_go_noData')){\n          // create element\n          createANewDiv_hcNoData('hc_go_noData').then(function () {\n            document.getElementById('hc_go').prepend(document.getElementById('hc_go_noData'))\n            document.getElementById('hc_go_noData').innerHTML = document.getElementById('hc_go_noData').innerHTML + '<br> <br> <center> No data</center>'\n            console.log('featureslist.showAnnotation ERROR ' + error)\n          })\n          // }\n        })\n    } else {\n      // no data.\n\n      // if (!document.getElementById('hc_go_noData')){\n      // create element\n      createANewDiv_hcNoData('hc_go_noData').then(function () {\n        document.getElementById('hc_go').prepend(document.getElementById('hc_go_noData'))\n        document.getElementById('hc_go_noData').innerHTML = document.getElementById('hc_go_noData').innerHTML + '<br> <br> <center> No data</center>'\n      })\n      // }\n      console.log('CATH plot: 3')\n\n      // document.getElementById('hc_go_div').style['background-color'] = \"white\";\n    }\n\n    if (typeof f.hc_ec !== 'undefined' && f.hc_ec.hasOwnProperty('data') && f.hc_ec.data.hasOwnProperty('series') && f.hc_ec.data.series.length >= 2) {\n      doThePlotting_v2('hc_ec_div', f.hc_ec.data.series[0].data, f.hc_ec.data.series[1].data, '', f.hc_ec.data.series[0].size, f.hc_ec.data.series[0].dataLabels.color, f.hc_ec.data.series[0].dataLabels.dist, f.hc_ec.data.series[1].innerSize, f.hc_ec.data.series[0].name, f.hc_ec.data.series[1].name, f.hc_ec.data.series[1].dataLabels.color).then(function () {\n        document.getElementById('hc_ec').prepend(document.getElementById('hc_ec_div'))\n      })\n        .catch(function (error) {\n          // if (!document.getElementById('hc_ec_noData')){\n          // create element\n          createANewDiv_hcNoData('hc_ec_noData').then(function () {\n            document.getElementById('hc_ec').prepend(document.getElementById('hc_ec_noData'))\n            document.getElementById('hc_ec_noData').innerHTML = document.getElementById('hc_ec_noData').innerHTML + '<br> <br> <center> No data</center>'\n            console.log('featureslist.showAnnotation ERROR ' + error)\n          })\n          // }\n        })\n    } else {\n      // no data\n      // document.getElementById('hc_ec').innerHTML = document.getElementById('hc_ec').innerHTML + ' <br> No data';\n      // if (!document.getElementById('hc_ec_noData')){\n      // create element\n      createANewDiv_hcNoData('hc_ec_noData').then(function () {\n        document.getElementById('hc_ec').prepend(document.getElementById('hc_ec_noData'))\n        document.getElementById('hc_ec_noData').innerHTML = document.getElementById('hc_ec_noData').innerHTML + '<br> <br> <center> No data</center>'\n      })\n        .catch(function () {\n\n        })\n      // }\n    }\n\n    if (typeof f.hc_species !== 'undefined' && f.hc_species.hasOwnProperty('data') && f.hc_species.data.hasOwnProperty('series') && f.hc_species.data.series.length >= 2) {\n      doThePlotting_v2('hc_species_div', f.hc_species.data.series[0].data, f.hc_species.data.series[1].data, '', f.hc_species.data.series[0].size, f.hc_species.data.series[0].dataLabels.color, f.hc_species.data.series[0].dataLabels.dist, f.hc_species.data.series[1].innerSize, f.hc_species.data.series[0].name, f.hc_species.data.series[1].name, f.hc_species.data.series[1].dataLabels.color).then(function () {\n        document.getElementById('hc_species').prepend(document.getElementById('hc_species_div'))\n      })\n        .catch(function (error) {\n          // if (!document.getElementById('hc_species_noData')){\n          // create element\n          createANewDiv_hcNoData('hc_species_noData').then(function () {\n            document.getElementById('hc_species').prepend(document.getElementById('hc_species_noData'))\n            document.getElementById('hc_species_noData').innerHTML = document.getElementById('hc_species_noData').innerHTML + '<br> <br> <center> No data</center>'\n\n            console.log('featureslist.showAnnotation ERROR ' + error)\n          })\n          // }\n        })\n    } else {\n      // no data\n      // document.getElementById('hc_species').innerHTML = document.getElementById('hc_species').innerHTML + ' <br> No data';\n      //\tif (!document.getElementById('hc_species_noData')){\n      // create element\n      createANewDiv_hcNoData('hc_species_noData').then(function () {\n        document.getElementById('hc_species').prepend(document.getElementById('hc_species_noData'))\n        document.getElementById('hc_species_noData').innerHTML = document.getElementById('hc_species_noData').innerHTML + '<br> <br> <center> No data</center>'\n      })\n      //\t}\n    }\n\n    resolve()\n  })\n}\n\nfunction updateTheStyleOfHc () {\n  const hcSeriesGroup = document.getElementsByClassName('highcharts-pie-series')\n  // console.log(\"The highcharts series group are: \");\n  // console.log(hcSeriesGroup);\n  // console.log(hcSeriesGroup.children('path'));\n\n  for (const key in hcSeriesGroup) {\n    if (hcSeriesGroup.hasOwnProperty(key)) {\n      /* hcSeriesGroup[key].childNodes.forEach(function(item, i){\n\t\t\t\tconsole.log(\"The item is\");\n\t\t\t\tconsole.log(item);\n\t\t\t}); */\n\n      const thePaths = hcSeriesGroup[key].getElementsByTagName('path')\n      // console.log(\"The paths are\");\n      // console.log(thePaths);\n\n      for (const pathKey in thePaths) {\n        if (thePaths.hasOwnProperty(pathKey)) {\n          // console.log('The path is ');\n          // console.log(thePaths[pathKey]);\n          // console.log(thePaths[pathKey].getAttribute('fill'));\n\n          const theColor = thePaths[pathKey].getAttribute('fill')\n\n          thePaths[pathKey].removeAttribute('fill')\n          thePaths[pathKey].setAttribute('style', 'fill:' + theColor)\n        }\n      }\n    }\n  }\n}\n\n// DAS annotation handling\n\nAQUARIA.currentAnnotationsIn3DViewer = new Array()\n\n/**\n * removes the current annotation track from the 3D viewer\n */\n\n function removeCurrentAnnotationFrom3DViewer () {\n  // remove existing Annotation\n  const currentAnnotationsIn3DViewer = AQUARIA.currentAnnotationsIn3DViewer\n  if (currentAnnotationsIn3DViewer !== undefined) {\n    for (var i in currentAnnotationsIn3DViewer) {\n      // API call\n      AQUARIA.panel3d.removeAnnotation(currentAnnotationsIn3DViewer[i].id,\n        currentAnnotationsIn3DViewer[i].annotationName)\n    }\n    currentAnnotationsIn3DViewer.length = 0\n  }\n}\n\n\nfunction removeCurrentAnnotationFrom3DViewer2 () {\n  // remove existing Annotation\n  const currentAnnotationsIn3DViewer = AQUARIA.currentAnnotationsIn3DViewer\n  if (currentAnnotationsIn3DViewer !== undefined) {\n    for (var i in currentAnnotationsIn3DViewer) {\n      // API call\n      if (AQUARIA.panel3d.seqId != currentAnnotationsIn3DViewer[i].id){\n        AQUARIA.panel3d.removeAnnotation(currentAnnotationsIn3DViewer[i].id,\n          currentAnnotationsIn3DViewer[i].annotationName)\n      }\n      else {/*\n        console.log(\"Should not be removing right?\")\n\n        var annotationToAdd = {\n          id: currentAnnotationsIn3DViewer[i].id,\n          annotationName: currentAnnotationsIn3DViewer[i].annotationName,\n          featureColours: currentAnnotationsIn3DViewer[i].featureColours,\n          featureNames: currentAnnotationsIn3DViewer[i].featureNames,\n          featureDescriptions: currentAnnotationsIn3DViewer[i].featureDescriptions,\n          featurePositions: currentAnnotationsIn3DViewer[i].featurePositions,\n          featureURLs: currentAnnotationsIn3DViewer[i].featureURLs,\n          featureURLtexts: currentAnnotationsIn3DViewer[i].featureURLtexts\n        }\n\n        AQUARIA.panel3d.removeAnnotation(currentAnnotationsIn3DViewer[i].id,\n          currentAnnotationsIn3DViewer[i].annotationName)\n        // readding\n\n        AQUARIA.currentAnnotationsIn3DViewer.push(annotationToAdd)\n        // API call\n        AQUARIA.panel3d.addAnnotation(annotationToAdd.id,\n          annotationToAdd.annotationName, annotationToAdd.featureColours,\n          featureNames, featureDescriptions, featurePositions,\n          featureURLs, featureURLtexts)\n        */\n      }\n    }\n    currentAnnotationsIn3DViewer.length = 0\n  }\n}\n\n/**\n * send the annotation track to the 3D viewer\n */\nfunction sentAnnotationTo3DViewer (annotations, trackNumber) {\n  // default is to send of all track lines unless trackNumber has been\n  // specified\n  trackNumber = typeof trackNumber !== 'undefined' ? trackNumber : -1\n\n  // remove existing Annotation\n  //removeCurrentAnnotationFrom3DViewer()\n\n  // send specific track if requested\n  if (trackNumber >= 0) {\n    reformatAndAddFeatureTo3DViewer(annotations, trackNumber)\n  } else {\n    // send all tracks\n    for (trackNumber in annotations.Tracks) {\n      reformatAndAddFeatureTo3DViewer(annotations, trackNumber)\n    }\n  }\n}\n\n/**\n * reformat an annotation track into the format required by the API\n */\nfunction reformatAndAddFeatureTo3DViewer (annotations, trackNumber) {\n  var featureColours = new Array()\n  var featureNames = new Array()\n  var featureDescriptions = new Array()\n  var featurePositions = new Array()\n  var featureURLs = new Array()\n  var featureURLtexts = new Array()\n  var featureCategories = {}\n  var lastColour = '#ffffff'\n  if (annotations != undefined) {\n    if (annotations.featureColours && annotations.featureColours.length > 0) {\n\t  lastColour = annotations.featureColours[0]\n    }\n    // send specified track only\n    for (var j in annotations.Tracks[trackNumber]) {\n      // only transfer features flagged as visible\n      if (annotations.Tracks[trackNumber][j].show) {\n        if (annotations.Class.color !== 'multi_color') {\n          // 0.3 o\n          var alphaColor = '#4d' +\n\t\t\t\t\t\tannotations.Tracks[trackNumber][j].color.substring(1)\n        }\n\t\t  if (annotations.Tracks[trackNumber][j].color) {\n          //\t\t    lastColour = annotations.Tracks[trackNumber][j].color;\n\t        featureColours.push(annotations.Tracks[trackNumber][j].color)\n        } else {\n          featureColours.push(lastColour)\n\t    }\n\n        //\t\t\t\telse {\n        //\t        featureColours.push(annotations.Tracks[trackNumber][j].color);\n        //\n        //\t\t\t\t}\n\n        featureNames.push(annotations.Tracks[trackNumber][j].label)\n        featureDescriptions.push(annotations.Tracks[trackNumber][j].desc)\n        featurePositions.push(annotations.Tracks[trackNumber][j].start +\n\t\t\t\t\t':' + annotations.Tracks[trackNumber][j].end)\n\n        fURLs = new Array()\n        fURLtxts = new Array()\n\n        for (var k in annotations.Tracks[trackNumber][j].urls) {\n          fURLs.push(annotations.Tracks[trackNumber][j].urls[k].href)\n          fURLtxts.push(annotations.Tracks[trackNumber][j].urls[k].text)\n        }\n        featureURLs.push(fURLs)\n        featureURLtexts.push(fURLtxts)\n      }\n      ;\n    }\n\n    // console.log('In reformat and display')\n    // console.log(annotations)\n\n    var protId = annotations.ProteinID;\n    if (annotations.hasOwnProperty('SeqHash') && annotations.SeqHash != ''){\n      for (let i =0; i < AQUARIA.panel3d.attributes.sequences.length; i++){\n        if (annotations.SeqHash == AQUARIA.panel3d.attributes.sequences[i].uniprot_hash){\n          protId = AQUARIA.panel3d.attributes.sequences[i].primary_accession;\n          annotations.ProteinID = protId\n          // console.log('Correct prot id is: (1) ' + protId)\n          // console.log(AQUARIA.panel3d.attributes.sequences[i])\n        }\n      }\n    }\n\n\n\n    var annotationToAdd = {\n      id: annotations.ProteinID,\n      annotationName: annotations.Category,\n      featureColours: featureColours,\n      featureNames: featureNames,\n      featureDescriptions: featureDescriptions,\n      featurePositions: featurePositions,\n      featureURLs, featureURLs,\n      featureURLtexts, featureURLtexts\n    }\n\n    // console.log('3d viewer annotation to add ' + annotations.ProteinID)\n    // Do the checking\n    // if (AQUARIA.panel3d.attributes.sequences[0].uniprot_hash == ){\n\n    // }\n\n    // if (annotations.ProteinID == protId){\n      AQUARIA.currentAnnotationsIn3DViewer.push(annotationToAdd)\n      // API call\n      console.log('PASTOR VEAL')\n      console.log(annotationToAdd)\n      // AQUARIA.currentAnnotationsIn3DViewer.push(annotationToAdd)\n\n      if (Array.isArray(annotationToAdd.id)){\n        AQUARIA.panel3d.addAnnotation(annotationToAdd.id[0],\n          annotationToAdd.annotationName, featureColours,\n          featureNames, featureDescriptions, featurePositions,\n          featureURLs, featureURLtexts)\n\n        console.log(\"Case 1 is here: \" + annotationToAdd.id)\n      }\n      else {\n        AQUARIA.panel3d.addAnnotation(annotationToAdd.id,\n          annotationToAdd.annotationName, featureColours,\n          featureNames, featureDescriptions, featurePositions,\n          featureURLs, featureURLtexts)\n\n          console.log(\"Case 1 is here: (2) \" + annotationToAdd.id)\n      }\n\n    // }\n\n  }\n}\n\nmodule.exports.updateFeatureUI = updateFeatureUI\nmodule.exports.updateFeatureTabTitle = updateFeatureTabTitle\n","module.exports = __webpack_public_path__ + \"img/aquaria-symbol-01.057e39d9.svg\";","module.exports = __webpack_public_path__ + \"img/up.64c3e14c.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AboutAlignment.vue?vue&type=style&index=0&id=8e892dc6&scoped=true&lang=css&\"","module.exports = __webpack_public_path__ + \"img/MS-01.f169151b.svg\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NodeLoader.vue?vue&type=style&index=0&id=26c15231&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MatchingStructures.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TreeView.vue?vue&type=style&index=0&lang=css&\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAQCAYAAADqDXTRAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNq8020KgCAMBmAb0TGDQLyY0Ek6SbcoEHKg0YfWttLBK+iczy8bY8yilOpUvVrBL9rHVQLR0Yhan6EC7IJjIRyUhncQN3BolIJP4BUtAd/AFPonnARzaIT7D7AL8zbVhIfBUQhHcMxdgJcHuPArSEE5MAmkohSYDHLQJ5gFctEUzAYl6BFeJSBWK/yHCE0+s2R4E2AAhOs7b2YKWEMAAAAASUVORK5CYII=\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Playlist.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PopUp.vue?vue&type=style&index=0&id=55704a1a&scoped=true&lang=css&\"","import d3 from 'd3'\nimport $ from 'jquery'\nimport * as Panels from '../../AquariaLayout/helpers/hidePanels'\nimport * as common from '../../AquariaLayout/helpers/common'\nimport * as fetchFeature from './fetch_features'\nvar Highcharts = require('./highstocks.js')\nimport Store from '../../../store/index'\n\nvar firstSpecifiedPos = -1;\nvar firstSpecifiedId = \"\";\nvar isPopupOpened = false\n\nexport function createFeatureMap (datum, extServerIds_, isAuto) {\n\n  // console.log('DOES IT COME HERE .... FEATURE MAP')\n  document.querySelectorAll(\"#selectedCluster [id*='r_'] rect\").forEach(function (part) {\n    part.style.fill = '#a5a5a5'\n    part.style.stroke = '#a5a5a5'\n  })\n  document.querySelectorAll(\"#selectedCluster [id*='r_'] polygon\").forEach(function (part) {\n    part.style.fill = '#a5a5a5'\n    part.style.stroke = '#a5a5a5'\n  })\n  //   window.AQUARIA.showMatchingStructures.drawCoverageMap(window.AQUARIA.showMatchingStructures.selectedCluster)\n  // this.width = document.getElementById('structureviewer').offsetWidth / 1.2 - window.AQUARIA.margin.right - window.AQUARIA.margin.left\n  // this.height = 40 - window.AQUARIA.margin.top - window.AQUARIA.margin.bottom + 35 // height\n  this.width = document.getElementById('structure-viewer').offsetWidth / 1.2 - window.AQUARIA.margin.right - window.AQUARIA.margin.left\n  this.height = 40 - window.AQUARIA.margin.top - window.AQUARIA.margin.bottom + 35 // height\n  this.datum = datum\n  var outerdiv = d3.select('#selectedFeature').append('div').attr('id', 'outerFeatureMap')\n  this.drawTrack(this.datum, this.createSVGforFeature(outerdiv, '100vw', this.height + 10, this.width + 1), extServerIds_, isAuto)\n  d3.select('#outerFeatureMap > svg').attr('class', 'loadedFeature')\n}\n\n// Create SVG for selected feature\nexport function createSVGforFeature (outerdiv, width, height, viewboxWidth) {\n  this.nusvg = outerdiv.append('svg').attr('width', width)\n    .attr('height', height)\n    .attr('viewBox', '0 0 ' + viewboxWidth + ' ' + height)\n    .attr('preserveAspectRatio', 'none')\n  return this.nusvg\n}\n\n// Draw selected feature track\nexport function drawTrack (datum, svg, extServerIds_, isAuto) {\n  var _this = this\n  var features = []\n  this.nusvg = svg\n  const AQUARIA = window.AQUARIA\n  if (AQUARIA.currentFeature.oid && datum && datum.Tracks && datum.Tracks.length > 1) {\n    features[0] = datum.Tracks[AQUARIA.currentFeature.oid]\n  } else if (datum && datum.Tracks) {\n    features = datum.Tracks\n  }\n\n  this.nusvg.on('click', function () {\n    if (d3.select(this).attr('class').includes('loaded')) {\n      // deselect feature (it's already displayed)\n    //   if (document.querySelector('.featureHeader.actived')) {\n    //     document.querySelector('.featureHeader.actived').click()\n    //   }\n      if (window.location.hash.includes('Features')) {\n        d3.select('svg.loaded').classed('loaded', false)\n        Store.commit('showLoader', true)\n        Store.commit('setLoaderMsg', 'Removing feature...')\n        Store.commit('showLoader', false)\n        // Stu hack to detect feature changes\n        if (typeof AQUARIA.onFeatureChange === 'function') {\n          AQUARIA.onFeatureChange(null, 0)\n        }\n        _this.removeCurrentAnnotationFrom3DViewer()\n        AQUARIA.currentFeature.oid = null\n        AQUARIA.currentFeature.data = null\n        document.querySelector('#outerFeatureMap').remove()\n        document.querySelector('#popup').style.display = 'none'\n        AQUARIA.showMatchingStructures.showMap(AQUARIA.showMatchingStructures.cluster)\n        Panels.hidePanels()\n      } else {\n\n      }\n    } else { // console.log(\"clicked to display feature\");\n      document.querySelector('.featureHeader.actived').click()\n      if (document.querySelector('#outerFeatureMap')) {\n        document.querySelector('#outerFeatureMap').remove()\n      }\n      var oid = d3.select(this).attr('id').split('_')[2]\n      Store.commit('showLoader', true)\n      Store.commit('setLoaderMsg', 'Loading feature...')\n      Store.commit('showLoader', false)\n      if (datum.Server !== 'Added Features') {\n        AQUARIA.addedFeature = false\n      }\n      AQUARIA.passFeature(datum, oid, this)\n      // Stu hack to detect feature changes\n      if (typeof AQUARIA.onFeatureChange === 'function') {\n        AQUARIA.onFeatureChange(datum, oid)\n      }\n      // console.log(\"Datum\");\n      // console.log(datum);\n      // console.log(oid);\n      d3.selectAll('svg.loaded rect.feature').attr('fill', '#a4abdf')\n      d3.select('svg.loaded').classed('loaded', false)\n      d3.select(this).attr('class', 'loaded') // console.log(\"it's \" + d3.select(this).attr(\"class\"));\n      _this.createFeatureMap(datum, extServerIds_)\n      Panels.hidePanels()\n    }\n  })\n\n  this.nusvg.append('rect')\n    .attr('width', this.width + AQUARIA.margin.left)\n    .attr('height', 25)\n    .attr('class', 'bg')\n    .attr('fill', 'none')\n\n  for (var o in features) {\n    // draw outline of the whole chain\n    this.nusg = this.nusvg.append('g').attr('transform', 'translate(0 ,20)')\n    // add center line\n    this.nusg.append('rect')\n      .attr('width', this.width)\n      .attr('height', 1)\n      .attr('transform', 'translate(0,13)')\n      .attr('class', 'insertion')\n  }\n\n\n  for (var p in features[o]) {\n    if (isPopupOpened == false && isAuto && typeof isAuto !== 'undefined' && isAuto == true){\n        console.log(\"Out of the loop here \" )\n        console.log(features)\n        var arrayPositions = getTrackWithOrder0Label(features)\n        if (arrayPositions.o != -1 && arrayPositions.p != -1){\n          for (var i =0; i<features[arrayPositions.o].length; i++){\n            this.drawFeatures(i, arrayPositions.o, features, extServerIds_)\n          }\n          // Apply colour\n          d3.selectAll('#selectedFeature rect.feature').attr(\n            'fill', function () {\n              return d3.select(this).attr('color')\n            })\n\n            // Dispatch first event.\n            firstSpecifiedId = 'r_' + arrayPositions.o + '_' + arrayPositions.p\n\n            var element = document.getElementById(firstSpecifiedId)\n            // console.log(\"The first specified element is \" + element)\n            var event = new MouseEvent('mouseover', {\n              'view': window,\n              'bubbles': true,\n              'cancelable': true\n            });\n\n            element.dispatchEvent(event);\n            d3.select('#' + firstSpecifiedId).attr('stroke-width', '0px')\n\n        }\n        else {\n          this.drawFeatures(p, o, features, extServerIds_, this)\n        }\n        isPopupOpened = true\n    }\n    else {\n      this.drawFeatures(p, o, features, extServerIds_, this)\n\n    }\n  }\n\n\n  d3.selectAll('#selectedFeature rect.feature').attr(\n    'fill', function () {\n      return d3.select(this).attr('color')\n    })\n\n\n\n}\n\nfunction getTrackWithOrder0Label(features) { // if exists\n  // return new Promise(function(resolve, reject){\n    var varRes = Store.getters.getVariantResidues\n\n    var origFeatStr = ''\n    var resNums = Object.keys(varRes)\n    for (var i=0; i < resNums.length; i++){\n      if (varRes[resNums[i]].hasOwnProperty('order') && varRes[resNums[i]].order.includes(0)){\n        var idx = varRes[resNums[i]].order.indexOf(0)\n        if (idx !== -1) {\n          origFeatStr = varRes[resNums[i]].theOrigFeatStr[idx]\n        }\n      }\n    }\n\n    var values = {o: -1, p: -1}; var featNames = {}; // dict{featName} => [i, j]\n    if (origFeatStr != '' && features.length > 0){\n      for (var i=0; i < features.length; i++){\n        for (var j=0; j<features[i].length; j++){\n          featNames[features[i][j].name] = [i, j]\n          if (features[i][j].name.includes(origFeatStr)) {\n           values.o = i;\n           values.p = j;\n\n           // console.log(\"YAY THE FEATURE STRING WAS FOUND \" + values.o + \" \" + values.p)\n          }\n        }\n        /*\n        if (i == features.length - 1){\n          resolve(values)\n        }\n        */\n      }\n    }\n\n\n\n    var minOrder = -1;\n\n\n    if (values.o == -1 && values.p == -1){\n\n      for (var i=0; i < features.length; i++){\n        for (var j=0; j<features[i].length; j++){\n          featNames[features[i][j].name] = [i, j]\n        }\n      }\n\n      console.log(\"The feat name array is \") \n      console.log(featNames)\n\n      var featNames_keys = Object.keys(featNames)\n      for (var i=0; i < resNums.length; i++){\n        for (var j=0; j < varRes[resNums[i]].theOrigFeatStr.length; j++){\n          for (var k=0; k < featNames_keys.length; k++){\n            console.log(\"This value is \" + varRes[resNums[i]].theOrigFeatStr[j] + \" \" + varRes[resNums[i]].order[j])\n            if (featNames_keys[k].includes(varRes[resNums[i]].theOrigFeatStr[j])){\n\n              if (minOrder == -1){\n                minOrder = varRes[resNums[i]].order[j]\n                values.o = featNames[featNames_keys[k]][0] \n                values.p = featNames[featNames_keys[k]][1] \n              }\n              else if (varRes[resNums[i]].order[j] < minOrder) { \n                minOrder = varRes[resNums[i]].order[j]\n                values.o = featNames[featNames_keys[k]][0] \n                values.p = featNames[featNames_keys[k]][1] \n              }\n\n            }\n          }\n          // varRes[resNum[i]].theOrigFeatStr[j]\n        }\n        \n        /* if (varRes[resNums[i]].hasOwnProperty('order') && varRes[resNums[i]].order.includes(0)){\n          var idx = varRes[resNums[i]].order.indexOf(0)\n          if (idx !== -1) {\n            origFeatStr = varRes[resNums[i]].theOrigFeatStr[idx]\n          }\n        } */\n      }\n    }\n    /*\n    else {\n      resolve(values)\n    }*/\n    console.log(\"Values is \" + minOrder)\n    console.log(values)\n\n    return values\n  // })\n}\n\n// Draw feature by residue\nexport function drawFeatures (p, o, features, extServerIds_) {\n  var offsetWidth = document.getElementById('structure-viewer').offsetWidth\n  var seqLength = window.AQUARIA.showMatchingStructures.sequence.length\n\n  var myScale = d3.scale.linear().domain([1, seqLength]).range([1, document.getElementById('structure-viewer').offsetWidth / 1.2 - window.AQUARIA.margin.right - window.AQUARIA.margin.left - 5])\n  var trans_x = myScale(parseInt(features[o][p].start))\n  // var trans_x = Math.floor(parseInt(features[o][p].start)/seqLength * (offsetWidth - 300)) // ((parseInt(features[o][p].start)) * (parseFloat(window.AQUARIA.srw)))\n  this.nusg.append('rect')\n    .attr('width', function () { return (parseInt((features[o][p].size + 1) * window.AQUARIA.coverageMapsrw) > 2) ? parseInt((features[o][p].size + 1) * window.AQUARIA.coverageMapsrw) : 2 })\n    .attr('height', 14)\n    .attr('id', 'r_' + o + '_' + p)\n    .attr('x', trans_x)\n    .attr('transform', 'translate(0,6)')\n    .attr('color', features[o][p].color).attr('fill', '#a4abdf')\n    .attr('class', 'feature')\n    .on('mouseover', createMouseOverCallback(features[o][p], extServerIds_))\n    .on('mouseout',\n      function () {\n        var ID = d3.select(this).attr('id')\n        return d3.select(this).call(mouseoutFeature, ID)\n      })\n    // .attr('fill-opacity', function () {\n    //   return (this.datum.Class.track === 'single_track') ? 0.3 : 1\n    // })\n}\n\nexport function createMouseOverCallback (feature, extServerIds_) {\n  return function () {\n    // console.log(\">>>>>>>>>> over here ....???\");\n    var ID = d3.select(this).attr('id')\n    d3.select(this).call(mouseoverFeature, feature, ID, extServerIds_)\n  }\n}\n\nconst oneAaCodes = ['A', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'K', 'L', 'M', 'N', 'P', 'Q', 'R', 'S', 'T', 'V', 'W', 'Y']\n\n// show feature pop-up\nfunction showAnnotation (f, eid, extServerIds_) {\n\n  // console.log('showAnnotation.f is ')\n  // console.log(f)\n  // console.log(eid)\n\n  var urlhtml = ''\n  if (f.urls.length > 0) {\n    // var lnx = f.urls.split(\";\");\n    urlhtml = '<p>'\n    for (var i = 0; i < f.urls.length; i++) {\n      urlhtml += \"<a href='\" + f.urls[i].href + \"' target='_blank'>\" + f.urls[i].text + '</a>'\n    }\n    urlhtml += '</p>'\n  }\n  // $('div.popup').remove()\n  var balloon = '';\n  // var balloon = '<div style=\"display: none;\"> <div id=\"divVariantInfo\" class=\"aaLightBg\"></div><div id=\"divVI_chosen\"></div> <div id=\"divVI_posInfo\"><hr class=\"anAaHr\"><b>Residue ' + f.start + '</b></div> '\n\n  let oldAa = ''\n  if (f.name.includes('&#8201;&#8594;&#8201;')) {\n    oldAa = f.name.replace(/^.*\\(/, '')\n    // eslint-disable-next-line\n    oldAa = oldAa.replace(/\\&.*$/, '')\n  }\n  let btnsDiv = '<div id=\"buttons_eachAa\"> <b>See also:</b><p class=\"pAaColor\"> ' + oldAa + ' &rarr;</p>'\n  // balloon = balloon + \"<div id='divVI_varInfo'>\"\n  oneAaCodes.forEach(function (anAa, _i) {\n    if (anAa !== oldAa) {\n      // balloon = balloon + \"<div id='divVI_varInfo_\" + anAa + \"'></div>\"\n      const isUniCosOrFun = isUniCosOrFunPresent(anAa, f.desc, f.start)\n      btnsDiv = btnsDiv + \"<button id='btnVI_\" + anAa + \"'\"\n      if (isUniCosOrFun === true) {\n        btnsDiv = btnsDiv + ' class=\"btnAaBold_b\"> <b>' + anAa + '</b> '\n      } else {\n        btnsDiv = btnsDiv + ' class=\"btnAaBold\"> ' + anAa\n      }\n      btnsDiv = btnsDiv + '</button>'\n    }\n  })\n\n//  balloon = balloon + '</div>'\n  btnsDiv = btnsDiv + '</div>'\n//  balloon = balloon + btnsDiv\n//  balloon = balloon + '</div><div class=\"balloon\" id=\"balloon\"><span class=\"x\">&nbsp;</span><p id=\"popupheader\">'\n\n  if (f.name.includes('span_missenseHeading')) {\n    if (typeof extServerIds_ !== 'undefined') {\n      let isAnyFalse = false\n      for (const serverId in extServerIds_) {\n        if (extServerIds_[serverId] === false) {\n          isAnyFalse = true\n        }\n      }\n      if (isAnyFalse === true) {\n        // balloon = balloon + '<img src=\"/images/ajax-loader1.gif\" alt=\"Loading...\"  width=15/> '\n      }\n      // console.log(extServerIds_)\n    }\n  }\n  let balloonTitle = '<b>' + f.label + '</b>'\n\n  // balloon = balloon + f.label\n  if (!f.name.includes('span_missenseHeading')) {\n    // balloon = balloon + ' ('\n    balloonTitle = balloonTitle + ' ('\n    if (f.start === f.end) {\n      balloonTitle = balloonTitle + 'Residue ' + f.start\n      // Store.commit('setPopupTitle', 'Residue ' + f.start)\n      // balloon = balloon + 'Residue ' + f.start\n    } else {\n      balloonTitle = balloonTitle + 'Residues ' + f.start + '-' + f.end\n      // balloon = balloon + 'Residues ' + f.start + '-' + f.end\n    }\n    // balloon = balloon + ') '\n    balloonTitle = balloonTitle + ') '\n  }\n\n  if (!f.name.includes('span_missenseHeading')) {\n    // balloon = balloon + '<br/>'\n  }\n\n  // balloon = balloon.append(f.desc);\n  // balloon = balloon + f.desc + '</p>' + urlhtml + '</div>'\n  let balloonText = f.desc + \"<br>\" + urlhtml;\n  if (f.name.includes('span_missenseHeading')){\n    if (f.start != f.end){\n      Store.commit('setVariant', f.start + '-' + f.end)\n      Store.commit('setPopupTitle', f.label)\n      getIdxInVarRes(f.start + '-' + f.end, f.label)\n    }\n    else {\n      Store.commit('setVariant', f.start)\n      Store.commit('setPopupTitle', f.label)\n      getIdxInVarRes(f.start, f.label)\n    }\n  }\n  else {\n    Store.commit('setVariant', -1)\n    Store.commit('setPopupTitle', balloonTitle)\n    Store.commit('setPopupText', balloonText)\n    Store.commit('setVariantIdx', -1)\n  }\n\n\n\n  // Store.commit('setPopupText', balloonText)\n  // d3.select('#popuptext')\n  //   // .append('div')\n  //   // .attr('class', 'popup')\n  //   .html(balloon)\n\n  // $('div.popup').fadeIn()\n  // var popheight = $('div.popup').innerHeight()\n\n  if (Object.prototype.hasOwnProperty.call(f, 'hc_go') && Object.prototype.hasOwnProperty.call(f, 'hc_ec') && Object.prototype.hasOwnProperty.call(f, 'hc_species')) {\n    // console.log('CATH plot data')\n    // console.log(f)\n    handleCathPopups(f).then(function () {\n      updateTheStyleOfHc()\n    })\n  } else {\n    console.log('CATH plot no data')\n    // console.log(f)\n  }\n\n  var fpos = document.querySelector('#' + eid).getBoundingClientRect()\n  var svgdim = document.querySelector('#' + eid).getBBox()\n  var fwidth = svgdim.width\n  // var fleft = d3.select('#' + eid).attr('transform').split('(')[1].split(',')[0]\n  // var ftop = fpos.top\n  common.appendPopup(balloon, fpos, fwidth, true)\n\n  // var bleft = parseInt(fpos.left + (fwidth / 2) - 235)\n  // var btop = parseInt(fpos.top - popheight)\n\n  // if (bleft < 0) {\n  //   bleft = 0\n  //   document.querySelector('div#popup').style.backgroundPositionX = '0px'\n  // } else if (parseInt(fpos.left + (fwidth / 2)) + (470 / 2) > window.innerWidth) {\n  //   bleft = bleft - 470 / 2\n  //   document.querySelector('div#popup').style.backgroundPositionX = 'right'\n  // } else {\n  //   document.querySelector('div#popup').style.backgroundPositionX = 'center'\n  // }\n\n  // $('div#popup').css({\n  //   left: bleft + 'px',\n  //   top: btop + 'px',\n  //   width: '470px'\n  // })\n\n  // // Click on X to close popup\n  // $('span.x').on('click', function () {\n  //   $('div.popup').fadeOut()\n  // })\n\n  // $('div.popup').on('hover', function () {\n  //   clearTimeout(s)\n  // }, function () {\n  //   s = setTimeout(function () {\n  //     $('div#popup').fadeOut()\n  //   }, 500)\n  // })\n}\n\nfunction getIdxInVarRes(resNum, popupText){\n  var varRes = Store.getters.getVariantResidues\n  // console.log(\"GAMMA \" + resNum + \" \" + popupText)\n  // console.log(varRes)\n\n  if (varRes.hasOwnProperty(resNum) && varRes[resNum].hasOwnProperty('theOrigFeatStr')){\n    for (let i=0; i < varRes[resNum].theOrigFeatStr.length; i++){\n      if (popupText.includes(varRes[resNum].theOrigFeatStr[i])){\n        Store.commit('setVariantIdx', i)\n        console.log(\"Set variant idx \" + i)\n        break\n      }\n    }\n  }\n  /*\n  else { // handle the ranges (when seems like residue is only plotted on a single residue in track)\n    let resNums = Object.keys(varRes)\n    for (let j =0; j < resNums.length; j++) {\n      if (resNums[j].match(\"-\")) {\n        let arr = resNums[j].split(\"-\")\n        if (arr[0] == resNum){\n          for (let i=0; i < varRes[resNums[j]].theOrigFeatStr.length; i++){\n            if (popupText.includes(varRes[resNums[j]].theOrigFeatStr[i])){\n              Store.commit('setVariantIdx', i)\n              console.log(\"Set variant idx \" + i)\n              break\n            }\n          }\n        }\n      }\n    }\n  }\n  */\n}\n\nvar t, s\nexport function mouseoverFeature (el, f, eid, extServerIds_) {\n  t = setTimeout(function () {\n    showAnnotation(f, eid, extServerIds_)\n  }, 500)\n  d3.select('#' + eid).attr('stroke-width', '2px').attr('stroke', 'white')\n}\n\n// Mouseout from feature\nexport function mouseoutFeature (el, eid) {\n  clearTimeout(t)\n  d3.select('#' + eid).attr('stroke-width', '0px')\n  s = setTimeout(function () {\n    moveTheDiv()\n      .then(function () {\n        $('div.popup').fadeOut()\n      })\n      .catch(\n        function (error) {\n          console.log(error)\n        })\n  }, 500)\n}\n\nexport function moveTheDiv () {\n  return new Promise(function (resolve, reject) {\n    const aSuperFamFeature = document.getElementById('superFamCharts_0_go')\n    document.getElementById('superFamCharts').append(aSuperFamFeature)\n  })\n}\n\nfunction isUniCosOrFunPresent (anAa, desc, resNum) {\n  // console.log('These values are: ' + anAa + ' ' + resNum)\n  const tagOpen = '<toReplace_varInfo_' + anAa + '>'\n  const tagClose = '</toReplace_varInfo_' + anAa + '>'\n\n  const firstOpenPos = desc.indexOf(tagOpen)\n  const lastClosePos = desc.lastIndexOf(tagClose)\n\n  const description = desc.substring(firstOpenPos, lastClosePos)\n\n  if (description.match('UniProt') || description.match('FunVar') || description.match('COSMIC') || (window.AQUARIA.hasOwnProperty('variantStructs') && window.AQUARIA.variantStructs && window.AQUARIA.variantStructs.hasOwnProperty(resNum) && window.AQUARIA.variantStructs[resNum].hasOwnProperty(anAa) && window.AQUARIA.variantStructs[resNum][anAa].hasOwnProperty('pdbs') && window.AQUARIA.variantStructs[resNum][anAa]['pdbs'].length > 0)) {\n    return true\n  }\n  return false\n}\n\n// DAS annotation handling\n\n/**\n * removes the current annotation track from the 3D viewer\n */\nexport function removeCurrentAnnotationFrom3DViewer () {\n  // remove existing Annotation\n  const currentAnnotationsIn3DViewer = window.AQUARIA.currentAnnotationsIn3DViewer\n  if (currentAnnotationsIn3DViewer !== undefined) {\n    for (var i in currentAnnotationsIn3DViewer) {\n      // API call\n      window.AQUARIA.panel3d.removeAnnotation(currentAnnotationsIn3DViewer[i].id,\n        currentAnnotationsIn3DViewer[i].annotationName)\n    }\n    currentAnnotationsIn3DViewer.length = 0\n  }\n}\n\n// ////////////////////// CATH in popup\n\nfunction handleCathPopups (f) {\n  return new Promise(function (resolve, reject) {\n    // console.log(\"here...??\");\n    // handle this one.\n    if (typeof f.hc_go !== 'undefined' && Object.prototype.hasOwnProperty.call(f.hc_go, 'data') && Object.prototype.hasOwnProperty.call(f.hc_go.data, 'series') && f.hc_go.data.series.length >= 2) {\n      doThePlottingV2('hc_go_div', f.hc_go.data.series[0].data, f.hc_go.data.series[1].data, '', f.hc_go.data.series[0].size, f.hc_go.data.series[0].dataLabels.color, f.hc_go.data.series[0].dataLabels.dist, f.hc_go.data.series[1].innerSize, f.hc_go.data.series[0].name, f.hc_go.data.series[1].name, f.hc_go.data.series[1].dataLabels.color).then(function () {\n        // console.log('CATH plot: 1')\n        document.getElementById('hc_go').prepend(document.getElementById('hc_go_div'))\n      })\n        .catch(function (error) {\n          // console.log(\"CATH plot: 2\");\n          // if (!document.getElementById('hc_go_noData')){\n          // create element\n          createANewDivHcNoData('hc_go_noData').then(function () {\n            document.getElementById('hc_go').prepend(document.getElementById('hc_go_noData'))\n            document.getElementById('hc_go_noData').innerHTML = document.getElementById('hc_go_noData').innerHTML + '<br> <br> <center> No data</center>'\n            console.log('featureslist.showAnnotation ERROR ' + error)\n          })\n        // }\n        })\n    } else {\n      // no data.\n\n      // if (!document.getElementById('hc_go_noData')){\n      // create element\n      createANewDivHcNoData('hc_go_noData').then(function () {\n        document.getElementById('hc_go').prepend(document.getElementById('hc_go_noData'))\n        document.getElementById('hc_go_noData').innerHTML = document.getElementById('hc_go_noData').innerHTML + '<br> <br> <center> No data</center>'\n      })\n      // }\n      // console.log('CATH plot: 3')\n\n      // document.getElementById('hc_go_div').style['background-color'] = \"white\";\n    }\n\n    if (typeof f.hc_ec !== 'undefined' && Object.prototype.hasOwnProperty.call(f.hc_ec, 'data') && Object.prototype.hasOwnProperty.call(f.hc_ec.data, 'series') && f.hc_ec.data.series.length >= 2) {\n      doThePlottingV2('hc_ec_div', f.hc_ec.data.series[0].data, f.hc_ec.data.series[1].data, '', f.hc_ec.data.series[0].size, f.hc_ec.data.series[0].dataLabels.color, f.hc_ec.data.series[0].dataLabels.dist, f.hc_ec.data.series[1].innerSize, f.hc_ec.data.series[0].name, f.hc_ec.data.series[1].name, f.hc_ec.data.series[1].dataLabels.color).then(function () {\n        document.getElementById('hc_ec').prepend(document.getElementById('hc_ec_div'))\n      })\n        .catch(function (error) {\n          // if (!document.getElementById('hc_ec_noData')){\n          // create element\n          createANewDivHcNoData('hc_ec_noData').then(function () {\n            document.getElementById('hc_ec').prepend(document.getElementById('hc_ec_noData'))\n            document.getElementById('hc_ec_noData').innerHTML = document.getElementById('hc_ec_noData').innerHTML + '<br> <br> <center> No data</center>'\n            console.log('featureslist.showAnnotation ERROR ' + error)\n          })\n          // }\n        })\n    } else {\n      // no data\n      // document.getElementById('hc_ec').innerHTML = document.getElementById('hc_ec').innerHTML + ' <br> No data';\n      // if (!document.getElementById('hc_ec_noData')){\n      // create element\n      createANewDivHcNoData('hc_ec_noData').then(function () {\n        document.getElementById('hc_ec').prepend(document.getElementById('hc_ec_noData'))\n        document.getElementById('hc_ec_noData').innerHTML = document.getElementById('hc_ec_noData').innerHTML + '<br> <br> <center> No data</center>'\n      })\n        .catch(function () {\n        })\n      // }\n    }\n\n    if (typeof f.hc_species !== 'undefined' && Object.prototype.hasOwnProperty.call(f.hc_species, 'data') && Object.prototype.hasOwnProperty.call(f.hc_species.data, 'series') && f.hc_species.data.series.length >= 2) {\n      doThePlottingV2('hc_species_div', f.hc_species.data.series[0].data, f.hc_species.data.series[1].data, '', f.hc_species.data.series[0].size, f.hc_species.data.series[0].dataLabels.color, f.hc_species.data.series[0].dataLabels.dist, f.hc_species.data.series[1].innerSize, f.hc_species.data.series[0].name, f.hc_species.data.series[1].name, f.hc_species.data.series[1].dataLabels.color).then(function () {\n        document.getElementById('hc_species').prepend(document.getElementById('hc_species_div'))\n      })\n        .catch(function (error) {\n        // if (!document.getElementById('hc_species_noData')){\n        // create element\n          createANewDivHcNoData('hc_species_noData').then(function () {\n            document.getElementById('hc_species').prepend(document.getElementById('hc_species_noData'))\n            document.getElementById('hc_species_noData').innerHTML = document.getElementById('hc_species_noData').innerHTML + '<br> <br> <center> No data</center>'\n\n            console.log('featureslist.showAnnotation ERROR ' + error)\n          })\n          // }\n        })\n    } else {\n      createANewDivHcNoData('hc_species_noData').then(function () {\n        document.getElementById('hc_species').prepend(document.getElementById('hc_species_noData'))\n        document.getElementById('hc_species_noData').innerHTML = document.getElementById('hc_species_noData').innerHTML + '<br> <br> <center> No data</center>'\n      })\n    }\n    resolve()\n  })\n}\n\nfunction updateTheStyleOfHc () {\n  const hcSeriesGroup = document.getElementsByClassName('highcharts-pie-series')\n  // console.log(\"The highcharts series group are: \");\n  // console.log(hcSeriesGroup);\n  // console.log(hcSeriesGroup.children('path'));\n\n  for (const key in hcSeriesGroup) {\n    if (Object.prototype.hasOwnProperty.call(hcSeriesGroup, key)) {\n      /* hcSeriesGroup[key].childNodes.forEach(function(item, i){\n      console.log(\"The item is\");\n      console.log(item);\n      }); */\n\n      const thePaths = hcSeriesGroup[key].getElementsByTagName('path')\n      // console.log(\"The paths are\");\n      // console.log(thePaths);\n\n      for (const pathKey in thePaths) {\n        if (Object.prototype.hasOwnProperty.call(thePaths, pathKey)) {\n          // console.log('The path is ');\n          // console.log(thePaths[pathKey]);\n          // console.log(thePaths[pathKey].getAttribute('fill'));\n\n          const theColor = thePaths[pathKey].getAttribute('fill')\n\n          thePaths[pathKey].removeAttribute('fill')\n          thePaths[pathKey].setAttribute('style', 'fill:' + theColor)\n        }\n      }\n    }\n  }\n}\n\nfunction doThePlottingV2 (divId, theSeriesDataInner, theSeriesDataOuter, theTitle, theSizeInner, labelColInner, labelDistInner, innerSizeOuter, nameInner, nameOuter, labelColOuter) {\n  return new Promise(function (resolve, reject) {\n    createANewDivHcNoData(divId).then(function () {\n      // First add new Div.\n      try {\n        Highcharts.chart(divId, {\n          chart: {\n            type: 'pie',\n            margin: 0\n          },\n          title: {\n            text: theTitle\n          }, /*\n          subtitle: {\n          text: 'Source: <a href=\"http://statcounter.com\" target=\"_blank\">statcounter.com</a>'\n          }, */\n          plotOptions: {\n            pie: {\n              shadow: false,\n              center: ['50%', '50%']\n            }\n          },\n          tooltip: {\n            valueSuffix: '%'\n          },\n          series: [{\n            name: nameInner,\n            data: theSeriesDataInner,\n            size: theSizeInner,\n            dataLabels: {\n              enabled: false,\n              formatter: function () {\n                return this.y > 3 ? this.point.name : null\n              },\n              color: labelColInner,\n              distance: labelDistInner\n            }\n          }, {\n            name: nameOuter,\n            data: theSeriesDataOuter,\n            // size: '80%',\n            innerSize: innerSizeOuter,\n            dataLabels: {\n              enabled: false,\n              formatter: function () {\n                // display only if larger than 1\n                return this.y > 1 ? '<b>' + this.point.name + ':</b> ' +\n                this.y + '%' : null\n              },\n              color: labelColOuter\n            },\n            id: 'versions'\n          }],\n          responsive: {\n            rules: [{\n              condition: {\n                maxWidth: 100\n              },\n              chartOptions: {\n                series: [{\n                }, {\n                  id: 'versions',\n                  dataLabels: {\n                    enabled: false\n                  }\n                }]\n              }\n            }]\n          }\n        })\n        resolve()\n        // console.log('In the highcharts plotting function')\n      } catch (error) {\n        console.log('Highcharts error')\n        console.log(error)\n        resolve()\n        // console.log('In the highcharts plotting function')\n      }\n    })\n    /* }\n    catch(error){\n    console.log(\"Highcharts error\");\n    console.log(error);\n    } */\n  })\n}\n\nfunction createANewDivHcNoData (divId) {\n  return new Promise(function (resolve, reject) {\n    if (document.getElementById(divId)) {\n      document.getElementById(divId).remove() //  = '';\n    }\n    // if (!document.getElementById(divId)){\n    const newDiv = document.createElement('div')\n    document.getElementById('superFamCharts').append(newDiv)\n    newDiv.id = divId\n    newDiv.style = 'width: 100px; height: 100px; margin: 0 auto; background-color: white;'\n\n    // if (document.getElementById(divId)){\n    resolve()\n    // }\n    // }\n  })\n}\n","module.exports = __webpack_public_path__ + \"img/down.7ae68b7a.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PopUp.vue?vue&type=style&index=1&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Errors.vue?vue&type=style&index=0&id=72919d45&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tabs.vue?vue&type=style&index=0&id=6e778791&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserHelp.vue?vue&type=style&index=0&lang=css&\"","module.exports = __webpack_public_path__ + \"img/aquaria-loader3.223aec7b.svg\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StructureViewer.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Wrapper.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loader.vue?vue&type=style&index=0&id=4d0fb015&scoped=true&lang=css&\"","module.exports = __webpack_public_path__ + \"img/FT-01.e4a6c439.svg\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchPanel.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AboutUniprot.vue?vue&type=style&index=0&id=d77ebc60&scoped=true&lang=css&\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGoWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0NDYwLCAyMDIwLzA1LzEyLTE2OjA0OjE3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMC0xMS0wN1QxODo0Njo0OC0wNTowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjAtMTItMDlUMDg6NDk6MTYtMDU6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjAtMTItMDlUMDg6NDk6MTYtMDU6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjEzNGEyNTEtODFjYy00ZDNjLWJhMmQtY2VhMmM1MGY2YmQxIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ZTFkNTMwYWUtYzY2MS0wMjRlLTk1ZTItNTU4ODI4OWU1NTkxIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YjhlNjQyOWMtMjlkZS00NTc2LWEzN2MtMjM4NDJiNGUyZjA5IiB0aWZmOk9yaWVudGF0aW9uPSIxIiB0aWZmOlJlc29sdXRpb25Vbml0PSIyIiBleGlmOkNvbG9yU3BhY2U9IjEiIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSI3MDAiIGV4aWY6UGl4ZWxZRGltZW5zaW9uPSI3MDAiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiOGU2NDI5Yy0yOWRlLTQ1NzYtYTM3Yy0yMzg0MmI0ZTJmMDkiIHN0RXZ0OndoZW49IjIwMjAtMTItMDlUMDg6NDI6NTQtMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4yIChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoyMTM0YTI1MS04MWNjLTRkM2MtYmEyZC1jZWEyYzUwZjZiZDEiIHN0RXZ0OndoZW49IjIwMjAtMTItMDlUMDg6NDk6MTYtMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4yIChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtMh4BEAAAZoSURBVHja7Z17TNVlGMdPK4FlV3FqIDSJbF0sMqrF2rqR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\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main\"},[_c('Header'),_c('Sequence'),_c('div',[_c('AboutAlignment')],1),_c('div',[_c('AboutPdb')],1),_c('div',[_c('AboutAquaria'),_c('UserHelp'),_c('Errors')],1),_c('div',{attrs:{\"id\":\"heightinspector\"}}),_c('StructureViewer'),_c('Tabs'),_c('PopUp'),(_vm.data.loader)?_c('Loader'):_vm._e(),_c('a',{attrs:{\"href\":(_vm.data.hash)}},[_c('div',{staticClass:\"hide\",attrs:{\"id\":\"scrim\"},on:{\"click\":_vm.dismissPanel}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* eslint-disable camelcase */\n\n//  Main client script that defines the AQUARIA namespace and primary functions.\n//  Page initialisation functions are at the end of this file.\n//  These functions try to follow code conventions specified in http://javascript.crockford.com/code.html\n//\n//  Copyright (c) CSIRO (2010-2017) and Garvan Institute of Medical Research (2010-)\n//\n//  Authors:\n//  Stuart Anderson <Stuart.Anderson@data61.csiro.au>\n//  Julian Heinrich <julian.heinrich@gmail.com>\n//  Sean O'Donoghue <sean@odonoghuelab.org>\n//  Kenny Sabir <traksewt@gmail.com>\n//  Neblina Sikta <n.sikta@garvan.org.au>\n//  Christian Stolte <christian.stolte@gmail.com>\n//  Sandeep Kaur <crystalsand10@gmail.com>\n//\n//  Jenny Vuong <vuong.jenny@gmail.com>\n//  Michael Joss <michael.joss@gmail.com>\n//  Vivian Ho <veeveearnh@gmail.com>\n//\n// This work is licensed under the terms of the GNU GPL version 2.\n\nimport * as LoadAQUARIA from '../../../utils/loadData'\nimport Store from '../../../store/index'\nwindow.AQUARIA = {}\nvar AQUARIA = window.AQUARIA\nvar jQuery = require('jquery')\nvar featurelist = require('../../Features/helpers/featurelist')\nvar fetch_das_annotations = require('../../Features/helpers/fetch_features')\nvar textpanel = require('../../InfoAbout/helpers/textpanels')\nvar TopTen = require('./topten')\nvar d3 = require('d3')\nvar axios = require('axios')\n\nrequire('./utilities')\n\nvar MAX_PROTEIN_HISTORY = 10;\n\n(function ($) {\n  var proteinSubmitListeners = []\n  var addProteinSubmitListener = function (listener) {\n    proteinSubmitListeners.push(listener)\n  }\n\n  AQUARIA.overlay = function () {\n    var elemDiv = document.createElement('div')\n    elemDiv.className = 'dimmer'\n    document.body.append(elemDiv)\n  }\n  AQUARIA.RemoveOverlay = function () {\n    document.querySelectorAll('div.dimmer').forEach(el => el.remove())\n  }\n\n  AQUARIA.fireProteinSubmitListeners = function (proteinName, primary_accession, pdb_id) {\n    proteinSubmitListeners.forEach(function (listener) {\n      listener.submitFired(proteinName, primary_accession, pdb_id)\n      // if (proteinName !== \"localhost\") { listener.submitFired(proteinName, primary_accession); }\n    })\n  }\n\n  AQUARIA.proteinTopTen = new TopTen('protein_top_ten', MAX_PROTEIN_HISTORY)\n  AQUARIA.pdbTopTen = new TopTen('pdbTopten', MAX_PROTEIN_HISTORY)\n  addProteinSubmitListener(AQUARIA.proteinTopTen)\n\n  // Moved 2D structure rendering to separate file (show_matching_structures.js)\n  // -- Christian\n  //\n  // Simple cache with automatic removal of oldest values.\n  //\n  // Authors: Sean O'Donoghue\n  //\n  var currentBiounit = 1\n  var initialised = false\n  var currentData = null\n\n  //\n  // Display best structure (in 3D) and matching structures (in 2D)\n  // Authors: Sean O'Donoghue, Kenny Sabir\n  //\n  try {\n    // Display 3D structure\n    window.aquariaReady = function () {}\n    var switcherText = ''\n    if (window.threedViewer === 'applet') {\n      switcherText = 'simple'\n    } else if (window.threedViewer === 'webgl' || window.threedViewer === 'jolecule') {\n      switcherText = 'detailed'\n    }\n    $('span#threedSwitcher a').attr('title', switcherText)\n    $('span#threedSwitcher').click(function () {\n      if (window.threedViewer === 'applet') {\n        // window.threedViewer = 'webgl';\n        window.threedViewer = 'jolecule'\n      } else if (window.threedViewer === 'webgl' || window.threedViewer === 'jolecule') {\n        window.threedViewer = 'applet'\n      }\n      localStorage.setItem('3DViewer', window.threedViewer)\n      location.reload()\n    })\n\n    $('#biounitLeft').click(function () {\n      currentBiounit = currentBiounit - 1\n      AQUARIA.display_3D_structure(currentData)\n    })\n\n    $('#biounitRight').click(function () {\n      currentBiounit = currentBiounit + 1\n      AQUARIA.display_3D_structure(currentData)\n    })\n\n    /**\n     * Asserts the transform to be a right-handed coordinate system.\n     * @param transform The transform as a string of the format \"1:0:0:0:0:1:0:0:0:0:1:0\"\n     * @returns A transform as a string of the format \"1:0:0:0:0:1:0:0:0:0:1:0\"\n     */\n    const assert_orientation = function (transform) {\n      const m = transform.split(':').map(function (c) {\n        return parseFloat(c)\n      })\n      const det = (m[0] * m[5] * m[10] + m[1] * m[6] * m[8] + m[2] * m[4] * m[9]) - (m[2] * m[5] * m[8] + m[1] * m[4] * m[10] + m[0] * m[6] * m[9])\n      if (det < 0) {\n        // flip any one axis\n        m[0] = -m[0]\n        m[4] = -m[4]\n        m[8] = -m[8]\n      }\n\n      return m.join(':')\n    }\n\n    AQUARIA.display_3D_structure = function (data, member) {\n      currentData = data\n      AQUARIA.currentChain = data.pdb_chain // might change in chainSelected!\n      var alignment = data.alignment // alignment of UniProt to 1 pdb chain\n      // var features = data.uniprot_features; // features of the UniProt\n      // sequence (SNPs etc)\n      var pdb_chain = data.pdb_chain // chain ID of displayed 3D structure\n      var pdb_id = data.pdb_id // ID of displayed 3D structure\n      var sequences = data.sequences\n      var transform = assert_orientation(data.transforms[0])\n      var common_names = data.common_names\n      var source_primary_accession = data.source_primary_accession\n      var conservations = data.conservations\n      /// console.log(\"(biounits, currentBiounit) = (\" + biounits + \", \" + currentBiounit + \")\");\n      if (!data.biounits || data.biounits < 1) {\n        // if the database PDB table has biounit = 0 or undefined\n        currentBiounit = 0\n      } else {\n        currentBiounit = data.biounits\n      }\n\n      if (pdb_id.match(/^\\d\\w\\w\\w$/)) {\n        var threeDWidth = $('#threeD').width()\n        var threeDHeight = threeDWidth\n        threeDHeight = $('#threeDSpan').innerHeight()\n        if (threeDHeight < 570) {\n          threeDHeight = 570\n        }\n\n        // ABOUT PDB PANEL\n        var url = `${window.BACKEND}/getPubMedForPDB/${pdb_id}/${(window.AQUARIA.prefferedChain[0] ? window.AQUARIA.prefferedChain[0] : pdb_chain[0])}`\n        axios({\n          method: 'get',\n          url: url\n        })\n          .then(function (response) {\n            var pdbData = response.data[0]\n            var biounits = pdbData.Biounits\n            if (!biounits || biounits < 1) {\n            // if the database PDB table has biounit = 0 or undefined\n              currentBiounit = 0\n              pdbData.Biounits = 0\n            }\n\n            if (biounits > 0 && typeof pdbData.experimental_method !== 'undefined' && pdbData.experimental_method !== null && pdbData.experimental_method.toLowerCase().indexOf('x-ray') > -1) {\n              if (member) {\n                currentBiounit = 1\n                textpanel.updatePDBPanel(pdbData, common_names[0], member.alignment_identity_score)\n              }\n              if (currentBiounit > biounits) {\n                currentBiounit = 0\n              } else if (currentBiounit < 0) {\n                currentBiounit = biounits\n              }\n              if (currentBiounit === 0) {\n                $('#biounitType').text('Asymmetric Unit')\n                $('#biounitCount').hide()\n              } else {\n                $('#biounitType').text('Biological Assembly ')\n                if (biounits > 1) {\n                  $('#biounitCount').show()\n                } else {\n                  $('#biounitCount').hide()\n                }\n              }\n              $('#biounitDisplay').show()\n              $('#biounitCount').text(currentBiounit + '/' + biounits)\n\n              if (currentBiounit !== biounits) {\n                $('#biounitRight').show()\n              } else {\n                $('#biounitRight').hide()\n              }\n\n              if (currentBiounit > 0) {\n                $('#biounitLeft').show()\n              } else {\n                $('#biounitLeft').hide()\n              }\n            } else {\n              if (pdbData) {\n                textpanel.updatePDBPanel(pdbData, common_names[0], member.alignment_identity_score)\n              }\n              $('#biounitDisplay').hide()\n              currentBiounit = 0\n            }\n            AQUARIA.pdb_data = pdbData\n\n            // deselect feature tracks that may still be active\n            d3.selectAll('svg.loaded rect.feature').attr('fill', '#a4abdf')\n            d3.selectAll('svg.loaded').classed('loaded', false)\n            \n            var attributes = AQUARIA.panel3d.generateAttributes(threeDWidth, threeDHeight,\n              pdb_id, pdb_chain, currentBiounit, source_primary_accession,\n              sequences, common_names, alignment, '', transform, conservations, AQUARIA.structures2match.version_string)\n            $('#jnlp_app_attributes').val(JSON.stringify(attributes))\n\n\n\n            if (window.hide3DViewer) {\n              Store.commit('showLoader', true)\n              Store.commit('setLoaderMsg', 'Applet is not enabled for this browser. Launch Application instead.')\n            } else {\n              // var interactive = attributes.interactive ? '/' + attributes.interactive : ''\n              var urlParams = window.location.href.substr(window.location.origin.length + window.location.pathname.length)\n              //   history.pushState(null, sequences[0].primary_accession,\n              //     window.location.protocol + '//' + window.location.host +\n              // '/' + sequences[0].primary_accession + '/' +\n              // pdb_id + '/' + (window.AQUARIA.prefferedChain[0] ? window.AQUARIA.prefferedChain[0] : pdb_chain[0]) + urlParams)\n              history.pushState(null, sequences[0].primary_accession,\n                window.location.protocol + '//' + window.location.host +\n            '/' + Store.getters.getOrganism + '/' + Store.getters.getGene + '/' +\n            pdb_id + '/' + (window.AQUARIA.prefferedChain[0] ? window.AQUARIA.prefferedChain[0] : pdb_chain[0]) + urlParams)\n\n\n              function findPDBMember (pdbid, chain) {\n                var pdbMember = []\n                for (var clusterID in window.AQUARIA.structures2match.clusters) {\n                  for (var memberID in window.AQUARIA.structures2match.clusters[clusterID].members) {\n                    if (window.AQUARIA.structures2match.clusters[clusterID].members[memberID].pdb_chain[0].includes(chain) && window.AQUARIA.structures2match.clusters[clusterID].members[memberID].pdb_id.includes(pdbid)) {\n                      pdbMember.cluster = parseInt(clusterID)\n                      pdbMember.member = parseInt(memberID)\n                      return pdbMember\n                    }\n                  }\n                }\n              }\n\n              window.AQUARIA.PDBIndex = findPDBMember(window.AQUARIA.currentMember.pdb_id, window.AQUARIA.currentMember.pdb_chain)\n              if (AQUARIA.panel3d.initialised) {\n                // intiaties the refresh of the 3D panel\n                AQUARIA.panel3d.reload(attributes)\n              } else if (AQUARIA) {\n                // intiaties the first loading of the 3D panel\n                AQUARIA.panel3d.load(attributes)\n                // DISABLED: Connection to Leap Connector\n                // if (AQUARIA.gesture) {\n                //   AQUARIA.gesture.start();\n                // }\n              } else {\n                console.log('AQUARIA.display_3D_structure Error: Cannot load the applet!')\n                alert('Cannot load the Applet!')\n              }\n              // setup the leap motion link\n              // attributes['interactive'] = 'leap';\n              // AQUARIA.remote.createToolkitAppJNLP(attributes, function(jnlpLink) {\n              // $(\"#launchToolkitApplicationLink\").attr('href', jnlpLink);\n              // });\n              // delete attributes['interactive'];\n            }\n          })\n      } else {\n        console.log('AQUARIA.display_3D_structure Error: Invalid PDB identifier')\n      }\n    }\n\n    AQUARIA.display_features = function (sequences) {\n      var primary_accession = []\n      var uniprot_sequence_MD5_hash = []\n\n      sequences.forEach(function (sequence) {\n        primary_accession.push(sequence.primary_accession)\n        uniprot_sequence_MD5_hash.push(sequence.uniprot_hash)\n      })\n      /// console.log(\"AQUARIA.display_features new features\", primary_accession);\n\n      if (typeof (fetch_das_annotations) !== 'undefined') {\n        AQUARIA.blankPanel('#featurelist', true)\n        startSpin()\n        fetch_das_annotations.fetch_annotations(primary_accession,\n          function (featureInfo, completeServers) {\n            featurelist.updateFeatureUI(featureInfo, completeServers)\n            AQUARIA.blankPanel('#featurelist', false)\n          })\n      } else {\n        alert('Could not find fetch_das_annotations.')\n      }\n    }\n\n    var startSpin = function () {\n      // $(\"#featureExplanation\").text(\" for \" + AQUARIA.preferred_protein_name);\n\n      $('#featureCounter').show()\n      $('#waitForFeatures').show()\n    }\n\n    AQUARIA.updateDocumentTitle = function (protein_name, score, pdbid, chain) {\n      document.title = 'Aquaria: ' +\n        protein_name + ', ' + score +\n        '% Sequence Identity to PDB ' + pdbid + ', chain ' + chain\n      featurelist.updateFeatureTabTitle(protein_name)\n    }\n\n    AQUARIA.refresh = function () {\n      if (typeof AQUARIA.showMatchingStructures !== 'undefined') {\n        AQUARIA.showMatchingStructures.refresh()\n        featurelist.updateFeatureUI()\n      }\n    }\n\n    AQUARIA.load3DAlignment = function (member, sequence) {\n      // resize_app.startLogoSpin()\n      // AQUARIA.e_value = member.E_value;\n      AQUARIA.currentMember = member\n      AQUARIA.updateDocumentTitle(AQUARIA.preferred_protein_name,\n        member.alignment_identity_score, member.pdb_id,\n        (window.AQUARIA.prefferedChain[0] ? window.AQUARIA.prefferedChain[0] : member.pdb_chain[0]))\n\n      //      History\n      AQUARIA.fireProteinSubmitListeners(AQUARIA.preferred_protein_name, sequence.primary_accession, member.pdb_id)\n      Store.commit('showLoader', true)\n      Store.commit('setLoaderMsg', 'Waiting for PDB...')\n      //if first time using Aquaria, display Youtube playlist\n      AQUARIA.blankPanel('#featurelist', true)\n      AQUARIA.blankPanel('#aboutPDB', true)\n      // AQUARIA.blankPanel(\"#uniProtDesc\", true);\n      // member[\"sequence\"] = sequence[\"sequence\"];\n\n      var loadRequest = {\n        selector: [sequence.primary_accession],\n        selectPDB: this.member.pdb_id,\n        selectChain: window.AQUARIA.prefferedChain[0] ? window.AQUARIA.prefferedChain[0] : this.member.pdb_chain[0]\n      }\n\n      var url = `${window.BACKEND}/get_3D_alignment`\n      // var url = `http://localhost:8009/get_3D_alignment`\n      // var url = 'https://vuejs.org/v2/guide/events.html'\n      axios({\n        method: 'get',\n        url: url,\n        params: loadRequest\n      })\n        .then(function (response) {\n          const newData = response.data\n          //   })\n\n          // AQUARIA.remote.get_3D_alignment(member, sequence, function(newData) {\n          /// console.log('AQUARIA.remote.get_3D_alignment', newData)\n          // currentBiounit = 1;\n          AQUARIA.display_3D_structure(newData, member)\n          AQUARIA.blankPanel('#vis', false)\n          AQUARIA.blankPanel('#aboutPDB', false)\n          AQUARIA.blankPanel('#uniProtDesc', false)\n          AQUARIA.blankPanel('#featurelist', false)\n        })\n      // resize_app.stopLogoSpin()\n    }\n\n\n    AQUARIA.display_member = function (selectedMember) {\n      if (document.querySelector('#waitingFrame').style.display === 'none') {\n        document.querySelector('#waitingFrame').style.display = 'block'\n      }\n      var data = AQUARIA.structures2match\n      // matching structures finished\n      if (data.clusters && data.clusters.length > 0) {\n        if (typeof selectedMember === 'undefined') {\n          selectedMember = data.clusters[data.Selected_PDB.cluster_number].members[data.Selected_PDB.member_number]\n        }\n        AQUARIA.member = selectedMember\n\n        AQUARIA.load3DAlignment(selectedMember, data.sequences[0])\n      } else {\n        if (typeof data.pdb_id === 'undefined') {\n          store.commit('showLoader', true)\n          textpanel.updateUniprotInfo(null)\n          AQUARIA.showMatchingStructures.removeAll()\n        } else {\n          store.commit('showLoader', true)\n          store.commit('setLoaderMsg', 'Cannot find protein')\n          Store.commit('setErrorTitle', 'Cannot find protein.')\n          textpanel.updateUniprotInfo(null)\n          AQUARIA.showMatchingStructures.removeAll()\n        }\n        /// console.log(\"AQUARIA.display_member error: cannot find matching structures.\");\n      }\n    }\n  } catch (error) {\n    alert('Error with displaying structures: ' + error.message)\n  }\n})(jQuery)\n\nAQUARIA.margin = {\n  top: 10,\n  right: 70,\n  bottom: 20,\n  left: 20\n}\n\nwindow.AQUARIA.chainSelected = LoadAQUARIA.chainSelected\n\nAQUARIA.structures2match = {}\nAQUARIA.blankCount = {}\nAQUARIA.currentMember = null\nconst $ = jQuery\n\nAQUARIA.blankPanel = function (panel, isOn, message) {\n  var name = panel + ' .blank'\n  if (isOn) {\n    if ($(name).length === 0) {\n      /// console.log(\"AQUARIA.blankPanel \" + panel + \": \" + isOn);\n      if (message) {\n        $(panel).append(\n          '<div class=\"blank hidden\"><br><p class=\"centered\">' + message +\n          '</p></div>')\n      } else {\n        $(panel).append('<div class=\"blank hidden\"></div>')\n      }\n      $(name).fadeIn('fast')\n      $(name).css('height', $(panel).css('height'))\n    }\n  } else {\n    /// console.log(\"AQUARIA.blankPanel \" + panel + \": \" + isOn);\n    $(name).fadeOut('slow', function (obj) {\n      $(name).remove()\n    })\n  }\n}\n// };\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"header\"}},[_c('div',{staticClass:\"item fix level3\",attrs:{\"id\":\"logo\"}},[_c('a',{attrs:{\"href\":\"#About\"},on:{\"click\":_vm.showScrim}},[_c('img',{attrs:{\"src\":_vm.aquariasymbol}})])]),_c('Title'),_c('div',{staticClass:\"item fix level3\",attrs:{\"id\":\"menu-btn\"}},[_c('a',{attrs:{\"href\":\"#Menu\"}},[_c('img',{attrs:{\"src\":_vm.hamburger}})])]),_c('Menu')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div id=\"UserHelp\" class=\"HelpPanel hide dialouge-window overlay level7\">\n        <a href=\"#\" class=\"close\" @click=\"closeHelp\"></a>\n          <div id='fullwindow-video' class='fill'>\n            <youtube v-for=\"video in videos\" :key=\"video.id\" :id='video.id' :video-id=\"video.id\" class='hide' ref=\"youtube\" @paused=\"paused($event)\" @ended=\"finished($event)\"></youtube>\n          </div>\n          <div id='contents'>\n            <p class=\"thetitle\">{{data.title}}</p>\n            <p class=\"intro\">Watch tutorial videos to get started.</p>\n            <p class=\"intro\">Skip watching tutorial videos and start using Aquaria.</p>\n            <Playlist v-if=\"!data.newUser\" v-bind:playlist='videos'/>\n            <div v-if=\"data.newUser\">\n              <youtube id='intro-video' video-id=\"FAQ3yVGYSzY\" ref=\"youtube\" @playing=\"playing($event)\" @paused=\"paused($event)\" @ended=\"finished($event)\"></youtube>\n            </div>\n            <a href=\"#\" id='skip' @click=\"closeHelp\">Skip > </a>\n          </div>\n    </div>\n</template>\n\n<script>\nimport store from '@/store/index'\nimport Playlist from './Playlist'\nimport * as Panels from '../AquariaLayout/helpers/hidePanels'\nvar targetId\nvar index\nexport default {\n  name: 'UserHelp',\n  components: {\n    Playlist\n  },\n  data () {\n    return {\n      videos: [\n        { id: 'FAQ3yVGYSzY', title: 'Introduction to Aquaria' },\n        { id: 'UZNEmPOaVrA', title: 'How to Calculate Distances' }\n      ]\n    }\n  },\n  computed: {\n    data () {\n      return {\n        title: store.state.helpTitle,\n        newUser: store.state.newUser\n      }\n    }\n  },\n  methods: {\n    closeHelp: function () {\n      var _this = this\n      if (document.querySelector('iframe.show')) {\n        var activeVideoID = document.querySelector('iframe.show').id\n        document.getElementById('contents').classList.remove('hide')\n        document.getElementById(activeVideoID).classList.remove('show')\n        document.getElementById('UserHelp').className += ' dialouge-window'\n        document.getElementById('UserHelp').className += ' overlay'\n        document.getElementById('UserHelp').className += ' level7'\n        document.getElementById('UserHelp').classList.remove('fullwindow')\n        var event = {}\n        event.h = {}\n        event.h.id = activeVideoID\n        _this.paused(event)\n      } else {\n        // window.AQUARIA.RemoveOverlay()\n        document.getElementById('UserHelp').classList.remove('show')\n        document.getElementById('UserHelp').className += (' hide')\n        // document.querySelector('#UserHelp').style.display = 'none'\n        Panels.RemoveOverlay()\n        if (document.querySelector('#helpbtn').classList.contains('active')) {\n          _this.toggleActive(document.querySelector('#helpbtn'))\n        }\n      }\n    },\n    toggleActive: function (ev) {\n      if (ev.className === 'lnk active') {\n        ev.className = 'lnk'\n      } else {\n        ev.className = 'lnk active'\n      }\n    },\n    getIndex: function (targetId) {\n      for (var i = 0; i < this.$refs.youtube.length; i++) {\n        if (this.$refs.youtube[i].$attrs.id === targetId) {\n          return i\n        }\n      }\n    },\n    playing: function (event) {\n      targetId = event.h.id\n      if (this.$refs.youtube.length) {\n        index = this.getIndex(targetId)\n        this.$refs.youtube[index].player.playVideo()\n      } else {\n        this.$refs.youtube.player.playVideo()\n        var iframe = document.querySelector('#intro-video')\n        var requestFullScreen = iframe.requestFullScreen || iframe.mozRequestFullScreen || iframe.webkitRequestFullScreen\n        if (requestFullScreen) {\n          requestFullScreen.bind(iframe)()\n        }\n      }\n    },\n    paused: function (event) {\n      targetId = event.h.id\n      if (document.querySelector('iframe.active')) {\n        this.closeHelp()\n      } else {\n        if (this.$refs.youtube.length) {\n          index = this.getIndex(targetId)\n          this.$refs.youtube[index].player.pauseVideo()\n        } else {\n          this.$refs.youtube.player.pauseVideo()\n        }\n        if (document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement) {\n          document.exitFullscreen()\n        }\n      }\n    },\n    finished: function (event) {\n      targetId = event.h.id\n      if (this.$refs.youtube.length) {\n        index = this.getIndex(targetId)\n        this.$refs.youtube[index].player.stopVideo()\n      } else {\n        this.$refs.youtube.player.stopVideo()\n      }\n      if (document.querySelector('iframe.active')) {\n        document.querySelector('#UserHelp a.close').click()\n      }\n      document.exitFullscreen()\n      this.closeHelp()\n    }\n  }\n}\n</script>\n\n<style>\n.intro {\n  padding: 0px 4px;\n}\n.dialouge-window {\n  left: 50%;\n  max-height: 86vh;\n}\n#fullwindow-video iframe, .fill {\n  width: 100%;\n  height: 100%;\n}\n.fullwindow {\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  max-height: 100vh;\n}\n.deactive{\n  display: none;\n}\n.active {\n  display: block;\n}\n.showIframe {\n  display: flex;\n  left: 0;\n  width: 100%;\n  max-height: 98vh;\n  position: absolute;\n  height: 100vh;\n}\niframe#intro-video {\n  height: 29vh;\n  margin-bottom: 0.5rem;\n}\n#skip {\n  float: right;\n  padding: 2px;\n}\n#UserHelp{\n    overflow: scroll;\n    /* display: none; */\n    position: absolute;\n    z-index: 9;\n    top: 1vh;\n    background: var(--primary-tab);\n    padding: 0.5rem 0.5rem 0.75rem 0.5rem;\n    border-radius: 1rem;\n    flex-direction: column;\n}\n\n#AboutError:target.HelpPanel {\n      display: flex;\n      font-size: 90%;\n      max-width: 40rem;\n}\np.thetitle {\n    display: flex;\n    background-color: var(--primary-label);\n    flex-basis: auto;\n    color: var(--text);\n    text-align: center;\n    line-height: 1.25;\n    padding: 0.5rem 1rem;\n    border-radius: 1.5rem;\n    margin: auto;\n}\n.HelpPanel.overlay {\n    border-radius: 1rem;\n    /* box-shadow: 0 0 0 9999px rgba(0,0,0,0.6); /* dark background overlay */\n    /* -webkit-box-shadow: 0 0 0 999px rgba(0,0,0,0.6); */\n    padding: 0.5rem 0.75rem;\n    position: absolute;\n    top: 1vh;\n    left: 50%;\n    transform: translate(-50%, 0%);\n    width: 90vw;\n    max-width: calc(23rem + 3vw);\n  }\n  /* .HelpPanel .close::after {\n    width: calc(1.25rem + 0.5vw);\n    height: calc(1.25rem + 0.5vw);\n  } */\n\n  .HelpPanel .close {\n    position: relative;\n    display: block;\n  }\n  .HelpPanel .close::after {\n    right: 0.25rem;\n    top: 0.25rem;\n    width: calc(1.25rem + 0.5vw);\n    height: calc(1.25rem + 0.5vw);\n    position: absolute;\n    display: flex;\n    z-index: 11;\n    align-items: center;\n    justify-content: center;\n    background-color: rgba(0,0,0,.5);\n    border-radius: 50%;\n    color: white;\n    content: \"×\";\n    cursor: pointer;\n    font-size: calc(1rem + 0.5vw)\n  }\n  .HelpPanel .close:hover::after {\n      background-color: var(--primary-highlight);\n  }\n</style>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"item title fix level5\",attrs:{\"id\":\"title\"}},[(_vm.organism_name && !_vm.seqRes)?_c('span',{attrs:{\"id\":\"org_prot\"},on:{\"click\":_vm.storeHash}},[_c('a',{attrs:{\"href\":\"#Sequence\"},on:{\"click\":_vm.makeActive}},[_c('img',{attrs:{\"src\":_vm.search}}),_vm._v(\" \"+_vm._s(_vm.organism_name)+\" \"),_c('strong',[_vm._v(_vm._s(_vm.primary_accession))])])]):_vm._e(),(!_vm.organism_name && !_vm.seqRes)?_c('span',{staticClass:\"titlepanel\",attrs:{\"id\":\"uniprotpanel\"},on:{\"click\":_vm.storeHash}},[_c('a',{attrs:{\"href\":\"#Sequence\"},on:{\"click\":_vm.makeActive}},[_c('img',{attrs:{\"src\":_vm.search}}),_vm._v(\" Protein Sequence\")])]):_vm._e(),(!_vm.seqRes)?_c('span',{attrs:{\"id\":\"alignmt\"},on:{\"click\":_vm.storeHash}},[_c('a',{attrs:{\"href\":\"#Alignment\"},on:{\"click\":_vm.makeActive}},[_vm._v(\"aligned onto\")])]):_vm._e(),(!_vm.pdb)?_c('span',{attrs:{\"id\":\"no_pdb_id\"},on:{\"click\":_vm.storeHash}},[_c('a',{attrs:{\"href\":\"#Structure\"},on:{\"click\":_vm.makeActive}},[_vm._v(\"PDB ID\")])]):_vm._e(),(_vm.pdb && !_vm.seqRes)?_c('span',{attrs:{\"id\":\"pdb_id\"},on:{\"click\":_vm.storeHash}},[_c('a',{attrs:{\"href\":\"#Structure\"},on:{\"click\":_vm.makeActive}},[_vm._v(_vm._s(_vm.pdb))]),_c('span',{attrs:{\"id\":\"help\"},on:{\"click\":_vm.showHelp}},[_vm._v(\"?\")])]):_vm._e(),(_vm.seqRes)?_c('div',{attrs:{\"id\":\"titleAlign\"}},[_c('span',{staticClass:\"titlepanel\",on:{\"click\":_vm.storeHash}},[_c('a',{attrs:{\"href\":\"#Alignment\"},on:{\"click\":_vm.makeActive}},[_c('strong',[_vm._v(_vm._s(_vm.primary_accession))]),_vm._v(\" Sequence: \"+_vm._s(_vm.seqRes)+\" \"),_c('br'),_c('strong',[_vm._v(_vm._s(_vm.pdb))]),_vm._v(\" Structure: \"+_vm._s(_vm.structRes)+\" \")])])]):_vm._e(),_c('a',{staticClass:\"close\",attrs:{\"href\":_vm.data.hash},on:{\"click\":_vm.dismissPanel}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div id=\"title\" class=\"item title fix level5\">\n      <span id=\"org_prot\"  v-if=\"organism_name && !seqRes\" v-on:click=\"storeHash\">\n        <a href=\"#Sequence\" class=\"\" @click=\"makeActive\">\n          <img v-bind:src=\"search\">\n          {{organism_name}} <strong>{{primary_accession}}</strong>\n        </a>\n      </span>\n      <span id=\"uniprotpanel\" class='titlepanel' v-if=\"!organism_name && !seqRes\" v-on:click=\"storeHash\">\n          <a href=\"#Sequence\" class=\"\" @click=\"makeActive\"><img v-bind:src=\"search\">\n          Protein Sequence</a>\n        </span>\n      <span id=\"alignmt\" v-if=\"!seqRes\" v-on:click=\"storeHash\">\n          <a href=\"#Alignment\" class=\"\" @click=\"makeActive\" >aligned onto</a>\n      </span>\n      <span id=\"no_pdb_id\" v-if=\"!pdb\" v-on:click=\"storeHash\">\n        <a href=\"#Structure\" class=\"\" @click=\"makeActive\">PDB ID</a>\n      </span>\n      <span id=\"pdb_id\" v-if=\"pdb && !seqRes\" v-on:click=\"storeHash\">\n        <a href=\"#Structure\" class=\"\" @click=\"makeActive\">{{pdb}}</a>\n        <span id='help' @click=\"showHelp\">?</span>\n      </span>\n      <div id='titleAlign' class='' v-if=\"seqRes\">\n        <span class='titlepanel' v-on:click=\"storeHash\">\n          <a href=\"#Alignment\" class=\"\" @click=\"makeActive\" >\n          <strong>{{primary_accession}}</strong> Sequence: {{seqRes}} <br/>\n          <strong>{{pdb}}</strong> Structure: {{structRes}} </a>\n        </span>\n      </div>\n      <a  v-bind:href=\"data.hash\" class=\"close\" @click=\"dismissPanel\"></a>\n    </div>\n</template>\n\n<script>\nimport store from '../../store/index'\nimport * as Panels from '../AquariaLayout/helpers/hidePanels'\nexport default {\n  name: 'Title',\n  data () {\n    return {\n      organism_name: null,\n      primary_accession: null,\n      text: null,\n      pdb: null,\n      search: require('../../assets/img/search_100.png'),\n      seqRes: null,\n      structRes: null\n    }\n  },\n  computed: {\n    data () {\n      return {\n        hash: store.state.hash,\n        Gene: store.state.Gene,\n        Organism: store.state.Organism\n      }\n    }\n  },\n  beforeMount () {\n    const _this = this\n\n    window.AQUARIA.update3DTitle = function (accession, pdbId, chainId, moleculeName, score) {\n      if (chainId && moleculeName) {\n        var shortName = moleculeName\n        if (shortName.indexOf('(') !== -1) {\n          shortName = moleculeName.substring(0, moleculeName.indexOf('(')).trim()\n        }\n\n        window.AQUARIA.short_moleculeName = shortName\n\n        if (accession && pdbId && score) {\n          _this.organism_name = _this.data.Organism\n          _this.primary_accession = _this.data.Gene\n          _this.text = 'aligned onto'\n          _this.pdb = pdbId + '-' + chainId\n\n          var evalue = window.AQUARIA.currentMember.E_value // e-value from pssh2\n          window.AQUARIA.explainTitle(accession, window.AQUARIA.preferred_protein_name, shortName, pdbId, chainId, score, evalue)\n          // $('#help3D').show().parent().attr('onmouseenter', \"AQUARIA.explainTitle('\" + accession + \"','\" + window.AQUARIA.preferred_protein_name + \"','\" + shortName + \"','\" + pdbId + \"','\" + chainId +\n          //   \"','\" + score + \"','\" + evalue + \"');\")\n        } else { // DNA or RNA (no accession)\n          _this.organism_name = _this.data.Organism\n          _this.primary_accession = shortName\n          _this.text = 'structure from'\n          _this.pdb = pdbId + '-' + chainId\n        }\n      } else {\n        document.querySelector('#uniProtDesc').text(window.AQUARIA.preferred_protein_name)\n      }\n    }\n  },\n  methods: {\n    showHelp: function () {\n      store.commit('setHelpTitle', 'Aquaria Help')\n      store.commit('setUserStatus', false)\n      document.getElementById('UserHelp').classList.remove('hide')\n      document.getElementById('UserHelp').className += (' show')\n      // document.querySelector('#UserHelp').style.display = 'flex'\n      // document.querySelector('.main .dimmer').style.display = 'block'\n      if (!document.querySelector('div.dimmer')) {\n        Panels.overlay()\n        document.querySelector('div.dimmer').className += ' level7'\n      }\n      document.querySelector('div.dimmer').addEventListener('click', function () {\n        Panels.RemoveOverlay()\n        document.getElementById('UserHelp').classList.remove('show')\n        document.getElementById('UserHelp').className += (' hide')\n      })\n    },\n    storeHash: function () {\n      if (window.location.hash === '') {\n        store.commit('setHash', '#(0,0,0)')\n      } else {\n        store.commit('setHash', window.location.hash)\n      }\n    },\n    makeActive: function (ev) {\n      document.querySelector('#pdb_id > span#help').style.visibility = 'hidden'\n      document.querySelectorAll('#title span a').forEach(el => {\n        el.classList.remove('active')\n      })\n      if (ev.target.localName.includes('strong')) {\n        ev.target = ev.target.parentElement\n      }\n      ev.target.className = 'active'\n      if (document.querySelector('#title').className.indexOf('active') === -1) { document.querySelector('#title').className += ' active' }\n      document.querySelector('#scrim').className = 'show level2'\n      if (document.querySelector('#titleAlign') !== null) {\n        document.querySelector('#titleAlign').className = 'active'\n        store.commit('setAlignment', window.AQUARIA.panel3d.joleculeAlignment.copyToClipboard())\n        store.commit('setHash', window.location.hash)\n      }\n    },\n    dismissPanel: function () {\n      // hide scrim\n      document.querySelector('#pdb_id > span#help').style.visibility = 'visible'\n      document.querySelector('#scrim').className = 'hide'\n      // reset title to neutral state\n      document.querySelector('#title').className = 'item title fix level6'\n      if (document.querySelector('#titleAlign') !== null) { document.querySelector('#titleAlign').className = '' }\n      document.querySelectorAll('#title span a').forEach(el => {\n        el.className = ''\n      })\n    },\n    resetSelection: function () {\n      document.querySelectorAll('#titlebar span').forEach(el => {\n        el.className = 'titlepanel'\n      })\n      document.querySelectorAll('.contents').forEach(el => {\n        el.style.display = 'none'\n      })\n    },\n    release: function () {\n      document.querySelector('#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection').style.display = 'none'\n      this.resetSelection()\n    }\n  },\n  mounted () {\n    this.resetSelection()\n  },\n  updated () {\n    var _this = this\n    _this.primary_accession = _this.data.Gene\n    var selectedRes = new MutationObserver(function () {\n      if (document.querySelector('#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection').style.display === 'none') {\n        _this.seqRes = null\n        _this.structRes = null\n        // _this.alignment = null\n        store.commit('setAlignment', '')\n      } else {\n        var residues = document.querySelector('#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection').innerText.split('\\n')\n        var pdb = window.AQUARIA.currentMember.pdb_id + '-' + window.AQUARIA.currentMember.pdb_chain + ':'\n        var accession = _this.data.Gene + ':'\n        _this.seqRes = residues[1].split(accession)[1]\n        _this.structRes = residues[0].split(pdb)[1]\n        // _this.alignment = window.AQUARIA.panel3d.joleculeAlignment.copyToClipboard()\n      }\n    })\n    selectedRes.observe(document.querySelector('#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection'), {\n      attributes: true, childList: true, characterData: true\n    })\n  }\n}\n</script>\n\n<style>\n#pdb_id > span#help {\n  background: white;\n  color: #595656;\n  padding: 0px 0.4em;\n  border-radius: 1.5rem;\n  margin: 2px;\n  font-size: 100%;\n}\n/* #pdb_id:hover{\n  background-color: var(--primary-link);\n} */\n#pdb_id > span#help:hover {\n  background-color: var(--primary-link);\n  color: white;\n}\n.title {\n    flex-basis: auto;\n    color: white;\n    text-align: center;\n    line-height: 1.25;\n    padding: 0;\n    border-radius: 1.5rem;\n    margin: auto;\n    left: 50%;\n    top: 1.5vh;\n    transform: translate(-50%, -5%);\n    /* width: fit-content; */\n}\n#title.active, #titleAlign.active {\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: flex-start;\n  width: 78vw;\n  max-width: 29.5rem;\n  margin-top: .125rem;\n}\n#title span {\n  background-color: var(--primary-label);\n  white-space: nowrap;\n  text-align: left;\n  flex-shrink: 0;\n}\n#title.active span#pdb_id, #title.active span#no_pdb_id {\n  flex-grow: 2;\n  flex-shrink: 0;\n  /* width: 50%; */\n}\n#title span a {\n  display: inline-block;\n  background-color: var(--primary-label);\n  padding: calc(0.4rem + 3 * ((100vw - 320px) / 680)) 0.2rem;\n  transition: all 0.5s ease;\n  color: var(--text);\n  text-decoration: none;\n}\n#title span a:hover {\n  background-color: var(--primary-link);\n}\n\n#title span a:active, #title span a.active {\n  background-color: var(--primary-highlight);\n}\n\n#title:hover span#alignmt a {\n  border-right: 1px dotted var(--background);\n  border-left: 1px dotted var(--background);\n}\nspan#org_prot, span#uniprotpanel {\n  border-top-left-radius: 2rem;\n  border-bottom-left-radius: 2rem;\n}\nspan#org_prot a, span#uniprotpanel a {\n  padding-left: 0.5rem;\n  border-top-left-radius: 2rem;\n  border-bottom-left-radius: 2rem;\n  transition: all 0.7s ease;\n}\nspan#org_prot img, span#uniprotpanel img, span#pdb_id img  {\nheight: calc(10px + .4vw);\n}\nspan#pdb_id , span#no_pdb_id {\n  padding-right: 0.5rem;\n  font-weight: 600;\n  border-top-right-radius: 2rem;\n  border-bottom-right-radius: 2rem;\n}\n#titleAlign {\n  display: flex;\n  justify-content: center;\n}\n#titleAlign.active {\n  /* background-color: var(--primary-highlight); */\n  border-radius: 1.5rem;\n}\n#titleAlign span a {\n  padding: calc(0.2rem + 2 * ((100vw - 320px) / 680)) 1rem;\n  font-size: 95%;\n  line-height: 1rem;\n  border-radius: 1.25rem;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 15rem;\n  text-align: center;\n}\n\n#title span.titlepanel {\n  background-color: transparent;\n  text-align: left;\n}\n\n#titleAlign.active span.titlepanel a {\n  width: 80vw;\n  max-width: 29.5rem;\n}\n#titleAlign.active + a.close::after {\n    top: calc(0.5rem + 3 * ((100vw - 320px) / 680));\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Title.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Title.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Title.vue?vue&type=template&id=26de874c&\"\nimport script from \"./Title.vue?vue&type=script&lang=js&\"\nexport * from \"./Title.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Title.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel abs floating level7\",attrs:{\"id\":\"Menu\"}},[_c('a',{staticClass:\"close\",attrs:{\"href\":\"#\"}}),_vm._m(0),_vm._m(1),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selected),expression:\"selected\"}],on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selected=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},function($event){return _vm.onChange($event)}]}},[_c('option',{attrs:{\"id\":\"ribbon\",\"selected\":\"\"}},[_vm._v(\"Ribbon\")]),_c('option',{attrs:{\"id\":\"sphere\"}},[_vm._v(\"Sphere\")]),_c('option',{attrs:{\"id\":\"backbone\"}},[_vm._v(\"Backbone\")])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('a',{staticClass:\"lnk\",attrs:{\"id\":\"print\",\"href\":\"#\"}},[_vm._v(\"Print\")]),_c('a',{staticClass:\"lnk\",attrs:{\"id\":\"helpbtn\",\"href\":\"#\"}},[_vm._v(\"Help\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('a',{staticClass:\"lnk\",attrs:{\"id\":\"Sidechains\",\"href\":\"#Menu\"}},[_vm._v(\"Sidechains\")]),_c('a',{staticClass:\"lnk\",attrs:{\"id\":\"Neighbors\",\"href\":\"#Menu\"}},[_vm._v(\"Neighbors\")]),_c('a',{staticClass:\"lnk active\",attrs:{\"id\":\"Ligands\",\"href\":\"#Menu\"}},[_vm._v(\"Ligands\")]),_c('a',{staticClass:\"lnk\",attrs:{\"id\":\"Water\",\"href\":\"#Menu\"}},[_vm._v(\"Water\")])])}]\n\nexport { render, staticRenderFns }","<template>\n    <div id=\"Menu\" class=\"panel abs floating level7\">\n      <a href=\"#\" class=\"close\"></a>\n      <div>\n        <a class=\"lnk\" id='print' href=\"#\">Print</a>\n        <a class=\"lnk\" id='helpbtn' href=\"#\">Help</a>\n      </div>\n      <div>\n        <a class=\"lnk\" id='Sidechains' href=\"#Menu\">Sidechains</a>\n        <a class=\"lnk\" id='Neighbors' href=\"#Menu\">Neighbors</a>\n        <a class=\"lnk active\" id='Ligands' href=\"#Menu\">Ligands</a>\n        <a class=\"lnk\" id='Water' href=\"#Menu\">Water</a>\n      </div>\n      <select v-model=\"selected\" @change=\"onChange($event)\">\n        <option id='ribbon' selected>Ribbon</option>\n        <option id='sphere'>Sphere</option>\n        <option id='backbone'>Backbone</option>\n      </select>\n      <!-- <span>SElected: {{selected}} </span> -->\n    </div>\n</template>\n<script>\n\nimport { screenshot } from '../AquariaLayout/helpers/Screenshot'\nimport store from '../../store/index'\nimport * as Panels from '../AquariaLayout/helpers/hidePanels'\nexport default {\n  name: 'Menu',\n  data () {\n    return {\n      selected: 'Ribbon'\n    }\n  },\n  methods: {\n    onChange: function (event) {\n      const id = event.target.value.toLowerCase()\n      document.querySelector('#threeDSpan-inner-menu-' + id).click()\n    },\n    showHelp: function () {\n      var _this = this\n      store.commit('setHelpTitle', 'Aquaria Help')\n      store.commit('setUserStatus', false)\n      document.getElementById('UserHelp').classList.remove('hide')\n      document.getElementById('UserHelp').className += (' show')\n      if (!document.querySelector('div.dimmer')) {\n        Panels.overlay()\n        document.querySelector('div.dimmer').className += ' level7'\n      }\n      document.querySelector('div.dimmer').addEventListener('click', function () {\n        Panels.RemoveOverlay()\n        document.getElementById('UserHelp').classList.remove('show')\n        document.getElementById('UserHelp').className += (' hide')\n        var elem = {}\n        elem.target = document.querySelector('#helpbtn')\n        _this.toggleActive(elem)\n      })\n    },\n    toggleActive: function (ev) {\n      if (ev.target.className === 'lnk active') {\n        ev.target.className = 'lnk'\n      } else {\n        ev.target.className = 'lnk active'\n      }\n    }\n  },\n  mounted () {\n    var _this = this\n    document.querySelector('#print').addEventListener('click', async function (ev) {\n      ev.preventDefault() // prevent default navigation\n      const screenshotHref = await screenshot(7680, 4320, 0, 0)\n      // construct a temporary anchor element with a download attribute and click it\n      const a = document.createElement('a')\n      a.href = screenshotHref // href is always a string. whether blob uri (Object URL) or data uri depends on browser support\n      a.download = 'aquaria-screenshot.png' // @TODO consider a more meaningful filename here. maybe use protein name w/ a timestamp\n      a.click()\n    })\n    // document.querySelector('#xr').addEventListener('click', function (ev) {\n    //   ev.preventDefault() // prevent default navigation\n    //   document.querySelector('.xr-menu-button').click()\n    // })\n    document.querySelector('#helpbtn').addEventListener('click', function (ev) {\n      ev.preventDefault() // prevent default navigation\n      _this.toggleActive(ev) // toggle active state\n      _this.showHelp()\n    })\n    document.querySelector('#Sidechains').addEventListener('click', function (ev) {\n      ev.preventDefault() // prevent default navigation\n      _this.toggleActive(ev) // toggle active state\n      document.querySelector('#threeDSpan-inner > div.jolecule-embed-header.jolecule-embed-toolbar > span:nth-child(6)').click()\n    })\n    document.querySelector('#Neighbors').addEventListener('click', function (ev) {\n      ev.preventDefault() // prevent default navigation\n      _this.toggleActive(ev) // toggle active state\n      document.querySelector('#threeDSpan-inner > div.jolecule-embed-header.jolecule-embed-toolbar > span:nth-child(7)').click()\n    })\n    document.querySelector('#Ligands').addEventListener('click', function (ev) {\n      ev.preventDefault() // prevent default navigation\n      _this.toggleActive(ev) // toggle active state\n      document.querySelector('#threeDSpan-inner-menu-ligand').click()\n    })\n    document.querySelector('#Water').addEventListener('click', function (ev) {\n      ev.preventDefault() // prevent default navigation\n      _this.toggleActive(ev) // toggle active state\n      document.querySelector('#threeDSpan-inner-menu-water').click()\n    })\n  }\n}\n</script>\n<style scoped>\n/* Menu */\n  @media only screen and (max-width: 570px) {\n    #Menu:target.panel.floating {\n    display: flex;\n    background-color: transparent;\n    width: 136px;\n    border-radius: 0.25rem;\n    top: 3rem;\n    right: 1rem;\n    }\n  }\n  @media only screen and (min-width: 571px) {\n    #Menu:target.panel.floating {\n    display: flex;\n    background-color: transparent;\n    width: 136px;\n    border-radius: 0.25rem;\n    top: 1rem;\n    right: 1rem;\n    }\n  }\n\n  #Menu a.lnk {\n    color: var(--text);\n    display: block;\n    background-color: var(--secondary-label);\n    border-radius: 0.25em;\n    padding: 0.2em 0.6em;\n    margin: 2px 0;\n    text-decoration: none;\n  }\n  #Menu a.lnk.active {\n    background-color: var(--primary-highlight);\n  }\n  #Menu a.lnk:hover {\n      background-color: var(--primary-link)\n  }\n  #Menu div {\n      margin-bottom: 4px;\n  }\n  #Menu select {\n      color: var(--text);\n      background-color: var(--primary-highlight);\n      border-radius: 0.25em;\n      border: 0px none;\n      padding: 0.2em;\n      margin: 2px 0;\n  }\n #Menu.panel .close::after {\n    top: -0.5rem;\n    right: -0.5rem;\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Menu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Menu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Menu.vue?vue&type=template&id=03995c7c&scoped=true&\"\nimport script from \"./Menu.vue?vue&type=script&lang=js&\"\nexport * from \"./Menu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Menu.vue?vue&type=style&index=0&id=03995c7c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"03995c7c\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div id=\"header\">\n        <div id=\"logo\" class=\"item fix level3\"><a href=\"#About\" @click=\"showScrim\"><img v-bind:src=\"aquariasymbol\" /></a></div>\n        <Title />\n        <div id=\"menu-btn\" class=\"item fix level3\"><a href=\"#Menu\"><img v-bind:src=\"hamburger\" /></a></div>\n        <Menu />\n    </div>\n</template>\n<script>\nimport Title from './Title'\nimport Menu from './Menu'\nimport store from '../../store/index'\nexport default {\n  name: 'Header',\n  components: {\n    Title,\n    Menu\n  },\n  data () {\n    return {\n      aquariasymbol: require('../../assets/images/aquaria-symbol-01.svg'),\n      hamburger: require('../../assets/images/aquaria-menu.svg')\n    }\n  },\n  methods: {\n    showScrim: function () {\n      store.commit('setHash', window.location.hash)\n      document.querySelector('#scrim').className = 'show level3'\n      document.querySelector('#xr-button').click()\n    }\n  }\n}\n</script>\n<style scoped>\n#header {\n  display: flex;\n  flex-flow: row nowrap;\n  /* Then we define how to distribute the remaining space */\n  justify-content: space-between;\n  margin-top: 0.5rem;\n  width: 100%;\n  height: 4em;\n}\n.item {\n    flex-grow: 0;\n    flex-basis: calc(2rem + 3 * ((100vw - 320px) / 680));\n    display: flex;\n}\n.item a {\n    display: flex;\n}\n.item  img {\n    height: calc(1.75rem + 2vh);\n}\n#menu-btn {\n    right: 2vh;\n    top: 2vh;\n}\n#menu-btn.item img {\n    opacity: 0.8;\n    height: calc(1rem + 1vh);\n}\n#menu-btn.item img:hover {\n    opacity: 1;\n}\n#logo {\n    left: 1vw;\n    top: 0.75vw;\n}\nstrong {\n    font-weight: 600;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Header.vue?vue&type=template&id=34ef906a&scoped=true&\"\nimport script from \"./Header.vue?vue&type=script&lang=js&\"\nexport * from \"./Header.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Header.vue?vue&type=style&index=0&id=34ef906a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"34ef906a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel overlay about level3\",attrs:{\"id\":\"Sequence\"}},[_c('SearchPanel'),_c('AboutUniprot')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"searchByName\"}},[_c('p',[_vm._v(\"Organism\")]),_c('SearchOrganism'),_vm._m(0),_c('p',[_vm._v(\"Protein\")]),_c('SearchProtein'),_c('div',{attrs:{\"id\":\"psyns\"}},[_c('p',[_vm._v(\"(example: \"),_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){return _vm.fillin('p53')}}},[_vm._v(\"p53\")]),_vm._v(\" or \"),_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){return _vm.fillin('P04637');}}},[_vm._v(\"P04637\")]),_vm._v(\")\")])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"osyns\"}},[_c('p',[_vm._v(\" \")])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('autocomplete',{ref:\"autocomplete\",attrs:{\"id\":\"organism_syn_input\",\"search\":_vm.search,\"get-result-value\":_vm.getResultValue},on:{\"submit\":_vm.handleSubmit}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n      <autocomplete\n      id=\"organism_syn_input\"\n      :search=\"search\"\n      :get-result-value=\"getResultValue\"\n      @submit=\"handleSubmit\"\n      ref=\"autocomplete\"\n    ></autocomplete>\n    </div>\n</template>\n<script>\nimport axios from 'axios'\nimport * as textpanel from '../InfoAbout/helpers/textpanels'\n// import * as resizeApp from '../AquariaLayout/helpers/resize_app'\n// import $ from 'jquery'\nimport store from '../../store/index'\nimport Autocomplete from '@trevoreyre/autocomplete-vue'\nimport '@trevoreyre/autocomplete-vue/dist/style.css'\n\nexport default {\n  name: 'SearchOrganism',\n  components: {\n    Autocomplete\n  },\n  data () {\n    return {\n      OrganismSynonyms: {}\n    }\n  },\n  computed: {\n    data () {\n      return {\n        OrgID: store.state.OrgID,\n        Organism: store.state.Organism\n      }\n    }\n  },\n  methods: {\n    getResultValue (result) {\n      return result.value\n    },\n    handleSubmit (result) {\n      var _this = this\n      // var AQUARIA = window.AQUARIA\n      if (result.value &&\n          result.value.indexOf('No organisms for: ') !== 0) {\n        if (result.id !== _this.data.OrgID) {\n          const url = `${window.BACKEND}/getOrganismSynonyms`\n          axios({\n            method: 'get',\n            url: url,\n            params: {\n              organism_id: result.id\n            }\n          })\n            .then(function (response) {\n              const orgNames = response.data\n              store.commit('setOrgID', result.id)\n              // AQUARIA.Organism.ID = result.id\n              localStorage.preferred_organism_name = result.value\n              textpanel.displayOrgSynonyms(orgNames)\n              document.querySelector('#organism_syn_input').setAttribute('size', result.value.length)\n            })\n        }\n      }\n    },\n    clear () {\n      this.value = ''\n      this.$refs.autocomplete.value = ''\n    },\n    search (input) {\n      var _this = this\n      var OrganismSynonyms = this.OrganismSynonyms\n      // resizeApp.startLogoSpin()\n      var labelValues\n      var term = input\n      this.value = input\n      //   const url = `${wikiUrl}/w/api.php?${\n      //     params\n      //   }&srsearch=${encodeURI(input)}`\n\n      return new Promise(resolve => {\n        if (term in OrganismSynonyms) {\n          resolve(OrganismSynonyms[term])\n          return\n        };\n        if (term !== '') {\n          var url = `${window.BACKEND}/getQueryOrganism/${term}`\n          axios({\n            method: 'get',\n            url: url\n          })\n            .then(function (res) {\n              const data = res.data\n              // AQUARIA.remote.queryOrganism(term,\n              // resize_appstopLogoSpin();\n              if (data.length > 0) {\n                labelValues = data.map(function (item) {\n                  return {\n                    label: item.Synonym,\n                    value: item.Synonym,\n                    id: item.Organism_ID\n                  }\n                })\n\n                OrganismSynonyms[term] = labelValues\n              } else {\n                labelValues = {\n                  label: 'No organisms for: ' + term,\n                  value: 0\n                }\n              }\n              document.querySelector('#autocomplete-result-list-1').style.zIndex = 99\n              document.querySelector('.autocomplete-result-list').style.maxHeight = '390px'\n              resolve(labelValues)\n            })\n        } else {\n          labelValues = {\n            label: _this.data.Organism,\n            value: _this.data.OrgID\n          }\n          resolve(labelValues)\n        }\n      })\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchOrganism.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchOrganism.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchOrganism.vue?vue&type=template&id=1b521cfe&\"\nimport script from \"./SearchOrganism.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchOrganism.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('autocomplete',{ref:\"autocomplete\",attrs:{\"id\":\"protein_syn_input\",\"search\":_vm.search,\"get-result-value\":_vm.getResultValue},on:{\"submit\":_vm.handleSubmit}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <autocomplete\n    id=\"protein_syn_input\"\n    :search=\"search\"\n    :get-result-value=\"getResultValue\"\n    @submit=\"handleSubmit\"\n    ref=\"autocomplete\"\n  ></autocomplete>\n</template>\n<script>\nimport axios from 'axios'\nimport * as textpanel from '../InfoAbout/helpers/textpanels'\n// import * as resizeApp from '../AquariaLayout/helpers/resize_app'\nimport Autocomplete from '@trevoreyre/autocomplete-vue'\nimport '@trevoreyre/autocomplete-vue/dist/style.css'\nimport * as LoadAQUARIA from '../../utils/loadData'\nimport store from '../../store/index'\n\nexport default {\n  name: 'SearchProtein',\n  components: {\n    Autocomplete\n  },\n  data () {\n    return {\n      callbackData: {\n        names: [],\n        ids: [],\n        pdbIDs: []\n      },\n      cacheProteinSynonyms: {},\n      term: null,\n      proteinSynonymOrgId: null,\n      pdbId: null,\n      collectResponsevalues: null\n    }\n  },\n  methods: {\n    getResultValue (result) {\n      return (result.value + ' (' + result.id + ')')\n    },\n    clear () {\n      this.value = ''\n      this.$refs.autocomplete.value = ''\n    },\n    handleSubmit (result) {\n      var _this = this\n      var AQUARIA = window.AQUARIA\n      if (result.value &&\n          result.value.indexOf('No structures for: ') !== 0) {\n        var primaryAccession = result.id\n        if (primaryAccession.indexOf('/') > -1) {\n          var parts = primaryAccession.split('/')\n          primaryAccession = parts[0]\n          _this.pdbId = parts[1]\n        }\n        if (result.type === 'PDB') {\n          console.log('AQUARIA.proteinAutocomplete.select pdb', result.value)\n          store.commit('showLoader', true)\n          store.commit('setLoaderMsg', 'Waiting for data...')\n          //   var chain = null\n          var url = `${window.BACKEND}/getAccessionForPDB/${result.value}`\n          axios({\n            method: 'get',\n            url: url\n          })\n            .then(function (response) {\n              const accessionObject = response.data\n              LoadAQUARIA.loadAccession([accessionObject.Accession], result.value, null, false, accessionObject.Accession)\n            })\n            // AQUARIA.remote.getAccessionForPDB(ui.item.value, chain, function(accessionObject) {\n          // })\n        } else if (result.id === AQUARIA.protein_primary_accession) {\n          if (result.value === AQUARIA.preferred_protein_name) {\n            store.commit('showLoader', false)\n            // do nothing\n          } else {\n            console.log('AQUARIA.proteinAutocomplete.select same protein, different name', result.value)\n\n            AQUARIA.preferred_protein_name = result.value\n            // AQUARIA.remote.getProteinSynonyms(AQUARIA.protein_primary_accession, //localStorage.organism_id, displayProtSynonyms, null);\n            url = `${window.BACKEND}/getProteinSynonyms/${AQUARIA.protein_primary_accession};`\n            axios({\n              method: 'get',\n              url: url\n            })\n              .then(function (response) {\n                textpanel.displayProtSynonyms(response.data)\n              })\n            // Figure out a way to bring currentData\n            //   AQUARIA.update3DTitle(AQUARIA.structures2match.source_primary_accession,\n            //     currentData.pdb_id, AQUARIA.currentChain, AQUARIA.molecule_name, AQUARIA.currentMember.alignment_identity_score)\n            //   AQUARIA.updateDocumentTitle(AQUARIA.currentMember.alignment_identity_score, currentData.pdb_id, AQUARIA.currentChain)\n            //   featurelist.updateFeatureTabTitle(AQUARIA.preferred_protein_name)\n          }\n        } else {\n          /// console.log('AQUARIA.proteinAutocomplete.select new protein', ui.item.value);\n          document.querySelector('#protein_syn_input').placeholder = result.value\n          document.querySelector('#protein_syn_input').value = ''\n          store.commit('showLoader', true)\n          store.commit('setLoaderMsg', 'Waiting for data...')\n          LoadAQUARIA.loadAccession([primaryAccession], _this.pdbId, null, false, result.value)\n        }\n      } else {\n        event.preventDefault()\n      }\n    },\n    search (input) {\n      var AQUARIA = window.AQUARIA\n      var _this = this\n      _this.term = input\n      _this.callbackData.LRU = _this.getLRU()\n      return new Promise(resolve => {\n        if (_this.term === '') {\n          _this.collectResponse()\n          if (_this.collectResponsevalues) {\n            resolve(_this.collectResponsevalues)\n          }\n        } else {\n          // resizeApp.startLogoSpin()\n          _this.proteinSynonymOrgId = _this.term + '%' + AQUARIA.Organism.ID\n          if (_this.proteinSynonymOrgId in _this.cacheProteinSynonyms) {\n            resolve(_this.cacheProteinSynonyms[_this.proteinSynonymOrgId])\n            return\n          };\n          document.querySelector('.autocomplete-result-list').style.maxHeight = '390px'\n          var url = `${window.BACKEND}/queryProtein/${_this.term}/${AQUARIA.Organism.ID}`\n          axios({\n            method: 'get',\n            url: url\n          })\n            .then(function (response) {\n              const data = response.data\n              if (!isNaN(parseInt(_this.term.charAt(0)))) {\n                _this.pdbCallback(data)\n                if (_this.collectResponsevalues) {\n                  resolve(_this.collectResponsevalues)\n                }\n              } else {\n                if (data.length > 0) {\n                  if (data[0].isID === 0) {\n                    _this.nameCallback(data)\n                    if (_this.collectResponsevalues) {\n                      resolve(_this.collectResponsevalues)\n                    }\n                  } else {\n                    _this.idCallback(data)\n                  }\n                } else {\n                  if (data.isID === 0) {\n                    _this.nameCallback(data)\n                    if (_this.collectResponsevalues) {\n                      resolve(_this.collectResponsevalues)\n                    }\n                  } else {\n                    _this.idCallback(data)\n                    if (_this.collectResponsevalues) {\n                      resolve(_this.collectResponsevalues)\n                    }\n                  }\n                }\n              }\n            })\n        }\n      })\n    },\n    getLRU: function () {\n      return window.AQUARIA.proteinTopTen.getAll().map(function (item) {\n        return {\n          label: item.name,\n          suffix: item.primary_accession + ', ' + item.pdb_id,\n          value: item.name,\n          type: 'LRU',\n          category: 'Recent',\n          id: item.primary_accession + '/' + item.pdb_id\n        }\n      })\n    },\n    collectResponse: function () {\n      var _this = this\n      var lruMatches = _this.callbackData.LRU\n      if (lruMatches.length > 0 && _this.term && _this.term.length > 0) {\n        lruMatches = lruMatches.filter(function (val) {\n          return val.label.toLowerCase().startsWith(_this.term.toLowerCase())\n        })\n      }\n      var showPopup = true\n      var allValues = lruMatches.concat(_this.callbackData.names).concat(_this.callbackData.ids).concat(_this.callbackData.pdbIDs)\n      if (allValues.length === 0) {\n        if (_this.term && _this.term.length > 0) {\n          allValues = [{\n            label: 'No structures for: ' + _this.term,\n            value: 0\n          }]\n        } else {\n          showPopup = false\n        }\n      }\n      /// console.log('AQUARIA.proteinAutocomplete received', allValues)\n      _this.cacheProteinSynonyms[_this.proteinSynonymOrgId] = allValues\n      if (showPopup) {\n        _this.collectResponsevalues = allValues\n      }\n    },\n    // Autocomplete for gene name\n    nameCallback: function (nameData) {\n      var labelValues\n      var _this = this\n      labelValues = nameData.map(function (item) {\n        return {\n          label: item.Synonym,\n          suffix: null,\n          value: item.Synonym,\n          type: 'Synonym',\n          category: 'Names',\n          id: item.Primary_Accession,\n          organism: item.Organism_ID\n        }\n      })\n      labelValues.sort(function (a, b) {\n        return a.label > b.label ? 1 : -1\n      })\n      labelValues.reduce(function (previous, current) {\n        var a = previous\n        var b = current\n        if (a && a.value === b.value) {\n          if (a.dup) {} else {\n            a.suffix = a.id\n            a.dup = true\n          }\n          if (b.dup) {\n\n          } else {\n            b.suffix = b.id\n            b.dup = true\n          }\n        }\n        return current\n      }, null)\n      _this.callbackData.names = labelValues\n      _this.collectResponse()\n      // resizeApp.stopLogoSpin()\n    },\n    // Autocomplete for Primary Accession\n    idCallback: function (idData) {\n      var _this = this\n      var labelValues\n      labelValues = idData.map(function (item) {\n        var suffix = item.Source_Field\n        if (suffix === 'AC' || suffix === 'ID') {\n          suffix = 'UniProt'\n        }\n        return {\n          label: item.Synonym,\n          suffix: suffix,\n          value: item.Synonym,\n          type: suffix,\n          category: 'Identifiers',\n          id: item.Primary_Accession\n        }\n      })\n      labelValues.sort(function (a, b) {\n        return a.label > b.label ? 1 : -1\n      })\n      _this.callbackData.ids = labelValues\n      _this.collectResponse()\n      // resizeApp.stopLogoSpin()\n    },\n    // Autocomplete for PDB\n    pdbCallback: function (pdbData) {\n      var _this = this\n      var labelValues\n      labelValues = pdbData.map(function (item) {\n        return {\n          label: item.Synonym,\n          suffix: 'PDB',\n          type: 'PDB',\n          value: item.Synonym,\n          category: item.Category,\n          id: item.Synonym\n        }\n      })\n      _this.callbackData.pdbIDs = labelValues\n      _this.collectResponse()\n      // resizeApp.stopLogoSpin()\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchProtein.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchProtein.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchProtein.vue?vue&type=template&id=978276ba&\"\nimport script from \"./SearchProtein.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchProtein.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"searchByName\">\n    <p>Organism</p>\n    <SearchOrganism/>\n    <div id='osyns'>\n      <p>&nbsp;</p>\n    </div>\n    <p>Protein</p>\n    <SearchProtein/>\n    <div id='psyns'>\n      <p>(example: <a href=\"#\" v-on:click=\"fillin('p53')\">p53</a> or <a href=\"#\" v-on:click=\"fillin('P04637');\">P04637</a>)</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport $ from 'jquery'\nimport SearchOrganism from './SearchOrganism'\nimport SearchProtein from './SearchProtein'\nexport default {\n  components: {\n    SearchOrganism,\n    SearchProtein\n  },\n  name: 'SearchPanel',\n  data () {\n    return {\n      search: require('../../assets/img/search_dark.png')\n    }\n  },\n  methods: {\n    fillin: function (term) {\n      document.getElementById('protein_syn_input').value = term\n      setTimeout(function () {\n        window.location.href = '/P04637'\n      }, 300)\n    },\n    selectOrganism: function (event) {\n\n    },\n    placeholderText: function (organism, protein) {\n      var orgInput = document.querySelector('#organism_syn_input')\n      var protInput = document.querySelector('#protein_syn_input')\n      orgInput.placeholder = organism\n      orgInput.setAttribute('size', orgInput.getAttribute('placeholder').length)\n      protInput.placeholder = protein\n      protInput.setAttribute('size', protInput.getAttribute('placeholder').length)\n\n      $('#organism_syn_input').focus(function () {\n        $(this).attr('placeholder', 'Specify an organism')\n        orgInput.setAttribute('size', orgInput.getAttribute('placeholder').length)\n      }).blur(function () {\n        $(this).attr('placeholder', organism)\n        orgInput.setAttribute('size', orgInput.getAttribute('placeholder').length)\n      })\n\n      $('#protein_syn_input').focus(function () {\n        $(this).attr('placeholder', 'Specify a protein')\n        protInput.setAttribute('size', protInput.getAttribute('placeholder').length)\n      }).blur(function () {\n        $(this).attr('placeholder', protein)\n        protInput.setAttribute('size', protInput.getAttribute('placeholder').length)\n      })\n    }\n  }\n}\n</script>\n\n<style>\n#searchByName {\n  width: 100%;\n}\n.contents p {\n  margin: 0.5em 0;\n}\n  input {\n    z-index: 40;\n    border: none;\n    color: #333333;\n    padding: 0.2rem 0.5rem;\n    font-size: 0.9rem;\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchPanel.vue?vue&type=template&id=2d21ac4c&\"\nimport script from \"./SearchPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchPanel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SearchPanel.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"scrollable\",attrs:{\"data-intro\":\"UniProt summary of the specified protein's function.\",\"data-position\":\"right\"}},[_vm._m(0),(_vm.uniprotDesc)?_c('div',{attrs:{\"id\":\"uniProtDesc\"}}):_vm._e(),_vm._l((_vm.descriptions),function(description,i){return _c('div',{key:i,staticClass:\"expandable\"},[_c('expandable-text-line',{attrs:{\"use-click\":\"\"}},[_c('p',[_c('strong',[_vm._v(_vm._s(description[0]))]),_vm._v(\" : \"+_vm._s(description[1]))])])],1)})],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"gsyns\"}},[_c('p',[_vm._v(\"Genes:  \")])])}]\n\nexport { render, staticRenderFns }","<template>\n    <!-- About Uniprot -->\n    <div data-intro=\"UniProt summary of the specified protein's function.\" data-position=\"right\" class=\"scrollable\">\n      <div style=\"display:none;\"\n            id='gsyns'>\n        <p>Genes: &nbsp;</p>\n      </div>\n      <div id=\"uniProtDesc\" v-if=\"uniprotDesc\"></div>\n        <div v-for=\"(description, i) in descriptions\" :key=\"i\" class='expandable'>\n        <expandable-text-line  use-click>\n          <p><strong>{{description[0]}}</strong> : {{description[1]}}</p>\n        </expandable-text-line>\n      </div>\n    </div>\n</template>\n\n<script>\nimport ExpandableTextLine from 'vue-expandable-text-line'\n\nexport default {\n  name: 'AboutUniprot',\n  components: {\n    ExpandableTextLine\n  },\n  data () {\n    return {\n      uniprotDesc: null,\n      sections: [],\n      descriptions: [],\n      a: [1, 2, 3],\n      tightSections: [],\n      desc: null,\n      list: []\n    }\n  },\n  mounted () {\n    var _this = this\n    _this.waitForElement()\n  },\n  methods: {\n    waitForElement: function () {\n      var _this = this\n      if (!window.AQUARIA.structures2match.sequences) {\n        setTimeout(_this.waitForElement, 50)\n      } else if (!window.AQUARIA.structures2match.sequences[0]) {\n        setTimeout(_this.waitForElement, 50)\n      } else {\n        _this.uniprotDesc = window.AQUARIA.structures2match.sequences[0].description\n        _this.updateUniprotInfo(_this.uniprotDesc)\n      }\n    },\n    updateUniprotInfo: function (info) {\n      var _this = this\n      _this.list = []\n      _this.tightSections = []\n      var patt = /\\n[A-Z ]+:.*?$/\n      function extractLines () {\n        if (info && info.length > 0) {\n          var match = info.match(patt)\n          if (match !== null) {\n            _this.sections.unshift(match[0].split(': '))\n            info = info.replace(match[0], '')\n            extractLines()\n          } else {\n            _this.sections.unshift(info.split(': '))\n          }\n        }\n      }\n\n      extractLines()\n      this.sections.forEach(function (k) {\n        // format URLs\n        if (k[1].indexOf('URL=') !== -1) { /// /console.log(\"URL found in section[\"+k+\"]\");\n          var linkCode = ''; var lhref = ''; var lname = ''; var ltitle = ''\n          var parts = k[1].split(';')\n          parts.forEach(function (n) { // parts is max. 3 strings (Name, URL, Note)\n            n = n.split('=') /// /console.log(\"parts[\"+n+\"]: \"+ parts[n].toString());\n            if (n[0].indexOf('URL') !== -1) { lhref = n[1] }\n            if (n[0].indexOf('Name') !== -1) { lname = n[1] }\n            if (n[0].indexOf('Note') !== -1) { ltitle = n[1] }\n          })\n          linkCode = '<a href=' + lhref + ' title=\"' + ltitle + '\" target=\"_blank\">' + lname + '</a>' /// /console.log(\"linkCode: \"+linkCode);\n          k[1] = linkCode\n        }\n      })\n\n      function makeLists (fromCollection) { // convert items with the same header to bullet lists:\n        var list = null\n        for (var n = 0; n < fromCollection.length; n++) {\n          if (n < fromCollection.length - 2) {\n            var head = fromCollection[n][0]\n            var nextHead = fromCollection[(n + 1)][0]\n            // if the next header matches the current header, start a bullet list\n            if (nextHead === head) {\n              if (list === null) { list = '<ul>' }\n              list += '<li>' + fromCollection[n][1] + '</li>'\n            } else {\n              if (list === null) { // no open list\n                // since the next header is different, add the current item to the new array\n                _this.tightSections.push(fromCollection[n])\n              } else { // make a list item, close the list, and add it to the new array\n                list += '<li>' + fromCollection[n][1] + '</li></ul>'\n                var newList = [head, list]\n                _this.tightSections.push(newList)\n                list = null\n              }\n            }\n          } else { // n has reached the end of the sections array\n            if (list === null) { // no open list\n              _this.tightSections.push(fromCollection[n])\n            } else {\n              list += '<li>' + fromCollection[n][1] + '</li></ul>'\n              newList = [head, list]\n              _this.tightSections.push(newList)\n              list = null\n            }\n          }\n        } /// /console.log(tightSections.toString());\n        return _this.tightSections\n      }\n      var finalList = makeLists(_this.sections)\n      finalList.forEach(function (section) {\n        var EachSec = ''\n        if (section.length > 2) {\n          for (var i = 1; i < section.length; i++) {\n            EachSec = EachSec + ' ' + section[i]\n          }\n          section[1] = EachSec\n        }\n        _this.list.push(section)\n      })\n      _this.descriptions = _this.list\n    }\n  }\n  // updated () {\n  //   var _this = this\n  //   // this.sections = window.AQUARIA.structures2match.sequences[0].description\n  //   this.updateUniprotInfo(this.uniprotDesc)\n  // }\n}\n</script>\n\n<style scoped>\n.expandable {\n  margin: 8px 0px;\n  /* cursor: ns-resize; */\n}\n.expandable-text-line {\n  cursor: s-resize;\n}\n.expandable-text-line.__extl-expanded{\n  cursor: n-resize;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AboutUniprot.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AboutUniprot.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AboutUniprot.vue?vue&type=template&id=d77ebc60&scoped=true&\"\nimport script from \"./AboutUniprot.vue?vue&type=script&lang=js&\"\nexport * from \"./AboutUniprot.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AboutUniprot.vue?vue&type=style&index=0&id=d77ebc60&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d77ebc60\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div id=\"Sequence\" class=\"panel overlay about level3\">\n      <SearchPanel />\n      <AboutUniprot />\n    </div>\n</template>\n<script>\nimport SearchPanel from '../Search/SearchPanel'\nimport AboutUniprot from './AboutUniprot'\nexport default {\n  name: 'Sequence',\n  components: {\n    SearchPanel,\n    AboutUniprot\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sequence.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sequence.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Sequence.vue?vue&type=template&id=70424d2c&\"\nimport script from \"./Sequence.vue?vue&type=script&lang=js&\"\nexport * from \"./Sequence.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel overlay about level3\",attrs:{\"id\":\"Alignment\"}},[_c('div',{staticClass:\"scrollable\"},[(_vm.data.alignment)?_c('p',{staticClass:\"spacer\"},[_vm._v(\" \")]):_vm._e(),_c('p',[_vm._v(\"What you see in the 3D viewer is the experimentally-determined structure of \"+_vm._s(_vm.pdbName)+\" from \"),_c('a',{attrs:{\"href\":\"http://www.rcsb.org/pdb/explore.do?structureId={{}}\",\"target\":\"_blank\"}},[_vm._v(\" PDB entry \"+_vm._s(_vm.pdbId))]),_vm._v(\"chain \"+_vm._s(_vm.chainId)+\". \")]),_c('p',[_vm._v(\" The full-length sequence of the protein you specified (\"+_vm._s(_vm.uniprotName)+\") has been aligned onto the sequence used to determine this PDB structure.\")]),_c('p',[_vm._v(\" Overall, the two sequences align with \"+_vm._s(_vm.score)+\"% identity; any amino acid substitutions are indicated using dark coloring (see legend).\")]),_c('p',{staticClass:\"quality\"},[_vm._v(\" This alignment has an HHblits E-value of \"+_vm._s(_vm.evalueString)+\" × \"),_c('nobr',[_vm._v(\"10\"),_c('sup',[_vm._v(_vm._s(_vm.power))])]),_vm._v(\", which is considered to be \"+_vm._s(_vm.quality)+\". Based on cross-validation, the likelihood that your specified protein (\"+_vm._s(_vm.uniprotName)+\") adopts a structure similar to that shown is estimated to be \"+_vm._s(_vm.precisiontxt)+\"%.\")],1),_c('p',[_vm._v(\"Note that the structure shown is taken directly from the PDB; it has not been derived by ab-initio or comparative modeling.\")]),(_vm.data.alignment)?_c('div',[_c('p',[_c('b',[_vm._v(\"Alignment:\")]),_c('br'),_c('pre',[_vm._v(_vm._s(_vm.data.alignment))])])]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <!-- About Alignment -->\n    <div id=\"Alignment\" class=\"panel overlay about level3\" >\n      <div class=\"scrollable\">\n        <p class=\"spacer\" v-if=\"data.alignment\">&nbsp;</p>\n        <p>What you see in the 3D viewer is the experimentally-determined structure of {{pdbName}} from\n        <a href='http://www.rcsb.org/pdb/explore.do?structureId={{}}' target='_blank'> PDB entry {{pdbId}}</a>chain {{chainId}}.\n        </p>\n        <p> The full-length sequence of the protein you specified ({{uniprotName}}) has been aligned onto the sequence used to determine this PDB structure.</p>\n        <p> Overall, the two sequences align with {{score}}% identity; any amino acid substitutions are indicated using dark coloring (see legend).</p>\n        <p class='quality'> This alignment has an HHblits E-value of {{evalueString}} &times; <nobr>10<sup>{{power}}</sup></nobr>, which is considered to be {{quality}}.\n            Based on cross-validation, the likelihood that your specified protein ({{uniprotName}}) adopts a structure similar to that shown is estimated to be {{precisiontxt}}%.</p>\n            <p>Note that the structure shown is taken directly from the PDB; it has not been derived by ab-initio or comparative modeling.</p>\n        <div v-if=\"data.alignment\"> <!-- :use-click=\"hover\" -->\n            <!-- <p v-if=\"$mq === 'laptop' || $mq === 'tablet'\"><b>Alignment:</b><br/> -->\n            <p><b>Alignment:</b><br/>\n              <pre>{{ data.alignment }}</pre>\n            </p>\n        </div>\n      </div>\n    </div>\n</template>\n<script>\nimport store from '../../store/index'\nimport $ from 'jquery'\nimport d3 from 'd3'\nimport * as Panels from '../AquariaLayout/helpers/hidePanels'\n// import ExpandableTextLine from 'vue-expandable-text-line'\n\nexport default {\n  name: 'AboutAlignment',\n  // components: {\n  //   ExpandableTextLine\n  // },\n  // props: ['alignment'],\n  computed: {\n    data () {\n      return {\n        alignment: store.state.alignment\n      }\n    }\n  },\n  data () {\n    return {\n      pdbName: null,\n      pdbId: null,\n      chainId: null,\n      score: null,\n      qualClass: null,\n      evalueString: null,\n      quality: null,\n      uniprotName: null,\n      precisiontxt: null,\n      power: null\n    }\n  },\n  beforeMount () {\n    const _this = this\n\n    window.AQUARIA.explainTitle = function (accession, uniprotName, pdbName, pdbId, chainId, score, evalue) {\n      _this.pdbName = pdbName\n      _this.pdbId = pdbId\n      _this.chainId = chainId\n      _this.score = score\n      _this.uniprotName = uniprotName\n      var Log10E\n      Log10E = -Math.log(evalue) / Math.LN10\n      var precision = (_this.BioScience_PlantDisease_Weibull_model(Log10E) * 100)\n      precision = Math.round(precision)\n      _this.evalueString = evalue.toString().split('e')[0]\n      _this.power = evalue.toString().split('e')[1]\n      if (evalue === 0 && precision === 1) {\n        _this.precisiontxt = 'close to 100'\n      } else {\n        _this.precisiontxt = '≥ ' + precision\n      }\n      if (evalue > 10E-72) {\n        _this.quality = 'in the twilight zone'\n        _this.qualClass = 'twilight'\n      } else {\n        _this.quality = 'high quality'\n        _this.qualClass = 'high'\n      }\n    }\n  },\n  methods: {\n    // To the best of my knowledge this code is correct.\n    // If you find any errors or problems please contact\n    // me directly using zunzun@zunzun.com.\n    //\n    // James\n    BioScience_PlantDisease_Weibull_model: function (xIn) {\n      var temp\n      temp = 0.0\n\n      // coefficients\n      var a = -2.9039350989124828E+00\n      var b = 7.9846661459228132E+00\n      var c = 4.4780238831200248E-01\n\n      temp = 1.0 - Math.exp(-1.0 * Math.pow((xIn - a) / b, c))\n      return temp\n    },\n    showBubble: function (msgHtml) {\n      if (document.getElementsByClassName('dimmer').length === 0) {\n        Panels.overlay()\n      }\n      // $('body').append('<div class=\"dimmer\" style=\"opacity: 0.08; -moz-opacity: 0.08;\"></div>');\n      $('span#help3D.roundButton').css('background-position', '0 -21px')\n      document.querySelector('div.dimmer').addEventListener('click', function () {\n        $('div.popup, div.dimmer').fadeOut().remove()\n        $('span#help3D.roundButton').css('background-position', '0 0')\n      })\n\n      var balloon = \"<div class='balloon'><h3>3D View Explained<span class='x'>&nbsp;</span></h3>\"\n\n      balloon = balloon + msgHtml + '</div>'\n      d3.select('body')\n        .append('div')\n        .attr('class', 'popup top')\n        .html(balloon)\n\n      var fpos = $('#help3D').offset()\n\n      var bleft = parseInt(fpos.left - 230)\n      var btop = parseInt(fpos.top + 30)\n\n      $('div.popup').css({\n        left: bleft + 'px',\n        top: btop + 'px'\n      }).draggable().fadeIn(600)\n\n      $('span.x').click(function () {\n        $('div.popup, div.dimmer').fadeOut().remove()\n        $('span#help3D.roundButton').css('background-position', '0 0')\n      })\n    },\n    resetSelection: function () {\n      document.querySelectorAll('#titlebar span').forEach(el => {\n        el.className = 'titlepanel'\n      })\n      document.querySelectorAll('.contents').forEach(el => {\n        el.style.display = 'none'\n      })\n    }\n  },\n  mounted () {\n    this.resetSelection()\n  }\n}\n</script>\n<style scoped>\npre {\n  font-size: clamp(0.5rem, -0.254rem + 1.4141vw, 0.85rem);\n  max-height: 33vh;\n  overflow: auto;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AboutAlignment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AboutAlignment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AboutAlignment.vue?vue&type=template&id=8e892dc6&scoped=true&\"\nimport script from \"./AboutAlignment.vue?vue&type=script&lang=js&\"\nexport * from \"./AboutAlignment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AboutAlignment.vue?vue&type=style&index=0&id=8e892dc6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8e892dc6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel overlay about level3\",attrs:{\"id\":\"Structure\"}},[_c('div',{staticClass:\"scrollable\",attrs:{\"id\":\"description\",\"data-intro\":\"PDB summary for the shown structure.\",\"data-position\":\"bottom\"}},[_c('span',{staticClass:\"content\",attrs:{\"id\":\"description\",\"data-intro\":\"PDB summary for the shown structure.\",\"data-position\":\"bottom\"}},[_c('span',{staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"biounitDisplay\"}},[_c('span',{staticStyle:{\"display\":\"inline-block\"},attrs:{\"id\":\"biounitLeft\",\"title\":\"Navigate to other assemblies\"}},[_vm._v(\"<\")]),_vm._v(\"  \"),_c('span',{staticStyle:{\"display\":\"inline-block\"},attrs:{\"id\":\"biounitType\"}},[_vm._v(\"biounit\")]),_vm._v(\"  \"),_c('span',{staticStyle:{\"display\":\"inline-block\"},attrs:{\"id\":\"biounitCount\"}},[_vm._v(\"x/x\")]),_vm._v(\"   \"),_c('span',{staticStyle:{\"display\":\"inline-block\"},attrs:{\"id\":\"biounitRight\",\"title\":\"Navigate to other assemblies\"}},[_vm._v(\">\")]),_c('a',{attrs:{\"id\":\"helpBiounit\",\"href\":\"https://pdb101.rcsb.org/learn/guide-to-understanding-pdb-data/biological-assemblies#Anchor-BioUnit\",\"target\":\"_blank\",\"title\":\"Go to PDB to view explanation of assembly\"}},[_c('span',{staticClass:\"help roundButton\"})])]),_c('span',{staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"aboutPDBHider\",\"data-intro\":\"PubMed Information about PDB structure\",\"data-position\":\"left\"}},[_c('p',{attrs:{\"id\":\"classification\"}},[_vm._v(\"Classification unavailable\")]),_c('h4',{attrs:{\"id\":\"reference_title\"}},[_vm._v(\"Title unavailable\")]),_c('p',{attrs:{\"id\":\"reference_link\"}},[_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(\"PubMed Link unavailable\")])]),_c('p',{attrs:{\"id\":\"molecule\",\"title\":\"View this structure in Aquaria\",\"data-intro\":\"Information about currently focused PDB chain.\",\"data-position\":\"left\"}},[_c('strong',[_vm._v(\"Molecule: \")]),_c('span',{staticClass:\"text\"},[_vm._v(\"unavailable\")])])]),_c('p',{attrs:{\"id\":\"organism\"}},[_c('strong',[_vm._v(\"Organism: \")]),_c('span',{staticClass:\"text\"},[_vm._v(\"unavailable\")])]),_c('p',{attrs:{\"id\":\"small_molecules\"}},[_c('strong',[_vm._v(\"Small molecules: \")]),_c('span',{staticClass:\"text\"},[_vm._v(\"unavailable\")])]),_c('p',{attrs:{\"id\":\"method\"}},[_c('strong',[_vm._v(\"Method: \")]),_c('span',{staticClass:\"text\"},[_vm._v(\"unavailable\")])]),_c('p',{attrs:{\"id\":\"resolution\"}},[_c('strong',[_vm._v(\"Resolution: \")]),_c('span',{staticClass:\"text\"},[_vm._v(\"unavailable\")])]),_c('p',{attrs:{\"id\":\"pdb\"}},[_c('strong',[_vm._v(\"Protein Data Bank: \")]),_c('span',{staticClass:\"text\"},[_vm._v(\"unavailable\")])])])])])}]\n\nexport { render, staticRenderFns }","<template>\n    <!-- About PDB -->\n    <div id=\"Structure\" class=\"panel overlay about level3\">\n      <div class=\"scrollable\"  id=\"description\" data-intro=\"PDB summary for the shown structure.\" data-position=\"bottom\">\n        <span class=\"content\" id=\"description\" data-intro=\"PDB summary for the shown structure.\" data-position=\"bottom\">\n            <span id=\"biounitDisplay\" style=\"display: none;\">\n                <span id=\"biounitLeft\" style=\"display: inline-block;\" title=\"Navigate to other assemblies\">&lt;</span>\n                &nbsp;<span id=\"biounitType\" style=\"display: inline-block;\">biounit</span>\n                &nbsp;<span id=\"biounitCount\" style=\"display: inline-block;\">x/x</span>\n                &nbsp;\n                <span id=\"biounitRight\" style=\"display: inline-block;\" title=\"Navigate to other assemblies\">&gt;</span>\n                <a id=\"helpBiounit\" href=\"https://pdb101.rcsb.org/learn/guide-to-understanding-pdb-data/biological-assemblies#Anchor-BioUnit\" target=\"_blank\" title=\"Go to PDB to view explanation of assembly\">\n                    <span class=\"help roundButton\"> </span>\n                </a>\n            </span>\n            <span id=\"aboutPDBHider\" style=\"display: none;\" data-intro=\"PubMed Information about PDB structure\" data-position=\"left\">\n                <p id=\"classification\">Classification unavailable</p>\n                <h4 id=\"reference_title\">Title unavailable</h4>\n                <p id=\"reference_link\"><a href=\"#\">PubMed Link unavailable</a></p>\n                <p id=\"molecule\" title=\"View this structure in Aquaria\" data-intro=\"Information about currently focused PDB chain.\" data-position=\"left\">\n                    <strong>Molecule: </strong>\n                    <span class=\"text\">unavailable</span>\n                </p>\n            </span>\n            <p id=\"organism\"><strong>Organism: </strong><span class=\"text\">unavailable</span></p>\n            <p id=\"small_molecules\"><strong>Small molecules: </strong><span class=\"text\">unavailable</span></p>\n            <p id=\"method\"><strong>Method: </strong><span class=\"text\">unavailable</span></p>\n            <p id=\"resolution\"><strong>Resolution: </strong><span class=\"text\">unavailable</span></p>\n            <p id=\"pdb\"><strong>Protein Data Bank: </strong><span class=\"text\">unavailable</span></p>\n        </span>\n      </div>\n    </div>\n</template>\n<script>\nexport default {\n  name: 'AboutPdb'\n}\n</script>\n\n<style scoped>\n#aboutPDBHider{\n    height: 350px;\n    overflow: scroll;\n}\n\n#description span.content {\n    height: fit-content;\n    overflow: hidden;\n    display: block;\n}\ndiv.panel span.content, div.panel p {\n    padding: 0 6px;\n}\ndiv.panel span, span.section {\n    display: inline;\n}\n\nspan.explanation a {\n    color: #6df;\n    text-decoration: none;\n}\n\ndiv.panel span#biounitDisplay {\n    color: #555;\n    padding: 2px 0;\n    /* background-image: -webkit-linear-gradient(top, #ccc, #aaa); */\n}\n\n#biounitLeft {\n    background: transparent url('../../assets/images/ar-le.png') no-repeat center;\n}\n#biounitRight {\n    background: transparent url('../../assets/images/ar-ri.png') no-repeat center;\n}\n#biounitLeft, #biounitRight {\n    cursor: pointer;\n    color: transparent;\n    width: 16px;\n    text-align: center;\n}\n\ndiv.panel span.help {\n    display: inline-block;\n    width: 17px;\n    height: 17px;\n    background: url('../../assets/images/UI-help.png') no-repeat 0px 0px;\n    margin-left: 8px;\n}\n\ndiv.panel h4#reference_title {\n    padding: 0 6px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AboutPdb.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AboutPdb.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AboutPdb.vue?vue&type=template&id=01dba514&scoped=true&\"\nimport script from \"./AboutPdb.vue?vue&type=script&lang=js&\"\nexport * from \"./AboutPdb.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AboutPdb.vue?vue&type=style&index=0&id=01dba514&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"01dba514\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"structure-viewer\"}},[_c('span',{attrs:{\"id\":\"threeDSpan\"}})])}]\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"structure-viewer\">\n    <span id=\"threeDSpan\"></span>\n    <!-- <Loader/> -->\n  </div>\n</template>\n\n<script>\n// import Loader from '../AquariaLayout/Loader'\nexport default {\n  name: 'StructureViewer',\n  // components: {\n  //   Loader\n  // },\n  mounted () {\n    function checkPhone () {\n      var iDevices = [\n        'iPad Simulator',\n        'iPhone Simulator',\n        'iPod Simulator',\n        'iPad',\n        'iPhone',\n        'iPod'\n      ]\n\n      if (navigator.platform) {\n        while (iDevices.length) {\n          if (navigator.platform === iDevices.pop() || (screen.width >= 300 && screen.width <= 600)) { return true }\n        }\n      } else {\n        return false\n      }\n    }\n    var isPhone = checkPhone()\n    if (isPhone) {\n      const baseWindowHeight = Math.max(window.innerHeight)\n      const documentBody = document.body\n      document.addEventListener('scroll', function (e) {\n        var newWindowHeight = Math.max(window.innerHeight)\n        if (newWindowHeight - 50 > baseWindowHeight) {\n          if (!documentBody.classList.contains('ios-toolbar')) {\n            documentBody.classList.add('ios-toolbar')\n          }\n        } else {\n          if (documentBody.classList.contains('ios-toolbar')) {\n            documentBody.classList.remove('ios-toolbar')\n          }\n        }\n      })\n      // if ((window.outerHeight - window.innerHeight) >= 80) {\n      //   $('#structure-viewer').css({\n      //     height: '88vh'\n      //   })\n      //   window.scrollTo(0, 0)\n      // } else {\n      //   $('#structure-viewer').css({\n      //     height: '103vh'\n      //   })\n      //   window.scrollTo(0, 0)\n      // }\n      // window.addEventListener('resize', function () {\n      //   if ((window.outerHeight - window.innerHeight) >= 80) {\n      //     $('#structure-viewer').css({\n      //       height: '88vh'\n      //     })\n      //     window.scrollTo(0, 0)\n      //   } else {\n      //     $('#structure-viewer').css({\n      //       height: '103vh'\n      //     })\n      //     window.scrollTo(0, 0)\n      //   }\n      // })\n    }\n  }\n}\n</script>\n\n<style>\n.aquariaWarning {\n    position: absolute;\n    top: 50px;\n    left: 30%;\n    background: #FAC88C;\n    border: 15px solid transparent;\n    border-image: url('../../assets/images/border-1.png') 15 15 round;\n    margin: 12px auto;\n    width: 40%;\n    padding: 20px 20px 14px 20px;\n    text-align: left;\n    box-shadow: 6px 6px 15px #669;\n    z-index: 999;\n}\n\n#selectionText {\n    overflow: hidden;\n    position: absolute;\n    z-index: 95;\n    pointer-events: none;\n    display: none;\n    padding: 0px;\n    margin: 0px;\n    width: 200px;\n    height: 100px;\n}\n\n#threeDSpan, #threeDSpan-inner-jolecule-soup-display {\n    height: 100vh;\n    width: 100vw;\n    overflow: hidden;\n    position: absolute;\n    z-index: 0;\n    top: 0%;\n}\n\n.jolecule-embed-toolbar, .jolecule-embed-toolbar a {\n    color: #777;\n    text-decoration: none;\n}\n.jolecule-embed-toolbar {\n    padding: 5px 5px 2px 5px;\n    vertical-align: middle;\n    background-color: #CCC;\n    color: #666;\n    /* font-family: helvetica; */\n    font-size: 12px;\n    /* letter-spacing: 0.05em; */\n    overflow: hidden;\n    box-sizing: border-box;\n    position: relative;\n    top: 6rem;\n}\n.jolecule-embed-footer {\n  position: absolute;\n  bottom: 0%;\n  width: 100%;\n}\n.jolecule-embed-body {\n    font-size: 12px;\n    /* font-family: helvetica;\n    letter-spacing: 0.05em; */\n    line-height: 1.2em;\n    color: #666;\n}\n\n.jolecule-overlay-text {\n    z-index: 5001;\n    padding: 10px;\n    opacity: 0.7;\n    text-align: left;\n    letter-spacing: 0.1em;\n    line-height: 1.5em;\n    /* font-family: Helvetica, Arial, sans-serif; */\n    font-size: 12px;\n    border: 1px solid #888;\n    background-color: rgba(200, 200, 200, 0);\n    color: #333;\n}\n.ios-toolbar .tabs {\n        transform: translateY(-25px);\n      }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StructureViewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StructureViewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StructureViewer.vue?vue&type=template&id=45570de4&\"\nimport script from \"./StructureViewer.vue?vue&type=script&lang=js&\"\nexport * from \"./StructureViewer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./StructureViewer.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"tabs rel level3\"},[_c('div',{staticClass:\"tab\",attrs:{\"id\":\"Structures\"},on:{\"click\":_vm.storeHash}},[_c('a',{attrs:{\"href\":\"#Structures\"}},[_c('span',{staticClass:\"icon\"},[_c('img',{attrs:{\"src\":_vm.MS}})]),_vm._v(\"  Matching Structures  \"),_c('span',{staticClass:\"counter\"})])]),_c('MatchingStructures'),_c('div',{staticClass:\"tab\",attrs:{\"id\":\"Features\"},on:{\"click\":_vm.storeHash}},[_c('a',{attrs:{\"href\":\"#Features\"}},[_c('span',{staticClass:\"icon\"},[_c('img',{attrs:{\"src\":_vm.FT}})]),_vm._v(\"  Features  \"),_c('span',{staticClass:\"counter\",attrs:{\"id\":\"featureCounter\"}})])]),_c('Features')],1),_c('CoverageMap')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel\"},[_c('a',{staticClass:\"close intab\",attrs:{\"href\":_vm.data.hash},on:{\"click\":_vm.closeTab}}),_vm._m(0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"vis\"}},[_c('div',{attrs:{\"id\":\"allclusters\",\"data-intro\":\"Visual summary of all structures in PDB matching the specified protein, grouped by region of match.\",\"data-position\":\"left\"}})])}]\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"panel\">\n        <a v-bind:href=\"data.hash\" class=\"close intab\" @click=\"closeTab\"></a>\n        <div id=\"vis\">\n          <div id='allclusters' data-intro='Visual summary of all structures in PDB matching the specified protein, grouped by region of match.' data-position='left'></div>\n        </div>\n        <!-- <TreeView v-show=\"showTree\" id='treeView' class='level5' v-bind:treeReady='data.prop'/> -->\n    </div>\n</template>\n\n<script>\nimport * as Panels from '../AquariaLayout/helpers/hidePanels'\nimport store from '../../store/index'\n// import TreeView from '../MatchingStructures/TreeView'\nimport { mapGetters } from 'vuex'\n\nexport default {\n  name: 'MatchingStructures',\n  // components: {\n  //   TreeView\n  // },\n  data () {\n    return {\n      clusters: window.AQUARIA.structures2match.clusters,\n      showTree: false\n    }\n  },\n  computed: {\n    data () {\n      return {\n        hash: store.state.hash,\n        prop: null\n      }\n    },\n    ...mapGetters([\n      'getMatches'\n    ])\n  },\n  methods: {\n    closeTab: function () {\n      window.scrollBy(0, 100)\n      Panels.hidePanels()\n    }\n  },\n  mounted () {\n    var _this = this\n    if (_this.getMatches && Object.hasOwnProperty.call(_this.getMatches, 'clusters')) {\n      var inputs = document.querySelectorAll('[id ^= structure_] > text')\n      for (var i = 0; i < inputs.length; i++) {\n        inputs[i].addEventListener('click', function () {\n          var elem = this.parentElement.id\n          console.log(elem)\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style>\n  .thumbnail text {\n    font-size: 16px;\n  }\n  #vis {\n    max-height: 40vh;\n    overflow: scroll;\n    /* margin-bottom: -54px; */\n    margin-bottom: -55px;\n    width: 100vw;\n    background: var(--primary-tab);\n  }\n  div.ruler {\n    margin-left: 40px;\n  }\n  .outer_container{\n    display: inline-flex;\n  }\n\n  .outer_container svg{\n    margin-left: 4px;\n  }\n\n  div[data-id=\"structurematches\"].chardinjs-helper-layer.chardinjs-top {\n    border-top: 0 none;\n  }\n\n  div[data-id=\"structurematches\"] .chardinjs-tooltip.chardinjs-top:after {\n    height: 0;\n    width: 0;\n    display: none;\n  }\n  #allclusters {\n    background-color: var(--background);\n    overflow: hidden;\n  }\n  .panel .close.intab::after { top: -0.1em; }\n\n  /**** SVG styles ****/\n  svg {\n    font-weight: 400;\n  }\n\n  .container>svg {\n    display: block;\n    position: relative;\n    top: -13px;\n  }\n\n  line,\n  path {\n    fill: none;\n    /*stroke: #000;*/\n  }\n\n  line.connector {\n    stroke: #808080;\n  }\n\n  .minor :not(.minor) {\n    display: none;\n  }\n\n  .SHEET rect,\n  .HELIX rect,\n  .COIL rect,\n  polygon {\n    /*shape-rendering: geometric-precision;*/\n    stroke-width: 0.6px;\n  }\n\n  .SHEET polygon,\n  .SHEET rect {\n    fill: #f6c719;\n    stroke: #f6c719;\n  }\n\n  .SHEET polygon.conserved,\n  .SHEET rect.conserved {\n    fill: #998436;\n    stroke: #998436;\n  }\n\n  .SHEET polygon.nonconserved,\n  .SHEET rect.nonconserved {\n    fill: #4d4d4d;\n    stroke: #4d4d4d;\n  }\n\n  .HELIX rect {\n    fill: #6491b6;\n    stroke: #6491b6;\n  }\n\n  .HELIX rect.conserved {\n    fill: #586c7c;\n    stroke: #586c7c;\n  }\n\n  .HELIX rect.nonconserved {\n    fill: #4d4d4d;\n    stroke: #4d4d4d;\n  }\n\n  .COIL rect {\n    fill: #6f9e52;\n    stroke: #6f9e52;\n  }\n\n  .COIL rect.conserved {\n    fill: #5d724f;\n    stroke: #5d724f;\n  }\n\n  .COIL rect.nonconserved {\n    fill: #4d4d4d;\n    stroke: #4d4d4d;\n  }\n\n  .COIL rect.insertion,\n  .HELIX rect.insertion,\n  .SHEET rect.insertion,\n  rect.insertion {\n    fill: #777777;\n    stroke: #777777;\n    stroke-width: 0.25px;\n    opacity: 0.1;\n  }\n\n  rect.handle text {\n    color: white;\n  }\n\n  rect.handle {\n    fill: #888;\n    stroke: none;\n  }\n\n  text.percentage {\n    font-size: 11px;\n    fill: #777;\n  }\n\n  text.percentage:hover {\n    fill: #333333;\n  }\n\n  text.expandable:hover,\n  g.expandable.active text:hover {\n    cursor: pointer;\n  }\n\n  g.active rect.cluster,\n  g.active line,\n  g.active g.thumbnail circle {\n    stroke: orange;\n  }\n\n  g.expandable.active rect.handle {\n    fill: orange;\n  }\n\n  .active rect:hover {\n    cursor: pointer;\n  }\n\n  rect.cluster {\n    fill: #CCC;\n    stroke: #808080;\n    stroke-width: 1px;\n  }\n\n  g.active rect.cluster {\n    fill: #FFF;\n  }\n\n  g.loaded rect.cluster {\n    fill: #FFF;\n    stroke: #333;\n  }\n\n  g.x line.tick {\n    stroke: #666;\n  }\n\n  g.x.minor line.tick {\n    stroke: #AAA;\n  }\n\n  g.x text {\n    font-size: 10px;\n    fill: #999;\n  }\n\n  g.x path.domain {\n    fill: none;\n    stroke: black;\n    opacity: 0.5;\n  }\n\n  .node circle {\n    cursor: pointer;\n    fill: #fff;\n    stroke: steelblue;\n    stroke-width: 1.5px;\n  }\n\n  path.link {\n    fill: none;\n    stroke: #888888;\n    stroke-width: 1.5px;\n  }\n\n  .expansion text {\n    fill: #fff;\n  }\n.coverage_map_container {\n  position: absolute;\n  bottom: 0px;\n  opacity: 1;\n}\n  /******** features *****/\n\n  div.track:nth-child(even) {\n    background: #D6D6D6;\n  }\n\n  div.track svg:hover {\n    background: #E9E9E9;\n    cursor: pointer;\n  }\n\n  div.panel span.source {\n    display: inline-block;\n    font-size: 80%;\n    text-transform: uppercase;\n    letter-spacing: 0.2em;\n    color: #b3b3b3;\n    margin-left: 1em;\n  }\n\n  /********** PSSH VIEW ***********/\n\n  div.panel#structure-viewer.fullscreen {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n\n  #threeD.threedcontent.fullscreen {\n    height: 100%;\n  }\n\n  div.container {\n    height: 40px;\n    margin-left: -4px;\n  }\n\n  div.container:hover {\n    background: #D6D6D6;\n  }\n\n  svg rect.bg {\n    fill: none;\n  }\n\n  /*div*/\n  .loaded {\n    background: #DEDEDE;\n  }\n\n  svg.loaded rect.bg {\n    fill: #EEE;\n    cursor: pointer;\n  }\n\n  /*div*/\n  .loaded:hover {\n    background: #EEE;\n  }\n\n  svg.loaded rect.bg:hover {\n    fill: #FFF;\n  }\n\n  div#wait4tree {\n    position: relative;\n    z-index: 100;\n  }\n\n  div.expansion {\n    position: absolute;\n    width: 0px;\n    z-index: 102;\n  }\n\n  div.expansion div.longtitle,\n  div.longtitle {\n    background: #555;\n    border-radius: 8px;\n    box-shadow: 3px 3px 6px #222;\n    color: white;\n    display: none;\n    padding: 8px;\n    position: absolute;\n    width: 300px;\n    z-index: 103;\n\n  }\n\n  .blank {\n    background: black;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    opacity: 0.68;\n    -moz-opacity: 0.68;\n    width: 100%;\n    z-index: 90;\n  }\n\n  div.panel span.help {\n    display: inline-block;\n    width: 17px;\n    height: 17px;\n    background: url('../../assets/images/UI-help.png') no-repeat 0px 0px;\n    margin-left: 8px;\n  }\n\n  .fakelink:hover,\n  span.applauncher:hover,\n  span#expander:hover span#threedSwitcher:hover {\n    cursor: pointer;\n    background-position: 0px -21px;\n  }\n\n  /*div.panel span.help:hover { background-position: 0px -16px; cursor: pointer; }*/\n\n  div.balloon {\n    background: #666;\n    border-radius: 10px;\n    color: #CCC;\n    padding: 8px;\n  }\n\n  div.balloon p {\n    margin: 0 0 6px 0;\n  }\n\n  div.balloon p a {\n    color: #6AF;\n  }\n\n  div.balloon h3 {\n    background-color: #999;\n    margin-bottom: 1em;\n  }\n\n  div.popup.top div.balloon {\n    border-radius: 16px;\n    box-shadow: 0px 2px 16px #555;\n    cursor: -moz-grab;\n    cursor: -webkit-grab;\n    cursor: grab;\n    padding-left: 14px;\n  }\n\n  div.popup.top div.balloon:active {\n    cursor: -moz-grabbing;\n    cursor: -webkit-grabbing;\n    cursor: grabbing;\n  }\n\n  .windows div.popup.top div.balloon {\n    border-radius: 0;\n  }\n\n  div.popup {\n    background: url('../../assets/images/point.png') no-repeat center bottom;\n    display: none;\n    padding: 0 0 14px 0;\n    position: absolute;\n    /* width: 320px; */\n    width: 90vw;\n    max-width: 30rem;\n    z-index: 999;\n  }\n\n  div.popup.top {\n    background: transparent none;\n  }\n\n  div.large-ppi-diagram {\n    position: absolute;\n    width: 400px;\n    z-index: 100;\n  }\n\n  span.x {\n    background: url('../../assets/images/UI-close.png') no-repeat;\n    display: block;\n    float: right;\n    height: 19px;\n    width: 19px;\n  }\n\n  span.x:hover {\n    background-position: 0 -21px;\n    cursor: pointer;\n  }\n\n  /*new stuff from david*/\n\n  path.arc {\n    cursor: move;\n    fill: #fff;\n  }\n\n  .proteinNode,\n  .complexNode {\n    font-size: 10px;\n  }\n\n  .proteinNode:hover,\n  .complexNode:hover {\n    fill: #1f77b4;\n  }\n\n  .ppiLink {\n    fill: none;\n    stroke: #1f77b4;\n    stroke-opacity: .4;\n    pointer-events: none;\n  }\n\n  .ppiLink.source,\n  .ppiLink.target {\n    stroke-opacity: 1;\n    stroke-width: 2px;\n  }\n\n  .proteinNode.target,\n  .complexNode.target {\n    fill: #d62728 !important;\n  }\n\n  .ppiLink.source {\n    stroke: #d62728;\n  }\n\n  .proteinNode.source,\n  .complexNode.source {\n    fill: #2ca02c;\n  }\n\n  .ppiLink.target {\n    stroke: #2ca02c;\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MatchingStructures.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MatchingStructures.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MatchingStructures.vue?vue&type=template&id=574db014&\"\nimport script from \"./MatchingStructures.vue?vue&type=script&lang=js&\"\nexport * from \"./MatchingStructures.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MatchingStructures.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel\"},[_c('a',{staticClass:\"close\",attrs:{\"href\":\"javascript:\"},on:{\"click\":_vm.closeTab}}),_c('div',{attrs:{\"id\":\"featurelist\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"panel\">\n        <a href=\"javascript:\" class=\"close\" @click=\"closeTab\"></a>\n        <div id=\"featurelist\"></div>\n    </div>\n</template>\n<script>\nimport * as Panels from '../AquariaLayout/helpers/hidePanels'\nexport default {\n  name: 'Features',\n  methods: {\n    closeTab: function () {\n      window.scrollBy(0, 100)\n      Panels.hidePanels()\n    }\n  }\n}\n</script>\n\n<style>\n.complete{\n  display:none;\n}\n\n.more{\n  background:lightblue;\n  color:navy;\n  font-size:13px;\n  padding:3px;\n  cursor:pointer;\n}\n\n#featurelist{\n  overflow:  scroll;\n  margin-bottom:  -100px;\n  width:  100vw;\n  max-height: 80vh;\n  background: var(--primary-tab);\n}\n#groupedFeatures{\n  margin-left:  6px;\n  }\n\ndiv.featureHeader{\n  display:  inline-flex;\n  width:  100%;\n  background:  rgb(204,  204,  204);\n  padding-bottom:  6px;\n  height:  fit-content;\n  max-height:  30px;\n}\n\ndiv.featureHeader  p{\n  cursor:  pointer;\n}\n\n.featureName{\n  font-size:  calc(16px  +  0.2vw);\n  padding-left:  8px;\n  color:  #5a5959;\n  margin:  9px;\n}\n\n.featureSetName{\n  font-size:  calc(14px  +  0.2vw);\n  padding-left:  8px;\n  color:  #5a5959;\n  margin:  9px;\n}\n\n.featureSetName_{\n  font-size:  calc(12px  +  0.2vw);\n  padding-left:  8px;\n  color:  #7B7A7A;\n  margin:  9px;\n}\n\ndiv.featureHeader  .info{\n  font-size:  calc(10px  +  0.2vw);\n  padding:  0px  5px  8px  5px;\n  color:  #5a5959;\n  background-color:  white;\n  border-radius:  12px;\n  height:  15px;\n  margin-top:  10px;\n  position:  relative;\n}\n\nspan.info{\n  font-size:  calc(10px  +  0.2vw);\n  padding:  1px  5px  1px  5px;\n  color:  #5a5959;\n  background-color:  white;\n  border-radius:  12px;\n  height:  15px;\n  margin-top:  10px;\n  position:  relative;\n  cursor: pointer;\n}\n\n/*  Tooltip  text  */\nspan.tooltiptext  {\n  visibility:  hidden;\n  width:  fit-content;\n  max-width:  38vw;\n  min-width:  25vw;\n  background-color:  #fff;\n  color:  black;\n  text-align:  left;\n  padding:  5px  10px;\n  border-radius:  6px;\n  /*  Position  the  tooltip  text  -  see  examples  below!  */\n  position:  fixed;\n  z-index:  1;\n  overflow-wrap:  break-word;\n  margin-top:  -5px;\n  left:  22vw;\n}\n\n/*  Show  the  tooltip  text  when  you  mouse  over  the  tooltip  container  */\n/*  .info:hover  span.tooltiptext  {\n  visibility:  visible;\n  }  */\n\n.infoHeader{\n  background-color:  white;\n  color:  black;\n}\n\n#remove{\n  margin-left:  auto;\n  margin-right:  4px;\n  height:  19px;\n  margin-right:  10px;\n}\n\n/*  #share{\n  height:  19px;\n  margin-right:  10px;\n}  */\n\n.featureButtons{\n  margin-top:  10px;\n  background:  #777777;\n  color:  #e8e2e2;\n  border-radius:  10px;\n  padding-top:  0px;\n  cursor:  pointer;\n}\n\n.featureButtons{\n  visibility:  hidden;\n}\n\ndiv.featureTrack{\n  display:  none;\n  background:  none;\n  height:  fit-content;\n}\n\n#classification  a{\n  color:  #9a9999;\n  font-size:  14px;\n}\n\n#classification{\n  padding-top:  5px;\n}\n\n#classification:hover  >  a{\n  color:  #08C;\n  font-size:  14px;\n}\n\n.track  >  p{\n  text-align:  left;\n  margin-left:  10px;\n}\n\ndiv.balloon  {\n  background:  #666;\n  border-radius:  10px;\n  color:  #CCC;\n  padding:  8px;\n}\n\ndiv.balloon  p  {\n  margin:  0  0  6px  0;\n}\n\ndiv.balloon  p  a  {\n  color:  #6AF;\n}\n\ndiv.balloon  h3  {\n  background-color:  #999;\n  margin-bottom:  1em;\n  }\n\ndiv.balloon{\n  overflow: scroll;\n  max-height: 800px;\n}\n\ndiv.popup.top  div.balloon  {\n  border-radius:  16px;\n  box-shadow:  0px  2px  16px  #555;\n  cursor:  -moz-grab;\n  cursor:  -webkit-grab;\n  cursor:  grab;\n  padding-left:  14px;\n}\n\ndiv.popup.top  div.balloon:active  {\n  cursor:  -moz-grabbing;\n  cursor:  -webkit-grabbing;\n  cursor:  grabbing;\n}\n\n.windows  div.popup.top  div.balloon  {\n  border-radius:  0;\n}\n\ndiv.popup  {\n  background:  url(../../../public/images/point.png)  no-repeat  center  bottom;\n  display:  none;\n  padding:  0  0  14px  0;\n  position:  absolute;\n  width:  320px;\n  z-index:  999;\n}\n\n.highcharts-figure,  .highcharts-data-table  table  {\n  min-width:  100px;\n  max-width:  150px;\n  margin:  1em  auto;\n}\n\n.highcharts-data-table  table  {\n  font-family:  'Source Sans Pro',  sans-serif;\n  border-collapse:  collapse;\n  border:  1px  solid  #EBEBEB;\n  margin:  10px  auto;\n  text-align:  center;\n  width:  150px;\n  max-width:  200px;\n}\n\n.highcharts-data-table  caption  {\n  padding:  1em  0;\n  font-size:  1.2em;\n  color:  #555;\n}\n\n.highcharts-data-table  th  {\n  font-weight:  600;\n  padding:  0.5em;\n}\n\n.highcharts-data-table  td,  .highcharts-data-table  th,  .highcharts-data-table  caption  {\n  padding:  0.5em;\n}\n\n.highcharts-data-table  thead  tr,  .highcharts-data-table  tr:nth-child(even)  {\n  background:  #f8f8f8;\n}\n\n.highcharts-data-table  tr:hover  {\n  background:  #f1f7ff;\n}\n\n.column  {\n  /* float:  left; */\n  width:  25%;\n  padding:  2px;\n  display:  inline-block;\n  /*  border:1px  solid  orange;  */\n  width:  105px;\n  height:  130px;\n  font-size:11px;\n}\n\n/*  Clear  floats  after  image  containers  */\n.row::after  {\n  content:  \"\";\n  clear:  both;\n  display:  table;\n}\n\n.popupTitle  {\n  font-weight:  bold;\n}\n\n.popupText  {\n  padding-top:  5px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Features.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Features.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Features.vue?vue&type=template&id=bcae9ac2&\"\nimport script from \"./Features.vue?vue&type=script&lang=js&\"\nexport * from \"./Features.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Features.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"rel level2\",attrs:{\"id\":\"map\"}},[_c('div',{attrs:{\"id\":\"selectedCluster\"}}),_c('div',{attrs:{\"id\":\"selectedFeature\"}})])}]\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"map\" class='rel level2'>\n    <div id='selectedCluster'></div>\n    <div id='selectedFeature'></div>\n  </div>\n</template>\n\n<script>\n// import axios from 'axios'\nimport * as d3 from 'd3'\nvar w = window.outerWidth\nvar h = 50\nexport default {\n  name: 'CoverageMap',\n  data () {\n    return {\n      seqLength: 0,\n      scale: null,\n      coverageMapsrw: 0\n    }\n  },\n  // mounted () {\n  //   var _this = this\n  //   var url = `${window.BACKEND}/getCoverageMap`\n  //   var loadRequest = {\n  //     selector: [_this.$route.params.uniprotAccession]\n  //   }\n  //   axios({\n  //     method: 'get',\n  //     url: url,\n  //     params: loadRequest\n  //   }).then(function (response) {\n  //     console.log(response.data)\n  //     _this.drawMap(response.data)\n  //     window.addEventListener('resize', function () {\n  //       document.querySelector('#map > #coverageMap').remove()\n  //       _this.drawMap(response.data)\n  //     })\n  //   })\n  // },\n  methods: {\n    drawMap (data) {\n      var _this = this\n      var svg = _this.renderSVG()\n      _this.seqLength = data.seqLength\n      _this.scale = d3.scale.linear().domain([1, _this.seqLength]).range([1, window.innerWidth])\n      // var structStart = data.seq_start[0]\n      // var structEnd = data.seq_end[data.seq_end.length - 1]\n      _this.coverageMapsrw = (_this.scale(data.seqLength)) / (data.seqLength)\n      // _this.coverageMapsrw = (_this.scale(236)) / (structEnd - structStart)\n      // _this.coverageMapsrw = (_this.scale(structEnd - structStart)) / (structEnd - structStart)\n      data.secondaryStructures.forEach(function (d) {\n        // convert strings to numbers\n        d.start = +d.start\n        d.end = +d.end\n        _this.drawResidues(d, svg, data)\n      })\n    },\n    renderSVG () {\n      var svg = d3\n        .select('#map')\n        .append('svg')\n        .attr('id', 'coverageMap')\n        .attr('width', w)\n        .attr('height', h)\n\n      var rect = svg.append('g')\n\n      return rect\n    },\n    drawResidues (el, svg, data) {\n      var thickness = 0\n      var _this = this\n      if (el.Type === 'SHEET') {\n        var height = 18\n        var color = '#f6c719'\n        var translate = 17\n      } else if (el.Type === 'COIL') {\n        height = 14\n        color = '#6f9e52'\n        translate = 19\n      } else {\n        height = 19\n        color = '#6491b6'\n        translate = 16\n      }\n      for (var n = el.start; n <= el.end; n++) {\n        svg\n          .append('g')\n          .attr('class', 'residue_' + n + '_' + el.Type)\n          .append('rect')\n          .attr('transform', 'translate(' + (n * _this.coverageMapsrw - _this.coverageMapsrw) + ',' + translate + ')')\n          .attr('width', _this.coverageMapsrw * (thickness + 1))\n          .attr('height', height)\n          .attr('fill', color)\n          .style('opacity', 1 - (0.7 / data.densityMap[n - 1]))\n      }\n      // for (var n = el.start; n <= el.end; n++) {\n      //   if (n !== el.end) {\n      //     thickness++\n      //     continue\n      //   }\n      //   // var offset = el.start\n      //   // var translateVal = n - offset - thickness\n      //   var gId = 'r_' + n\n\n      //   var rect = svg\n      //     .append('g')\n      //     .attr('class', 'residue ' + el.type)\n      //     .attr('id', gId)\n      //     .attr('transform', 'translate(' + n * _this.coverageMapsrw + ',8)')\n      //     .append('rect')\n      //     // .attr('class', conservation)\n      //     .attr('width', _this.coverageMapsrw * (thickness + 1))\n      //     .attr('height', 10)\n      //   if (el.type === 'SHEET') {\n      //     rect.attr('height', 14).attr('transform', 'translate(0,-2)')\n      //     if (n === el.end) {\n      //       rect.attr('width', _this.coverageMapsrw * thickness)\n      //       //      }\n      //       this.nusvg\n      //         .select('g.residue#r_' + el.secondaryStructures.start + '_' + n)\n      //         .append('svg:polygon')\n      //       // .attr('class', conservation)\n      //         .attr('transform', 'translate(' + _this.coverageMapsrw * thickness + ',0)')\n      //         .attr('points', _this.coverageMapsrw + ',0 0,-6 0,16 ' + _this.coverageMapsrw + ',10')\n      //         // this.nusvg.select(\"g.residue#r_\"+rank+\"_\"+n+\" rect\").remove();\n      //     } else {\n      //       // console.log(' not at the end:' + n);\n      //     }\n      //   }\n      //   if (el.type === 'HELIX') {\n      //     this.nusvg\n      //       .select('g.residue#r_' + el.secondaryStructures.start + '_' + n + ' rect')\n      //       .attr('height', 16)\n      //     // .attr('class', conservation)\n      //       .attr('transform', 'translate(0,-3)')\n      //   }\n      //   thickness = 0\n      // }\n    }\n  }\n}\n</script>\n\n<style scoped>\n#map {\n  top: var(--spacer-bottom);\n  height: 3rem;\n}\n/* @media screen and (min-width: 550px) {\n  #map { top: 3rem; }\n}\n@media screen and (min-width: 950px) {\n  #map { top: 3.5rem; }\n} */\n/* @media screen and (min-width: 1850px) {\n  #map { top: 4rem; }\n} */\n#selectedCluster{\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  left: 0.2%;\n  height: 2.5rem;\n}\n#selectedFeature{\n  position: absolute;\n  bottom: 0px;\n  width: 100%;\n  left: 0.2%;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CoverageMap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CoverageMap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CoverageMap.vue?vue&type=template&id=5bce72ae&scoped=true&\"\nimport script from \"./CoverageMap.vue?vue&type=script&lang=js&\"\nexport * from \"./CoverageMap.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CoverageMap.vue?vue&type=style&index=0&id=5bce72ae&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5bce72ae\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <div class=\"tabs rel level3\">\n      <div class=\"tab\"  id=\"Structures\" v-on:click=\"storeHash\">\n        <a href=\"#Structures\"><span class=\"icon\"><img v-bind:src=\"MS\" /></span>&nbsp;&nbsp;Matching Structures&nbsp;&nbsp;<span class=\"counter\"></span></a>\n      </div>\n      <MatchingStructures />\n      <div class=\"tab\" id=\"Features\" v-on:click=\"storeHash\">\n        <a href=\"#Features\"><span class=\"icon\"><img v-bind:src=\"FT\" /></span>&nbsp;&nbsp;Features&nbsp;&nbsp;<span class=\"counter\" id=\"featureCounter\"></span></a>\n      </div>\n      <Features />\n    </div>\n    <CoverageMap />\n  </div>\n</template>\n<script>\nimport MatchingStructures from '../MatchingStructures/MatchingStructures'\nimport Features from '../Features/Features'\nimport CoverageMap from '../MatchingStructures/CoverageMap'\nimport * as Panels from './helpers/hidePanels'\nimport store from '../../store/index'\nexport default {\n  name: 'Tabs',\n  components: {\n    MatchingStructures,\n    Features,\n    CoverageMap\n  },\n  data () {\n    return {\n      MS: require('../../assets/img/MS-01.svg'),\n      FT: require('../../assets/img/FT-01.svg')\n    }\n  },\n  methods: {\n    storeHash: function () {\n      if (window.location.hash === '') {\n        store.commit('setHash', '#(0,0,0)')\n      } else {\n        store.commit('setHash', window.location.hash)\n      }\n    },\n    showPanel: function (elem1, elem2) {\n      document.querySelector('#' + elem1).style.display = 'block'\n      document.querySelectorAll('.tab').className = 'tab inactive'\n      document.querySelector('#' + elem2).className = 'tab active'\n    },\n    showMatches: function () {\n      var _this = this\n      if (window.AQUARIA.panel3d) {\n        const soupController = window.AQUARIA.panel3d.embededJolecule.controller\n        soupController.clearSelectedResidues()\n      }\n      _this.showPanel('vis', 'Structures')\n      Panels.hidePanel('featurelist', 'Features')\n      if (document.getElementsByClassName('dimmer').length === 0) {\n        Panels.overlay()\n      }\n      document.querySelector('div.dimmer').className += ' level0'\n      // document.querySelector('div.dimmer').style.zIndex = '0'\n      document.querySelector('div.dimmer').addEventListener('click', function () {\n        // document.querySelector('div.tabs').style.bottom = '50px'\n        Panels.hidePanels()\n      })\n    },\n    showFeatures: function () {\n      var _this = this\n      if (window.AQUARIA.panel3d) {\n        const soupController = window.AQUARIA.panel3d.embededJolecule.controller\n        soupController.clearSelectedResidues()\n      }\n      Panels.hidePanel('vis', 'Structures')\n      _this.showPanel('featurelist', 'Features')\n      if (document.getElementsByClassName('dimmer').length === 0) {\n        Panels.overlay()\n      }\n      document.querySelector('div.dimmer').className += ' level0'\n      document.querySelector('div.dimmer').addEventListener('click', function () {\n        document.querySelector('a.close').click()\n        // document.querySelector('div.tabs').style.bottom = '50px'\n        Panels.hidePanels()\n      })\n    }\n  },\n  mounted () {\n    var _this = this\n    window.addEventListener('hashchange', function () {\n      if (window.location.hash.includes('Structures')) {\n        _this.showMatches()\n      }\n      if (window.location.hash.includes('Features')) {\n        _this.showFeatures()\n      }\n    })\n  }\n}\n</script>\n<style scoped>\n.tabs {\n    display: flex;\n    flex-flow: row wrap;\n    justify-content: center;\n    top: var(--spacer-bottom);\n}\n\n.tab {\n    flex: 0 0 auto;\n    height: 2rem;\n    padding: 0.25rem 0.5rem 0 0.5rem;\n    transition: All 0.5s ease;\n    min-width: 8.5rem;\n    border-top-left-radius: 0.5rem;\n    border-top-right-radius: 0.5rem;\n}\n@media screen and (min-width: 550px) {\n  .tab {  min-width: 9.5rem; }\n}\n@media screen and (min-width: 950px) {\n  .tab {  min-width: 11.5rem; }\n}\n@media screen and (min-width: 1850px) {\n  .tab {\n    min-width: 14.5rem;\n  }\n}\n.tab#Structures {\n    order: 1;\n    text-align: right;\n}\n.tab#Features {\n    order: 2;\n}\nspan.icon {\n    display: inline-block;\n    background-color: var(--background);\n    width: calc(1.25rem + 1vh);\n    height: calc(1.25rem + 1vh);\n    border-radius: 50%;\n    transition: All 0.5s ease;\n}\n\n.tab.active a, .tab.active a:hover {\n    color: var(--dark-text);\n    font-size: inherit;\n}\n\n.tab.active, .tab.active:hover {\n    background-color: var(--bg-highlite);\n}\n.tab.active span.counter, .tab.inactive span.counter, .tab:hover span.counter {\n    background: #707070;\n    color: #fff;\n    border-radius: 10px;\n    padding: 0 6px;\n}\n.tab:hover, .tab.inactive  {\n    background-color: rgba(180, 180, 180, 0.7);\n}\nspan.icon {\n    display: inline-block;\n    background-color: transparent;\n    width: calc(1.25rem + 1vh);\n    height: calc(1.25rem + 1vh);\n    border-radius: 50%;\n    transition: All 0.5s ease;\n}\n.tab a:hover, .tab:hover a{\n    color: #FFF;\n    text-decoration: none;\n    transition: All 0.5s ease;\n    font-size: inherit;\n}\n.tab.inactive a {\n  font-size: inherit;\n  color: #dedede;\n}\n\n:target a {\n    color: var(--dark-text);\n}\n.tab a {\n    color: var(--transparent);\n    text-decoration: none;\n    transition: All 0.5s ease;\n    font-size: 0px;\n}\n.tab:target {\n    background-color: var(--bg-highlite);\n    border-top-left-radius: 0.5rem;\n    border-top-right-radius: 0.5rem;\n}\n\na.to-right {\n    float: right;\n    margin-right: 0.5rem;\n    text-decoration: none;\n    font-size: 150%;\n}\n\n/* from test branch */\n#Structures, #Features {\n    color: transparent;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tabs.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tabs.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tabs.vue?vue&type=template&id=6e778791&scoped=true&\"\nimport script from \"./Tabs.vue?vue&type=script&lang=js&\"\nexport * from \"./Tabs.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Tabs.vue?vue&type=style&index=0&id=6e778791&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6e778791\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"level3\",attrs:{\"id\":\"popup\"}},[_c('div',{staticClass:\"balloon\",attrs:{\"id\":\"vueBased\"}},[_c('div',{staticClass:\"headingC\",attrs:{\"id\":\"headingC\"}},[_c('span',{attrs:{\"id\":\"loadedPin\"},on:{\"click\":function($event){return _vm.togglePinBehaviour()}}}),_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.getIfLoading())}}),_c('span',{attrs:{\"id\":\"popupheader\"},domProps:{\"innerHTML\":_vm._s(_vm.getPopupTitle)}}),_c('span',{staticClass:\"x\",attrs:{\"id\":\"x_close\"},on:{\"click\":function($event){return _vm.closeAndReset()}}})]),_c('div',{attrs:{\"id\":\"popupText_variant\",\"hidden\":_vm.isVarSpecified()}},[_c('div',{staticClass:\"aaLightBg\"},[_c('p',{attrs:{\"id\":\"spanDefaultDesc\"}},[_vm._v(\" \"+_vm._s(_vm.getDefaultDesc())+\" \")]),_vm._l((_vm.oneAaCodes),function(aaCode){return _c('div',{key:aaCode,attrs:{\"id\":'divVarInfo_' + aaCode}},[_vm._l((_vm.getAaDataAsArr(aaCode)),function(dataStr){return _c('expandable-text-line',{key:dataStr,attrs:{\"use-click\":\"\"},domProps:{\"innerHTML\":_vm._s(dataStr + '.')}})}),_c('i',[_vm._v(\"Structures with \"+_vm._s(_vm.getOldAa())+_vm._s(_vm.getVarDisplay())+_vm._s(aaCode)+\":\")]),_vm._v(\" \"),_c('span',{class:_vm.getIsShownVar(aaCode),on:{\"click\":function($event){return _vm.showTreeView($event, aaCode)}}},[_vm._v(\" \"+_vm._s(_vm.getPdbCount(aaCode))+\" \")])],2)}),_c('hr',{staticClass:\"anAaHr\",attrs:{\"id\":\"anAaHr\",\"hidden\":_vm.isHrHidden()}}),_c('div',{attrs:{\"id\":\"divPosInfo\"}},[_c('span',{staticClass:\"weight600\"},[_vm._v(\" Residue \"+_vm._s(_vm.getVariant)+\" \")]),_c('br'),_vm._l((_vm.getPosInfoDataAsArr()),function(arrObj,keyStr){return _c('span',{key:keyStr},[_c('expandable-text-line',{attrs:{\"use-click\":\"\"}},[_c('i',[_c('span',{domProps:{\"innerHTML\":_vm._s(keyStr)}}),_vm._v(\": \")]),_vm._l((arrObj),function(dataStr){return _c('span',{key:dataStr,domProps:{\"innerHTML\":_vm._s(dataStr  + '. ')}})})],2)],1)}),_c('i',[_vm._v(\"Structures with residue \"+_vm._s(_vm.getVariant)+\":\")]),_vm._v(\" \"),_c('span',{class:_vm.getIsShownRes(),on:{\"click\":function($event){return _vm.showTreeView($event)}}},[_vm._v(\" \"+_vm._s(_vm.getTotalPdbCount)+\" \")])],2)],2),_c('div',{staticClass:\"btnsDiv\"},[_c('span',{staticClass:\"weight600\"},[_vm._v(\"See also:\")]),_vm._v(\" \"),_c('span',{staticClass:\"pAaColor\"},[_vm._v(\" \"+_vm._s(_vm.getOldAa())+\" → \")]),_vm._l((_vm.oneAaCodes),function(aaCode){return _c('button',{key:aaCode,class:_vm.getIfBoldInfoPres(aaCode),attrs:{\"id\":'btnVarInfo_' + aaCode},on:{\"click\":function($event){return _vm.showThisAaInfoHideOthers(aaCode)}}},[_vm._v(_vm._s(aaCode))])})],2)]),_c('div',{attrs:{\"id\":\"popupText_noVariant\",\"hidden\":!_vm.isVarSpecified()}},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.getPopupText)}})])]),_c('p',{attrs:{\"id\":\"popuptext\"}},[_vm._v(\"Pop-up text box component for features\")]),_c('TreeView',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showTree),expression:\"showTree\"}],staticClass:\"level5\",attrs:{\"id\":\"treeView\",\"treeReady\":_vm.data.prop,\"count\":_vm.count,\"coordinates\":_vm.data.coordinates}}),_c('NodeLoader',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showLoader),expression:\"showLoader\"}],attrs:{\"coordinates\":_vm.data.coordinates,\"change\":_vm.data.change}}),_c('img',{attrs:{\"src\":_vm.popupTail,\"id\":\"popupTail\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"scrim level6\",on:{\"click\":_vm.hideTree}}),_c('div',{staticClass:\"level7\",attrs:{\"id\":\"arc\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <div class=\"scrim level6\" @click=\"hideTree\"></div>\n        <div id='arc' class=\"level7\"></div>\n    </div>\n</template>\n\n<script>\nimport * as d3 from 'd3'\nimport * as d3Shape from 'd3-shape'\nimport { mapGetters } from 'vuex'\nimport * as featureMap from '../Features/helpers/featureMap'\nvar limit = 10\nconst w = 450\nconst h = 450\nconst radius = 14\nvar featureRegex = new RegExp(/(p\\.)?[A-Za-z]+[0-9]+[A-Za-z\\*\\_\\?\\[\\]\\(\\)\\%\\=\\.]+/) //eslint-disable-line\n\nexport default {\n  name: 'TreeView',\n  props: ['treeReady', 'count', 'coordinates'],\n  data () {\n    return {\n      pdbs: [],\n      up: require('../../assets/img/up.png'),\n      down: require('../../assets/img/down.png')\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'getGene',\n      'getOrganism'\n    ])\n  },\n  watch: {\n    treeReady: function (newVal, oldVal) { // watch it\n      var _this = this\n      if (_this.coordinates.clientX + w + 5 >= window.innerWidth) {\n        document.querySelector('#arc').style.left = (window.innerWidth - w - 5) + 'px'\n      } else {\n        document.querySelector('#arc').style.left = _this.coordinates.clientX + 'px'\n      }\n      document.querySelector('#arc').style.top = (_this.coordinates.clientY - 400) + 'px'\n      if (this.$parent.showLoader === true) {\n        this.$parent.showLoader = false\n      } else {\n        this.$parent.showTree = false\n      }\n      console.log(_this.count)\n      console.log('Prop changed: ', newVal, ' | was: ', oldVal)\n      var pdbs = newVal\n      var parent = pdbs[0]\n      d3.selectAll('#arc > *').remove()\n      if (pdbs.length > limit) {\n        var chunks = _this.chunk(pdbs, limit)\n        _this.generateArc(chunks, parent, 0)\n      } else {\n        _this.generateArc(pdbs, parent)\n      }\n    }\n  },\n  methods: {\n    hideTree () {\n      this.$parent.showTree = false\n    },\n    nodeClick (d) {\n      var _this = this\n      var parent = d[2].children[0]\n      var index = 0\n      parent.name = d[2].label\n      parent.length = d[2].children.length\n      if (d[2].children.length > limit) {\n        var chunks = _this.chunk(d[2].children, limit)\n        _this.generateArc(chunks, parent, index)\n        // chunks.forEach(function (chunk) {\n        //   index = index + 1\n        // })\n      } else {\n        index = index + 1\n        this.generateArc(d[2].children, parent)\n      }\n    },\n    chunk (items, size) {\n      const chunks = []\n      items = [].concat(...items)\n\n      while (items.length) {\n        chunks.push(\n          items.splice(0, size)\n        )\n      }\n\n      return chunks\n    },\n    reversePdbArray (array) {\n      var outputArray = []\n      array.forEach(function (arr) {\n        outputArray.unshift(arr)\n      })\n      return outputArray\n    },\n    generateArc (pdbArray, parentPDB, index) {\n      var _this = this\n      var gap = 60\n      var node, pdbs, nodes, elems\n      pdbArray = _this.reversePdbArray(pdbArray)\n      if (index !== undefined) {\n        pdbs = pdbArray[index]\n      } else {\n        pdbs = pdbArray\n      }\n\n      if (Object.prototype.hasOwnProperty.call(pdbs[0], 'children')) {\n        if (index !== undefined && document.querySelector('svg#tree') !== null) {\n          document.querySelector('svg#tree').remove()\n        }\n        var svg = d3\n          .select('#arc')\n          .append('svg')\n          .attr('id', 'tree')\n          .attr('width', w)\n          .attr('height', h)\n\n        elems = _this.createLinks(svg, 'parent', pdbArray, parentPDB, index)\n      } else {\n        document.querySelectorAll('outerElem').forEach(el => el.remove())\n        document.querySelectorAll('[id^=children_]').forEach(e => e.parentNode.removeChild(e))\n        svg = d3\n          .select('#arc')\n          .append('svg')\n          .attr('id', 'children_' + pdbs[0].pdb_id + '_' + index)\n          .attr('width', w)\n          .attr('height', h)\n\n        elems = _this.createLinks(svg, 'child', pdbArray, parentPDB, index)\n      }\n\n      nodes = elems.nodes\n      svg = elems.svg\n\n      // Append the nodes to the svg element\n      if (Object.prototype.hasOwnProperty.call(pdbs[0], 'children')) {\n        nodes.shift()\n        node = d3.select('svg#tree')\n          .selectAll('g#gParent')\n          .data(nodes)\n          .enter()\n      } else {\n        parentPDB.dx = (nodes[1][0] - gap)\n        parentPDB.dy = (nodes[1][1] - radius / 2)\n        nodes.push([nodes[1][0] - gap, nodes[1][1], parentPDB, 'parent'])\n        document.querySelector('#tree').classList.add('hide')\n        nodes.shift()\n        node = d3\n          .select('svg#children_' + pdbs[0].pdb_id + '_' + index)\n          .selectAll('g')\n          .data(nodes)\n          .enter()\n      }\n\n      node = node\n        .append('g')\n        .attr('class', function (d, i) {\n          if (d.length > 1) {\n            if (Object.prototype.hasOwnProperty.call(d[2], 'children')) {\n              return 'outerElem'\n            } else {\n              return 'innerElem'\n            }\n          }\n        })\n        .attr('id', function (d, i) {\n          //             if (d[2].member === 0 && d[2].depth === 0) { d[2].id = 0 }\n          if (d.length > 1) {\n            if (Object.prototype.hasOwnProperty.call(d[2], 'children')) {\n              return 'out_' + d[2].children[0].pdb_id\n            } else if (d[3] !== undefined && d[3].includes('parent')) {\n              return 'parentNode'\n            } else {\n              return 'in_' + d[2].pdb_id\n            }\n          }\n        })\n        .attr('width', radius)\n        .attr('height', radius)\n        .on('click', function (d, i) {\n          if (i >= 0) {\n            if (Object.prototype.hasOwnProperty.call(d[2], 'children')) {\n              _this.nodeClick(d)\n            } else {\n              if (d[3] === undefined) { // Clicked on child node\n                var urlParams = window.location.search\n                history.pushState('', document.title, '/' + _this.getOrganism + '/' + _this.getGene + '/' + d[2].pdb_id + '/' + d[2].pdb_chain + urlParams)\n                document.querySelectorAll('.coverage_map_container').forEach(function (map) {\n                  map.remove()\n                })\n                window.AQUARIA.structures2match.clusters.forEach(function (cluster, i) {\n                  if (cluster.members.length > 1) {\n                    if (Object.prototype.hasOwnProperty.call(cluster.memberMap, (d[2].pdb_id + d[2].pdb_chain))) {\n                      // Draw CoverageMap on Cluster click\n                      cluster.E_value = cluster.memberMap[d[2].pdb_id + d[2].pdb_chain][0].E_value\n                      window.AQUARIA.display_member(d[2])\n                      window.AQUARIA.showMatchingStructures.selectCluster(cluster, i)\n                      window.AQUARIA.showMatchingStructures.drawCoverageMap(cluster)\n                      return null\n                    }\n                  } else {\n                    if (cluster.members[0].pdb_id === d[2].pdb_id && cluster.members[0].pdb_chain[0] === d[2].pdb_chain) {\n                      cluster.E_value = cluster.members[0].E_value\n                      window.AQUARIA.display_member(cluster)\n                      window.AQUARIA.showMatchingStructures.selectCluster(cluster, i)\n                      window.AQUARIA.showMatchingStructures.drawCoverageMap(cluster)\n                      return null\n                    }\n                  }\n                })\n                if (featureRegex.test(urlParams)) {\n                  _this.waitForElement()\n                }\n              } else { // Clicked on parent node\n                document.querySelector('#tree').classList.remove('hide')\n                document.querySelectorAll('[id^=children_]').forEach(e => e.parentNode.removeChild(e))\n              }\n            }\n          }\n        })\n\n      if (Object.prototype.hasOwnProperty.call(pdbs[0], 'children')) {\n        node.append('rect')\n          .attr('transform', function (d) {\n            return 'translate(' + d[0] + ',' + (d[1] - radius / 2) + ')'\n          })\n          .attr('class', 'label')\n          .attr('width', function (d, i) {\n            return d[2].children ? (d[2].children.length > 9 ? 32 : 26) : 0\n          }\n          )\n          .attr('height', function (d, i) {\n            return d[2].children ? 16 : 0\n          })\n          .attr('rx', 6)\n          .attr('fill', '#a3a3a3')\n          .attr('stroke', 'none')\n      } else {\n        var pNode = d3.select('g#parentNode').selectAll('g').data([parentPDB])\n          .enter()\n\n        pNode.append('text')\n          .attr('x', function (d) { return d.dx - 40 - 20 })\n          .attr('dy', function (d) { return d.dy + 40 })\n          .attr('class', 'nbr_label')\n          .text(function (d) {\n            if (d.name.length > 15) { return d.name.substr(0, 15) + '...' } else { return d.name }\n          })\n          .attr('text-anchor', 'start')\n          .style('fill-opacity', 1)\n          .style('fill', 'white')\n          .style('font-weight', 500)\n\n        pNode.append('rect')\n          .attr('transform', function (d) {\n            return 'translate(' + d.dx + ',' + d.dy + ')'\n          })\n          .attr('class', 'label')\n          .attr('width', function (d, i) {\n            return d.length ? (d.length > 9 ? 32 : 26) : 0\n          })\n          .attr('height', 16)\n          .attr('rx', 6)\n          .attr('fill', '#a3a3a3')\n          .attr('stroke', 'none')\n\n        pNode.append('text')\n          .attr('x', function (d) { return d.dx + radius + 2 })\n          .attr('dy', function (d) { return d.dy + radius - 1 })\n          .attr('class', 'nbr_label')\n          .text(function (d) {\n            return d.length\n          })\n          .attr('text-anchor', 'start')\n          .style('fill-opacity', 1)\n          .style('fill', 'white')\n          .style('font-weight', 500)\n      }\n\n      node\n        .append('circle')\n        .attr('cx', function (d) { return d[0] })\n        .attr('cy', function (d) { return d[1] })\n        .attr('r', (radius))\n        .style('fill', 'white')\n        .style('stroke', '#999999')\n        .style('stroke-width', '1')\n\n      node.append('clipPath')\n        .attr('id', 'clip_' + function (d, i) { return i })\n        .append('circle')\n        .attr('cx', function (d) { return d[0] })\n        .attr('cy', function (d) { return d[1] })\n        .attr('r', (radius))\n        .attr('clip-rule', 'evenodd')\n\n      node.append('image')\n        .attr('width', 2 * (radius - 1) + 'px')\n        .attr('height', 2 * (radius - 1) + 'px')\n        .attr('x', function (d) { return d[0] - 13 })\n        .attr('y', function (d) { return d[1] - 13 })\n        .attr('clip-path', function (d, i) {\n          var pathNm = ' '\n          if (d[2].pdb_id) { pathNm = 'url(#clip_' + d[2].pdb_id + ')' }\n          if (d[2].children && d[2].children[0].pdb_id) { pathNm = 'url(#clip_' + d[2].children[0].pdb_id + ')' }\n          return pathNm\n        })\n        .attr('xlink:href', function (d, i) {\n          var imgNm = ' '\n          if (d[2].pdb_id && typeof d[2].children === 'undefined') { imgNm = d[2].pdb_id.toUpperCase() }\n          if (d[2].children && d[2].children[0].pdb_id) { imgNm = d[2].children[0].pdb_id.toUpperCase() }\n          return (imgNm === ' ') ? ' ' : 'https://www.ebi.ac.uk/pdbe/static/entry/' + imgNm.toLowerCase() + '_assembly_1_chain_front_image-200x200.png'\n          // return (imgNm === \" \") ? \" \" : \"https://www.rcsb.org/pdb/images/\"+imgNm+\"_bio_r_65.jpg\";\n        })\n\n      node.append('text')\n        .attr('x', function (d) { return d[0] + radius + 2 })\n        .attr('dy', function (d) { return d[1] + radius / 2 - 1 })\n        .attr('class', 'nbr_label')\n        .text(function (d, i) {\n          if (d[2].label && d[2].label !== 'undefined') {\n            var nodeLabel = d[2].label\n            if (d[2].label.length > 30) { nodeLabel = d[2].label.substr(0, 15) + ' ... ' + d[2].label.substr(d[2].label.length - 15) }\n            return d[2].children ? d[2].children.length + '      ' + nodeLabel : ' '\n          } else {\n            if (d[3] === undefined) {\n              return d[2].pdb_id + '-' + d[2].pdb_chain\n            }\n          }\n        })\n        .attr('title', function (d, i) {\n          return (d[2].label_long) ? d[2].label_long : d[2].label\n        })\n        .attr('text-anchor', 'start')\n        .style('fill-opacity', 1)\n        .style('fill', 'white')\n        .style('font-weight', 500)\n    },\n    createLinks (svg, tier, pdbArray, parentPDB, index) {\n      var links = []\n      var gap = 0\n      var nodes = []\n      var output = {}\n      var _this = this\n      var pdbs\n      var verticalMargin = 40\n\n      if (index !== undefined) {\n        pdbs = pdbArray[index]\n      } else {\n        pdbs = pdbArray\n      }\n\n      if (tier === 'child') {\n        gap = 60\n      }\n      var nodeStartY = h - verticalMargin\n      // Configure node 0\n      nodes.push([10, nodeStartY])\n\n      // Configure all other nodes\n      for (let i = 0; i < pdbs.length; i++) {\n        nodes.push([80 + gap, (nodeStartY - i * verticalMargin)])\n        nodes[i + 1].push(pdbs[i])\n      }\n      // Configure link fron node 0 to node 1\n      links.push(d3Shape.linkHorizontal()({\n        source: nodes[0],\n        target: nodes[1]\n      })\n      )\n\n      // Append connector\n      if (pdbs.length > 1) {\n        var points = [\n          { xpoint: 30 + gap, ypoint: nodeStartY },\n          { xpoint: 45 + gap, ypoint: nodeStartY - 10 },\n          { xpoint: 47 + gap, ypoint: nodeStartY - 20 }\n        ]\n\n        var Gen = d3Shape.line()\n          .x((p) => p.xpoint)\n          .y((p) => p.ypoint)\n          .curve(d3Shape.curveCardinal)\n\n        svg.append('path')\n          .attr('d', Gen(points))\n          .attr('fill', 'none')\n          .attr('class', function () {\n            return 'outerElem'\n          })\n          .attr('stroke', '#76c276')\n          .style('stroke-width', 2)\n\n        for (let i = 2; i < nodes.length; i++) {\n          var connector = [\n            { xpoint: 47 + gap, ypoint: nodes[i][1] + 10 },\n            { xpoint: 55 + gap, ypoint: nodes[i][1] },\n            { xpoint: 80 + gap, ypoint: nodes[i][1] }\n          ]\n          svg.append('path')\n            .attr('d', Gen(connector))\n            .attr('fill', 'none')\n            .attr('stroke', '#76c276')\n            .style('stroke-width', 2)\n            .attr('class', function (d) {\n              return 'outerElem'\n            })\n        }\n\n        svg.append('line')\n          .style('stroke', '#76c276')\n          .style('stroke-width', 2)\n          .attr('x1', 47 + gap)\n          .attr('y1', nodeStartY + 10 - (nodes.length - 2) * verticalMargin)\n          .attr('x2', 47 + gap)\n          .attr('y2', nodeStartY - 20)\n          .attr('class', function () {\n            if (tier === 1) {\n              return 'outerElem'\n            } else {\n              return 'innerElem'\n            }\n          })\n      }\n      // Append the link to the svg element\n      svg\n        .append('path')\n        .attr('d', links)\n        .attr('stroke', '#76c276')\n        .attr('fill', 'none')\n        .style('stroke-width', 2)\n\n      // Append Next and Previous arrows\n      if (pdbArray.length > 1) {\n        if (index + 1 < pdbArray.length) {\n          svg\n            .append('circle')\n            .attr('cx', 80 + gap)\n            .attr('cy', nodeStartY + 30)\n            .attr('r', 10)\n            .style('fill', '#00b2ff')\n\n          svg.append('image')\n            .attr('width', '18px')\n            .attr('height', '18px')\n            .attr('x', 80 + gap - 9)\n            .attr('y', nodeStartY + 21)\n            .attr('xlink:href', _this.down)\n            .on('click', function () {\n              if (index < pdbArray.length - 1) {\n                _this.generateArc(pdbArray, parentPDB, index + 1)\n              }\n            })\n\n          svg.append('text')\n            .attr('x', 95 + gap)\n            .attr('dy', nodeStartY + 35)\n            .attr('class', 'nbr_label')\n            .text('Next')\n            .attr('text-anchor', 'start')\n            .style('fill-opacity', 1)\n            .style('fill', 'white')\n            .style('font-weight', 500)\n        }\n\n        if (index + 1 > 1) {\n          svg\n            .append('circle')\n            .attr('cx', 80 + gap)\n            .attr('cy', h - (nodes.length * verticalMargin) + 10)\n            .attr('r', 10)\n            .style('fill', '#00b2ff')\n          // #616161\n\n          svg.append('image')\n            .attr('width', '18px')\n            .attr('height', '18px')\n            .attr('x', 80 + gap - 9)\n            .attr('y', h - (nodes.length * verticalMargin) + 1)\n            .attr('xlink:href', _this.up)\n            .on('click', function () {\n              if (index - 1 >= 0) {\n                _this.generateArc(pdbArray, parentPDB, index - 1)\n              }\n            })\n\n          svg.append('text')\n            .attr('x', 95 + gap)\n            .attr('dy', h - (nodes.length * verticalMargin) + radius)\n            .attr('class', 'nbr_label')\n            .text('Previous')\n            .attr('text-anchor', 'start')\n            .style('fill-opacity', 1)\n            .style('fill', 'white')\n            .style('font-weight', 500)\n        }\n      }\n\n      // Source node\n      svg\n        .append('rect')\n        .attr('x', 0)\n        .attr('y', 400)\n        .attr('rx', 6)\n        .attr('ry', 6)\n        .attr('width', _this.coordinates.width)\n        .attr('height', _this.coordinates.height)\n        .style('fill', 'orange')\n        .on('click', function () {\n          _this.hideTree()\n        })\n\n      svg.append('text')\n        .attr('x', 2)\n        .attr('dy', 415)\n        .attr('class', 'nbr_label')\n        .text(_this.count)\n        .attr('text-anchor', 'start')\n        .style('fill-opacity', 1)\n        .style('fill', 'white')\n        .style('font-weight', 500)\n\n      output.nodes = nodes\n      output.links = links\n      output.svg = svg\n      return output\n    },\n    waitForElement () {\n      var _this = this\n      window.AQUARIA.addedFeature = true\n      if (document.getElementById('waitingFrame').style.display !== 'none') {\n        setTimeout(_this.waitForElement, 5)\n      } else {\n        window.AQUARIA.passFeature(window.AQUARIA.customfeatureSet, window.AQUARIA.customfeatureSetioid)\n        // if (window.AQUARIA.customfeatureSet.length === 'undefined') {\n        featureMap.createFeatureMap(window.AQUARIA.customfeatureSet)\n        // } else {\n        //   featureMap.createFeatureMap(window.AQUARIA.customfeatureSet[window.AQUARIA.customfeatureSetioid])\n        // }\n        d3.selectAll('svg.loaded rect.feature').attr('fill', '#a4abdf')\n        d3.select('svg.loaded').classed('loaded', false)\n      }\n    }\n  }\n}\n</script>\n\n<style>\ndiv.scrim {\n    background: #5E5E5E;\n    height: 100%;\n    position: fixed;\n    left: 0;\n    top: 0;\n    opacity: 0.68;\n    -moz-opacity: 0.68;\n    width: 100%;\n}\n#arc {\n    position: fixed;\n    /* top: calc(80vh - 290px); */\n    left: 16px;\n    /* bottom: 2vh; */\n}\n.node {\n    cursor: pointer;\n}\n\n.node circle {\n    fill: #fff;\n    stroke: steelblue;\n    stroke-width: 3px;\n}\n\nsvg text {\n    font: 100% sans-serif;\n    font-size: calc(0.8rem + 3 * ((100vw - 320px) / 680));\n}\n\n.link {\n    fill: none;\n    stroke: #ccc;\n    stroke-width: 2px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TreeView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TreeView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TreeView.vue?vue&type=template&id=20c8531e&\"\nimport script from \"./TreeView.vue?vue&type=script&lang=js&\"\nexport * from \"./TreeView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TreeView.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"scrim level6\",attrs:{\"id\":\"nodeLoader\"},on:{\"click\":_vm.hideLoader}},[_c('img',{attrs:{\"src\":_vm.loader}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"scrim level6\" @click=\"hideLoader\" id='nodeLoader'>\n        <img :src='loader' />\n    </div>\n</template>\n\n<script>\nexport default {\n  name: 'NodeLoader',\n  data () {\n    return {\n      loader: require('../../assets/img/node.gif')\n    }\n  },\n  props: ['coordinates', 'change'],\n  watch: {\n    change: function (newVal, oldVal) {\n      var _this = this\n      document.querySelector('#nodeLoader > img').style.marginLeft = _this.coordinates.clientX + 'px'\n      document.querySelector('#nodeLoader > img').style.marginTop = _this.coordinates.clientY - 10 + 'px'\n    }\n  },\n  methods: {\n    hideLoader () {\n      this.$parent.showLoader = false\n      this.$parent.showTree = false\n    }\n  }\n}\n</script>\n\n<style scoped>\nimg {\n    width: 5vh;\n    background: #4d4d4d;\n    border-radius: 29px;\n    padding: 5px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NodeLoader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NodeLoader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NodeLoader.vue?vue&type=template&id=26c15231&scoped=true&\"\nimport script from \"./NodeLoader.vue?vue&type=script&lang=js&\"\nexport * from \"./NodeLoader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NodeLoader.vue?vue&type=style&index=0&id=26c15231&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"26c15231\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <!-- Draggable DIV -->\n    <div id=\"popup\" class='level3'>\n    <!-- Include a header DIV with the same name as the draggable DIV, followed by \"header\" -->\n    <!-- <div id=\"mydivheader\">\n    </div> -->\n      <div id='vueBased' class='balloon'>\n        <div id='headingC' class='headingC'>\n          <span id=\"loadedPin\" v-on:click='togglePinBehaviour()'></span>\n          <span v-html=\"getIfLoading()\"> </span>\n          <span id=\"popupheader\" v-html=\"getPopupTitle\"> </span>\n          <span class='x' id='x_close' v-on:click='closeAndReset()'></span>\n        </div>\n        <!-- p> {{ getPopupText }} </p -->\n        <div id=\"popupText_variant\" :hidden=\"isVarSpecified()\">\n          <div class='aaLightBg'>\n            <p id='spanDefaultDesc'> {{ getDefaultDesc() }} </p>\n            <div v-for='aaCode in oneAaCodes' v-bind:key='aaCode' :id=\"'divVarInfo_' + aaCode\">\n              <expandable-text-line use-click v-html=\"dataStr + '.'\" v-for='dataStr in getAaDataAsArr(aaCode)' v-bind:key='dataStr'>\n              </expandable-text-line>\n              <!-- expandable-text-line use-click  v-html=\"dataStr + '. '\">\n              </expandable-text-line -->\n              <i>Structures with {{getOldAa()}}{{getVarDisplay()}}{{aaCode}}:</i> <span :class='getIsShownVar(aaCode)' @click=\"showTreeView($event, aaCode)\"> {{ getPdbCount(aaCode) }} </span>\n            </div>\n            <hr id='anAaHr' class='anAaHr' :hidden='isHrHidden()'>\n            <div id='divPosInfo'>\n              <span class=\"weight600\"> Residue {{ getVariant }} </span><br>\n              <span v-for='(arrObj, keyStr) in getPosInfoDataAsArr()' v-bind:key='keyStr'>\n                <expandable-text-line use-click>\n                  <i><span v-html='keyStr'></span>: </i>\n                  <span v-for='dataStr in arrObj' v-bind:key=\"dataStr\" v-html=\"dataStr  + '. '\">\n                  </span>\n                </expandable-text-line>\n              </span>\n              <i>Structures with residue {{ getVariant }}:</i> <span :class='getIsShownRes()' @click=\"showTreeView($event)\"> {{ getTotalPdbCount }} </span>\n            </div>\n          </div>\n          <div class=\"btnsDiv\">\n            <span class='weight600'>See also:</span> <span class='pAaColor'> {{getOldAa()}} &rarr; </span>\n            <button v-for='aaCode in oneAaCodes' v-bind:key='aaCode' :id=\"'btnVarInfo_' + aaCode\" :class=\"getIfBoldInfoPres(aaCode)\" @click=\"showThisAaInfoHideOthers(aaCode)\">{{aaCode}}</button>\n          </div>\n        </div>\n        <div id=\"popupText_noVariant\" :hidden=\"!isVarSpecified()\">\n          <span v-html=\"getPopupText\"></span>\n        </div>\n      </div>\n        <p id='popuptext'>Pop-up text box component for features</p>\n        <TreeView v-show=\"showTree\" id='treeView' class='level5' v-bind:treeReady='data.prop' :count='count' :coordinates=\"data.coordinates\"/>\n        <NodeLoader v-show=\"showLoader\" :coordinates=\"data.coordinates\" :change='data.change'/>\n        <img v-bind:src=\"popupTail\" id='popupTail'>\n    </div>\n</template>\n\n<script>\n// import $ from 'jquery'\nimport TreeView from '../MatchingStructures/TreeView'\n// import observer from 'vue-mutation-observer'\nimport ExpandableTextLine from 'vue-expandable-text-line'\nimport store from '../../store/index'\nimport Vue from 'vue'\nimport { mapGetters } from 'vuex'\nimport axios from 'axios'\nimport NodeLoader from './NodeLoader'\n\nexport default {\n  name: 'PopUp',\n  components: {\n    TreeView,\n    ExpandableTextLine,\n    NodeLoader\n  },\n  data () {\n    return {\n      popupTail: require('../../assets/img//popupTail.png'),\n      expandTextLine: [],\n      oneAaCodes: ['A', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'K', 'L', 'M', 'N', 'P', 'Q', 'R', 'S', 'T', 'V', 'W', 'Y'],\n      threeAaCodes: ['Ala', 'Cys', 'Asp', 'Glu', 'Phe', 'Gly', 'His', 'Ile', 'Lys', 'Leu', 'Met', 'Asn', 'Pro', 'Gln', 'Arg', 'Ser', 'Thr', 'Val', 'Trp', 'Tyr'],\n      showTree: false,\n      isShowTreeViewClicked: false,\n      count: 0,\n      showLoader: false\n    }\n  },\n  filters: {\n    structCntAa (obj) {\n      return 0\n    }\n  },\n  computed: {\n    data () {\n      return {\n        variantStructs: store.state.variantStructs,\n        variantResidues: store.state.variantResidues,\n        prop: null,\n        coordinates: {},\n        change: 0\n        // popupTitle: this.$store.state.popupTitle\n      }\n    },\n    ...mapGetters([\n      'getVariant',\n      'getVariantStructs',\n      'getVariantResidues',\n      'getPopupTitle',\n      'getPopupText',\n      'getServersDone',\n      'getVariantIdx',\n      'getMatches'\n    ]),\n    getTotalPdbCount () {\n      let totalNumStructs = 0\n      var _this = this\n      for (let i = 0; i < _this.oneAaCodes.length; i++) {\n        // console.log('Testing ' + this.oneAaCodes[i])\n        if (_this.getVariantStructs && _this.getVariant && Object.hasOwnProperty.call(_this.getVariantStructs, _this.getVariant) && Object.hasOwnProperty.call(_this.getVariantStructs[_this.getVariant], _this.oneAaCodes[i]) && Object.hasOwnProperty.call(_this.getVariantStructs[_this.getVariant][_this.oneAaCodes[i]], 'pdbs')) {\n          // console.log('Testing ')\n          totalNumStructs = totalNumStructs + _this.getVariantStructs[_this.getVariant][_this.oneAaCodes[i]].pdbs.length\n        }\n      }\n      // console.log(this.$store.state.variantStructs[resNum])\n      return totalNumStructs\n    }\n  },\n  created () {\n    window.addEventListener('click', (e) => {\n      if (!this.$el.contains(e.target)) {\n        const thePin = document.getElementById('loadedPin')\n        if (thePin.classList.contains('loadedPin')) {\n          // console.log('Close the popup.')\n          const closeBtn = document.getElementById('x_close')\n          closeBtn.click()\n        }\n      }\n    })\n  },\n  mounted () {\n    this.dragElement(document.getElementById('popup'))\n    // document.getElementById('popupTail').style.display = 'inline'\n    this.handlePopupInitLoc()\n    // this.handleInitAa()\n    // console.log('Running the created hook')\n    // const submitBtn = document.getElementById('btnVarInfo_F')\n    // submitBtn.click()\n    // this.rmExpandableIfNoOverflow()\n    this.resetLoadedPinState()\n  },\n  activated () {\n    // this.rmExpandableIfNoOverflow()\n  },\n  updated () {\n    // this.handleInitAa()\n    // document.getElementById('popupTail').removeAttribute('hidden')\n    const popupTail = document.getElementById('popupTail')\n    if (popupTail.classList.contains('popupTail_noShow')) {\n      popupTail.classList.remove('popupTail_noShow')\n    }\n    if (!popupTail.classList.contains('popupTail_')) {\n      popupTail.classList.add('popupTail_')\n    }\n    // document.getElementById('popupTail').style.display = 'inline'\n    this.handlePopupInitLoc()\n    // this.$nextTick(function () {\n    //   this.rmExpandableIfNoOverflow()\n    // })\n    this.resetLoadedPinState()\n    // Reset initial state, when reopened.\n    // 1. Pin\n    // 2. Amino acid\n\n    // console.log('\"I found the perp\"')\n    // console.log(this.getVariantResidues)\n\n    // console.log(document.querySelectorAll(\".dropdown-button\"));\n\n    if (this.isShowTreeViewClicked === false) {\n      console.log('handle showTree ' + this.isShowTreeViewClicked)\n      this.handleInitAa()\n    }\n  },\n  methods: {\n    closeAndReset () {\n      this.resetLoadedPinState()\n      document.getElementById('popup').classList.add('fade')\n      // Reset init variant\n      this.resetToInitVar()\n    },\n    showTreeView (event, aaCode) {\n      this.isShowTreeViewClicked = true\n      var _this = this\n      var cord = event.srcElement.getBoundingClientRect()\n      _this.data.coordinates.clientX = cord.left\n      _this.data.coordinates.clientY = cord.top\n      _this.data.coordinates.width = cord.width\n      _this.data.coordinates.height = cord.height\n      _this.data.change = _this.data.change + 1\n      _this.showLoader = true\n      if (_this.getVariantStructs && Object.hasOwnProperty.call(_this.getVariantStructs, _this.getVariant)) {\n        if (aaCode) {\n          _this.count = _this.getPdbCount(aaCode)\n        } else {\n          _this.count = _this.getTotalPdbCount\n        }\n\n        var url = `${window.BACKEND}/secondaryClusteringByResidue`\n        // var url = `${window.BACKEND}/get_secondary_clusters/P16277/5zj6/A/1`\n        var loadRequest = {}\n        loadRequest.selector = window.AQUARIA.protein_primaryAccession\n        loadRequest.sortedKeys = [_this.getVariant]\n        if (aaCode) {\n          loadRequest.aaCode = aaCode\n        }\n        axios({\n          method: 'get',\n          url: url,\n          params: loadRequest\n        }).then(function (response) {\n          console.log(response.data)\n          // pdbs = response.data\n          _this.showTree = true\n          _this.data.prop = response.data\n        })\n      }\n      return 0\n    },\n    getVarDisplay: function () {\n      if (typeof this.getVariant === 'string' && this.getVariant.match('-')) {\n        return this.getVariant.split('-')[0]\n      } else {\n        return this.getVariant\n      }\n    },\n    resetToInitVar: function () {\n      // console.log('Reset to init variant')\n      // 1. Update userSpecified feature str.\n      if (Object.hasOwnProperty.call(this.getVariantResidues, this.getVariant) && Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant], 'theOrigFeatStr') && this.getVariantIdx > -1) {\n        document.getElementById('urlVariant').innerHTML = this.getVariantResidues[this.getVariant].theOrigFeatStr[this.getVariantIdx]\n      }\n      // 2. Update consequenct str\n      if (Object.hasOwnProperty.call(this.getVariantResidues, this.getVariant) && Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant], 'consequent') && this.getVariantIdx > -1) {\n        document.getElementById('consInfo').innerHTML = this.getVariantResidues[this.getVariant].consequent[this.getVariantIdx]\n      }\n      // 3. Update div\n      // 4. Update buttons at bottom & span_missense at top.\n      this.handleInitAa()\n      document.getElementById('spanDefaultDesc').hidden = false\n      if (this.isHrHidden() === true) {\n        document.getElementById('anAaHr').hidden = true\n      }\n    },\n    resetLoadedPinState: function () {\n      var _this = this\n      const loadedPin = document.getElementById('loadedPin')\n      if (_this.getVariant === -1 || (document.getElementById('Features') && document.getElementById('Features').classList.contains('active'))) {\n        // console.log('Does it result this?')\n        if (loadedPin.classList.contains('loadedPin_active')) {\n          loadedPin.classList.remove('loadedPin_active')\n        }\n        if (!loadedPin.classList.contains('loadedPin')) {\n          loadedPin.classList.add('loadedPin')\n        }\n      } else {\n        if (!loadedPin.classList.contains('loadedPin_active')) {\n          loadedPin.classList.add('loadedPin_active')\n        }\n        if (loadedPin.classList.contains('loadedPin')) {\n          loadedPin.classList.remove('loadedPin')\n        }\n      }\n    },\n    updateHrHidden: function () {\n      document.getElementById('anAaHr').hidden = false\n    },\n    isHrHidden: function () {\n      const defaultDesc = this.getDefaultDesc()\n      // const divPopupTextVar = document.getElementById('popupText_variant')\n      let isAnAa = false\n      if (Object.hasOwnProperty.call(this.getVariantResidues, this.getVariant) && Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant], 'newAas') && this.getVariantIdx > -1 && this.oneAaCodes.includes(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0])) {\n        isAnAa = true\n      }\n\n      if (defaultDesc === '' && isAnAa === false) {\n        // console.log('Num children count is: ') // + // divPopupTextVar.children.length)\n        return true\n      } else {\n        return false\n      }\n    },\n    toHideDefaultDesc: function (clickedAa) {\n      if (Object.hasOwnProperty.call(this.getVariantResidues, this.getVariant) && Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant], 'newAas') && this.getVariantIdx > -1 && this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx].includes(clickedAa)) {\n        document.getElementById('spanDefaultDesc').hidden = false\n      } else {\n        document.getElementById('spanDefaultDesc').hidden = true\n      }\n    },\n    handleFocusOut: function () {\n      // console.log('Handle the focus out!')\n\n      const thePin = document.getElementById('loadedPin')\n\n      if (thePin.classList.contains('loadedPin')) {\n        // console.log('Close the popup.')\n        const closeBtn = document.getElementsByClassName('x')[0]\n        closeBtn.click()\n      }\n    },\n    togglePinBehaviour: function () {\n      // 1. Get pin status.\n      const thePin = document.getElementById('loadedPin')\n\n      if (thePin.classList.contains('loadedPin_active')) {\n        thePin.classList.remove('loadedPin_active')\n        thePin.classList.add('loadedPin')\n      } else if (thePin.classList.contains('loadedPin')) {\n        thePin.classList.remove('loadedPin')\n        thePin.classList.add('loadedPin_active')\n      }\n    },\n    rmExpandableIfNoOverflow: function () {\n      const expandableDivs = document.getElementsByClassName('expandable-text-line')\n      // console.log('The inner div is ')\n      for (let i = 0; i < expandableDivs.length; i++) {\n        // console.log(expandableDivs[i].innerHTML)\n        this.checkTheOverflow(expandableDivs[i])\n      }\n      /*\n      expandableDivs.forEach(function (aDiv) {\n        aDiv.childNodes.forEach(function (aDivChild) {\n          console.log(aDivChild)\n          console.log(aDivChild.style)\n\n          aDivChild.style.forEach(function (someStyle) {\n            console.log(someStyle)\n          })\n        })\n      }) */\n      // console.log(expandableDivs.length)\n    },\n    getIfLoading: function () {\n      // console.log('This .getServersDone is ' + this.getServersDone)\n      if (this.getServersDone.length === 0) {\n        return '&nbsp;&nbsp;' // <img src=\"/images/GreyPin.png\" alt=\"Loaded\"  width=25/>&nbsp;'\n      } else {\n        return '<img src=\"/images/tree-loader.gif\" alt=\"Loading...\"  width=15/>'\n      }\n    },\n    getDefaultDesc: function () {\n      // console.log('Restaurant ' + this.getVariantIdx + ' ' + this.getVariantResidues[this.getVariant].defaultDesc[this.getVariantIdx])\n\n      if (this.getVariant && this.getVariantResidues && Object.hasOwnProperty.call(this.getVariantResidues, this.getVariant) && Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant], 'defaultDesc') && this.getVariantIdx > -1) {\n        return this.getVariantResidues[this.getVariant].defaultDesc[this.getVariantIdx]\n      } else {\n        return ''\n      }\n    },\n    handleInitAa: function () {\n      console.log('handleInitAa runs ')//  + this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx])\n      console.log(this.getVariantIdx)\n      // console.log('handleInitAa runs (2) ' + this.getVariantResidues[this.getVariant].newAas + ' ' + this.getVariantIdx)\n      if (Object.hasOwnProperty.call(this.getVariantResidues, this.getVariant) && Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant], 'newAas') && this.getVariantIdx > -1 && this.oneAaCodes.includes(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0])) {\n        const aaBtn = document.getElementById('btnVarInfo_' + this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0])\n        aaBtn.click()\n        // Set consequent again (as gets overwitten in the button)\n        if (Object.hasOwnProperty.call(this.getVariantResidues, this.getVariant) && Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant], 'consequent') && this.getVariantIdx > -1) {\n          document.getElementById('consInfo').innerHTML = this.getVariantResidues[this.getVariant].consequent[this.getVariantIdx]\n        }\n        // document.getElementById('btnVarInfo_' + this.getVariantResidues[this.getVariant].oldAa).hidden = true\n      } else { // Hide all the divs\n        const oldAa = this.getOldAa()\n        for (let i = 0; i < this.oneAaCodes.length; i++) {\n          const theDiv = document.getElementById('divVarInfo_' + this.oneAaCodes[i])\n          if (typeof (theDiv) !== 'undefined' && theDiv !== null) {\n            document.getElementById('divVarInfo_' + this.oneAaCodes[i]).hidden = true\n            document.getElementById('btnVarInfo_' + this.oneAaCodes[i]).classList.remove('selCol')\n          }\n          // Hide oldAa btn\n          if (oldAa === this.oneAaCodes[i]) {\n            // document.getElementById('btnVarInfo_' + this.oneAaCodes[i]).hidden = true\n          }\n        }\n        this.updateSpanAa('')\n      }\n    },\n    updateSpanAa: function (valToDisp) {\n      console.log('Value to display is ' + valToDisp + this.getVariantIdx)\n      if (document.getElementById('span_missenseHeading')) {\n        /*\n        let a = document.getElementById('span_missenseHeading').innerHTML\n        a = a.replace(/[A-Z]*\\)$/, valToDisp + ')')\n        document.getElementById('span_missenseHeading').innerHTML = a\n        */\n\n        if (this.getVariantResidues && (Object.hasOwnProperty.call(this.getVariantResidues, this.getVariant) && Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant], 'isOne') && this.getVariantIdx > -1 && this.getVariantResidues[this.getVariant].isOne[this.getVariantIdx] === true)) {\n          // specify as 3 letters.\n          const idx = this.oneAaCodes.indexOf(valToDisp)\n          if (idx !== -1) {\n            document.getElementById('newAa').innerHTML = this.threeAaCodes[idx]\n          } else {\n            document.getElementById('newAa').innerHTML = ''\n          }\n        } else {\n          document.getElementById('newAa').innerHTML = valToDisp\n        }\n        // console.log('the heading is updating here ' + valToDisp)\n      }\n    },\n    updateUserSpecifiedAa: function (valToDisp) {\n      if (document.getElementById('urlVariant')) {\n        if (this.getVariantResidues && (Object.hasOwnProperty.call(this.getVariantResidues, this.getVariant) && Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant], 'isOne') && this.getVariantIdx > -1 && this.getVariantResidues[this.getVariant].isOne[this.getVariantIdx] === true)) {\n          // specify as 1 letters.\n          document.getElementById('varSpe_toRep').innerHTML = valToDisp\n        } else {\n          const idx = this.oneAaCodes.indexOf(valToDisp)\n          if (idx !== -1) {\n            document.getElementById('varSpe_toRep').innerHTML = this.threeAaCodes[idx]\n          } else {\n            document.getElementById('varSpe_toRep').innerHTML = ''\n          }\n        }\n        // console.log('the heading is updating here ' + valToDisp)\n      }\n    },\n    getInitLoadedPin: function () {\n      var _this = this\n      // console.log('Ryan whealon  (2)' + document.getElementById('Features').classList.contains('active'))\n      // const loadedPin = document.getElementById('loadedPin')\n      // console.log('Is this hidden? ' + document.getElementById('Features'))\n      if (_this.getVariant === -1 || (document.getElementById('Features') && document.getElementById('Features').classList.contains('active'))) {\n        return 'loadedPin'\n      } else {\n        return 'loadedPin_active'\n      }\n    },\n    isVarSpecified: function () {\n      if (this.getVariant === -1) {\n        return true\n      }\n      return false\n    },\n    getAaDataAsArr: function (aa) {\n      var arrForExpandable = []\n      if (Object.hasOwnProperty.call(this.getVariantResidues, this.getVariant) && Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant], aa)) {\n        for (let i = 0; i < this.getVariantResidues[this.getVariant][aa].length; i++) {\n          // console.log('Boots on the moon: ' + divForTextLen.scrollHeight + ' ' + divForTextLen.clientHeight + ' ' + divForTextLen.offsetWidth + ' ' + divForTextLen.scrollWidth)\n          // console.log(this.getVariantResidues[this.getVariant][aa][i])\n          // this.checkOverflow()\n        }\n        return this.getVariantResidues[this.getVariant][aa]\n      } else {\n        return arrForExpandable\n      }\n    },\n    setupDivForLen: function (dataStr) {\n      const divForTextLen = document.getElementById('forTextLen')\n      divForTextLen.innerHTML = dataStr\n      // divForTextLen.innerHTML = 'Some rediculously long text. Your majesty your highness would you honour me wiith a dance :)' + '.'\n    },\n    checkTheOverflow: function (elem) {\n      // console.log('\"Blah blah\"')\n      let dataStr = elem.innerText\n      // console.log(dataStr)\n      dataStr = dataStr.replace(/<[^>]*>?/gm, '')\n      // console.log(dataStr)\n      this.setupDivForLen(dataStr)\n      this.$nextTick(function () {\n        // this.$refs.input.focus();\n        const expClass = this.checkOverflow()\n        // console.log('Just before')\n        if (expClass === 'anAaHr') {\n          elem.classList.remove('expandable-text-line')\n          elem.classList.add('noExpandableCursor')\n        } else {\n        }\n        // return\n      })\n      // return 'anAaHr'\n    },\n    checkOverflow: function () {\n      const divForTextLen = document.getElementById('forTextLen')\n      // console.log('Boots on the moon: ' + divForTextLen.scrollHeight + ' ' + divForTextLen.clientHeight + ' ' + divForTextLen.offsetWidth + ' ' + divForTextLen.scrollWidth)\n      if (divForTextLen.clientWidth < divForTextLen.scrollWidth || divForTextLen.clientHeight < divForTextLen.scrollHeight) {\n        // console.log('Boots on the moon: for expandalbe this one')\n        return 'anAaHr'\n      }\n      return ''\n    },\n    getPosInfoDataAsArr: function () {\n      if (Object.hasOwnProperty.call(this.getVariantResidues, this.getVariant) && Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant], 'positionInfo')) {\n        return this.getVariantResidues[this.getVariant].positionInfo\n      }\n      return []\n    },\n    showThisAaInfoHideOthers: function (aa) {\n      // console.log('The click has been invoked')\n      const oldAa = this.getOldAa()\n      for (let i = 0; i < this.oneAaCodes.length; i++) {\n        const theDiv = document.getElementById('divVarInfo_' + this.oneAaCodes[i])\n        if (typeof (theDiv) !== 'undefined' && theDiv !== null) {\n          if (aa === this.oneAaCodes[i]) {\n            // show this one\n            document.getElementById('divVarInfo_' + this.oneAaCodes[i]).hidden = false\n            document.getElementById('btnVarInfo_' + this.oneAaCodes[i]).classList.add('selCol')\n\n            this.updateSpanAa(aa)\n            this.updateUserSpecifiedAa(aa)\n            this.toHideDefaultDesc(aa)\n            // this.isHrHidden()\n            this.updateHrHidden(aa)\n\n            if (Object.hasOwnProperty.call(this.getVariantResidues, this.getVariant) && Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant], 'consequent')) {\n              // check if old AA == this aa\n              if (this.oneAaCodes[i] === oldAa) {\n                document.getElementById('consInfo').innerHTML = 'Synonymous '\n              } else {\n                document.getElementById('consInfo').innerHTML = 'Missense '\n              }\n            }\n          } else {\n            // hide these ones\n            document.getElementById('divVarInfo_' + this.oneAaCodes[i]).hidden = true\n            document.getElementById('btnVarInfo_' + this.oneAaCodes[i]).classList.remove('selCol')\n\n            // Show button at bottom though (if not same as old Aa)\n            if (this.oneAaCodes[i] !== oldAa) {\n              document.getElementById('btnVarInfo_' + this.oneAaCodes[i]).hidden = false\n            }\n          }\n          // console.log(theDiv)\n        }\n      }\n    },\n    getIsShownVar: function (aa) {\n      if (this.getMatches && Object.hasOwnProperty.call(this.getMatches, 'Selected_PDB') && Object.hasOwnProperty.call(this.getMatches.Selected_PDB, 'pdb_id') && Object.hasOwnProperty.call(this.getMatches.Selected_PDB, 'pdb_chain')) {\n        const key = this.getMatches.Selected_PDB.pdb_id + ':' + this.getMatches.Selected_PDB.pdb_chain\n\n        if (this.getVariant && this.getVariantStructs && Object.hasOwnProperty.call(this.getVariantStructs, this.getVariant) && Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant], aa) && Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][aa], 'pdbs') && this.getVariantStructs[this.getVariant][aa].pdbs.includes(key)) {\n          return 'selCol_padded'\n        } else if (this.getVariant && this.getVariantStructs && Object.hasOwnProperty.call(this.getVariantStructs, this.getVariant) && Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant], aa) && Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][aa], 'pdbs') && !this.getVariantStructs[this.getVariant][aa].pdbs.includes(key)) {\n          return 'noSelCol_padded'\n        } else {\n          return ''\n        }\n        // console.log('The key is ' + key)\n      }\n      /* if (this.getVariantStructs && Object.hasOwnProperty.call(this.getVariantStructs, this.getVariant) && Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant], aa) && Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][aa], 'isShown') && this.getVariantStructs[this.getVariant][aa].isShown === true) {\n        return 'selCol_padded'\n      } else if (this.getPdbCount(aa) === 0) {\n        return ''\n      }\n      return 'noSelCol_padded'\n      */\n    },\n    getIsShownRes: function () {\n      console.log('The variant structs is ')\n      console.log(this.getVariantStructs)\n      console.log(this.getMatches)\n      if (this.getVariantStructs && Object.hasOwnProperty.call(this.getVariantStructs, this.getVariant) && Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant], 'isShown') && this.getVariantStructs[this.getVariant].isShown === true) {\n        return 'selCol_padded'\n      } else if ((this.getVariantStructs && this.getVariant > -1 && Object.hasOwnProperty.call(this.getVariantStructs, this.getVariant) && Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant], 'isShown') && this.getVariantStructs[this.getVariant].isShown === false) || this.getTotalPdbCount !== 0) {\n        return 'noSelCol_padded'\n      } else {\n        return ''\n      }\n    },\n    /* getIsInitAa: function (aa) {\n      const newAas = this.getNewAasArr()\n      if (aa === newAas[0]) {\n        this.showThisAaInfoHideOthers(aa, false)\n        return false\n      }\n      return true\n    }, */\n    listWithNoOldAa: function () {\n      let noOldAaCodes = this.oneAaCodes.slice() // eslint-disable-line prefer-const\n      const oldAa = this.getOldAa()\n\n      if (oldAa === '') {\n        return noOldAaCodes\n      }\n\n      const idx = noOldAaCodes.indexOf(oldAa)\n      if (idx !== -1) {\n        noOldAaCodes.splice(idx, 1)\n      }\n      // console.log('\"The new oneAaCodes is \"')\n      // console.log(noOldAaCodes)\n      return (noOldAaCodes)\n    },\n    getOldAa: function () {\n      if (Object.hasOwnProperty.call(this.getVariantResidues, this.getVariant) && Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant], 'oldAa')) {\n        return this.getVariantResidues[this.getVariant].oldAa\n      }\n      return ''\n    },\n    getIfBoldInfoPres: function (aa) {\n      let isMakeBold = false\n      if (Object.hasOwnProperty.call(this.getVariantResidues, this.getVariant) && Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant], aa)) {\n        for (let i = 0; i < this.getVariantResidues[this.getVariant][aa].length; i++) {\n          if (/* this.getVariantResidues[this.getVariant][aa][i].match('UniProt') || this.getVariantResidues[this.getVariant][aa][i].match('FunVar') || this.getVariantResidues[this.getVariant][aa][i].match('COSMIC') || */ (this.getVariantStructs && Object.hasOwnProperty.call(this.getVariantStructs, this.getVariant) && Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant], aa) && Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][aa], 'pdbs') && this.getVariantStructs[this.getVariant][aa].pdbs.length > 0)) {\n            isMakeBold = true\n          }\n        }\n      }\n\n      if (isMakeBold === true) {\n        return 'btnAaBold_b'\n      } else {\n        return 'btnAaBold'\n      }\n    },\n    getPdbCount: function (aa) {\n      // console.log(store.getters.getVariant)\n      // return 100// store.getters.getPdbCount(aa)\n      if (this.getVariantStructs && Object.hasOwnProperty.call(this.getVariantStructs, this.getVariant) && Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant], aa) && Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][aa], 'pdbs')) {\n        return this.getVariantStructs[this.getVariant][aa].pdbs.length\n      }\n      return 0\n    },\n    handler: function () {\n      this.dragElement(document.getElementById('popup'))\n\n      /*\n      draggable=\"true\" ondragstart=\\\"event.preventDefault();event.stopPropagation();\\\"\n      */\n      const ExpandableTextLineCtor = Vue.extend(ExpandableTextLine)\n      const oneAaCodes = ['A', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'K', 'L', 'M', 'N', 'P', 'Q', 'R', 'S', 'T', 'V', 'W', 'Y']\n      // const b = document.getElementsByTagName('toReplace_varInfo')\n      // console.log('The number of nodes to remove are: ' + b.length)\n\n      const b2 = document.getElementsByTagName('toReplace_posInfo')\n      if (b2.length > 0) {\n        var posInfoDiv = document.getElementById('divVI_posInfo')\n        for (let j = 0; j < b2.length; j++) {\n          const componentinstance = new ExpandableTextLineCtor({ data: function () { return { p: b2[j].innerHTML } }, propsData: { useClick: true } })\n          // console.log(componentinstance)\n\n          componentinstance.$mount()\n          componentinstance.$el.innerHTML = b2[j].innerHTML\n          posInfoDiv.appendChild(componentinstance.$el)\n          this.expandTextLine.push(componentinstance)\n        }\n        document.getElementById('balloon').appendChild(document.getElementById('divVariantInfo'))\n        // Add the chosen VarInfo div.\n        document.getElementById('divVariantInfo').appendChild(document.getElementById('divVI_chosen'))\n        // Add the posInfo div.\n        document.getElementById('divVariantInfo').appendChild(document.getElementById('divVI_posInfo'))\n\n        // Add btns.\n        document.getElementById('balloon').appendChild(document.getElementById('buttons_eachAa'))\n        // Attach events to btns.\n        for (let k = 0; k < oneAaCodes.length; k++) {\n          if (document.getElementById('btnVI_' + oneAaCodes[k])) {\n            document.getElementById('btnVI_' + oneAaCodes[k]).addEventListener('click', function () {\n              // Change heading amino acid.\n              /*\n              let a = document.getElementById('span_missenseHeading').innerHTML\n              if (a.match(/→.+\\)/)) { // eslint-disable-line no-useless-escape\n                a = a.replace(/→.+\\)/, '→ ' + oneAaCodes[k] + ')') // eslint-disable-line no-useless-escape\n              } else {\n                a = a.replace(/\\)/, oneAaCodes[k] + ')')\n              }\n\n              document.getElementById('span_missenseHeading').innerHTML = a\n              */\n              this.updateSpanAa(oneAaCodes[k])\n              // Hide clicked button, and unhide any other button\n              hideClickedUnhideOthrs(oneAaCodes[k])\n              // document.getElementById('divVI_chosen').appendChild(document.getElementById('divVI_varInfo_' + oneAaCodes[k]))\n              // Move clicked aa div to chosen, and move any other div already in chosen back down\n              moveAndShowClickedDivAa(oneAaCodes[k])\n            })\n          }\n        }\n      }\n      for (let i = 0, len = b2.length; i !== len; ++i) {\n        b2[0].parentNode.removeChild(b2[0])\n      }\n      for (let i = 0; i < oneAaCodes.length; i++) {\n        if (document.getElementsByTagName('toReplace_varInfo_' + oneAaCodes[i])) {\n          const anAaToReplace = document.getElementsByTagName('toReplace_varInfo_' + oneAaCodes[i])\n          if (anAaToReplace.length > 0) {\n            if (document.getElementById('divVI_varInfo_' + oneAaCodes[i])) {\n              var varInfoDivAnAa = document.getElementById('divVI_varInfo_' + oneAaCodes[i])\n              // console.log('Popup vue anAaDiv ')\n              // console.log(varInfoDivAnAa)\n              for (let j = 0; j < anAaToReplace.length; j++) {\n                const componentinstance = new ExpandableTextLineCtor({ data: function () { return { p: anAaToReplace[j].innerHTML } }, propsData: { useClick: true } })\n                componentinstance.$mount()\n                componentinstance.$el.innerHTML = anAaToReplace[j].innerHTML\n                // console.log('anAaToReplace[j] ' + anAaToReplace[j].innerHTML)\n                varInfoDivAnAa.appendChild(componentinstance.$el)\n                this.expandTextLine.push(componentinstance)\n              }\n              document.getElementById('divVI_varInfo').appendChild(document.getElementById('divVI_varInfo_' + oneAaCodes[i]))\n\n              for (let l = 0, len = anAaToReplace.length; l !== len; ++l) {\n                anAaToReplace[0].parentNode.removeChild(anAaToReplace[0])\n              }\n              handleInitVar()\n            }\n          }\n        }\n      }\n\n      function hideClickedUnhideOthrs (clickedAa) {\n        for (let i = 0; i < oneAaCodes.length; i++) {\n          if (clickedAa === oneAaCodes[i]) {\n            if (document.getElementById('btnVI_' + clickedAa)) {\n              // document.getElementById('btnVI_' + clickedAa).style.display = 'none'\n              document.getElementById('btnVI_' + clickedAa).classList.add('selCol')\n              // document.querySelector('.selCol').addEventListener('click', function () {\n              //   console.log('this')\n              //   _this.showTree = true\n              // })\n            }\n          } else {\n            if (document.getElementById('btnVI_' + oneAaCodes[i])) {\n              // document.getElementById('btnVI_' + oneAaCodes[i]).style.display = 'inline'\n              document.getElementById('btnVI_' + oneAaCodes[i]).classList.remove('selCol')\n            }\n          }\n        }\n      }\n\n      function moveAndShowClickedDivAa (selAa) {\n        for (let i = 0; i < oneAaCodes.length; i++) {\n          if (selAa === oneAaCodes[i]) {\n            // console.log('It comes down here!')\n            if (document.getElementById('divVI_varInfo_' + selAa)) {\n              document.getElementById('divVI_chosen').appendChild(document.getElementById('divVI_varInfo_' + selAa))\n            }\n          } else {\n            if (document.getElementById('divVI_varInfo_' + oneAaCodes[i])) {\n              document.getElementById('divVI_varInfo').appendChild(document.getElementById('divVI_varInfo_' + oneAaCodes[i]))\n            }\n          }\n        }\n      }\n\n      function handleInitVar () {\n        if (document.getElementById('span_missenseHeading')) {\n          const a = document.getElementById('span_missenseHeading').getElementById('newAa').innerHTML\n\n          if (this.oneAaCodes.includes(a)) {\n            hideClickedUnhideOthrs(a)\n            moveAndShowClickedDivAa(a)\n          }\n        }\n      }\n    },\n    handlePopupInitLoc: function () {\n      var width = document.getElementById('popup').offsetWidth\n      var left = document.getElementById('popup').left\n      var bleft = parseInt(left + (width / 2) - 120)\n      var tailLeft\n      if (bleft < 0) {\n        console.log('Popup tail - option 1')\n        tailLeft = 107 + bleft + 3\n        document.querySelector('#popupTail').style.marginLeft = tailLeft + 'px'\n        document.querySelector('div#popup').style.left = '-5px'\n        console.log('Popup tail (1). ')\n        document.getElementById('popupTail').style.display = 'inline'\n      }\n      if (bleft + document.querySelector('div#popup').offsetWidth + 10 > document.querySelector('#structure-viewer').clientWidth) {\n        console.log('Popup tail - option 2')\n        const popupWidth = document.getElementById('popup').offsetWidth\n        document.querySelector('div#popup').style.left = (document.querySelector('#structure-viewer').clientWidth + 11 - popupWidth) + 'px'\n        tailLeft = 107 + (popupWidth - (document.querySelector('#structure-viewer').clientWidth - bleft) - 11)\n        document.querySelector('#popupTail').style.marginLeft = tailLeft + 'px'\n\n        console.log('Popup tail (2). ' + popupWidth + ' ' + tailLeft)\n        document.getElementById('popupTail').style.display = 'inline'\n      }\n    },\n    dragElement: function (elmnt) {\n      var pos1 = 0; var pos2 = 0; var pos3 = 0; var pos4 = 0\n      if (document.getElementById('headingC')) {\n        // if present, the header is where you move the DIV from:\n        document.getElementById('headingC').onmousedown = dragMouseDown\n      } else {\n        // otherwise, move the DIV from anywhere inside the DIV:\n        // elmnt.onmousedown = dragMouseDown\n      }\n\n      function dragMouseDown (e) {\n        e = e || window.event\n        e.preventDefault()\n\n        // document.getElementById('loadedPin').classList.remove('loadedPin_active')\n        // document.getElementById('loadedPin').classList.add('loadedPin')\n\n        // get the mouse cursor position at startup:\n        pos3 = e.clientX\n        pos4 = e.clientY\n        document.onmouseup = closeDragElement\n        // call a function whenever the cursor moves:\n        document.onmousemove = elementDrag\n      }\n\n      function elementDrag (e) {\n        e = e || window.event\n        e.preventDefault()\n        // calculate the new cursor position:\n        pos1 = pos3 - e.clientX\n        pos2 = pos4 - e.clientY\n        pos3 = e.clientX\n        pos4 = e.clientY\n        // set the element's new position:\n        elmnt.style.top = (elmnt.offsetTop - pos2) + 'px'\n        elmnt.style.left = (elmnt.offsetLeft - pos1) + 'px'\n\n        // document.getElementById('popupTail').hidden = true\n        const popupTail = document.getElementById('popupTail')\n        if (popupTail.classList.contains('popupTail_')) {\n          popupTail.classList.remove('popupTail_')\n        }\n        if (!popupTail.classList.contains('popupTail_noShow')) {\n          popupTail.classList.add('popupTail_noShow')\n        }\n      }\n\n      function closeDragElement () {\n        // stop moving when mouse button is released:\n        document.onmouseup = null\n        document.onmousemove = null\n\n        // document.getElementById('loadedPin').classList.remove('loadedPin')\n        // document.getElementById('loadedPin').classList.add('loadedPin_active')\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n  .weight600 {\n    font-weight: 600 !important;\n    font-size: 18px !important;\n  }\n\n    .spanDefaultDesc {\n      padding-bottom: 50px;\n      margin-bottom: 20px;\n    }\n    .forTextLen {\n       overflow: hidden;\n       /* height: var(--line-height); */\n       white-space:nowrap;\n       /* position: absolute; */\n    }\n    .popupTail_ {\n      display: inline\n    }\n\n    .popupTail_noShow {\n      display: none\n    }\n\n    #popup {\n      display: none;\n      position: absolute;\n      text-align: left;\n      width: 90vw;\n      max-width: 30rem;\n    }\n\n    #popuptext{\n      background-color: #666666;\n      color: white;\n      margin-top: 0px;\n      border-radius: 12px;\n      margin-bottom: 0px;\n    }\n    #popupTail {\n        margin-top: -11px;\n    }\n\n    .btnsDiv {\n        /* max-width: 400px;\n        width: 400px;\n        height: 12px;\n        min-height: 6px; */\n        /* font-size: 15.4px; */\n        display: inline;\n    }\n\n    .headingC {\n      /* display: flex; */\n      /* justify-content: center; */\n      padding-top: 2px;\n      padding-bottom: 2px;\n      align-items: center;\n      cursor: move;\n    }\n\n    .x {\n      float: right;\n      align-items: center;\n    }\n\n    .selCol {\n      color: var(--text) !important;\n      background-color: var(--primary-highlight);\n      border-radius: 25%;\n    }\n\n    .selCol_padded {\n      color: var(--text) !important;\n      background-color: var(--primary-highlight);\n      border-radius: 25%;\n      padding-right: 4px;\n      padding-left: 4px;\n    }\n    .noSelCol_padded {\n      color: var(--text) !important;\n      background-color: #999;\n      border-radius: 25%;\n      padding-right: 4px;\n      padding-left: 4px;\n    }\n\n    .selCol_padded:hover {\n      background-color: var(--primary-link);\n    }\n\n    .noSelCol_padded:hover {\n      background-color: var(--primary-link);\n    }\n\n    span.loadedPin {\n      background: url('../../assets/images/UI-pin.png') no-repeat;\n      display: block;\n      float: left;\n      height: 19px;\n      width: 19px;\n      cursor: pointer;\n    }\n\n    span.loadedPin_active {\n      background: url('../../assets/images/UI-pin.png') no-repeat;\n      display: block;\n      float: left;\n      height: 19px;\n      width: 19px;\n      background-position: 0 -21px;\n      cursor: pointer;\n      /* cursor: pointer; */\n    }\n\n    .noExpandableCursor {\n      cursor: text !important;\n      background-color: greenyellow;\n    }\n\n    #popup {\n      opacity: 1;\n      transition: opacity 1s;\n    }\n\n    #popup.fade {\n      display: none;\n      height: 0;\n      opacity: 0;\n      overflow: hidden;\n      transition: height 350ms ease-in-out, opacity 750ms ease-in-out;\n    }\n</style>\n\n<style>\n  .expandable {\n    margin: 8px 0px;\n    /* cursor: ns-resize; */\n  }\n  .expandable-text-line {\n    cursor: s-resize !important;\n  }\n  .expandable-text-line.__extl-expanded{\n    cursor: n-resize !important;\n  }\n  #popuptext a{\n    color: var(--background);\n  }\n  #vueBased a{\n    color: var(--background);\n  }\n  .anAaHr {\n    border-top: 0.5px solid #929192;\n  }\n  .btnAaBold {\n    border: none;\n    background-color: inherit;\n    cursor: pointer;\n    color: #929192 !important;\n    padding-left: 3px;\n    padding-right: 3px;\n    display: inline;\n  }\n  .btnAaBold_b {\n    border: none;\n    background-color: inherit;\n    cursor: pointer;\n    color: #a6a5a6 !important;\n    padding-left: 3px;\n    padding-right: 3px;\n    display: inline;\n    font-weight: bold;\n  }\n\n  /*\n  .selCol:hover {\n    background-color: var(--primary-link);\n  }\n  #title span a:active, #title span a.active {\n    background-color: var(--primary-highlight);\n  }\n  */\n\n  .pAaColor {\n    display: inline;\n    color: #929192 !important;\n    cursor: move; /* fallback if grab cursor is unsupported */\n  }\n  .aaLightBg {\n    background-color: #7f7e7f;\n    padding-top: 10px;\n    padding-bottom: 10px;\n    padding-left: 10px;\n    padding-right: 10px;\n    cursor: pointer;\n  }\n\n  .btnAaBold:hover {\n    background-color: var(--primary-link);\n  }\n\n  .btnAaBold_b:hover {\n    background-color: var(--primary-link);\n    font-weight: bold;\n  }\n\n  /* Add this via class to link.\n  a:link {\n    color: #d5d4d5;\n    text-decoration: underline;\n  }\n  */\n  /*\n  .theCursor{\n    cursor: context-menu;\n  }\n*/\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PopUp.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PopUp.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PopUp.vue?vue&type=template&id=55704a1a&scoped=true&\"\nimport script from \"./PopUp.vue?vue&type=script&lang=js&\"\nexport * from \"./PopUp.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PopUp.vue?vue&type=style&index=0&id=55704a1a&scoped=true&lang=css&\"\nimport style1 from \"./PopUp.vue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"55704a1a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.data.error)?_c('div',{staticClass:\"ErrorPanel overlay level3\",attrs:{\"id\":\"AboutError\"}},[_c('a',{staticClass:\"close\",attrs:{\"href\":\"#\"},on:{\"click\":_vm.loadLastSuccess}}),_c('div',[_c('p',{staticClass:\"thetitle\"},[_vm._v(_vm._s(_vm.data.error))]),_c('p',{staticClass:\"intro1\"},[_vm._v(_vm._s(_vm.data.errorMsg)+\" \"),(_vm.data.errorMsg)?_c('br'):_vm._e(),_vm._v(\" \"),(_vm.data.errorMsg)?_c('br'):_vm._e(),_vm._v(\" Press 'Report Issue' to tell the Aquaria team, or press 'OK' to return to previous structure.\")]),_c('div',[_c('md-button',{staticClass:\"md-raised md-primary\",attrs:{\"href\":_vm.lastURL}},[_vm._v(\"OK\")]),_c('md-button',{staticClass:\"md-raised md-primary\",attrs:{\"href\":_vm.issuesURL,\"target\":\"_blank\"}},[_vm._v(\"Report Issue\")])],1)])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"AboutError\" v-if=\"data.error\" class='ErrorPanel overlay level3'>\n    <a href=\"#\" class=\"close\" @click=\"loadLastSuccess\"></a>\n    <div>\n      <p class=\"thetitle\">{{data.error}}</p>\n      <p class=\"intro1\">{{data.errorMsg}} <br v-if=\"data.errorMsg\"> <br v-if=\"data.errorMsg\"> Press 'Report Issue' to tell the Aquaria team, or press 'OK' to return to previous structure.</p>\n      <div>\n        <md-button class=\"md-raised md-primary\" :href='lastURL'>OK</md-button>\n        <md-button class=\"md-raised md-primary\" :href='issuesURL' target='_blank'>Report Issue</md-button>\n      </div>\n      <!-- <p>We encourage you to <a v-bind:href=\"issues\" target=\"_blank\" title=\"Go to Github\">report issues</a>, <a :href=\"changes\" target=\"_blank\" title=\"Go to Github\">propose code changes</a>, or <a href=\"mailto:contact@aquaria.app\" title=\"Email us\">contact us</a> regarding suggestions.</p> -->\n      <!-- <p><i>Last updated May, 2020. PDB entries released since then are not yet available in Aquaria.</i><p> -->\n    </div>\n  </div>\n</template>\n<script>\nimport store from '@/store/index'\nexport default {\n  name: 'Errors',\n  data () {\n    return {\n      issues: '',\n      title: '',\n      changes: 'https://github.com/aqclient/dev.aqclient.github.io/issues/new?labels=enhancement',\n      logo: require('../../assets/img/logo-large.png')\n    }\n  },\n  computed: {\n    data () {\n      return {\n        message: store.state.message,\n        error: store.state.error,\n        errorMsg: store.state.errorMsg\n      }\n    },\n    issuesURL () {\n      return 'https://github.com/aqclient/dev.aqclient.github.io/issues/new?title=Problem with this page&labels=bug&body=<a href=\"' + encodeURIComponent(window.location.href) + '\">' + this.data.error + '</a>'\n    },\n    pageUrl () {\n      return window.location.href\n    },\n    lastURL () {\n      return window.location.origin\n      // + (localStorage.getItem('LastSuccess') ? localStorage.getItem('LastSuccess') : '/P04637')\n    }\n  },\n  methods: {\n    loadLastSuccess: function () {\n      window.location.pathname = localStorage.getItem('LastSuccess') ? localStorage.getItem('LastSuccess') : '/P04637'\n    }\n  }\n}\n</script>\n<style scoped>\n.md-button.md-theme-default.md-raised:not([disabled]).md-primary{\n  background: #707070;\n  float: right;\n}\n.intro1{\n  padding-left: 10px;\n}\n#AboutError{\n    display: flex;\n    position: absolute;\n    z-index: 9999999999999;\n    top: 1vh;\n    left: 50%;\n    background: var(--primary-tab);\n    padding: 0.5rem 0.75rem;\n    border-radius: 1rem;\n    flex-direction: column;\n}\np.thetitle {\n  display: flex;\n    background-color: var(--primary-label);\n    flex-basis: auto;\n    color: var(--text);\n    text-align: center;\n    line-height: 1.25;\n    padding: 0.5rem 2rem;\n    border-radius: 1.5rem;\n    margin: auto;\n}\n  #AboutError:target.ErrorPanel {\n      display: flex;\n      font-size: 90%;\n      max-width: 40rem;\n  }\n  p#starter {\n      text-align: center;\n  }\n  #AboutError p.thetitle {\n      text-transform: uppercase;\n      letter-spacing: 0.25em;\n  }\n #AboutError a {\n   /* color: var(--primary-link); */\n   text-decoration: none;\n }\n  .affiliations {\n    font-size: 70%;\n  }\n  /* #AboutError span {\n    display: inline-block;\n    white-space: nowrap;\n    margin-right: 0.25em;\n  }\n  .affiliations span {\n      margin-right: 1.2em;\n  } */\n  /* .ErrorPanel .close::after {\n    width: 1.5rem;\n    height: 1.5rem;\n  } */\n\n  .ErrorPanel .close {\n    position: relative;\n    display: block;\n  }\n  .ErrorPanel .close::after {\n    right: 0.25rem;\n    top: 0.25rem;\n    width: calc(1.25rem + 0.5vw);\n    height: calc(1.25rem + 0.5vw);\n    position: absolute;\n    display: flex;\n    z-index: 11;\n    align-items: center;\n    justify-content: center;\n    background-color: rgba(0,0,0,.5);\n    border-radius: 50%;\n    color: white;\n    content: \"×\";\n    cursor: pointer;\n    font-size: calc(1.25rem + 0.5vw);\n  }\n  .ErrorPanel .close:hover::after {\n      background-color: var(--primary-highlight);\n  }\n .ErrorPanel.overlay {\n    border-radius: 1rem;\n    /* box-shadow: 0 0 0 9999px rgba(0,0,0,0.6); /* dark background overlay */\n    /* -webkit-box-shadow: 0 0 0 999px rgba(0,0,0,0.6); */\n    padding: 0.5rem 0.75rem;\n    position: absolute;\n    top: 1vh;\n    left: 50%;\n    transform: translate(-50%, 0%);\n    width: 90vw;\n    max-width: 30rem;\n  }\n </style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Errors.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Errors.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Errors.vue?vue&type=template&id=72919d45&scoped=true&\"\nimport script from \"./Errors.vue?vue&type=script&lang=js&\"\nexport * from \"./Errors.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Errors.vue?vue&type=style&index=0&id=72919d45&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"72919d45\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"HelpPanel hide dialouge-window overlay level7\",attrs:{\"id\":\"UserHelp\"}},[_c('a',{staticClass:\"close\",attrs:{\"href\":\"#\"},on:{\"click\":_vm.closeHelp}}),_c('div',{staticClass:\"fill\",attrs:{\"id\":\"fullwindow-video\"}},_vm._l((_vm.videos),function(video){return _c('youtube',{key:video.id,ref:\"youtube\",refInFor:true,staticClass:\"hide\",attrs:{\"id\":video.id,\"video-id\":video.id},on:{\"paused\":function($event){return _vm.paused($event)},\"ended\":function($event){return _vm.finished($event)}}})}),1),_c('div',{attrs:{\"id\":\"contents\"}},[_c('p',{staticClass:\"thetitle\"},[_vm._v(_vm._s(_vm.data.title))]),_c('p',{staticClass:\"intro\"},[_vm._v(\"Watch tutorial videos to get started.\")]),_c('p',{staticClass:\"intro\"},[_vm._v(\"Skip watching tutorial videos and start using Aquaria.\")]),(!_vm.data.newUser)?_c('Playlist',{attrs:{\"playlist\":_vm.videos}}):_vm._e(),(_vm.data.newUser)?_c('div',[_c('youtube',{ref:\"youtube\",attrs:{\"id\":\"intro-video\",\"video-id\":\"FAQ3yVGYSzY\"},on:{\"playing\":function($event){return _vm.playing($event)},\"paused\":function($event){return _vm.paused($event)},\"ended\":function($event){return _vm.finished($event)}}})],1):_vm._e(),_c('a',{attrs:{\"href\":\"#\",\"id\":\"skip\"},on:{\"click\":_vm.closeHelp}},[_vm._v(\"Skip > \")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"playlists\"}},_vm._l((_vm.playlist),function(video){return _c('span',{key:video.id,attrs:{\"id\":video.id},on:{\"click\":function($event){return _vm.play(video.id)}}},[_c('div',{staticClass:\"thumbnail-container\"},[_c('img',{attrs:{\"src\":'https://img.youtube.com/vi/' + video.id + '/0.jpg'}}),_c('button',{staticClass:\"btn\"},[_vm._v(\"▶\")])]),_c('p',[_vm._v(_vm._s(video.title))])])}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div id='playlists'>\n        <span v-for=\"video in playlist\" :key=\"video.id\" :id='video.id' @click=\"play(video.id)\">\n            <div class='thumbnail-container'>\n                <img :src=\"'https://img.youtube.com/vi/' + video.id + '/0.jpg'\">\n                <button class=\"btn\">&#9654;</button>\n            </div>\n            <p>{{video.title}}</p>\n        </span>\n    </div>\n</template>\n\n<script>\nexport default {\n  name: 'Playlist',\n  props: ['playlist'],\n  methods: {\n    play: function (id) {\n      document.querySelector('#contents').className = ' hide'\n      document.getElementById(id).className += ' show'\n      document.getElementById('UserHelp').classList.remove('overlay')\n      document.getElementById('UserHelp').classList.remove('level7')\n      document.getElementById('UserHelp').classList.remove('dialouge-window')\n      document.getElementById('UserHelp').className += ' fullwindow'\n      for (var i = 0; i < this.$parent.$children.length; i++) {\n        if (this.$parent.$children[i].$attrs.id === id) {\n          var index = i\n        }\n      }\n      this.$parent.$children[index].player.playVideo()\n    }\n  }\n}\n</script>\n\n<style>\n.thumbnail-container{\n    position: relative;\n    width: 50%;\n}\n.thumbnail-container img {\n    width: 100%;\n    height: 100%;\n    padding: 3px 7px 3px 3px;\n}\n.thumbnail-container .btn {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    -ms-transform: translate(-50%, -50%);\n    background-color: #555;\n    color: white;\n    font-size: 16px;\n    padding: 12px 24px;\n    border: none;\n    border-radius: 5px;\n\n}\nspan:hover .thumbnail-container  .btn{\n  background-color: red;\n}\n#playlists p{\n    font-size: 90%;\n    float: right;\n    width: 50%;\n}\n#playlists iframe {\n    display: none\n}\n#playlists span {\n    display: flex;\n    height: 114px;\n    cursor: pointer;\n}\n#playlists span:hover {\n    background: #e1e0e0;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Playlist.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Playlist.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Playlist.vue?vue&type=template&id=0cbc0558&\"\nimport script from \"./Playlist.vue?vue&type=script&lang=js&\"\nexport * from \"./Playlist.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Playlist.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserHelp.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserHelp.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserHelp.vue?vue&type=template&id=55803b08&\"\nimport script from \"./UserHelp.vue?vue&type=script&lang=js&\"\nexport * from \"./UserHelp.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserHelp.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"waitingFrame\"}},[_c('div',{attrs:{\"id\":\"waitinghtml\"}},[_c('img',{attrs:{\"src\":_vm.loader}}),_c('p',{attrs:{\"id\":\"appletMessage\"}},[_vm._v(\" \"+_vm._s(_vm.data.loaderMsg)+\" \")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div id='waitingFrame'>\n        <div id='waitinghtml'>\n          <img :src='loader' />\n          <p id=\"appletMessage\">\n          {{data.loaderMsg}}\n          </p>\n        </div>\n    </div>\n</template>\n\n<script>\nimport store from '../../store/index'\nexport default {\n  name: 'Loader',\n  data () {\n    return {\n      loader: require('../../assets/img/aquaria-loader3.svg')\n    }\n  },\n  computed: {\n    data () {\n      return {\n        loaderMsg: store.state.LoaderMsg\n      }\n    }\n  }\n}\n</script>\n\n<style type=text/css scoped>\n#waitinghtml {\nbackground-color: rgba(0,0,0,0.7);\npointer-events: none;\nheight: 100vh;\nwidth: 100vw;\ndisplay: flex;\nflex-flow: column wrap;\ntext-align: center;\n}\np#appletMessage {\ncolor: white;\ntext-align: center;\nmargin: 2rem auto;\nheight: 5rem;\n}\n#waitingFrame {\n    overflow: hidden;\n    width: 100vw;\n    top: 0px;\n    left: 0px;\n    height: 100vh;\n    position: fixed;\n    z-index: 6;\n    pointer-events: none;\n    display: block;\n}\nimg {\n    width: 20vh;\n    margin: auto;\n    transform: translate(0, 10vh);\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Loader.vue?vue&type=template&id=4d0fb015&scoped=true&\"\nimport script from \"./Loader.vue?vue&type=script&lang=js&\"\nexport * from \"./Loader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Loader.vue?vue&type=style&index=0&id=4d0fb015&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4d0fb015\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"main\">\n    <!-- Header -->\n    <Header />\n    <!-- InfoAbout -->\n    <Sequence />\n    <div>\n      <AboutAlignment />  <!--  v-bind:alignment=\"alignment\"/> -->\n    </div>\n    <div>\n      <AboutPdb />\n    </div>\n    <div>\n      <AboutAquaria />\n      <!-- <div class='dimmer' @click=\"closeHelp\"></div> -->\n      <UserHelp />\n      <Errors />\n    </div>\n    <div id=\"heightinspector\"></div>\n    <!-- StructureViewer -->\n    <StructureViewer />\n    <!-- AquariaLayout -->\n    <Tabs />\n    <PopUp />\n    <Loader v-if=\"data.loader\"/>\n    <a v-bind:href=\"(data.hash)\"><div id=\"scrim\" class=\"hide\" @click=\"dismissPanel\"></div></a>\n  </div>\n</template>\n\n<script>\nimport store from '../store/index'\nimport '../components/AquariaLayout/helpers/aquaria' // most legacy code bundling is triggered from here (expects global jolecule)\nimport Header from '../components/Header/Header'\nimport Sequence from '../components/InfoAbout/Sequence'\nimport AboutAlignment from '../components/InfoAbout/AboutAlignment'\nimport AboutPdb from '../components/InfoAbout/AboutPdb'\nimport StructureViewer from '../components/StructureViewer/StructureViewer'\nimport Tabs from '../components/AquariaLayout/Tabs'\nimport PopUp from '../components/AquariaLayout/PopUp'\nimport AboutAquaria from '../components/InfoAbout/AboutAquaria'\nimport Errors from '../components/InfoAbout/Errors'\nimport UserHelp from '../components/InfoAbout/UserHelp'\nimport * as Panels from '../components/AquariaLayout/helpers/hidePanels'\nimport JoleculePanel from '../components/StructureViewer/helpers/joleculePanel'\n// import * as aquariaRemote from '../utils/url'\nimport * as LoadAQUARIA from '../utils/loadData'\nimport Loader from '../components/AquariaLayout/Loader'\n\nexport default {\n  name: 'Wrapper',\n  components: {\n    Header,\n    Sequence,\n    AboutAlignment,\n    AboutPdb,\n    StructureViewer,\n    Tabs,\n    PopUp,\n    AboutAquaria,\n    Errors,\n    UserHelp,\n    Loader\n  },\n  props: ['urlRequest'],\n  computed: {\n    data () {\n      return {\n        loader: store.state.Loader,\n        hash: store.state.hash,\n        arrayOfVideos: [\n          'https://youtu.be/FAQ3yVGYSzY?list=PLsGaleFn8YydVFkxDhOvHHE5NoTsl6D1e',\n          'https://www.youtube.com/watch?v=UZNEmPOaVrA&list=PLsGaleFn8YydVFkxDhOvHHE5NoTsl6D1e&index=2'\n        ]\n      }\n    }\n  },\n  methods: {\n    closeHelp: function () {\n      var _this = this\n      document.getElementById('UserHelp').classList.remove('show')\n      document.getElementById('UserHelp').className += (' hide')\n      document.querySelector('.dimmer').style.display = 'none'\n      if (document.querySelector('#helpbtn').classList.contains('active')) {\n        Panels.RemoveOverlay()\n        _this.toggleActive(document.querySelector('#helpbtn'))\n      }\n    },\n    checkPhone: function () {\n      var iDevices = [\n        'iPad Simulator',\n        'iPhone Simulator',\n        'iPod Simulator',\n        'iPad',\n        'iPhone',\n        'iPod'\n      ]\n\n      if (navigator.platform) {\n        while (iDevices.length) {\n          if (navigator.platform === iDevices.pop() || (screen.width >= 300 && screen.width <= 600)) { return true }\n        }\n      } else {\n        return false\n      }\n    },\n    inspectHeight: function () {\n      // var visible = window.toolbar.visible\n      document.querySelector('#heightinspector').innerHTML = 'reset'\n      var hDiff = (window.outerHeight - window.innerHeight)\n      document.querySelector('#heightinspector').innerHTML = 'HO:' + window.outerHeight + ', hDiff:' + hDiff + ', scroll: ' + window.scrollY + ' bodyHeight: ' + document.body.scrollHeight\n    },\n    dismissPanel: function () {\n      // hide scrim\n      document.querySelector('#scrim').className = 'hide'\n      // reset title to neutral state\n      document.querySelector('#title').className = 'item title fix level6'\n      if (document.querySelector('#titleAlign') !== null) { document.querySelector('#titleAlign').className = '' }\n      document.querySelectorAll('#title span a').forEach(el => {\n        el.className = ''\n      })\n      document.querySelector('#pdb_id > span#help').style.visibility = 'visible'\n    },\n    toggleActive: function (ev) {\n      if (ev.className === 'lnk active') {\n        ev.className = 'lnk'\n      }\n    }\n  },\n  mounted () {\n    // Functions to run immediately after home page DOM first finishes loading.\n    // aquariaRemote.remoteSuccess()\n    window.AQUARIA.panel3d = new JoleculePanel('#threeDSpan', LoadAQUARIA.chainSelected)\n    window.scrollBy(0, 100)\n    LoadAQUARIA.loadAccession([this.$props.urlRequest.uniprotAccession], this.$props.urlRequest.pdbID, this.$props.urlRequest.chain)\n    // this.inspectHeight()\n    window.addEventListener('resize', function () {\n      window.scrollBy(0, 100)\n      document.querySelector('#vis > .ruler').remove()\n      document.querySelectorAll('#vis > #allclusters .outer_container').forEach(el => el.remove())\n      window.AQUARIA.refresh()\n      var hDiff = (window.outerHeight - window.innerHeight)\n      document.querySelector('#heightinspector').innerHTML = 'HO:' + window.outerHeight + ', hDiff:' + hDiff + ', scroll: ' + window.scrollY + ' bodyHeight: ' + document.body.scrollHeight\n    })\n    setTimeout(function () {\n      if (document.querySelector('.matrixLoading')) {\n        document.querySelector('.matrixLoading').style.visibility = 'hidden'\n        document.querySelector('.matrixLoading').style.display = 'none'\n      }\n    }, 1500)\n  },\n  updated () {\n    // const isPhone = this.checkPhone()\n    // this.inspectHeight()\n  }\n}\n</script>\n\n<style>\n/* .dimmer {\n  z-index: 99;\n  display: none;\n} */\n/* .close {\n  float: right;\n}\n#helpDoc {\n  background: white;\n  z-index: 9999;\n  position: relative;\n  padding: 4px;\n}\n#help {\n  position: absolute;\n  width: 90vw;\n  height: 90vh;\n  margin: 5vh 5vw 5vh 5vw;\n}\n\n#playlist {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  z-index: 9999;\n  background: black;\n} */\ndiv#heightinspector {\n  display: none;\n  position: absolute;\n  top:10em;\n  left:2em;\n  z-index: 1000;\n}\n/* general layout + styling */\n.main {\n    margin: auto;\n    display: flex;\n    flex-flow: column nowrap;\n    align-content: stretch;\n    height: 95vh;\n}\n#scrim {\n  background: dimgrey;\n  position: fixed;\n  opacity: 0.7;\n  width: 100vw;\n  height: 100vh;\n  top: 0;\n}\n/* 3D structure viewer */\n#structure-viewer {\n    width: 100%;\n    height: calc(100% - 70px);\n    display: flex;\n}\n\n#structure-viewer:target {\n    /* when residue is selected */\n    background: radial-gradient(closest-side,var(--secondary-label), var(--background));\n}\n.panel.overlay.about {\n  padding-top: 4em;\n  max-height: 85vh;\n}\n.about p {\n  margin: 0.25em 0;\n}\n.scrollable {\n  overflow-y: scroll;\n  max-height: 80vh;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Wrapper.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Wrapper.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Wrapper.vue?vue&type=template&id=e5e2c952&\"\nimport script from \"./Wrapper.vue?vue&type=script&lang=js&\"\nexport * from \"./Wrapper.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Wrapper.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/node.cac6f4f6.gif\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Menu.vue?vue&type=style&index=0&id=03995c7c&scoped=true&lang=css&\"","module.exports = __webpack_public_path__ + \"img/aquaria-menu.1a89fbab.svg\";","/** generic functions and stuff to run once document is loaded\n *\n */\n\n// jQuery - format numbers with commas every 3 digits;   to use:  $(\"span.numbers\").digits();\n\n$.fn.digits = function () {\n  return this.each(function () {\n    $(this).text($(this).text().replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, '$1,'))\n  })\n}\n\n// Once document is ready, move focus to protein input field\n\n$(document).ready(function () {\n\t  $('#protein_syn_input, #organism_syn_input').focus(function () {\n\t\t  $('.infocus').removeClass('infocus')\n\t\t  $('#searchByName').addClass('infocus')\n\t  })\n\n\t  $('#help3D').hide()\n})\n\n$(function () {\n  $(document).tooltip({ position: { my: 'right top+15', at: 'right center', collision: 'none' } }, { show: { delay: 1200 } })\n})\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CoverageMap.vue?vue&type=style&index=0&id=5bce72ae&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Title.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AboutPdb.vue?vue&type=style&index=0&id=01dba514&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Features.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}