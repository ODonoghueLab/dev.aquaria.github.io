(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["wrapper"],{"05b9":function(e,t,a){"use strict";a("5f75")},"0d58":function(e,t,a){"use strict";a("4d40")},"113a":function(e,t,a){"use strict";a("61c9")},1237:function(e,t,a){},1380:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"matrix"}},[a("MatrixHeader"),a("LoadingPage"),a("div",{attrs:{id:"container"}})],1)},r=[],s=a("2909"),i=a("1da1"),o=(a("96cf"),a("99af"),a("d81d"),a("b0c0"),a("a434"),a("a4d3"),a("e01a"),a("e9c4"),a("fb6a"),a("d3b7"),a("ac1f"),a("5319"),a("466d"),a("4de4"),a("4e82"),a("159b"),a("1276"),a("b64b"),a("3ca3"),a("ddb0"),a("bc3a")),c=a.n(o),l=a("9cc6"),u=a("2fdb"),d=a("4360"),h={name:"Matrix",components:{MatrixHeader:l["a"],LoadingPage:u["a"]},data:function(){return{hostname:d["default"].state.url,publicPath:"/",structures:null,totalStructures:0,d3:a("5698"),green:"#7A9D5B",backgroundColour:"#ffffff",x:0,y:15,organismId:"2697049"}},mounted:function(){var e,t=this,a="".concat(window.BACKEND,"/").concat(this.organismId);c()({method:"get",url:a}).then((function(a){e=JSON.parse(a.data.primary_accessions),t.getStructures(t.organismId,e).then((function(e){console.log(e),t.getMatchingStructures(e).then((function(e){t.getProteinSynonyms(e).then((function(e){t.loadShapes(e).then((function(){document.querySelector(".matrixLoading")&&(document.querySelector(".matrixLoading").style.visibility="hidden",document.querySelector(".matrixLoading").style.display="none")}))}))}))})),t.structures=e})),window.addEventListener("resize",this.initialDisplay)},methods:{getResidueSize:function(e,t){return t*e},loadShapes:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,i,o,c,l,u,d,h,p,m,f,g,v,y,w,A,b,_;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(e=t.partitionToThree(e),n=0,r=960/Math.max.apply(Math,Object(s["a"])(e.map((function(e){return t.getListSum(e)})))),i=0;i<e.length;i++){for(o=t.d3.select("#container").append("svg").attr("class","row").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 960 360"),t.x=0,t.y=15,c=0,0!==i&&(l=e[i-1],u=l[l.length-1],d=e[i][0],h=Math.floor(d.length/500+1),p=!1,h>3&&(p=!0),m={id:"placeholder",dark:!0,placeholderLarge:p,primary_accession:u.primary_accession,name:u.name,synonym:u.synonym,placeholder:!0},t.drawArrow(o,m,150,20,20/1.5,c,r),t.drawRuler(o,m,n,150,20/1.5,c),c=c+150+20/1.5),f=0;f<e[i].length;f++)g=!1,v=20,y=v/1.5,w=t.getResidueSize(r,e[i][f].length)-y,w<0&&(y=t.getResidueSize(r,e[i][f].length),w=0),t.drawArrow(o,e[i][f],w,v,y,c,r),t.drawRuler(o,e[i][f],n,w,y,c),n=e[i][f].continuous?e[i][f].length:0,t.addNonDarkToFragments(e[i][f]),0!==e[i][f].fragments.length&&(t.y=t.y+33,g=!0),t.drawFragments(o,e[i][f].fragments,r,c),t.drawMatchingStructures(o,e[i][f],w,v,y,c,r),c=c+w+y,g&&(t.y=t.y-33);0!==i&&i!==e.length-1&&(A=e[i+1],b=A[0],_=e[i-1],h=Math.floor(_[_.length-1].length/500+1),p=!1,h>3&&(p=!0),m={id:"placeholder",dark:!0,placeholderLarge:p,primary_accession:b.primary_accession,name:b.name,synonym:b.synonym,placeholder:!0},t.drawArrow(o,m,t.getResidueSize(r,A[0].length)-20/1.5,20,20/1.5,c,r),t.drawRuler(o,m,n,t.getResidueSize(r,A[0].length)-20/1.5,20/1.5,c)),t.drawExpandButton(o)}t.initialDisplay(!1);case 5:case"end":return a.stop()}}),a)})))()},fillData:function(e){var t=[{offset:"0%",color:"black"}];if(e.nonDark){console.log(e.nonDark);for(var a=0;a<e.nonDark.length;a++){var n=e.nonDark[a];t.push({offset:n.Start/e.length*100+"%",color:"black"}),t.push({offset:n.Start/e.length*100+"%",color:this.green}),t.push({offset:n.Stop/e.length*100+"%",color:this.green}),t.push({offset:n.Stop/e.length*100+"%",color:"black"})}}return e.placeholder&&(t=[{offset:"0%",color:"#CCCCCC"}]),t},getNonDarkBetween:function(e,t,a){var n=[];if(e.nonDark)for(var r=0;r<e.nonDark.length;r++)e.nonDark[r].Start<=t&&e.nonDark[r].Stop>=t?n.push({Start:0,Stop:e.nonDark[r].Stop-t}):e.nonDark[r].Start>=t&&e.nonDark[r].Stop<=a?n.push({Start:e.nonDark[r].Start-t,Stop:e.nonDark[r].Stop-t}):e.nonDark[r].Start<=a&&e.nonDark[r].Stop>=a&&n.push({Start:e.nonDark[r].Start-t,Stop:a-t});return n},splitToChunks:function(e,t){for(var a=[],n=t;n>0;n--)a.push(e.splice(0,Math.ceil(e.length/n)));return a},addNonDarkToFragments:function(e){if(e.fragments)for(var t=0;t<e.fragments.length;t++){var a=e.fragments[t];e.fragments[t].nonDark=this.getNonDarkBetween(e,a.Start,a.Stop)}},drawArrow:function(e,t,n,r,s,i,o){var c=this.fillData(t),l=t.id?t.id:t.primary_accession;console.log(l);var u,d=t.description?t.description:t.name;if(c.length>14&&n>300)for(var h=0,p=JSON.parse(JSON.stringify(t.nonDark)),m=Math.floor(c.length/10)>4?Math.floor(c.length/10):4,f=this.splitToChunks(p,m),g=0,v=0;v<f.length;v++){var y=f[v].slice(-1)[0].Stop-g;v===f.length-1&&(y=t.length-g);for(var w=this.getResidueSize(o,y),A=0;A<f[v].length;A++)f[v][A].Start=f[v][A].Start-g,f[v][A].Stop=f[v][A].Stop-g;var b=this.fillData({length:y,nonDark:f[v]});if(e.append("linearGradient").attr("id","grad_partial_"+l+"_"+v).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").selectAll("stop").data(b).enter().append("stop").attr("offset",(function(e){return e.offset})).attr("stop-color",(function(e){return e.color})).attr("stop-opacity",1),v===f.length-1){var _=w-s,S=void 0;S=_>0?[this.x,this.y,this.x,this.y+r,this.x+_,this.y+r,this.x+_,this.y+.5*r+s,this.x+_+s,this.y+.5*r,this.x+_,this.y+.5*r-s,this.x+_,this.y]:[this.x,this.y+.5*r-s,this.x,this.y+.5*r+s,this.x+s,this.y+.5*r],e.append("svg:polygon").attr("points",S).attr("fill","url(#grad_partial_"+l+"_"+v+")").attr("id",l).attr("title",l).attr("transform","translate("+(i+h)+",0)").attr("class","arrow").on("mouseover",(function(e,t){var n=a("5698");n.select(this).attr("opacity",".85"),n.selectAll("rect#"+this.id).attr("opacity",".85"),this.style.cursor="pointer"})).on("mouseout",(function(e,t){var n=a("5698");n.select(this).attr("opacity","1"),n.selectAll("rect#"+this.id).attr("opacity","1")})).on("click",(function(){var e=a("5698"),t=window.location.origin;window.open(t+"/"+e.select(this).attr("title"))})).append("svg:title").text(d)}else e.append("svg:rect").attr("fill","url(#grad_partial_"+l+"_"+v+")").attr("x",this.x).attr("y",this.y).attr("width",w).attr("height",r).attr("id",l).attr("class","arrow").attr("title",l).attr("transform","translate("+(i+h)+",0)").on("mouseover",(function(e,t){var n=a("5698");n.select(this).attr("opacity",".85"),n.selectAll("rect#"+this.id).attr("opacity",".85"),n.selectAll("polygon#"+this.id).attr("opacity",".85"),this.style.cursor="pointer"})).on("mouseout",(function(e,t){var n=a("5698");n.select(this).attr("opacity","1"),n.selectAll("rect#"+this.id).attr("opacity","1"),n.selectAll("polygon#"+this.id).attr("opacity","1")})).on("click",(function(){var e=a("5698"),t=window.location.origin;window.open(t+"/"+e.select(this).attr("title"))})).append("svg:title").text(d);g+=y,h+=w}else e.append("linearGradient").attr("id","grad_"+l).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").selectAll("stop").data(c).enter().append("stop").attr("offset",(function(e){return e.offset})).attr("stop-color",(function(e){return e.color})).attr("stop-opacity",1),u=n>0?[this.x,this.y,this.x,this.y+r,this.x+n,this.y+r,this.x+n,this.y+.5*r+s,this.x+n+s,this.y+.5*r,this.x+n,this.y+.5*r-s,this.x+n,this.y]:[this.x,this.y+.5*r-s,this.x,this.y+.5*r+s,this.x+s,this.y+.5*r],e.append("svg:polygon").attr("points",u).attr("fill","url(#grad_"+l+")").attr("id",l).attr("title",l).attr("class","arrow").attr("transform","translate("+i+",0)").on("mouseover",(function(e,t){var n=a("5698");this.style.cursor="pointer",n.select(this).attr("opacity",".85")})).on("mouseout",(function(e,t){var n=a("5698");n.select(this).attr("opacity","1")})).on("click",(function(){var e=a("5698"),t=window.location.origin;window.open(t+"/"+e.select(this).attr("title"))})).append("svg:title").text(d);var I=e.append("text").attr("x",this.x+.5*(n+.5*s)).attr("y",this.y+.5*r).attr("transform","translate("+i+",0)").attr("dy",".35em").style("text-anchor","middle").attr("class","arrow").style("fill","white").text(t.name);if(I.node().getComputedTextLength()>n&&(I.text(t.synonym[0]),I.node().getComputedTextLength()>n)){var x=t.synonym.reduce((function(e,t){return e.length<=t.length?e:t}));x=x.replace("orf","").replace("ORF",""),I.text(x),I.node().getComputedTextLength()>n+.5*s&&(I.attr("y",this.y+1.5*r),I.style("fill",this.green),I.attr("class","rowContent"))}},drawRuler:function(e,t,a,n,r,s){var i=[1,n+r-1];a&&(i=[0,n+r]);var o=this.d3.scale.linear().domain([a,a+t.length]).range(i),c=Math.floor(t.length/500+1);if(c>3||t.placeholderLarge){t.placeholderLarge&&(c=0);var l=e.append("g").attr("transform","translate("+s+","+(this.y-15)+")").attr("style","").style("fill","gray").style("font-size","10px").attr("class","rowContent").call(this.d3.svg.axis().scale(o).tickSize(0,1).tickFormat((function(e,t){return 0===e||e%1e3!==0?" ":e})).orient("bottom").ticks(c));t.placeholder&&l.style("fill","#CCCCCC"),l.selectAll(".tick").attr("stroke","gray").attr("x1",this.x).attr("x2",this.x).attr("y2",0).attr("y1",3).attr("stroke-width","1")}else if(t.length>200||t.placeholder){c=2,t.placeholder&&(c=0);var u=e.append("g").attr("transform","translate("+s+","+(this.y-10)+")").style("fill","gray").attr("class","rowContent").call(this.d3.svg.axis().scale(this.d3.scale.linear().domain([0,1]).range([1,n+r-1])).tickSize(2,1).orient("top").ticks(c).tickFormat(""));u.selectAll(".tick").attr("stroke","gray").attr("x1",this.x).attr("y1",4).attr("y2",-1).attr("stroke-width","1"),t.placeholder&&u.style("fill","#CCCCCC");var d=e.append("text").attr("x",this.x+.5*(n+r)).attr("y",this.y-10).attr("dy",".35em").style("text-anchor","middle").attr("transform","translate("+s+",0)").style("fill","gray").style("font-size","10px").attr("class","rowContent").text(t.length);e.append("rect","text").datum((function(){return d.node().getBBox()})).attr("x",(function(e){return e.x-2})).attr("y",(function(e){return e.y})).style("fill",this.backgroundColour).attr("transform","translate("+s+",0)").attr("class","rowContent").attr("width",(function(e){return e.width+4})).attr("height",(function(e){return e.height})),d.node().parentNode.appendChild(d.node())}},drawFragments:function(e,t,a,n){for(var r=0;r<t.length;r++){console.log(t);var s={name:t[r].Name,primary_accession:t[r].Primary_Accession,synonym:[t[r].Short_Name].concat(t[r].Short_Name.match(/[0-9]+/g)),Start:t[r].Start,Stop:t[r].Stop,pdb:null,length:t[r].Stop-t[r].Start,id:t[r].Primary_Accession+"_"+t[r].Short_Name,nonDark:t[r].nonDark,description:t[r].Description},i=t[r].Stop-t[r].Start,o=20,c=o/1.5,l=this.getResidueSize(a,i)-c;l<0&&(c=this.getResidueSize(a,i),l=0),(0===r||t[r].Start>=t[r-1].Stop)&&(this.drawArrow(e,s,l,o,c,n,a),n=n+l+c)}},renderImage:function(e,t,n,r,s,i,o){var c=(n<120?n:120)+10,l=t.Start?t.Start:0;if(o){e.append("rect","text").attr("x",.5*n+l).attr("y",this.y+r).style("fill",this.backgroundColour).attr("transform","translate("+(s-c/2)+","+(20+i)+")").attr("width",c).attr("height",200).attr("title",o).on("mouseover",(function(e,t){var n=a("5698");n.select(this).transition().duration(500).style("fill","orange"),this.style.cursor="pointer"})).on("mouseout",(function(e,t){var n=a("5698");n.select(this).transition().duration(500).style("fill","white")})).on("click",(function(){var e=a("5698"),t=e.select(this).attr("title");if(t){var n=window.location.origin;window.open(n+"/"+e.select(this).attr("title"))}}));var u=e.append("svg:image").attr("x",.5*n+l).attr("y",this.y+r).attr("transform","translate("+(s-c/2)+","+(20+i)+")").attr("width",c).attr("height",c).style("pointer-events","none");!t.dark&&t.pdb?u.attr("xlink:href","../images/pdb/"+t.pdb+".png"):(u.attr("xlink:href","../images/covid19/unknown-structure_1000.png"),u.style("visibility","hidden"))}},splitLargeGaps:function(e){for(var t=0;t<e.length;t++){var a=e[t];if(a.seq_start.length>1)for(var n=0;n<a.seq_start.length-1;n++)if(a.seq_start[n+1]-a.seq_end[n]>100){var r=JSON.parse(JSON.stringify(a));r.seq_start=a.seq_start.slice(0,n+1),r.seq_end=a.seq_end.slice(0,n+1),e[t].seq_start=a.seq_start.slice(n+1),e[t].seq_end=a.seq_end.slice(n+1),e.push(r);break}}return e},drawMatchingStructures:function(e,t,n,r,i,o,c){var l=this,u=30;if(t.clusters){t.clusters=this.splitLargeGaps(t.clusters),t.clusters=t.clusters.filter((function(e){return e.seq_start[0]>=0})),t.clusters.sort((function(e,t){return e.cluster_size>t.cluster_size?-1:t.cluster_size>e.cluster_size?1:0}));var d=1;while(d<t.clusters.length){var h=0,p=!1;while(h<d&&!p){var m=Math.min.apply(Math,Object(s["a"])(t.clusters[h].seq_start)),f=Math.min.apply(Math,Object(s["a"])(t.clusters[d].seq_start)),g=Math.max.apply(Math,Object(s["a"])(t.clusters[h].seq_end)),v=Math.max.apply(Math,Object(s["a"])(t.clusters[d].seq_end));m<=f&&g>=v?(t.clusters[h].cluster_size+=t.clusters[d].cluster_size,t.clusters.splice(d,1),p=!0):(m>f&&m-f<.9*(v-f)||g<v&&v-g<.9*(v-f))&&(t.clusters[h].cluster_size+=t.clusters[d].cluster_size,t.clusters[h].seq_start=[Math.min(m,f)],t.clusters[h].seq_end=[Math.max(g,v)],t.clusters.splice(d,1),p=!0),h++}p||d++}t.clusters=t.clusters.filter((function(e){return Math.max.apply(Math,Object(s["a"])(e.seq_end))-Math.min.apply(Math,Object(s["a"])(e.seq_start))>20})),t.clusters.forEach((function(n){var s=l.getResidueSize(c,n.seq_start[0]);if(!(n.seq_start<0)){var i=l.getResidueSize(c,n.seq_end[n.seq_end.length-1]);if(!(n.seq_end>t.length)){var d=l.d3.scale.linear().domain([0,2]).range([s+1,i-1]).nice(),h=e.append("g").attr("transform","translate("+o+","+(l.y+r+10)+")").attr("style","").style("fill",l.green).style("font-size","10px").call(l.d3.svg.axis().scale(d).tickSize(0,1).tickFormat("").orient("bottom").ticks(2));l.d3.select(h.selectAll(".tick")[0][1]).attr("stroke",l.green).attr("x1",l.x).attr("x2",l.x).attr("y2",0).attr("y1",u).attr("stroke-width","1");var p=e.append("text").datum((function(){return h.node().getBBox()})).attr("x",(function(e){return e.x+.5*e.width})).attr("y",l.y+r+u+5).attr("dy",".35em").style("text-anchor","middle").attr("transform","translate("+o+",0)").style("fill","white").style("font-size","12px").text(n.cluster_size).attr("title",t.primary_accession+"/"+n.pdb_id).style("pointer-events","none");e.append("rect","text").datum((function(){return p.node().getBBox()})).attr("x",(function(e){return e.x-4})).attr("y",(function(e){return e.y})).attr("rx",6).attr("ry",10).style("fill",l.green).attr("transform","translate("+o+",0)").attr("width",(function(e){return e.width+8})).attr("height",(function(e){return e.height})).attr("title",t.primary_accession+"/"+n.pdb_id).on("click",(function(){var e=a("5698");console.log(e.select(this).attr("title"));var t=window.location.origin;window.open(t+"/"+e.select(this).attr("title"))})).on("mouseover",(function(){this.style.cursor="pointer"})),p.node().parentNode.appendChild(p.node());var m={name:n.pdb_id,primary_accession:t.primary_accession,Start:s,Stop:i,pdb:n.pdb_id,length:i-s,id:t.primary_accession+"_"+n.pdb_id,nonDark:!0};l.renderImage(e,m,i-s,r,o,u,t.primary_accession+"/"+n.pdb_id)}}}))}else this.renderImage(e,t,n,r,o,u,"")},drawExpandButton:function(e){var t=e.append("svg:rect").attr("x",0).attr("y",0).attr("stroke","#CCCCCC").attr("fill","#CCCCCC").attr("opacity",.8).attr("width",window.innerWidth).attr("height",30).attr("id","expand");window.innerHeight>window.innerWidth&&t.attr("display","none"),t.on("mouseover",(function(e,t){var n=a("5698");n.select(this.parentNode).select("path#expand:last-child").attr("stroke","orange"),this.style.cursor="pointer"})).on("mouseout",(function(e,t){var n=a("5698");n.select(this.parentNode).select("path#expand:last-child").attr("stroke","#CCCCCC")})),t.on("click",(function(e,t){var n=a("5698");if(this.parentNode.className.baseVal.split(" ").indexOf("open")>-1)n.select(this.parentNode).classed("open",!1),n.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),n.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0);else{n.selectAll(".open").selectAll("rect#expand").attr("opacity",0),n.selectAll(".open").selectAll("rect#expand").attr("display","block"),n.selectAll(".open").selectAll("rect#expand").transition().duration(1e3).attr("opacity",.8),n.selectAll(".open").selectAll("path#expand").attr("opacity",0),n.selectAll(".open").selectAll("path#expand").attr("display","block"),n.selectAll(".open").selectAll("path#expand").transition().duration(1e3).attr("opacity",1),n.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=n.transform(n.select(this).attr("transform"));return"translate("+e.translate[0]+", -10)"})),n.selectAll(".row").classed("open",!1),n.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),n.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0),n.select(this.parentNode).classed("open",!0),n.select(this).attr("display","none"),n.select(this.parentNode).selectAll("path#expand").attr("display","none"),n.selectAll(".open").transition().duration(1e3).attr("viewBox","0 0 960 360"),n.selectAll(".open .rowContent").transition().duration(1e3).attr("opacity",1),n.select(this.parentNode).selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=n.transform(n.select(this).attr("transform"));return"translate("+e.translate[0]+", 0)"}));for(var r=n.selectAll(".row"),s=!1,i=!0,o=0;o<r[0].length;o++)n.select(r[0][o]).classed("open")&&(s=!0),s?(n.select(r[0][o]).select("path#expand").attr("transform","scale(1, -1) translate(480, -0)"),n.select(r[0][o]).select("path#expand:last-child").attr("transform","translate(480,0)")):(i=!1,n.select("#container").transition().duration(1e3).style("padding","8px 0px 0px 0px"),n.select(r[0][o]).select("path#expand").attr("transform","translate(480,30)"),n.select(r[0][o]).select("path#expand:last-child").attr("transform","scale(1, -1) translate(480, -30)"));i&&n.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px")}})),this.renderHalfMoon(e,480,0)},renderHalfMoon:function(e,t,n){var r=this.d3.svg.arc().outerRadius(20).innerRadius(0).startAngle(-Math.PI/2).endAngle(Math.PI/2),s=e.append("path").attr("transform","scale(1, -1) translate("+t+", -"+n+")").attr("d",r()).attr("fill","gray").attr("id","expand").on("mouseover",(function(e,t){var n=a("5698");n.select(this.parentNode).select("path#expand:last-child").attr("stroke","orange"),this.style.cursor="pointer"})).on("mouseout",(function(e,t){var n=a("5698");n.select(this.parentNode).select("path#expand:last-child").attr("stroke","#CCCCCC")})),i=e.append("path").attr("transform","translate("+t+","+n+")").attr("d","M-8 12 0 5 8 12").attr("stroke","#CCCCCC").attr("stroke-width",3).attr("fill","transparent").attr("id","expand").on("mouseover",(function(e,t){var n=a("5698");n.select(this).attr("stroke","orange"),this.style.cursor="pointer"})).on("mouseout",(function(e,t){var n=a("5698");n.select(this).attr("stroke","#CCCCCC")}));i.on("click",(function(e,t){var n=a("5698");n.selectAll(".open").selectAll("rect#expand").attr("opacity",0),n.selectAll(".open").selectAll("rect#expand").attr("display","block"),n.selectAll(".open").selectAll("rect#expand").transition().duration(1e3).attr("opacity",.8),n.selectAll(".open").selectAll("path#expand").attr("opacity",0),n.selectAll(".open").selectAll("path#expand").attr("display","block"),n.selectAll(".open").selectAll("path#expand").transition().duration(1e3).attr("opacity",1),n.selectAll(".row").classed("open",!1),n.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),n.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0),n.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=n.transform(n.select(this).attr("transform"));return"translate("+e.translate[0]+", -10)"})),n.selectAll(".row").classed("open",!1),n.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),n.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0),n.select(this.parentNode).classed("open",!0),n.select(this.parentNode).selectAll("rect#expand").attr("display","none"),n.select(this.parentNode).selectAll("path#expand").attr("display","none"),n.selectAll(".open").transition().duration(1e3).attr("viewBox","0 0 960 360"),n.selectAll(".open .rowContent").transition().duration(1e3).attr("opacity",1),n.select(this.parentNode).selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=n.transform(n.select(this).attr("transform"));return"translate("+e.translate[0]+", 0)"}));for(var r=n.selectAll(".row"),s=!1,i=!0,o=0;o<r[0].length;o++)n.select(r[0][o]).classed("open")&&(s=!0),s?(n.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px"),n.select(r[0][o]).select("path#expand").attr("transform","scale(1, -1) translate(480, -0)"),n.select(r[0][o]).select("path#expand:last-child").attr("transform","translate(480,0)")):(i=!1,n.select("#container").transition().duration(1e3).style("padding","8px 0px 0px 0px"),n.select(r[0][o]).select("path#expand").attr("transform","translate(480,30)"),n.select(r[0][o]).select("path#expand:last-child").attr("transform","scale(1, -1) translate(480, -30)"));i&&n.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px")})),s.on("click",(function(e,t){var n=a("5698");n.selectAll(".open").selectAll("rect#expand").attr("opacity",0),n.selectAll(".open").selectAll("rect#expand").attr("display","block"),n.selectAll(".open").selectAll("rect#expand").transition().duration(1e3).attr("opacity",.8),n.selectAll(".open").selectAll("path#expand").attr("opacity",0),n.selectAll(".open").selectAll("path#expand").attr("display","block"),n.selectAll(".open").selectAll("path#expand").transition().duration(1e3).attr("opacity",1),n.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=n.transform(n.select(this).attr("transform"));return"translate("+e.translate[0]+", -10)"})),n.selectAll(".row").classed("open",!1),n.selectAll(".row").transition().duration(1e3).attr("viewBox","0 0 960 35"),n.selectAll(".rowContent").transition().duration(1e3).attr("opacity",0),n.select(this.parentNode).classed("open",!0),n.select(this.parentNode).selectAll("rect#expand").attr("display","none"),n.select(this.parentNode).selectAll("path#expand").attr("display","none"),n.selectAll(".open").transition().duration(1e3).attr("viewBox","0 0 960 360"),n.selectAll(".open .rowContent").transition().duration(1e3).attr("opacity",1),n.select(this.parentNode).selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=n.transform(n.select(this).attr("transform"));return"translate("+e.translate[0]+", 0)"}));for(var r=n.selectAll(".row"),s=!1,i=!0,o=0;o<r[0].length;o++)n.select(r[0][o]).classed("open")&&(s=!0),s?(n.select(r[0][o]).select("path#expand").attr("transform","scale(1, -1) translate(480, -0)"),n.select(r[0][o]).select("path#expand:last-child").attr("transform","translate(480,0)")):(i=!1,n.select("#container").transition().duration(1e3).style("padding","8px 0px 0px 0px"),n.select(r[0][o]).select("path#expand").attr("transform","translate(480,30)"),n.select(r[0][o]).select("path#expand:last-child").attr("transform","scale(1, -1) translate(480, -30)"));i&&n.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px")}))},initialDisplay:function(e){if(window.innerHeight>window.innerWidth)this.d3.selectAll("rect#expand").attr("display","none"),this.d3.selectAll("path#expand").attr("display","none"),this.d3.selectAll(".row").classed("open",!0),this.d3.selectAll(".open").transition().duration(1e3).attr("viewBox","0 0 960 360"),this.d3.selectAll(".open .rowContent").transition().duration(1e3).attr("opacity",1),this.d3.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=a("5698"),t=e.transform(e.select(this).attr("transform"));return"translate("+t.translate[0]+", 0)"}));else if(window.innerHeight<.25*window.innerWidth)this.d3.selectAll("rect#expand").attr("display","block"),this.d3.selectAll("path#expand").attr("display","block"),this.d3.selectAll(".row").classed("open",!1),this.d3.selectAll(".row").transition().duration(500).attr("viewBox","0 0 960 35"),this.d3.selectAll(".rowContent").transition().duration(500).attr("opacity",0),this.d3.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=a("5698"),t=e.transform(e.select(this).attr("transform"));return"translate("+t.translate[0]+", -10)"}));else{var t=this.d3.select(".open");if(this.d3.selectAll("rect#expand").attr("display","block"),this.d3.selectAll("path#expand").attr("display","block"),this.d3.selectAll(".row").classed("open",!1),this.d3.selectAll(".row").transition().duration(500).attr("viewBox","0 0 960 35"),this.d3.selectAll(".rowContent").transition().duration(500).attr("opacity",0),e){t.classed("open",!0),t.select("rect#expand").attr("display","none"),t.selectAll("path#expand").attr("display","none"),t.transition().duration(1e3).attr("viewBox","0 0 960 360"),this.d3.selectAll(".open .rowContent").transition().duration(500).attr("opacity",1),this.d3.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=a("5698"),t=e.transform(e.select(this).attr("transform"));return"translate("+t.translate[0]+", -10)"})),t.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=a("5698"),t=e.transform(e.select(this).attr("transform"));return"translate("+t.translate[0]+", 0)"}));for(var n=this.d3.selectAll(".row"),r=!1,s=!0,i=0;i<n[0].length;i++)this.d3.select(n[0][i]).classed("open")&&(r=!0),r?(this.d3.select(n[0][i]).select("path#expand").attr("transform","scale(1, -1) translate(480, -0)"),this.d3.select(n[0][i]).select("path#expand:last-child").attr("transform","translate(480,0)")):(s=!1,this.d3.select("#container").transition().duration(1e3).style("padding","8px 0px 0px 0px"),this.d3.select(n[0][i]).select("path#expand").attr("transform","translate(480,30)"),this.d3.select(n[0][i]).select("path#expand:last-child").attr("transform","scale(1, -1) translate(480, -30)"));s&&this.d3.select("#container").transition().duration(1e3).style("padding","0px 0px 0px 0px")}else t=this.d3.select(".row").classed("open",!0),this.d3.select("rect#expand").attr("display","none"),t.selectAll("path#expand").attr("display","none"),this.d3.selectAll(".open").transition().duration(500).attr("viewBox","0 0 960 360"),this.d3.selectAll(".open .rowContent").transition().duration(500).attr("opacity",1),this.d3.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=a("5698"),t=e.transform(e.select(this).attr("transform"));return"translate("+t.translate[0]+", -10)"})),t.selectAll(".arrow").transition().duration(1e3).attr("transform",(function(){var e=a("5698"),t=e.transform(e.select(this).attr("transform"));return"translate("+t.translate[0]+", 0)"}))}},partitionToThree:function(e){var t=this.getListSum(e),a=t/3;e.push({name:"newPlaceholderNum",length:a});var n=this.partitionToTwo(e);n[1].pop();var r=this.partitionToTwo(n[0]);return[r[0],r[1],n[1]]},partitionToTwo:function(e){var t=this.getListSum(e),a=e.length-1;while(this.getListSum(e.slice(a))<t/2){if(this.getListSum(e.slice(a-1))>=t/2)break;a--}return[e.slice(0,a),e.slice(a)]},getListSum:function(e){return e.reduce((function(e,t){return e+t.length}),0)},sortStructures:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.getPositions(e);case 2:for(r=n.sent,s=0;s<t.length;s++)t[s].position=r[t[s].primary_accession];return t.sort((function(e,t){return e.position-t.position})),n.abrupt("return",t);case 6:case"end":return n.stop()}}),n)})))()},cleanProteins:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o,c,l,u,d,h,p,m,f;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(n={},e.forEach((function(e){var t=n[e.position];t||(t=n[e.position]=[]),t.push(e)})),r=[],s=1;s<=Object.keys(n).length;s++)1!==n[s].length?function(){var e=void 0;n[s].forEach((function(t){e?t.length>e.length&&(e=t):e=t})),i=e;for(var a=0;a<n[s].length;a++)if(n[s][a].sequence!==e.sequence){for(o=t.findSubstring(n[s][a].sequence,e.sequence),i.sequence=i.sequence.replace(o,""),i.length=i.sequence.length,i.name=i.name+" (split)",n[s][a].continuous=!0,r.push(n[s][a]),i.fragments.length>0&&n[s][a].fragments.forEach((function(e){i.fragments=i.fragments.filter((function(t){return t.Name!==e.Name}))})),c=0;c<i.fragments.length;c++)i.fragments[c].Start=i.fragments[c].Start-n[s][a].length,i.fragments[c].Stop=i.fragments[c].Stop-n[s][a].length,i.fragments[c].Start<0&&(i.fragments[c].Start=0);for(i.fragments=i.fragments.filter((function(e){return e.Start>=0})),l=[],u=0;u<i.nonDark.length;u++)i.nonDark[u].Stop>n[s][a].length&&(d=i.nonDark[u].Start-n[s][a].length,d<0&&(d=0),h=i.nonDark[u].Stop-n[s][a].length,l.push({Primary_Accession:i.primary_accession,Start:d,Stop:h}));if(i.clusters)for(p=0;p<i.clusters.length;p++){for(m=0;m<i.clusters[p].seq_start.length;m++)i.clusters[p].seq_start[m]=i.clusters[p].seq_start[m]-n[s][a].length;for(f=0;f<i.clusters[p].seq_end.length;f++)i.clusters[p].seq_end[f]=i.clusters[p].seq_end[f]-n[s][a].length}i.nonDark=l}i.continuous=!1,r.push(i)}():(n[s][0].continuous=!1,r.push(n[s][0]));return a.abrupt("return",r);case 5:case"end":return a.stop()}}),a)})))()},findSubstring:function(e,t){var a=e.length,n=0;while(n<a&&e.charAt(n)===t.charAt(n))n++;return e.substring(0,n)},getPositions:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="".concat(window.BACKEND,"/getGenomicPosition/").concat(e),n={},t.next=4,c()({method:"get",url:a}).then((function(e){for(var t=0;t<e.data.length;t++)n[e.data[t].primary_accession]=e.data[t].position_index}));case 4:return 0===Object.keys(n).length&&console.log("cannot get genomic positions of "+e+" in getPositions() Coverage.vue"),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))()},getProteinSynonyms:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=0;case 1:if(!(n<e.length)){a.next=9;break}return a.next=4,t.getSynonym(e[n].primary_accession);case 4:r=a.sent,e[n].synonym=r;case 6:n++,a.next=1;break;case 9:return a.abrupt("return",e);case 10:case"end":return a.stop()}}),a)})))()},getSynonym:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="".concat(window.BACKEND,"/getProteinSynonyms/").concat(e),n=[],t.next=4,c()({method:"get",url:a}).then((function(e){e.data.Synonym&&n.push(e.data.Synonym),n=n.concat(e.data.synonyms)}));case 4:return t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))()},getMatchingStructures:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=0;case 1:if(!(n<e.length)){a.next=10;break}return r={selector:[e[n].primary_accession]},console.log(r),s="".concat(window.BACKEND,"/get_matching_structures"),a.next=7,c()({method:"get",url:s,params:r}).then((function(t){console.log(t),"'Dark' protein"===t.data?(e[n].clusters=0,e[n].pdb=null):(e[n].clusters=t.data.clusters,e[n].pdb=t.data.Best_PDB.pdb_id)}));case 7:n++,a.next=1;break;case 10:return a.abrupt("return",t.cleanProteins(e));case 11:case"end":return a.stop()}}),a)})))()},countMatchingStructures:function(e){return 0===e?0:e.reduce((function(e,t){return e+t.members.length}),0)},getNonDarkRegions:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=0;case 1:if(!(n<e.length)){a.next=10;break}return console.log(e[n].primary_accession),a.next=5,t.getNonDarkCoverage(e[n].primary_accession);case 5:r=a.sent,e[n].nonDark=r;case 7:n++,a.next=1;break;case 10:return a.abrupt("return",e);case 11:case"end":return a.stop()}}),a)})))()},getNonDark:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="".concat(window.BACKEND,"/getNonDarkRegions/").concat(e),n=[],t.next=4,c()({method:"get",url:a}).then((function(e){e.data&&(n=e.data)}));case 4:return t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))()},getNonDarkCoverage:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={selector:[e]},n="".concat(window.BACKEND,"/getCoverageMap"),r={},s=[],t.next=6,c()({method:"get",url:n,params:a}).then((function(e){if("'Dark' protein"!==e.data){r=e.data,console.log("nondarK: ",r);for(var t=0;t<r.seq_start.length;t++)s.push({Start:r.seq_start[t],Stop:r.seq_end[t]})}}));case 6:return t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})))()},getStructures:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,s,i,o,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=[],n.next=3,a.sortStructures(e,t);case 3:t=n.sent,i=regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t[n].count=0,l={selector:[t[n].primary_accession]},s="".concat(window.BACKEND,"/get_3D_alignment"),e.next=5,c()({method:"get",url:s,params:l}).then((function(e){var s="";if(e.data.sequences){s=e.data.sequences[0];var i=s.length;console.log("Loaded ",t[n].synonym,i),r.push({name:t[n].synonym,primary_accession:t[n].primary_accession,sequence:s.sequence,position:t[n].position,length:i})}else s=e.data[t[n].primary_accession],r.push({name:t[n].synonym,primary_accession:t[n].primary_accession,sequence:s.sequence,position:t[n].position,length:s.length});return a.getFragments(t[n].primary_accession)})).then((function(e){r[n].fragments=e}));case 5:case"end":return e.stop()}}),e)})),o=0;case 6:if(!(o<t.length)){n.next=11;break}return n.delegateYield(i(o),"t0",8);case 8:o++,n.next=6;break;case 11:return n.next=13,a.getNonDarkRegions(r);case 13:return r=n.sent,n.abrupt("return",r);case 15:case"end":return n.stop()}}),n)})))()},getFragments:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="".concat(window.BACKEND,"/getProteinFragments/").concat(e),n=[],t.next=4,c()({method:"get",url:a}).then((function(e){e.data.length>0&&(n=e.data)}));case 4:return t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))()}}},p=h,m=(a("0d58"),a("2877")),f=Object(m["a"])(p,n,r,!1,null,"69cdfee8",null);t["default"]=f.exports},"20d9":function(e,t,a){e.exports=a.p+"img/search_dark.012aee91.png"},"22b1":function(e,t,a){a("d3b7"),a("159b"),a("e9c4"),a("b0c0");var n=a("1f25"),r=a("4b90"),s=function(e,t){var a=this;this.id=e,r.getUrlParameter("clearCache")&&localStorage.removeItem(this.id);var s=localStorage.getItem(this.id);if(this.cache=new n(t),null===s);else{var i=JSON.parse(s);i.forEach((function(e){a.cache.set(e.key,e.value)}))}};s.prototype.submitFired=function(e,t,a){var n={name:e,primary_accession:t,pdb_id:a};this.cache.set(t+a,n),this.save()},s.prototype.save=function(){var e=[];this.cache.forEach((function(t,a){e.push({key:a,value:t})}));var t=JSON.stringify(e);console.log("TopTen.save",e),localStorage.setItem(this.id,t)},s.prototype.getAll=function(){var e=[];return this.cache.forEach((function(t){e.push(t)})),e},s.prototype.savePDB=function(e,t){var a={};a.primary_acccession=e,a.pdb=t,this.cache.push(a)},s.prototype.previousLookup=function(e){var t=!1;return this.cache.forEach((function(a){a.primary_accession==e&&(t=a.pdb_id)})),t},s.prototype.previousLookupByName=function(e){var t=!1;return this.cache.forEach((function(a){a.name==e&&(t=a.pdb_id)})),t},s.prototype.updatePDB=function(e,t){this.cache.forEach((function(a){a.primary_accession==e&&(a.pdb_id=t)})),this.save()},e.exports=s},"23c5":function(e,t,a){},"2b1d":function(e,t,a){},"2bb0":function(e,t,a){var n,r,s,i,o=a("9523").default;a("d81d"),a("b64b"),a("ac1f"),a("1276"),a("5319"),a("841c"),a("7db0"),a("d3b7"),a("4d63"),a("c607"),a("2c3e"),a("25f0"),a("00b4"),a("466d"),a("caad"),a("2532"),a("4e82"),a("a434"),a("b0c0");var c,l=a("29c86"),u=a("0b16"),d=a("5698"),h=a("2ef0"),p=a("1157"),m=a("5a2b"),f=(u=a("4b90"),a("1b1f")),g=a("4360");function v(){r=document.getElementById("structure-viewer").offsetWidth-AQUARIA.margin.right-AQUARIA.margin.left}function y(e){}var w,A=function e(t,a){var r=document.getElementById("waitingFrame");if("undefined"!=r&&null!=r&&"none"!=document.getElementById("waitingFrame").style.display)setTimeout((function(){e(t,a)}),50),console.log("REPEATING");else{var o=function(){if(l.forEach((function(e){"Added Features"==e.Server&&m.push(e)})),m.length>0){var e=p('[id="Added Features"]').children().eq(2).children().eq(0).find("svg");if(e.length>0){var t=b(m);e.attr("class","loaded");var a=e.attr("id").split("_")[2];AQUARIA.customfeatureSet=m[t],AQUARIA.customfeatureSetioid=a,AQUARIA.passFeature(m[t],a),document.querySelector("#outerFeatureMap")&&document.querySelector("#outerFeatureMap").remove(),AQUARIA.addedFeature=!0,d.selectAll("svg.loaded rect.feature").attr("fill","#a4abdf"),d.select("svg.loaded").classed("loaded",!1)}}};n=t||n,c=a||c,p("#featurePanel div").remove(),AQUARIA.showMatchingStructures.drawAxisRuler("featurePanel"),v(),s=0,i=0;var l=[],m=[],f=[];for(var y in AQUARIA.currentFeature={},AQUARIA.onFeatureChange=function(e,t){console.log("Changing the feature now!"),console.log(e),console.log(t),g.default.commit("setFeature",{set:e,track:t})},AQUARIA.groupedFeatures=h.groupBy(n,(function(e){return e.Server})),AQUARIA.groupedFeatures=Object.keys(AQUARIA.groupedFeatures).map((function(e){return[String(e),AQUARIA.groupedFeatures[e]]})),n)l.push(n[y]);if(window.localStorage.getItem("featureOrder")&&window.localStorage.getItem("featureOrder").split(",").length>=AQUARIA.groupedFeatures.length){var w=window.localStorage.getItem("featureOrder").split(",");for(var y in w)for(var A=0;A<AQUARIA.groupedFeatures.length;A++)AQUARIA.groupedFeatures[A][0]==w[y]&&(f[y]=AQUARIA.groupedFeatures[A]);AQUARIA.groupedFeatures=f}var S=d.select("#featurePanel").append("div").attr("id","featureContainer").append("div").attr("id","groupedFeatures");for(var y in AQUARIA.groupedFeatures){var I=S.append("div").attr("id",AQUARIA.groupedFeatures[y][0]).attr("class","featureCollection");I="UniProt"==AQUARIA.groupedFeatures[y][0]||"CATH"==AQUARIA.groupedFeatures[y][0]||"SNAP2"==AQUARIA.groupedFeatures[y][0]||"PredictProtein"==AQUARIA.groupedFeatures[y][0]?I.html("<div class='featureHeader'><p class='expand'>►</p><p class='featureName'>"+AQUARIA.groupedFeatures[y][0]+"</p><div class='info'>?</div></div><span class='tooltiptext'>"+AQUARIA.groupedFeatures[y][1][0].About+"</span>"):I.html("<div class='featureHeader'><p class='expand'>►</p><p class='featureName'>"+AQUARIA.groupedFeatures[y][0]+"</p><div class='info'>?</div><button id='remove' class='featureButtons'>Remove</button></div><span class='tooltiptext'>"+AQUARIA.groupedFeatures[y][1][0].About+"</span>");var x=I.append("div").attr("class","featureTrack").selectAll("div");for(var C in AQUARIA.groupedFeatures[y][1])"Added Features"==AQUARIA.groupedFeatures[y][0]&&AQUARIA.groupedFeatures[y][1][C].hasOwnProperty("SeqHash")&&""!=AQUARIA.groupedFeatures[y][1][C].SeqHash&&AQUARIA.groupedFeatures[y][1][C].SeqHash!=AQUARIA.showMatchingStructures.sequence.uniprot_hash||x.data([AQUARIA.groupedFeatures[y][1][C]]).enter().append("div").attr("class","track").attr("id",(function(e){return"track_"+e.Category})).html((function(e){if(""!=e.Type){if("UniProt"==e.Server||"PredictProtein"==e.Server||"CATH"==e.Server||"SNAP2"==e.Server||"COSMIC"==e.Server||"FunVar"==e.Server)var t="Curated Features";else t=e.Server;return"<p><span class='featureSetName'>"+e.Category+'</span> <i class="featureSetName_">('+e.Type.replace(/_/g," ")+")</i> &nbsp;&nbsp; <span class='info'>?</span>  <span class='source'>"+t.replace(/[sS]$/,"")+"</span> </p> <span class='tooltiptext'>"+e.Description+"</span>"}return t="UniProt"==e.Server||"PredictProtein"==e.Server||"CATH"==e.Server||"SNAP2"==e.Server||"COSMIC"==e.Server||"FunVar"==e.Server?"Curated Features":e.Server,'<p><span class="featureSetName">'+e.Category+"</span> &nbsp;&nbsp; <span class='info'>?</span> <span class='source'>"+t.replace(/[sS]$/,"")+"</span></p> <span class='tooltiptext'>"+e.Description+"</span>"})).each(_)}if(p("#featureCounter").show(),s>0){p("#featureCounter").text(s),p("#featureCounter").digits();var R="<p id='scrollToggle'><a href='javascript:$(\"#featureContainer\").toggleClass(\"noscroll\");'>Toggle scrolling</a></p>";p("#featureContainer").append(R)}else p("#featureCounter").text(s);d.selectAll(".expand").attr("style","font-size: calc(9px + 0.2vw);color: #848484;margin: 10px -7px 0px 0px;"),d.selectAll("#remove").on("click",(function(){p(this).parent().parent().remove(),console.log("Get to matching structures now :)"),AQUARIA.currentFeature.oid=null,AQUARIA.currentFeature.data=null,d.select("svg.loaded").classed("loaded",!1),g.default.commit("showLoader",!0),g.default.commit("setLoaderMsg","Removing feature..."),g.default.commit("showLoader",!1),"function"===typeof AQUARIA.onFeatureChange&&AQUARIA.onFeatureChange(null,0),L(),document.querySelector("#outerFeatureMap").remove(),document.querySelector("#popup").style.display="none",AQUARIA.showMatchingStructures.showMap(AQUARIA.showMatchingStructures.cluster);var e=String(window.location),t="?"+window.location.search.split("?")[1];e=e.replace(t,""),history.pushState({},"",e)})),p("#groupedFeatures").sortable({axis:"y"}),p(".featureTrack").sortable({axis:"y"}).css({cursor:"move"}),p("#groupedFeatures").disableSelection(),p(".featureHeader").on("click",(function(){var e=p(this).parent().children().eq(2);e.slideToggle("slow"),e.is(":visible")&&p(this).addClass("actived"),"►"==p(this).children().eq(0).text()?(p(this).children().eq(0).text("▼"),p(this).children("button").css({visibility:"visible"})):(p(this).children().eq(0).text("►"),p(this).children("button").css({visibility:"hidden"}));var t=p('div[class*="actived"]').not(this);t.children().eq(0).text("►"),t.parent().children().eq(2).slideUp("slow"),t.children("button").css({visibility:"hidden"}),t.removeClass("actived")})),p(".featureHeader").on({mouseenter:function(){p(this).css({"background-color":"#BEBEBE",cursor:"pointer"})},mouseleave:function(){p(this).css({"background-color":"#cccccc"})},mousedown:function(){},mouseup:function(){p(this).css({cursor:"pointer"})}}),p(".info").find('span:contains("undefined")').parent().remove();for(var k=document.querySelectorAll(".info"),P=0;P<k.length;P++)k[P].onmouseenter=function(){this.style.backgroundColor="orange",this.style.color="white",p(this).parent().parent().children("span.tooltiptext").css({visibility:"visible"})},k[P].onmouseleave=function(){var e=this;setTimeout((function(){e.style.backgroundColor="white",e.style.color="black",p(e).parent().parent().children("span.tooltiptext").css({visibility:"hidden"})}),3e3)};p(".tooltiptext").on({mouseenter:function(){p(this).css({visibility:"visible"})},mouseleave:function(){var e=this;setTimeout((function(){p(e).css({visibility:"hidden"})}),3e3)}}),w=new MutationObserver((function(e){var t=p("#groupedFeatures .featureCollection").map((function(){return p(this).attr("id")})).get();localStorage.setItem("featureOrder",t)})),w.observe(document.getElementById("groupedFeatures"),{attributes:!0,childList:!0});var E=new RegExp(/[A-Z a-z]+[0-9]+[A-za-z]+/),O=window.location.search.split("?")[1];(u.getUrlParameter("features")||O&&(E.test(O)||O.toUpperCase().match(/^DEL[0-9]+/)||O.toUpperCase().match(/^INS[0-9]+/)||O.match(/^zenodo\./)||O.toLowerCase().includes("sidechain")||/\d/.test(O)))&&!AQUARIA.addedFeature&&o()}};function b(e){for(var t=0;t<e.length;t++)if(!e[t].hasOwnProperty("SeqHash")||""==e[t].SeqHash||e[t].SeqHash==AQUARIA.showMatchingStructures.sequence.uniprot_hash){t;break}return t}function _(e,t){var a=e.Tracks;for(var n in viewBoxwidth=document.getElementById("structure-viewer").offsetWidth-window.AQUARIA.margin.right-window.AQUARIA.margin.left,a){var o=d.select(this),c=m.createSVGforFeature(o,r+AQUARIA.margin.left,25,viewBoxwidth);for(var l in c.attr("id","s_"+i+"_"+n).on("click",(function(){if("loaded"==d.select(this).attr("class"))AQUARIA.currentFeature.oid=null,AQUARIA.currentFeature.data=null,document.querySelector(".featureHeader.actived").click(),d.select("svg.loaded").classed("loaded",!1),g.default.commit("showLoader",!0),g.default.commit("setLoaderMsg","Removing feature..."),g.default.commit("showLoader",!1),"function"===typeof AQUARIA.onFeatureChange&&AQUARIA.onFeatureChange(null,0),L(),document.querySelector("#popup").style.display="none",AQUARIA.showMatchingStructures.showMap(AQUARIA.showMatchingStructures.cluster),f.hidePanels();else{document.querySelector("#outerFeatureMap")&&document.querySelector("#outerFeatureMap").remove();var t=d.select(this).attr("id").split("_")[2];AQUARIA.currentFeature.oid=t,AQUARIA.currentFeature.data=e,g.default.commit("showLoader",!0),g.default.commit("setLoaderMsg","Loading feature..."),g.default.commit("showLoader",!1),"Added Features"!=e.Server&&(AQUARIA.addedFeature=!1),"function"===typeof AQUARIA.onFeatureChange&&AQUARIA.onFeatureChange(e,t),d.selectAll("svg.loaded rect.feature").attr("fill","#a4abdf"),d.select("svg.loaded").classed("loaded",!1),d.select(this).attr("class","loaded"),AQUARIA.passFeature(e,t,this),f.hidePanels()}})).on("mouseover",(function(){d.select(this).selectAll("rect.feature").attr("fill",(function(){return d.select(this).attr("color")}))})).on("mouseout",(function(){"loaded"!==d.select(this).attr("class")&&d.select(this).selectAll("rect.feature").attr("fill","#a4abdf")})).append("rect").attr("width",r+AQUARIA.margin.left).attr("height",25).attr("class","bg").attr("fill","none"),d.select("svg#s_"+i+"_"+n).append("g").attr("transform","translate("+AQUARIA.margin.left+",0)").append("rect").attr("width",r).attr("height",1).attr("transform","translate(0,13)").attr("class","insertion"),a[n])s++,d.select("#s_"+i+"_"+n+" g").append("rect").attr("width",(function(){return(a[n][l].size+1)*AQUARIA.srw>2?(a[n][l].size+1)*AQUARIA.srw:2})).attr("height",14).attr("id","r_"+i+"_"+n+"_"+l).attr("transform","translate("+a[n][l].start*(AQUARIA.srw-.0085)+",6)").attr("color",a[n][l].color).attr("fill","#a4abdf").attr("fill-opacity",(function(){return"single_track"==e.Class?.3:1})).attr("class","feature").on("mouseover",S(a[n][l])).on("mouseout",(function(){var e=d.select(this).attr("id");return d.select(this).call(C,e)}))}i++}function S(e){return function(){var t=d.select(this).attr("id");d.select(this).call(I,e,t)}}function I(e,t,a){w=setTimeout((function(){O(t,a)}),500),d.select("#"+a).attr("stroke-width","2px").attr("stroke","white")}function x(){return new Promise((function(e,t){var a=document.getElementById("superFamCharts_0_go");document.getElementById("superFamCharts").append(a)}))}function C(e,t){clearTimeout(w),d.select("#"+t).attr("stroke-width","0px"),setTimeout((function(){x().then((function(){p("div.popup").fadeOut()})).catch((function(e){p("div.popup").fadeOut()}))}),500)}function R(e){return new Promise((function(t,a){document.getElementById(e)&&document.getElementById(e).remove();var n=document.createElement("div");document.getElementById("superFamCharts").append(n),n.id=e,n.style="width: 100px; height: 100px; margin: 0 auto; background-color: white;",t()}))}function k(e,t,a,n,r,s,i,o,c,u,d){return new Promise((function(h,p){R(e).then((function(){try{l.chart(e,{chart:{type:"pie",margin:0},title:{text:n},plotOptions:{pie:{shadow:!1,center:["50%","50%"]}},tooltip:{valueSuffix:"%"},series:[{name:c,data:t,size:r,dataLabels:{enabled:!1,formatter:function(){return this.y>3?this.point.name:null},color:s,distance:i}},{name:u,data:a,innerSize:o,dataLabels:{enabled:!1,formatter:function(){return this.y>1?"<b>"+this.point.name+":</b> "+this.y+"%":null},color:d},id:"versions"}],responsive:{rules:[{condition:{maxWidth:100},chartOptions:{series:[{},{id:"versions",dataLabels:{enabled:!1}}]}}]}}),h()}catch(p){console.log("Highcharts error"),console.log(p),h(),console.log("In the highcharts plotting function")}}))}))}AQUARIA.passFeature=function(e,t,a){"function"===typeof AQUARIA.onFeatureChange&&AQUARIA.onFeatureChange(e,t),q(e,parseInt(t))};var P=a("9e89"),E=["A","C","D","E","F","G","H","I","K","L","M","N","P","Q","R","S","T","V","W","Y"];function O(e,t){var a="";if(e.urls.length>0){a="<p>";for(var n=0;n<e.urls.length;n++)a+="<a href='"+e.urls[n].href+"' target='_blank'>"+e.urls[n].text+"</a><br>";a+="</p>"}p("div.popup").remove();var r="",s="";e.name.includes("&#8201;&#8594;&#8201;")&&(s=e.name.replace(/^.*\(/,""),s=s.replace(/\&.*$/,""));var i="<div id='buttons_eachAa'> <b>See also:</b><p class='pAaColor'> "+s+" &rarr;</p>";if(E.forEach((function(t,a){if(t!=s){var n=M(t,e.desc,e.start);i=i+"<button id='btnVI_"+t+"'",i=1==n?i+"class='btnAaBold_b'> <b>"+t+"</b> ":i+" class='btnAaBold'> "+t,i+="</button>"}})),i+="</div>",e.name.includes("span_missenseHeading")&&"undefined"!==typeof c){for(var o in c)!1===c[o]&&!0}var l="<b>"+e.label+"</b>";e.name.includes("span_missenseHeading")||(l+=" (",l=e.start===e.end?l+"Residue "+e.start:l+"Residues "+e.start+"-"+e.end,l+=") "),e.name.includes("span_missenseHeading");var u=e.desc+"<br>"+a;e.name.includes("span_missenseHeading")?e.start!=e.end?(g.default.commit("setVariant",e.start+"-"+e.end),g.default.commit("setPopupTitle",e.label),D(e.start+"-"+e.end,e.label)):(g.default.commit("setVariant",e.start),g.default.commit("setPopupTitle",e.label),D(e.start,e.label)):(g.default.commit("setVariant",-1),g.default.commit("setPopupTitle",l),g.default.commit("setPopupText",u),g.default.commit("setVariantIdx",-1),g.default.commit("setPopupCoordinates",document.querySelector("#"+t).getBoundingClientRect())),e.hasOwnProperty("hc_go")&&e.hasOwnProperty("hc_ec")&&e.hasOwnProperty("hc_species")?(console.log("CATH plot data"),console.log(e),T(e).then((function(){B()}))):(console.log("CATH plot no data"),console.log(e));var d=document.querySelector("#"+t).getBoundingClientRect(),h=document.querySelector("#"+t).getBBox(),m=h.width;P.appendPopup(r,d,m,!1)}function D(e,t){var a=g.default.getters.getVariantResidues;if(a.hasOwnProperty(e)&&a[e].hasOwnProperty("theOrigFeatStr"))for(var n=0;n<a[e].theOrigFeatStr.length;n++)if(t.includes(a[e].theOrigFeatStr[n])){g.default.commit("setVariantIdx",n);break}}function M(e,t,a){var n="<toReplace_varInfo_"+e+">",r="</toReplace_varInfo_"+e+">",s=t.indexOf(n),i=t.lastIndexOf(r),o=t.substring(s,i);return!!(o.match("UniProt")||o.match("FunVar")||o.match("COSMIC")||window.AQUARIA.hasOwnProperty("variantStructs")&&window.AQUARIA.variantStructs.hasOwnProperty(a)&&window.AQUARIA.variantStructs[a].hasOwnProperty(e)&&window.AQUARIA.variantStructs[a][e].hasOwnProperty("pdbs")&&window.AQUARIA.variantStructs[a][e]["pdbs"].length>0)}function T(e){return new Promise((function(t,a){"undefined"!==typeof e.hc_go&&e.hc_go.hasOwnProperty("data")&&e.hc_go.data.hasOwnProperty("series")&&e.hc_go.data.series.length>=2?k("hc_go_div",e.hc_go.data.series[0].data,e.hc_go.data.series[1].data,"",e.hc_go.data.series[0].size,e.hc_go.data.series[0].dataLabels.color,e.hc_go.data.series[0].dataLabels.distance,e.hc_go.data.series[1].innerSize,e.hc_go.data.series[0].name,e.hc_go.data.series[1].name,e.hc_go.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_div"))})).catch((function(e){console.log("CATH plot: 2"),R("hc_go_noData").then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_noData")),document.getElementById("hc_go_noData").innerHTML=document.getElementById("hc_go_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+e)}))})):(R("hc_go_noData").then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_noData")),document.getElementById("hc_go_noData").innerHTML=document.getElementById("hc_go_noData").innerHTML+"<br> <br> <center> No data</center>"})),console.log("CATH plot: 3")),"undefined"!==typeof e.hc_ec&&e.hc_ec.hasOwnProperty("data")&&e.hc_ec.data.hasOwnProperty("series")&&e.hc_ec.data.series.length>=2?k("hc_ec_div",e.hc_ec.data.series[0].data,e.hc_ec.data.series[1].data,"",e.hc_ec.data.series[0].size,e.hc_ec.data.series[0].dataLabels.color,e.hc_ec.data.series[0].dataLabels.distance,e.hc_ec.data.series[1].innerSize,e.hc_ec.data.series[0].name,e.hc_ec.data.series[1].name,e.hc_ec.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_div"))})).catch((function(e){R("hc_ec_noData").then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_noData")),document.getElementById("hc_ec_noData").innerHTML=document.getElementById("hc_ec_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+e)}))})):R("hc_ec_noData").then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_noData")),document.getElementById("hc_ec_noData").innerHTML=document.getElementById("hc_ec_noData").innerHTML+"<br> <br> <center> No data</center>"})).catch((function(){})),"undefined"!==typeof e.hc_species&&e.hc_species.hasOwnProperty("data")&&e.hc_species.data.hasOwnProperty("series")&&e.hc_species.data.series.length>=2?k("hc_species_div",e.hc_species.data.series[0].data,e.hc_species.data.series[1].data,"",e.hc_species.data.series[0].size,e.hc_species.data.series[0].dataLabels.color,e.hc_species.data.series[0].dataLabels.distance,e.hc_species.data.series[1].innerSize,e.hc_species.data.series[0].name,e.hc_species.data.series[1].name,e.hc_species.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_div"))})).catch((function(e){R("hc_species_noData").then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_noData")),document.getElementById("hc_species_noData").innerHTML=document.getElementById("hc_species_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+e)}))})):R("hc_species_noData").then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_noData")),document.getElementById("hc_species_noData").innerHTML=document.getElementById("hc_species_noData").innerHTML+"<br> <br> <center> No data</center>"})),t()}))}function B(){var e=document.getElementsByClassName("highcharts-pie-series");for(var t in e)if(e.hasOwnProperty(t)){var a=e[t].getElementsByTagName("path");for(var n in a)if(a.hasOwnProperty(n)){var r=a[n].getAttribute("fill");a[n].removeAttribute("fill"),a[n].setAttribute("style","fill:"+r)}}}function L(){var e=AQUARIA.currentAnnotationsIn3DViewer;if(void 0!==e){for(var t in e)AQUARIA.panel3d.removeAnnotation(e[t].id,e[t].annotationName);e.length=0}}function q(e,t){if(t="undefined"!==typeof t?t:-1,t>=0)U(e,t);else for(t in e.Tracks)U(e,t)}function U(e,t){var a=new Array,n=new Array,r=new Array,s=new Array,i=new Array,c=new Array,l="#ffffff";if(void 0!=e){var u;for(var d in e.featureColours&&e.featureColours.length>0&&(l=e.featureColours[0]),e.Tracks[t])if(e.Tracks[t][d].show){if("multi_color"!==e.Class.color)e.Tracks[t][d].color.substring(1);for(var h in e.Tracks[t][d].color?a.push(e.Tracks[t][d].color):a.push(l),n.push(e.Tracks[t][d].label),r.push(e.Tracks[t][d].desc),s.push(e.Tracks[t][d].start+":"+e.Tracks[t][d].end),fURLs=new Array,fURLtxts=new Array,e.Tracks[t][d].urls)fURLs.push(e.Tracks[t][d].urls[h].href),fURLtxts.push(e.Tracks[t][d].urls[h].text);i.push(fURLs),c.push(fURLtxts)}var p=e.ProteinID;if(e.hasOwnProperty("SeqHash")&&""!=e.SeqHash)for(var m=0;m<AQUARIA.panel3d.attributes.sequences.length;m++)e.SeqHash==AQUARIA.panel3d.attributes.sequences[m].uniprot_hash&&(p=AQUARIA.panel3d.attributes.sequences[m].primary_accession,e.ProteinID=p);var f=(u={id:e.ProteinID,annotationName:e.Category,featureColours:a,featureNames:n,featureDescriptions:r,featurePositions:s,featureURLs:i},o(u,"featureURLs",i),o(u,"featureURLtexts",c),o(u,"featureURLtexts",c),u);AQUARIA.currentAnnotationsIn3DViewer.push(f),Array.isArray(f.id)?AQUARIA.panel3d.addAnnotation(f.id[0],f.annotationName,a,n,r,s,i,c):AQUARIA.panel3d.addAnnotation(f.id,f.annotationName,a,n,r,s,i,c)}}AQUARIA.currentAnnotationsIn3DViewer=new Array,e.exports.updateFeatureUI=A,e.exports.updateFeatureTabTitle=y},"2c07":function(e,t,a){e.exports=a.p+"img/aquaria-symbol-01.057e39d9.svg"},"31c8":function(e,t,a){e.exports=a.p+"img/up.64c3e14c.png"},"39b5":function(e,t,a){e.exports=a.p+"img/MS-01.f169151b.svg"},"3cb4":function(e,t,a){"use strict";a("23c5")},4069:function(e,t,a){"use strict";a("1237")},"41b6":function(e,t,a){"use strict";a("4f7f")},4481:function(e,t,a){},"4ace":function(e,t,a){},"4c7a":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAQCAYAAADqDXTRAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNq8020KgCAMBmAb0TGDQLyY0Ek6SbcoEHKg0YfWttLBK+iczy8bY8yilOpUvVrBL9rHVQLR0Yhan6EC7IJjIRyUhncQN3BolIJP4BUtAd/AFPonnARzaIT7D7AL8zbVhIfBUQhHcMxdgJcHuPArSEE5MAmkohSYDHLQJ5gFctEUzAYl6BFeJSBWK/yHCE0+s2R4E2AAhOs7b2YKWEMAAAAASUVORK5CYII="},"4d26":function(e,t,a){"use strict";a("9363")},"4d40":function(e,t,a){},"4e1a":function(e,t,a){"use strict";a("5cb5")},"4f7f":function(e,t,a){},"5a2b":function(e,t,a){"use strict";a.r(t),a.d(t,"createFeatureMap",(function(){return p})),a.d(t,"createSVGforFeature",(function(){return m})),a.d(t,"drawTrack",(function(){return f})),a.d(t,"drawFeatures",(function(){return v})),a.d(t,"createMouseOverCallback",(function(){return y})),a.d(t,"mouseoverFeature",(function(){return S})),a.d(t,"mouseoutFeature",(function(){return I})),a.d(t,"moveTheDiv",(function(){return x})),a.d(t,"removeCurrentAnnotationFrom3DViewer",(function(){return R}));a("d3b7"),a("159b"),a("cb29"),a("caad"),a("2532"),a("ac1f"),a("1276"),a("b64b"),a("b0c0"),a("5319"),a("466d");var n=a("5698"),r=a.n(n),s=a("1157"),i=a.n(s),o=a("1b1f"),c=a("9e89"),l=(a("ae8a"),a("4360")),u=a("29c86"),d="",h=!1;function p(e,t,a){document.querySelectorAll("#selectedCluster [id*='r_'] rect").forEach((function(e){e.style.fill="#a5a5a5",e.style.stroke="#a5a5a5"})),document.querySelectorAll("#selectedCluster [id*='r_'] polygon").forEach((function(e){e.style.fill="#a5a5a5",e.style.stroke="#a5a5a5"})),this.width=document.getElementById("structure-viewer").offsetWidth/1.2-window.AQUARIA.margin.right-window.AQUARIA.margin.left,this.height=40-window.AQUARIA.margin.top-window.AQUARIA.margin.bottom+35,this.datum=e;var n=r.a.select("#selectedFeature").append("div").attr("id","outerFeatureMap");this.drawTrack(this.datum,this.createSVGforFeature(n,"100vw",this.height+10,this.width+1),t,a),r.a.select("#outerFeatureMap > svg").attr("class","loadedFeature")}function m(e,t,a,n){return this.nusvg=e.append("svg").attr("width",t).attr("height",a).attr("viewBox","0 0 "+n+" "+a).attr("preserveAspectRatio","none"),this.nusvg}function f(e,t,a,n){var s=this,i=[];this.nusvg=t;var c=window.AQUARIA;for(var u in c.currentFeature.oid&&e&&e.Tracks&&e.Tracks.length>1?i[0]=e.Tracks[c.currentFeature.oid]:e&&e.Tracks&&(i=e.Tracks),this.nusvg.on("click",(function(){if(r.a.select(this).attr("class").includes("loaded"))window.location.hash.includes("Features")&&(r.a.select("svg.loaded").classed("loaded",!1),l["default"].commit("showLoader",!0),l["default"].commit("setLoaderMsg","Removing feature..."),l["default"].commit("showLoader",!1),"function"===typeof c.onFeatureChange&&c.onFeatureChange(null,0),s.removeCurrentAnnotationFrom3DViewer(),c.currentFeature.oid=null,c.currentFeature.data=null,document.querySelector("#outerFeatureMap").remove(),document.querySelector("#popup").style.display="none",c.showMatchingStructures.showMap(c.showMatchingStructures.cluster),o["hidePanels"]());else{document.querySelector(".featureHeader.actived").click(),document.querySelector("#outerFeatureMap")&&document.querySelector("#outerFeatureMap").remove();var t=r.a.select(this).attr("id").split("_")[2];l["default"].commit("showLoader",!0),l["default"].commit("setLoaderMsg","Loading feature..."),l["default"].commit("showLoader",!1),"Added Features"!==e.Server&&(c.addedFeature=!1),c.passFeature(e,t,this),"function"===typeof c.onFeatureChange&&c.onFeatureChange(e,t),r.a.selectAll("svg.loaded rect.feature").attr("fill","#a4abdf"),r.a.select("svg.loaded").classed("loaded",!1),r.a.select(this).attr("class","loaded"),s.createFeatureMap(e,a),o["hidePanels"]()}})),this.nusvg.append("rect").attr("width",this.width+c.margin.left).attr("height",25).attr("class","bg").attr("fill","none"),i)this.nusg=this.nusvg.append("g").attr("transform","translate(0 ,20)"),this.nusg.append("rect").attr("width",this.width).attr("height",1).attr("transform","translate(0,13)").attr("class","insertion");for(var p in i[u])if(0==h&&n&&"undefined"!==typeof n&&1==n){var m=g(i);if(-1!=m.o&&-1!=m.p){for(var f=0;f<i[m.o].length;f++)this.drawFeatures(f,m.o,i,a);r.a.selectAll("#selectedFeature rect.feature").attr("fill",(function(){return r.a.select(this).attr("color")})),d="r_"+m.o+"_"+m.p;var v=document.getElementById(d),y=new MouseEvent("mouseover",{view:window,bubbles:!0,cancelable:!0});v.dispatchEvent(y),r.a.select("#"+d).attr("stroke-width","0px")}else this.drawFeatures(p,u,i,a,this);h=!0}else this.drawFeatures(p,u,i,a,this);r.a.selectAll("#selectedFeature rect.feature").attr("fill",(function(){return r.a.select(this).attr("color")}))}function g(e){for(var t=l["default"].getters.getVariantResidues,a="",n=Object.keys(t),r=0;r<n.length;r++)if(t[n[r]].hasOwnProperty("order")&&t[n[r]].order.includes(0)){var s=t[n[r]].order.indexOf(0);-1!==s&&(a=t[n[r]].theOrigFeatStr[s])}var i={o:-1,p:-1},o={};if(""!=a&&e.length>0)for(r=0;r<e.length;r++)for(var c=0;c<e[r].length;c++)o[e[r][c].name]=[r,c],e[r][c].name.includes(a)&&(i.o=r,i.p=c);var u=-1;if(-1==i.o&&-1==i.p){for(r=0;r<e.length;r++)for(c=0;c<e[r].length;c++)o[e[r][c].name]=[r,c];var d=Object.keys(o);for(r=0;r<n.length;r++)for(c=0;c<t[n[r]].theOrigFeatStr.length;c++)for(var h=0;h<d.length;h++)d[h].includes(t[n[r]].theOrigFeatStr[c])&&(-1==u||t[n[r]].order[c]<u)&&(u=t[n[r]].order[c],i.o=o[d[h]][0],i.p=o[d[h]][1])}return i}function v(e,t,a,n){document.getElementById("structure-viewer").offsetWidth;var s=window.AQUARIA.showMatchingStructures.sequence.length,i=r.a.scale.linear().domain([1,s]).range([1,document.getElementById("structure-viewer").offsetWidth/1.2-window.AQUARIA.margin.right-window.AQUARIA.margin.left-5]),o=i(parseInt(a[t][e].start));this.nusg.append("rect").attr("width",(function(){return parseInt((a[t][e].size+1)*window.AQUARIA.coverageMapsrw)>2?parseInt((a[t][e].size+1)*window.AQUARIA.coverageMapsrw):2})).attr("height",14).attr("id","r_"+t+"_"+e).attr("x",o).attr("transform","translate(0,6)").attr("color",a[t][e].color).attr("fill","#a4abdf").attr("class","feature").on("mouseover",y(a[t][e],n)).on("mouseout",(function(){var e=r.a.select(this).attr("id");return r.a.select(this).call(I,e)}))}function y(e,t){return function(){var a=r.a.select(this).attr("id");r.a.select(this).call(S,e,a,t)}}var w,A=["A","C","D","E","F","G","H","I","K","L","M","N","P","Q","R","S","T","V","W","Y"];function b(e,t,a){var n="";if(e.urls.length>0){n="<p>";for(var r=0;r<e.urls.length;r++)n+="<a href='"+e.urls[r].href+"' target='_blank'>"+e.urls[r].text+"</a>";n+="</p>"}var s="",i="";e.name.includes("&#8201;&#8594;&#8201;")&&(i=e.name.replace(/^.*\(/,""),i=i.replace(/\&.*$/,""));var o='<div id="buttons_eachAa"> <b>See also:</b><p class="pAaColor"> '+i+" &rarr;</p>";if(A.forEach((function(t,a){if(t!==i){var n=C(t,e.desc,e.start);o=o+"<button id='btnVI_"+t+"'",o=!0===n?o+' class="btnAaBold_b"> <b>'+t+"</b> ":o+' class="btnAaBold"> '+t,o+="</button>"}})),o+="</div>",e.name.includes("span_missenseHeading")&&"undefined"!==typeof a){for(var u in a)!1===a[u]&&!0}var d="<b>"+e.label+"</b>";e.name.includes("span_missenseHeading")||(d+=" (",d=e.start===e.end?d+"Residue "+e.start:d+"Residues "+e.start+"-"+e.end,d+=") "),e.name.includes("span_missenseHeading");var h=e.desc+"<br>"+n;e.name.includes("span_missenseHeading")?e.start!=e.end?(l["default"].commit("setVariant",e.start+"-"+e.end),l["default"].commit("setPopupTitle",e.label),_(e.start+"-"+e.end,e.label)):(l["default"].commit("setVariant",e.start),l["default"].commit("setPopupTitle",e.label),_(e.start,e.label)):(l["default"].commit("setVariant",-1),l["default"].commit("setPopupTitle",d),l["default"].commit("setPopupText",h),l["default"].commit("setVariantIdx",-1));var p=document.querySelector("#"+t).getBoundingClientRect(),m=document.querySelector("#"+t).getBBox(),f=m.width;Object.prototype.hasOwnProperty.call(e,"hc_go")&&Object.prototype.hasOwnProperty.call(e,"hc_ec")&&Object.prototype.hasOwnProperty.call(e,"hc_species")?k(e).then((function(){P(),c["appendPopup"](s,p,f,!0)})):(console.log("CATH plot no data"),c["appendPopup"](s,p,f,!0))}function _(e,t){var a=l["default"].getters.getVariantResidues;if(a.hasOwnProperty(e)&&a[e].hasOwnProperty("theOrigFeatStr"))for(var n=0;n<a[e].theOrigFeatStr.length;n++)if(t.includes(a[e].theOrigFeatStr[n])){l["default"].commit("setVariantIdx",n),console.log("Set variant idx "+n);break}}function S(e,t,a,n){w=setTimeout((function(){b(t,a,n)}),500),r.a.select("#"+a).attr("stroke-width","2px").attr("stroke","white")}function I(e,t){clearTimeout(w),r.a.select("#"+t).attr("stroke-width","0px"),setTimeout((function(){x().then((function(){i()("div.popup").fadeOut()})).catch((function(e){console.log(e)}))}),500)}function x(){return new Promise((function(e,t){var a=document.getElementById("superFamCharts_0_go");document.getElementById("superFamCharts").append(a)}))}function C(e,t,a){var n="<toReplace_varInfo_"+e+">",r="</toReplace_varInfo_"+e+">",s=t.indexOf(n),i=t.lastIndexOf(r),o=t.substring(s,i);return!!(o.match("UniProt")||o.match("FunVar")||o.match("COSMIC")||window.AQUARIA.hasOwnProperty("variantStructs")&&window.AQUARIA.variantStructs&&window.AQUARIA.variantStructs.hasOwnProperty(a)&&window.AQUARIA.variantStructs[a].hasOwnProperty(e)&&window.AQUARIA.variantStructs[a][e].hasOwnProperty("pdbs")&&window.AQUARIA.variantStructs[a][e]["pdbs"].length>0)}function R(){var e=window.AQUARIA.currentAnnotationsIn3DViewer;if(void 0!==e){for(var t in e)window.AQUARIA.panel3d.removeAnnotation(e[t].id,e[t].annotationName);e.length=0}}function k(e){return new Promise((function(t,a){"undefined"!==typeof e.hc_go&&Object.prototype.hasOwnProperty.call(e.hc_go,"data")&&Object.prototype.hasOwnProperty.call(e.hc_go.data,"series")&&e.hc_go.data.series.length>=2?E("hc_go_div",e.hc_go.data.series[0].data,e.hc_go.data.series[1].data,"",e.hc_go.data.series[0].size,e.hc_go.data.series[0].dataLabels.color,e.hc_go.data.series[0].dataLabels.dist,e.hc_go.data.series[1].innerSize,e.hc_go.data.series[0].name,e.hc_go.data.series[1].name,e.hc_go.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_div"))})).catch((function(e){O("hc_go_noData").then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_noData")),document.getElementById("hc_go_noData").innerHTML=document.getElementById("hc_go_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+e)}))})):O("hc_go_noData").then((function(){document.getElementById("hc_go").prepend(document.getElementById("hc_go_noData")),document.getElementById("hc_go_noData").innerHTML=document.getElementById("hc_go_noData").innerHTML+"<br> <br> <center> No data</center>"})),"undefined"!==typeof e.hc_ec&&Object.prototype.hasOwnProperty.call(e.hc_ec,"data")&&Object.prototype.hasOwnProperty.call(e.hc_ec.data,"series")&&e.hc_ec.data.series.length>=2?E("hc_ec_div",e.hc_ec.data.series[0].data,e.hc_ec.data.series[1].data,"",e.hc_ec.data.series[0].size,e.hc_ec.data.series[0].dataLabels.color,e.hc_ec.data.series[0].dataLabels.dist,e.hc_ec.data.series[1].innerSize,e.hc_ec.data.series[0].name,e.hc_ec.data.series[1].name,e.hc_ec.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_div"))})).catch((function(e){O("hc_ec_noData").then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_noData")),document.getElementById("hc_ec_noData").innerHTML=document.getElementById("hc_ec_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+e)}))})):O("hc_ec_noData").then((function(){document.getElementById("hc_ec").prepend(document.getElementById("hc_ec_noData")),document.getElementById("hc_ec_noData").innerHTML=document.getElementById("hc_ec_noData").innerHTML+"<br> <br> <center> No data</center>"})).catch((function(){})),"undefined"!==typeof e.hc_species&&Object.prototype.hasOwnProperty.call(e.hc_species,"data")&&Object.prototype.hasOwnProperty.call(e.hc_species.data,"series")&&e.hc_species.data.series.length>=2?E("hc_species_div",e.hc_species.data.series[0].data,e.hc_species.data.series[1].data,"",e.hc_species.data.series[0].size,e.hc_species.data.series[0].dataLabels.color,e.hc_species.data.series[0].dataLabels.dist,e.hc_species.data.series[1].innerSize,e.hc_species.data.series[0].name,e.hc_species.data.series[1].name,e.hc_species.data.series[1].dataLabels.color).then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_div"))})).catch((function(e){O("hc_species_noData").then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_noData")),document.getElementById("hc_species_noData").innerHTML=document.getElementById("hc_species_noData").innerHTML+"<br> <br> <center> No data</center>",console.log("featureslist.showAnnotation ERROR "+e)}))})):O("hc_species_noData").then((function(){document.getElementById("hc_species").prepend(document.getElementById("hc_species_noData")),document.getElementById("hc_species_noData").innerHTML=document.getElementById("hc_species_noData").innerHTML+"<br> <br> <center> No data</center>"})),t()}))}function P(){var e=document.getElementsByClassName("highcharts-pie-series");for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var a=e[t].getElementsByTagName("path");for(var n in a)if(Object.prototype.hasOwnProperty.call(a,n)){var r=a[n].getAttribute("fill");a[n].removeAttribute("fill"),a[n].setAttribute("style","fill:"+r)}}}function E(e,t,a,n,r,s,i,o,c,l,d){return new Promise((function(h,p){O(e).then((function(){try{u.chart(e,{chart:{type:"pie",margin:0},title:{text:n},plotOptions:{pie:{shadow:!1,center:["50%","50%"]}},tooltip:{valueSuffix:"%"},series:[{name:c,data:t,size:r,dataLabels:{enabled:!1,formatter:function(){return this.y>3?this.point.name:null},color:s,distance:i}},{name:l,data:a,innerSize:o,dataLabels:{enabled:!1,formatter:function(){return this.y>1?"<b>"+this.point.name+":</b> "+this.y+"%":null},color:d},id:"versions"}],responsive:{rules:[{condition:{maxWidth:100},chartOptions:{series:[{},{id:"versions",dataLabels:{enabled:!1}}]}}]}}),h()}catch(p){console.log("Highcharts error"),console.log(p),h()}}))}))}function O(e){return new Promise((function(t,a){document.getElementById(e)&&document.getElementById(e).remove();var n=document.createElement("div");document.getElementById("superFamCharts").append(n),n.id=e,n.style="width: 100px; height: 100px; margin: 0 auto; background-color: white;",t()}))}},"5cb5":function(e,t,a){},"5d54":function(e,t,a){"use strict";a("fe91")},"5f75":function(e,t,a){},"61c9":function(e,t,a){},"62bc":function(e,t,a){e.exports=a.p+"img/down.7ae68b7a.png"},"6eaa":function(e,t,a){},"715b":function(e,t,a){"use strict";a("ea62")},"734d":function(e,t,a){},7663:function(e,t,a){},7829:function(e,t,a){},"7bd5":function(e,t,a){"use strict";a("e26a")},"7f5f":function(e,t,a){"use strict";a("2b1d")},8673:function(e,t,a){e.exports=a.p+"img/aquaria-loader3.223aec7b.svg"},"88de":function(e,t,a){"use strict";a("a309")},"8a17":function(e,t,a){"use strict";a("e5d1")},"8c8c":function(e,t,a){"use strict";a("6eaa")},"8f69":function(e,t,a){},"8f89":function(e,t,a){"use strict";a("7829")},9363:function(e,t,a){},"96ae":function(e,t,a){"use strict";a("7663")},"9b83":function(e,t,a){"use strict";a("c48f")},"9db5":function(e,t,a){e.exports=a.p+"img/FT-01.e4a6c439.svg"},a01c:function(e,t,a){"use strict";a("734d")},a309:function(e,t,a){},a6f5:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGoWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0NDYwLCAyMDIwLzA1LzEyLTE2OjA0OjE3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMC0xMS0wN1QxODo0Njo0OC0wNTowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjAtMTItMDlUMDg6NDk6MTYtMDU6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjAtMTItMDlUMDg6NDk6MTYtMDU6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjEzNGEyNTEtODFjYy00ZDNjLWJhMmQtY2VhMmM1MGY2YmQxIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ZTFkNTMwYWUtYzY2MS0wMjRlLTk1ZTItNTU4ODI4OWU1NTkxIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YjhlNjQyOWMtMjlkZS00NTc2LWEzN2MtMjM4NDJiNGUyZjA5IiB0aWZmOk9yaWVudGF0aW9uPSIxIiB0aWZmOlJlc29sdXRpb25Vbml0PSIyIiBleGlmOkNvbG9yU3BhY2U9IjEiIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSI3MDAiIGV4aWY6UGl4ZWxZRGltZW5zaW9uPSI3MDAiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiOGU2NDI5Yy0yOWRlLTQ1NzYtYTM3Yy0yMzg0MmI0ZTJmMDkiIHN0RXZ0OndoZW49IjIwMjAtMTItMDlUMDg6NDI6NTQtMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4yIChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoyMTM0YTI1MS04MWNjLTRkM2MtYmEyZC1jZWEyYzUwZjZiZDEiIHN0RXZ0OndoZW49IjIwMjAtMTItMDlUMDg6NDk6MTYtMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4yIChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtMh4BEAAAZoSURBVHja7Z17TNVlGMdPK4FlV3FqIDSJbF0sMqrF2rqRf5i1yrTsvsx1W6Os7LbZ1cxpq2hWFq78x8op5FKbRZOwaFZqm80tS6g0BwYiyOXAOfD2fT0v2xlwgvO87znv8x7eZ/uMjXH5Pb/P77383tsJCCECHj5wuIhjwDgwBRSD2eA+MBfMAdNAATgNHOeFJIYMUAjuB6VgHagBf4B/QRtoB02gFmwD68F74GFwGTjZC9FjEngElIMGoR8tYAN4RpUuL2SY3AI2icRHlSpxXkgM7gXbRfLjd1AC0ryQCLPAbmE/9qv2ZsQKOVPV6dxCdhYuGmlC7gJB3TvX29t79Gs4HBahUOgo8nvRaMSCkSJkeSIe62gBhoTI+Bykp6oQ+R7wk3AvZKN/dqoJOQXsEe7GEa5SKL+UqZ4y10OOBpzlupATwZ8idaIZ5LkspCbBN+gv8D34CmxEI14px7Hwtd5Qoz5YHHBVyLIE3IxfwTtgBshXI78D/jdEpIPzwG09PT2rwD7Dcja6JmSGYRFrwTXUi4aMUZAyG1QbFPOYK0JGGxRRDS40dfGQEYCU6aDOkJiJLgj5zJCMpxOVBGSkQcr7BqTs4C6k0ICIfeDiZCQDKTMNSLmTs5CfNZOTXeQxyUwIQqZqSmniKqTAwIxelo2kUFKu1JRyN0chWzQS6gGTbT5pEHKDhpS93IScq1k6buTQhURJeU0jhyJOQpZqJPI1pzdflJJ/iHms4yTkbw0hE5gJKdaouk7iIESnMS/jOKQNITuJ+dzBQcgCDSHZTIVMI+azgoOQco3pUbZTo5BSS8hpNwchtUQhszgLAYuI3fdTbQrJIsqQreY45iWkmJjb5TaFXEq86F+Ylw7J8aCDkNtcm0JuIgpZ7YAQyS5Cbs/ZFPIQUchiR4RQVla+blPI80QhJS4IQTtSRsjtXZtCFhGFuLIN4C1CbittCnmFKGSeI0JKuY8+9P/GU0Qh8x0R8hEht1KbQu4hCnnTESGVhNxetinkWqKQCkeE7CXk9oRNIecThexxQMZY0E3I7VabQuTa3U6ilDzBu8t7MzGvc2wPLm4jXjj3/XwfEhdqHGtbSBlRSA3zEnKIkFMVh+H32zUmqAqZyniAmM9LHISM0RBSzVRIIzGfS7gscvhOQ8pUZjIeJC5yaOS06mTegBmo4Sf1GyMZJ4Au4oP1AichGf0nc+J8ypYwEVKpUdIzOQmRvKpRSoSa7LK5avFFjfVY1hZsDLX1WWhKudqSjEc1F1tfwFFIQFU9A4TEmez0JMt4XFPGJpsle6gfGAVCmqUkaW/xkPGGgQ07kzgLidnjIiT+iUjQ5h1cyxTI+EHoh/XOCHkegSilWQ1njzYkIhcsNbThczOHnuFwf1CeBnrEkBQZB9XTmEMUUQBWgrAwF1UuCZFcZaDX1T/kUs2tYCGYqYa65RaANPUQpKtqrlDNZi7D/9uVoBMdZOwQlo8GjPcXSmJJMXiT5JB3vYgceXFQ0FYb6sT2ZA+56wgJqPnzREuxHd+6JGSkSNnskpBBh1ZSML5xSUhAvfClenzpkpCAGq86kOJSPnVJSN9A5Bqud7O7u7vLwJ/Z4JKQPq4TkU844BKHwfXBYDC7vb29TvePocOy3jUhAfViJZdfHrIoQpaIt0XUnvmurq4JENNgQMrHrgnpQ26WlGdkJfMEU9mWLY41JIOqKwdiGg1IKXdRSDRyTmSVevM2HfKDXypEZBdwxlDXEgqFpJT9BqRUuCwk+rhAeTqC3DizE7QSBcj94x+IyEcjjY/3OiBlImjWlSIP5JTHDLosZLDjyguVpPmq7ZGjACsUsh2Qm4ieFJHPIykyNacSDofPgJTDBqSsTSUhVoGUfEip59T7GtFClJQc0GpAyhovxNxc/GTQaqCD8YWIcRi0F0KQgpLSZEDKj16IOSnZJqovxLNeiDkp+ZDSQmhD5JhZ9KxnrhdirqHPQ++rKV4heOGM/laJF2JWShak6Ix9LfFCzEs5HdUQdexroReSAFBKclEVNfxfVRUjiryQBIFSMr6jo6MujoUdq30vK8EEg8HMzs7O4YwSyw8by/RCklN9jW1ra9sCYlVVcgRb68x7f6PjLymBlpaWK9CuLIeUrerNXI5jzfFjWSmIvwleiMcL8UI8XogX4vFCvBCPF+KF+JvghXi8EC/E44V4IR7j/Ac9YhOzv9yXfwAAAABJRU5ErkJggg=="},ae0b:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("GdprConsentModal"),a("Header"),a("Sequence"),a("div",[a("AboutAlignment")],1),a("div",[a("AboutPdb")],1),a("div",[a("AboutAquaria"),a("UserHelp"),a("Errors")],1),a("div",{attrs:{id:"heightinspector"}}),a("StructureViewer"),a("Tabs"),a("CoverageMap"),a("Loader"),a("PopUp"),a("a",{attrs:{href:e.data.hash}},[a("div",{staticClass:"hide",attrs:{id:"scrim"},on:{click:e.dismissPanel}})])],1)},r=[],s=(a("d3b7"),a("159b"),a("4360")),i=(a("d81d"),a("ac1f"),a("1276"),a("a15b"),a("466d"),a("99af"),a("e9c4"),a("caad"),a("2532"),a("2b3b"));window.AQUARIA={};var o=window.AQUARIA,c=a("1157"),l=a("2bb0"),u=a("ae8a"),d=a("356e"),h=a("22b1"),p=a("5698"),m=a("bc3a");a("b3c8");var f=10;(function(e){var t=[],a=function(e){t.push(e)};o.overlay=function(){var e=document.createElement("div");e.className="dimmer",document.body.append(e)},o.RemoveOverlay=function(){document.querySelectorAll("div.dimmer").forEach((function(e){return e.remove()}))},o.fireProteinSubmitListeners=function(e,a,n){t.forEach((function(t){t.submitFired(e,a,n)}))},o.proteinTopTen=new h("protein_top_ten",f),o.pdbTopTen=new h("pdbTopten",f),a(o.proteinTopTen);var n=1,r=null;try{window.aquariaReady=function(){};var i="";"applet"===window.threedViewer?i="simple":"webgl"!==window.threedViewer&&"jolecule"!==window.threedViewer||(i="detailed"),e("span#threedSwitcher a").attr("title",i),e("span#threedSwitcher").click((function(){"applet"===window.threedViewer?window.threedViewer="jolecule":"webgl"!==window.threedViewer&&"jolecule"!==window.threedViewer||(window.threedViewer="applet"),localStorage.setItem("3DViewer",window.threedViewer),location.reload()})),e("#biounitLeft").click((function(){n-=1,o.display_3D_structure(r)})),e("#biounitRight").click((function(){n+=1,o.display_3D_structure(r)}));var c=function(e){var t=e.split(":").map((function(e){return parseFloat(e)})),a=t[0]*t[5]*t[10]+t[1]*t[6]*t[8]+t[2]*t[4]*t[9]-(t[2]*t[5]*t[8]+t[1]*t[4]*t[10]+t[0]*t[6]*t[9]);return a<0&&(t[0]=-t[0],t[4]=-t[4],t[8]=-t[8]),t.join(":")};o.display_3D_structure=function(t,a){r=t,o.currentChain=t.pdb_chain;var i=t.alignment,l=t.pdb_chain,u=t.pdb_id,h=t.sequences,f=c(t.transforms[0]),g=t.common_names,v=t.source_primary_accession,y=t.conservations;if(n=!t.biounits||t.biounits<1?0:t.biounits,u.match(/^\d\w\w\w$/)){var w=e("#threeD").width(),A=w;A=e("#threeDSpan").innerHeight(),A<570&&(A=570);var b="".concat(window.BACKEND,"/getPubMedForPDB/").concat(u,"/").concat(window.AQUARIA.prefferedChain[0]?window.AQUARIA.prefferedChain[0]:l[0]);m({method:"get",url:b}).then((function(t){var r=t.data[0],c=r.Biounits;(!c||c<1)&&(n=0,r.Biounits=0),c>0&&"undefined"!==typeof r.experimental_method&&null!==r.experimental_method&&r.experimental_method.toLowerCase().indexOf("x-ray")>-1?(a&&(n=1,d.updatePDBPanel(r,g[0],a.alignment_identity_score)),n>c?n=0:n<0&&(n=c),0===n?(e("#biounitType").text("Asymmetric Unit"),e("#biounitCount").hide()):(e("#biounitType").text("Biological Assembly "),c>1?e("#biounitCount").show():e("#biounitCount").hide()),e("#biounitDisplay").show(),e("#biounitCount").text(n+"/"+c),n!==c?e("#biounitRight").show():e("#biounitRight").hide(),n>0?e("#biounitLeft").show():e("#biounitLeft").hide()):(r&&d.updatePDBPanel(r,g[0],a.alignment_identity_score),e("#biounitDisplay").hide(),n=0),o.pdb_data=r,p.selectAll("svg.loaded rect.feature").attr("fill","#a4abdf"),p.selectAll("svg.loaded").classed("loaded",!1);var m=o.panel3d.generateAttributes(w,A,u,l,n,v,h,g,i,"",f,y,o.structures2match.version_string);if(e("#jnlp_app_attributes").val(JSON.stringify(m)),window.hide3DViewer)s["default"].commit("showLoader",!0),s["default"].commit("setLoaderMsg","Applet is not enabled for this browser. Launch Application instead.");else{var b=function(e,t){var a=[];for(var n in window.AQUARIA.structures2match.clusters)for(var r in window.AQUARIA.structures2match.clusters[n].members)if(window.AQUARIA.structures2match.clusters[n].members[r].pdb_chain[0].includes(t)&&window.AQUARIA.structures2match.clusters[n].members[r].pdb_id.includes(e))return a.cluster=parseInt(n),a.member=parseInt(r),a},_=window.location.href.substr(window.location.origin.length+window.location.pathname.length);history.pushState(null,h[0].primary_accession,window.location.protocol+"//"+window.location.host+"/"+s["default"].getters.getOrganism+"/"+s["default"].getters.getGene+"/"+u+"/"+(window.AQUARIA.prefferedChain[0]?window.AQUARIA.prefferedChain[0]:l[0])+_),window.AQUARIA.PDBIndex=b(window.AQUARIA.currentMember.pdb_id,window.AQUARIA.currentMember.pdb_chain),o.panel3d.initialised?o.panel3d.reload(m):o?o.panel3d.load(m):(console.log("AQUARIA.display_3D_structure Error: Cannot load the applet!"),alert("Cannot load the Applet!"))}}))}else console.log("AQUARIA.display_3D_structure Error: Invalid PDB identifier")},o.display_features=function(e){var t=[],a=[];e.forEach((function(e){t.push(e.primary_accession),a.push(e.uniprot_hash)})),"undefined"!==typeof u?(o.blankPanel("#featurePanel",!0),g(),u.fetch_annotations(t,(function(e,t){l.updateFeatureUI(e,t),o.blankPanel("#featurePanel",!1)}))):alert("Could not find fetch_das_annotations.")};var g=function(){e("#featureCounter").show(),e("#waitForFeatures").show()};o.updateDocumentTitle=function(e,t,a,n){document.title="Aquaria: "+e+", "+t+"% Sequence Identity to PDB "+a+", chain "+n,l.updateFeatureTabTitle(e)},o.refresh=function(){"undefined"!==typeof o.showMatchingStructures&&(o.showMatchingStructures.refresh(),l.updateFeatureUI())},o.load3DAlignment=function(e,t){o.currentMember=e,o.updateDocumentTitle(o.preferred_protein_name,e.alignment_identity_score,e.pdb_id,window.AQUARIA.prefferedChain[0]?window.AQUARIA.prefferedChain[0]:e.pdb_chain[0]),o.fireProteinSubmitListeners(o.preferred_protein_name,t.primary_accession,e.pdb_id),s["default"].commit("showLoader",!0),s["default"].commit("setLoaderMsg","Waiting for PDB..."),o.blankPanel("#featurePanel",!0),o.blankPanel("#aboutPDB",!0);var a={selector:[t.primary_accession],selectPDB:this.member.pdb_id,selectChain:window.AQUARIA.prefferedChain[0]?window.AQUARIA.prefferedChain[0]:this.member.pdb_chain[0]},n="".concat(window.BACKEND,"/get_3D_alignment");m({method:"get",url:n,params:a}).then((function(t){var a=t.data;s["default"].commit("setSecondaryStructure",a.secondary_structure),o.display_3D_structure(a,e),o.blankPanel("#vis",!1),o.blankPanel("#aboutPDB",!1),o.blankPanel("#uniProtDesc",!1),o.blankPanel("#featurePanel",!1)}))},o.display_member=function(e){var t=o.structures2match;s["default"].commit("showLoader",!0),t.clusters&&t.clusters.length>0?("undefined"===typeof e&&(e=t.clusters[t.Selected_PDB.cluster_number].members[t.Selected_PDB.member_number]),o.member=e,o.load3DAlignment(e,t.sequences[0])):"undefined"===typeof t.pdb_id?(d.updateUniprotInfo(null),o.showMatchingStructures.removeAll()):(store.commit("setLoaderMsg","Cannot find protein"),s["default"].commit("setErrorTitle","Cannot find protein."),d.updateUniprotInfo(null),o.showMatchingStructures.removeAll())}}catch(v){alert("Error with displaying structures: "+v.message)}})(c),o.margin={top:10,right:70,bottom:20,left:20},window.AQUARIA.chainSelected=i["chainSelected"],o.structures2match={},o.blankCount={},o.currentMember=null;var g=c;o.blankPanel=function(e,t,a){var n=e+" .blank";t?0===g(n).length&&(a?g(e).append('<div class="blank hidden"><br><p class="centered">'+a+"</p></div>"):g(e).append('<div class="blank hidden"></div>'),g(n).fadeIn("fast"),g(n).css("height",g(e).css("height"))):g(n).fadeOut("slow",(function(e){g(n).remove()}))};var v,y,w,A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"header"}},[a("div",{staticClass:"item fix level3",attrs:{id:"logo"}},[a("a",{attrs:{href:"#About"},on:{click:e.showScrim}},[a("img",{attrs:{src:e.aquariasymbol}})])]),a("Title"),a("div",{staticClass:"item fix level3",attrs:{id:"menu-btn"}},[a("a",{attrs:{href:"#Menu"}},[a("img",{attrs:{src:e.hamburger}})])]),a("Menu")],1)},b=[],_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"item title fix level5",attrs:{id:"title"}},[a("span",{attrs:{id:"org_prot"}},[e.organism_name&&!e.seqRes?a("a",{staticClass:"seqPanel",attrs:{href:"#Sequence"},on:{click:function(t){return e.makeActive("seqPanel")}}},[a("img",{attrs:{src:e.search}}),e._v(" "+e._s(e.organism_name)+" "),a("strong",[e._v(e._s(e.primary_accession))])]):e._e(),e.organism_name||e.seqRes?e._e():a("a",{staticClass:"seqPanel",attrs:{href:"#Sequence"},on:{click:function(t){return e.makeActive("seqPanel")}}},[a("img",{attrs:{src:e.search}}),e._v(" Protein Sequence ")])]),e.seqRes?e._e():a("span",{attrs:{id:"alignment"}},[a("a",{staticClass:"alignPanel",attrs:{href:"#Alignment"},on:{click:function(t){return e.makeActive("alignPanel")}}},[e._v("aligned onto")])]),e.seqRes?e._e():a("span",{attrs:{id:"struct"}},[e.pdb?e._e():a("a",{staticClass:"structPanel",attrs:{href:"#Structure"},on:{click:function(t){return e.makeActive("structPanel")}}},[e._v("PDB ID")]),e.pdb&&!e.seqRes?a("a",{staticClass:"structPanel",attrs:{href:"#Structure"},on:{click:function(t){return e.makeActive("structPanel")}}},[e._v(e._s(e.pdb))]):e._e(),a("span",{style:{visibility:e.helpOption?"visible":"hidden"},attrs:{id:"help"},on:{click:e.showHelp}},[e._v("?")])]),e.seqRes?a("div",{attrs:{id:"titleAlign"}},[a("span",{staticClass:"titlepanel"},[a("a",{staticClass:"selectionPanel",attrs:{href:"#Alignment"},on:{click:function(t){return e.makeActive("selectionPanel")}}},[a("strong",[e._v(e._s(e.primary_accession))]),e._v(" sequence: "+e._s(e.seqRes)+" "),a("br"),a("strong",[e._v(e._s(e.pdb))]),e._v(" structure: "+e._s(e.structRes)+" ")])])]):e._e(),a("a",{staticClass:"close",attrs:{href:e.data.hash},on:{click:e.dismissPanel}})])},S=[],I=a("5530"),x=(a("498a"),a("1b1f")),C=a("2f62"),R={name:"Title",data:function(){return{organism_name:null,primary_accession:null,text:null,pdb:null,search:a("a6f5"),seqRes:null,structRes:null,helpOption:!0}},computed:Object(I["a"])({data:function(){return{hash:s["default"].state.hash}},scrim:function(){return s["default"].state.showScrim}},Object(C["b"])(["getHash","getOrganism","getGene","getStructure"])),watch:{scrim:function(e){var t=this;e||t.dismissPanel()}},beforeMount:function(){var e=this;window.AQUARIA.update3DTitle=function(t,a,n,r,s){if(n&&r){var i=r;if(-1!==i.indexOf("(")&&(i=r.substring(0,r.indexOf("(")).trim()),window.AQUARIA.short_moleculeName=i,t&&a&&s){e.organism_name=e.getOrganism,e.primary_accession=e.getGene,e.text="aligned onto",e.pdb=a+"-"+n;var o=window.AQUARIA.currentMember.E_value;window.AQUARIA.explainTitle(t,e.getGene,i,a,n,s,o)}else e.organism_name=e.getOrganism,e.primary_accession=i,e.text="structure from",e.pdb=a+"-"+n;var c=window.location.href.substr(window.location.origin.length+window.location.pathname.length);history.pushState("",document.title,"/"+e.getOrganism+"/"+e.getGene+"/"+e.getStructure.pdb+"/"+e.getStructure.chain+c)}else document.querySelector("#uniProtDesc").text(e.getGene)}},methods:{showHelp:function(){s["default"].commit("setHelpTitle","Aquaria Help"),s["default"].commit("setUserStatus",!1),document.getElementById("UserHelp").classList.remove("hide"),document.getElementById("UserHelp").className+=" show",document.querySelector("div.dimmer")||(x["overlay"](),document.querySelector("div.dimmer").className+=" level7"),document.querySelector("div.dimmer").addEventListener("click",(function(){x["RemoveOverlay"](),document.getElementById("UserHelp").classList.remove("show"),document.getElementById("UserHelp").className+=" hide"}))},storeHash:function(){""===window.location.hash?s["default"].commit("setHash","#(0,0,0)"):(window.location.hash.includes("-")||window.location.hash.includes("("))&&s["default"].commit("setHash",window.location.hash)},makeActive:function(e){this.helpOption=!1,this.storeHash(),document.querySelectorAll("#title span a").forEach((function(e){e.classList.remove("active")})),document.querySelector("."+e).classList+=" active",-1===document.querySelector("#title").className.indexOf("active")&&(document.querySelector("#title").className+=" active"),document.querySelector("#scrim").className="show level2",s["default"].commit("setScrim",!0),null!==document.querySelector("#titleAlign")&&(document.querySelector("#titleAlign").className="active",s["default"].commit("setAlignment",window.AQUARIA.panel3d.joleculeAlignment.copyToClipboard()),s["default"].commit("setHash",window.location.hash))},dismissPanel:function(){this.helpOption=!0;var e=document.getElementById("scrim");e.classList.contains("show")&&(e.classList.remove("show"),e.classList.add("hide")),s["default"].commit("setHash",this.getHash),document.querySelector("#title").className="item title fix level6",null!==document.querySelector("#titleAlign")&&(document.querySelector("#titleAlign").className=""),document.querySelectorAll("#title span a").forEach((function(e){e.classList.remove("active")}))},resetSelection:function(){document.querySelectorAll("#titlebar span").forEach((function(e){e.className="titlepanel"})),document.querySelectorAll(".contents").forEach((function(e){e.style.display="none"}))},release:function(){document.querySelector("#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection").style.display="none",this.resetSelection()}},mounted:function(){this.resetSelection()},updated:function(){var e=this;e.primary_accession=e.getGene;var t=new MutationObserver((function(){if("none"===document.querySelector("#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection").style.display)e.seqRes=null,e.structRes=null,s["default"].commit("setAlignment","");else{var t=document.querySelector("#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection").innerText.split("\n"),a=window.AQUARIA.currentMember.pdb_id+"["+window.AQUARIA.currentMember.model+"]-"+window.AQUARIA.currentMember.pdb_chain+":",n=e.getGene+":";e.seqRes=t[1].split(n)[1],e.structRes=t[0].split(a)[1]}}));t.observe(document.querySelector("#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection"),{attributes:!0,childList:!0,characterData:!0})}},k=R,P=(a("4069"),a("2877")),E=Object(P["a"])(k,_,S,!1,null,"4b47c11a",null),O=E.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"panel abs floating level7",attrs:{id:"Menu"}},[a("a",{staticClass:"close",attrs:{href:"#"}}),e._m(0),e._m(1),a("select",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selected=t.target.multiple?a:a[0]},function(t){return e.onChange(t)}]}},[a("option",{attrs:{id:"ribbon",selected:""}},[e._v("Ribbon")]),a("option",{attrs:{id:"sphere"}},[e._v("Sphere")]),a("option",{attrs:{id:"backbone"}},[e._v("Backbone")])])])},M=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a",{staticClass:"lnk",attrs:{id:"print",href:"#"}},[e._v("Print")]),a("a",{staticClass:"lnk",attrs:{id:"helpbtn",href:"#"}},[e._v("Help")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a",{staticClass:"lnk",attrs:{id:"Sidechains",href:"#Menu"}},[e._v("Sidechains")]),a("a",{staticClass:"lnk",attrs:{id:"Neighbors",href:"#Menu"}},[e._v("Neighbors")]),a("a",{staticClass:"lnk active",attrs:{id:"Ligands",href:"#Menu"}},[e._v("Ligands")]),a("a",{staticClass:"lnk",attrs:{id:"Water",href:"#Menu"}},[e._v("Water")])])}],T=a("1da1"),B=(a("96cf"),a("aaec")),L=a("2fac"),q={name:"Menu",data:function(){return{selected:"Ribbon"}},methods:{onChange:function(e){var t=e.target.value.toLowerCase();document.querySelector("#threeDSpan-inner-menu-"+t).click()},showHelp:function(){var e=this;s["default"].commit("setHelpTitle","Aquaria Help"),s["default"].commit("setUserStatus",!1),document.getElementById("UserHelp").classList.remove("hide"),document.getElementById("UserHelp").className+=" show",document.querySelector("div.dimmer")||(x["overlay"](),document.querySelector("div.dimmer").className+=" level7"),document.querySelector("div.dimmer").addEventListener("click",(function(){x["RemoveOverlay"](),document.getElementById("UserHelp").classList.remove("show"),document.getElementById("UserHelp").className+=" hide";var t={};t.target=document.querySelector("#helpbtn"),e.toggleActive(t)}))},toggleActive:function(e){"lnk active"===e.target.className?e.target.className="lnk":e.target.className="lnk active"}},mounted:function(){var e=this;document.querySelector("#print").addEventListener("click",function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Object(B["a"])(7680,4320,0,0);case 3:a=e.sent,n=document.createElement("a"),n.href=a,n.download="aquaria-screenshot.png",n.click();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),document.querySelector("#helpbtn").addEventListener("click",(function(t){t.preventDefault(),e.toggleActive(t),e.showHelp()})),document.querySelector("#Sidechains").addEventListener("click",(function(t){t.preventDefault(),e.toggleActive(t),t.currentTarget.classList.contains("active")&&L["b"](),document.querySelector("#threeDSpan-inner > div.jolecule-embed-header.jolecule-embed-toolbar > span:nth-child(5)").click()})),document.querySelector("#Neighbors").addEventListener("click",(function(t){t.preventDefault(),e.toggleActive(t),document.querySelector("#threeDSpan-inner > div.jolecule-embed-header.jolecule-embed-toolbar > span:nth-child(6)").click()})),document.querySelector("#Ligands").addEventListener("click",(function(t){t.preventDefault(),e.toggleActive(t),document.querySelector("#threeDSpan-inner-menu-ligand").click()})),document.querySelector("#Water").addEventListener("click",(function(t){t.preventDefault(),e.toggleActive(t),document.querySelector("#threeDSpan-inner-menu-water").click()}))}},U=q,V=(a("8c8c"),Object(P["a"])(U,D,M,!1,null,"3cbdef84",null)),F=V.exports,N={name:"Header",components:{Title:O,Menu:F},data:function(){return{aquariasymbol:a("2c07"),hamburger:a("b335")}},methods:{showScrim:function(){s["default"].commit("setHash",window.location.hash),document.querySelector("#scrim").className="show level3",document.querySelector("#xr-button").click()}}},Q=N,j=(a("113a"),Object(P["a"])(Q,A,b,!1,null,"34ef906a",null)),H=j.exports,G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"panel overlay about level3",attrs:{id:"Sequence"}},[a("SearchPanel"),a("AboutUniprot")],1)},z=[],Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"searchByName"}},[a("p",[e._v("Organism")]),a("SearchOrganism"),e._m(0),a("p",[e._v("Protein")]),a("SearchProtein"),a("div",{attrs:{id:"psyns"}},[a("p",[e._v("(example: "),a("a",{attrs:{href:"#"},on:{click:function(t){return e.fillin("p53")}}},[e._v("p53")]),e._v(" or "),a("a",{attrs:{href:"#"},on:{click:function(t){return e.fillin("P04637")}}},[e._v("P04637")]),e._v(")")])])],1)},W=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"osyns"}},[a("p",[e._v(" ")])])}],Y=a("1157"),J=a.n(Y),$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("autocomplete",{ref:"autocomplete",attrs:{id:"organism_syn_input",search:e.search,"get-result-value":e.getResultValue},on:{submit:e.handleSubmit}})],1)},X=[],K=a("bc3a"),ee=a.n(K),te=a("356e"),ae=a("95bf"),ne=(a("8b78"),{name:"SearchOrganism",components:{Autocomplete:ae["a"]},data:function(){return{OrganismSynonyms:{}}},computed:{data:function(){return{OrgID:s["default"].state.OrgID,Organism:s["default"].state.Organism}}},methods:{getResultValue:function(e){return e.value},handleSubmit:function(e){var t=this;if(e.value&&0!==e.value.indexOf("No organisms for: ")&&e.id!==t.data.OrgID){var a="".concat(window.BACKEND,"/getOrganismSynonyms");ee()({method:"get",url:a,params:{organism_id:e.id}}).then((function(t){var a=t.data;s["default"].commit("setOrgID",e.id),localStorage.preferred_organism_name=e.value,te["displayOrgSynonyms"](a),document.querySelector("#organism_syn_input").setAttribute("size",e.value.length)}))}},clear:function(){this.value="",this.$refs.autocomplete.value=""},search:function(e){var t,a=this,n=this.OrganismSynonyms,r=e;return this.value=e,new Promise((function(e){if(r in n)e(n[r]);else if(""!==r){var s="".concat(window.BACKEND,"/getQueryOrganism/").concat(r);ee()({method:"get",url:s}).then((function(a){var s=a.data;s.length>0?(t=s.map((function(e){return{label:e.Synonym,value:e.Synonym,id:e.Organism_ID}})),n[r]=t):t={label:"No organisms for: "+r,value:0},document.querySelector("#autocomplete-result-list-1").style.zIndex=99,document.querySelector(".autocomplete-result-list").style.maxHeight="390px",e(t)}))}else t={label:a.data.Organism,value:a.data.OrgID},e(t)}))}}}),re=ne,se=Object(P["a"])(re,$,X,!1,null,null,null),ie=se.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("autocomplete",{ref:"autocomplete",attrs:{id:"protein_syn_input",search:e.search,"get-result-value":e.getResultValue},on:{submit:e.handleSubmit}})},ce=[],le=(a("b0c0"),a("4de4"),a("2ca0"),a("4e82"),{name:"SearchProtein",components:{Autocomplete:ae["a"]},data:function(){return{callbackData:{names:[],ids:[],pdbIDs:[]},cacheProteinSynonyms:{},term:null,proteinSynonymOrgId:null,pdbId:null,collectResponsevalues:null}},methods:{getResultValue:function(e){return e.value+" ("+e.id+")"},clear:function(){this.value="",this.$refs.autocomplete.value=""},handleSubmit:function(e){var t=this,a=window.AQUARIA;if(e.value&&0!==e.value.indexOf("No structures for: ")){var n=e.id;if(n.indexOf("/")>-1){var r=n.split("/");n=r[0],t.pdbId=r[1]}if("PDB"===e.type){console.log("AQUARIA.proteinAutocomplete.select pdb",e.value),s["default"].commit("showLoader",!0),s["default"].commit("setLoaderMsg","Waiting for data...");var o="".concat(window.BACKEND,"/getAccessionForPDB/").concat(e.value);ee()({method:"get",url:o}).then((function(t){var a=t.data;i["loadAccession"]([a.Accession],e.value,null)}))}else e.id===a.protein_primary_accession?e.value===a.preferred_protein_name?s["default"].commit("showLoader",!1):(console.log("AQUARIA.proteinAutocomplete.select same protein, different name",e.value),a.preferred_protein_name=e.value,o="".concat(window.BACKEND,"/getProteinSynonyms/").concat(a.protein_primary_accession,";"),ee()({method:"get",url:o}).then((function(e){te["displayProtSynonyms"](e.data)}))):(document.querySelector("#protein_syn_input").placeholder=e.value,document.querySelector("#protein_syn_input").value="",s["default"].commit("showLoader",!0),s["default"].commit("setLoaderMsg","Waiting for data..."),s["default"].commit("setGene",e.value),i["loadAccession"]([n],t.pdbId,null))}else event.preventDefault()},search:function(e){var t=window.AQUARIA,a=this;return a.term=e,a.callbackData.LRU=a.getLRU(),new Promise((function(e){if(""===a.term)a.collectResponse(),a.collectResponsevalues&&e(a.collectResponsevalues);else{if(a.proteinSynonymOrgId=a.term+"%"+t.Organism.ID,a.proteinSynonymOrgId in a.cacheProteinSynonyms)return void e(a.cacheProteinSynonyms[a.proteinSynonymOrgId]);document.querySelector(".autocomplete-result-list").style.maxHeight="390px";var n="".concat(window.BACKEND,"/queryProtein/").concat(a.term,"/").concat(t.Organism.ID);ee()({method:"get",url:n}).then((function(t){var n=t.data;isNaN(parseInt(a.term.charAt(0)))?n.length>0?0===n[0].isID?(a.nameCallback(n),a.collectResponsevalues&&e(a.collectResponsevalues)):a.idCallback(n):0===n.isID?(a.nameCallback(n),a.collectResponsevalues&&e(a.collectResponsevalues)):(a.idCallback(n),a.collectResponsevalues&&e(a.collectResponsevalues)):(a.pdbCallback(n),a.collectResponsevalues&&e(a.collectResponsevalues))}))}}))},getLRU:function(){return window.AQUARIA.proteinTopTen.getAll().map((function(e){return{label:e.name,suffix:e.primary_accession+", "+e.pdb_id,value:e.name,type:"LRU",category:"Recent",id:e.primary_accession+"/"+e.pdb_id}}))},collectResponse:function(){var e=this,t=e.callbackData.LRU;t.length>0&&e.term&&e.term.length>0&&(t=t.filter((function(t){return t.label.toLowerCase().startsWith(e.term.toLowerCase())})));var a=!0,n=t.concat(e.callbackData.names).concat(e.callbackData.ids).concat(e.callbackData.pdbIDs);0===n.length&&(e.term&&e.term.length>0?n=[{label:"No structures for: "+e.term,value:0}]:a=!1),e.cacheProteinSynonyms[e.proteinSynonymOrgId]=n,a&&(e.collectResponsevalues=n)},nameCallback:function(e){var t,a=this;t=e.map((function(e){return{label:e.Synonym,suffix:null,value:e.Synonym,type:"Synonym",category:"Names",id:e.Primary_Accession,organism:e.Organism_ID}})),t.sort((function(e,t){return e.label>t.label?1:-1})),t.reduce((function(e,t){var a=e,n=t;return a&&a.value===n.value&&(a.dup||(a.suffix=a.id,a.dup=!0),n.dup||(n.suffix=n.id,n.dup=!0)),t}),null),a.callbackData.names=t,a.collectResponse()},idCallback:function(e){var t,a=this;t=e.map((function(e){var t=e.Source_Field;return"AC"!==t&&"ID"!==t||(t="UniProt"),{label:e.Synonym,suffix:t,value:e.Synonym,type:t,category:"Identifiers",id:e.Primary_Accession}})),t.sort((function(e,t){return e.label>t.label?1:-1})),a.callbackData.ids=t,a.collectResponse()},pdbCallback:function(e){var t,a=this;t=e.map((function(e){return{label:e.Synonym,suffix:"PDB",type:"PDB",value:e.Synonym,category:e.Category,id:e.Synonym}})),a.callbackData.pdbIDs=t,a.collectResponse()}}}),ue=le,de=Object(P["a"])(ue,oe,ce,!1,null,null,null),he=de.exports,pe={components:{SearchOrganism:ie,SearchProtein:he},name:"SearchPanel",data:function(){return{search:a("20d9")}},methods:{fillin:function(e){document.getElementById("protein_syn_input").value=e,setTimeout((function(){window.location.href="/P04637"}),300)},selectOrganism:function(e){},placeholderText:function(e,t){var a=document.querySelector("#organism_syn_input"),n=document.querySelector("#protein_syn_input");a.placeholder=e,a.setAttribute("size",a.getAttribute("placeholder").length),n.placeholder=t,n.setAttribute("size",n.getAttribute("placeholder").length),J()("#organism_syn_input").focus((function(){J()(this).attr("placeholder","Specify an organism"),a.setAttribute("size",a.getAttribute("placeholder").length)})).blur((function(){J()(this).attr("placeholder",e),a.setAttribute("size",a.getAttribute("placeholder").length)})),J()("#protein_syn_input").focus((function(){J()(this).attr("placeholder","Specify a protein"),n.setAttribute("size",n.getAttribute("placeholder").length)})).blur((function(){J()(this).attr("placeholder",t),n.setAttribute("size",n.getAttribute("placeholder").length)}))}}},me=pe,fe=(a("a01c"),Object(P["a"])(me,Z,W,!1,null,null,null)),ge=fe.exports,ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"scrollable",attrs:{"data-intro":"UniProt summary of the specified protein's function.","data-position":"right"}},[e._m(0),e.uniprotDesc?a("div",{attrs:{id:"uniProtDesc"}}):e._e(),e._l(e.descriptions,(function(t,n){return a("div",{key:n,staticClass:"expandable"},[a("expandable-text-line",{attrs:{"use-hover":""},domProps:{innerHTML:e._s("<strong>"+t[0]+"</strong>:"+t[1])}})],1)}))],2)},ye=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"none"},attrs:{id:"gsyns"}},[a("p",[e._v("Genes:  ")])])}],we=(a("a4d3"),a("e01a"),a("5319"),a("02a1")),Ae={name:"AboutUniprot",components:{ExpandableTextLine:we["a"]},data:function(){return{uniprotDesc:null,sections:[],descriptions:[],a:[1,2,3],tightSections:[],desc:null,list:[]}},mounted:function(){var e=this;e.waitForElement()},methods:{waitForElement:function(){var e=this;window.AQUARIA.structures2match.sequences&&window.AQUARIA.structures2match.sequences[0]?(e.uniprotDesc=window.AQUARIA.structures2match.sequences[0].description,e.updateUniprotInfo(e.uniprotDesc)):setTimeout(e.waitForElement,50)},updateUniprotInfo:function(e){var t=this;t.list=[],t.tightSections=[];var a=/\n[A-Z ]+:.*?$/;function n(){if(e&&e.length>0){var r=e.match(a);null!==r?(t.sections.unshift(r[0].split(": ")),e=e.replace(r[0],""),n()):t.sections.unshift(e.split(": "))}}function r(e){for(var a=null,n=0;n<e.length;n++)if(n<e.length-2){var r=e[n][0],s=e[n+1][0];if(s===r)null===a&&(a="<ul>"),a+="<li>"+e[n][1]+"</li>";else if(null===a)t.tightSections.push(e[n]);else{a+="<li>"+e[n][1]+"</li></ul>";var i=[r,a];t.tightSections.push(i),a=null}}else null===a?t.tightSections.push(e[n]):(a+="<li>"+e[n][1]+"</li></ul>",i=[r,a],t.tightSections.push(i),a=null);return t.tightSections}n(),this.sections.forEach((function(e){if(-1!==e[1].indexOf("URL=")){var t="",a="",n="",r="",s=e[1].split(";");s.forEach((function(e){e=e.split("="),-1!==e[0].indexOf("URL")&&(a=e[1]),-1!==e[0].indexOf("Name")&&(n=e[1]),-1!==e[0].indexOf("Note")&&(r=e[1])})),t="<a href="+a+' title="'+r+'" target="_blank">'+n+"</a>",e[1]=t}}));var s=r(t.sections);s.forEach((function(e){var a="";if(e.length>2){for(var n=1;n<e.length;n++)a=a+" "+e[n];e[1]=a}t.list.push(e)})),t.descriptions=t.list}}},be=Ae,_e=(a("bf44"),Object(P["a"])(be,ve,ye,!1,null,"6151a527",null)),Se=_e.exports,Ie={name:"Sequence",components:{SearchPanel:ge,AboutUniprot:Se}},xe=Ie,Ce=Object(P["a"])(xe,G,z,!1,null,null,null),Re=Ce.exports,ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"panel overlay about level3",attrs:{id:"Alignment"}},[a("div",{staticClass:"scrollable"},[e.data.alignment?a("p",{staticClass:"spacer"},[e._v(" ")]):e._e(),a("p",[e._v("What you see in the 3D viewer is the experimentally-determined structure of "+e._s(e.pdbName)+" from "),a("a",{attrs:{href:"http://www.rcsb.org/pdb/explore.do?structureId={{}}",target:"_blank"}},[e._v(" PDB entry "+e._s(e.pdbId))]),e._v(" chain "+e._s(e.chainId)+". ")]),a("p",[e._v(" The full-length sequence of the protein you specified ("+e._s(e.uniprotName)+") has been aligned onto the sequence used to determine this PDB structure.")]),a("p",[e._v(" Overall, the two sequences align with "+e._s(e.score)+"% identity; any amino acid substitutions are indicated using dark coloring (see legend).")]),a("p",{staticClass:"quality"},[e._v(" This alignment has an HHblits E-value of "+e._s(e.evalueString)+" × "),a("nobr",[e._v("10"),a("sup",[e._v(e._s(e.power))])]),e._v(", which is considered to be "+e._s(e.quality)+". Based on cross-validation, the likelihood that your specified protein ("+e._s(e.uniprotName)+") adopts a structure similar to that shown is estimated to be "+e._s(e.precisiontxt)+"%.")],1),a("p",[e._v("Note that the structure shown is taken directly from the PDB; it has not been derived by ab-initio or comparative modeling.")]),e.data.alignment?a("div",[a("p",[a("b",[e._v("Alignment:")]),a("br"),a("pre",[e._v(e._s(e.data.alignment))])])]):e._e()])])},Pe=[],Ee=(a("25f0"),a("5698")),Oe=a.n(Ee),De={name:"AboutAlignment",computed:{data:function(){return{alignment:s["default"].state.alignment}}},data:function(){return{pdbName:null,pdbId:null,chainId:null,score:null,qualClass:null,evalueString:null,quality:null,uniprotName:null,precisiontxt:null,power:null}},beforeMount:function(){var e=this;window.AQUARIA.explainTitle=function(t,a,n,r,s,i,o){var c;e.pdbName=n,e.pdbId=r,e.chainId=s,e.score=i,e.uniprotName=a,c=-Math.log(o)/Math.LN10;var l=100*e.BioScience_PlantDisease_Weibull_model(c);l=Math.round(l),e.evalueString=o.toString().split("e")[0],e.power=o.toString().split("e")[1],e.precisiontxt=0===o&&1===l?"close to 100":"≥ "+l,o>1e-71?(e.quality="in the twilight zone",e.qualClass="twilight"):(e.quality="high quality",e.qualClass="high")}},methods:{BioScience_PlantDisease_Weibull_model:function(e){var t;t=0;var a=-2.903935098912483,n=7.984666145922813,r=.4478023883120025;return t=1-Math.exp(-1*Math.pow((e-a)/n,r)),t},showBubble:function(e){0===document.getElementsByClassName("dimmer").length&&x["overlay"](),J()("span#help3D.roundButton").css("background-position","0 -21px"),document.querySelector("div.dimmer").addEventListener("click",(function(){J()("div.popup, div.dimmer").fadeOut().remove(),J()("span#help3D.roundButton").css("background-position","0 0")}));var t="<div class='balloon'><h3>3D View Explained<span class='x'>&nbsp;</span></h3>";t=t+e+"</div>",Oe.a.select("body").append("div").attr("class","popup top").html(t);var a=J()("#help3D").offset(),n=parseInt(a.left-230),r=parseInt(a.top+30);J()("div.popup").css({left:n+"px",top:r+"px"}).draggable().fadeIn(600),J()("span.x").click((function(){J()("div.popup, div.dimmer").fadeOut().remove(),J()("span#help3D.roundButton").css("background-position","0 0")}))},resetSelection:function(){document.querySelectorAll("#titlebar span").forEach((function(e){e.className="titlepanel"})),document.querySelectorAll(".contents").forEach((function(e){e.style.display="none"}))}},mounted:function(){this.resetSelection()}},Me=De,Te=(a("8a17"),Object(P["a"])(Me,ke,Pe,!1,null,"0e3c182a",null)),Be=Te.exports,Le=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},qe=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"panel overlay about level3",attrs:{id:"Structure"}},[a("div",{staticClass:"scrollable",attrs:{id:"description","data-intro":"PDB summary for the shown structure.","data-position":"bottom"}},[a("span",{staticClass:"content",attrs:{id:"description","data-intro":"PDB summary for the shown structure.","data-position":"bottom"}},[a("span",{staticStyle:{display:"none"},attrs:{id:"biounitDisplay"}},[a("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitLeft",title:"Navigate to other assemblies"}},[e._v("<")]),e._v("  "),a("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitType"}},[e._v("biounit")]),e._v("  "),a("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitCount"}},[e._v("x/x")]),e._v("   "),a("span",{staticStyle:{display:"inline-block"},attrs:{id:"biounitRight",title:"Navigate to other assemblies"}},[e._v(">")]),a("a",{attrs:{id:"helpBiounit",href:"https://pdb101.rcsb.org/learn/guide-to-understanding-pdb-data/biological-assemblies#Anchor-BioUnit",target:"_blank",title:"Go to PDB to view explanation of assembly"}},[a("span",{staticClass:"help roundButton"})])]),a("span",{staticStyle:{display:"none"},attrs:{id:"aboutPDBHider","data-intro":"PubMed Information about PDB structure","data-position":"left"}},[a("p",{attrs:{id:"classification"}},[e._v("Classification unavailable")]),a("h4",{attrs:{id:"reference_title"}},[e._v("Title unavailable")]),a("p",{attrs:{id:"reference_link"}},[a("a",{attrs:{href:"#"}},[e._v("PubMed Link unavailable")])]),a("p",{attrs:{id:"molecule",title:"View this structure in Aquaria","data-intro":"Information about currently focused PDB chain.","data-position":"left"}},[a("strong",[e._v("Molecule: ")]),a("span",{staticClass:"text"},[e._v("unavailable")])])]),a("p",{attrs:{id:"organism"}},[a("strong",[e._v("Organism: ")]),a("span",{staticClass:"text"},[e._v("unavailable")])]),a("p",{attrs:{id:"small_molecules"}},[a("strong",[e._v("Small molecules: ")]),a("span",{staticClass:"text"},[e._v("unavailable")])]),a("p",{attrs:{id:"method"}},[a("strong",[e._v("Method: ")]),a("span",{staticClass:"text"},[e._v("unavailable")])]),a("p",{attrs:{id:"resolution"}},[a("strong",[e._v("Resolution: ")]),a("span",{staticClass:"text"},[e._v("unavailable")])]),a("p",{attrs:{id:"pdb"}},[a("strong",[e._v("Protein Data Bank: ")]),a("span",{staticClass:"text"},[e._v("unavailable")])])])])])}],Ue={name:"AboutPdb"},Ve=Ue,Fe=(a("f760"),Object(P["a"])(Ve,Le,qe,!1,null,"01dba514",null)),Ne=Fe.exports,Qe=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},je=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"structure-viewer"}},[a("span",{attrs:{id:"threeDSpan"}})])}],He={name:"StructureViewer",mounted:function(){function e(){var e=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(!navigator.platform)return!1;while(e.length)if(navigator.platform===e.pop()||screen.width>=300&&screen.width<=600)return!0}var t=e();if(t){var a=Math.max(window.innerHeight),n=document.body;document.addEventListener("scroll",(function(e){var t=Math.max(window.innerHeight);t-50>a?n.classList.contains("ios-toolbar")||n.classList.add("ios-toolbar"):n.classList.contains("ios-toolbar")&&n.classList.remove("ios-toolbar")}))}}},Ge=He,ze=(a("88de"),Object(P["a"])(Ge,Qe,je,!1,null,null,null)),Ze=ze.exports,We=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"tabs rel level3"},[a("div",{staticClass:"tab",attrs:{id:"Structures"},on:{click:e.renderClusters}},[a("a",{attrs:{href:"#Structures"}},[a("span",{staticClass:"icon"},[a("img",{attrs:{src:e.MS}})]),e._v("  Matching Structures  "),e.getStructCount>0?a("span",{staticClass:"counter"},[e._v(" "+e._s(e.getStructCount.toLocaleString()))]):e._e()])]),a("MatchingStructures"),a("div",{staticClass:"tab",attrs:{id:"Features"},on:{click:e.storeHash}},[a("a",{attrs:{href:"#Features"}},[a("span",{staticClass:"icon"},[a("img",{attrs:{src:e.FT}})]),e._v("  Features  "),a("span",{staticClass:"counter",attrs:{id:"featureCounter"}})])]),a("Features")],1)])},Ye=[],Je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"panel"},[a("a",{staticClass:"close intab",attrs:{href:e.data.hash},on:{click:e.closeTab}}),e._m(0),a("TreeView",{directives:[{name:"show",rawName:"v-show",value:e.showTree,expression:"showTree"}],staticClass:"level5",attrs:{id:"treeView",treeReady:e.prop,count:e.count,coordinates:e.treeCoordinates,parentElem:e.parentElem}}),a("NodeLoader",{directives:[{name:"show",rawName:"v-show",value:e.showLoader,expression:"showLoader"}],attrs:{coordinates:e.treeCoordinates,change:e.change}})],1)},$e=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"vis"}},[a("div",{attrs:{id:"allclusters","data-intro":"Visual summary of all structures in PDB matching the specified protein, grouped by region of match.","data-position":"left"}})])}],Xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"scrim level6",on:{click:e.hideTree}}),a("div",{staticClass:"level7",attrs:{id:"arc"}})])},Ke=[],et=a("2909"),tt=(a("4d63"),a("c607"),a("2c3e"),a("a434"),a("841c"),a("00b4"),a("9f50")),at=a("fae8"),nt=a("7792"),rt=a("5a2b"),st=10,it=450,ot=450,ct=14,lt=new RegExp(/(p\.)?[A-Za-z]+[0-9]+[A-Za-z\*\_\?\[\]\(\)\%\=\.]+/),ut={name:"TreeView",props:["treeReady","count","coordinates","parentElem"],data:function(){return{pdbs:[],up:a("31c8"),down:a("62bc")}},computed:Object(I["a"])({},Object(C["b"])(["getGene","getOrganism","getMatches"])),watch:{treeReady:function(e,t){var a=this;a.coordinates.clientX+it+5>=window.innerWidth?document.querySelector(a.parentElem+" #arc").style.left=window.innerWidth-it-5+"px":document.querySelector(a.parentElem+" #arc").style.left=a.coordinates.clientX+"px",document.querySelector(a.parentElem+" #arc").style.top=a.coordinates.clientY-400+"px",!0===this.$parent.showLoader?this.$parent.showLoader=!1:this.$parent.showTree=!1,console.log(a.count),console.log("Prop changed: ",e," | was: ",t);var n=e,r=n[0];if(Ee["selectAll"](a.parentElem+" #arc > *").remove(),n.length>st){var s=a.chunk(n,st);a.generateArc(s,r,0)}else a.generateArc(n,r)}},methods:{hideTree:function(){s["default"].commit("setTreeData",null),this.$parent.showTree=!1},nodeClick:function(e){var t=this,a=e[2].children[0],n=0;if(a.name=e[2].label,a.length=e[2].children.length,e[2].children.length>st){var r=t.chunk(e[2].children,st);t.generateArc(r,a,n)}else n+=1,this.generateArc(e[2].children,a)},chunk:function(e,t){var a,n=[];e=(a=[]).concat.apply(a,Object(et["a"])(e));while(e.length)n.push(e.splice(0,t));return n},reversePdbArray:function(e){var t=[];return e.forEach((function(e){t.unshift(e)})),t},generateArc:function(e,t,a){var n,r,s,i,o,c=this,l=60;if(void 0!==a?(o=e,r=o[a]):(o=c.reversePdbArray(e),r=o),Object.prototype.hasOwnProperty.call(r[0],"children")){void 0!==a&&null!==document.querySelector("svg#tree")&&document.querySelector("svg#tree").remove();var u=Ee["select"](c.parentElem+" #arc").append("svg").attr("id","tree").attr("width",it).attr("height",ot);i=c.createLinks(u,"parent",o,t,a)}else document.querySelectorAll("outerElem").forEach((function(e){return e.remove()})),document.querySelectorAll("[id^=children_]").forEach((function(e){return e.parentNode.removeChild(e)})),u=Ee["select"](c.parentElem+" #arc").append("svg").attr("id","children_"+r[0].pdb_id+"_"+a).attr("width",it).attr("height",ot),i=c.createLinks(u,"child",o,t,a);if(s=i.nodes,u=i.svg,Object.prototype.hasOwnProperty.call(r[0],"children")?(s.shift(),n=Ee["select"]("svg#tree").selectAll("g#gParent").data(s).enter()):(t.dx=s[1][0]-l,t.dy=s[1][1]-ct/2,s.push([s[1][0]-l,s[1][1],t,"parent"]),document.querySelector("#tree").classList.add("hide"),s.shift(),n=Ee["select"]("svg#children_"+r[0].pdb_id+"_"+a).selectAll("g").data(s).enter()),n=n.append("g").attr("class",(function(e,t){if(e.length>1)return Object.prototype.hasOwnProperty.call(e[2],"children")?"outerElem":"innerElem"})).attr("id",(function(e,t){if(e.length>1)return Object.prototype.hasOwnProperty.call(e[2],"children")?"out_"+e[2].children[0].pdb_id:void 0!==e[3]&&e[3].includes("parent")?"parentNode":"in_"+e[2].pdb_id})).attr("width",ct).attr("height",ct).on("click",(function(e,t){if(t>=0)if(Object.prototype.hasOwnProperty.call(e[2],"children"))c.nodeClick(e);else if(void 0===e[3]){var a=window.location.search;history.pushState("",document.title,"/"+c.getOrganism+"/"+c.getGene+"/"+e[2].pdb_id+"/"+e[2].pdb_chain+a),document.querySelectorAll(".coverage_map_container").forEach((function(e){e.remove()})),c.getMatches.clusters.forEach((function(t,a){if(t.members.length>1)t.members.forEach((function(n){if(n.pdb_id===e[2].pdb_id&&n.pdb_chain[0]===e[2].pdb_chain)return window.AQUARIA.display_member(n),window.AQUARIA.showMatchingStructures.selectCluster(t,a),null}));else if(t.members[0].pdb_id===e[2].pdb_id&&t.members[0].pdb_chain[0]===e[2].pdb_chain)return t.E_value=t.members[0].E_value,window.AQUARIA.display_member(t),window.AQUARIA.showMatchingStructures.selectCluster(t,a),window.AQUARIA.showMatchingStructures.drawCoverageMap(t),null})),lt.test(a)&&c.waitForElement()}else document.querySelector("#tree").classList.remove("hide"),document.querySelectorAll("[id^=children_]").forEach((function(e){return e.parentNode.removeChild(e)}))})),Object.prototype.hasOwnProperty.call(r[0],"children"))n.append("rect").attr("transform",(function(e){return"translate("+e[0]+","+(e[1]-ct/2)+")"})).attr("class","label").attr("width",(function(e,t){return e[2].children?e[2].children.length>9?32:26:0})).attr("height",(function(e,t){return e[2].children?16:0})).attr("rx",6).attr("fill","#a3a3a3").attr("stroke","none");else{var d=Ee["select"]("g#parentNode").selectAll("g").data([t]).enter();d.append("text").attr("x",(function(e){return e.dx-40-20})).attr("dy",(function(e){return e.dy+40})).attr("class","nbr_label").text((function(e){return e.name.length>15?e.name.substr(0,15)+"...":e.name})).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500),d.append("rect").attr("transform",(function(e){return"translate("+e.dx+","+e.dy+")"})).attr("class","label").attr("width",(function(e,t){return e.length?e.length>9?32:26:0})).attr("height",16).attr("rx",6).attr("fill","#a3a3a3").attr("stroke","none"),d.append("text").attr("x",(function(e){return e.dx+ct+2})).attr("dy",(function(e){return e.dy+ct-1})).attr("class","nbr_label").text((function(e){return e.length})).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500)}n.append("circle").attr("cx",(function(e){return e[0]})).attr("cy",(function(e){return e[1]})).attr("r",ct).style("fill","white").style("stroke","#999999").style("stroke-width","1"),n.append("clipPath").attr("id","clip_"+function(e,t){return t}).append("circle").attr("cx",(function(e){return e[0]})).attr("cy",(function(e){return e[1]})).attr("r",ct).attr("clip-rule","evenodd"),n.append("image").attr("width",2*(ct-1)+"px").attr("height",2*(ct-1)+"px").attr("x",(function(e){return e[0]-13})).attr("y",(function(e){return e[1]-13})).attr("clip-path",(function(e,t){var a=" ";return e[2].pdb_id&&(a="url(#clip_"+e[2].pdb_id+")"),e[2].children&&e[2].children[0].pdb_id&&(a="url(#clip_"+e[2].children[0].pdb_id+")"),a})).attr("xlink:href",(function(e,t){var a=" ";return e[2].pdb_id&&"undefined"===typeof e[2].children&&(a=e[2].pdb_id.toUpperCase()),e[2].children&&e[2].children[0].pdb_id&&(a=e[2].children[0].pdb_id.toUpperCase())," "===a?" ":"https://www.ebi.ac.uk/pdbe/static/entry/"+a.toLowerCase()+"_assembly_1_chain_front_image-200x200.png"})),n.append("text").attr("x",(function(e){return e[0]+ct+2})).attr("dy",(function(e){return e[1]+ct/2-1})).attr("class","nbr_label").text((function(e,t){if(e[2].label&&"undefined"!==e[2].label){var a=e[2].label;return e[2].label.length>30&&(a=e[2].label.substr(0,15)+" ... "+e[2].label.substr(e[2].label.length-15)),e[2].children?e[2].children.length+"      "+a:" "}if(void 0===e[3])return e[2].pdb_id+"-"+e[2].pdb_chain})).attr("title",(function(e,t){return e[2].label_long?e[2].label_long:e[2].label})).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500)},createLinks:function(e,t,a,n,r){var s,i=[],o=0,c=[],l={},u=this,d=40;void 0!==r?(s=a[r],s=u.reversePdbArray(s)):s=a,"child"===t&&(o=60);var h=ot-d;c.push([10,h]);for(var p=0;p<s.length;p++)c.push([80+o,h-p*d]),c[p+1].push(s[p]);if(i.push(tt["a"]()({source:c[0],target:c[1]})),s.length>1){var m=[{xpoint:30+o,ypoint:h},{xpoint:45+o,ypoint:h-10},{xpoint:47+o,ypoint:h-20}],f=at["a"]().x((function(e){return e.xpoint})).y((function(e){return e.ypoint})).curve(nt["a"]);e.append("path").attr("d",f(m)).attr("fill","none").attr("class",(function(){return"outerElem"})).attr("stroke","#76c276").style("stroke-width",2);for(var g=2;g<c.length;g++){var v=[{xpoint:47+o,ypoint:c[g][1]+10},{xpoint:55+o,ypoint:c[g][1]},{xpoint:80+o,ypoint:c[g][1]}];e.append("path").attr("d",f(v)).attr("fill","none").attr("stroke","#76c276").style("stroke-width",2).attr("class",(function(e){return"outerElem"}))}e.append("line").style("stroke","#76c276").style("stroke-width",2).attr("x1",47+o).attr("y1",h+10-(c.length-2)*d).attr("x2",47+o).attr("y2",h-20).attr("class",(function(){return 1===t?"outerElem":"innerElem"}))}return e.append("path").attr("d",i).attr("stroke","#76c276").attr("fill","none").style("stroke-width",2),a.length>1&&(r+1<a.length&&(e.append("circle").attr("cx",80+o).attr("cy",h+30).attr("r",10).style("fill","#00b2ff"),e.append("image").attr("width","18px").attr("height","18px").attr("x",80+o-9).attr("y",h+21).attr("xlink:href",u.down).on("click",(function(){r<a.length-1&&u.generateArc(a,n,r+1)})),e.append("text").attr("x",95+o).attr("dy",h+35).attr("class","nbr_label").text("Next "+a[r+1].length).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500)),r+1>1&&(e.append("circle").attr("cx",80+o).attr("cy",ot-c.length*d+10).attr("r",10).style("fill","#00b2ff"),e.append("image").attr("width","18px").attr("height","18px").attr("x",80+o-9).attr("y",ot-c.length*d+1).attr("xlink:href",u.up).on("click",(function(){r-1>=0&&u.generateArc(a,n,r-1)})),e.append("text").attr("x",95+o).attr("dy",ot-c.length*d+ct).attr("class","nbr_label").text("Previous").attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500))),e.append("rect").attr("x",0).attr("y",400).attr("rx",6).attr("ry",6).attr("width",u.coordinates.width+2).attr("height",u.coordinates.height).style("fill","orange").attr("class","handle").on("click",(function(){u.hideTree()})),e.append("text").attr("x",3).attr("dy",415).attr("class","nbr_label").text(u.count).attr("text-anchor","start").style("fill-opacity",1).style("fill","white").style("font-weight",500),l.nodes=c,l.links=i,l.svg=e,l},waitForElement:function(){var e=this;window.AQUARIA.addedFeature=!0,"none"!==document.getElementById("waitingFrame").style.display?setTimeout(e.waitForElement,5):(window.AQUARIA.passFeature(window.AQUARIA.customfeatureSet,window.AQUARIA.customfeatureSetioid),rt["createFeatureMap"](window.AQUARIA.customfeatureSet),Ee["selectAll"]("svg.loaded rect.feature").attr("fill","#a4abdf"),Ee["select"]("svg.loaded").classed("loaded",!1))}}},dt=ut,ht=(a("41b6"),Object(P["a"])(dt,Xe,Ke,!1,null,null,null)),pt=ht.exports,mt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"scrim level6",attrs:{id:"nodeLoader"},on:{click:e.hideLoader}},[a("img",{attrs:{src:e.loader}})])},ft=[],gt={name:"NodeLoader",data:function(){return{loader:a("ae7d")}},props:["coordinates","change"],watch:{change:function(e,t){var a=this;document.querySelectorAll("#nodeLoader > img").forEach((function(e){e.style.marginLeft=a.coordinates.clientX+"px",e.style.marginTop=a.coordinates.clientY-10+"px"}))}},methods:{hideLoader:function(){this.$parent.showLoader=!1,this.$parent.showTree=!1}}},vt=gt,yt=(a("d2f8"),Object(P["a"])(vt,mt,ft,!1,null,"d0db7e78",null)),wt=yt.exports,At={name:"MatchingStructures",components:{TreeView:pt,NodeLoader:wt},data:function(){return{showTree:!1,prop:null,count:0,treeCoordinates:{},change:0,showLoader:!1,parentElem:".panel"}},watch:{sequence:function(e,t){t.accession!==e.accession&&null!==t.accession&&window.scrollBy(0,100)},treeData:function(e){var t=this;if(null!==e){t.change=t.change+1;var a=t.getTreeCoordinates;t.treeCoordinates.clientX=a.left,t.treeCoordinates.clientY=a.top,t.treeCoordinates.width=a.width,t.treeCoordinates.height=a.height,t.showLoader=!0;var n="".concat(window.BACKEND,"/get_secondary_clusters/");n=n+t.getStructure.accession+"/"+t.getStructure.pdb+"/"+t.getStructure.chain+"/"+e,ee()({method:"get",url:n}).then((function(e){t.showTree=!0,t.prop=e.data,t.count=0,e.data.forEach((function(e){t.count+=e.children.length}))}))}else t.showTree=!1}},computed:Object(I["a"])({data:function(){return{hash:s["default"].state.hash,prop:null}},sequence:function(){return s["default"].state.structure},treeData:function(){return s["default"].state.treeData}},Object(C["b"])(["getMatches","getTreeCoordinates","getStructure"])),methods:{closeTab:function(){window.scrollBy(0,100),x["hidePanels"]()}},mounted:function(){var e=this;if(e.getMatches&&Object.hasOwnProperty.call(e.getMatches,"clusters"))for(var t=document.querySelectorAll("[id ^= structure_] > text"),a=0;a<t.length;a++)t[a].addEventListener("click",(function(){var e=this.parentElement.id;console.log(e)}))}},bt=At,_t=(a("3cb4"),Object(P["a"])(bt,Je,$e,!1,null,null,null)),St=_t.exports,It=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"panel"},[a("a",{staticClass:"close",attrs:{href:"#"},on:{click:e.closeTab}}),a("div",{attrs:{id:"featurePanel"}})])},xt=[],Ct=a("53ca"),Rt=a("2ef0"),kt=a.n(Rt),Pt={name:"Features",data:function(){return{jAlignment:null,jController:null}},methods:{closeTab:function(){window.scrollBy(0,100),x["hidePanels"]()},clearResidues:function(){window.AQUARIA.panel3d.embededJolecule.controller.clearSelectedResidues()},showSideChains:function(e){var t=this;this.jAlignment=window.AQUARIA.panel3d.joleculeAlignment,this.jController=window.AQUARIA.panel3d.embededJolecule.controller,e.forEach((function(e){t.resSideChain(e)})),this.jController.soupView.isUpdateSidechain=!0,this.jController.soupView.isChanged=!0},resSideChain:function(e){var t=e.split(".")[0],a=this,n="object"===Object(Ct["a"])(a.$store.state.structure.chain)?a.$store.state.structure.chain[0]:a.$store.state.structure.chain;if(t.includes("-")){var r=parseInt(t.split("-")[0].replace(/\D/g,"")),s=parseInt(t.split("-")[1].replace(/\D/g,""))+1;kt.a.range(r,s).forEach((function(e){a.sideChainOn(e,n)}))}else t.includes(",")?t.split(",").forEach((function(e){e=parseInt(e.replace(/\D/g,"")),a.sideChainOn(e,n)})):(t=parseInt(t.replace(/\D/g,"")),a.sideChainOn(t,n))},sideChainOn:function(e,t){e=this.jAlignment.mapSeqResToPdbResOfChain(0,e,t);var a=this.jController.soup.findResidueIndices(0,t,e[2])[0];this.jController.soup.getResidueProxy().load(a).sidechain=!0}},watch:{Loader:function(e){var t=this;if(!e&&null!==t.sideChain){var a=new L["a"](window.AQUARIA.panel3d.embededJolecule);a.addEventListener("viewcommit",(function(){return t.showSideChains(t.sideChain)}))}}},computed:{Loader:function(){return s["default"].state.Loader},sideChain:function(){return s["default"].state.sidechain}}},Et=Pt,Ot=(a("fc7c"),Object(P["a"])(Et,It,xt,!1,null,null,null)),Dt=Ot.exports,Mt={name:"Tabs",components:{MatchingStructures:St,Features:Dt},data:function(){return{MS:a("39b5"),FT:a("9db5")}},computed:Object(I["a"])({},Object(C["b"])(["getStructCount","getMatches"])),methods:{storeHash:function(){""===window.location.hash?s["default"].commit("setHash","#(0,0,0)"):s["default"].commit("setHash",window.location.hash)},renderClusters:function(){if(this.storeHash(),!document.querySelector(".outer_container")){for(var e=this.getMatches.clusters,t=0;t<e.length;t++)window.AQUARIA.showMatchingStructures.addCluster(e[t]);window.AQUARIA.showMatchingStructures.updateSizes(this.getMatches.clusters)}},onTextClick:function(e,t){var a=parseInt(e.attr("id").substr(15));s["default"].commit("setTreeData",a),s["default"].commit("setTreeCoordinates",t)},showPanel:function(e,t){document.querySelector("#"+e).style.display="block",document.querySelectorAll(".tab").className="tab inactive",document.querySelector("#"+t).className="tab active"},showMatches:function(){var e=this;if(window.AQUARIA.panel3d){var t=window.AQUARIA.panel3d.embededJolecule.controller;t.clearSelectedResidues()}e.showPanel("vis","Structures"),x["hidePanel"]("featurePanel","Features"),0===document.getElementsByClassName("dimmer").length&&x["overlay"](),document.querySelector("div.dimmer").className+=" level0",document.querySelector("div.dimmer").addEventListener("click",(function(){x["hidePanels"]()}))},showFeatures:function(){var e=this;if(window.AQUARIA.panel3d){var t=window.AQUARIA.panel3d.embededJolecule.controller;t.clearSelectedResidues()}x["hidePanel"]("vis","Structures"),e.showPanel("featurePanel","Features"),0===document.getElementsByClassName("dimmer").length&&x["overlay"](),document.querySelector("div.dimmer").className+=" level0",document.querySelector("div.dimmer").addEventListener("click",(function(){document.querySelector("a.close").click(),x["hidePanels"]()}))}},mounted:function(){var e=this;window.addEventListener("hashchange",(function(){window.location.hash.includes("Structures")&&e.showMatches(),window.location.hash.includes("Features")&&e.showFeatures()}))}},Tt=Mt,Bt=(a("4e1a"),Object(P["a"])(Tt,We,Ye,!1,null,"86747f6e",null)),Lt=Bt.exports,qt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"rel",attrs:{id:"map"}},[a("FeatureMap",{attrs:{drawFeature:e.drawFeature}}),e.showLoader?a("mapLoader"):e._e()],1)},Ut=[],Vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"featureMap"}})},Ft=[],Nt=(a("b64b"),{name:"FeatureMap",props:["drawFeature"],data:function(){return{seqLength:0,scale:null,coverageMapsrw:0,residueColor:null}},computed:Object(I["a"])({feature:function(){return s["default"].state.feature}},Object(C["b"])(["getVariantResidues","getFeature"])),watch:{drawFeature:function(){var e=this;null===e.getFeature.set?document.querySelectorAll('[id^="feature_residue_').forEach((function(e){e.remove()})):document.querySelector('[id^="feature_residue_')?(document.querySelectorAll('[id^="feature_residue_').forEach((function(e){e.remove()})),e.drawMap(e.getFeature)):e.drawMap(e.getFeature)}},methods:{drawMap:function(e){var t=this,a=null;this.setScales(),e.set.Tracks[0].forEach((function(e,n){e.start=+e.start,e.end=+e.end,t.drawResidues(e,a)})),this.getVariantResidues&&t.loadPopup(e)},loadPopup:function(e){var t=this,a=Object.keys(this.getVariantResidues)[0],n='[id^="feature_residue_'+a+'"]',r=document.querySelector(n);e.set.Tracks[0].forEach((function(e){if(t.getVariantResidues[e.start]){var a=t.getVariantResidues[e.start];s["default"].commit("setPopupTitle",e.label),s["default"].commit("setPopupText",a),s["default"].commit("setVariantIdx",0),s["default"].commit("setVariant",e.start),null!=r&&s["default"].commit("setPopupCoordinates",r.getBoundingClientRect())}}))},setScales:function(){this.seqLength=window.AQUARIA.structures2match.sequences[0].length,this.scale=Ee["scale"].linear().domain([1,this.seqLength]).range([1,window.innerWidth]),this.coverageMapsrw=this.scale(this.seqLength)/this.seqLength},drawResidues:function(e){for(var t=this,a="",n="",r="",i=e.start;i<=e.end;i++){var o='[id^="residue_'+i+'"]',c=document.querySelector(o),l=document.querySelector(o+"> rect");if(c.id.includes("Dark")?(n=15,r=20):(n=25,r=document.querySelector(o+"> rect").getBoundingClientRect().height),"undefined"!==c&&"undefined"!==l&&null!=c&&null!=l){var u=Ee["select"]("#map > #coverageMap > g");u.append("g").attr("id","feature_residue_"+i+"_"+document.querySelector(o).id.split("_")[3]).append("rect").attr("width",t.coverageMapsrw).attr("height",r).attr("transform",(function(){var e=document.querySelector(o+"> rect").getBoundingClientRect().height;return 18===e?"translate("+(i*t.coverageMapsrw-t.coverageMapsrw)+",17)":14===e?"translate("+(i*t.coverageMapsrw-t.coverageMapsrw)+",19)":19===e?"translate("+(i*t.coverageMapsrw-t.coverageMapsrw)+",16)":"translate("+(i*t.coverageMapsrw-t.coverageMapsrw)+","+n+")"})).attr("fill",e.color).on("mouseover",(function(n){t.residueColor=Ee["select"](this).style("fill"),Ee["select"](this).attr("stroke","white").attr("stroke-width",1),c.id.includes("Dark")?s["default"].commit("setPopupTitle",e.label+": Dark region"):s["default"].commit("setPopupTitle",e.label),e.desc!==e.label?t.getVariantResidues[e.start]?(a=t.getVariantResidues[e.start],s["default"].commit("setPopupText",a),s["default"].commit("setVariantIdx",0),s["default"].commit("setVariant",e.start)):e.desc.length>0?(a=e.desc+" </br> ",a+="Structures with residue "+this.parentElement.id.split("_")[1]+": ",s["default"].commit("setPopupText",a),s["default"].commit("setVariant",-1)):s["default"].commit("setPopupText","Structures with residue "+this.parentElement.id.split("_")[2]+": "):(s["default"].commit("setPopupText","Structures with residue "+this.parentElement.id.split("_")[2]+": "),s["default"].commit("setVariant",-1)),s["default"].commit("setTotalPDBres",this.parentElement.id.split("_")[3]),s["default"].commit("setPopupCoordinates",this.getBoundingClientRect())})).on("mouseout",(function(){Ee["select"](this).attr("stroke",t.residueColor).attr("stroke-width",0)}))}}}}}),Qt=Nt,jt=(a("9b83"),Object(P["a"])(Qt,Vt,Ft,!1,null,null,null)),Ht=jt.exports,Gt=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},zt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"animated"},[a("div",{staticClass:"innerGradient"})])}],Zt={name:"mapLoader"},Wt=Zt,Yt=(a("be77"),Object(P["a"])(Wt,Gt,zt,!1,null,"6934c327",null)),Jt=Yt.exports,$t=50,Xt=200,Kt=[61,28],ea={name:"CoverageMap",components:{FeatureMap:Ht,mapLoader:Jt},data:function(){return{seqLength:0,scale:null,coverageMapsrw:0,residueColor:null,densityScale:null,darkRegions:[],myArray:[1],coverageMapData:null,drawFeature:!1,showLoader:!0,structure:{accession:null},docFrag:null}},computed:Object(I["a"])({feature:function(){return s["default"].state.feature},secondaryStructure:function(){return s["default"].state.secondaryStructure},sequence:function(){return s["default"].state.structure},loader:function(){return s["default"].state.Loader}},Object(C["b"])(["getGene","getStructure","getOneAaCodes","getThreeAaCodes","getFeature"])),watch:{feature:function(e){var t=this;null===e.set?(t.drawFeature=!1,t.selectStructmap(window.AQUARIA.currentMember)):document.querySelector("#map > #coverageMap")?(t.setStructFeatmap(window.AQUARIA.currentMember),t.drawFeature=!0):t.updateUI()},secondaryStructure:function(){var e=this;document.querySelector("#map > #coverageMap")&&e.selectStructmap(window.AQUARIA.currentMember)()},sequence:function(e,t){var a=this;if(t.accession!==e.accession&&null!==t.accession){document.querySelector("#map > #coverageMap").remove(),a.init(e.accession);var n={selector:[e.accession],selectPDB:e.pdb,selectChain:e.chain},r="".concat(window.BACKEND,"/get_3D_alignment");ee()({method:"get",url:r,params:n}).then((function(e){var t=e.data;s["default"].commit("setSecondaryStructure",t.secondary_structure)}))}},loader:function(e){var t=this;if(!e){var a=new L["a"](window.AQUARIA.panel3d.embededJolecule);a.addEventListener("viewcommit",(function(){t.updateUI()}))}}},mounted:function(){this.init(this.$route.params.uniprotAccession)},methods:{updateUI:function(){var e=this;document.querySelector("#map > #coverageMap")||(e.drawMap(e.coverageMapData),document.querySelector("#map").appendChild(e.docFrag),null!==e.getFeature?(e.setStructFeatmap(window.AQUARIA.currentMember),e.drawFeature=!0):e.selectStructmap(window.AQUARIA.currentMember),e.showLoader=!1)},init:function(e){var t=this,a="".concat(window.BACKEND,"/getCoverageMap"),n={selector:[e]};ee()({method:"get",url:a,params:n}).then((function(e){console.log(e.data),t.coverageMapData=e.data}))},drawMap:function(e){var t=this;v=t.renderSVG(),v.append("rect").attr("id","selection"),this.drawLine(v),this.setScales(e),this.drawDarkRegions(e),e.secondaryStructures.forEach((function(a){a.start=+a.start,a.end=+a.end,t.drawResidues(a,e)}))},setScales:function(e){this.seqLength=e.seqLength,this.scale=Ee["scale"].linear().domain([1,this.seqLength]).range([1,window.innerWidth]),this.coverageMapsrw=this.scale(e.seqLength)/e.seqLength;var t=Math.max.apply(Math,Object(et["a"])(e.densityMap));this.densityScale=t<=Xt?Ee["scale"].linear().domain([Math.log(1),Math.log(Xt)]).range(Kt):Ee["scale"].linear().domain([Math.log(1),Math.log(Math.max.apply(Math,Object(et["a"])(e.densityMap)))]).range(Kt)},drawLine:function(e){e.append("line").style("stroke","#434343").attr("x1",1).attr("y1",26).attr("x2",window.innerWidth).attr("y2",26)},renderSVG:function(){this.docFrag=document.createDocumentFragment();var e=Ee["select"](this.docFrag).append("svg").attr("id","coverageMap").attr("height",$t).attr("width","100%").attr("viewBox","0, 0, "+window.innerWidth+","+$t).attr("preserveAspectRatio","none"),t=e.append("g");return t},drawResidues:function(e,t){var a=v,n="",r="",i=this;if("SHEET"===e.Type)var o=18,c=17,l="sheet";else"COIL"===e.Type?(o=14,c=19,l="coil"):(o=19,c=16,l="helix");for(var u=e.start;u<=e.end;u++){var d="hsl(0, 0%,"+i.densityScale(Math.log(t.densityMap[u-1]))+"%)";a.append("g").attr("id","residue_"+u+"_"+e.Type+"_"+t.densityMap[u-1]).append("rect").attr("transform","translate("+(u*i.coverageMapsrw-i.coverageMapsrw)+","+c+")").attr("width",(function(){return i.coverageMapsrw<.5?i.coverageMapsrw+.25:i.coverageMapsrw})).attr("height",o).attr("fill",d).attr("class",l).attr("stroke-width",1).on("mouseover",(function(e){i.residueColor=Ee["select"](this).style("fill"),Ee["select"](this).attr("stroke","white").attr("stroke-width",1);var t=this.parentElement.id.split("_")[1];s["default"].commit("setRes",t);var a=window.AQUARIA.structures2match.sequences[0].sequence[t-1],o=i.getOneAaCodes.indexOf(a),c=i.getThreeAaCodes[o];if(r='<span style="font-weight: 700;">'+i.getGene+"</span> sequence: "+c+"–"+t,this.parentElement.id.includes("active")){var l=window.AQUARIA.panel3d.joleculeAlignment,u=window.AQUARIA.panel3d.embededJolecule.controller,d=l.mapSeqResToPdbResOfChain(0,t,i.getStructure.chain),h=u.soup.findResidueIndices(0,d[1],d[2]),p=u.soup.getResidueProxy().load(h).resType;p=p.substr(0,1)+p.substr(1).toLowerCase(),n=i.getStructure.pdb+"-"+i.getStructure.chain+" structure: "+p+"-"+d[2]+"</br> Structures with residue "+this.parentElement.id.split("_")[1]+": "}else n="Structures with residue "+this.parentElement.id.split("_")[1]+": ";s["default"].commit("setPopupTitle",r),s["default"].commit("setPopupText",n),s["default"].commit("setTotalPDBres",this.parentElement.id.split("_")[3]),s["default"].commit("setPopupCoordinates",this.getBoundingClientRect())})).on("mouseout",(function(){Ee["select"](this).attr("stroke",i.residueColor).attr("stroke-width",0)}))}},selectStructmap:function(e){var t=this;Ee["selectAll"]('[id^="residue_"')[0].map((function(e,a){var n=e.id.split("_")[3];e.id.includes("active")&&(e.id=e.id.split("_active")[0]),Ee["select"](e).select("rect").attr("fill","hsl(0, 0%,"+t.densityScale(Math.log(n))+"%)")}));var a=s["default"].getters.getSecondaryStructure[0],n=e.seq_start[0],r=e.seq_end[e.seq_start.length-1],i=(r-n)*t.coverageMapsrw+t.coverageMapsrw;document.querySelector("#map > #coverageMap > rect")&&document.querySelector("#map > #coverageMap > rect").remove(),Ee["select"]("#map > #coverageMap > g > #selection").attr("width",i).attr("height",30).attr("transform","translate("+(n*t.coverageMapsrw-t.coverageMapsrw)+",11)").attr("fill","white").attr("stroke","#434343").attr("stroke-width",1).attr("rx",6).attr("ry",6),a.map((function(e){if(e.end)var a=e.start,n=e.end,r=e.type;else a=e.split("\n")[0].split(":")[1].split("-")[0],n=e.split("\n")[0].split(":")[1].split("-")[1],r=e.split("\n")[0].split(":")[0];for(var s=a;s<=n;s++){var i='[id^="residue_'+s+'_"]';if(Ee["select"](i+"> rect").attr({fill:t.getStructureColor(r)}),document.querySelector(i))document.querySelector(i).id=document.querySelector(i).id+"_active";else{var o={Type:"COIL"};o.start=s,o.end=s,t.drawResidues(o,t.coverageMapData),document.querySelector(i).id=document.querySelector(i).id+"_active"}}}))},setStructFeatmap:function(e){var t=this;Ee["selectAll"]('[id^="residue_"')[0].map((function(e,a){var n=e.id.split("_")[3];Ee["select"](e).select("rect").attr("fill","hsl(0, 0%,"+t.densityScale(Math.log(n))+"%)")}));var a=s["default"].getters.getSecondaryStructure[0],n=e.seq_start[0],r=e.seq_end[e.seq_start.length-1],i=(r-n)*t.coverageMapsrw+t.coverageMapsrw;document.querySelector("#map > #coverageMap > rect")&&document.querySelector("#map > #coverageMap > rect").remove(),Ee["select"]("#map > #coverageMap > g > #selection").attr("width",i).attr("height",30).attr("transform","translate("+(n*t.coverageMapsrw-t.coverageMapsrw)+",11)").attr("fill","white").attr("stroke","#434343").attr("stroke-width",1).attr("rx",6).attr("ry",6),a.map((function(e){if(e.end)var t=e.start,a=e.end;else t=e.split("\n")[0].split(":")[1].split("-")[0],a=e.split("\n")[0].split(":")[1].split("-")[1];for(var n=t;n<=a;n++){var r='[id^="residue_'+n+'_"]';Ee["select"](r+"> rect").attr({fill:"#cccccc"})}}))},getStructureColor:function(e){return"SHEET"===e?"#f6c719":"COIL"===e?"#6f9e52":"#6491b6"},drawDarkRegions:function(e){var t=[],a=this,n=v;return e.densityMap.forEach((function(t,r){if(0===t){var i=r+1;n.append("g").attr("id","residue_"+i+"_Dark_0").append("rect").attr("transform","translate("+(i*a.coverageMapsrw-a.coverageMapsrw)+",14)").attr("width",(function(){return a.coverageMapsrw<.5?a.coverageMapsrw+.25:a.coverageMapsrw})).attr("height",30).attr("fill","#434343").attr("opacity",0).attr("stroke-width",1).on("mouseover",(function(t){a.residueColor=Ee["select"](this).style("fill"),Ee["select"](this).attr("stroke","white").attr("stroke-width",1),s["default"].commit("setPopupTitle","Residue "+this.parentElement.id.split("_")[1]+" : Dark region"),s["default"].commit("setDensityScore",e.densityMap),s["default"].commit("setPopupText","Structures with residue "+this.parentElement.id.split("_")[1]+": "),s["default"].commit("setTotalPDBres",this.parentElement.id.split("_")[3]),s["default"].commit("setPopupCoordinates",this.getBoundingClientRect())})).on("mouseout",(function(){s["default"].commit("setPopupCoordinates",0),Ee["select"](this).attr("stroke",a.residueColor).attr("stroke-width",0)}))}})),t}}},ta=ea,aa=(a("5d54"),Object(P["a"])(ta,qt,Ut,!1,null,"79308640",null)),na=aa.exports,ra=a("8ac5"),sa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.data.error?a("div",{staticClass:"ErrorPanel overlay level3",attrs:{id:"AboutError"}},[a("a",{staticClass:"close",attrs:{href:"#"},on:{click:e.loadLastSuccess}}),a("div",[a("p",{staticClass:"thetitle"},[e._v(e._s(e.data.error))]),a("p",{staticClass:"intro1"},[e._v(e._s(e.data.errorMsg)+" "),e.data.errorMsg?a("br"):e._e(),e._v(" "),e.data.errorMsg?a("br"):e._e(),e._v(" Press 'Report Issue' to tell the Aquaria team, or press 'OK' to return to previous structure.")]),a("div",[a("md-button",{staticClass:"md-raised md-primary",attrs:{href:e.lastURL}},[e._v("OK")]),a("md-button",{staticClass:"md-raised md-primary",attrs:{href:e.issuesURL,target:"_blank"}},[e._v("Report Issue")])],1)])]):e._e()},ia=[],oa={name:"Errors",data:function(){return{issues:"",title:"",changes:"https://github.com/aqclient/dev.aqclient.github.io/issues/new?labels=enhancement",logo:a("3198")}},computed:{data:function(){return{message:s["default"].state.message,error:s["default"].state.error,errorMsg:s["default"].state.errorMsg}},issuesURL:function(){return'https://github.com/aqclient/dev.aqclient.github.io/issues/new?title=Problem with this page&labels=bug&body=<a href="'+encodeURIComponent(window.location.href)+'">'+this.data.error+"</a>"},pageUrl:function(){return window.location.href},lastURL:function(){return window.location.origin}},methods:{loadLastSuccess:function(){window.location.pathname=localStorage.getItem("LastSuccess")?localStorage.getItem("LastSuccess"):"/P04637"}}},ca=oa,la=(a("715b"),Object(P["a"])(ca,sa,ia,!1,null,"72919d45",null)),ua=la.exports,da=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"HelpPanel hide dialouge-window overlay level7",attrs:{id:"UserHelp"}},[a("a",{staticClass:"close",attrs:{href:"#"},on:{click:e.closeHelp}}),a("div",{staticClass:"fill",attrs:{id:"fullwindow-video"}},e._l(e.videos,(function(t){return a("youtube",{key:t.id,ref:"youtube",refInFor:!0,staticClass:"hide",attrs:{id:t.id,"video-id":t.id},on:{paused:function(t){return e.paused(t)},ended:function(t){return e.finished(t)}}})})),1),a("div",{attrs:{id:"contents"}},[a("p",{staticClass:"thetitle"},[e._v(e._s(e.data.title))]),a("p",{staticClass:"intro"},[e._v("Watch tutorial videos to get started.")]),a("p",{staticClass:"intro"},[e._v("Skip watching tutorial videos and start using Aquaria.")]),e.data.newUser?e._e():a("Playlist",{attrs:{playlist:e.videos}}),e.data.newUser?a("div",[a("youtube",{ref:"youtube",attrs:{id:"intro-video","video-id":"FAQ3yVGYSzY"},on:{playing:function(t){return e.playing(t)},paused:function(t){return e.paused(t)},ended:function(t){return e.finished(t)}}})],1):e._e(),a("a",{attrs:{href:"#",id:"skip"},on:{click:e.closeHelp}},[e._v("Skip > ")])],1)])},ha=[],pa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"playlists"}},e._l(e.playlist,(function(t){return a("span",{key:t.id,attrs:{id:t.id},on:{click:function(a){return e.play(t.id)}}},[a("div",{staticClass:"thumbnail-container"},[a("img",{attrs:{src:"https://img.youtube.com/vi/"+t.id+"/0.jpg"}}),a("button",{staticClass:"btn"},[e._v("▶")])]),a("p",[e._v(e._s(t.title))])])})),0)},ma=[],fa={name:"Playlist",props:["playlist"],methods:{play:function(e){document.querySelector("#contents").className=" hide",document.getElementById(e).className+=" show",document.getElementById("UserHelp").classList.remove("overlay"),document.getElementById("UserHelp").classList.remove("level7"),document.getElementById("UserHelp").classList.remove("dialouge-window"),document.getElementById("UserHelp").className+=" fullwindow";for(var t=0;t<this.$parent.$children.length;t++)if(this.$parent.$children[t].$attrs.id===e)var a=t;this.$parent.$children[a].player.playVideo()}}},ga=fa,va=(a("4d26"),Object(P["a"])(ga,pa,ma,!1,null,null,null)),ya=va.exports,wa={name:"UserHelp",components:{Playlist:ya},data:function(){return{videos:[{id:"FAQ3yVGYSzY",title:"Introduction to Aquaria"},{id:"UZNEmPOaVrA",title:"How to Calculate Distances"}]}},computed:{data:function(){return{title:s["default"].state.helpTitle,newUser:s["default"].state.newUser}}},methods:{closeHelp:function(){var e=this;if(document.querySelector("iframe.show")){var t=document.querySelector("iframe.show").id;document.getElementById("contents").classList.remove("hide"),document.getElementById(t).classList.remove("show"),document.getElementById("UserHelp").className+=" dialouge-window",document.getElementById("UserHelp").className+=" overlay",document.getElementById("UserHelp").className+=" level7",document.getElementById("UserHelp").classList.remove("fullwindow");var a={h:{}};a.h.id=t,e.paused(a)}else document.getElementById("UserHelp").classList.remove("show"),document.getElementById("UserHelp").className+=" hide",x["RemoveOverlay"](),document.querySelector("#helpbtn").classList.contains("active")&&e.toggleActive(document.querySelector("#helpbtn"))},toggleActive:function(e){"lnk active"===e.className?e.className="lnk":e.className="lnk active"},getIndex:function(e){for(var t=0;t<this.$refs.youtube.length;t++)if(this.$refs.youtube[t].$attrs.id===e)return t},playing:function(e){if(y=e.h.id,this.$refs.youtube.length)w=this.getIndex(y),this.$refs.youtube[w].player.playVideo();else{this.$refs.youtube.player.playVideo();var t=document.querySelector("#intro-video"),a=t.requestFullScreen||t.mozRequestFullScreen||t.webkitRequestFullScreen;a&&a.bind(t)()}},paused:function(e){y=e.h.id,document.querySelector("iframe.active")?this.closeHelp():(this.$refs.youtube.length?(w=this.getIndex(y),this.$refs.youtube[w].player.pauseVideo()):this.$refs.youtube.player.pauseVideo(),(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)&&document.exitFullscreen())},finished:function(e){y=e.h.id,this.$refs.youtube.length?(w=this.getIndex(y),this.$refs.youtube[w].player.stopVideo()):this.$refs.youtube.player.stopVideo(),document.querySelector("iframe.active")&&document.querySelector("#UserHelp a.close").click(),document.exitFullscreen(),this.closeHelp()}}},Aa=wa,ba=(a("7f5f"),Object(P["a"])(Aa,da,ha,!1,null,null,null)),_a=ba.exports,Sa=a("7d7f"),Ia=a.n(Sa),xa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.loader?a("div",{attrs:{id:"waitingFrame"}},[a("div",{attrs:{id:"waitinghtml"}},[a("img",{attrs:{src:e.overlay}}),a("p",{attrs:{id:"appletMessage"}},[e._v(" "+e._s(e.loaderMsg)+" ")])])]):e._e()},Ca=[],Ra={name:"Loader",data:function(){return{overlay:a("8673")}},computed:{loader:function(){return s["default"].state.Loader},loaderMsg:function(){return s["default"].state.LoaderMsg}}},ka=Ra,Pa=(a("7bd5"),Object(P["a"])(ka,xa,Ca,!1,null,"cb681734",null)),Ea=Pa.exports,Oa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"level4",attrs:{id:"popupshell"}},[a("div",{staticClass:"level4",style:{visibility:e.data.popupTitle?"visible":"hidden"},attrs:{id:"popupbody"}},[a("div",{attrs:{id:"popupheader"},on:{mousedown:function(t){return e.dragMouseDown(t)}}},[a("span",{staticClass:"loadedPin",attrs:{id:"loadedPin"},on:{click:function(t){return e.togglePinBehaviour()}}}),a("span",{domProps:{innerHTML:e._s(e.getPopupTitle)}}),a("span",{staticClass:"x",attrs:{id:"x_close"},on:{click:e.hidePopup}})]),e.getPopupText?a("div",{attrs:{id:"content"}},[e.isVariant?a("div",{staticClass:"aaLightBg"},[e.defaultDesc?a("p",{attrs:{id:"spanDefaultDesc"}},[e._v(" "+e._s(e.defaultDesc)+" ")]):e._e(),e._l(e.oneAaCodes,(function(t){return a("div",{key:t,style:{display:t===e.variant?"block":"none"},attrs:{id:"divVarInfo_"+t}},[e._l(e.getAaDataAsArr(t),(function(t){return a("expandable-text-line",{key:t,attrs:{"use-click":""},domProps:{innerHTML:e._s(t+".")}})})),a("i",[e._v("Structures with "+e._s(e.getOldAa())+e._s(e.getVarDisplay())+e._s(t)+":")]),e._v(" "),a("span",{class:e.getIsShownVar(e.variant),on:{click:function(a){return e.showTreeView(a,t)}}},[e._v(" "+e._s(e.getPdbCount(t))+" ")])],2)})),a("hr",{staticClass:"anAaHr",attrs:{id:"anAaHr",hidden:e.isHrHidden()}}),a("div",{attrs:{id:"divPosInfo"}},[a("span",{staticClass:"weight600",domProps:{innerHTML:e._s(e.getResInfo())}}),a("br"),e._l(e.getPosInfoDataAsArr(),(function(t,n){return a("span",{key:n},[a("expandable-text-line",{attrs:{"use-click":""}},[a("i",[a("span",{domProps:{innerHTML:e._s(n)}}),e._v(": ")]),e._l(t,(function(t){return a("span",{key:t,domProps:{innerHTML:e._s(t+". ")}})}))],2)],1)})),a("i",[e._v("Structures with residue "+e._s(e.getVariant)+":")]),a("span",{class:e.getIsShownRes(),on:{click:function(t){return e.showTreeView(t)}}},[e._v(" "+e._s(e.getTotalPdbCount)+" ")])],2)],2):e._e(),e.isVariant?e._e():a("div",{staticClass:"aaLightBg"},[a("i",{domProps:{innerHTML:e._s(e.getPopupText)}}),a("span",{class:e.getTotalPdbCount>0?"hasStruct":"noStruct",on:{click:function(t){e.getTotalPdbCount>0&&e.showTreeView(t,null,e.getPopupText.replace(/\D/g,""))}}},[e._v(" "+e._s(e.getTotalPdbCount)+" ")])])]):e._e(),a("div",{staticClass:"btnsDiv",style:{display:e.isVariant?"block":"none"}},[a("span",[e._v("See also:")]),e._v(" "),a("span",{staticClass:"pAaColor"},[e._v(" "+e._s(e.getOldAa())+" → ")]),e._l(e.oneAaCodes,(function(t){return a("button",{key:t,class:e.getIfBoldInfoPres(t),attrs:{id:"btnVarInfo_"+t},on:{click:function(a){return e.highlightAa(t)}}},[e._v(e._s(t))])}))],2)]),a("TreeView",{directives:[{name:"show",rawName:"v-show",value:e.showTree,expression:"showTree"}],staticClass:"level5",attrs:{id:"treeView",treeReady:e.prop,count:e.count,coordinates:e.treeCoordinates,parentElem:e.parentElem}}),a("NodeLoader",{directives:[{name:"show",rawName:"v-show",value:e.showLoader,expression:"showLoader"}],attrs:{coordinates:e.treeCoordinates,change:e.change}}),a("img",{staticClass:"show",style:{visibility:e.data.popupTitle?"visible":"hidden"},attrs:{src:e.popupTail,id:"popupTail"}})],1)},Da=[],Ma={name:"PopUp",components:{TreeView:pt,ExpandableTextLine:we["a"],NodeLoader:wt},watch:{popupCoordinates:function(e){var t=this;this.setDefault(),null!==e||0!==e?("object"===Object(Ct["a"])(s["default"].state.popupText)?(t.handleVariantPopup(),t.togglePinBehaviour()):t.isVariant=!1,this.PopupPos=e):t.hidePopup()}},data:function(){return{popupTail:a("4c7a"),oneAaCodes:["A","C","D","E","F","G","H","I","K","L","M","N","P","Q","R","S","T","V","W","Y"],threeAaCodes:["Ala","Cys","Asp","Glu","Phe","Gly","His","Ile","Lys","Leu","Met","Asn","Pro","Gln","Arg","Ser","Thr","Val","Trp","Tyr"],isVariant:!1,variant:null,defaultDesc:null,treeCoordinates:{},change:0,showTree:!1,isShowTreeViewClicked:!1,prop:null,showLoader:!1,count:0,PopupPos:null,pos:[0,0,0,0],hasVariant:!1,hasResidue:!1,parentElem:"#popupshell"}},computed:Object(I["a"])(Object(I["a"])({popupCoordinates:function(){return s["default"].state.popupCoordinates},data:function(){return{variantStructs:s["default"].state.variantStructs,variantResidues:s["default"].state.variantResidues,popupTitle:s["default"].state.popupTitle,popupText:s["default"].state.popupText,residue:s["default"].state.residue}}},Object(C["b"])(["getGene","getTotalPDBres","getVariant","getVariantStructs","getVariantResidues","getPopupTitle","getPopupText","getServersDone","getVariantIdx","getMatches","getStructure"])),{},{getTotalPdbCount:function(){var e=this;if(e.isVariant){for(var t=0,a=0;a<e.oneAaCodes.length;a++)e.getVariantStructs&&e.getVariant&&Object.hasOwnProperty.call(e.getVariantStructs,e.getVariant)&&Object.hasOwnProperty.call(e.getVariantStructs[e.getVariant],e.oneAaCodes[a])&&Object.hasOwnProperty.call(e.getVariantStructs[e.getVariant][e.oneAaCodes[a]],"pdbs")&&(t+=e.getVariantStructs[e.getVariant][e.oneAaCodes[a]].pdbs.length);return t}return e.getTotalPDBres}}),created:function(){var e=this;window.addEventListener("click",(function(t){if(!e.$el.contains(t.target)&&t.target.parentElement&&e.getPopupTitle&&!t.target.parentElement.id.includes("tree")){var a=document.getElementById("loadedPin");if(a.classList.contains("loadedPin")){console.log("Close the popup.");var n=document.getElementById("x_close");n.click()}}}))},methods:{setPopupPos:function(e){this.getPopupTitle.includes("Dark")&&(e.y=e.y+20);var t=e.x-document.querySelector("#popupTail").getBoundingClientRect().width/2+e.width/2;document.querySelector("#popupTail").style.left=t+"px",e.height<=2?document.querySelector("#popupshell").style.top=e.y-e.height-document.querySelector("#popupTail").getBoundingClientRect().height+"px":e.height>=18?document.querySelector("#popupshell").style.top=e.y-e.height+5+"px":document.querySelector("#popupshell").style.top=e.y-e.height+"px",document.querySelector("#popupshell").style.left=t-10+"px";var a=document.querySelector("#popupshell").getBoundingClientRect().x+document.querySelector("#popupbody").getBoundingClientRect().width;a>window.innerWidth&&(document.querySelector("#popupshell").style.left=window.innerWidth-document.querySelector("#popupbody").getBoundingClientRect().width+7+"px"),document.querySelector("#popupbody").getBoundingClientRect().x<0&&(document.querySelector("#popupshell").style.left="-10px")},hidePopup:function(){var e=this;this.isShowTreeViewClicked?this.isShowTreeViewClicked=!1:s["default"].commit("setPopupTitle",""),this.getVariantStructs&&e.resetToInitVar()},setDefault:function(){var e=document.getElementById("loadedPin");e.classList.contains("loadedPin_active")&&(e.classList.remove("loadedPin_active"),e.classList.add("loadedPin"));var t=document.getElementById("popupTail");t.classList.contains("hide")&&(t.classList.remove("hide"),t.classList.add("show")),document.getElementById("popupshell").classList.remove("fade")},handleVariantPopup:function(){this.isVariant=!0,this.variant=this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase(),this.defaultDesc=this.getDefaultDesc(),this.handleInitAa()},showTreeView:function(e,t,a){this.isShowTreeViewClicked=!0;var n=this,r=e.srcElement.getBoundingClientRect();if(n.treeCoordinates.clientX=r.left,n.treeCoordinates.clientY=r.top,n.treeCoordinates.width=r.width,n.treeCoordinates.height=r.height,n.change=n.change+1,n.showLoader=!0,n.getVariantStructs&&Object.hasOwnProperty.call(n.getVariantStructs,n.getVariant)){n.count=t?n.getPdbCount(t):n.getTotalPdbCount;var s="".concat(window.BACKEND,"/secondaryClusteringByResidue"),i={};i.selector=n.getStructure.accession,i.sortedKeys=a?[parseInt(a)]:[n.getVariant],t&&(i.aaCode=t),ee()({method:"get",url:s,params:i}).then((function(e){console.log(e.data),n.showTree=!0,n.prop=e.data}))}else s="".concat(window.BACKEND,"/secondaryClusteringByResidue"),n.count=n.getTotalPdbCount,i={},i.selector=n.getStructure.accession,i.sortedKeys=[parseInt(e.srcElement.parentElement.innerText.split(":")[0].split("residue ")[1])],ee()({method:"get",url:s,params:i}).then((function(e){console.log(e.data),n.showTree=!0,n.prop=e.data}));return 0},getOldAa:function(){return Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"oldAa")?this.getVariantResidues[this.getVariant].oldAa:""},highlightAa:function(e){this.variant=e.toUpperCase();for(var t=0;t<this.oneAaCodes.length;t++)document.getElementById("btnVarInfo_"+this.oneAaCodes[t]).classList.remove("selCol");if(document.getElementById("btnVarInfo_"+e.toUpperCase()).classList+=" selCol",document.querySelector("#varSpe_toRep")&&(document.querySelector("#varSpe_toRep").innerText=e),document.querySelector("#newAa")){var a=this.oneAaCodes.indexOf(e);document.querySelector("#newAa").innerText=this.threeAaCodes[a]}},getIfBoldInfoPres:function(e){var t=!1;if(Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],e))for(var a=0;a<this.getVariantResidues[this.getVariant][e].length;a++)this.getVariantStructs&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],e)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][e],"pdbs")&&this.getVariantStructs[this.getVariant][e].pdbs.length>0&&(t=!0);if(this.getVariantResidues&&this.getVariant>0)return!0===t?e.toUpperCase().includes(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase())?"btnAaBold_b selCol":"btnAaBold_b":e.toUpperCase().includes(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase())?"btnAaBold selCol":"btnAaBold"},getAaDataAsArr:function(e){var t=[];if(Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],e)){for(var a=0;a<this.getVariantResidues[this.getVariant][e].length;a++);return this.getVariantResidues[this.getVariant][e]}return t},resetToInitVar:function(){Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"theOrigFeatStr")&&this.getVariantIdx>-1&&(document.getElementById("urlVariant").innerHTML=this.getVariantResidues[this.getVariant].theOrigFeatStr[this.getVariantIdx]),Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"consequent")&&this.getVariantIdx>-1&&(document.getElementById("consInfo").innerHTML=this.getVariantResidues[this.getVariant].consequent[this.getVariantIdx]),this.handleInitAa(),document.getElementById("spanDefaultDesc")&&(document.getElementById("spanDefaultDesc").hidden=!1),!0===this.isHrHidden()&&(document.getElementById("anAaHr").hidden=!0)},getVarDisplay:function(){return"string"===typeof this.getVariant&&this.getVariant.match("-")?this.getVariant.split("-")[0]:this.getVariant},getIsShownVar:function(e){if(this.getMatches&&Object.hasOwnProperty.call(this.getMatches,"Selected_PDB")&&Object.hasOwnProperty.call(this.getMatches.Selected_PDB,"pdb_id")&&Object.hasOwnProperty.call(this.getMatches.Selected_PDB,"pdb_chain")){var t=this.getMatches.Selected_PDB.pdb_id+":"+this.getMatches.Selected_PDB.pdb_chain;return this.getVariant&&this.getVariantStructs&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],e)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][e],"pdbs")&&this.getVariantStructs[this.getVariant][e].pdbs.includes(t)?"selCol_padded":this.getVariant&&this.getVariantStructs&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],e)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][e],"pdbs")&&!this.getVariantStructs[this.getVariant][e].pdbs.includes(t)?"noSelCol_padded":""}},getIsShownRes:function(){return console.log("The variant structs is "),console.log(this.getVariantStructs),console.log(this.getMatches),this.getVariantStructs&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],"isShown")&&!0===this.getVariantStructs[this.getVariant].isShown?"selCol_padded":this.getVariantStructs&&this.getVariant>-1&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],"isShown")&&!1===this.getVariantStructs[this.getVariant].isShown||0!==this.getTotalPdbCount?"noSelCol_padded":""},getPdbCount:function(e){return this.getVariantStructs&&Object.hasOwnProperty.call(this.getVariantStructs,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant],e)&&Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][e],"pdbs")?this.getVariantStructs[this.getVariant][e].pdbs.length:0},isHrHidden:function(){var e=this.getDefaultDesc(),t=!1;return Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"newAas")&&this.getVariantIdx>-1&&this.oneAaCodes.includes(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase())&&(t=!0),""===e&&!1===t},getDefaultDesc:function(){return this.getVariant&&this.getVariantResidues&&Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"defaultDesc")&&this.getVariantIdx>-1?this.getVariantResidues[this.getVariant].defaultDesc[this.getVariantIdx]:""},getPosInfoDataAsArr:function(){return Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"positionInfo")?this.getVariantResidues[this.getVariant].positionInfo:[]},handleInitAa:function(){var e=this;if(console.log("handleInitAa runs "),console.log(this.getVariantIdx),Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"newAas")&&this.getVariantIdx>-1&&this.oneAaCodes.includes(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase()))e.highlightAa(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase());else{this.getOldAa();for(var t=0;t<this.oneAaCodes.length;t++){var a=document.getElementById("divVarInfo_"+this.oneAaCodes[t]);"undefined"!==typeof a&&null!==a&&(document.getElementById("divVarInfo_"+this.oneAaCodes[t]).hidden=!0,document.getElementById("btnVarInfo_"+this.oneAaCodes[t]).classList.remove("selCol")),this.oneAaCodes[t]}e.updateSpanAa("")}},updateSpanAa:function(e){if(console.log("Value to display is "+e+this.getVariantIdx),document.getElementById("span_missenseHeading"))if(this.getVariantResidues&&Object.hasOwnProperty.call(this.getVariantResidues,this.getVariant)&&Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant],"isOne")&&this.getVariantIdx>-1&&!0===this.getVariantResidues[this.getVariant].isOne[this.getVariantIdx]){var t=this.oneAaCodes.indexOf(e);document.getElementById("newAa").innerHTML=-1!==t?this.threeAaCodes[t]:""}else document.getElementById("newAa").innerHTML=e},togglePinBehaviour:function(){var e=document.getElementById("loadedPin");e.classList.contains("loadedPin_active")?(e.classList.remove("loadedPin_active"),e.classList.add("loadedPin")):e.classList.contains("loadedPin")&&(e.classList.remove("loadedPin"),e.classList.add("loadedPin_active"))},dragMouseDown:function(e){e=e||window.event,e.preventDefault(),this.pos[2]=e.clientX,this.pos[3]=e.clientY,document.onmouseup=this.closeDragElement,document.onmousemove=this.elementDrag},elementDrag:function(e){e=e||window.event,e.preventDefault();var t=document.getElementById("popupshell");this.pos[0]=this.pos[2]-e.clientX,this.pos[1]=this.pos[3]-e.clientY,this.pos[2]=e.clientX,this.pos[3]=e.clientY,t.style.top=t.offsetTop-this.pos[1]+"px",t.style.left=t.offsetLeft-this.pos[0]+"px";var a=document.getElementById("popupTail");a.classList.contains("show")&&(a.classList.remove("show"),a.classList.add("hide"))},closeDragElement:function(){document.onmouseup=null,document.onmousemove=null},getResInfo:function(){var e=window.AQUARIA.panel3d.joleculeAlignment,t=window.AQUARIA.panel3d.embededJolecule.controller,a=e.mapSeqResToPdbResOfChain(0,this.getVariant,this.getStructure.chain);if(a){var n=t.soup.findResidueIndices(0,a[1],a[2]),r=t.soup.getResidueProxy().load(n).resType;return r=r.substr(0,1)+r.substr(1).toLowerCase(),this.getGene+" residue "+this.getVariant+'<span style="font-weight: 400; color: #a6a5a6;"> ('+this.getStructure.pdb+"-"+this.getStructure.chain+" residue "+r+"-"+a[2]+")"}}},updated:function(){null!==this.PopupPos&&this.setPopupPos(this.PopupPos)}},Ta=Ma,Ba=(a("96ae"),a("05b9"),Object(P["a"])(Ta,Oa,Da,!1,null,"5a2db195",null)),La=Ba.exports,qa=a("5e83"),Ua={name:"Wrapper",components:{GdprConsentModal:qa["a"],Header:H,Sequence:Re,AboutAlignment:Be,AboutPdb:Ne,StructureViewer:Ze,Tabs:Lt,CoverageMap:na,PopUp:La,AboutAquaria:ra["a"],Errors:ua,UserHelp:_a,Loader:Ea},props:["urlRequest"],computed:{data:function(){return{hash:s["default"].state.hash,arrayOfVideos:["https://youtu.be/FAQ3yVGYSzY?list=PLsGaleFn8YydVFkxDhOvHHE5NoTsl6D1e","https://www.youtube.com/watch?v=UZNEmPOaVrA&list=PLsGaleFn8YydVFkxDhOvHHE5NoTsl6D1e&index=2"]}}},methods:{closeHelp:function(){var e=this;document.getElementById("UserHelp").classList.remove("show"),document.getElementById("UserHelp").className+=" hide",document.querySelector(".dimmer").style.display="none",document.querySelector("#helpbtn").classList.contains("active")&&(x["RemoveOverlay"](),e.toggleActive(document.querySelector("#helpbtn")))},checkPhone:function(){var e=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(!navigator.platform)return!1;while(e.length)if(navigator.platform===e.pop()||screen.width>=300&&screen.width<=600)return!0},inspectHeight:function(){document.querySelector("#heightinspector").innerHTML="reset";var e=window.outerHeight-window.innerHeight;document.querySelector("#heightinspector").innerHTML="HO:"+window.outerHeight+", hDiff:"+e+", scroll: "+window.scrollY+" bodyHeight: "+document.body.scrollHeight},dismissPanel:function(){document.querySelector("#scrim").className="hide",this.$store.commit("setScrim",!1)},toggleActive:function(e){"lnk active"===e.className&&(e.className="lnk")}},mounted:function(){window.AQUARIA.panel3d=new Ia.a("#threeDSpan",i["chainSelected"]),window.scrollBy(0,100),i["loadAccession"]([this.$props.urlRequest.uniprotAccession],this.$props.urlRequest.pdbID,this.$props.urlRequest.chain),window.addEventListener("resize",(function(){window.scrollBy(0,100),document.querySelector("#vis > .ruler").remove(),document.querySelectorAll("#vis > #allclusters .outer_container").forEach((function(e){return e.remove()})),window.AQUARIA.refresh();var e=window.outerHeight-window.innerHeight;document.querySelector("#heightinspector").innerHTML="HO:"+window.outerHeight+", hDiff:"+e+", scroll: "+window.scrollY+" bodyHeight: "+document.body.scrollHeight})),setTimeout((function(){document.querySelector(".matrixLoading")&&(document.querySelector(".matrixLoading").style.visibility="hidden",document.querySelector(".matrixLoading").style.display="none")}),1500)},updated:function(){}},Va=Ua,Fa=(a("8f89"),Object(P["a"])(Va,n,r,!1,null,null,null));t["default"]=Fa.exports},ae7d:function(e,t,a){e.exports=a.p+"img/node.cac6f4f6.gif"},b335:function(e,t,a){e.exports=a.p+"img/aquaria-menu.1a89fbab.svg"},b3c8:function(e,t,a){(function(e){a("ac1f"),a("5319"),e.fn.digits=function(){return this.each((function(){e(this).text(e(this).text().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"))}))},e(document).ready((function(){e("#protein_syn_input, #organism_syn_input").focus((function(){e(".infocus").removeClass("infocus"),e("#searchByName").addClass("infocus")})),e("#help3D").hide()})),e((function(){e(document).tooltip({position:{my:"right top+15",at:"right center",collision:"none"}},{show:{delay:1200}})}))}).call(this,a("1157"))},be77:function(e,t,a){"use strict";a("4481")},bf44:function(e,t,a){"use strict";a("c9a6")},c48f:function(e,t,a){},c9a6:function(e,t,a){},d2f8:function(e,t,a){"use strict";a("4ace")},e26a:function(e,t,a){},e352:function(e,t,a){},e5d1:function(e,t,a){},ea62:function(e,t,a){},f760:function(e,t,a){"use strict";a("8f69")},fc7c:function(e,t,a){"use strict";a("e352")},fe91:function(e,t,a){}}]);
//# sourceMappingURL=wrapper.73fb4385.js.map