{"version":3,"sources":["webpack:///./src/components/AquariaLayout/PopUpNew.vue?0b8b","webpack:///./src/views/Coverage.vue?bf0d","webpack:///./src/views/Coverage.vue?18a5","webpack:///src/views/Coverage.vue","webpack:///./src/views/Coverage.vue?1d8f","webpack:///./src/views/Coverage.vue","webpack:///./src/assets/img/search_dark.png","webpack:///./src/components/AquariaLayout/helpers/topten.js","webpack:///./src/components/MatchingStructures/CoverageMap.vue?152c","webpack:///./src/assets/images/aquaria-symbol-01.svg","webpack:///./src/assets/img/up.png","webpack:///./src/assets/img/MS-01.svg","webpack:///./src/components/Header/Header.vue?b3be","webpack:///./src/components/MatchingStructures/MatchingStructures.vue?bb56","webpack:///./src/components/MatchingStructures/TreeView.vue?9fb7","webpack:///./src/assets/img/popupTail.png","webpack:///./src/components/InfoAbout/Playlist.vue?3420","webpack:///./src/assets/img/down.png","webpack:///./src/components/InfoAbout/AboutAlignment.vue?8ef8","webpack:///./src/components/InfoAbout/Errors.vue?ed76","webpack:///./src/components/AquariaLayout/Loader.vue?d924","webpack:///./src/components/Header/Title.vue?cf3e","webpack:///./src/components/InfoAbout/UserHelp.vue?72f9","webpack:///./src/components/InfoAbout/AboutUniprot.vue?8878","webpack:///./src/assets/img/aquaria-loader3.svg","webpack:///./src/components/StructureViewer/StructureViewer.vue?e2e1","webpack:///./src/components/Header/Menu.vue?9003","webpack:///./src/views/Wrapper.vue?2d51","webpack:///./src/components/AquariaLayout/helpers/aquaria.js","webpack:///./src/components/Features/FeatureMap.vue?e2bf","webpack:///./src/assets/img/FT-01.svg","webpack:///./src/components/Search/SearchPanel.vue?dce5","webpack:///./src/assets/img/search_100.png","webpack:///./src/views/Wrapper.vue?be42","webpack:///./src/components/Header/Header.vue?33d2","webpack:///./src/components/Header/Title.vue?94de","webpack:///src/components/Header/Title.vue","webpack:///./src/components/Header/Title.vue?fc25","webpack:///./src/components/Header/Title.vue","webpack:///./src/components/Header/Menu.vue?0138","webpack:///src/components/Header/Menu.vue","webpack:///./src/components/Header/Menu.vue?11f0","webpack:///./src/components/Header/Menu.vue","webpack:///src/components/Header/Header.vue","webpack:///./src/components/Header/Header.vue?cde9","webpack:///./src/components/Header/Header.vue","webpack:///./src/components/InfoAbout/Sequence.vue?71e9","webpack:///./src/components/Search/SearchPanel.vue?c33f","webpack:///./src/components/Search/SearchOrganism.vue?a4b2","webpack:///src/components/Search/SearchOrganism.vue","webpack:///./src/components/Search/SearchOrganism.vue?f903","webpack:///./src/components/Search/SearchOrganism.vue","webpack:///./src/components/Search/SearchProtein.vue?79f1","webpack:///src/components/Search/SearchProtein.vue","webpack:///./src/components/Search/SearchProtein.vue?30f6","webpack:///./src/components/Search/SearchProtein.vue","webpack:///src/components/Search/SearchPanel.vue","webpack:///./src/components/Search/SearchPanel.vue?ad8b","webpack:///./src/components/Search/SearchPanel.vue","webpack:///./src/components/InfoAbout/AboutUniprot.vue?6b32","webpack:///src/components/InfoAbout/AboutUniprot.vue","webpack:///./src/components/InfoAbout/AboutUniprot.vue?7045","webpack:///./src/components/InfoAbout/AboutUniprot.vue","webpack:///src/components/InfoAbout/Sequence.vue","webpack:///./src/components/InfoAbout/Sequence.vue?7531","webpack:///./src/components/InfoAbout/Sequence.vue","webpack:///./src/components/InfoAbout/AboutAlignment.vue?824c","webpack:///src/components/InfoAbout/AboutAlignment.vue","webpack:///./src/components/InfoAbout/AboutAlignment.vue?2b44","webpack:///./src/components/InfoAbout/AboutAlignment.vue","webpack:///./src/components/InfoAbout/AboutPdb.vue?603f","webpack:///src/components/InfoAbout/AboutPdb.vue","webpack:///./src/components/InfoAbout/AboutPdb.vue?9380","webpack:///./src/components/InfoAbout/AboutPdb.vue","webpack:///./src/components/StructureViewer/StructureViewer.vue?ed08","webpack:///src/components/StructureViewer/StructureViewer.vue","webpack:///./src/components/StructureViewer/StructureViewer.vue?4706","webpack:///./src/components/StructureViewer/StructureViewer.vue","webpack:///./src/components/AquariaLayout/Tabs.vue?b77b","webpack:///./src/components/MatchingStructures/MatchingStructures.vue?b498","webpack:///./src/components/MatchingStructures/TreeView.vue?e3ca","webpack:///./src/components/Features/helpers/featureMap.js","webpack:///./src/components/MatchingStructures/helpers/show_matching_structures.js","webpack:///./src/components/MatchingStructures/helpers/clusterRenderer.js","webpack:///src/components/MatchingStructures/TreeView.vue","webpack:///./src/components/MatchingStructures/TreeView.vue?7b19","webpack:///./src/components/MatchingStructures/TreeView.vue","webpack:///./src/components/AquariaLayout/NodeLoader.vue?3495","webpack:///src/components/AquariaLayout/NodeLoader.vue","webpack:///./src/components/AquariaLayout/NodeLoader.vue?ba43","webpack:///./src/components/AquariaLayout/NodeLoader.vue","webpack:///src/components/MatchingStructures/MatchingStructures.vue","webpack:///./src/components/MatchingStructures/MatchingStructures.vue?3359","webpack:///./src/components/MatchingStructures/MatchingStructures.vue","webpack:///./src/components/Features/Features.vue?3e94","webpack:///./src/components/Features/helpers/loadFeature.js","webpack:///src/components/Features/Features.vue","webpack:///./src/components/Features/Features.vue?7da7","webpack:///./src/components/Features/Features.vue","webpack:///./src/components/Features/helpers/handleFeaturePop.js","webpack:///./src/components/Features/helpers/renderPanel.js","webpack:///src/components/AquariaLayout/Tabs.vue","webpack:///src/components/MatchingStructures/CoverageMap.vue","webpack:///src/components/InfoAbout/UserHelp.vue","webpack:///./src/components/AquariaLayout/Tabs.vue?112e","webpack:///./src/components/AquariaLayout/Tabs.vue","webpack:///./src/components/MatchingStructures/CoverageMap.vue?ff1e","webpack:///./src/components/Features/FeatureMap.vue?5a03","webpack:///src/components/Features/FeatureMap.vue","webpack:///./src/components/Features/FeatureMap.vue?0366","webpack:///./src/components/Features/FeatureMap.vue","webpack:///./src/components/MatchingStructures/mapLoader.vue?cd7a","webpack:///src/components/MatchingStructures/mapLoader.vue","webpack:///./src/components/MatchingStructures/mapLoader.vue?5274","webpack:///./src/components/MatchingStructures/mapLoader.vue","webpack:///./src/components/MatchingStructures/CoverageMap.vue?a2b3","webpack:///./src/components/MatchingStructures/CoverageMap.vue","webpack:///./src/components/InfoAbout/Errors.vue?701e","webpack:///src/components/InfoAbout/Errors.vue","webpack:///./src/components/InfoAbout/Errors.vue?851d","webpack:///./src/components/InfoAbout/Errors.vue","webpack:///./src/components/InfoAbout/UserHelp.vue?8330","webpack:///./src/components/InfoAbout/Playlist.vue?03d0","webpack:///src/components/InfoAbout/Playlist.vue","webpack:///./src/components/InfoAbout/Playlist.vue?be0a","webpack:///./src/components/InfoAbout/Playlist.vue","webpack:///./src/components/InfoAbout/UserHelp.vue?4c0c","webpack:///./src/components/InfoAbout/UserHelp.vue","webpack:///./src/components/AquariaLayout/Loader.vue?d167","webpack:///src/components/AquariaLayout/Loader.vue","webpack:///./src/components/AquariaLayout/Loader.vue?1f62","webpack:///./src/components/AquariaLayout/Loader.vue","webpack:///./src/components/AquariaLayout/PopUpNew.vue?2333","webpack:///src/components/AquariaLayout/PopUpNew.vue","webpack:///./src/components/AquariaLayout/PopUpNew.vue?498c","webpack:///./src/components/AquariaLayout/PopUpNew.vue","webpack:///src/views/Wrapper.vue","webpack:///./src/views/Wrapper.vue?083a","webpack:///./src/views/Wrapper.vue","webpack:///./src/assets/img/node.gif","webpack:///./src/assets/images/aquaria-menu.svg","webpack:///./src/components/AquariaLayout/helpers/utilities.js","webpack:///./src/components/MatchingStructures/mapLoader.vue?df71","webpack:///./src/components/AquariaLayout/PopUpNew.vue?092a","webpack:///./src/components/AquariaLayout/NodeLoader.vue?c90e","webpack:///./src/components/AquariaLayout/Tabs.vue?4b98","webpack:///./src/components/InfoAbout/AboutPdb.vue?74f2","webpack:///./src/components/Features/Features.vue?b8f3"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","name","components","MatrixHeader","LoadingPage","data","hostname","publicPath","structures","totalStructures","d3","green","backgroundColour","x","y","organismId","mounted","url","axios","method","then","allStructures","console","document","window","methods","getResidueSize","scale","length","loadShapes","continuous","svg","offset","prevLayer","prefixName","nextElem","prefixSize","Math","large","placeholder","id","dark","placeholderLarge","primary_accession","synonym","hadFragments","height","triangleSize","width","nextLayer","nextName","prevElem","fillData","protein","color","nonDark","i","segment","getNonDarkBetween","start","stop","Start","Stop","splitToChunks","array","parts","result","addNonDarkToFragments","fragments","j","fragment","drawArrow","fill","hoverText","description","prevOffset","nonDarkFragments","JSON","parse","stringify","numChunks","floor","newFill","prevStop","len","slice","fragmentWidth","k","shapeFill","attr","selectAll","enter","append","rectLen","p","on","text","lab","style","node","getComputedTextLength","shortest","reduce","drawRuler","range","xScale","linear","domain","ticks","axis","call","smallAxis","axisLabel","datum","drawFragments","pdb","renderImage","imgYOffset","link","imgSize","xOffset","img","splitLargeGaps","clusters","cluster","seq_start","seq_end","newCluster","drawMatchingStructures","s","spliced","start1","min","start2","end1","max","end2","end","matchingScale","nice","matchingAxis","matchingLabel","imageObj","drawExpandButton","expandButton","innerHeight","innerWidth","cursor","parentNode","className","baseVal","split","indexOf","transform","select","translate","rows","foundOpen","topOpen","classed","renderHalfMoon","arcGenerator","arc","outerRadius","innerRadius","startAngle","endAngle","semicircle","arrow","initialDisplay","isResize","transition","duration","opened","partitionToThree","list","totalSum","getListSum","newNum","twoPart","partitionToTwo","threePart","index","prev","cur","sortStructures","pos","cleanProteins","proteins","positionArrays","positionArray","proteinsCleaned","longest","substring","newNonDark","Primary_Accession","findSubstring","a1","a2","L","charAt","getPositions","posUrl","r","getProteinSynonyms","getSynonym","synUrl","synonyms","getMatchingStructures","loadRequest","selector","urlMatching","params","countMatchingStructures","getNonDarkRegions","getNonDark","getNonDarkCoverage","primaryAccession","urlCoverage","nonDarkCleaned","getStructures","purl","sequence","position","getFragments","component","module","exports","LRU","require","TopTen","MAX_SIZE","that","existing","localStorage","getItem","cache","entries","forEach","entry","set","key","value","prototype","submitFired","pdb_id","last","save","saveArray","push","savedText","log","setItem","getAll","ret","savePDB","primary_acccession","store","previousLookup","previousLookupByName","updatePDB","MAX_PROTEIN_HISTORY","proteinSubmitListeners","addProteinSubmitListener","listener","AQUARIA","proteinTopTen","pdbTopTen","staticClass","dismissPanel","showScrim","aquariasymbol","hamburger","getOrganism","seqRes","$event","makeActive","search","_v","_s","replaceAll","getGene","_e","getStructure","chain","visibility","helpOption","showHelp","structRes","hash","computed","scrim","state","mapGetters","watch","_this","newVal","querySelector","Panels","storeHash","location","includes","el","getElementById","classList","contains","resetSelection","release","updated","selectedRes","MutationObserver","display","residues","innerText","currentMember","model","pdb_chain","accession","attributes","childList","characterData","_m","directives","rawName","expression","$$selectedVal","Array","filter","target","options","o","selected","map","val","_value","multiple","onChange","elem","toggleActive","ev","screenshot","screenshotHref","a","currentTarget","viewUtils","Title","Menu","fillin","ref","getResultValue","handleSubmit","Autocomplete","OrganismSynonyms","OrgID","Organism","organism_id","textpanel","clear","$refs","autocomplete","input","labelValues","term","Promise","resolve","label","callbackData","names","ids","pdbIDs","cacheProteinSynonyms","proteinSynonymOrgId","pdbId","collectResponsevalues","type","LoadAQUARIA","getters","event","getLRU","item","suffix","category","collectResponse","lruMatches","toLowerCase","startsWith","showPopup","allValues","concat","nameCallback","organism","b","previous","current","dup","idCallback","Source_Field","pdbCallback","SearchOrganism","SearchProtein","setTimeout","selectOrganism","placeholderText","orgInput","protInput","$","blur","_l","domProps","staticStyle","ExpandableTextLine","uniprotDesc","sections","descriptions","tightSections","desc","getSequences","newCount","updateUniprotInfo","patt","extractLines","info","match","makeLists","n","fromCollection","head","nextHead","newList","linkCode","lhref","lname","ltitle","finalList","EachSec","section","SearchPanel","AboutUniprot","pdbName","chainId","uniprotName","score","evalueString","power","quality","precisiontxt","alignment","pdbData","qualClass","newData","checkPhone","iDevices","navigator","platform","pop","isPhone","newWindowHeight","baseWindowHeight","documentBody","renderClusters","MS","getStructCount","toLocaleString","renderFeatures","FT","getFeatCount","closeTab","prop","count","treeCoordinates","parentElem","change","hideTree","createFeatureMap","extServerIds_","isAuto","querySelectorAll","part","stroke","offsetWidth","margin","right","left","top","bottom","outerdiv","drawTrack","createSVGforFeature","rank","ClusterRenderer","onTextClick","onClusterItemClick","clustSize","container","drawClusterContainer","drawCluster","clusterToUpdate","cluster_size","nusvg","members","secondary_structure","structStart","structEnd","identity_score","alignment_identity_score","pad","mouseover","mouseout","substr","d","hidePanels","addThumbnails","clickTitle","getBoundingClientRect","drawResidues","setConservation","thickness","conservation","conservationArray","rect","srw","insertions","gap","each","imgName","toUpperCase","origin","over","parseFloat","shortId","clusterRenderers","clickCoord","clusterN","parseInt","commit","selectCluster","clusterNumber","remove","initialise","seqLength","drawAxisRuler","updateSizes","newClusters","updateCluster","refresh","sequences","existingClusters","Matches","RenderCluster","clusterRenderer","clusterItemClick","getClusterId","history","pushState","title","pathname","cluster_nbr","member","loadData","layerId","rsvg","insert","orient","tickSize","tickPadding","tickList","allTicks","textContent","doesItFit","unshift","tickValues","rulerEnd","limit","featureRegex","RegExp","props","pdbs","up","down","treeReady","coordinates","clientX","w","$parent","showLoader","showTree","parent","chunks","chunk","nodeClick","children","generateArc","items","size","reversePdbArray","outputArray","pdblist","parentPDB","nodes","elems","pdbArray","undefined","Object","hasOwnProperty","h","radius","showMatchingStructures","pNode","pathNm","imgNm","nodeLabel","createLinks","tier","links","output","verticalMargin","nodeStartY","source","points","xpoint","ypoint","Gen","curve","d3Shape","connector","waitForElement","featureMap","hideLoader","loader","TreeView","NodeLoader","oldVal","treeData","cord","getTreeCoordinates","response","structure","getMatches","inputs","parentElement","toggleTrack","hightlight","removeHightlight","showInfo","loadFeature","oid","sentAnnotationTo3DViewer","removeFearture","currentAnnotationsIn3DViewer","panel3d","annotationName","showSideChains","query","jController","controller","resQuery","resSideChain","soupView","isUpdateSidechain","isChanged","replace","_","proxy","sideChainOn","jAlignment","mapSeqResToPdbResOfChain","iRes","soup","findResidueIndices","getResidueProxy","load","sidechain","annotations","trackNumber","reformatAndAddFeatureTo3DViewer","Tracks","featureColours","featureNames","featureDescriptions","featurePositions","featureURLs","featureURLtexts","lastColour","show","Class","fURLs","fURLtxts","urls","href","protId","ProteinID","SeqHash","uniprot_hash","annotationToAdd","Category","isArray","clearResidues","trackElem","lastChild","fetch_features","uniprotMD5hash","fetchAnnotations","groupFeatureSets","featureList","featureSet","groupedFeatures","groupBy","feature","Server","String","getfeatureSets","checkAddedFeature","featureSets","$store","f","getLoadedFeature","track","getcompleteServerNum","featureInfo","aggregatedAnnotations","completeServers","completeExtServers","getCoverageMap","$route","Loader","sideChain","Highcharts","oneAaCodes","hidePopup","eid","urlhtml","oldAa","btnsDiv","anAa","_i","isUniCosOrFun","isUniCosOrFunPresent","balloonText","popupTitle","getIdxInVarRes","handleCathPopups","updateTheStyleOfHc","resNum","popupText","varRes","getVariantResidues","theOrigFeatStr","tag_open","tag_close","firstOpenPos","lastClosePos","lastIndexOf","variantStructs","reject","hc_go","series","doThePlotting_v2","dataLabels","distance","innerSize","prepend","catch","error","createANewDiv_hcNoData","innerHTML","hc_ec","hc_species","hcSeriesGroup","getElementsByClassName","thePaths","getElementsByTagName","pathKey","theColor","getAttribute","removeAttribute","setAttribute","divId","theSeriesData_inner","theSeriesData_outer","theTitle","theSize_inner","labelCol_inner","labelDist_inner","innerSize_outer","name_inner","name_outer","labelCol_outer","chart","plotOptions","pie","shadow","center","tooltip","valueSuffix","enabled","formatter","point","responsive","rules","condition","maxWidth","chartOptions","newDiv","createElement","featureSetCount","updateFeatureUI","featureHeader","fh","aFsIdx","html","Type","Description","features","click","viewer","popup","panels","addedFeature","drawSingleFeature","featureCount","featCount","viewBoxwidth","svgElem","targetId","MatchingStructures","Features","Selected_PDB","cluster_number","renderFeature","showPanel","showMatches","soupController","showFeatures","drawFeature","coverageMapsrw","residueColor","loadedFeature","drawMap","setScales","getIsDefaultFeature","loadPopup","allKeys","keys","sort","order","res","fResidueHeight","tmp1","tmp2","covMap","transitionVar","greyScale","FeatureMap","mapLoader","densityScale","darkRegions","myArray","coverageMapData","docFrag","secondaryStructure","selectPDB","selectChain","joleculeWatcher","init","uniprotAccession","updateUI","drawLine","drawDarkRegions","maxStruct","renderSVG","createDocumentFragment","ptext","ptitle","densityMap","structAa","selectStructmap","selectedClus","density","secondaryStruct","getSecondaryStructure","seqStart","seqEnd","elemId","setStructFeatmap","getStructureColor","arr","loadLastSuccess","errorMsg","lastURL","issuesURL","issues","changes","logo","message","encodeURIComponent","pageUrl","closeHelp","video","refInFor","paused","finished","newUser","videos","playing","play","$children","$attrs","player","playVideo","Playlist","activeVideoID","getIndex","youtube","iframe","requestFullScreen","mozRequestFullScreen","webkitRequestFullScreen","pauseVideo","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","stopVideo","overlay","loaderMsg","LoaderMsg","dragMouseDown","togglePinBehaviour","getPopupTitle","defaultDesc","aaCode","variant","getAaDataAsArr","dataStr","getOldAa","getVarDisplay","class","getIsShownVar","showTreeView","getPdbCount","isHrHidden","getResInfo","getPosInfoDataAsArr","arrObj","keyStr","getVariant","getIsShownRes","getTotalPdbCount","isVariant","getInfoPopup","getPopupText","getIfBoldInfoPres","highlightAa","popupTail","popupCoordinates","setDefault","PopupPos","threeAaCodes","isShowTreeViewClicked","hasVariant","hasResidue","variantResidues","residue","getVariantStructs","totalNumStructs","getTotalPDBres","created","$el","e","thePin","closeBtn","setPopupPos","tailPosition","popupbodyPos","handleVariantPopup","newAas","getVariantIdx","getDefaultDesc","handleInitAa","srcElement","aa","idx","isMakeBold","arrForExpandable","resetToInitVar","isShown","isAnAa","positionInfo","updateSpanAa","clientY","elementDrag","elmnt","closeDragElement","pdbResNum","resType","GdprConsentModal","Header","Sequence","AboutAlignment","AboutPdb","StructureViewer","Tabs","CoverageMap","PopUp","AboutAquaria","Errors","UserHelp","arrayOfVideos","inspectHeight","hDiff","initialisePanel3d","fn","digits","ready","focus","removeClass","addClass","hide","my","at","collision","delay"],"mappings":"2GAAA,W,oCCAA,W,yCCAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,WAAW,CAACF,EAAG,gBAAgBA,EAAG,eAAeA,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,gBAAgB,IACzMC,EAAkB,G,2RCcP,GACbC,KAAMA,SACNC,WAAYA,CACVC,aAAJA,OACIC,YAAJA,QAEEC,KANF,WAOI,MAAO,CACLC,SAAUA,OAAMA,MAAMA,IACtBC,WAAYA,IACZC,WAAYA,KACZC,gBAAiBA,EACjBC,GAAIA,EAAQA,QACZC,MAAOA,UACPC,iBAAkBA,UAClBC,EAAGA,EACHC,EAAGA,GACHC,WAAYA,YAGhBC,QApBF,WAoBA,IACA,EADA,OAKQC,EAAM,GAAd,mDACIC,IAAMA,CACJC,OAAQA,MACRF,IAAKA,IAEXG,MAAA,YACMC,EAANA,sCACM,EAAN,gDACQC,QAARA,OACQ,EAAR,2CACU,EAAV,wCACY,EAAZ,+BACA,2CACgBC,SAAhBA,0DACgBA,SAAhBA,kEAMM,EAAN,gBAGIC,OAAOA,iBAAiBA,SAAUA,KAAKA,iBAEzCC,QAASA,CAMPC,eANJ,SAMAC,EAAAC,GACM,OAAOA,EAASD,GAIlBE,WAXJ,SAWAxB,GAAA,kMAOA,IALAA,wBACAyB,EAAA,EAEAH,EAAA,sFAEA,oBAuBA,IAtBAI,EAAA,sIAEA,MACA,OACAC,EAAA,EAEA,QAEAC,EAAA5B,OACA6B,EAAAD,cACAE,EAAA9B,QACA+B,EAAAC,2BACAC,GAAA,EACA,MACAA,MAEAC,EAAA,CAAAC,iBAAAC,QAAAC,mBAAAC,sCAAA1C,YAAA2C,kBAAAL,gBACA,mCACA,gCACAP,gBAGA,sBACAa,GAAA,EACAC,EAAA,GACAC,EAAAD,MACAE,EAAA,qCACA,MACAD,qCACAC,KAIA,iCAMA,+BAGAlB,EADA,mBACAA,eAEAA,EAGA,iCAGA,+BACA,WACAe,MAEA,yCAGA,8CAGAb,QACA,IACA,YAGA,wBAEAiB,EAAA5C,OACA6C,EAAAD,KACAE,EAAA9C,OACA+B,yCACAE,KACA,MACAA,MAEAC,GAAAC,iBAAAC,QAAAC,mBAAAC,sCAAA1C,YAAA2C,kBAAAL,gBACA,sEAEA,oEAGA,sBAEA,qBA3FA,8CA8FIa,SAzGJ,SAyGAC,GACM,IAAIhD,EAAO,CAAC,CAAlB2B,YAAAsB,gBACM,GAAID,EAAQE,QAAS,CACnBjC,QAAQA,IAAIA,EAAQA,SACpB,IAAK,IAAIkC,EAAI,EAAGA,EAAIH,EAAQE,QAAQ3B,OAAQ4B,IAAK,CAC/C,IAAIC,EAAUJ,EAAQE,QAAQC,GAC9BnD,EAAKA,KAAKA,CAApB2B,gCAAAsB,gBACUjD,EAAKA,KAAKA,CAApB2B,gCAAAsB,mBACUjD,EAAKA,KAAKA,CAApB2B,+BAAAsB,mBACUjD,EAAKA,KAAKA,CAApB2B,+BAAAsB,iBAOM,OAJID,EAAQd,cACVlC,EAAOA,CAACA,CAAhB2B,YAAAsB,mBAGajD,GAGTqD,kBA5HJ,SA4HAL,EAAAM,EAAAC,GACM,IAAIL,EAAU,GACd,GAAIF,EAAQE,QACV,IAAK,IAAIC,EAAI,EAAGA,EAAIH,EAAQE,QAAQ3B,OAAQ4B,IACtCH,EAAQE,QAAQC,GAAGK,OAASF,GAASN,EAAQE,QAAQC,GAAGM,MAAQH,EAClEJ,EAAQA,KAAKA,CAAzBM,QAAAC,2BACA,4CACYP,EAAQA,KAAKA,CAAzBM,2BAAAC,2BACA,6CACYP,EAAQA,KAAKA,CAAzBM,2BAAAC,WAIM,OAAOP,GAGTQ,cA5IJ,SA4IAC,EAAAC,GAEM,IADA,IAAIC,EAAS,GACnB,YACQA,EAAOA,KAAKA,EAAMA,OAAOA,EAAGA,KAAKA,KAAKA,EAAMA,OAASA,KAEvD,OAAOA,GAGTC,sBApJJ,SAoJAd,GACM,GAAIA,EAAQe,UACV,IAAK,IAAIC,EAAI,EAAGA,EAAIhB,EAAQe,UAAUxC,OAAQyC,IAAK,CACjD,IAAIC,EAAWjB,EAAQe,UAAUC,GACjChB,EAAQA,UAAUA,GAAGA,QAAUA,KAAKA,kBAAkBA,EAASA,EAASA,MAAOA,EAASA,QAO9FkB,UA/JJ,SA+JAxC,EAAAsB,EAAAL,EAAAF,EAAAC,EAAAf,EAAAL,GAGM,IAAI6C,EAAO9E,KAAK0D,SAASC,GACrBb,EAAKa,EAAQb,GAAKa,EAAQb,GAAKa,EAAQV,kBAC3CrB,QAAQA,IAAIA,GACZ,IAwHN,EAxHUmD,EAAYpB,EAAQqB,YAAcrB,EAAQqB,YAAcrB,EAAQpD,KAIpE,GAAIuE,EAAK5C,OAAS,IAAMoB,EAAQ,IAO9B,IANA,IAAI2B,EAAa,EACbC,EAAmBC,KAAKC,MAAMD,KAAKE,UAAU1B,EAAQE,UACrDyB,EAAY3C,KAAK4C,MAAMT,EAAK5C,OAAS,IAAM,EAAIS,KAAK4C,MAAMT,EAAK5C,OAAS,IAAM,EAE9EsD,EAAUxF,KAAKqE,cAAca,EAAkBI,GAC/CG,EAAW,EACN3B,EAAI,EAAGA,EAAI0B,EAAQtD,OAAQ4B,IAAK,CACvC,IAAI4B,EAAMF,EAAQ1B,GAAG6B,OAAO,GAAG,GAAGvB,KAAOqB,EACrC3B,IAAM0B,EAAQtD,OAAS,IACzBwD,EAAMA,EAAQA,OAASA,GAGzB,IADA,IAAIE,EAAgB5F,KAAKgC,eAAeC,EAAOyD,GACtCG,EAAI,EAAGA,EAAIL,EAAQ1B,GAAG5B,OAAQ2D,IACrCL,EAAQA,GAAGA,GAAGA,MAAQA,EAAQA,GAAGA,GAAGA,MAAQA,EAC5CA,EAAQA,GAAGA,GAAGA,KAAOA,EAAQA,GAAGA,GAAGA,KAAOA,EAG5C,IAAIM,EAAY9F,KAAK0D,SAAS,CAAxCxB,SAAA2B,eAcU,GAZAxB,EAAIA,OAAOA,kBACrB0D,KAAA,8BACAA,KAAA,WAAAA,KAAA,WACAA,KAAA,aAAAA,KAAA,WACAC,UAAA,QACArF,KAAAmF,GAEAG,QAAAC,OAAA,QACAH,KAAA,sBAAY,OAAZ,YACAA,KAAA,0BAAY,OAAZ,WACAA,KAAA,kBAEcjC,IAAM0B,EAAQtD,OAAS,EAAG,CAC5B,IAAIiE,EAAUP,EAAgBvC,EAC1C,SAEc+C,EADED,EAAU,EACRC,CAACA,KAAKA,EAAGA,KAAKA,EAAGA,KAAKA,EAAGA,KAAKA,EAAIA,EAAQA,KAAKA,EAAIA,EAASA,KAAKA,EAAIA,EAAQA,KAAKA,EAAIA,EAASA,KAAKA,EAAIA,GAA1HA,mEAEkBA,CAACA,KAAKA,EAAGA,KAAKA,EAAIA,GAApCA,+CAIY/D,EAAIA,OAAOA,eACvB0D,KAAA,SAAAK,GAEAL,KAAA,yCACAA,KAAA,KAAAjD,GACAiD,KAAA,QAAAjD,GACAiD,KAAA,sCACAA,KAAA,iBACAM,GAAA,2BACc,IAAd,YACcrF,EAAdA,mCACcA,EAAdA,iDACc,KAAd,0BAEAqF,GAAA,0BACc,IAAd,YACcrF,EAAdA,iCACcA,EAAdA,kDAEAqF,GAAA,oBACc,IAAd,YACA,yBACcvE,OAAdA,4CAEAoE,OAAA,aACAI,KAAAvB,QAGY1C,EAAIA,OAAOA,YACvB0D,KAAA,yCACAA,KAAA,YACAA,KAAA,YACAA,KAAA,QAAAH,GACAG,KAAA,SAAA3C,GACA2C,KAAA,KAAAjD,GACAiD,KAAA,iBACAA,KAAA,QAAAjD,GACAiD,KAAA,sCACAM,GAAA,2BACc,IAAd,YACcrF,EAAdA,mCACcA,EAAdA,iDACcA,EAAdA,oDACc,KAAd,0BAEAqF,GAAA,0BACc,IAAd,YACcrF,EAAdA,iCACcA,EAAdA,+CACcA,EAAdA,qDAEAqF,GAAA,oBACc,IAAd,YACA,yBACcvE,OAAdA,4CAEAoE,OAAA,aACAI,KAAAvB,GAEUU,GAAsBA,EACtBR,GAA0BA,OAG5B5C,EAAIA,OAAOA,kBACnB0D,KAAA,gBACAA,KAAA,WAAAA,KAAA,WACAA,KAAA,aAAAA,KAAA,WACAC,UAAA,QACArF,KAAAmE,GACAmB,QAAAC,OAAA,QACAH,KAAA,sBAAU,OAAV,YACAA,KAAA,0BAAU,OAAV,WACAA,KAAA,kBAIUK,EADE9C,EAAQ,EACpB8C,uIAEAA,iEAIQ/D,EAAIA,OAAOA,eACnB0D,KAAA,SAAAK,GAEAL,KAAA,2BACAA,KAAA,KAAAjD,GACAiD,KAAA,QAAAjD,GACAiD,KAAA,iBACAA,KAAA,kCACAM,GAAA,2BACU,IAAV,YACU,KAAV,uBACUrF,EAAVA,sCAGAqF,GAAA,0BACU,IAAV,YACUrF,EAAVA,oCAGAqF,GAAA,oBACU,IAAV,YACA,yBACUvE,OAAVA,4CAEAoE,OAAA,aACAI,KAAAvB,GAIM,IAAIwB,EAAMlE,EAAI6D,OAAO,QAC3BH,KAAA,wBACAA,KAAA,iBACAA,KAAA,kCACAA,KAAA,cACAS,MAAA,wBACAT,KAAA,iBACAS,MAAA,gBACAF,KAAA3C,QAEM,GAAI4C,EAAIE,OAAOC,wBAA0BpD,IACvCiD,EAAIA,KAAKA,EAAQA,QAAQA,IACrBA,EAAIE,OAAOC,wBAA0BpD,GAAO,CAC9C,IAAIqD,EAAWhD,EAAQT,QAAQ0D,QAAO,SAAhD,sCACUD,EAAWA,EAASA,QAAQA,MAAOA,IAAIA,QAAQA,MAAOA,IACtDJ,EAAIA,KAAKA,GACLA,EAAIE,OAAOC,wBAA0BpD,EAAQ,GAAMD,IAErDkD,EAAIA,KAAKA,IAAKA,KAAKA,EAAaA,IAATA,GACvBA,EAAIA,MAAMA,OAAQA,KAAKA,OACvBA,EAAIA,KAAKA,QAASA,iBAM1BM,UA5VJ,SA4VAxE,EAAAsB,EAAAvB,EAAAkB,EAAAD,EAAAf,GAEM,IAAIwE,EAAQ,CAAC,EAAGxD,EAAQD,EAAe,GACnCjB,IAAY0E,EAAQ,CAAC,EAAGxD,EAAQD,IACpC,IAAI0D,EAAS/G,KAAKgB,GAAGiB,MAAM+E,SACjCC,OAAA,gBACAH,SAEUI,EAAQvE,KAAK4C,MAAM5B,EAAQzB,OAAS,IAAM,GAC9C,GAAIgF,EAAQ,GAAKvD,EAAQX,iBAAkB,CACrCW,EAAQX,mBAAkBkE,EAAQ,GACtC,IAAIC,EAAO9E,EACnB6D,OAAA,KACAH,KAAA,gDACAA,KAAA,YACAS,MAAA,eACAA,MAAA,oBACAT,KAAA,sBACAqB,KAAA,oEAAU,OAAV,qDAIYzD,EAAQd,aACVsE,EAAKA,MAAMA,OAAQA,WAGrBA,EAAKA,UAAUA,SACvBpB,KAAA,iBACAA,KAAA,aACAA,KAAA,aACAA,KAAA,QACAA,KAAA,QACAA,KAAA,yBACA,gCACQmB,EAAQA,EACJvD,EAAQd,cAAaqE,EAAQ,GACjC,IAAIG,EAAYhF,EAAI6D,OAAO,KACnCH,KAAA,gDACAS,MAAA,eACAT,KAAA,sBACAqB,KAAA,qIAEQC,EAAUA,UAAUA,SAC5BtB,KAAA,iBACAA,KAAA,aACAA,KAAA,QACAA,KAAA,SACAA,KAAA,oBAEYpC,EAAQd,aACVwE,EAAUA,MAAMA,OAAQA,WAG1B,IAAIC,EAAYjF,EAAI6D,OAAO,QACnCH,KAAA,qBACAA,KAAA,eACAA,KAAA,cACAS,MAAA,wBACAT,KAAA,kCACAS,MAAA,eACAA,MAAA,oBACAT,KAAA,sBACAO,KAAA3C,UAEQtB,EAAIA,OAAOA,OAAQA,QAC3BkF,OAAA,WAAU,OAAV,sBACAxB,KAAA,iBAAU,OAAV,SACAA,KAAA,iBAAU,OAAV,OACAS,MAAA,8BACAT,KAAA,kCACAA,KAAA,sBACAA,KAAA,qBAAU,OAAV,aACAA,KAAA,sBAAU,OAAV,YAEQuB,EAAUA,OAAOA,WAAWA,YAAYA,EAAUA,UAItDE,cA1aJ,SA0aAnF,EAAAqC,EAAAzC,EAAAK,GACM,IAAK,IAAIwB,EAAI,EAAGA,EAAIY,EAAUxC,OAAQ4B,IAAK,CACzClC,QAAQA,IAAIA,GACZ,IAAI+B,EAAU,CACZpD,KAAMA,EAAUA,GAAGA,KACnB0C,kBAAmBA,EAAUA,GAAGA,kBAChCC,QAASA,CAACA,EAAUA,GAAGA,YAAYA,OAAOA,EAAUA,GAAGA,WAAWA,MAAMA,YACxEiB,MAAOA,EAAUA,GAAGA,MACpBC,KAAMA,EAAUA,GAAGA,KACnBqD,IAAKA,KACLvF,OAAQA,EAAlBA,mBACUY,GAAIA,EAAUA,GAAGA,kBAAoBA,IAAMA,EAAUA,GAAGA,WACxDe,QAASA,EAAUA,GAAGA,QACtBmB,YAAaA,EAAUA,GAAGA,aAExBU,EAAMhB,EAAUZ,GAAGM,KAAOM,EAAUZ,GAAGK,MACvCf,EAAS,GACTC,EAAeD,EAAS,IACxBE,EAAQtD,KAAKgC,eAAeC,EAAOyD,GAAOrC,EAC1CC,EAAQ,IACVD,EAAeA,KAAKA,eAAeA,EAAOA,GAC1CC,EAAQA,IAEA,IAANQ,GAIZ,2BAHU9D,KAAK6E,UAAUxC,EAAKsB,EAASL,EAAOF,EAAQC,EAAcf,EAAQL,GAClEK,EAASA,EAASA,EAAQA,KAShCoF,YA5cJ,SA4cArF,EAAAsB,EAAAL,EAAAF,EAAAd,EAAAqF,EAAAC,GAIM,IAAIC,GAAWvE,EAAQ,IAAMA,EAAQ,KAAO,GACxCwE,EAAUnE,EAAQQ,MAAQR,EAAQQ,MAAQ,EAE9C,GAAIyD,EAAM,CACRvF,EAAIA,OAAOA,OAAQA,QAC3B0D,KAAA,IAAAzC,QACAyC,KAAA,cACAS,MAAA,8BACAT,KAAA,iDACAA,KAAA,QAAA8B,GACA9B,KAAA,cACAA,KAAA,QAAA6B,GACAvB,GAAA,2BACU,IAAV,YACUrF,EAAVA,+DACU,KAAV,0BAEAqF,GAAA,0BACU,IAAV,YACUrF,EAAVA,iEAEAqF,GAAA,oBACU,IAAV,YACA,+BACU,GAAV,GACY,IAAZ,yBACYvE,OAAZA,6CAIQ,IAAIiG,EAAM1F,EAAI6D,OAAO,aAC7BH,KAAA,IAAAzC,QACAyC,KAAA,cACAA,KAAA,iDACAA,KAAA,QAAA8B,GACA9B,KAAA,SAAA8B,GAOArB,MAAA,0BAEa7C,EAAQZ,MAAQY,EAAQ8D,IAC3BM,EAAIA,KAAKA,aAAcA,iBAAmBA,EAAQA,IAAMA,SAExDA,EAAIA,KAAKA,aAAcA,gDACvBA,EAAIA,MAAMA,aAAcA,aAK9BC,eArgBJ,SAqgBAC,GAEM,IAAK,IAAInE,EAAI,EAAGA,EAAImE,EAAS/F,OAAQ4B,IAAK,CACxC,IAAIoE,EAAUD,EAASnE,GACvB,GAAIoE,EAAQC,UAAUjG,OAAS,EAC7B,IAAK,IAAIyC,EAAI,EAAGA,EAAIuD,EAAQC,UAAUjG,OAAS,EAAGyC,IAChD,GAAIuD,EAAQC,UAAUxD,EAAI,GAAKuD,EAAQE,QAAQzD,GAAK,IAAK,CACvD,IAAI0D,EAAalD,KAAKC,MAAMD,KAAKE,UAAU6C,IAC3CG,EAAWA,UAAYA,EAAQA,UAAUA,MAAMA,EAAGA,EAAIA,GACtDA,EAAWA,QAAUA,EAAQA,QAAQA,MAAMA,EAAGA,EAAIA,GAClDJ,EAASA,GAAGA,UAAYA,EAAQA,UAAUA,MAAMA,EAAIA,GACpDA,EAASA,GAAGA,QAAUA,EAAQA,QAAQA,MAAMA,EAAIA,GAChDA,EAASA,KAAKA,GACd,OAKR,OAAOA,GAKTK,uBA5hBJ,SA4hBAjG,EAAAsB,EAAAL,EAAAF,EAAAC,EAAAf,EAAAiG,GAAA,WACUZ,EAAa,GAGjB,GAAIhE,EAAQsE,SAAU,CACpBtE,EAAQA,SAAWA,KAAKA,eAAeA,EAAQA,UAC/CA,EAAQA,SAAWA,EAAQA,SAASA,QAAOA,SAAnDA,GAAA,4BAGQA,EAAQA,SAASA,MAAKA,SAA9BA,KAAA,6EAEQ,IAAIG,EAAI,EAER,MAAOA,EAAIH,EAAQsE,SAAS/F,OAAQ,CAClC,IAAIyC,EAAI,EAEJ6D,GAAU,EAId,MAAO7D,EAAIb,IAAM0E,EAAS,CAExB,IAAIC,EAAS9F,KAAK+F,IAA9B,oDACgBC,EAAShG,KAAK+F,IAA9B,oDACgBE,EAAOjG,KAAKkG,IAA5B,kDACgBC,EAAOnG,KAAKkG,IAA5B,kDAEgBJ,GAAUE,GAAUC,GAAQE,GAC9BnF,EAAQA,SAASA,GAAGA,cAAgBA,EAAQA,SAASA,GAAGA,aACxDA,EAAQA,SAASA,OAAOA,EAAGA,GAC3B6E,GAAUA,IAExB,mBACAI,qBACcjF,EAAQA,SAASA,GAAGA,cAAgBA,EAAQA,SAASA,GAAGA,aAExDA,EAAQA,SAASA,GAAGA,UAAYA,CAACA,KAAKA,IAAIA,EAAQA,IAClDA,EAAQA,SAASA,GAAGA,QAAUA,CAACA,KAAKA,IAAIA,EAAMA,IAC9CA,EAAQA,SAASA,OAAOA,EAAGA,GAC3B6E,GAAUA,GAEZ7D,IAGG6D,GACH1E,IAKJH,EAAQA,SAAWA,EAAQA,SAASA,QAAOA,SAAnDA,GAAA,6GAEQA,EAAQA,SAASA,SAAQA,SAAjCA,GACU,IAAIM,EAAQ,EAAtB,iCACU,KAAIiE,EAAQC,UAAY,GAAxB,CAGA,IAAIY,EAAM,EAApB,gDACU,KAAIb,EAAQE,QAAUzE,EAAQzB,QAA9B,CAIA,IAAI8G,EAAgB,EAA9B,kBACA/B,OAAA,OAEAH,MAAA,WACAmC,OAEcC,EAAe7G,EAC7B6D,OAAA,KACAH,KAAA,+CACAA,KAAA,YACAS,MAAA,gBACAA,MAAA,oBACAY,KAAA,iFAGU,EAAV,sCACArB,KAAA,kBACAA,KAAA,UACAA,KAAA,UACAA,KAAA,QACAA,KAAA,KAAA4B,GACA5B,KAAA,oBAEU,IAAIoD,EAAgB9G,EAAI6D,OAAO,QACzCqB,OAAA,WAAY,OAAZ,sBAEAxB,KAAA,iBAAY,OAAZ,kBACAA,KAAA,eACAA,KAAA,cACAS,MAAA,wBACAT,KAAA,kCACAS,MAAA,gBACAA,MAAA,oBACAF,KAAA4B,gBACAnC,KAAA,QAAApC,kCACA6C,MAAA,yBAEUnE,EAAIA,OAAOA,OAAQA,QAC7BkF,OAAA,WAAY,OAAZ,sBACAxB,KAAA,iBAAY,OAAZ,SACAA,KAAA,iBAAY,OAAZ,OACAA,KAAA,QACAA,KAAA,SACAS,MAAA,gBACAT,KAAA,kCACAA,KAAA,qBAAY,OAAZ,aACAA,KAAA,sBAAY,OAAZ,YACAA,KAAA,QAAApC,kCACA0C,GAAA,oBACY,IAAZ,YACYzE,QAAZA,kCACY,IAAZ,yBACYE,OAAZA,4CAEAuE,GAAA,wBACY,KAAZ,0BAGU8C,EAAcA,OAAOA,WAAWA,YAAYA,EAAcA,QAE1D,IAAIC,EAAW,CACb7I,KAAMA,EAAQA,OACd0C,kBAAmBA,EAAQA,kBAC3BkB,MAAOA,EACPC,KAAMA,EACNqD,IAAKA,EAAQA,OACbvF,OAAQA,EAApBA,EACYY,GAAIA,EAAQA,kBAAoBA,IAAMA,EAAQA,OAC9Ce,SAASA,GAGX,EAAV,sEAGQ7D,KAAK0H,YAAYrF,EAAKsB,EAASL,EAAOF,EAAQd,EAAQqF,EAAY,KAItE0B,iBAxqBJ,SAwqBAhH,GAEM,IAAIiH,EAAejH,EAAI6D,OAAO,YACpCH,KAAA,OACAA,KAAA,OACAA,KAAA,oBACAA,KAAA,kBACAA,KAAA,cACAA,KAAA,QAAAjE,mBACAiE,KAAA,aACAA,KAAA,eAEUjE,OAAOyH,YAAczH,OAAO0H,YAC9BF,EAAaA,KAAKA,UAAWA,QAG/BA,EAAaA,GAAGA,aAAaA,SAAUA,EAAGA,GACxC,IAAItI,EAAK,EAAQ,QACjBA,EAAGA,OAAOA,KAAKA,YAAYA,OAAOA,0BAA0BA,KAAKA,SAAUA,UAC3EhB,KAAKwG,MAAMiD,OAAS,aAE5BpD,GAAA,0BACQ,IAAR,YACQrF,EAARA,qFAGMsI,EAAaA,GAAGA,SAASA,SAAUA,EAAGA,GACpC,IAAItI,EAAK,EAAQ,QAEjB,GAAIhB,KAAK0J,WAAWC,UAAUC,QAAQC,MAAM,KAAKC,QAAQ,SAAW,EAClE9I,EAAGA,OAAOA,KAAKA,YAAYA,QAAQA,QAAQA,GAC3CA,EAAGA,UAAUA,QAAQA,aAAaA,SAASA,KAAMA,KAAKA,UAAWA,cACjEA,EAAGA,UAAUA,eAAeA,aAAaA,SAASA,KAAMA,KAAKA,UAAWA,OAClF,CACUA,EAAGA,UAAUA,SAASA,UAAUA,eAAeA,KAAKA,UAAWA,GAC/DA,EAAGA,UAAUA,SAASA,UAAUA,eAAeA,KAAKA,UAAWA,SAC/DA,EAAGA,UAAUA,SAASA,UAAUA,eAAeA,aAAaA,SAASA,KAAMA,KAAKA,UAAWA,IAE3FA,EAAGA,UAAUA,SAASA,UAAUA,eAAeA,KAAKA,UAAWA,GAC/DA,EAAGA,UAAUA,SAASA,UAAUA,eAAeA,KAAKA,UAAWA,SAC/DA,EAAGA,UAAUA,SAASA,UAAUA,eAAeA,aAAaA,SAASA,KAAMA,KAAKA,UAAWA,GAE3FA,EAAGA,UAAUA,UAAUA,aAAaA,SAASA,KAAMA,KAAKA,aAAaA,WACnE,IAAI+I,EAAY/I,EAAG+I,UAAU/I,EAAGgJ,OAAOhK,MAAM+F,KAAK,cAClD,MAAO,aAAegE,EAAUE,UAAU,GAAK,YAGjDjJ,EAAGA,UAAUA,QAAQA,QAAQA,QAAQA,GACrCA,EAAGA,UAAUA,QAAQA,aAAaA,SAASA,KAAMA,KAAKA,UAAWA,cACjEA,EAAGA,UAAUA,eAAeA,aAAaA,SAASA,KAAMA,KAAKA,UAAWA,GAExEA,EAAGA,OAAOA,KAAKA,YAAYA,QAAQA,QAAQA,GAC3CA,EAAGA,OAAOA,MAAMA,KAAKA,UAAWA,QAEhCA,EAAGA,OAAOA,KAAKA,YAAYA,UAAUA,eAAeA,KAAKA,UAAWA,QACpEA,EAAGA,UAAUA,SAASA,aAAaA,SAASA,KAAMA,KAAKA,UAAWA,eAClEA,EAAGA,UAAUA,qBAAqBA,aAAaA,SAASA,KAAMA,KAAKA,UAAWA,GAE9EA,EAAGA,OAAOA,KAAKA,YAAYA,UAAUA,UAAUA,aAAaA,SAASA,KAAMA,KAAKA,aAAaA,WAC3F,IAAI+I,EAAY/I,EAAG+I,UAAU/I,EAAGgJ,OAAOhK,MAAM+F,KAAK,cAClD,MAAO,aAAegE,EAAUE,UAAU,GAAK,UAOjD,IAHA,IAAIC,EAAOlJ,EAAGgF,UAAU,QACpBmE,GAAY,EACZC,GAAU,EACLzF,EAAI,EAAGA,EAAIuF,EAAK,GAAGhI,OAAQyC,IAC9B3D,EAAGgJ,OAAOE,EAAK,GAAGvF,IAAI0F,QAAQ,UAChCF,GAAYA,GAETA,GAOHnJ,EAAGA,OAAOA,EAAKA,GAAGA,IAAIA,OAAOA,eAAeA,KAAKA,YAAaA,mCAC9DA,EAAGA,OAAOA,EAAKA,GAAGA,IAAIA,OAAOA,0BAA0BA,KAAKA,YAAaA,sBAPzEoJ,GAAUA,EAEVpJ,EAAGA,OAAOA,cAAcA,aAAaA,SAASA,KAAMA,MAAMA,UAAWA,mBACrEA,EAAGA,OAAOA,EAAKA,GAAGA,IAAIA,OAAOA,eAAeA,KAAKA,YAAaA,qBAC9DA,EAAGA,OAAOA,EAAKA,GAAGA,IAAIA,OAAOA,0BAA0BA,KAAKA,YAAaA,qCAMzEoJ,GAEFpJ,EAAGA,OAAOA,cAAcA,aAAaA,SAASA,KAAMA,MAAMA,UAAWA,uBAK3EhB,KAAKsK,eAAejI,EAAK,IAAK,IAGhCiI,eApwBJ,SAowBAjI,EAAAlB,EAAAC,GACM,IAAImJ,EAAevK,KAAKgB,GAAGqB,IAAImI,MACrCC,YAAA,IACAC,YAAA,GACAC,YAAA,WACAC,SAAAjI,WAEUkI,EAAaxI,EAAI6D,OAAO,QAClCH,KAAA,qDACAA,KAAA,IAAAwE,KACAxE,KAAA,eACAA,KAAA,eACAM,GAAA,2BACQ,IAAR,YACQrF,EAARA,iFACQ,KAAR,0BAEAqF,GAAA,0BACQ,IAAR,YACQrF,EAARA,qFAGU8J,EAAQzI,EAAI6D,OAAO,QAC7BH,KAAA,sCACAA,KAAA,uBACAA,KAAA,oBACAA,KAAA,kBACAA,KAAA,sBACAA,KAAA,eACAM,GAAA,2BACQ,IAAR,YACQrF,EAARA,qCACQ,KAAR,0BAEAqF,GAAA,0BACQ,IAAR,YACQrF,EAARA,yCAGM8J,EAAMA,GAAGA,SAASA,SAAUA,EAAGA,GAC7B,IAAI9J,EAAK,EAAQ,QAEjBA,EAAGA,UAAUA,SAASA,UAAUA,eAAeA,KAAKA,UAAWA,GAC/DA,EAAGA,UAAUA,SAASA,UAAUA,eAAeA,KAAKA,UAAWA,SAC/DA,EAAGA,UAAUA,SAASA,UAAUA,eAAeA,aAAaA,SAASA,KAAMA,KAAKA,UAAWA,IAE3FA,EAAGA,UAAUA,SAASA,UAAUA,eAAeA,KAAKA,UAAWA,GAC/DA,EAAGA,UAAUA,SAASA,UAAUA,eAAeA,KAAKA,UAAWA,SAC/DA,EAAGA,UAAUA,SAASA,UAAUA,eAAeA,aAAaA,SAASA,KAAMA,KAAKA,UAAWA,GAE3FA,EAAGA,UAAUA,QAAQA,QAAQA,QAAQA,GACrCA,EAAGA,UAAUA,QAAQA,aAAaA,SAASA,KAAMA,KAAKA,UAAWA,cACjEA,EAAGA,UAAUA,eAAeA,aAAaA,SAASA,KAAMA,KAAKA,UAAWA,GAExEA,EAAGA,UAAUA,UAAUA,aAAaA,SAASA,KAAMA,KAAKA,aAAaA,WACnE,IAAI+I,EAAY/I,EAAG+I,UAAU/I,EAAGgJ,OAAOhK,MAAM+F,KAAK,cAClD,MAAO,aAAegE,EAAUE,UAAU,GAAK,YAGjDjJ,EAAGA,UAAUA,QAAQA,QAAQA,QAAQA,GACrCA,EAAGA,UAAUA,QAAQA,aAAaA,SAASA,KAAMA,KAAKA,UAAWA,cACjEA,EAAGA,UAAUA,eAAeA,aAAaA,SAASA,KAAMA,KAAKA,UAAWA,GAExEA,EAAGA,OAAOA,KAAKA,YAAYA,QAAQA,QAAQA,GAC3CA,EAAGA,OAAOA,KAAKA,YAAYA,UAAUA,eAAeA,KAAKA,UAAWA,QACpEA,EAAGA,OAAOA,KAAKA,YAAYA,UAAUA,eAAeA,KAAKA,UAAWA,QACpEA,EAAGA,UAAUA,SAASA,aAAaA,SAASA,KAAMA,KAAKA,UAAWA,eAClEA,EAAGA,UAAUA,qBAAqBA,aAAaA,SAASA,KAAMA,KAAKA,UAAWA,GAE9EA,EAAGA,OAAOA,KAAKA,YAAYA,UAAUA,UAAUA,aAAaA,SAASA,KAAMA,KAAKA,aAAaA,WAC3F,IAAI+I,EAAY/I,EAAG+I,UAAU/I,EAAGgJ,OAAOhK,MAAM+F,KAAK,cAClD,MAAO,aAAegE,EAAUE,UAAU,GAAK,UAOjD,IAHA,IAAIC,EAAOlJ,EAAGgF,UAAU,QACpBmE,GAAY,EACZC,GAAU,EACLzF,EAAI,EAAGA,EAAIuF,EAAK,GAAGhI,OAAQyC,IAC9B3D,EAAGgJ,OAAOE,EAAK,GAAGvF,IAAI0F,QAAQ,UAChCF,GAAYA,GAETA,GAMHnJ,EAAGA,OAAOA,cAAcA,aAAaA,SAASA,KAAMA,MAAMA,UAAWA,mBACrEA,EAAGA,OAAOA,EAAKA,GAAGA,IAAIA,OAAOA,eAAeA,KAAKA,YAAaA,mCAC9DA,EAAGA,OAAOA,EAAKA,GAAGA,IAAIA,OAAOA,0BAA0BA,KAAKA,YAAaA,sBAPzEoJ,GAAUA,EACVpJ,EAAGA,OAAOA,cAAcA,aAAaA,SAASA,KAAMA,MAAMA,UAAWA,mBACrEA,EAAGA,OAAOA,EAAKA,GAAGA,IAAIA,OAAOA,eAAeA,KAAKA,YAAaA,qBAC9DA,EAAGA,OAAOA,EAAKA,GAAGA,IAAIA,OAAOA,0BAA0BA,KAAKA,YAAaA,qCAOzEoJ,GACFpJ,EAAGA,OAAOA,cAAcA,aAAaA,SAASA,KAAMA,MAAMA,UAAWA,sBAIzE6J,EAAWA,GAAGA,SAASA,SAAUA,EAAGA,GAClC,IAAI7J,EAAK,EAAQ,QAEjBA,EAAGA,UAAUA,SAASA,UAAUA,eAAeA,KAAKA,UAAWA,GAC/DA,EAAGA,UAAUA,SAASA,UAAUA,eAAeA,KAAKA,UAAWA,SAC/DA,EAAGA,UAAUA,SAASA,UAAUA,eAAeA,aAAaA,SAASA,KAAMA,KAAKA,UAAWA,IAE3FA,EAAGA,UAAUA,SAASA,UAAUA,eAAeA,KAAKA,UAAWA,GAC/DA,EAAGA,UAAUA,SAASA,UAAUA,eAAeA,KAAKA,UAAWA,SAC/DA,EAAGA,UAAUA,SAASA,UAAUA,eAAeA,aAAaA,SAASA,KAAMA,KAAKA,UAAWA,GAE3FA,EAAGA,UAAUA,UAAUA,aAAaA,SAASA,KAAMA,KAAKA,aAAaA,WACnE,IAAI+I,EAAY/I,EAAG+I,UAAU/I,EAAGgJ,OAAOhK,MAAM+F,KAAK,cAClD,MAAO,aAAegE,EAAUE,UAAU,GAAK,YAGjDjJ,EAAGA,UAAUA,QAAQA,QAAQA,QAAQA,GACrCA,EAAGA,UAAUA,QAAQA,aAAaA,SAASA,KAAMA,KAAKA,UAAWA,cACjEA,EAAGA,UAAUA,eAAeA,aAAaA,SAASA,KAAMA,KAAKA,UAAWA,GAExEA,EAAGA,OAAOA,KAAKA,YAAYA,QAAQA,QAAQA,GAC3CA,EAAGA,OAAOA,KAAKA,YAAYA,UAAUA,eAAeA,KAAKA,UAAWA,QACpEA,EAAGA,OAAOA,KAAKA,YAAYA,UAAUA,eAAeA,KAAKA,UAAWA,QACpEA,EAAGA,UAAUA,SAASA,aAAaA,SAASA,KAAMA,KAAKA,UAAWA,eAClEA,EAAGA,UAAUA,qBAAqBA,aAAaA,SAASA,KAAMA,KAAKA,UAAWA,GAE9EA,EAAGA,OAAOA,KAAKA,YAAYA,UAAUA,UAAUA,aAAaA,SAASA,KAAMA,KAAKA,aAAaA,WAC3F,IAAI+I,EAAY/I,EAAG+I,UAAU/I,EAAGgJ,OAAOhK,MAAM+F,KAAK,cAClD,MAAO,aAAegE,EAAUE,UAAU,GAAK,UAOjD,IAHA,IAAIC,EAAOlJ,EAAGgF,UAAU,QACpBmE,GAAY,EACZC,GAAU,EACLzF,EAAI,EAAGA,EAAIuF,EAAK,GAAGhI,OAAQyC,IAC9B3D,EAAGgJ,OAAOE,EAAK,GAAGvF,IAAI0F,QAAQ,UAChCF,GAAYA,GAETA,GAMHnJ,EAAGA,OAAOA,EAAKA,GAAGA,IAAIA,OAAOA,eAAeA,KAAKA,YAAaA,mCAC9DA,EAAGA,OAAOA,EAAKA,GAAGA,IAAIA,OAAOA,0BAA0BA,KAAKA,YAAaA,sBANzEoJ,GAAUA,EACVpJ,EAAGA,OAAOA,cAAcA,aAAaA,SAASA,KAAMA,MAAMA,UAAWA,mBACrEA,EAAGA,OAAOA,EAAKA,GAAGA,IAAIA,OAAOA,eAAeA,KAAKA,YAAaA,qBAC9DA,EAAGA,OAAOA,EAAKA,GAAGA,IAAIA,OAAOA,0BAA0BA,KAAKA,YAAaA,qCAMzEoJ,GACFpJ,EAAGA,OAAOA,cAAcA,aAAaA,SAASA,KAAMA,MAAMA,UAAWA,uBAK3E+J,eA75BJ,SA65BAC,GACM,GAAIlJ,OAAOyH,YAAczH,OAAO0H,WAC9BxJ,KAAKgB,GAAGgF,UAAU,eAAeD,KAAK,UAAW,QACjD/F,KAAKgB,GAAGgF,UAAU,eAAeD,KAAK,UAAW,QACjD/F,KAAKgB,GAAGgF,UAAU,QAAQqE,QAAQ,QAAQ,GAC1CrK,KAAKgB,GAAGgF,UAAU,SAASiF,aAAaC,SAAS,KAAMnF,KAAK,UAAW,eACvE/F,KAAKgB,GAAGgF,UAAU,qBAAqBiF,aAAaC,SAAS,KAAMnF,KAAK,UAAW,GACnF/F,KAAKgB,GAAGgF,UAAU,UAAUiF,aAAaC,SAAS,KAAMnF,KAAK,aAAa,WACxE,IAAI/E,EAAK,EAAQ,QACb+I,EAAY/I,EAAG+I,UAAU/I,EAAGgJ,OAAOhK,MAAM+F,KAAK,cAClD,MAAO,aAAegE,EAAUE,UAAU,GAAK,eAEzD,4CACQjK,KAAKgB,GAAGgF,UAAU,eAAeD,KAAK,UAAW,SACjD/F,KAAKgB,GAAGgF,UAAU,eAAeD,KAAK,UAAW,SACjD/F,KAAKgB,GAAGgF,UAAU,QAAQqE,QAAQ,QAAQ,GAC1CrK,KAAKgB,GAAGgF,UAAU,QAAQiF,aAAaC,SAAS,KAAKnF,KAAK,UAAW,cACrE/F,KAAKgB,GAAGgF,UAAU,eAAeiF,aAAaC,SAAS,KAAKnF,KAAK,UAAW,GAC5E/F,KAAKgB,GAAGgF,UAAU,UAAUiF,aAAaC,SAAS,KAAMnF,KAAK,aAAa,WACxE,IAAI/E,EAAK,EAAQ,QACb+I,EAAY/I,EAAG+I,UAAU/I,EAAGgJ,OAAOhK,MAAM+F,KAAK,cAClD,MAAO,aAAegE,EAAUE,UAAU,GAAK,gBAEzD,CACQ,IAAIkB,EAASnL,KAAKgB,GAAGgJ,OAAO,SAO5B,GANAhK,KAAKgB,GAAGgF,UAAU,eAAeD,KAAK,UAAW,SACjD/F,KAAKgB,GAAGgF,UAAU,eAAeD,KAAK,UAAW,SACjD/F,KAAKgB,GAAGgF,UAAU,QAAQqE,QAAQ,QAAQ,GAC1CrK,KAAKgB,GAAGgF,UAAU,QAAQiF,aAAaC,SAAS,KAAKnF,KAAK,UAAW,cACrE/F,KAAKgB,GAAGgF,UAAU,eAAeiF,aAAaC,SAAS,KAAKnF,KAAK,UAAW,GAEvEiF,EAgBb,CACUG,EAAOA,QAAQA,QAAQA,GACvBA,EAAOA,OAAOA,eAAeA,KAAKA,UAAWA,QAC7CA,EAAOA,UAAUA,eAAeA,KAAKA,UAAWA,QAChDA,EAAOA,aAAaA,SAASA,KAAMA,KAAKA,UAAWA,eACnDnL,KAAKgB,GAAGgF,UAAU,qBAAqBiF,aAAaC,SAAS,KAAKnF,KAAK,UAAW,GAClF/F,KAAKgB,GAAGgF,UAAU,UAAUiF,aAAaC,SAAS,KAAMnF,KAAK,aAAa,WACxE,IAAI/E,EAAK,EAAQ,QACb+I,EAAY/I,EAAG+I,UAAU/I,EAAGgJ,OAAOhK,MAAM+F,KAAK,cAClD,MAAO,aAAegE,EAAUE,UAAU,GAAK,YAEjDkB,EAAOA,UAAUA,UAAUA,aAAaA,SAASA,KAAMA,KAAKA,aAAaA,WACvE,IAAInK,EAAK,EAAQ,QACb+I,EAAY/I,EAAG+I,UAAU/I,EAAGgJ,OAAOhK,MAAM+F,KAAK,cAClD,MAAO,aAAegE,EAAUE,UAAU,GAAK,UAOjD,IAHA,IAAIC,EAAOlK,KAAKgB,GAAGgF,UAAU,QACzBmE,GAAY,EACZC,GAAU,EACLzF,EAAI,EAAGA,EAAIuF,EAAK,GAAGhI,OAAQyC,IAC9B3E,KAAKgB,GAAGgJ,OAAOE,EAAK,GAAGvF,IAAI0F,QAAQ,UACrCF,GAAYA,GAETA,GAMHnK,KAAKgB,GAAGgJ,OAAOE,EAAK,GAAGvF,IAAIqF,OAAO,eAAejE,KAAK,YAAa,mCACnE/F,KAAKgB,GAAGgJ,OAAOE,EAAK,GAAGvF,IAAIqF,OAAO,0BAA0BjE,KAAK,YAAa,sBAN9EqE,GAAUA,EACVpK,KAAKgB,GAAGgJ,OAAO,cAAciB,aAAaC,SAAS,KAAM1E,MAAM,UAAW,mBAC1ExG,KAAKgB,GAAGgJ,OAAOE,EAAK,GAAGvF,IAAIqF,OAAO,eAAejE,KAAK,YAAa,qBACnE/F,KAAKgB,GAAGgJ,OAAOE,EAAK,GAAGvF,IAAIqF,OAAO,0BAA0BjE,KAAK,YAAa,qCAM9EqE,GACFpK,KAAKgB,GAAGgJ,OAAO,cAAciB,aAAaC,SAAS,KAAM1E,MAAM,UAAW,wBAnD5E2E,EAASA,KAAKA,GAAGA,OAAOA,QAAQA,QAAQA,QAAQA,GAChDnL,KAAKgB,GAAGgJ,OAAO,eAAejE,KAAK,UAAW,QAC9CoF,EAAOA,UAAUA,eAAeA,KAAKA,UAAWA,QAChDnL,KAAKgB,GAAGgF,UAAU,SAASiF,aAAaC,SAAS,KAAKnF,KAAK,UAAW,eACtE/F,KAAKgB,GAAGgF,UAAU,qBAAqBiF,aAAaC,SAAS,KAAKnF,KAAK,UAAW,GAClF/F,KAAKgB,GAAGgF,UAAU,UAAUiF,aAAaC,SAAS,KAAMnF,KAAK,aAAa,WACxE,IAAI/E,EAAK,EAAQ,QACb+I,EAAY/I,EAAG+I,UAAU/I,EAAGgJ,OAAOhK,MAAM+F,KAAK,cAClD,MAAO,aAAegE,EAAUE,UAAU,GAAK,YAEjDkB,EAAOA,UAAUA,UAAUA,aAAaA,SAASA,KAAMA,KAAKA,aAAaA,WACvE,IAAInK,EAAK,EAAQ,QACb+I,EAAY/I,EAAG+I,UAAU/I,EAAGgJ,OAAOhK,MAAM+F,KAAK,cAClD,MAAO,aAAegE,EAAUE,UAAU,GAAK,YAgDvDmB,iBA1/BJ,SA0/BAC,GACM,IAAIC,EAAWtL,KAAKuL,WAAWF,GAC3BG,EAASF,EAAW,EACxBD,EAAKA,KAAKA,CAAhB9K,yBAAA2B,WACM,IAAIuJ,EAAUzL,KAAK0L,eAAeL,GAClCI,EAAQA,GAAGA,MAEX,IAAIE,EAAY3L,KAAK0L,eAAeD,EAAQ,IAC5C,MAAO,CAACE,EAAU,GAAIA,EAAU,GAAIF,EAAQ,KAK9CC,eAvgCJ,SAugCAL,GACM,IAAIC,EAAWtL,KAAKuL,WAAWF,GAC3BO,EAAQP,EAAKnJ,OAAS,EAC1B,MAAOlC,KAAKuL,WAAWF,EAAK1F,MAAMiG,IAAU,EAAlD,GACQ,GAAI5L,KAAKuL,WAAWF,EAAK1F,MAAMiG,EAAQ,KAAO,EAAtD,EACU,MAEFA,IAEF,MAAO,CAACP,EAAK1F,MAAM,EAAGiG,GAAQP,EAAK1F,MAAMiG,KAG3CL,WAnhCJ,SAmhCAF,GACM,OAAOA,EAAKzE,QAAO,SAAUiF,EAAMC,GAAzC,wBAIIC,eAxhCJ,SAwhCA1K,EAAAM,GAAA,gLACA,kBADA,OAEA,IADAqK,EADA,OAEA,mBACArK,wCAHA,OAKAA,sBACA,gCANA,kBAQAA,GARA,8CAYIsK,cApiCJ,SAoiCAC,GAAA,sLAcA,IAbAC,EAAA,GACAD,uBAEA,oBACA,IAEAE,oBAGAA,aAGAC,EAAA,GACA,iCACA,2BACA,aACAF,0BACA,EAEA,oBACAG,KAFAA,OAMAR,IACA,8BACA,kCAiBA,IAfAS,+CACAT,oCACAA,2BACAA,yBACAK,sBACAE,gBAGA,sBACAF,uCACAL,4CAAA,6BAKA,6BACAA,yDACAA,uDACA,yBACAA,wBAOA,IAJAA,4CAAA,qBAGAU,KACA,2BACA,mCACAvI,oCACA,MACAA,KAEAC,mCACAsI,QAAAC,sCAAAtI,QAAAC,UAKA,cACA,iCACA,6CACA0H,qEAEA,2CACAA,iEAKAA,YAIAA,gBACAO,UApEA,IAsEAF,sBACAE,iBAtFA,yBAyFAA,GAzFA,8CA4FIK,cAhoCJ,SAgoCAC,EAAAC,GACM,IAAIC,EAAIF,EAAGzK,OACP4B,EAAI,EACR,MAAOA,EAAI+I,GAAKF,EAAGG,OAAOhJ,KAAO8I,EAAGE,OAAOhJ,GAAjDA,IACM,OAAO6I,EAAGJ,UAAU,EAAGzI,IAIzBiJ,aAxoCJ,SAwoCAjK,GAAA,4JACAkK,EADA,UACAlL,eADA,+BACAgB,GACAmK,EAAA,GAFA,SAGAzL,KACAC,aACAF,QAEAG,MAAA,YACA,gCACAuL,2DATA,cAYA,2BACArL,oFAbA,kBAeAqL,GAfA,8CAkBIC,mBA1pCJ,SA0pCAhB,GAAA,gKACApI,EAAA,EADA,YACAA,YADA,gCAEA,qCAFA,OAEAZ,EAFA,OAGAgJ,eAHA,OACApI,IADA,+CAKAoI,GALA,+CAQIiB,WAlqCJ,SAkqCArK,GAAA,4JACAsK,EADA,UACAtL,eADA,+BACAgB,GACAuK,EAAA,GAFA,SAGA7L,KACAC,aACAF,QAEAG,MAAA,YACA,gBACA2L,uBAEAA,+BAXA,gCAaAA,GAbA,8CAgBIC,sBAlrCJ,SAkrCApB,GAAA,kKACApI,EAAA,EADA,YACAA,YADA,wBAEAyJ,EAAA,CACAC,mCAEA5L,eACA6L,EANA,UAMA3L,eANA,qCAOAN,KACAC,aACAF,MACAmM,WAEAhM,MAAA,YACAE,eACA,2BACAsK,gBACAA,gBAEAA,8BACAA,oCAnBA,OACApI,IADA,gDAuBA,oBAvBA,+CA0BI6J,wBA5sCJ,SA4sCA1F,GACM,OAAiB,IAAbA,EACK,EAEAA,EAASrB,QAAO,SAAUiF,EAAMC,GAA/C,gCAII8B,kBAptCJ,SAotCA1B,GAAA,gKACApI,EAAA,EADA,YACAA,YADA,wBAEAlC,oCAFA,SAKA,6CALA,OAKAiC,EALA,OAMAqI,eANA,OACApI,IADA,gDAQAoI,GARA,+CAYI2B,WAhuCJ,SAguCA/K,GAAA,4JACAvB,EADA,UACAO,eADA,8BACAgB,GAEAe,EAAA,GAHA,SAIArC,KACAC,aACAF,QAEAG,MAAA,YACA,SACAmC,aAVA,gCAaAA,GAbA,8CAiBIiK,mBAjvCJ,SAivCAC,GAAA,gKACAR,EAAA,CACAC,cAEAQ,EAJA,UAIAlM,eAJA,mBAKA+B,EAAA,GACAoK,EAAA,GANA,SAOAzM,KACAC,aACAF,MACAmM,WAEAhM,MAAA,YACA,8BACAmC,SACAjC,2BACA,qCACAqM,QAAA9J,qBAAAC,wBAjBA,gCAqBA6J,GArBA,8CAyBIC,cA1wCJ,SA0wCA7M,EAAAM,GAAA,6KACAuK,EAAA,GADA,SAGA,sBAHA,OAGAvK,EAHA,6CAKAiK,GALA,wFAMAjK,aAEA4L,GACAC,mCAEAW,gDAXA,SAYA3M,KACAC,aACAF,MACAmM,WAEAhM,MAAA,YACA,SACA,qBACA0M,sBACA,eACAxM,sCACAsK,QAAA3L,kBAAA0C,yCAAAmL,oBAAAC,uBAAAnM,gBAGAkM,iCACAlC,QAAA3L,kBAAA0C,yCAAAmL,oBAAAC,uBAAAnM,kBAEA,iDACAR,MAAA,YACAwK,oBA/BA,0CAKAN,EAAA,EALA,YAKAA,YALA,0CAKAA,GALA,eAKAA,IALA,wCAkCA,uBAlCA,eAkCAM,EAlCA,yBAmCAA,GAnCA,+CAsCIoC,aAhzCJ,SAgzCAxL,GAAA,4JACAkK,EADA,UACAlL,eADA,gCACAgB,GACAmK,EAAA,GAFA,SAGAzL,KACAC,aACAF,QAEAG,MAAA,YACA,kBACAuL,aATA,gCAYAA,GAZA,gDCj3CkV,I,wBCQ9UsB,EAAY,eACd,EACAzO,EACAQ,GACA,EACA,KACA,WACA,MAIa,aAAAiO,E,gCCnBfC,EAAOC,QAAU,IAA0B,gC,+DCA3C,IAAIC,EAAMC,EAAQ,QAEdC,EAAS,SAAU9L,EAAI+L,GACzB,IAAIC,EAAO9O,KACXA,KAAK8C,GAAKA,EACV,IAAIiM,EAAWC,aAAaC,QAAQjP,KAAK8C,IAEzC,GADA9C,KAAKkP,MAAQ,IAAIR,EAAIG,GACJ,OAAbE,OACG,CACL,IAAII,EAAUhK,KAAKC,MAAM2J,GACzBI,EAAQC,SAAQ,SAAUC,GAC1BP,EAAKI,MAAMI,IAAID,EAAME,IAAKF,EAAMG,YAKpCZ,EAAOa,UAAUC,YAAc,SAAUnP,EAAM0C,EAAmB0M,GAChE,IAAIC,EAAO,CAAErP,KAAMA,EAAM0C,kBAAmBA,EAAmB0M,OAAQA,GACvE3P,KAAKkP,MAAMI,IAAIrM,EAAoB0M,EAAQC,GAC3C5P,KAAK6P,QAGPjB,EAAOa,UAAUI,KAAO,WACtB,IAAIC,EAAY,GAChB9P,KAAKkP,MAAME,SAAQ,SAAUI,EAAOD,GAClCO,EAAUC,KAAK,CAAER,IAAKA,EAAKC,MAAOA,OAEpC,IAAIQ,EAAY7K,KAAKE,UAAUyK,GAC/BlO,QAAQqO,IAAI,cAAeH,GAC3Bd,aAAakB,QAAQlQ,KAAK8C,GAAIkN,IAGhCpB,EAAOa,UAAUU,OAAS,WACxB,IAAIC,EAAM,GAIV,OAHApQ,KAAKkP,MAAME,SAAQ,SAAUI,GAC5BY,EAAIL,KAAKP,MAEHY,GAGTxB,EAAOa,UAAUY,QAAU,SAAUC,EAAoB7I,GACvD,IAAI8I,EAAQ,GACZA,EAAMD,mBAAqBA,EAC3BC,EAAM9I,IAAMA,EACZzH,KAAKkP,MAAMa,KAAKQ,IAGlB3B,EAAOa,UAAUe,eAAiB,SAAUvN,GAC1C,IAAIwE,GAAM,EAMV,OALAzH,KAAKkP,MAAME,SAAQ,SAAUI,GACvBA,EAAMvM,mBAAqBA,IAC7BwE,EAAM+H,EAAMG,WAGTlI,GAGTmH,EAAOa,UAAUgB,qBAAuB,SAAUlQ,GAChD,IAAIkH,GAAM,EAMV,OALAzH,KAAKkP,MAAME,SAAQ,SAAUI,GACvBA,EAAMjP,MAAQA,IAChBkH,EAAM+H,EAAMG,WAGTlI,GAGTmH,EAAOa,UAAUiB,UAAY,SAAUzN,EAAmBwE,GACxDzH,KAAKkP,MAAME,SAAQ,SAAUI,GACvBA,EAAMvM,mBAAqBA,IAC7BuM,EAAMG,OAASlI,MAGnBzH,KAAK6P,QAGPrB,EAAOC,QAAUG,G,6DC5EjB,W,gDCAAJ,EAAOC,QAAU,IAA0B,sC,uBCA3CD,EAAOC,QAAU,IAA0B,uB,uBCA3CD,EAAOC,QAAU,IAA0B,0B,6DCA3C,W,oCCAA,W,6DCAA,W,qECAAD,EAAOC,QAAU,sW,oCCAjB,W,2HCAAD,EAAOC,QAAU,IAA0B,yB,kCCA3C,W,6DCAA,W,sICAA,W,oCCAA,W,oCCAA,W,oCCAA,W,qBCAAD,EAAOC,QAAU,IAA0B,oC,oCCA3C,W,oCCAA,W,6DCAA,W,qBCsBA,IAAIG,EAASD,EAAQ,QAErBA,EAAQ,QAER,IAAIgC,EAAsB,GACtBC,EAAyB,GACvBC,EAA2B,SAAUC,GACvCF,EAAuBb,KAAKe,IAG9BC,QAAQC,cAAgB,IAAIpC,EAAO,kBAAmB+B,GACtDI,QAAQE,UAAY,IAAIrC,EAAO,YAAa+B,GAC5CE,EAAyBE,QAAQC,gB,2DClCnC,W,uBCAAxC,EAAOC,QAAU,IAA0B,0B,kCCA3C,W,0CCAAD,EAAOC,QAAU,s/I,yCCAjB,IAAI3O,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAC+Q,YAAY,QAAQ,CAAC/Q,EAAG,oBAAoBA,EAAG,UAAUA,EAAG,YAAYA,EAAG,MAAM,CAACA,EAAG,mBAAmB,GAAGA,EAAG,MAAM,CAACA,EAAG,aAAa,GAAGA,EAAG,MAAM,CAACA,EAAG,gBAAgBA,EAAG,YAAYA,EAAG,WAAW,GAAGA,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,qBAAqBF,EAAG,mBAAmBA,EAAG,QAAQA,EAAG,eAAeA,EAAG,UAAUA,EAAG,SAASA,EAAG,IAAI,CAACE,MAAM,CAAC,KAAQN,EAAIY,KAAS,OAAI,CAACR,EAAG,MAAM,CAAC+Q,YAAY,OAAO7Q,MAAM,CAAC,GAAK,SAASgG,GAAG,CAAC,MAAQtG,EAAIoR,mBAAmB,IAChiB7Q,EAAkB,G,kCCDlB,G,UAAS,WAAa,IAAIP,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,WAAW,CAACF,EAAG,MAAM,CAAC+Q,YAAY,kBAAkB7Q,MAAM,CAAC,GAAK,SAAS,CAACF,EAAG,IAAI,CAACE,MAAM,CAAC,KAAO,UAAUgG,GAAG,CAAC,MAAQtG,EAAIqR,YAAY,CAACjR,EAAG,MAAM,CAACE,MAAM,CAAC,IAAMN,EAAIsR,qBAAqBlR,EAAG,SAASA,EAAG,MAAM,CAAC+Q,YAAY,kBAAkB7Q,MAAM,CAAC,GAAK,aAAa,CAACF,EAAG,IAAI,CAACE,MAAM,CAAC,KAAO,UAAU,CAACF,EAAG,MAAM,CAACE,MAAM,CAAC,IAAMN,EAAIuR,iBAAiBnR,EAAG,SAAS,KAChd,EAAkB,GCDlB,G,oBAAS,WAAa,IAAIJ,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAC+Q,YAAY,wBAAwB7Q,MAAM,CAAC,GAAK,UAAU,CAACF,EAAG,OAAO,CAACE,MAAM,CAAC,GAAK,aAAa,CAAEN,EAAIwR,cAAgBxR,EAAIyR,OAAQrR,EAAG,IAAI,CAAC+Q,YAAY,WAAW7Q,MAAM,CAAC,KAAO,aAAagG,GAAG,CAAC,MAAQ,SAASoL,GAAQ,OAAO1R,EAAI2R,WAAW,eAAe,CAACvR,EAAG,MAAM,CAACE,MAAM,CAAC,IAAMN,EAAI4R,UAAU5R,EAAI6R,GAAG,IAAI7R,EAAI8R,GAAG9R,EAAIwR,YAAYO,WAAW,IAAK,MAAM,KAAK3R,EAAG,SAAS,CAACJ,EAAI6R,GAAG7R,EAAI8R,GAAG9R,EAAIgS,cAAchS,EAAIiS,KAAOjS,EAAIwR,aAAgBxR,EAAIyR,OAAgMzR,EAAIiS,KAA5L7R,EAAG,IAAI,CAAC+Q,YAAY,WAAW7Q,MAAM,CAAC,KAAO,IAAIgG,GAAG,CAAC,MAAQ,SAASoL,GAAQ,OAAO1R,EAAI2R,WAAW,eAAe,CAACvR,EAAG,MAAM,CAACE,MAAM,CAAC,IAAMN,EAAI4R,UAAU5R,EAAI6R,GAAG,0BAAqC7R,EAAIyR,OAA2MzR,EAAIiS,KAAvM7R,EAAG,OAAO,CAACE,MAAM,CAAC,GAAK,cAAc,CAACF,EAAG,IAAI,CAAC+Q,YAAY,aAAa7Q,MAAM,CAAC,KAAO,cAAcgG,GAAG,CAAC,MAAQ,SAASoL,GAAQ,OAAO1R,EAAI2R,WAAW,iBAAiB,CAAC3R,EAAI6R,GAAG,oBAA+B7R,EAAIyR,OAAmmBzR,EAAIiS,KAA/lB7R,EAAG,OAAO,CAACE,MAAM,CAAC,GAAK,WAAW,CAAGN,EAAIkS,aAAaxK,IAA4J1H,EAAIiS,KAA3J7R,EAAG,IAAI,CAAC+Q,YAAY,cAAc7Q,MAAM,CAAC,KAAO,cAAcgG,GAAG,CAAC,MAAQ,SAASoL,GAAQ,OAAO1R,EAAI2R,WAAW,kBAAkB,CAAC3R,EAAI6R,GAAG,YAAsB7R,EAAIkS,aAAaxK,MAAQ1H,EAAIyR,OAAQrR,EAAG,IAAI,CAAC+Q,YAAY,cAAc7Q,MAAM,CAAC,KAAO,cAAcgG,GAAG,CAAC,MAAQ,SAASoL,GAAQ,OAAO1R,EAAI2R,WAAW,kBAAkB,CAAC3R,EAAI6R,GAAG7R,EAAI8R,GAAG9R,EAAIkS,aAAaxK,IAAM,IAAM1H,EAAIkS,aAAaC,UAAUnS,EAAIiS,KAAK7R,EAAG,OAAO,CAACqG,MAAM,CAAE2L,WAAYpS,EAAIqS,WAAa,UAAY,UAAW/R,MAAM,CAAC,GAAK,QAAQgG,GAAG,CAAC,MAAQtG,EAAIsS,WAAW,CAACtS,EAAI6R,GAAG,SAAmB7R,EAAU,OAAEI,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,eAAe,CAACF,EAAG,OAAO,CAAC+Q,YAAY,cAAc,CAAC/Q,EAAG,IAAI,CAAC+Q,YAAY,iBAAiB7Q,MAAM,CAAC,KAAO,cAAcgG,GAAG,CAAC,MAAQ,SAASoL,GAAQ,OAAO1R,EAAI2R,WAAW,qBAAqB,CAACvR,EAAG,SAAS,CAACJ,EAAI6R,GAAG7R,EAAI8R,GAAG9R,EAAIgS,YAAYhS,EAAI6R,GAAG,cAAc7R,EAAI8R,GAAG9R,EAAIyR,QAAQ,KAAKrR,EAAG,MAAMA,EAAG,SAAS,CAACJ,EAAI6R,GAAG7R,EAAI8R,GAAG9R,EAAI0H,QAAQ1H,EAAI6R,GAAG,eAAe7R,EAAI8R,GAAG9R,EAAIuS,WAAW,WAAWvS,EAAIiS,KAAK7R,EAAG,IAAI,CAAC+Q,YAAY,QAAQ7Q,MAAM,CAAC,KAAON,EAAIY,KAAK4R,MAAMlM,GAAG,CAAC,MAAQtG,EAAIoR,oBACjiE,EAAkB,G,sECwCP,GACb5Q,KAAMA,QACNI,KAFF,WAGI,MAAO,CACL8G,IAAKA,KACLkK,OAAQA,EAAQA,QAChBH,OAAQA,KACRc,UAAWA,KACXF,YAAYA,IAGhBI,SAAUA,gBACR7R,KADJ,WAEM,MAAO,CACL4R,KAAMA,OAAMA,MAAMA,OAGtBE,MANJ,WAOM,OAAOlC,EAAA,KAAMmC,MAAMtB,YAEzBuB,gBACA,UACA,cACA,UACA,kBAGEC,MAAOA,CACLH,MAAOA,SAAXA,GACM,IAAII,EAAQ7S,KACP8S,GACHD,EAAMA,iBAIZ9Q,QAASA,CACPsQ,SAAUA,WACR9B,OAAMA,OAAOA,eAAgBA,gBAC7BA,OAAMA,OAAOA,iBAAiBA,GAC9B1O,SAASA,eAAeA,YAAYA,UAAUA,OAAOA,QACrDA,SAASA,eAAeA,YAAYA,WAAaA,QAG5CA,SAASkR,cAAc,gBAC1BC,eACAnR,SAASA,cAAcA,cAAcA,WAAaA,WAEpDA,SAASA,cAAcA,cAAcA,iBAAiBA,SAASA,WAC7DmR,qBACAnR,SAASA,eAAeA,YAAYA,UAAUA,OAAOA,QACrDA,SAASA,eAAeA,YAAYA,WAAaA,YAGrDoR,UAAWA,WACoB,KAAzBnR,OAAOoR,SAASX,KAClBhC,OAAMA,OAAOA,UAAWA,aAEpBzO,OAAOoR,SAASX,KAAKY,SAAS,MAAQrR,OAAOoR,SAASX,KAAKY,SAAS,OACtE5C,OAAMA,OAAOA,UAAWA,OAAOA,SAASA,OAI9CmB,WAAYA,SAAhBA,GACM1R,KAAKoS,YAAa,EAClBpS,KAAKiT,YACLpR,SAASA,iBAAiBA,iBAAiBA,SAAQA,SAAzDA,GACQuR,EAAGA,UAAUA,OAAOA,aAKtBvR,SAASA,cAAcA,IAAMA,GAAWA,WAAaA,WAEiB,IAAlEA,SAASkR,cAAc,UAAUpJ,UAAUG,QAAQ,YAA7DjI,uDACMA,SAASA,cAAcA,UAAUA,UAAYA,cAC7C0O,OAAMA,OAAOA,YAAYA,GACqB,OAA1C1O,SAASkR,cAAc,iBACzBlR,SAASA,cAAcA,eAAeA,UAAYA,SAClD0O,OAAMA,OAAOA,eAAgBA,uBAA0BA,mBACvDA,OAAMA,OAAOA,UAAWA,OAAOA,SAASA,QAG5CY,aAAcA,WAGZnR,KAAKoS,YAAa,EAClB,IAAIK,EAAQ5Q,SAASwR,eAAe,SAChCZ,EAAMa,UAAUC,SAAS,UAC3Bd,EAAMA,UAAUA,OAAOA,QACvBA,EAAMA,UAAUA,IAAIA,SAItBlC,OAAMA,OAAOA,UAAWA,KAAKA,SAC7B1O,SAASA,cAAcA,UAAUA,UAAYA,wBACC,OAA1CA,SAASkR,cAAc,iBAAjClR,oDACMA,SAASA,iBAAiBA,iBAAiBA,SAAQA,SAAzDA,GACQuR,EAAGA,UAAUA,OAAOA,cAGxBI,eAAgBA,WACd3R,SAASA,iBAAiBA,kBAAkBA,SAAQA,SAA1DA,GACQuR,EAAGA,UAAYA,gBAEjBvR,SAASA,iBAAiBA,aAAaA,SAAQA,SAArDA,GACQuR,EAAGA,MAAMA,QAAUA,WAGvBK,QAASA,WACP5R,SAASA,cAAcA,oEAAoEA,MAAMA,QAAUA,OAC3G7B,KAAKwT,mBAGTlS,QAjHF,WAkHItB,KAAKwT,kBAEPE,QApHF,WAqHI,IAAIb,EAAQ7S,KACZ6S,EAAMA,kBAAoBA,EAAMA,QAChC,IAAIc,EAAc,IAAIC,kBAAiB,WACrC,GAAiH,SAA7G/R,SAASkR,cAAc,oEAAoEvM,MAAMqN,QACnGhB,EAAMA,OAASA,KACfA,EAAMA,UAAYA,KAElBtC,OAAMA,OAAOA,eAAgBA,QACrC,CACQ,IAAIuD,EAAWjS,SAASkR,cAAc,oEAAoEgB,UAAUlK,MAAM,MACtHpC,EAAM3F,OAAOiP,QAAQiD,cAAcrE,OAAS,IAAM7N,OAAOiP,QAAQiD,cAAcC,MAAQ,KAAOnS,OAAOiP,QAAQiD,cAAcE,UAAY,IACvIC,EAAYtB,EAAMd,QAAU,IAChCc,EAAMA,OAASA,EAASA,GAAGA,MAAMA,GAAWA,GAC5CA,EAAMA,UAAYA,EAASA,GAAGA,MAAMA,GAAKA,OAI7Cc,EAAYA,QAAQA,SAASA,cAAcA,oEAAqEA,CAC9GS,YAAYA,EAAZC,WAANA,EAAMC,eAANA,MChL8V,I,wBCQ1V/F,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,QCnBX,EAAS,WAAa,IAAIxO,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAC+Q,YAAY,4BAA4B7Q,MAAM,CAAC,GAAK,SAAS,CAACF,EAAG,IAAI,CAAC+Q,YAAY,QAAQ7Q,MAAM,CAAC,KAAO,OAAON,EAAIwU,GAAG,GAAGxU,EAAIwU,GAAG,GAAGpU,EAAG,SAAS,CAACqU,WAAW,CAAC,CAACjU,KAAK,QAAQkU,QAAQ,UAAUjF,MAAOzP,EAAY,SAAE2U,WAAW,aAAarO,GAAG,CAAC,OAAS,CAAC,SAASoL,GAAQ,IAAIkD,EAAgBC,MAAMnF,UAAUoF,OAAOzN,KAAKqK,EAAOqD,OAAOC,SAAQ,SAASC,GAAG,OAAOA,EAAEC,YAAWC,KAAI,SAASF,GAAG,IAAIG,EAAM,WAAYH,EAAIA,EAAEI,OAASJ,EAAExF,MAAM,OAAO2F,KAAOpV,EAAIkV,SAASxD,EAAOqD,OAAOO,SAAWV,EAAgBA,EAAc,IAAI,SAASlD,GAAQ,OAAO1R,EAAIuV,SAAS7D,OAAY,CAACtR,EAAG,SAAS,CAACE,MAAM,CAAC,GAAK,SAAS,SAAW,KAAK,CAACN,EAAI6R,GAAG,YAAYzR,EAAG,SAAS,CAACE,MAAM,CAAC,GAAK,WAAW,CAACN,EAAI6R,GAAG,YAAYzR,EAAG,SAAS,CAACE,MAAM,CAAC,GAAK,aAAa,CAACN,EAAI6R,GAAG,mBACr0B,EAAkB,CAAC,WAAa,IAAI7R,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,IAAI,CAAC+Q,YAAY,MAAM7Q,MAAM,CAAC,GAAK,QAAQ,KAAO,MAAM,CAACN,EAAI6R,GAAG,WAAWzR,EAAG,IAAI,CAAC+Q,YAAY,MAAM7Q,MAAM,CAAC,GAAK,UAAU,KAAO,MAAM,CAACN,EAAI6R,GAAG,aAAa,WAAa,IAAI7R,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,IAAI,CAAC+Q,YAAY,MAAM7Q,MAAM,CAAC,GAAK,aAAa,KAAO,UAAU,CAACN,EAAI6R,GAAG,gBAAgBzR,EAAG,IAAI,CAAC+Q,YAAY,MAAM7Q,MAAM,CAAC,GAAK,YAAY,KAAO,UAAU,CAACN,EAAI6R,GAAG,eAAezR,EAAG,IAAI,CAAC+Q,YAAY,aAAa7Q,MAAM,CAAC,GAAK,UAAU,KAAO,UAAU,CAACN,EAAI6R,GAAG,aAAazR,EAAG,IAAI,CAAC+Q,YAAY,MAAM7Q,MAAM,CAAC,GAAK,QAAQ,KAAO,UAAU,CAACN,EAAI6R,GAAG,e,gDC0B5rB,GACbrR,KAAMA,OACNI,KAFF,WAGI,MAAO,CACLsU,SAAUA,WAGdlT,QAASA,CACPuT,SAAUA,SAAdA,GACM,IAAN,+BACMzT,SAASA,cAAcA,0BAA4BA,GAAIA,SAEzDwQ,SAAUA,WACR,IAAIQ,EAAQ7S,KACZuQ,OAAMA,OAAOA,eAAgBA,gBAC7BA,OAAMA,OAAOA,iBAAiBA,GAC9B1O,SAASA,eAAeA,YAAYA,UAAUA,OAAOA,QACrDA,SAASA,eAAeA,YAAYA,WAAaA,QAC5CA,SAASkR,cAAc,gBAC1BC,eACAnR,SAASA,cAAcA,cAAcA,WAAaA,WAEpDA,SAASA,cAAcA,cAAcA,iBAAiBA,SAASA,WAC7DmR,qBACAnR,SAASA,eAAeA,YAAYA,UAAUA,OAAOA,QACrDA,SAASA,eAAeA,YAAYA,WAAaA,QACjD,IAAI0T,EAAO,GACXA,EAAKA,OAASA,SAASA,cAAcA,YACrC1C,EAAMA,aAAaA,OAGvB2C,aAAcA,SAAlBA,GACkC,eAAxBC,EAAGX,OAAOnL,UACZ8L,EAAGA,OAAOA,UAAYA,MAEtBA,EAAGA,OAAOA,UAAYA,eAI5BnU,QAvCF,WAwCI,IAAIuR,EAAQ7S,KACZ6B,SAASA,cAAcA,UAAUA,iBAAiBA,QAAtDA,WAAA,4JACA4T,mBADA,SAEAC,8BAFA,OAEAC,EAFA,OAIAC,EAAA/T,4BACA+T,SACAA,oCACAA,UAPA,8FAAA/T,IAaIA,SAASA,cAAcA,YAAYA,iBAAiBA,SAASA,SAAUA,GACrE4T,EAAGA,iBACH5C,EAAMA,aAAaA,GACnBA,EAAMA,cAERhR,SAASA,cAAcA,eAAeA,iBAAiBA,SAASA,SAAUA,GACxE4T,EAAGA,iBACH5C,EAAMA,aAAaA,GACf4C,EAAGI,cAAcvC,UAAUC,SAAS,WACtCuC,SAEFjU,SAASA,cAAcA,4FAA4FA,WAErHA,SAASA,cAAcA,cAAcA,iBAAiBA,SAASA,SAAUA,GACvE4T,EAAGA,iBACH5C,EAAMA,aAAaA,GACnBhR,SAASA,cAAcA,4FAA4FA,WAErHA,SAASA,cAAcA,YAAYA,iBAAiBA,SAASA,SAAUA,GACrE4T,EAAGA,iBACH5C,EAAMA,aAAaA,GACnBhR,SAASA,cAAcA,iCAAiCA,WAE1DA,SAASA,cAAcA,UAAUA,iBAAiBA,SAASA,SAAUA,GACnE4T,EAAGA,iBACH5C,EAAMA,aAAaA,GACnBhR,SAASA,cAAcA,gCAAgCA,aC3GgS,ICQzV,G,UAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,OAIa,I,QCPA,GACbtB,KAAMA,SACNC,WAAYA,CACVuV,MAAJA,EACIC,KAAJA,GAEErV,KANF,WAOI,MAAO,CACL0Q,cAAeA,EAAQA,QACvBC,UAAWA,EAAQA,UAGvBvP,QAASA,CACPqP,UAAWA,WACoB,KAAzBtP,OAAOoR,SAASX,MAClBhC,OAAMA,OAAOA,UAAWA,YAEtBzO,OAAOoR,SAASX,KAAKY,SAAS,MAChC5C,OAAMA,OAAOA,UAAWA,OAAOA,SAASA,MAE1C1O,SAASA,cAAcA,UAAUA,UAAYA,cAC7CA,SAASA,cAAcA,cAAcA,WCjCoT,ICQ3V,G,UAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,OAIa,I,QCnBX,EAAS,WAAa,IAAI9B,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAC+Q,YAAY,6BAA6B7Q,MAAM,CAAC,GAAK,aAAa,CAACF,EAAG,eAAeA,EAAG,iBAAiB,IAC/M,EAAkB,GCDlB,EAAS,WAAa,IAAIJ,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,iBAAiB,CAACF,EAAG,IAAI,CAACJ,EAAI6R,GAAG,cAAczR,EAAG,kBAAkBJ,EAAIwU,GAAG,GAAGpU,EAAG,IAAI,CAACJ,EAAI6R,GAAG,aAAazR,EAAG,iBAAiBA,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,UAAU,CAACF,EAAG,IAAI,CAACJ,EAAI6R,GAAG,cAAczR,EAAG,IAAI,CAACE,MAAM,CAAC,KAAO,KAAKgG,GAAG,CAAC,MAAQ,SAASoL,GAAQ,OAAO1R,EAAIkW,OAAO,UAAU,CAAClW,EAAI6R,GAAG,SAAS7R,EAAI6R,GAAG,QAAQzR,EAAG,IAAI,CAACE,MAAM,CAAC,KAAO,KAAKgG,GAAG,CAAC,MAAQ,SAASoL,GAAQ,OAAO1R,EAAIkW,OAAO,aAAc,CAAClW,EAAI6R,GAAG,YAAY7R,EAAI6R,GAAG,UAAU,IAC/hB,EAAkB,CAAC,WAAa,IAAI7R,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,UAAU,CAACF,EAAG,IAAI,CAACJ,EAAI6R,GAAG,W,qBCDtJ,EAAS,WAAa,IAAI7R,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,eAAe,CAAC+V,IAAI,eAAe7V,MAAM,CAAC,GAAK,qBAAqB,OAASN,EAAI4R,OAAO,mBAAmB5R,EAAIoW,gBAAgB9P,GAAG,CAAC,OAAStG,EAAIqW,iBAAiB,IAC1Q,EAAkB,G,mECmBP,G,UAAA,CACb7V,KAAMA,iBACNC,WAAYA,CACV6V,aAAJA,QAEE1V,KALF,WAMI,MAAO,CACL2V,iBAAkBA,KAGtB9D,SAAUA,CACR7R,KADJ,WAEM,MAAO,CACL4V,MAAOA,OAAMA,MAAMA,MACnBC,SAAUA,OAAMA,MAAMA,YAI5BzU,QAASA,CACPoU,eADJ,SACA3R,GACM,OAAOA,EAAOgL,OAEhB4G,aAJJ,SAIA5R,GACM,IAAIqO,EAAQ7S,KAEZ,GAAIwE,EAAOgL,OACjBhL,2CACYA,EAAO1B,KAAO+P,EAAMlS,KAAK4V,MAAO,CAClC,IAAV,mDACU/U,IAAMA,CACJC,OAAQA,MACRF,IAAKA,EACLmM,OAAQA,CACN+I,YAAaA,EAAOA,MAGlC/U,MAAA,YACY,IAAZ,SACY6O,+BAEAvB,aAAZA,gCACY0H,UACA7U,SAAZA,8EAKI8U,MA7BJ,WA8BM3W,KAAKwP,MAAQ,GACbxP,KAAK4W,MAAMC,aAAarH,MAAQ,IAElCmC,OAjCJ,SAiCAmF,GACM,IAGIC,EAHAlE,EAAQ7S,KACRsW,EAAmBtW,KAAKsW,iBAGxBU,EAAOF,EAMX,OALA9W,KAAKwP,MAAQsH,EAKN,IAAIG,SAAQ,SAAzB,GACQ,GAAID,KAAQV,EACVY,EAAQA,EAAiBA,SAG3B,GAAa,KAATF,EAAa,CACf,IAAIzV,EAAM,GAApB,sDACUC,IAAMA,CACJC,OAAQA,MACRF,IAAKA,IAEjBG,MAAA,YACY,IAAZ,SAGA,YACcqV,EAAdA,mBACgB,MAAhB,CACkBI,MAAlBA,UACkB3H,MAAlBA,UACkB1M,GAAlBA,kBAIcwT,EAAdA,MAEcS,EAAdA,CACgBI,MAAhBA,uBACgB3H,MAAhBA,GAGY3N,SAAZA,6DACYA,SAAZA,mEACYqV,EAAZA,WAGUH,EAAcA,CACZI,MAAOA,EAAMA,KAAKA,SAClB3H,MAAOA,EAAMA,KAAKA,OAEpB0H,EAAQA,UC1HqV,ICOnW,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,I,QClBX,EAAS,WAAa,IAAInX,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,eAAe,CAAC+V,IAAI,eAAe7V,MAAM,CAAC,GAAK,oBAAoB,OAASN,EAAI4R,OAAO,mBAAmB5R,EAAIoW,gBAAgB9P,GAAG,CAAC,OAAStG,EAAIqW,iBAC9O,EAAkB,G,sDCiBP,GACb7V,KAAMA,gBACNC,WAAYA,CACV6V,aAAJA,QAEE1V,KALF,WAMI,MAAO,CACLyW,aAAcA,CACZC,MAAOA,GACPC,IAAKA,GACLC,OAAQA,IAEVC,qBAAsBA,GACtBR,KAAMA,KACNS,oBAAqBA,KACrBC,MAAOA,KACPC,sBAAuBA,OAG3B5V,QAASA,CACPoU,eADJ,SACA3R,GACM,OAAO,EAAb,qBAEImS,MAJJ,WAKM3W,KAAKwP,MAAQ,GACbxP,KAAK4W,MAAMC,aAAarH,MAAQ,IAElC4G,aARJ,SAQA5R,GACM,IAAIqO,EAAQ7S,KACZ,GAAIwE,EAAOgL,OACjBhL,2CAAA,CACQ,IAAIuJ,EAAmBvJ,EAAO1B,GAC9B,GAAIiL,EAAiBjE,QAAQ,MAAQ,EAAG,CACtC,IAAIvF,EAAQwJ,EAAiBlE,MAAM,KACnCkE,EAAmBA,EAAMA,GACzB8E,EAAMA,MAAQA,EAAMA,GAEtB,GAAoB,QAAhBrO,EAAOoT,KAAgB,CACzBhW,QAAQA,IAAIA,yCAA0CA,EAAOA,OAC7D2O,OAAMA,OAAOA,cAAcA,GAC3BA,OAAMA,OAAOA,eAAgBA,uBAE7B,IAAIhP,EAAM,GAApB,8DACUC,IAAMA,CACJC,OAAQA,MACRF,IAAKA,IAEjBG,MAAA,YACY,IAAZ,SACYmW,2CAIZ,6CACcrT,EAAOgL,QAAUe,EAAA,KAAMuH,QAAQ/F,QACjCxB,OAAMA,OAAOA,cAAcA,IAG3B3O,QAAQA,IAAIA,kEAAmEA,EAAOA,OACtF2O,OAAMA,OAAOA,UAAWA,EAAOA,OAC/BhP,EAAMA,GAAlBA,gGACYC,IAAMA,CACJC,OAAQA,MACRF,IAAKA,IAEnBG,MAAA,YACcgV,oBAUJ7U,SAASA,cAAcA,sBAAsBA,YAAcA,EAAOA,MAClEA,SAASA,cAAcA,sBAAsBA,MAAQA,GACrD0O,OAAMA,OAAOA,cAAcA,GAC3BA,OAAMA,OAAOA,eAAgBA,uBAC7BA,OAAMA,OAAOA,UAAWA,EAAOA,OAC/BsH,OAA0BA,CAACA,GAAmBA,EAAMA,MAAOA,YAG7DE,MAAMA,kBAGVpG,OApEJ,SAoEAmF,GACM,IAAIjE,EAAQ7S,KAGZ,OAFA6S,EAAMA,KAAOA,EACbA,EAAMA,aAAaA,IAAMA,EAAMA,SACxB,IAAIoE,SAAQ,SAAzB,GACQ,GAAmB,KAAfpE,EAAMmE,KACRnE,EAAMA,kBACFA,EAAM8E,uBACRT,EAAQA,EAAMA,2BAE1B,CAGU,GADArE,EAAMA,oBAAsBA,EAAMA,KAAOA,IAAMA,EAAMA,OAAOA,MAAMA,MAC9DA,EAAM4E,uBAAuB5E,EAAM2E,qBAErC,YADAN,EAAQA,EAAMA,qBAAqBA,EAAMA,sBAG3CrV,SAASA,cAAcA,6BAA6BA,MAAMA,UAAYA,QACtE,IAAIN,EAAM,GAApB,wFACUC,IAAMA,CACJC,OAAQA,MACRF,IAAKA,IAEjBG,MAAA,YACY,IAAZ,SACA,kCAMA,WACA,eACkBmR,EAAlBA,gBACA,yBACoBqE,EAApBA,0BAGkBrE,EAAlBA,cAGA,YACkBA,EAAlBA,gBACA,yBACoBqE,EAApBA,2BAGkBrE,EAAlBA,cACA,yBACoBqE,EAApBA,2BAvBcrE,EAAdA,eACA,yBACgBqE,EAAhBA,kCA8BIc,OAAQA,WACN,OAAOlW,OAAOiP,QAAQC,cAAcb,SAAS+E,KAAI,SAAU+C,GACzD,MAAO,CACLd,MAAOA,EAAKA,KACZe,OAAQA,EAAKA,kBAAoBA,KAAOA,EAAKA,OAC7C1I,MAAOA,EAAKA,KACZoI,KAAMA,MACNO,SAAUA,SACVrV,GAAIA,EAAKA,kBAAoBA,IAAMA,EAAKA,YAI9CsV,gBAAiBA,WACf,IAAIvF,EAAQ7S,KACRqY,EAAaxF,EAAMuE,aAAa1I,IAChC2J,EAAWnW,OAAS,GAAK2Q,EAAMmE,MAAQnE,EAAMmE,KAAK9U,OAAS,IAC7DmW,EAAaA,EAAWA,QAAOA,SAAUA,GACvC,GAAIlD,EAAIgC,MACN,OAAOhC,EAAIgC,MAAMmB,cAAcC,WAAW1F,EAAMmE,KAAKsB,mBAI3D,IAAIE,GAAY,EACZC,EAAYJ,EAAWK,OAAO7F,EAAMuE,aAAaC,OAAOqB,OAAO7F,EAAMuE,aAAaE,KAAKoB,OAAO7F,EAAMuE,aAAaG,QAC5F,IAArBkB,EAAUvW,SACR2Q,EAAMmE,MAAQnE,EAAMmE,KAAK9U,OAAS,EACpCuW,EAAYA,CAACA,CACXtB,MAAOA,sBAAwBA,EAAMA,KACrC3H,MAAOA,IAGTgJ,GAAYA,GAIhB3F,EAAMA,qBAAqBA,EAAMA,qBAAuBA,EACpD2F,IACF3F,EAAMA,sBAAwBA,IAIlC8F,aAAcA,SAAlBA,GACM,IAAI5B,EACAlE,EAAQ7S,KACZ+W,EAAcA,EAASA,KAAIA,SAAUA,GACnC,MAAO,CACLI,MAAOA,EAAKA,QACZe,OAAQA,KACR1I,MAAOA,EAAKA,QACZoI,KAAMA,UACNO,SAAUA,QACVrV,GAAIA,EAAKA,kBACT8V,SAAUA,EAAKA,gBAGnB7B,EAAYA,MAAKA,SAAUA,EAAGA,GAC5B,OAAOnB,EAAEuB,MAAQ0B,EAAE1B,MAAQ,GAAK,KAElCJ,EAAYA,QAAOA,SAAUA,EAAUA,GACrC,IAAInB,EAAIkD,EACJD,EAAIE,EAaR,OAZInD,GAAKA,EAAEpG,QAAUqJ,EAAErJ,QACjBoG,EAAEoD,MACJpD,EAAEA,OAASA,EAAEA,GACbA,EAAEA,KAAMA,GAENiD,EAAEG,MAGJH,EAAEA,OAASA,EAAEA,GACbA,EAAEA,KAAMA,IAGLE,IACf,MACMlG,EAAMA,aAAaA,MAAQA,EAC3BA,EAAMA,mBAIRoG,WAAYA,SAAhBA,GACM,IACIlC,EADAlE,EAAQ7S,KAEZ+W,EAAcA,EAAOA,KAAIA,SAAUA,GACjC,IAAImB,EAASD,EAAKiB,aAIlB,MAHe,OAAXhB,GAA8B,OAAXA,IACrBA,EAASA,WAEJ,CACLf,MAAOA,EAAKA,QACZe,OAAQA,EACR1I,MAAOA,EAAKA,QACZoI,KAAMA,EACNO,SAAUA,cACVrV,GAAIA,EAAKA,sBAGbiU,EAAYA,MAAKA,SAAUA,EAAGA,GAC5B,OAAOnB,EAAEuB,MAAQ0B,EAAE1B,MAAQ,GAAK,KAElCtE,EAAMA,aAAaA,IAAMA,EACzBA,EAAMA,mBAIRsG,YAAaA,SAAjBA,GACM,IACIpC,EADAlE,EAAQ7S,KAEZ+W,EAAcA,EAAQA,KAAIA,SAAUA,GAClC,MAAO,CACLI,MAAOA,EAAKA,QACZe,OAAQA,MACRN,KAAMA,MACNpI,MAAOA,EAAKA,QACZ2I,SAAUA,EAAKA,SACfrV,GAAIA,EAAKA,YAGb+P,EAAMA,aAAaA,OAASA,EAC5BA,EAAMA,qBC1R0V,ICOlW,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,K,QCCA,IACbrS,WAAYA,CACV4Y,eAAJA,EACIC,cAAJA,IAEE9Y,KAAMA,cACNI,KANF,WAOI,MAAO,CACLgR,OAAQA,EAAQA,UAGpB5P,QAASA,CACPkU,OAAQA,SAAZA,GACMpU,SAASA,eAAeA,qBAAqBA,MAAQA,EACrDyX,YAAWA,WACTxX,OAAOA,SAASA,KAAOA,YAC/B,MAEIyX,eAAgBA,SAApBA,KAGIC,gBAAiBA,SAArBA,KACM,IAAIC,EAAW5X,SAASkR,cAAc,uBAClC2G,EAAY7X,SAASkR,cAAc,sBACvC0G,EAASA,YAAcA,EACvBA,EAASA,aAAaA,OAAQA,EAASA,aAAaA,eAAeA,QACnEC,EAAUA,YAAcA,EACxBA,EAAUA,aAAaA,OAAQA,EAAUA,aAAaA,eAAeA,QAErEC,IAAEA,uBAAuBA,OAAMA,WAC7BA,IAAEA,MAAMA,KAAKA,cAAeA,uBAC5BF,EAASA,aAAaA,OAAQA,EAASA,aAAaA,eAAeA,WAC3EG,MAAA,WACQD,IAAEA,MAAMA,KAAKA,cAAeA,GAC5BF,EAASA,aAAaA,OAAQA,EAASA,aAAaA,eAAeA,WAGrEE,IAAEA,sBAAsBA,OAAMA,WAC5BA,IAAEA,MAAMA,KAAKA,cAAeA,qBAC5BD,EAAUA,aAAaA,OAAQA,EAAUA,aAAaA,eAAeA,WAC7EE,MAAA,WACQD,IAAEA,MAAMA,KAAKA,cAAeA,GAC5BD,EAAUA,aAAaA,OAAQA,EAAUA,aAAaA,eAAeA,cC7DuR,MCQhW,I,UAAY,eACd,GACA,EACA,GACA,EACA,KACA,KACA,OAIa,M,QCnBX,GAAS,WAAa,IAAI3Z,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAC+Q,YAAY,aAAa7Q,MAAM,CAAC,aAAa,uDAAuD,gBAAgB,UAAU,CAACN,EAAIwU,GAAG,GAAIxU,EAAe,YAAEI,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,iBAAiBN,EAAIiS,KAAKjS,EAAI8Z,GAAI9Z,EAAgB,cAAE,SAASiF,EAAYlB,GAAG,OAAO3D,EAAG,MAAM,CAACoP,IAAIzL,EAAEoN,YAAY,cAAc,CAAC/Q,EAAG,uBAAuB,CAACE,MAAM,CAAC,YAAY,IAAIyZ,SAAS,CAAC,UAAY/Z,EAAI8R,GAAG,WAAa7M,EAAY,GAAK,aAAeA,EAAY,QAAQ,OAAM,IAC3iB,GAAkB,CAAC,WAAa,IAAIjF,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAC4Z,YAAY,CAAC,QAAU,QAAQ1Z,MAAM,CAAC,GAAK,UAAU,CAACF,EAAG,IAAI,CAACJ,EAAI6R,GAAG,kB,uDCkB1K,IACbrR,KAAMA,eACNC,WAAYA,CACVwZ,mBAAJA,SAEErZ,KALF,WAMI,MAAO,CACLsZ,YAAaA,KACbC,SAAUA,GACVC,aAAcA,GACdvE,EAAGA,CAACA,EAAGA,EAAGA,GACVwE,cAAeA,GACfC,KAAMA,KACNhP,KAAMA,KAGVmH,SAAUA,kBACZG,gBACA,kBAGEC,MAAOA,CACL0H,aADJ,SACAC,GACM,IAAI1H,EAAQ7S,KACRua,EAASrY,OAAS,IACpB2Q,EAAMA,YAAcA,EAAMA,aAAaA,GAAGA,YAC1CA,EAAMA,kBAAkBA,EAAMA,gBAIpC9Q,QAASA,CACPyY,kBAAmBA,SAAvBA,GACM,IAAI3H,EAAQ7S,KACZ6S,EAAMA,KAAOA,GACbA,EAAMA,cAAgBA,GACtB,IAAI4H,EAAO,iBACX,SAASC,IACP,GAAIC,GAAQA,EAAKzY,OAAS,EAAG,CAC3B,IAAI0Y,EAAQD,EAAKC,MAAMH,GACT,OAAVG,GACF/H,EAAMA,SAASA,QAAQA,EAAMA,GAAGA,MAAMA,OACtC8H,EAAOA,EAAKA,QAAQA,EAAMA,GAAIA,IAC9BD,KAEA7H,EAAMA,SAASA,QAAQA,EAAKA,MAAMA,QAsBxC,SAASgI,EAAf,GAEQ,IADA,IAAIxP,EAAO,KACFyP,EAAI,EAAGA,EAAIC,EAAe7Y,OAAQ4Y,IACzC,GAAIA,EAAIC,EAAe7Y,OAAS,EAAG,CACjC,IAAI8Y,EAAOD,EAAeD,GAAG,GACzBG,EAAWF,EAAe,EAA1C,MAEY,GAAIE,IAAaD,EACF,OAAT3P,IAAlBA,UACcA,GAAQA,OAASA,EAAeA,GAAGA,GAAKA,aAExC,GAAa,OAATA,EAEFwH,EAAMA,cAAcA,KAAKA,EAAeA,QACxD,CACgBxH,GAAQA,OAASA,EAAeA,GAAGA,GAAKA,aACxC,IAAI6P,EAAU,CAACF,EAAM3P,GACrBwH,EAAMA,cAAcA,KAAKA,GACzBxH,EAAOA,WAIE,OAATA,EACFwH,EAAMA,cAAcA,KAAKA,EAAeA,KAExCxH,GAAQA,OAASA,EAAeA,GAAGA,GAAKA,aACxC6P,EAAUA,CAACA,EAAMA,GACjBrI,EAAMA,cAAcA,KAAKA,GACzBxH,EAAOA,MAIb,OAAOwH,EAAMuH,cAjDfM,IACA1a,KAAKka,SAAS9K,SAAQ,SAAUvJ,GAE9B,IAA8B,IAA1BA,EAAE,GAAGiE,QAAQ,QAAgB,CAC/B,IAAIqR,EAAW,GAAX,EAAd,GAAc,EAAd,GAAc,EAAd,GACc5W,EAAQsB,EAAE,GAAGgE,MAAM,KACvBtF,EAAMA,SAAQA,SAAUA,GACtBuW,EAAIA,EAAEA,MAAMA,MACiB,IAAzBA,EAAE,GAAGhR,QAAQ,SAA7BsR,SAC0C,IAA1BN,EAAE,GAAGhR,QAAQ,UAA7BuR,SAC0C,IAA1BP,EAAE,GAAGhR,QAAQ,UAA7BwR,WAEUH,EAAWA,WAAaA,EAAQA,WAAaA,EAASA,qBAAuBA,EAAQA,OACrFtV,EAAEA,GAAKA,MAsCX,IAAI0V,EAAYV,EAAUhI,EAAMqH,UAChCqB,EAAUA,SAAQA,SAAUA,GAC1B,IAAIC,EAAU,GACd,GAAIC,EAAQvZ,OAAS,EAAG,CACtB,IAAK,IAAI4B,EAAI,EAAGA,EAAI2X,EAAQvZ,OAAQ4B,IAClC0X,EAAUA,EAAUA,IAAMA,EAAQA,GAEpCC,EAAQA,GAAKA,EAEf5I,EAAMA,KAAKA,KAAKA,MAElBA,EAAMA,aAAeA,EAAMA,QClIoU,MCQjW,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCVA,IACbtS,KAAMA,WACNC,WAAYA,CACVkb,YAAJA,GACIC,aAAJA,KCbiW,MCO7V,GAAY,eACd,GACA,EACA,GACA,EACA,KACA,KACA,MAIa,M,QClBX,GAAS,WAAa,IAAI5b,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAC+Q,YAAY,6BAA6B7Q,MAAM,CAAC,GAAK,cAAc,CAACF,EAAG,MAAM,CAAC+Q,YAAY,cAAc,CAAEnR,EAAIY,KAAc,UAAER,EAAG,IAAI,CAAC+Q,YAAY,UAAU,CAACnR,EAAI6R,GAAG,OAAO7R,EAAIiS,KAAK7R,EAAG,IAAI,CAACJ,EAAI6R,GAAG,+EAA+E7R,EAAI8R,GAAG9R,EAAI6b,SAAS,UAAUzb,EAAG,IAAI,CAACE,MAAM,CAAC,KAAO,sDAAsD,OAAS,WAAW,CAACN,EAAI6R,GAAG,cAAc7R,EAAI8R,GAAG9R,EAAI2X,UAAU3X,EAAI6R,GAAG,UAAU7R,EAAI8R,GAAG9R,EAAI8b,SAAS,QAAQ1b,EAAG,IAAI,CAACJ,EAAI6R,GAAG,2DAA2D7R,EAAI8R,GAAG9R,EAAI+b,aAAa,gFAAgF3b,EAAG,IAAI,CAACJ,EAAI6R,GAAG,0CAA0C7R,EAAI8R,GAAG9R,EAAIgc,OAAO,8FAA8F5b,EAAG,IAAI,CAAC+Q,YAAY,WAAW,CAACnR,EAAI6R,GAAG,6CAA6C7R,EAAI8R,GAAG9R,EAAIic,cAAc,OAAO7b,EAAG,OAAO,CAACJ,EAAI6R,GAAG,MAAMzR,EAAG,MAAM,CAACJ,EAAI6R,GAAG7R,EAAI8R,GAAG9R,EAAIkc,YAAYlc,EAAI6R,GAAG,+BAA+B7R,EAAI8R,GAAG9R,EAAImc,SAAS,4EAA4Enc,EAAI8R,GAAG9R,EAAI+b,aAAa,iEAAiE/b,EAAI8R,GAAG9R,EAAIoc,cAAc,OAAO,GAAGhc,EAAG,IAAI,CAACJ,EAAI6R,GAAG,iIAAkI7R,EAAIY,KAAc,UAAER,EAAG,MAAM,CAACA,EAAG,IAAI,CAACA,EAAG,IAAI,CAACJ,EAAI6R,GAAG,gBAAgBzR,EAAG,MAAMA,EAAG,MAAM,CAACJ,EAAI6R,GAAG7R,EAAI8R,GAAG9R,EAAIY,KAAKyb,kBAAkBrc,EAAIiS,UACrnD,GAAkB,GC0BP,kCACbzR,KAAMA,kBAKRoS,gBACA,gBAPA,IASEH,SAAUA,CACR7R,KADJ,WAEM,MAAO,CACLyb,UAAWA,OAAMA,MAAMA,YAG3B3U,IANJ,WAOM,OAAO8I,EAAA,KAAMmC,MAAM2J,UAGvB1b,KAnBF,WAoBI,MAAO,CACLib,QAASA,KACTlE,MAAOA,KACPmE,QAASA,KACTE,MAAOA,KACPO,UAAWA,KACXN,aAAcA,KACdE,QAASA,KACTJ,YAAaA,KACbK,aAAcA,KACdF,MAAOA,OAGXrJ,MAAOA,CACLnL,IAAKA,SAATA,GACM,IAAIoL,EAAQ7S,KACRuc,EAAQX,UACV/I,EAAMA,QAAUA,EAAQA,QACxBA,EAAMA,MAAQA,EAAQA,OACtBA,EAAMA,QAAUA,EAAQA,UACxBA,EAAMA,MAAQA,EAAQA,MACtBA,EAAMA,UAAYA,EAAQA,UAC1BA,EAAMA,aAAeA,EAAQA,aAC7BA,EAAMA,QAAUA,EAAQA,QACxBA,EAAMA,YAAcA,EAAQA,YAC5BA,EAAMA,aAAeA,EAAQA,aAC7BA,EAAMA,MAAQA,EAAQA,SAI5B9Q,QAASA,CACPyR,eAAgBA,WACd3R,SAASA,iBAAiBA,kBAAkBA,SAAQA,SAA1DA,GACQuR,EAAGA,UAAYA,gBAEjBvR,SAASA,iBAAiBA,aAAaA,SAAQA,SAArDA,GACQuR,EAAGA,MAAMA,QAAUA,YAIzB9R,QA5DF,WA6DItB,KAAKwT,oBCxF8V,MCQnW,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCnBX,GAAS,WAAa,IAAIzT,EAAIC,KAASC,EAAGF,EAAIG,eAAsBH,EAAIK,MAAMD,GAAO,OAAOJ,EAAIwU,GAAG,IACnG,GAAkB,CAAC,WAAa,IAAIxU,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAC+Q,YAAY,6BAA6B7Q,MAAM,CAAC,GAAK,cAAc,CAACF,EAAG,MAAM,CAAC+Q,YAAY,aAAa7Q,MAAM,CAAC,GAAK,cAAc,aAAa,uCAAuC,gBAAgB,WAAW,CAACF,EAAG,OAAO,CAAC+Q,YAAY,UAAU7Q,MAAM,CAAC,GAAK,cAAc,aAAa,uCAAuC,gBAAgB,WAAW,CAACF,EAAG,OAAO,CAAC4Z,YAAY,CAAC,QAAU,QAAQ1Z,MAAM,CAAC,GAAK,mBAAmB,CAACF,EAAG,OAAO,CAAC4Z,YAAY,CAAC,QAAU,gBAAgB1Z,MAAM,CAAC,GAAK,cAAc,MAAQ,iCAAiC,CAACN,EAAI6R,GAAG,OAAO7R,EAAI6R,GAAG,MAAMzR,EAAG,OAAO,CAAC4Z,YAAY,CAAC,QAAU,gBAAgB1Z,MAAM,CAAC,GAAK,gBAAgB,CAACN,EAAI6R,GAAG,aAAa7R,EAAI6R,GAAG,MAAMzR,EAAG,OAAO,CAAC4Z,YAAY,CAAC,QAAU,gBAAgB1Z,MAAM,CAAC,GAAK,iBAAiB,CAACN,EAAI6R,GAAG,SAAS7R,EAAI6R,GAAG,OAAOzR,EAAG,OAAO,CAAC4Z,YAAY,CAAC,QAAU,gBAAgB1Z,MAAM,CAAC,GAAK,eAAe,MAAQ,iCAAiC,CAACN,EAAI6R,GAAG,OAAOzR,EAAG,IAAI,CAACE,MAAM,CAAC,GAAK,cAAc,KAAO,qGAAqG,OAAS,SAAS,MAAQ,8CAA8C,CAACF,EAAG,OAAO,CAAC+Q,YAAY,yBAAyB/Q,EAAG,OAAO,CAAC4Z,YAAY,CAAC,QAAU,QAAQ1Z,MAAM,CAAC,GAAK,gBAAgB,aAAa,yCAAyC,gBAAgB,SAAS,CAACF,EAAG,IAAI,CAACE,MAAM,CAAC,GAAK,mBAAmB,CAACN,EAAI6R,GAAG,gCAAgCzR,EAAG,KAAK,CAACE,MAAM,CAAC,GAAK,oBAAoB,CAACN,EAAI6R,GAAG,uBAAuBzR,EAAG,IAAI,CAACE,MAAM,CAAC,GAAK,mBAAmB,CAACF,EAAG,IAAI,CAACE,MAAM,CAAC,KAAO,MAAM,CAACN,EAAI6R,GAAG,+BAA+BzR,EAAG,IAAI,CAACE,MAAM,CAAC,GAAK,WAAW,MAAQ,iCAAiC,aAAa,iDAAiD,gBAAgB,SAAS,CAACF,EAAG,SAAS,CAACJ,EAAI6R,GAAG,gBAAgBzR,EAAG,OAAO,CAAC+Q,YAAY,QAAQ,CAACnR,EAAI6R,GAAG,qBAAqBzR,EAAG,IAAI,CAACE,MAAM,CAAC,GAAK,aAAa,CAACF,EAAG,SAAS,CAACJ,EAAI6R,GAAG,gBAAgBzR,EAAG,OAAO,CAAC+Q,YAAY,QAAQ,CAACnR,EAAI6R,GAAG,mBAAmBzR,EAAG,IAAI,CAACE,MAAM,CAAC,GAAK,oBAAoB,CAACF,EAAG,SAAS,CAACJ,EAAI6R,GAAG,uBAAuBzR,EAAG,OAAO,CAAC+Q,YAAY,QAAQ,CAACnR,EAAI6R,GAAG,mBAAmBzR,EAAG,IAAI,CAACE,MAAM,CAAC,GAAK,WAAW,CAACF,EAAG,SAAS,CAACJ,EAAI6R,GAAG,cAAczR,EAAG,OAAO,CAAC+Q,YAAY,QAAQ,CAACnR,EAAI6R,GAAG,mBAAmBzR,EAAG,IAAI,CAACE,MAAM,CAAC,GAAK,eAAe,CAACF,EAAG,SAAS,CAACJ,EAAI6R,GAAG,kBAAkBzR,EAAG,OAAO,CAAC+Q,YAAY,QAAQ,CAACnR,EAAI6R,GAAG,mBAAmBzR,EAAG,IAAI,CAACE,MAAM,CAAC,GAAK,QAAQ,CAACF,EAAG,SAAS,CAACJ,EAAI6R,GAAG,yBAAyBzR,EAAG,OAAO,CAAC+Q,YAAY,QAAQ,CAACnR,EAAI6R,GAAG,2BCiC7hF,IACbrR,KAAMA,YCnCyV,MCQ7V,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCnBX,GAAS,WAAa,IAAIR,EAAIC,KAASC,EAAGF,EAAIG,eAAsBH,EAAIK,MAAMD,GAAO,OAAOJ,EAAIwU,GAAG,IACnG,GAAkB,CAAC,WAAa,IAAIxU,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,qBAAqB,CAACF,EAAG,OAAO,CAACE,MAAM,CAAC,GAAK,eAAe,CAACF,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,4BCWpM,IACbE,KAAMA,kBAsBNe,QAvBF,WAwBI,SAASkb,IACP,IAAIC,EAAW,CACrB,iBACA,mBACA,iBACA,OACA,SACA,QAGM,IAAIC,UAAUC,SAKZ,OAAO,EAJP,MAAOF,EAASva,OACd,GAAIwa,UAAUC,WAAaF,EAASG,OAAS,OAAvD,uCAMI,IAAIC,EAAUL,IACd,GAAIK,EAAS,CACX,IAAN,+BACA,gBACMhb,SAASA,iBAAiBA,UAAUA,SAAUA,GAC5C,IAAIib,EAAkBna,KAAKkG,IAAI/G,OAAOyH,aAClCuT,EAAkB,GAAKC,EACpBC,EAAa1J,UAAUC,SAAS,gBACnCyJ,EAAaA,UAAUA,IAAIA,eAGzBA,EAAa1J,UAAUC,SAAS,gBAClCyJ,EAAaA,UAAUA,OAAOA,qBClE8T,MCQpW,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,OAIa,M,QCnBX,GAAS,WAAa,IAAIjd,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,MAAM,CAAC+Q,YAAY,mBAAmB,CAAC/Q,EAAG,MAAM,CAAC+Q,YAAY,MAAM7Q,MAAM,CAAC,GAAK,cAAcgG,GAAG,CAAC,MAAQtG,EAAIkd,iBAAiB,CAAC9c,EAAG,IAAI,CAACE,MAAM,CAAC,KAAO,gBAAgB,CAACF,EAAG,OAAO,CAAC+Q,YAAY,QAAQ,CAAC/Q,EAAG,MAAM,CAACE,MAAM,CAAC,IAAMN,EAAImd,QAAQnd,EAAI6R,GAAG,2BAA4B7R,EAAIod,eAAiB,EAAGhd,EAAG,OAAO,CAAC+Q,YAAY,WAAW,CAACnR,EAAI6R,GAAG,IAAI7R,EAAI8R,GAAG9R,EAAIod,eAAeC,qBAAqBrd,EAAIiS,SAAS7R,EAAG,sBAAsBA,EAAG,MAAM,CAAC+Q,YAAY,MAAM7Q,MAAM,CAAC,GAAK,YAAYgG,GAAG,CAAC,MAAQtG,EAAIsd,iBAAiB,CAACld,EAAG,IAAI,CAACE,MAAM,CAAC,KAAO,cAAc,CAACF,EAAG,OAAO,CAAC+Q,YAAY,QAAQ,CAAC/Q,EAAG,MAAM,CAACE,MAAM,CAAC,IAAMN,EAAIud,QAAQvd,EAAI6R,GAAG,gBAAiB7R,EAAgB,aAAEI,EAAG,OAAO,CAAC+Q,YAAY,UAAU7Q,MAAM,CAAC,GAAK,mBAAmB,CAACN,EAAI6R,GAAG7R,EAAI8R,GAAG9R,EAAIwd,aAAaH,qBAAqBrd,EAAIiS,SAAS7R,EAAG,aAAa,MAC14B,GAAkB,GCDlB,GAAS,WAAa,IAAIJ,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAC+Q,YAAY,SAAS,CAAC/Q,EAAG,IAAI,CAAC+Q,YAAY,cAAc7Q,MAAM,CAAC,KAAON,EAAIY,KAAK4R,MAAMlM,GAAG,CAAC,MAAQtG,EAAIyd,YAAYzd,EAAIwU,GAAG,GAAGpU,EAAG,WAAW,CAACqU,WAAW,CAAC,CAACjU,KAAK,OAAOkU,QAAQ,SAASjF,MAAOzP,EAAY,SAAE2U,WAAW,aAAaxD,YAAY,SAAS7Q,MAAM,CAAC,GAAK,WAAW,UAAYN,EAAI0d,KAAK,MAAQ1d,EAAI2d,MAAM,YAAc3d,EAAI4d,gBAAgB,WAAa5d,EAAI6d,cAAczd,EAAG,aAAa,CAACqU,WAAW,CAAC,CAACjU,KAAK,OAAOkU,QAAQ,SAASjF,MAAOzP,EAAc,WAAE2U,WAAW,eAAerU,MAAM,CAAC,YAAcN,EAAI4d,gBAAgB,OAAS5d,EAAI8d,WAAW,IACxoB,GAAkB,CAAC,WAAa,IAAI9d,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,QAAQ,CAACF,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,cAAc,aAAa,sGAAsG,gBAAgB,cCD5S,GAAS,WAAa,IAAIN,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,MAAM,CAAC+Q,YAAY,eAAe7K,GAAG,CAAC,MAAQtG,EAAI+d,YAAY3d,EAAG,MAAM,CAAC+Q,YAAY,SAAS7Q,MAAM,CAAC,GAAK,YAClN,GAAkB,G,kLCILsO,EAAQ,SAMlB,SAASoP,GAAkBxW,EAAOyW,EAAeC,GAGtDpc,SAASqc,iBAAiB,oCAAoC9O,SAAQ,SAAU+O,GAC9EA,EAAK3X,MAAM1B,KAAO,UAClBqZ,EAAK3X,MAAM4X,OAAS,aAEtBvc,SAASqc,iBAAiB,uCAAuC9O,SAAQ,SAAU+O,GACjFA,EAAK3X,MAAM1B,KAAO,UAClBqZ,EAAK3X,MAAM4X,OAAS,aAEtBpe,KAAKsD,MAAQzB,SAASwR,eAAe,oBAAoBgL,YAAc,IAAM9N,OAAMmC,MAAM4L,OAAOC,MAAQhO,OAAMmC,MAAM4L,OAAOE,KAC3Hxe,KAAKoD,OAAS,GAAKmN,OAAMmC,MAAM4L,OAAOG,IAAMlO,OAAMmC,MAAM4L,OAAOI,OAAS,GACxE1e,KAAKuH,MAAQA,EACb,IAAIoX,EAAW3d,KAAGgJ,OAAO,oBAAoB9D,OAAO,OAAOH,KAAK,KAAM,mBACtE/F,KAAK4e,UAAU5e,KAAKuH,MAAOvH,KAAK6e,oBAAoBF,EAAU,QAAS3e,KAAKoD,OAAS,GAAIpD,KAAKsD,MAAQ,GAAI0a,EAAeC,GACzHjd,KAAGgJ,OAAO,0BAA0BjE,KAAK,QAAS,iB,ICrBhDzC,GAAOF,GAAQ2D,GAAQ+X,GAAM7W,G,0BCH7B+K,GAASrE,EAAQ,QAEAoQ,G,WACnB,WAAY7W,EAAS4W,EAAM/X,EAAQzD,EAAOF,EAAQ4b,EAAaC,GAAoB,wBACjFjf,KAAKsD,MAAQA,EACbtD,KAAKoD,OAASA,EACdpD,KAAK+G,OAASA,EACd/G,KAAKgf,YAAcA,EACnBhf,KAAKkf,UAAY,EACjBlf,KAAKif,mBAAqBA,EAC1Bjf,KAAK8e,KAAOA,EACZ9e,KAAKkI,QAAUA,EACf,IAAIiX,EAAYnf,KAAKof,qBAAqBlX,EAAS4W,GAC1B,qBAAdK,GACTnf,KAAKqf,YAAYnX,EAAS4W,G,qDAI9B,SAAeQ,GACb,IAAIxQ,EAAO9O,KACXA,KAAKkI,QAAUoX,EACftf,KAAKkf,UAAYI,EAAgBC,aACjC,IAAIzc,EAAK9C,KAAKkI,QAAQyH,OAAO2I,cAAgB,IAAMtY,KAAK8e,KAC9B,qBAAf9e,KAAKwf,OACdxf,KAAKwf,MAAMxV,OAAO,eAAiBlH,EAAK,SACrCwD,MAAK,WACJ,OAAOwI,EAAKoQ,e,kCAKpB,SAAsBhX,EAASK,GAE7B,IAAIuG,EAAO9O,KAEPkU,GADShM,EAAQuX,QAAQ,GACbvX,EAAQgM,UAAU,IAGlC,GAA2C,IAAvChM,EAAQwX,oBAAoBxd,QAA0D,IAA1CgG,EAAQwX,oBAAoB,GAAGxd,OAA/E,CAKA,IAAIyd,EAAc3f,KAAK+G,OAAOmB,EAAQwX,oBAAoB,GAAG,GAAGzb,OAC5D2b,EAAY5f,KAAK+G,OAAOmB,EAAQwX,oBAAoB,GAAGxX,EAAQwX,oBAAoB,GAAGxd,OAAS,GAAG6G,KAGlGjG,EAAKoF,EAAQyH,OAAO2I,cAAgB,IAAM/P,EAC9CvI,KAAKkf,UAAYhX,EAAQqX,aAEzB,IAAIM,EAAiB3X,EAAQ4X,yBAEzBC,EAAM,EACN/f,KAAKkf,UAAY,KACnBa,EAAM,GAEJ/f,KAAKkf,UAAY,MACnBa,EAAM,IAEJ/f,KAAKkf,UAAY,KACnBa,GAAO,GAGT,IAAIpB,EAAW3d,KAAGgJ,OAAO,gBAAgB9D,OAAO,OAAOH,KAAK,KAAM,OAASjD,GAAIiD,KAC7E,QAAS,mBACX4Y,EAASzY,OAAO,OAAOH,KAAK,QAAS,IAAIA,KAAK,SAAU,IAAIA,KAAK,UAC/D,aAAaA,KAAK,sBAAuB,QAExCG,OAAO,QAAQH,KAAK,cAAe,OAAOA,KAAK,QAAS,cAAcA,KACrE,IAAK,IAAIA,KAAK,IAAK,IAAIO,KAAKuZ,EAAiB,KAGjD7f,KAAKwf,MAAQb,EAASzY,OAAO,OAAOH,KAAK,KAAM,KAAOjD,GAAIiD,KAAK,QAC7D,aAAaG,OAAO,OAAOH,KAAK,QAAS/F,KAAKsD,MAAQ,KAAKyC,KAAK,SAChE/F,KAAKoD,OAAS,IACb2C,KAAK,UAAW,QAAU/F,KAAKsD,MAAQ,KAAO,KAAOtD,KAAKoD,OAAS,KAAK2C,KACvE,sBAAuB,QAE3B/F,KAAKwf,MAAMtZ,OAAO,KAAKH,KAAK,KAAM,aAAejD,GAAIiD,KAAK,YACxD,cAAgBwK,OAAMmC,MAAM4L,OAAOE,KAAOmB,GAAe,QAAQtZ,GACjE,aAAa,WACX,OAAOrF,KAAGgJ,OAAOhK,MAAMoH,KAAK0H,EAAKkR,UAAWlR,MAC3CzI,GAAG,YAAY,WAClB,OAAOrF,KAAGgJ,OAAOhK,MAAMoH,KAAK0H,EAAKmR,SAAUnR,MAC1C5I,OAAO,QACPH,KAAK,YAAa,cAAgB6Z,EAAYD,EAAc,GAAK,OACjE5Z,KAAK,QAAS,UAAUA,KAAK,QAAS,GAAKga,GAAKha,KAAK,SAAU,IAAIA,KAClE,KAAM,GAEV/F,KAAKwf,MAAMxV,OAAO,eAAiBlH,GAAIoD,OAAO,KAAKH,KAAK,QAAS,WAAWA,KAC1E,QACA,iBAAmBjD,EAAGod,OAAO,EAAG,GAAK,WAAahM,EAC5C,+EAAiF2L,EAAiB,yBAAyB9Z,KAAK,QAAS6Z,EAAYD,EAAc,GACxK5Z,KAAK,SAAU,IAAIM,GAAG,SAAS,WAC9B,OAAOrF,KAAGgJ,OAAOhK,KAAK0J,YAAYtC,MAAK,SAAU+Y,GAC/Cve,QAAQqO,IAAI,yCAA2CkQ,GACvDnN,GAAOoN,aACPtR,EAAKmQ,mBAAmBkB,SAI9BngB,KAAKwf,MAAMxV,OAAO,eAAiBlH,EAAK,cAAcoD,OAAO,QAAQH,KAAK,QACxE,WAAWA,KAAK,QAAS6Z,EAAYD,EAAc,GAAG5Z,KAAK,SAAU,IACpEA,KAAK,KAAM,GAGd/F,KAAKwf,MAAMxV,OAAO,eAAiBlH,EAAK,cAAcoD,OAAO,QAAQH,KAAK,QACxE6Z,EAAYD,GAAa5Z,KAAK,SAAU,GAAGA,KAAK,YAChD,mBAAmBA,KAAK,QAAS,aAGnC/F,KAAKqgB,cAAcvd,EAAI6c,EAAaC,EAAWG,GAE/C/f,KAAKwf,MAAMxV,OAAO,eAAiBlH,GAAIoD,OAAO,QAC3CH,KAAK,cAAe,OAAOA,KAAK,OAAQ,SAASS,MAAM,YAAa,QAAQT,KAAK,IAC/E6Z,EAAYD,EAAc,GAAKI,GAAMha,KAAK,IAAK,IAAIA,KAAK,MAAO,GACjEA,KAAK,KAAM,SAEd,IAAIua,EAAa,gBAAkBxR,EAAKoQ,UAAY,8BAqBpD,OApBAlf,KAAKwf,MAAMxV,OAAO,eAAiBlH,EAAK,sBAAwBA,GAAIiD,KAAK,QACvE,cAAcA,KAAK,QACnBua,GAcFtgB,KAAKwf,MAAMxV,OAAO,eAAiBlH,EAAK,SAASuD,GAAG,SAAS,WACzDyI,EAAKkQ,YAAYhe,KAAGgJ,OAAOhK,KAAK0J,YAAa1J,KAAKugB,4BAG/C5B,EApGL/c,QAAQqO,IAAI,qGAAsG/H,K,yBAuGtH,SAAaA,EAAS4W,GACpB,IAAIhQ,EAAO9O,KACXkI,EAAQwX,oBAAoB,GAAGtQ,SAAQ,SAAU+Q,EAAGvU,GAElDuU,EAAElc,OAASkc,EAAElc,MACbkc,EAAEpX,KAAOoX,EAAEpX,IAIX+F,EAAK0R,aAAatY,EAAS4W,EAAMqB,MAEnCngB,KAAKygB,gBAAgB3B,EAAM5W,K,0BAG7B,SAAcA,EAAS4W,EAAM1L,GAO3B,IAJA,IAAI9Q,EAAS4F,EAAQwX,oBAAoB,GAAG,GAAGzb,MAE3Cyc,EAAY,EAEP5F,EAAI1H,EAAGnP,MAAO6W,GAAK1H,EAAGrK,IAAK+R,IAAK,CACvC,IAAI6F,EAAezY,EAAQ0Y,kBAAkB,GAAG9F,GAChD,GAAIA,GAAK1H,EAAGrK,KAAO4X,IAAiBzY,EAAQ0Y,kBAAkB,GAAG9F,EAAI,GAArE,CAIA,IAAI+F,EAAO7gB,KAAKwf,MAAMxV,OACpB,eAAiB9B,EAAQyH,OAAO2I,cAAgB,IAAMwG,EAChD,cAAc5Y,OAAO,KAAKH,KAAK,QAAS,WAAaqN,EAAGwE,MAC7D7R,KAAK,KAAM,KAAO+Y,EAAO,IAAMhE,GAAG/U,KAAK,YACtC,cAAgB+U,EAAIxY,EAASoe,GAAa3P,QAAQ+P,IAAM,OACzD5a,OAAO,QAAQH,KAAK,QAAS4a,GAAc5a,KAAK,QAC/CgL,QAAQ+P,KAAOJ,EAAY,IAAI3a,KAAK,SAAU,IAKnC,SAAXqN,EAAGwE,OACLiJ,EAAK9a,KAAK,SAAU,IAAIA,KAAK,YAAa,mBACtC+U,GAAK1H,EAAGrK,MACV8X,EAAK9a,KAAK,QAASgL,QAAQ+P,IAAOJ,GAGlC1gB,KAAKwf,MAAMxV,OAAO,eAAiB8U,EAAO,IAAMhE,GAAG5U,OAAO,eACvDH,KAAK,QAAS4a,GAAc5a,KAAK,YAChC,aAAgBgL,QAAQ+P,IAAMJ,EAAa,OAAO3a,KAClD,SAAUgL,QAAQ+P,IAAM,gBAAkB/P,QAAQ+P,IAAM,SAMjD,SAAX1N,EAAGwE,MACL5X,KAAKwf,MAAMxV,OAAO,eAAiB8U,EAAO,IAAMhE,EAAI,SACjD/U,KAAK,SAAU,IAAIA,KAAK,QAAS4a,GAAc5a,KAAK,YACnD,mBAEN2a,EAAY,OAlCVA,O,6BAqCN,SAAiB9U,EAAOjL,GAQtB,IAFA,IAAIogB,EAAa,GACbjS,EAAO9O,KACF8D,EAAI,EAAGA,EAAInD,EAAKyH,QAAQlG,OAAS,EAAG4B,IAAK,CAChD,IAAIkd,EAAM,GACVA,EAAI,GAAKrgB,EAAKyH,QAAQtE,GAAK,EAC3Bkd,EAAI,GAAKrgB,EAAKwH,UAAUrE,EAAI,GAAK,EACjCid,EAAWhR,KAAKiR,GAGLhhB,KAAKwf,MAAMxZ,UAAU,aAAarF,KAAKogB,GAAYE,MAC9D,SAAUd,GACR,IAAK,IAAIta,EAAIsa,EAAE,GAAIta,GAAKsa,EAAE,GAAIta,IAE5BiJ,EAAK0Q,MAAMxV,OAAO,eAAiB4B,EAAQ,IAAM/F,EAAI,SAASE,KAC5D,SAAU,GAAGA,KAAK,YAAa,kBAAkBA,KAAK,QACtD,kB,2BAIV,SAAepC,EAASrB,EAAQyG,EAAKgX,GACnC,IAAImB,EAAUvd,EAAQ4I,UAAU,EAAG,GAAG4U,cAEtCngB,KAAGgJ,OAAO,eAAiBrG,EAAU,cAAcuC,OAAO,QAAQH,KAAK,KACpEgD,EAAMzG,EAAS,EAAIyd,GAAMha,KAAK,KAAM,IACpCA,KAAK,KAAO/F,KAAKsD,MAAQhB,EAAS,IAAKyD,KAAK,KAAM,IAAIA,KAAK,QAC1D,aAAaA,KAAK,eAAgB,GAEtC/E,KAAGgJ,OAAO,eAAiBrG,GAASuC,OAAO,KAAKH,KAAK,QAAS,aAC3DA,KAAK,YAAa,cAAgB/F,KAAKsD,MAAQhB,EAAS,IAAM,SAC9D4D,OAAO,UAAUH,KAAK,KAAM,IAAIA,KAAK,KAAM,IAAIA,KAAK,IAAK,IAAIA,KAC5D,OAAQ,QAAQA,KAAK,SAAU,WAAWA,KAAK,eAAgB,GAEnE/E,KAAGgJ,OAAO,eAAiBrG,EAAU,gBAAgBuC,OAAO,YAAYH,KACtE,KAAM,QAAUpC,GAASuC,OAAO,UAAUH,KAAK,KAAM,IAAIA,KAAK,KAAM,IACnEA,KAAK,IAAK,IAAIA,KAAK,YAAa,WAEvB/E,KAAGgJ,OAAO,eAAiBrG,EAAU,gBAAgBuC,OAC/D,SAASH,KAAK,QAAS,QAAQA,KAAK,SAAU,QAAQA,KAAK,IAAK,IAAIA,KACpE,IAAK,IAAIA,KAAK,aACd,2CAA6Cmb,EAAQ5I,cAAgB,6CACpEvS,KAAK,YAAa,aAAepC,EAAU,O,uBAIhD,SAAWwc,EAAGrR,GACZA,EAAKsS,OAASpgB,KAAGgJ,OAAO,IAAMmW,EAAEpa,KAAK,MAAQ,gBAAgBA,KAAK,aAClE,IAAIsb,EAAOC,WAAWxS,EAAKsS,OAAO7U,UAAWuC,EAAKsS,OAAOtX,QAAQ,KAAQ,EAAGgF,EAAKsS,OAC9EtX,QAAQ,OAEPyX,EAAUpB,EAAEpa,KAAK,MAAMma,OAAO,GAElClf,KAAGgJ,OAAO,IAAMmW,EAAEpa,KAAK,MAAQ,gBAAkBoa,EAAEpa,KAAK,OAAOsE,QAC7D,UAAU,GACZrJ,KAAGgJ,OAAO,IAAMmW,EAAEpa,KAAK,MAAQ,gBAAgBA,KAAK,YAClD,cAAgBsb,EAAO,IAAM,UAC/BrgB,KAAGgJ,OAAO,IAAMmW,EAAEpa,KAAK,MAAQ,uBAAuBA,KAAK,IAAK,IAChE/E,KAAGgJ,OAAO,IAAMmW,EAAEpa,KAAK,MAAQ,qBAAuBwb,EAAU,WAC7Dxb,KAAK,IAAK,IACb/E,KAAGgJ,OAAO,IAAMmW,EAAEpa,KAAK,MAAQ,sBAAsBA,KAAK,QAAS,QAChEA,KAAK,SAAU,QAAQA,KAAK,IAAK,GAAGA,KAAK,IAAK,K,sBAEnD,SAAUoa,EAAGrR,GACX,IAAIyS,EAAUpB,EAAEpa,KAAK,MAAMma,OAAO,GAElClf,KAAGgJ,OAAO,IAAMmW,EAAEpa,KAAK,MAAQ,gBAAkBoa,EAAEpa,KAAK,OAAOsE,QAC7D,UAAU,GACZrJ,KAAGgJ,OAAO,IAAMmW,EAAEpa,KAAK,MAAQ,gBAAgBA,KAAK,YAAa+I,EAAKsS,QACtEpgB,KAAGgJ,OAAO,IAAMmW,EAAEpa,KAAK,MAAQ,uBAAuBA,KAAK,IAAK,IAChE/E,KAAGgJ,OAAO,IAAMmW,EAAEpa,KAAK,MAAQ,qBAAuBwb,EAAU,WAC7Dxb,KAAK,IAAK,IACb/E,KAAGgJ,OAAO,IAAMmW,EAAEpa,KAAK,MAAQ,sBAAsBA,KAAK,QAAS,QAChEA,KAAK,SAAU,QAAQA,KAAK,IAAK,IAAIA,KAAK,IAAK,Q,KDpRlDyb,GAAmB,GAQvB,SAASxC,GAAamB,EAAGsB,GAEvB,IAAIC,EAAWC,SAASxB,EAAEpa,KAAK,MAAMma,OAAO,KAC5C3P,OAAMqR,OAAO,cAAeF,GAC5BnR,OAAMqR,OAAO,qBAAsBH,GAG9B,SAASI,GAAe3Z,EAAS4Z,GAClCjgB,SAASkR,cAAc,aAAalR,SAASkR,cAAc,YAAYO,UAAUyO,OAAO,UAC5F/gB,KAAGgJ,OAAO,wBAAwBK,QAAQ,UAAU,GACpDrJ,KAAGgJ,OAAO,eAAiB9B,EAAQyH,OAAS,IAAMmS,GAAezX,QAAQ,UAAU,GACnFrJ,KAAGgJ,OAAO,SAAW9B,EAAQyH,OAAS,IAAMmS,GAAezX,QAAQ,UAAU,GAGxE,SAAS2X,GAAY5T,GAC1B0Q,GAAO,EACP,IAAImD,EAAY7T,EAASlM,OAEzBoB,GAAQzB,SAASwR,eAAe,oBAAoBgL,YAAc9N,OAAMmC,MAAM4L,OAAOC,MAAQhO,OAAMmC,MAAM4L,OAAOE,KAAO,GACvHpb,GAAS,GAAKmN,OAAMmC,MAAM4L,OAAOG,IAAMlO,OAAMmC,MAAM4L,OAAOI,OAAS,GACnE3X,GAAS/F,KAAGiB,MAAM+E,SAASC,OAAO,CAAC,EAAGgb,IAAYnb,MAAM,CAAC,EAAGxD,KAG5DyN,QAAQ+P,IAAM/Z,GAAO,KAAO,IAExBlF,SAASkR,cAAc,kBACzBlR,SAASkR,cAAc,iBAAiBgP,SAG1CG,GAAc,OAGT,SAASC,GAAaC,GAC3Bna,GAAWma,EACX,IAAK,IAAIte,EAAI,EAAGA,EAAIse,EAAYlgB,OAAQ4B,IACtC0d,GAAiB1d,GAAGue,cAAcD,EAAYte,IAI3C,SAASwe,KACdd,GAAmB,GACnBvZ,GAAW,GACX+Z,GAAYzR,OAAMmC,MAAM6P,UAAU,IAClC,IAAIC,EAAmBjS,OAAMmC,MAAM+P,QAAQxa,SAC3Cua,EAAiBpT,SAAQ,SAAUlH,GACjCwa,GAAcxa,MAEhBia,GAAYK,GACZX,KAGK,SAASa,GAAexa,GAC7B,IAAIya,EAAkB,IAAI5D,GAAgB7W,EAAS4W,GAAM/X,GAAQzD,GAAOF,IAAQ,SAAU+c,EAAGsB,GACzF7f,QAAQqO,IAAI,4CAA6CwR,GACzDzC,GAAYmB,EAAGsB,KACdmB,GAAkB,gBACvBpB,GAAiBzR,KAAK4S,GACtB7D,KAGF,SAAS+D,GAAc1C,GACrB,OAAOwB,SAASxB,EAAEpa,KAAK,MAAMma,OAAO,KAGtC,SAAS0C,GAAkBzC,GACzB2C,QAAQC,UAAU,GAAIlhB,SAASmhB,MAAOlhB,OAAOoR,SAAS+P,SAAWnhB,OAAOoR,SAASvB,QACjF,IAAI4P,EAAUpB,EAAEpa,KAAK,MAAMma,OAAO,GAAI,GAClCgD,EAAcL,GAAa1C,GAG/B0B,GAAcN,EAAS2B,GACvBthB,QAAQqO,IACN,0CACA,YAAcsR,EACd,mBAAqB2B,EACrBjb,GAASib,IAGX,IAAIC,EAASlb,GAASib,GAAazD,QAAQ,GAC3C2D,OAAuBD,GAGlB,SAASjB,GAAemB,GAC7B/f,GAAQzB,SAASwR,eAAe,oBAAoBgL,YAAc9N,OAAMmC,MAAM4L,OAAOC,MAAQhO,OAAMmC,MAAM4L,OAAOE,KAAO,GACvH,IAAI8E,EAAOtiB,KAAGgJ,OAAO,IAAMqZ,GACxBE,OAAO,MAAO,gBACdxd,KAAK,QAAS,SACdA,KAAK,aAAc,gEACnBA,KAAK,gBAAiB,QACtBG,OAAO,OAAOH,KAAK,QAClB4b,SAASre,GAAQiN,OAAMmC,MAAM4L,OAAOE,OAAOzY,KAAK,UAChD,OAAS4b,SAASre,GAAQiN,OAAMmC,MAAM4L,OAAOE,MAAQ,OAAOzY,KAC5D,sBAAuB,QAAQA,KAAK,SAAU,IAAIG,OAAO,KAAKH,KAC9D,YAAa,aAAewK,OAAMmC,MAAM4L,OAAOE,KAAO,OAE1D8E,EAAKpd,OAAO,KAAKH,KAAK,QAAS,UAAUqB,KACvCpG,KAAGqB,IAAI8E,OACJlF,MAAM8E,IACNyc,OAAO,UACPC,SAAS,EAAG,EAAG,GACfC,YAAY,IAOjB,IAHA,IAAIC,EAAW,GACXC,EAAW5iB,KAAGgF,UAAU,2BAA2B,GAE9C8U,EAAI,EAAGA,EAAI8I,EAAS1hB,OAAQ4Y,IACnC6I,EAAS5T,MAAM6T,EAAS9I,GAAG+I,aAG7BF,EAAWA,EAAS9O,OAAOiP,IAC3BH,EAAS5T,KAAKQ,OAAMmC,MAAM6P,UAAU,GAAGrgB,QACvCyhB,EAASI,QAAQ,GAKjB/iB,KAAGgJ,OAAO,IAAMqZ,EAAU,kBAAkBjc,KAC1CpG,KAAGqB,IAAI8E,OACJlF,MAAM8E,IACNyc,OAAO,UACPC,SAAS,EAAG,EAAG,GACfC,YAAY,GACZM,WAAWL,IAGhB3iB,KAAGgF,UAAU,YAAYD,KAAK,cAAe,OAG/C,SAAS+d,GAAW3iB,GAClB,IAAI8iB,EAAW1T,OAAMmC,MAAM6P,UAAU,GAAGrgB,OACxC,OAAc,IAANf,GAAWA,IAAM8iB,GAAY9iB,EAAI4P,QAAQ+P,IAAOmD,EAAWlT,QAAQ+P,IAAM,GEnInF,IAAIoD,GAAQ,GACZ,OACA,OACA,MACIC,GAAe,IAAIC,OAAO,sDAEf,IACb7jB,KAAMA,WACN8jB,MAAOA,CAACA,YAAaA,QAASA,cAAeA,cAC7C1jB,KAHF,WAII,MAAO,CACL2jB,KAAMA,GACNC,GAAIA,EAAQA,QACZC,KAAMA,EAAQA,UAGlBhS,SAAUA,kBACZG,gBACA,UACA,cACA,gBAGEC,MAAOA,CACL6R,UAAWA,SAAfA,KACM,IAAI5R,EAAQ7S,KACR6S,EAAM6R,YAAYC,QAAUC,GAAI,GAAK9iB,OAAO0H,YAAc1H,OAAO0H,WAAa,IAChF3H,SAASA,cAAcA,EAAMA,WAAaA,SAASA,MAAMA,KAAOA,OAAxEA,qBACA,8CACQA,SAASA,cAAcA,EAAMA,WAAaA,SAASA,MAAMA,KAAOA,OAEhEA,SAASA,cAAcA,EAAMA,WAAaA,SAASA,MAAMA,KAAOA,EAAMA,YAAYA,QAAUA,KAE9FA,SAASA,cAAcA,EAAMA,WAAaA,SAASA,MAAMA,IAAMA,EAArEA,8BACsC,IAA5B7B,KAAK6kB,QAAQC,WACf9kB,KAAK6kB,QAAQC,YAAa,EAE1B9kB,KAAK6kB,QAAQE,UAAW,EAE1BnjB,QAAQA,IAAIA,EAAMA,OAClBA,QAAQA,IAAIA,iBAAkBA,EAAQA,WAAYA,GAClD,IAAI0iB,EAAOxR,EACPkS,EAASV,EAAK,GAElB,GADAtjB,gBAAaA,EAAMA,WAAaA,aAAaA,SACzCsjB,EAAKpiB,OAASgiB,GAAO,CACvB,IAAIe,EAASpS,EAAMqS,MAAMZ,EAAMJ,IAC/BrR,EAAMA,YAAYA,EAAQA,EAAQA,QAElCA,EAAMA,YAAYA,EAAMA,KAI9B9Q,QAASA,CACP+b,SADJ,WAEMvN,OAAMA,OAAOA,cAAeA,MAC5BvQ,KAAK6kB,QAAQE,UAAW,GAE1BI,UALJ,SAKAhF,GACM,IAAItN,EAAQ7S,KACRglB,EAAS7E,EAAE,GAAGiF,SAAS,GACvBxZ,EAAQ,EAGZ,GAFAoZ,EAAOA,KAAOA,EAAEA,GAAGA,MACnBA,EAAOA,OAASA,EAAEA,GAAGA,SAASA,OAC1B7E,EAAE,GAAGiF,SAASljB,OAASgiB,GAAO,CAChC,IAAIe,EAASpS,EAAMqS,MAAM/E,EAAE,GAAGiF,SAAUlB,IACxCrR,EAAMA,YAAYA,EAAQA,EAAQA,QAKlCjH,GAAgBA,EAChB5L,KAAKqlB,YAAYlF,EAAE,GAAGiF,SAAUJ,IAGpCE,MAtBJ,SAsBAI,EAAAC,GAAA,MACA,KACMD,GAANA,yCAEM,MAAOA,EAAMpjB,OACX+iB,EAAOA,KACfK,eAIM,OAAOL,GAETO,gBAlCJ,SAkCAlhB,GACM,IAAImhB,EAAc,GAIlB,OAHAnhB,EAAMA,SAAQA,SAAUA,GACtBmhB,EAAYA,QAAQA,MAEfA,GAETJ,YAzCJ,SAyCAK,EAAAC,EAAA/Z,GACM,IAEInF,EAAM6d,EAAMsB,EAAOC,EAAOC,EAF1BjT,EAAQ7S,KACRghB,EAAM,GAUV,QARc+E,IAAVna,GACFka,EAAWA,EACXxB,EAAOA,EAASA,KAEhBwB,EAAWA,EAAMA,gBAAgBA,GACjCxB,EAAOA,GAGL0B,OAAOvW,UAAUwW,eAAe7e,KAAKkd,EAAK,GAAI,YAAa,MAC/CyB,IAAVna,GAA8D,OAAvC/J,SAASkR,cAAc,aAChDlR,SAASA,cAAcA,YAAYA,SAErC,IAAIQ,EAAMrB,GAAA,UAClB6R,sBACA3M,OAAA,OACAH,KAAA,aACAA,KAAA,QAAA6e,IACA7e,KAAA,SAAAmgB,IAEQL,EAAQA,EAAMA,YAAYA,EAAKA,SAAUA,EAAUA,EAAWA,QAE9DhkB,SAASA,iBAAiBA,aAAaA,SAAQA,SAAvDA,GAAA,qBACQA,SAASA,iBAAiBA,mBAAmBA,SAAQA,SAA7DA,GAAA,sCACQQ,EAAMA,aACdwQ,sBACA3M,OAAA,OACAH,KAAA,oCACAA,KAAA,QAAA6e,IACA7e,KAAA,SAAAmgB,IAEQL,EAAQA,EAAMA,YAAYA,EAAKA,QAASA,EAAUA,EAAWA,GAyF/D,GAtFAD,EAAQA,EAAMA,MACdvjB,EAAMA,EAAMA,IAGR2jB,OAAOvW,UAAUwW,eAAe7e,KAAKkd,EAAK,GAAI,aAChDsB,EAAMA,QACNnf,EAAOA,aAAUA,YACzBT,UAAA,aACArF,KAAAilB,GACA3f,UAEQ0f,EAAUA,GAAKA,EAAvBA,QACQA,EAAUA,GAAKA,EAAvBA,WACQC,EAAMA,KAAKA,CAACA,EAAMA,GAAGA,GAAKA,EAAKA,EAAMA,GAAGA,GAAIA,EAAWA,WACvD/jB,SAASA,cAAcA,SAASA,UAAUA,IAAIA,QAC9C+jB,EAAMA,QACNnf,EAAOA,aACf,mCACAT,UAAA,KACArF,KAAAilB,GACA3f,SAGMQ,EAAOA,EACbP,OAAA,KACAH,KAAA,uBACQ,GAAR,WACU,OAAV,sDACA,YAEA,eAIAA,KAAA,oBAEQ,GAAR,WACU,OAAV,sDACA,oCACA,kCACA,aAEA,qBAIAA,KAAA,QAAAogB,IACApgB,KAAA,SAAAogB,IACA9f,GAAA,uBACQ,GAAR,KACU,GAAV,sDAEYwM,EAAZA,kBAEY,QAAZ,UACc,IAAd,yBACciQ,QAAdA,kGACcjQ,EAAdA,2CACgB,GAAhB,mBACkB3K,EAAlBA,6BACoB,GAApB,wDAGsB,OAFAkb,UACAgD,QACtB,aAIkB,GAAlB,8EAIoB,OAHAle,EAApBA,6BACoBkb,UACAgD,QACpB,QAIA,YACgBvT,EAAhBA,sBAGchR,SAAdA,gDACcA,SAAdA,yDAAgB,OAAhB,kCAMUmkB,OAAOvW,UAAUwW,eAAe7e,KAAKkd,EAAK,GAAI,YAChD7d,EAAKA,OAAOA,QACpBV,KAAA,yBACU,MAAV,yCAEAA,KAAA,iBACAA,KAAA,uBACU,OAAV,gDAGAA,KAAA,wBACU,OAAV,sBAEAA,KAAA,QACAA,KAAA,kBACAA,KAAA,qBACA,CACQ,IAAIsgB,EAAQrlB,GAAA,UAAU,gBAAgBgF,UAAU,KAAKrF,KAAK,CAACglB,IACnE1f,QAEQogB,EAAMA,OAAOA,QACrBtgB,KAAA,iBAAU,OAAV,cACAA,KAAA,kBAAU,OAAV,WACAA,KAAA,qBACAO,MAAA,YACU,OAAV,qDAEAP,KAAA,uBACAS,MAAA,kBACAA,MAAA,gBACAA,MAAA,mBAEQ6f,EAAMA,OAAOA,QACrBtgB,KAAA,yBACU,MAAV,kCAEAA,KAAA,iBACAA,KAAA,uBACU,OAAV,+BAEAA,KAAA,aACAA,KAAA,QACAA,KAAA,kBACAA,KAAA,iBAEQsgB,EAAMA,OAAOA,QACrBtgB,KAAA,iBAAU,OAAV,aACAA,KAAA,kBAAU,OAAV,aACAA,KAAA,qBACAO,MAAA,YACU,OAAV,YAEAP,KAAA,uBACAS,MAAA,kBACAA,MAAA,gBACAA,MAAA,mBAGMC,EACNP,OAAA,UACAH,KAAA,kBAAQ,OAAR,QACAA,KAAA,kBAAQ,OAAR,QACAA,KAAA,IAAAogB,IACA3f,MAAA,gBACAA,MAAA,oBACAA,MAAA,oBAEMC,EAAKA,OAAOA,YAClBV,KAAA,2BAAQ,OAAR,IACAG,OAAA,UACAH,KAAA,kBAAQ,OAAR,QACAA,KAAA,kBAAQ,OAAR,QACAA,KAAA,IAAAogB,IACApgB,KAAA,uBAEMU,EAAKA,OAAOA,SAClBV,KAAA,uBACAA,KAAA,wBACAA,KAAA,iBAAQ,OAAR,WACAA,KAAA,iBAAQ,OAAR,WACAA,KAAA,2BACQ,IAAR,MAGQ,OAFR,cAAUugB,EAAVA,8BACA,yCAAUA,EAAVA,0CACA,KAEAvgB,KAAA,4BACQ,IAAR,MAGQ,OAFR,kDAAUwgB,EAAVA,2BACA,yCAAUA,EAAVA,uCACA,sHAIM9f,EAAKA,OAAOA,QAClBV,KAAA,iBAAQ,OAAR,aACAA,KAAA,kBAAQ,OAAR,eACAA,KAAA,qBACAO,MAAA,cACQ,GAAR,sCACU,IAAV,aAEU,OADV,uBAAYkgB,EAAZA,yEACA,kDAEU,QAAV,SACY,OAAZ,kCAIAzgB,KAAA,uBACQ,OAAR,8CAEAA,KAAA,uBACAS,MAAA,kBACAA,MAAA,gBACAA,MAAA,oBAEIigB,YAzRJ,SAyRApkB,EAAAqkB,EAAAZ,EAAAH,EAAA/Z,GACM,IAKI0Y,EALAqC,EAAQ,GACR3F,EAAM,EACN4E,EAAQ,GACRgB,EAAS,GACT/T,EAAQ7S,KAER6mB,EAAiB,QAEPd,IAAVna,GACF0Y,EAAOA,EAASA,GAChBA,EAAOA,EAAMA,gBAAgBA,IAE7BA,EAAOA,EAEI,UAAToC,IACF1F,EAAMA,IAER,IAAI8F,EAAaZ,GAAIW,EAErBjB,EAAMA,KAAKA,CAACA,GAAIA,IAGhB,IAAK,IAAX,mBACQA,EAAMA,KAAKA,CAACA,GAAKA,EAAKA,EAA9BA,MACQA,EAAMA,EAAIA,GAAGA,KAAKA,EAAKA,IAUzB,GAPAe,EAAMA,KAAKA,UAAyBA,CAClCI,OAAQA,EAAMA,GACdjS,OAAQA,EAAMA,MAKZwP,EAAKpiB,OAAS,EAAG,CACnB,IAAI8kB,EAAS,CACrB,CAAUC,OAAVA,KAAUC,OAAVA,GACA,CAAUD,OAAVA,KAAUC,OAAVA,MACA,CAAUD,OAAVA,KAAUC,OAAVA,OAGYC,EAAM,UAClBhmB,GAAA,YAAU,OAAV,YACAC,GAAA,YAAU,OAAV,YACAgmB,MAAAC,SAEQhlB,EAAIA,OAAOA,QACnB0D,KAAA,IAAAohB,MACAphB,KAAA,eACAA,KAAA,oBACU,MAAV,eAEAA,KAAA,oBACAS,MAAA,kBAEQ,IAAK,IAAb,oBACU,IAAI8gB,EAAY,CAC1B,CAAYL,OAAZA,KAAYC,OAAZA,YACA,CAAYD,OAAZA,KAAYC,OAAZA,SACA,CAAYD,OAAZA,KAAYC,OAAZA,UAEU7kB,EAAIA,OAAOA,QACrB0D,KAAA,IAAAohB,MACAphB,KAAA,eACAA,KAAA,oBACAS,MAAA,kBACAT,KAAA,qBACY,MAAZ,eAIQ1D,EAAIA,OAAOA,QACnBmE,MAAA,oBACAA,MAAA,kBACAT,KAAA,WACAA,KAAA,KAAA+gB,qBACA/gB,KAAA,WACAA,KAAA,KAAA+gB,MACA/gB,KAAA,oBACU,OAAV,MACA,YAEA,eA0GM,OArGA1D,EACN6D,OAAA,QACAH,KAAA,IAAA4gB,GACA5gB,KAAA,oBACAA,KAAA,eACAS,MAAA,kBAGUsf,EAAS5jB,OAAS,IAChB0J,EAAQ,EAAIka,EAAS5jB,SACvBG,EACV6D,OAAA,UACAH,KAAA,WACAA,KAAA,KAAA+gB,MACA/gB,KAAA,QACAS,MAAA,kBAEUnE,EAAIA,OAAOA,SACrB0D,KAAA,gBACAA,KAAA,iBACAA,KAAA,YACAA,KAAA,IAAA+gB,MACA/gB,KAAA,aAAA8M,QACAxM,GAAA,oBACA,cACcwM,EAAdA,wBAIUxQ,EAAIA,OAAOA,QACrB0D,KAAA,UACAA,KAAA,KAAA+gB,MACA/gB,KAAA,qBACAO,KAAA,uBACAP,KAAA,uBACAS,MAAA,kBACAA,MAAA,gBACAA,MAAA,oBAGYoF,EAAQ,EAAI,IACdvJ,EACV6D,OAAA,UACAH,KAAA,WACAA,KAAA,KAAAmgB,kBACAngB,KAAA,QACAS,MAAA,kBAGUnE,EAAIA,OAAOA,SACrB0D,KAAA,gBACAA,KAAA,iBACAA,KAAA,YACAA,KAAA,IAAAmgB,iBACAngB,KAAA,aAAA8M,MACAxM,GAAA,oBACA,QACcwM,EAAdA,wBAIUxQ,EAAIA,OAAOA,QACrB0D,KAAA,UACAA,KAAA,KAAAmgB,kBACAngB,KAAA,qBACAO,KAAA,YACAP,KAAA,uBACAS,MAAA,kBACAA,MAAA,gBACAA,MAAA,qBAKMnE,EACN6D,OAAA,QACAH,KAAA,OACAA,KAAA,SACAA,KAAA,QACAA,KAAA,QACAA,KAAA,QAAA8M,uBACA9M,KAAA,SAAA8M,sBACArM,MAAA,iBACAT,KAAA,kBACAM,GAAA,oBACQwM,EAARA,cAGMxQ,EAAIA,OAAOA,QACjB0D,KAAA,OACAA,KAAA,UACAA,KAAA,qBACAO,KAAAuM,SACA9M,KAAA,uBACAS,MAAA,kBACAA,MAAA,gBACAA,MAAA,mBAEMogB,EAAOA,MAAQA,EACfA,EAAOA,MAAQA,EACfA,EAAOA,IAAMA,EACNA,GAETW,eAxdJ,WAydM,IAAI1U,EAAQ7S,KACZ8B,OAAOA,QAAQA,cAAeA,EACgC,SAA1DD,SAASwR,eAAe,gBAAgB7M,MAAMqN,QAChDyF,WAAWA,EAAMA,eAAgBA,IAEjCxX,OAAOA,QAAQA,YAAYA,OAAOA,QAAQA,iBAAkBA,OAAOA,QAAQA,sBAE3E0lB,GAA4BA,OAAOA,QAAQA,kBAI3CxmB,gBAAaA,2BAA2BA,KAAKA,OAAQA,WACrDA,aAAUA,cAAcA,QAAQA,UAAUA,OCziB+S,MCQ7V,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,OAIa,M,QCnBX,GAAS,WAAa,IAAIjB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAC+Q,YAAY,eAAe7Q,MAAM,CAAC,GAAK,cAAcgG,GAAG,CAAC,MAAQtG,EAAI0nB,aAAa,CAACtnB,EAAG,MAAM,CAACE,MAAM,CAAC,IAAMN,EAAI2nB,aACpN,GAAkB,GCMP,IACbnnB,KAAMA,aACNI,KAFF,WAGI,MAAO,CACL+mB,OAAQA,EAAQA,UAGpBrD,MAAOA,CAACA,cAAeA,UACvBzR,MAAOA,CACLiL,OAAQA,SAAZA,KACM,IAAIhL,EAAQ7S,KACZ6B,SAASA,iBAAiBA,qBAAqBA,SAAQA,SAAUA,GAC/D0T,EAAKA,MAAMA,WAAaA,EAAMA,YAAYA,QAAUA,KACpDA,EAAKA,MAAMA,UAAYA,EAAMA,YAAYA,QAAUA,GAAKA,UAM9DxT,QAASA,CACP0lB,WADJ,WAEMznB,KAAK6kB,QAAQC,YAAa,EAC1B9kB,KAAK6kB,QAAQE,UAAW,KC7BqU,MCQ/V,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCAA,IACbxkB,KAAMA,qBACNC,WAAYA,CACVmnB,SAAJA,GACIC,WAAJA,IAEEjnB,KANF,WAOI,MAAO,CACLokB,UAAUA,EACVtH,KAAMA,KACNC,MAAOA,EACPC,gBAAiBA,GACjBE,OAAQA,EACRiH,YAAYA,EACZlH,WAAYA,WAGhBhL,MAAOA,CACLxE,SADJ,SACA0E,EAAA+U,GACUA,EAAO1T,YAAcrB,EAAOqB,WAAkC,OAArB0T,EAAO1T,WAClDrS,OAAOA,SAASA,EAAGA,MAQvBgmB,SAXJ,SAWApG,GACM,IAAI7O,EAAQ7S,KACZ,GAAiB,OAAb0hB,EAAmB,CACrB7O,EAAMA,OAASA,EAAMA,OAASA,EAC9B,IAAIkV,EAAOlV,EAAMmV,mBACjBnV,EAAMA,gBAAgBA,QAAUA,EAAKA,KACrCA,EAAMA,gBAAgBA,QAAUA,EAAKA,IACrCA,EAAMA,gBAAgBA,MAAQA,EAAKA,MACnCA,EAAMA,gBAAgBA,OAASA,EAAKA,OACpCA,EAAMA,YAAaA,EACnB,IAAItR,EAAM,GAAlB,kDACQA,EAAMA,EAAMA,EAAMA,aAAaA,UAAYA,IAAMA,EAAMA,aAAaA,IAAMA,IAAMA,EAAMA,aAAaA,MAAQA,IAAMA,EACjHC,IAAMA,CACJC,OAAQA,MACRF,IAAKA,IACfG,MAAA,YACUmR,EAAMA,UAAWA,EACjBA,EAAMA,KAAOA,EAASA,KACtBA,EAAMA,MAAQA,EACdoV,EAASA,KAAKA,SAAQA,SAAhCA,GACYpV,EAAMA,OAASA,EAAIA,SAASA,kBAIhCA,EAAMA,UAAWA,IAIvBL,SAAUA,gBACR7R,KADJ,WAEM,MAAO,CACL4R,KAAMA,OAAMA,MAAMA,KAClBkL,KAAMA,OAGVrP,SAPJ,WAQM,OAAOmC,EAAA,KAAMmC,MAAMwV,WAErBJ,SAVJ,WAWM,OAAOvX,EAAA,KAAMmC,MAAMoV,WAEzBnV,gBACA,aACA,qBACA,kBAGE5Q,QAASA,CACPyb,SAAUA,WACR1b,OAAOA,SAASA,EAAGA,KACnBkR,oBAGJ1R,QAjFF,WAkFI,IAAIuR,EAAQ7S,KACZ,GAAI6S,EAAMsV,YAAcnC,OAAOC,eAAe7e,KAAKyL,EAAMsV,WAAY,YAEnE,IADA,IAAIC,EAASvmB,SAASqc,iBAAiB,6BAC9Bpa,EAAI,EAAGA,EAAIskB,EAAOlmB,OAAQ4B,IACjCskB,EAAOA,GAAGA,iBAAiBA,SAASA,WAClC,IAAI7S,EAAOvV,KAAKqoB,cAAcvlB,GAC9BlB,QAAQA,IAAIA,QC3GqV,MCQvW,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,OAIa,M,QCnBX,GAAS,WAAa,IAAI7B,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAC+Q,YAAY,SAAS,CAAC/Q,EAAG,IAAI,CAAC+Q,YAAY,QAAQ7Q,MAAM,CAAC,KAAO,KAAKgG,GAAG,CAAC,MAAQtG,EAAIyd,YAAYrd,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,iBAAiB,CAAEN,EAAkB,eAAEI,EAAG,MAAM,CAAC+Q,YAAY,cAAc7Q,MAAM,CAAC,GAAK,oBAAoBN,EAAI8Z,GAAI9Z,EAAkB,gBAAE,SAASmoB,GAAW,OAAO/nB,EAAG,MAAM,CAACoP,IAAI2Y,EAAU,GAAGhX,YAAY,uCAAuC7Q,MAAM,CAAC,GAAK6nB,EAAU,IAAI7hB,GAAG,CAAC,MAAQ,SAASoL,GAAQ,OAAO1R,EAAIuoB,YAAYJ,EAAU,OAAO,CAAC/nB,EAAG,MAAM,CAAC+Q,YAAY,gBAAgB7K,GAAG,CAAC,UAAY,SAASoL,GAAQ,OAAO1R,EAAIwoB,WAAWL,EAAU,KAAK,SAAW,SAASzW,GAAQ,OAAO1R,EAAIyoB,iBAAiBN,EAAU,OAAO,CAAC/nB,EAAG,IAAI,CAACE,MAAM,CAAC,GAAK,UAAU,CAACN,EAAI6R,GAAG,OAAOzR,EAAG,IAAI,CAAC+Q,YAAY,eAAe,CAACnR,EAAI6R,GAAG7R,EAAI8R,GAAGqW,EAAU,OAAO/nB,EAAG,MAAM,CAAC+Q,YAAY,OAAO7K,GAAG,CAAC,UAAY,SAASoL,GAAQ,OAAO1R,EAAI0oB,SAASP,EAAWzW,MAAW,CAAC1R,EAAI6R,GAAG,SAASzR,EAAG,MAAM,CAAC+Q,YAAY,2BAA2B6I,YAAY,CAAC,OAAS,eAAc,GAAGha,EAAIiS,KAAK7R,EAAG,WAChjC,GAAkB,G,kDCIf,SAASuoB,GAAanhB,EAAOohB,GAClCC,GAAyBrhB,EAAOoa,SAASgH,IAMpC,SAASE,KAEd,IAAMC,EAA+B/X,QAAQ+X,6BAC7C,QAAqC/C,IAAjC+C,EAA4C,CAC9C,IAAK,IAAIhlB,KAAKglB,EAEZC,sBAAyBD,EAA6BhlB,GAAGhB,GACvDgmB,EAA6BhlB,GAAGklB,gBAEpCF,EAA6B5mB,OAAS,GAQnC,SAAS+mB,GAAgBC,GAC9B,IAAIC,EAAcJ,qBAAwBK,WAC1CF,EAAM9Z,SAAQ,SAAUia,GACtBC,GAAaD,MAEfF,EAAYI,SAASC,mBAAoB,EACzCL,EAAYI,SAASE,WAAY,EAGnC,SAASH,GAAcJ,GAErB,IAAIpV,EAAWoV,EAAMrf,MAAM,KAAK,GAC5BqI,EAAiD,WAAzC,gBAAQ3B,OAAMmC,MAAMwV,UAAUhW,OAAsB3B,OAAMmC,MAAMwV,UAAUhW,MAAM,GAAK3B,OAAMmC,MAAMwV,UAAUhW,MACvH,GAAI4B,EAASX,SAAS,KAAM,CAC1B,IAAIlP,EAAQ0d,SAAS7N,EAASjK,MAAM,KAAK,GAAG6f,QAAQ,MAAO,KACvD3gB,EAAM4Y,SAAS7N,EAASjK,MAAM,KAAK,GAAG6f,QAAQ,MAAO,KAAO,EAChEC,KAAE7iB,MAAM7C,EAAO8E,GAAKqG,SAAQ,SAACwa,GAC3BC,GAAYD,EAAO1X,WAEZ4B,EAASX,SAAS,KAC3BW,EAASjK,MAAM,KAAKuF,SAAQ,SAACwa,GAC3BA,EAAQjI,SAASiI,EAAMF,QAAQ,MAAO,KACtCG,GAAYD,EAAO1X,OAGrB4B,EAAW6N,SAAS7N,EAAS4V,QAAQ,MAAO,KAC5CG,GAAY/V,EAAU5B,IAI1B,SAAS2X,GAAa/V,EAAU5B,GAC9B,IAAI4X,EAAaf,uBACbI,EAAcJ,qBAAwBK,WAC1CtV,EAAWgW,EAAWC,yBAAyB,EAAGjW,EAAU5B,GAC5D,IAAI8X,EAAOb,EAAYc,KAAKC,mBAAmB,EAAGhY,EAAO4B,EAAS,IAAI,GACtEqV,EAAYc,KAAKE,kBAAkBC,KAAKJ,GAAMK,WAAY,EAO3D,SAASzB,GAA0B0B,EAAaC,GAS/C,GANAA,EAAqC,qBAAhBA,EAA8BA,GAAe,EAM9DA,GAAe,EACjBC,GAAgCF,EAAaC,QAG7C,IAAKA,KAAeD,EAAYG,OAC9BD,GAAgCF,EAAaC,GAQnD,SAASC,GAAiCF,EAAaC,GACrD,IAAIG,EAAiB,IAAI9V,MACrB+V,EAAe,IAAI/V,MACnBgW,EAAsB,IAAIhW,MAC1BiW,EAAmB,IAAIjW,MACvBkW,EAAc,IAAIlW,MAClBmW,EAAkB,IAAInW,MAEtBoW,EAAa,UACjB,QAAmBjF,GAAfuE,EAA0B,OAK5B,IAAK,IAAI3lB,KAJL2lB,EAAYI,gBAAkBJ,EAAYI,eAAexoB,OAAS,IACvE8oB,EAAaV,EAAYI,eAAe,IAGzBJ,EAAYG,OAAOF,GAE/B,GAAID,EAAYG,OAAOF,GAAa5lB,GAAGsmB,KAAM,CAC3C,GAAgC,gBAA5BX,EAAYY,MAAMtnB,MAGxB0mB,EAAYG,OAAOF,GAAa5lB,GAAGf,MAAM2I,UAAU,GAEjD+d,EAAYG,OAAOF,GAAa5lB,GAAGf,MAElC8mB,EAAe3a,KAAKua,EAAYG,OAAOF,GAAa5lB,GAAGf,OAEtD8mB,EAAe3a,KAAKib,GAExBL,EAAa5a,KAAKua,EAAYG,OAAOF,GAAa5lB,GAAGwS,OACrDyT,EAAoB7a,KAAKua,EAAYG,OAAOF,GAAa5lB,GAAG0V,MAC5DwQ,EAAiB9a,KAAKua,EAAYG,OAAOF,GAAa5lB,GAAGV,MACvD,IAAMqmB,EAAYG,OAAOF,GAAa5lB,GAAGoE,KAE3C,IAAIoiB,EAAQ,IAAIvW,MACZwW,EAAW,IAAIxW,MAEnB,IAAK,IAAI/O,KAAKykB,EAAYG,OAAOF,GAAa5lB,GAAG0mB,KAC/CF,EAAMpb,KAAKua,EAAYG,OAAOF,GAAa5lB,GAAG0mB,KAAKxlB,GAAGylB,MACtDF,EAASrb,KAAKua,EAAYG,OAAOF,GAAa5lB,GAAG0mB,KAAKxlB,GAAGS,MAE3DwkB,EAAY/a,KAAKob,GACjBJ,EAAgBhb,KAAKqb,GAGvB,IAAIG,EAASjB,EAAYkB,UACzB,GAAIlB,EAAYrE,eAAe,YAAqC,IAAvBqE,EAAYmB,QACvD,IAAK,IAAI3nB,EAAG,EAAGA,EAAIilB,gBAAmBxG,UAAUrgB,OAAQ4B,IAClDwmB,EAAYmB,SAAW1C,gBAAmBxG,UAAUze,GAAG4nB,eACzDH,EAASxC,gBAAmBxG,UAAUze,GAAGb,kBACzCqnB,EAAYkB,UAAYD,GAO9B,IAAII,GAAe,GACjB7oB,GAAIwnB,EAAYkB,UAChBxC,eAAgBsB,EAAYsB,SAC5BlB,eAAgBA,EAChBC,aAAcA,EACdC,oBAAqBA,EACrBC,iBAAkBA,EAClBC,eAPiB,gCAOJA,GAPI,oCAQjBC,GARiB,oCAQAA,GARA,GAYjBha,QAAQ+X,6BAA6B/Y,KAAK4b,GAGtC/W,MAAMiX,QAAQF,EAAgB7oB,IAChCimB,mBAAsB4C,EAAgB7oB,GAAG,GACvC6oB,EAAgB3C,eAAgB0B,EAChCC,EAAcC,EAAqBC,EACnCC,EAAaC,GAIfhC,mBAAsB4C,EAAgB7oB,GACpC6oB,EAAgB3C,eAAgB0B,EAChCC,EAAcC,EAAqBC,EACnCC,EAAaC,IA5KvBha,QAAQ+X,6BAA+B,IAAIlU,M,iBCwB5B,IACbrU,KAAMA,WACNI,KAFF,WAGI,MAAO,CACLmpB,WAAYA,KACZX,YAAaA,OAGjBpnB,QAASA,CACPyb,SAAUA,WACR1b,OAAOA,SAASA,EAAGA,KACnBkR,mBAEF8Y,cAAeA,WACb/C,qBAAwBA,WAAWA,yBAErCT,YAAaA,SAAjBA,GACM,IAAIyD,EAAYlqB,SAASwR,eAAe0E,GAAOiU,UAC/CjU,EAAQA,EAAMA,QAAQA,MAAOA,OACG,UAA5BgU,EAAUvlB,MAAMqN,SAClBkY,EAAUA,MAAMA,QAAUA,QAC1BlqB,SAASA,cAAcA,IAAMA,EAAQA,WAAWA,UAAYA,MAE5DkqB,EAAUA,MAAMA,QAAUA,OAC1BlqB,SAASA,cAAcA,IAAMA,EAAQA,WAAWA,UAAYA,MAGhE0mB,WAAYA,SAAhBA,GACM1mB,SAASA,cAAcA,IAAMA,EAAGA,QAAQA,MAAOA,OAASA,qBAAqBA,MAAMA,WAAaA,WAElG2mB,iBAAkBA,SAAtBA,GACM3mB,SAASA,cAAcA,IAAMA,EAAGA,QAAQA,MAAOA,OAASA,qBAAqBA,MAAMA,WAAaA,QAElG4mB,SAAUA,SAAdA,KACMlY,OAAMA,OAAOA,gBAAiBA,EAAQA,IACtCA,OAAMA,OAAOA,eAAgBA,EAAQA,GAAGA,GAAGA,OAC3CA,OAAMA,OAAOA,uBAAuBA,GACpCA,OAAMA,OAAOA,iBAAkBA,GAC/BA,OAAMA,OAAOA,sBAAuBA,EAAMA,WAAWA,0BAEvD0b,eAAgBA,SAApBA,GACM,IAAIle,EAAmB,GACnBme,EAAiB,GAErB3J,EAAUA,SAAQA,SAAUA,GAC1BxU,EAAiBA,KAAKA,EAASA,mBAC/Bme,EAAeA,KAAKA,EAASA,iBAE/BC,QAAmCA,IAErCC,iBAAkBA,SAAtBA,KACM,GAAIC,EAAYnqB,OAAS,EAAG,CAC1B,IAAIoqB,EAAaD,GAAeC,EAG5BC,EAAkB,KAAEC,QAAQF,GAAY,SAAUG,GACpD,OAAOA,EAAQC,UAGjBH,EAAkBA,OAAOA,KAAKA,GAAiBA,KAAIA,SAAUA,GAC3D,MAAO,CAACI,OAAOpd,GAAMgd,EAAgBhd,QAKF,OAAjCgB,EAAA,KAAMuH,QAAQ8U,gBAE1B,gDADUrc,OAAMA,OAAOA,iBAAkBA,KAMrCsc,kBAhEJ,WAiEM,IAAIha,EAAQ7S,KACR8sB,EAAc9sB,KAAK+sB,OAAOra,MAAMoa,YAAc9sB,KAAK+sB,OAAOra,MAAMoa,YAAc,GAC9EA,EAAY5qB,OAAS,GACvB4qB,EAAYA,SAAQA,SAAUA,GACxBE,EAAE,GAAG7Z,SAAS,UAA2C,OAA/BN,EAAMoa,iBAAiB3d,KACnDiB,OAAMA,OAAOA,mBAAoBA,CAA7CjB,YAAA4d,eAMEta,MAAOA,CAILua,qBAAsBA,SAA1BA,KACM,IAAIta,EAAQ7S,KACRotB,EAAcptB,KAAK+sB,OAAOra,MAAM2a,sBAChCC,EAAkBttB,KAAK+sB,OAAOra,MAAM6a,mBACpCza,IAAW+U,IACbhV,EAAMA,iBAAiBA,EAAaA,GAChCA,EAAM2a,gBAAkB3a,EAAM4a,OAAOvE,OACvCrW,EAAMA,sBAIZ6a,OAAQA,SAAZA,GACM,IAAI7a,EAAQ7S,KACP8S,GACHD,EAAMA,eAAeA,KAAKA,OAAOA,MAAMA,QAAQA,YAGnDoa,iBAAkBA,SAAtBA,GACMvE,GAAwBA,EAAKA,IAAKA,EAAKA,OAChB,OAAnB1oB,KAAK2tB,WACPjF,GAA2BA,KAAKA,YAGpC8E,eAAgBA,SAApBA,GACM,IAAI3a,EAAQ7S,KACRW,GAAQkS,EAAM4a,OAAOvE,QAClBrW,EAAMoa,iBAAiB3d,KAC1BuD,EAAMA,uBAKdL,SAAUA,gBACRkb,OADJ,WAEM,OAAOnd,EAAA,KAAMmC,MAAMgb,QAErBC,UAJJ,WAKM,OAAOpd,EAAA,KAAMmC,MAAM2X,YAEzB1X,gBACA,iBACA,uBACA,mBACA,qBC9JiW,MCQ7V,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,OAIa,M,QClBXib,GAAajf,EAAQ,SACnBkf,GAAa,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAE5G,SAASC,KACZvd,OAAMqR,OAAO,sBAAuB,GAGjC,SAASpJ,GAAWwU,EAAGe,GAC1B,IAAIC,EAAU,GACd,GAAIhB,EAAE3B,KAAKnpB,OAAS,EAAG,CACnB8rB,EAAU,MACV,IAAK,IAAIlqB,EAAI,EAAGA,EAAIkpB,EAAE3B,KAAKnpB,OAAQ4B,IAC/BkqB,GAAW,YAAchB,EAAE3B,KAAKvnB,GAAGwnB,KAAO,qBAClC0B,EAAE3B,KAAKvnB,GAAGwC,KAAO,WAE7B0nB,GAAW,OAGf,IAAIC,EAAQ,GACRjB,EAAEzsB,KAAK4S,SAAS,2BAChB8a,EAAQjB,EAAEzsB,KAAKmpB,QAAQ,QAAS,IAChCuE,EAAQA,EAAMvE,QAAQ,QAAS,KAGnC,IAAIwE,EAAU,kEAAoED,EAAQ,cAE1FJ,GAAWze,SAAQ,SAAU+e,EAAMC,GAC/B,GAAID,GAAQF,EAAO,CAErB,IAAMI,EAAgBC,GAAqBH,EAAMnB,EAAE3S,KAAM2S,EAAE/oB,OACrDiqB,EAAUA,EAAU,qBAAuBC,EAAO,IAE9CD,EADiB,GAAjBG,EACUH,EAAU,2BAA6BC,EAAO,QAE9CD,EAAU,uBAAyBC,EAEjDD,GAAoB,gBAG5BA,GAAoB,SAEpB,IAAIK,EAAcvB,EAAE3S,KAAO,OAAS2T,EAEhCQ,EAAa,MAAQxB,EAAE7V,MAAQ,OAC/B6V,EAAEzsB,KAAK4S,SAAS,yBAChB5C,OAAMqR,OAAO,uBAAuB,GAChCoL,EAAE/oB,OAAS+oB,EAAEjkB,KACjBwH,OAAMqR,OAAO,aAAcoL,EAAE/oB,MAAQ,IAAM+oB,EAAEjkB,KAC7CwH,OAAMqR,OAAO,gBAAiBoL,EAAE7V,OAChCsX,GAAezB,EAAE/oB,MAAQ,IAAM+oB,EAAEjkB,IAAKikB,EAAE7V,SAGxC5G,OAAMqR,OAAO,aAAcoL,EAAE/oB,OAC7BsM,OAAMqR,OAAO,gBAAiBoL,EAAE7V,OAEhCsX,GAAezB,EAAE/oB,MAAO+oB,EAAE7V,UAI1B5G,OAAMqR,OAAO,cAAe,GAC5BrR,OAAMqR,OAAO,uBAAuB,GAEhC4M,EADAxB,EAAE/oB,QAAU+oB,EAAEjkB,IACDylB,EAAa,aAAexB,EAAE/oB,MAAQ,KAEtCuqB,EAAa,cAAgBxB,EAAE/oB,MAAQ,IAAM+oB,EAAEjkB,IAAM,KAEtEwH,OAAMqR,OAAO,gBAAiB4M,GAC9Bje,OAAMqR,OAAO,eAAgB2M,GAC7Bhe,OAAMqR,OAAO,iBAAkB,GAC/BrR,OAAMqR,OAAO,sBAAuB/f,SAASkR,cAAc,IAAMgb,EAAIjrB,IAAIyd,0BAGzEyM,EAAE/G,eAAe,UAAY+G,EAAE/G,eAAe,UAAY+G,EAAE/G,eAAe,eAC3ErkB,QAAQqO,IAAI,kBACZrO,QAAQqO,IAAI+c,GACZ0B,GAAiB1B,GAAGtrB,MAAK,WACrBitB,UAGJ/sB,QAAQqO,IAAI,qBACZrO,QAAQqO,IAAI+c,IAIpB,SAASyB,GAAeG,EAAQC,GAChC,IAAIC,EAASve,OAAMuH,QAAQiX,mBAK3B,GAAID,EAAO7I,eAAe2I,IAAWE,EAAOF,GAAQ3I,eAAe,kBACjE,IAAK,IAAIniB,EAAE,EAAGA,EAAIgrB,EAAOF,GAAQI,eAAe9sB,OAAQ4B,IACtD,GAAI+qB,EAAU1b,SAAS2b,EAAOF,GAAQI,eAAelrB,IAAI,CACvDyM,OAAMqR,OAAO,gBAAiB9d,GAE9B,OAMN,SAASwqB,GAAsBH,EAAM9T,EAAMuU,GAC3C,IAAMK,EAAW,sBAAwBd,EAAO,IAC1Ce,EAAY,uBAAyBf,EAAO,IAE5CgB,EAAe9U,EAAKvQ,QAAQmlB,GAC5BG,EAAe/U,EAAKgV,YAAYH,GAEhClqB,EAAcqV,EAAK9N,UAAU4iB,EAAcC,GAEjD,SAAIpqB,EAAY4V,MAAM,YAAc5V,EAAY4V,MAAM,WAAa5V,EAAY4V,MAAM,WAAc9Y,OAAOiP,QAAQkV,eAAe,mBAAqBnkB,OAAOiP,QAAQue,eAAerJ,eAAe2I,IAAW9sB,OAAOiP,QAAQue,eAAeV,GAAQ3I,eAAekI,IAASrsB,OAAOiP,QAAQue,eAAeV,GAAQT,GAAMlI,eAAe,SAAWnkB,OAAOiP,QAAQue,eAAeV,GAAQT,GAAM,QAAQjsB,OAAS,GAM/Y,SAASwsB,GAAkB1B,GAC3B,OAAO,IAAI/V,SAAQ,SAAUC,EAASqY,GAEb,qBAAZvC,EAAEwC,OAAyBxC,EAAEwC,MAAMvJ,eAAe,SAAW+G,EAAEwC,MAAM7uB,KAAKslB,eAAe,WAAa+G,EAAEwC,MAAM7uB,KAAK8uB,OAAOvtB,QAAU,EAC7IwtB,GAAiB,YAAa1C,EAAEwC,MAAM7uB,KAAK8uB,OAAO,GAAG9uB,KAAMqsB,EAAEwC,MAAM7uB,KAAK8uB,OAAO,GAAG9uB,KAAM,GAAIqsB,EAAEwC,MAAM7uB,KAAK8uB,OAAO,GAAGlK,KAAMyH,EAAEwC,MAAM7uB,KAAK8uB,OAAO,GAAGE,WAAW/rB,MAAOopB,EAAEwC,MAAM7uB,KAAK8uB,OAAO,GAAGE,WAAWC,SAAU5C,EAAEwC,MAAM7uB,KAAK8uB,OAAO,GAAGI,UAAW7C,EAAEwC,MAAM7uB,KAAK8uB,OAAO,GAAGlvB,KAAMysB,EAAEwC,MAAM7uB,KAAK8uB,OAAO,GAAGlvB,KAAMysB,EAAEwC,MAAM7uB,KAAK8uB,OAAO,GAAGE,WAAW/rB,OAAOlC,MAAK,WAEtVG,SAASwR,eAAe,SAASyc,QAAQjuB,SAASwR,eAAe,iBAEhE0c,OAAM,SAAUC,GACfpuB,QAAQqO,IAAI,gBAGZggB,GAAuB,gBAAgBvuB,MAAK,WAC1CG,SAASwR,eAAe,SAASyc,QAAQjuB,SAASwR,eAAe,iBACjExR,SAASwR,eAAe,gBAAgB6c,UAAYruB,SAASwR,eAAe,gBAAgB6c,UAAY,sCACxGtuB,QAAQqO,IAAI,qCAAuC+f,UASzDC,GAAuB,gBAAgBvuB,MAAK,WAC1CG,SAASwR,eAAe,SAASyc,QAAQjuB,SAASwR,eAAe,iBACjExR,SAASwR,eAAe,gBAAgB6c,UAAYruB,SAASwR,eAAe,gBAAgB6c,UAAY,yCAG1GtuB,QAAQqO,IAAI,iBAKS,qBAAZ+c,EAAEmD,OAAyBnD,EAAEmD,MAAMlK,eAAe,SAAW+G,EAAEmD,MAAMxvB,KAAKslB,eAAe,WAAa+G,EAAEmD,MAAMxvB,KAAK8uB,OAAOvtB,QAAU,EAC7IwtB,GAAiB,YAAa1C,EAAEmD,MAAMxvB,KAAK8uB,OAAO,GAAG9uB,KAAMqsB,EAAEmD,MAAMxvB,KAAK8uB,OAAO,GAAG9uB,KAAM,GAAIqsB,EAAEmD,MAAMxvB,KAAK8uB,OAAO,GAAGlK,KAAMyH,EAAEmD,MAAMxvB,KAAK8uB,OAAO,GAAGE,WAAW/rB,MAAOopB,EAAEmD,MAAMxvB,KAAK8uB,OAAO,GAAGE,WAAWC,SAAU5C,EAAEmD,MAAMxvB,KAAK8uB,OAAO,GAAGI,UAAW7C,EAAEmD,MAAMxvB,KAAK8uB,OAAO,GAAGlvB,KAAMysB,EAAEmD,MAAMxvB,KAAK8uB,OAAO,GAAGlvB,KAAMysB,EAAEmD,MAAMxvB,KAAK8uB,OAAO,GAAGE,WAAW/rB,OAAOlC,MAAK,WACtVG,SAASwR,eAAe,SAASyc,QAAQjuB,SAASwR,eAAe,iBAEhE0c,OAAM,SAAUC,GAGfC,GAAuB,gBAAgBvuB,MAAK,WAC1CG,SAASwR,eAAe,SAASyc,QAAQjuB,SAASwR,eAAe,iBACjExR,SAASwR,eAAe,gBAAgB6c,UAAYruB,SAASwR,eAAe,gBAAgB6c,UAAY,sCACxGtuB,QAAQqO,IAAI,qCAAuC+f,SASzDC,GAAuB,gBAAgBvuB,MAAK,WAC1CG,SAASwR,eAAe,SAASyc,QAAQjuB,SAASwR,eAAe,iBACjExR,SAASwR,eAAe,gBAAgB6c,UAAYruB,SAASwR,eAAe,gBAAgB6c,UAAY,yCAEvGH,OAAM,eAMiB,qBAAjB/C,EAAEoD,YAA8BpD,EAAEoD,WAAWnK,eAAe,SAAW+G,EAAEoD,WAAWzvB,KAAKslB,eAAe,WAAa+G,EAAEoD,WAAWzvB,KAAK8uB,OAAOvtB,QAAU,EACjKwtB,GAAiB,iBAAkB1C,EAAEoD,WAAWzvB,KAAK8uB,OAAO,GAAG9uB,KAAMqsB,EAAEoD,WAAWzvB,KAAK8uB,OAAO,GAAG9uB,KAAM,GAAIqsB,EAAEoD,WAAWzvB,KAAK8uB,OAAO,GAAGlK,KAAMyH,EAAEoD,WAAWzvB,KAAK8uB,OAAO,GAAGE,WAAW/rB,MAAOopB,EAAEoD,WAAWzvB,KAAK8uB,OAAO,GAAGE,WAAWC,SAAU5C,EAAEoD,WAAWzvB,KAAK8uB,OAAO,GAAGI,UAAW7C,EAAEoD,WAAWzvB,KAAK8uB,OAAO,GAAGlvB,KAAMysB,EAAEoD,WAAWzvB,KAAK8uB,OAAO,GAAGlvB,KAAMysB,EAAEoD,WAAWzvB,KAAK8uB,OAAO,GAAGE,WAAW/rB,OAAOlC,MAAK,WACxYG,SAASwR,eAAe,cAAcyc,QAAQjuB,SAASwR,eAAe,sBAErE0c,OAAM,SAAUC,GAGfC,GAAuB,qBAAqBvuB,MAAK,WAC/CG,SAASwR,eAAe,cAAcyc,QAAQjuB,SAASwR,eAAe,sBACtExR,SAASwR,eAAe,qBAAqB6c,UAAYruB,SAASwR,eAAe,qBAAqB6c,UAAY,sCAElHtuB,QAAQqO,IAAI,qCAAuC+f,SASzDC,GAAuB,qBAAqBvuB,MAAK,WAC/CG,SAASwR,eAAe,cAAcyc,QAAQjuB,SAASwR,eAAe,sBACtExR,SAASwR,eAAe,qBAAqB6c,UAAYruB,SAASwR,eAAe,qBAAqB6c,UAAY,yCAKtHhZ,OAIF,SAASyX,KACT,IAAM0B,EAAgBxuB,SAASyuB,uBAAuB,yBAKtD,IAAK,IAAM/gB,KAAO8gB,EAChB,GAAIA,EAAcpK,eAAe1W,GAAM,CAMrC,IAAMghB,EAAWF,EAAc9gB,GAAKihB,qBAAqB,QAIzD,IAAK,IAAMC,KAAWF,EACpB,GAAIA,EAAStK,eAAewK,GAAU,CAKpC,IAAMC,EAAWH,EAASE,GAASE,aAAa,QAEhDJ,EAASE,GAASG,gBAAgB,QAClCL,EAASE,GAASI,aAAa,QAAS,QAAUH,KAO1D,SAAShB,GAAkBoB,EAAOC,EAAqBC,EAAqBC,EAAUC,EAAeC,EAAgBC,EAAiBC,EAAiBC,EAAYC,EAAYC,GAC3K,OAAO,IAAIva,SAAQ,SAAUC,EAASqY,GAO9BU,GAAuBa,GAAOpvB,MAAK,WAEvC,IACEksB,GAAW6D,MAAMX,EAAO,CACRW,MAAO,CACH7Z,KAAM,MACtB0G,OAAQ,GAEI0E,MAAO,CACH1c,KAAM2qB,GAKVS,YAAa,CACTC,IAAK,CACDC,QAAQ,EACRC,OAAQ,CAAC,MAAO,SAGxBC,QAAS,CACLC,YAAa,KAEjBtC,OAAQ,CAAC,CACLlvB,KAAM+wB,EACN3wB,KAAMowB,EACNxL,KAAM2L,EACNvB,WAAY,CAC1BqC,SAAS,EACSC,UAAW,WACP,OAAOjyB,KAAKoB,EAAI,EAAIpB,KAAKkyB,MAAM3xB,KAAO,MAE1CqD,MAAOutB,EACPvB,SAAUwB,IAEf,CACC7wB,KAAMgxB,EACN5wB,KAAMqwB,EAENnB,UAAWwB,EACX1B,WAAY,CAC1BqC,SAAS,EACSC,UAAW,WAEP,OAAOjyB,KAAKoB,EAAI,EAAI,MAAQpB,KAAKkyB,MAAM3xB,KAAO,SAC1CP,KAAKoB,EAAI,IAAM,MAEzCwC,MAAO4tB,GAEO1uB,GAAI,aAERqvB,WAAY,CACRC,MAAO,CAAC,CACJC,UAAW,CACPC,SAAU,KAEdC,aAAc,CACV9C,OAAQ,CAAC,GACN,CACC3sB,GAAI,WACJ6sB,WAAY,CACRqC,SAAS,WAO7C9a,IAEA,MAAO8Y,GACPpuB,QAAQqO,IAAI,oBACZrO,QAAQqO,IAAI+f,GACZ9Y,IACAtV,QAAQqO,IAAI,8CAWpB,SAASggB,GAAwBa,GAC/B,OAAO,IAAI7Z,SAAQ,SAAUC,EAASqY,GAChC1tB,SAASwR,eAAeyd,IAC1BjvB,SAASwR,eAAeyd,GAAO/O,SAGjC,IAAMyQ,EAAS3wB,SAAS4wB,cAAc,OACtC5wB,SAASwR,eAAe,kBAAkBnN,OAAOssB,GACjDA,EAAO1vB,GAAKguB,EACZ0B,EAAOhsB,MAAQ,wEAGf0Q,OCvVN,IAAIwb,GAAkB,EAClBpvB,GAAQ,EAEL,SAASqvB,GAAiBhyB,GAC3BkB,SAASkR,cAAc,2BACzBlR,SAASkR,cAAc,0BAA0BgP,SAMnDqE,GAAqC,gBACrCzlB,EAAKyO,SAAQ,SAAUG,GACrB,IAAIqjB,EAAgB5xB,KAAGgJ,OAAO,IAAMuF,EAAI,GAAGma,QAAQ,MAAO,QACtDmJ,EAAKD,EAAc5oB,OAAO,iBAAiBhE,UAAU,OACzD,IAAK,IAAI8sB,KAAUvjB,EAAI,GACL,kBAAVA,EAAI,IAA6BA,EAAI,GAAGujB,GAAQ7M,eAAe,YAA0C,IAA1B1W,EAAI,GAAGujB,GAAQrH,SAAmBlc,EAAI,GAAGujB,GAAQrH,SAAWlb,OAAMmC,MAAM6P,UAAU,GAAGmJ,cACxKmH,EAAGlyB,KAAK,CAAC4O,EAAI,GAAGujB,KACf7sB,QACAC,OAAO,OACPH,KAAK,QAAS,SACdA,KAAK,MAAM,SAASoa,GACnB,MAAO,SAAWA,EAAEyL,YAErBmH,MACC,SAAU5S,GACR,GAAc,IAAVA,EAAE6S,KAAY,CAChB,GAAgB,WAAZ7S,EAAEuM,QAAmC,kBAAZvM,EAAEuM,QAA0C,QAAZvM,EAAEuM,QAAgC,SAAZvM,EAAEuM,QAAiC,UAAZvM,EAAEuM,QAAkC,UAAZvM,EAAEuM,OAC9H,IAAI3F,EAAS,wBAEfA,EAAS5G,EAAEuM,OAEf,MAAO,mCACDvM,EAAEyL,SACF,uCACAzL,EAAE6S,KAAKtJ,QAAQ,KAAM,KACrB,wEACA3C,EAAO2C,QAAQ,QAAS,IACxB,0CAA8CvJ,EAAE8S,YAAc,UAOpE,OAJElM,EADc,WAAZ5G,EAAEuM,QAAmC,kBAAZvM,EAAEuM,QAA0C,QAAZvM,EAAEuM,QAAgC,SAAZvM,EAAEuM,QAAiC,UAAZvM,EAAEuM,QAAkC,UAAZvM,EAAEuM,OACzH,mBAEAvM,EAAEuM,OAEN,mCACDvM,EAAEyL,SACF,yEACA7E,EAAO2C,QAAQ,QAAS,IACxB,yCAA6CvJ,EAAE8S,YAAc,aAIxEhS,KAAKrC,OAUP,SAASA,GAAWrX,EAAOzD,GAC9B,IAAIovB,EAAW3rB,EAAMkjB,OACrB,IAAK,IAAIyC,KAASgG,EAAU,CAC1B,IAAIvU,EAAW3d,KAAGgJ,OAAOhK,MACrBwf,EAAQX,GAAoBF,GAChCa,EACGzZ,KAAK,KAAM,UAAY2sB,GAAkB,IAAMxF,GAC/C7mB,GAAG,SAAS,WACX,GAAqC,UAAjCrF,KAAGgJ,OAAOhK,MAAM+F,KAAK,SAOvBwK,OAAMqR,OAAO,mBAAoB,CAACtS,IAAK,KAAM4d,MAAO,OACpDlsB,KAAGgJ,OAAO,cAAcK,QAAQ,UAAU,GAC1CxI,SAASkR,cAAc,kBAAkBogB,QACzCC,KACAC,KACAC,sBACK,CAMDzxB,SAASkR,cAAc,qBACzBlR,SAASkR,cAAc,oBAAoBgP,SAEzB,kBAAhBxa,EAAMmlB,SACR3b,QAAQwiB,cAAe,GAGzB,IAAI5K,EAAM3nB,KAAGgJ,OAAOhK,MAAM+F,KAAK,MAAM8D,MAAM,KAAK,GAChD0G,OAAMqR,OAAO,mBAAoB,CAACtS,IAAK/H,EAAO2lB,MAAOvE,IAErD3nB,KAAGgF,UAAU,2BAA2BD,KAAK,OAAQ,WACrD/E,KAAGgJ,OAAO,cAAcK,QAAQ,UAAU,GAC1CrJ,KAAGgJ,OAAOhK,MAAM+F,KAAK,QAAS,UAC9ButB,sBAGHjtB,GAAG,aAAa,WACfrF,KAAGgJ,OAAOhK,MAAMgG,UAAU,gBAAgBD,KACxC,QAAQ,WACN,OAAO/E,KAAGgJ,OAAOhK,MAAM+F,KAAK,eAGjCM,GAAG,YAAY,WACwB,WAAlCrF,KAAGgJ,OAAOhK,MAAM+F,KAAK,UACvB/E,KAAGgJ,OAAOhK,MAAMgG,UAAU,gBACvBD,KAAK,OAAQ,cAInBG,OAAO,QACPH,KAAK,QAASzC,GAAQiN,OAAMmC,MAAM4L,OAAOE,MACzCzY,KAAK,SAAU,IACfA,KAAK,QAAS,MACdA,KAAK,OAAQ,QAEhB/E,KAAGgJ,OAAO,cAAgB0oB,GAAkB,IAAMxF,GAC/ChnB,OAAO,KACPH,KAAK,YAAa,aAAewK,OAAMmC,MAAM4L,OAAOE,KAAO,OAE3DtY,OAAO,QACPH,KAAK,QAASzC,IACdyC,KAAK,SAAU,GACfA,KAAK,YAAa,mBAClBA,KAAK,QAAS,aAEfytB,GAAkBjsB,EAAO2rB,EAAUhG,GAEvCwF,KAGG,SAASc,GAAmBjsB,EAAO2rB,EAAUhG,GAClD,IAAK,IAAIT,KAAWyG,EAAShG,GAAQ,CACnC,IAAIuG,EAAeljB,OAAMmC,MAAMghB,UAAY,EAC3CnjB,OAAMqR,OAAO,eAAgB6R,GAC7BzyB,KACGgJ,OAAO,WAAa0oB,GAAkB,IAAMxF,EAAQ,MACpDhnB,OAAO,QACPH,KAAK,SAAS,WACb,OAAwBmtB,EAAShG,GAAOT,GAASlH,KAAO,GAAKxU,QAAQ+P,IAAO,GAAqBoS,EAAShG,GAAOT,GAASlH,KAAO,GAAKxU,QAAQ+P,IAAO,KAEtJ/a,KAAK,SAAU,IACfA,KAAK,KAAM,WAAa2sB,GAAkB,IAAMxF,EAAQ,IAAMT,GAC9D1mB,KAAK,YAAa,aAA+BmtB,EAAShG,GAAOT,GAASxoB,OAAS8M,QAAQ+P,IAAM,OAAW,OAC5G/a,KAAK,QAASmtB,EAAShG,GAAOT,GAAS7oB,OAAOmC,KAAK,OAAQ,WAC3DA,KAAK,gBAAgB,WAAc,MAAuB,gBAAfwB,EAAM2jB,MAA2B,GAAM,KAClFnlB,KAAK,QAAS,WACdM,GAAG,aAAa,WACfrF,KAAGgJ,OAAOhK,MAAM+F,KAAK,eAAgB,OAAOA,KAAK,SAAU,SAC3DstB,GAAgBH,EAASlzB,KAAK8C,GAAG+G,MAAM,KAAK,IAAI7J,KAAK8C,GAAG+G,MAAM,KAAK,IAAK7J,SAEzEqG,GAAG,YAAY,WACdrF,KAAGgJ,OAAOhK,MAAM+F,KAAK,eAAgB,OACrCstB,SAKD,SAASxU,GAAqBF,GACnC,IAAIgV,EAAe9xB,SAASwR,eAAe,oBAAoBgL,YAAc9N,OAAMmC,MAAM4L,OAAOC,MAAQhO,OAAMmC,MAAM4L,OAAOE,KAC3Hlb,GAAQzB,SAASwR,eAAe,oBAAoBgL,YAAc9N,OAAMmC,MAAM4L,OAAOC,MACrF,IAAInb,EAAS,GAAKmN,OAAMmC,MAAM4L,OAAOG,IAAMlO,OAAMmC,MAAM4L,OAAOI,OAAS,GACnEc,EAAQb,EAASzY,OAAO,OAAOH,KAAK,QAASzC,IAC9CyC,KAAK,SAAU3C,GACf2C,KAAK,UAAW,OAAS4tB,EAAe,IAAMvwB,GAC9C2C,KAAK,sBAAuB,QAC/B,OAAOyZ,EC7JM,ICHXoU,GCEAC,GACA,GFAW,IACbtzB,KAAMA,OACNC,WAAYA,CACVszB,mBAAJA,GACIC,SAAJA,IAEEpzB,KANF,WAOI,MAAO,CACLuc,GAAIA,EAAQA,QACZI,GAAIA,EAAQA,UAGhB9K,SAAUA,kBACZG,gBACA,eACA,iBACA,gBAGE5Q,QAASA,CACPkR,UAAWA,WAEoB,KAAzBnR,OAAOoR,SAASX,MAClBhC,OAAMA,OAAOA,UAAWA,YAEtBzO,OAAOoR,SAASX,KAAKY,SAAS,MAChC5C,OAAMA,OAAOA,UAAWA,OAAOA,SAASA,OAG5C0M,eAAgBA,WAId,GAHAjd,KAAKiT,YAELmT,GAAkCA,KAAKA,OAAOA,MAAMA,QAAQA,UAAUA,KACjEvkB,SAASkR,cAAc,oBAAqB,CAE/C,IADA,IAAIqP,EAAcpiB,KAAKmoB,WAAWlgB,SACzBnE,EAAI,EAAGA,EAAIse,EAAYlgB,OAAQ4B,IACtCsiB,GAAqCA,EAAYA,IAEnDA,GAAmCA,KAAKA,WAAWA,UAErD,IAAItE,EAAgB9hB,KAAKmoB,WAAW6L,aAAaC,eAC7C/rB,EAAUlI,KAAKmoB,WAAWlgB,SAAS6Z,GACvCsE,GAAqCA,EAASA,IAEhD/I,eAAgBA,WACdrd,KAAKiT,YACLmT,GAAkCA,KAAKA,OAAOA,MAAMA,QAAQA,UAAUA,IACtE8N,GAA8BA,OAAMA,MAAMA,cAE5CC,UAAWA,SAAfA,KACMtyB,SAASA,cAAcA,IAAMA,GAAOA,MAAMA,QAAUA,QACpDA,SAASA,iBAAiBA,QAAQA,UAAYA,eAC9CA,SAASA,cAAcA,IAAMA,GAAOA,UAAYA,cAElDuyB,YAAaA,WACX,IAAIvhB,EAAQ7S,KACZ,GAAI,EAAS,CACX,IAAR,kCACQq0B,EAAeA,wBAEjBxhB,EAAMA,UAAUA,MAAOA,cACvBG,eAAiBA,eAAgBA,YACwB,IAArDnR,SAASyuB,uBAAuB,UAAUpuB,QAC5C8Q,eAEFnR,SAASA,cAAcA,cAAcA,WAAaA,UAElDA,SAASA,cAAcA,cAAcA,iBAAiBA,SAASA,WAE7DmR,sBAGJshB,aAAcA,WACZ,IAAIzhB,EAAQ7S,KACZ,GAAI,EAAS,CACX,IAAR,kCACQq0B,EAAeA,wBAEjBrhB,eAAiBA,MAAOA,cACxBH,EAAMA,UAAUA,eAAgBA,YACyB,IAArDhR,SAASyuB,uBAAuB,UAAUpuB,QAC5C8Q,eAEFnR,SAASA,cAAcA,cAAcA,WAAaA,UAClDA,SAASA,cAAcA,cAAcA,iBAAiBA,SAASA,WAC7DA,SAASA,cAAcA,WAAWA,QAElCmR,uBAIN1R,QA3FF,WA4FI,IAAIuR,EAAQ7S,KACZ8B,OAAOA,iBAAiBA,cAAcA,WAChCA,OAAOoR,SAASX,KAAKY,SAAS,eAChCN,EAAMA,cAEJ/Q,OAAOoR,SAASX,KAAKY,SAAS,aAChCN,EAAMA,oBG1H+U,MCQzV,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCnBX,GAAS,WAAa,IAAI9S,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAC+Q,YAAY,MAAM7Q,MAAM,CAAC,GAAK,QAAQ,CAACF,EAAG,aAAa,CAACE,MAAM,CAAC,YAAcN,EAAIw0B,eAAgBx0B,EAAc,WAAEI,EAAG,aAAaJ,EAAIiS,MAAM,IACjP,GAAkB,GCDlB,GAAS,WAAa,IAAIjS,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,iBAClH,GAAkB,GCQP,IACbE,KAAMA,aACN8jB,MAAOA,CAACA,eACR1jB,KAHF,WAII,MAAO,CACLshB,UAAWA,EACXhgB,MAAOA,KACPuyB,eAAgBA,EAChBC,aAAcA,OAGlBjiB,SAAUA,gBACRya,iBADJ,WAEM,OAAO1c,EAAA,KAAMmC,MAAMgiB,gBAEzB/hB,gBACA,qBACA,mBACA,gBACA,aACA,gBAGEC,MAAOA,CACLqa,iBADJ,WAEM,IAAIpa,EAAQ7S,KACuB,OAA/B6S,EAAMoa,iBAAiB3d,IAEzBzN,SAASA,iBAAiBA,0BAA0BA,SAAQA,SAAUA,GAA9EuR,cAEYvR,SAASkR,cAAc,2BACzBlR,SAASA,iBAAiBA,0BAA0BA,SAAQA,SAAUA,GAAhFuR,cACUP,EAAMA,QAAQA,EAAMA,mBAEpBA,EAAMA,QAAQA,EAAMA,oBAK5B9Q,QAASA,CACP4yB,QADJ,SACAh0B,GACM,IAAIkS,EAAQ7S,KACRqC,EAAM,KACVrC,KAAK40B,YACLj0B,EAAKA,IAAIA,OAAOA,GAAGA,SAAQA,SAAUA,EAAGA,GAEtCwf,EAAEA,OAASA,EAAEA,MACbA,EAAEA,KAAOA,EAAEA,IACXtN,EAAMA,aAAaA,EAAGA,OAEnB7S,KAAK+sB,OAAOjV,QAAQ+c,qBAAuB70B,KAAK+uB,qBACnDlc,EAAMA,UAAUA,GAChBjR,QAAQA,IAAIA,oBAAsBA,EAAMA,cAAgBA,IAAMA,EAAMA,YACpEA,QAAQA,IAAIA,KAGhBkzB,UAjBJ,SAiBAn0B,GACM,IAAIkS,EAAQ7S,KAER+0B,EAAU/O,OAAOgP,KAAKniB,EAAMkc,oBAAoBkG,MAAK,SAAUrf,EAAGiD,GACpE,OAAOhG,EAAMkc,mBAAmBnZ,GAAGsf,MAAQriB,EAAMkc,mBAAmBlW,GAAGqc,SAErEC,EAAMJ,EAAQ,GACdjyB,EAAK,yBAA2BqyB,EAAM,KACtC5f,EAAO1T,SAASkR,cAAcjQ,GAClCnC,EAAKA,IAAIA,OAAOA,GAAGA,SAAQA,SAAUA,GACnC,GAAIkS,EAAMkc,mBAAmB3b,EAAGnP,OAAQ,CACtC,IAAI4qB,EAAYhc,EAAMkc,mBAAmB3b,EAAGnP,OAC5CsM,OAAMA,OAAOA,gBAAiBA,EAAGA,OACjCA,OAAMA,OAAOA,eAAgBA,GAC7BA,OAAMA,OAAOA,gBAAiBA,GAC9BA,OAAMA,OAAOA,uBAAuBA,GACpCA,OAAMA,OAAOA,aAAcA,EAAGA,OAClB,MAARgF,GACFhF,OAAMA,OAAOA,sBAAuBA,EAAKA,8BAKjDqkB,UAxCJ,WAyCM50B,KAAKiiB,UAAYjiB,KAAKmoB,WAAW5F,UAAU,GAAGrgB,OAC9ClC,KAAKiC,MAAQjB,GAAA,SAASgG,SAASC,OAAO,CAAC,EAAGjH,KAAKiiB,YAAYnb,MAAM,CAAC,EAAGhF,OAAO0H,aAC5ExJ,KAAKw0B,eAAiB,KAA5B,sCAEIhU,aA7CJ,SA6CApN,GAKM,IAJA,IAAIP,EAAQ7S,KACR6uB,EAAY,GACZ5kB,EAAY,GACZmrB,EAAiB,GACZta,EAAI1H,EAAGnP,MAAO6W,GAAK1H,EAAGrK,IAAK+R,IAAK,CACvC,IAAIvF,EAAO,iBAAmBuF,EAAI,KAC9Bua,EAAOxzB,SAASkR,cAAcwC,GAC9B+f,EAAOzzB,SAASkR,cAAcwC,EAAO,UAQzC,GAPI8f,EAAKvyB,GAAGqQ,SAAS,SACnBlJ,EAAYA,GACZmrB,EAAiBA,KAEjBnrB,EAAYA,GACZmrB,EAAiBA,SAASA,cAAcA,EAAOA,UAAUA,wBAAwBA,QAEtE,cAATC,GAAiC,cAATC,GAAgC,MAARD,GAAwB,MAARC,EAApE,CAGE,IAAIC,EAASv0B,GAAA,UAAU,2BACvBu0B,EACVrvB,OAAA,KACAH,KAAA,0EACAG,OAAA,QACAH,KAAA,QAAA8M,kBACA9M,KAAA,SAAAqvB,GACArvB,KAAA,wBACY,IAAZ,oEACY,OAAZ,OACA,0DACA,OACA,0DACA,OACA,0DAEA,gEAGAA,KAAA,OAAAqN,SACA/M,GAAA,yBACYwM,EAAZA,8CACY7R,mBACZ+E,KAAA,kBACAA,KAAA,kBACA,sBACcwK,uDAEAA,uCAEd,iBACA,+BACgBse,EAAhBA,8BAEgBte,gCACAA,iCACAA,qCAChB,iBACgBse,EAAhBA,iBACgBA,GAAhBA,oEACgBte,gCACAA,+BACAA,yCAEAA,mGAGFA,kGACAA,gCAEFA,wCACAA,oEACAA,qEAEZlK,GAAA,uBACYrF,mBACZ+E,KAAA,SAAA8M,gBACA9M,KAAA,0BCzKmW,MCQ/V,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,OAIa,M,QCnBX,GAAS,WAAa,IAAIhG,EAAIC,KAASC,EAAGF,EAAIG,eAAsBH,EAAIK,MAAMD,GAAO,OAAOJ,EAAIwU,GAAG,IACnG,GAAkB,CAAC,WAAa,IAAIxU,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAC+Q,YAAY,YAAY,CAAC/Q,EAAG,MAAM,CAAC+Q,YAAY,sBCMpJ,IACb3Q,KAAMA,aCR0V,MCQ9V,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QZDX,GAAI,GACJi1B,GAAgB,IAChBC,GAAY,CAAC,GAAI,IAEN,IACbl1B,KAAMA,cACNC,WAAYA,CACVk1B,WAAJA,GACIC,UAAJA,IAEEh1B,KANF,WAOI,MAAO,CACLshB,UAAWA,EACXhgB,MAAOA,KACPuyB,eAAgBA,EAChBC,aAAcA,KACdmB,aAAcA,KACdC,YAAaA,GACbC,QAASA,CAACA,GACVC,gBAAiBA,KACjBxB,aAAaA,EACbzP,YAAYA,EACZoD,UAAWA,CACT/T,UAAWA,MAEb6hB,QAASA,OAGbxjB,SAAUA,gBACRya,iBADJ,WAEM,OAAO1c,EAAA,KAAMmC,MAAMgiB,eAErBuB,mBAJJ,WAKM,OAAO1lB,EAAA,KAAMmC,MAAMujB,oBAErB7nB,SAPJ,WAQM,OAAOmC,EAAA,KAAMmC,MAAMwV,WAErBR,OAVJ,WAWM,OAAOnX,EAAA,KAAMmC,MAAMgb,SAEzB/a,gBACA,UACA,eACA,gBACA,kBACA,mBACA,kBAGEC,MAAOA,CACLqa,iBADJ,SACA1S,GACM,IAAI1H,EAAQ7S,KACS,OAAjBua,EAASjL,KACXuD,EAAMA,aAAcA,EACpBA,EAAMA,gBAAgBA,OAAOA,QAAQA,gBAEhChR,SAASkR,cAAc,wBAG1BF,EAAMA,iBAAiBA,OAAOA,QAAQA,eACtCA,EAAMA,aAAcA,GAHpBA,EAAMA,YAOZojB,mBAfJ,WAiBM,IAAIpjB,EAAQ7S,KACR6B,SAASkR,cAAc,wBACzBF,EAAMA,gBAAgBA,OAAOA,QAAQA,cAArCA,IAGJzE,SAtBJ,SAsBA0E,EAAA+U,GAEM,IAAIhV,EAAQ7S,KACZ,GAAI6nB,EAAO1T,YAAcrB,EAAOqB,WAAkC,OAArB0T,EAAO1T,UAAoB,CACtEtS,SAASA,cAAcA,uBAAuBA,SAC9CgR,EAAMA,KAAKA,EAAOA,WAClB,IAAItF,EAAc,CAChBC,SAAUA,CAACA,EAAOA,WAClB0oB,UAAWA,EAAOA,IAClBC,YAAaA,EAAOA,OAElB50B,EAAM,GAAlB,2CACQC,IAAMA,CACJC,OAAQA,MACRF,IAAKA,EACLmM,OAAQA,IAClBhM,MAAA,YACU,IAAV,SACU6O,OAAMA,OAAOA,wBAAyBA,EAAQA,0BAIpDmX,OAAQA,SAAZA,GAEM,IAAI7U,EAAQ7S,KACZ,IAAK8S,EAAQ,CACX,IAAR,mCACQsjB,EAAgBA,iBAAiBA,cAAcA,WAC7CvjB,EAAMA,iBAKdvR,QArGF,WAuGItB,KAAKq2B,KAAKr2B,KAAKytB,OAAO/f,OAAO4oB,mBAE/Bv0B,QAASA,CACPw0B,SADJ,WAGM,IAAI1jB,EAAQ7S,KAEP6B,SAASkR,cAAc,yBAC1BF,EAAMA,QAAQA,EAAMA,iBACpBhR,SAASA,cAAcA,QAAQA,YAAYA,EAAMA,SAEd,OAA/BgR,EAAMoa,iBAAiB3d,KACzBuD,EAAMA,iBAAiBA,OAAOA,QAAQA,eACtCA,EAAMA,aAAcA,GAEpBA,EAAMA,gBAAgBA,OAAOA,QAAQA,eAEvCA,EAAMA,YAAaA,EACnBtC,OAAMA,OAAOA,kBAAkBA,KAGnC8lB,KAnBJ,SAmBAliB,GACM,IAAItB,EAAQ7S,KACRuB,EAAM,GAAhB,yCACUgM,EAAc,CAChBC,SAAUA,CAACA,IAEbhM,IAAMA,CACJC,OAAQA,MACRF,IAAKA,EACLmM,OAAQA,IAChBhM,MAAA,YACQE,QAAQA,IAAIA,EAASA,MACrBiR,EAAMA,gBAAkBA,EAASA,SAGrC8hB,QAlCJ,SAkCAh0B,GACM,IAAIkS,EAAQ7S,KACZ4zB,GAAUA,EAAMA,YAChBA,GAAQA,OAAOA,QACrB7tB,KAAA,kBACM/F,KAAKw2B,SAAS5C,IACd5zB,KAAK40B,UAAUj0B,GACfX,KAAKy2B,gBAAgB91B,GACrBA,EAAKA,oBAAoBA,SAAQA,SAAUA,GAEzCwf,EAAEA,OAASA,EAAEA,MACbA,EAAEA,KAAOA,EAAEA,IACXtN,EAAMA,aAAaA,EAAGA,OAG1B+hB,UAjDJ,SAiDAj0B,GACMX,KAAKiiB,UAAYthB,EAAKshB,UACtBjiB,KAAKiC,MAAQjB,GAAA,SAASgG,SAASC,OAAO,CAAC,EAAGjH,KAAKiiB,YAAYnb,MAAM,CAAC,EAAGhF,OAAO0H,aAC5ExJ,KAAKw0B,eAAiB,KAA5B,+BACM,IAAIkC,EAAY/zB,KAAKkG,IAA3B,0CAEQ7I,KAAK41B,aADHc,GAAalB,GACKx0B,GAAA,SAASgG,SAASC,OAAO,CAACtE,KAAKsN,IAAI,GAAItN,KAAKsN,IAAIulB,MAAiB1uB,MAAM2uB,IAEvEz0B,GAAA,SAASgG,SAASC,OAAO,CAACtE,KAAKsN,IAAI,GAAItN,KAAKsN,IAAItN,KAAKkG,IAA7C,wDAGhC2tB,SA5DJ,SA4DAn0B,GACMA,EACN6D,OAAA,QACAM,MAAA,oBACAT,KAAA,QACAA,KAAA,SACAA,KAAA,KAAAjE,mBACAiE,KAAA,UAEI4wB,UArEJ,WAsEM32B,KAAKg2B,QAAUn0B,SAAS+0B,yBACxB,IAAIv0B,EAAMrB,GAAA,UAEhB,cACAkF,OAAA,OACAH,KAAA,oBACAA,KAAA,SAAAmgB,IACAngB,KAAA,gBACAA,KAAA,6CACAA,KAAA,8BAGU8a,EAAOxe,EAAI6D,OAAO,KACtB,OAAO2a,GAETL,aArFJ,SAqFApN,EAAAzS,GACM,IAAI0B,EAAMuxB,GAENiD,EAAQ,GACRC,EAAS,GACTjkB,EAAQ7S,KACZ,GAAgB,UAAZoT,EAAG4f,KACL,IAAI5vB,EAAS,GAET6G,EAAY,GACZN,EAAY,YACxB,iBACQvG,EAASA,GAET6G,EAAYA,GACZN,EAAYA,SAEZvG,EAASA,GAET6G,EAAYA,GACZN,EAAYA,SAEd,IAAK,IAAImR,EAAI1H,EAAGnP,MAAO6W,GAAK1H,EAAGrK,IAAK+R,IAAK,CACvC,IAAIlX,EAAQ,aAAeiP,EAAM+iB,aAAajzB,KAAKsN,IAAItP,EAAKo2B,WAAWjc,EAAI,KAAO,KAClFzY,EACR6D,OAAA,KACAH,KAAA,oDACAG,OAAA,QACAH,KAAA,0EACAA,KAAA,oBACU,OAAV,oBACA,qBAEA,oBAGAA,KAAA,SAAA3C,GACA2C,KAAA,OAAAnC,GACAmC,KAAA,QAAA4D,GACA5D,KAAA,kBACAM,GAAA,yBACUwM,EAAVA,8CACU7R,mBACV+E,KAAA,kBACAA,KAAA,kBACU,IAAV,sCACUwK,0BACA,IAAV,kCACA,6BACA,uBAGU,GADAumB,EAAVA,0EACA,0CAEY,IAAZ,yBACA,kCACA,uDACA,yCACA,2CACYE,EAAZA,wCACYH,EAAZA,qJAEYA,EAAZA,oEAEUtmB,iCACAA,gCACAA,oEACAA,qEAEVlK,GAAA,uBAEUrF,mBACV+E,KAAA,SAAA8M,gBACA9M,KAAA,uBAMIkxB,gBApKJ,SAoKAC,GACM,IAAIrkB,EAAQ7S,KACZgB,gBAAaA,mBAAmBA,GAAGA,KAAIA,SAAUA,EAAGA,GAClD,IAAIm2B,EAAUhX,EAAErd,GAAG+G,MAAM,KAAK,GAC1BsW,EAAErd,GAAGqQ,SAAS,YAChBgN,EAAEA,GAAKA,EAAEA,GAAGA,MAAMA,WAAWA,IAE/Bnf,aAAUA,GAClBgJ,OAAA,QACAjE,KAAA,yDAEM,IAAIqxB,EAAkB7mB,EAAA,KAAMuH,QAAQuf,sBAAsB,GACtDC,EAAWJ,EAAa/uB,UAAU,GAClCovB,EAASL,EAAa9uB,QAAQ8uB,EAAa/uB,UAAUjG,OAAS,GAC9DoB,GAASi0B,EAASD,GAAYzkB,EAAM2hB,eAAiB3hB,EAAM2hB,eAE3D3yB,SAASkR,cAAc,+BACzBlR,SAASA,cAAcA,8BAA8BA,SAEvDb,aAAUA,wCAChB+E,KAAA,QAAAzC,GACAyC,KAAA,aACAA,KAAA,uEACAA,KAAA,gBACAA,KAAA,oBACAA,KAAA,kBACAA,KAAA,QACAA,KAAA,QAEMqxB,EAAgBA,KAAIA,SAAUA,GAC5B,GAAIxrB,EAAM7C,IACR,IAAI9E,EAAQ2H,EAAM3H,MACd8E,EAAM6C,EAAM7C,IACZ6O,EAAOhM,EAAMgM,UAEjB3T,EAAQA,EAAMA,MAAMA,MAAMA,GAAGA,MAAMA,KAAKA,GAAGA,MAAMA,KAAKA,GACtD8E,EAAMA,EAAMA,MAAMA,MAAMA,GAAGA,MAAMA,KAAKA,GAAGA,MAAMA,KAAKA,GACpD6O,EAAOA,EAAMA,MAAMA,MAAMA,GAAGA,MAAMA,KAAKA,GAEzC,IAAK,IAAIjT,EAAIV,EAAOU,GAAKoE,EAAKpE,IAAK,CACjC,IAAI6yB,EAAS,iBAAmB7yB,EAAI,MAMpC,GAJA3D,aAAUA,EAASA,UAAUA,KAAKA,CAChC8D,KAAMA,EAAMA,kBAAkBA,KAG3BjD,SAASkR,cAAcykB,GAQ1B31B,SAASA,cAAcA,GAAQA,GAAKA,SAASA,cAAcA,GAAQA,GAAKA,cARrC,CACnC,IAAIuR,EAAK,CACTA,KAAUA,QACVA,EAAGA,MAAQA,EACXA,EAAGA,IAAMA,EACTP,EAAMA,aAAaA,EAAIA,EAAMA,iBAC7BhR,SAASA,cAAcA,GAAQA,GAAKA,SAASA,cAAcA,GAAQA,GAAKA,gBAOhF41B,iBA/NJ,SA+NAP,GACM,IAAIrkB,EAAQ7S,KAEZgB,gBAAaA,mBAAmBA,GAAGA,KAAIA,SAAUA,EAAGA,GAClD,IAAIm2B,EAAUhX,EAAErd,GAAG+G,MAAM,KAAK,GAC9B7I,aAAUA,GAClBgJ,OAAA,QACAjE,KAAA,yDAEM,IAAIqxB,EAAkB7mB,EAAA,KAAMuH,QAAQuf,sBAAsB,GACtDC,EAAWJ,EAAa/uB,UAAU,GAClCovB,EAASL,EAAa9uB,QAAQ8uB,EAAa/uB,UAAUjG,OAAS,GAC9DoB,GAASi0B,EAASD,GAAYzkB,EAAM2hB,eAAiB3hB,EAAM2hB,eAE3D3yB,SAASkR,cAAc,+BACzBlR,SAASA,cAAcA,8BAA8BA,SAEvDb,aAAUA,wCAChB+E,KAAA,QAAAzC,GACAyC,KAAA,aACAA,KAAA,uEACAA,KAAA,gBACAA,KAAA,oBACAA,KAAA,kBACAA,KAAA,QACAA,KAAA,QAEMqxB,EAAgBA,KAAIA,SAAUA,GAC5B,GAAIxrB,EAAM7C,IACR,IAAI9E,EAAQ2H,EAAM3H,MACd8E,EAAM6C,EAAM7C,SAEhB9E,EAAQA,EAAMA,MAAMA,MAAMA,GAAGA,MAAMA,KAAKA,GAAGA,MAAMA,KAAKA,GACtD8E,EAAMA,EAAMA,MAAMA,MAAMA,GAAGA,MAAMA,KAAKA,GAAGA,MAAMA,KAAKA,GAEtD,IAAK,IAAIpE,EAAIV,EAAOU,GAAKoE,EAAKpE,IAAK,CACjC,IAAI6yB,EAAS,iBAAmB7yB,EAAI,MAEpC3D,aAAUA,EAASA,UAAUA,KAAKA,CAChC8D,KAAMA,iBAKd4yB,kBA3QJ,SA2QA9f,GACM,MAAa,UAATA,EACK,UACf,WACe,UAEA,WAGX6e,gBApRJ,SAoRA91B,GACM,IAAIg3B,EAAM,GACN9kB,EAAQ7S,KACRqC,EAAMuxB,GAuCV,OAtCAjzB,EAAKA,WAAWA,SAAQA,SAAUA,EAAMA,GACtC,GAAa,IAATsX,EAAY,CACd,IAAI6C,EAAIlP,EAAQ,EAChBvJ,EACV6D,OAAA,KACAH,KAAA,6BACAG,OAAA,QACAH,KAAA,uEACAA,KAAA,oBACY,OAAZ,oBACA,qBAEA,oBAGAA,KAAA,aACAA,KAAA,kBACAA,KAAA,aACAA,KAAA,kBACAM,GAAA,yBACYwM,EAAZA,8CACY7R,mBACZ+E,KAAA,kBACAA,KAAA,kBACYwK,+FACAA,8CACAA,kGACAA,oEACAA,qEAEZlK,GAAA,uBACYkK,uCACAvP,mBACZ+E,KAAA,SAAA8M,gBACA9M,KAAA,yBAIa4xB,Ka7buV,MCQhW,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,qBCnBX,GAAS,WAAa,IAAI53B,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAQF,EAAIY,KAAU,MAAER,EAAG,MAAM,CAAC+Q,YAAY,4BAA4B7Q,MAAM,CAAC,GAAK,eAAe,CAACF,EAAG,IAAI,CAAC+Q,YAAY,QAAQ7Q,MAAM,CAAC,KAAO,KAAKgG,GAAG,CAAC,MAAQtG,EAAI63B,mBAAmBz3B,EAAG,MAAM,CAACA,EAAG,IAAI,CAAC+Q,YAAY,YAAY,CAACnR,EAAI6R,GAAG7R,EAAI8R,GAAG9R,EAAIY,KAAKqvB,UAAU7vB,EAAG,IAAI,CAAC+Q,YAAY,UAAU,CAACnR,EAAI6R,GAAG7R,EAAI8R,GAAG9R,EAAIY,KAAKk3B,UAAU,KAAM93B,EAAIY,KAAa,SAAER,EAAG,MAAMJ,EAAIiS,KAAKjS,EAAI6R,GAAG,KAAM7R,EAAIY,KAAa,SAAER,EAAG,MAAMJ,EAAIiS,KAAKjS,EAAI6R,GAAG,oGAAoGzR,EAAG,MAAM,CAACA,EAAG,YAAY,CAAC+Q,YAAY,uBAAuB7Q,MAAM,CAAC,KAAON,EAAI+3B,UAAU,CAAC/3B,EAAI6R,GAAG,QAAQzR,EAAG,YAAY,CAAC+Q,YAAY,uBAAuB7Q,MAAM,CAAC,KAAON,EAAIg4B,UAAU,OAAS,WAAW,CAACh4B,EAAI6R,GAAG,mBAAmB,OAAO7R,EAAIiS,MACn1B,GAAkB,GCgBP,IACbzR,KAAMA,SACNI,KAFF,WAGI,MAAO,CACLq3B,OAAQA,GACRhV,MAAOA,GACPiV,QAASA,mFACTC,KAAMA,EAAQA,UAGlB1lB,SAAUA,CACR7R,KADJ,WAEM,MAAO,CACLw3B,QAASA,OAAMA,MAAMA,QACrBnI,MAAOA,OAAMA,MAAMA,MACnB6H,SAAUA,OAAMA,MAAMA,WAG1BE,UARJ,WASM,MAAO,uHAAyHK,mBAAmBt2B,OAAOoR,SAASoY,MAAQ,KAAOtrB,KAAKW,KAAKqvB,MAAQ,QAEtMqI,QAXJ,WAYM,OAAOv2B,OAAOoR,SAASoY,MAEzBwM,QAdJ,WAeM,OAAOh2B,OAAOoR,SAASkO,SAI3Brf,QAASA,CACP61B,gBAAiBA,WACf91B,OAAOA,SAASA,SAAWA,aAAaA,QAAQA,eAAiBA,aAAaA,QAAQA,eAAiBA,aChDkP,MCQ3V,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCnBX,GAAS,WAAa,IAAI/B,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAC+Q,YAAY,gDAAgD7Q,MAAM,CAAC,GAAK,aAAa,CAACF,EAAG,IAAI,CAAC+Q,YAAY,QAAQ7Q,MAAM,CAAC,KAAO,KAAKgG,GAAG,CAAC,MAAQtG,EAAIu4B,aAAan4B,EAAG,MAAM,CAAC+Q,YAAY,OAAO7Q,MAAM,CAAC,GAAK,qBAAqBN,EAAI8Z,GAAI9Z,EAAU,QAAE,SAASw4B,GAAO,OAAOp4B,EAAG,UAAU,CAACoP,IAAIgpB,EAAMz1B,GAAGoT,IAAI,UAAUsiB,UAAS,EAAKtnB,YAAY,OAAO7Q,MAAM,CAAC,GAAKk4B,EAAMz1B,GAAG,WAAWy1B,EAAMz1B,IAAIuD,GAAG,CAAC,OAAS,SAASoL,GAAQ,OAAO1R,EAAI04B,OAAOhnB,IAAS,MAAQ,SAASA,GAAQ,OAAO1R,EAAI24B,SAASjnB,UAAc,GAAGtR,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,aAAa,CAACF,EAAG,IAAI,CAAC+Q,YAAY,YAAY,CAACnR,EAAI6R,GAAG7R,EAAI8R,GAAG9R,EAAIY,KAAKqiB,UAAU7iB,EAAG,IAAI,CAAC+Q,YAAY,SAAS,CAACnR,EAAI6R,GAAG,2CAA2CzR,EAAG,IAAI,CAAC+Q,YAAY,SAAS,CAACnR,EAAI6R,GAAG,4DAA8D7R,EAAIY,KAAKg4B,QAAwD54B,EAAIiS,KAAnD7R,EAAG,WAAW,CAACE,MAAM,CAAC,SAAWN,EAAI64B,UAAoB74B,EAAIY,KAAY,QAAER,EAAG,MAAM,CAACA,EAAG,UAAU,CAAC+V,IAAI,UAAU7V,MAAM,CAAC,GAAK,cAAc,WAAW,eAAegG,GAAG,CAAC,QAAU,SAASoL,GAAQ,OAAO1R,EAAI84B,QAAQpnB,IAAS,OAAS,SAASA,GAAQ,OAAO1R,EAAI04B,OAAOhnB,IAAS,MAAQ,SAASA,GAAQ,OAAO1R,EAAI24B,SAASjnB,QAAa,GAAG1R,EAAIiS,KAAK7R,EAAG,IAAI,CAACE,MAAM,CAAC,KAAO,IAAI,GAAK,QAAQgG,GAAG,CAAC,MAAQtG,EAAIu4B,YAAY,CAACv4B,EAAI6R,GAAG,cAAc,MAC3zC,GAAkB,GCDlB,GAAS,WAAa,IAAI7R,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,cAAcN,EAAI8Z,GAAI9Z,EAAY,UAAE,SAASw4B,GAAO,OAAOp4B,EAAG,OAAO,CAACoP,IAAIgpB,EAAMz1B,GAAGzC,MAAM,CAAC,GAAKk4B,EAAMz1B,IAAIuD,GAAG,CAAC,MAAQ,SAASoL,GAAQ,OAAO1R,EAAI+4B,KAAKP,EAAMz1B,OAAO,CAAC3C,EAAG,MAAM,CAAC+Q,YAAY,uBAAuB,CAAC/Q,EAAG,MAAM,CAACE,MAAM,CAAC,IAAM,8BAAgCk4B,EAAMz1B,GAAK,YAAY3C,EAAG,SAAS,CAAC+Q,YAAY,OAAO,CAACnR,EAAI6R,GAAG,SAASzR,EAAG,IAAI,CAACJ,EAAI6R,GAAG7R,EAAI8R,GAAG0mB,EAAMvV,eAAc,IAC7e,GAAkB,GCYP,IACbziB,KAAMA,WACN8jB,MAAOA,CAACA,YACRtiB,QAASA,CACP+2B,KAAMA,SAAVA,GACMj3B,SAASA,cAAcA,aAAaA,UAAYA,QAChDA,SAASA,eAAeA,GAAIA,WAAaA,QACzCA,SAASA,eAAeA,YAAYA,UAAUA,OAAOA,WACrDA,SAASA,eAAeA,YAAYA,UAAUA,OAAOA,UACrDA,SAASA,eAAeA,YAAYA,UAAUA,OAAOA,mBACrDA,SAASA,eAAeA,YAAYA,WAAaA,cACjD,IAAK,IAAIiC,EAAI,EAAGA,EAAI9D,KAAK6kB,QAAQkU,UAAU72B,OAAQ4B,IACjD,GAAI9D,KAAK6kB,QAAQkU,UAAUj1B,GAAGk1B,OAAOl2B,KAAOA,EAC1C,IAAI8I,EAAQ9H,EAGhB9D,KAAK6kB,QAAQkU,UAAUntB,GAAOqtB,OAAOC,eC7BsT,MCQ7V,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,OAIa,M,QtBMA,IACb34B,KAAMA,WACNC,WAAYA,CACV24B,SAAJA,IAEEx4B,KALF,WAMI,MAAO,CACLi4B,OAAQA,CACd,CAAQ91B,GAARA,cAAQkgB,MAARA,2BACA,CAAQlgB,GAARA,cAAQkgB,MAARA,iCAIExQ,SAAUA,CACR7R,KADJ,WAEM,MAAO,CACLqiB,MAAOA,OAAMA,MAAMA,UACnB2V,QAASA,OAAMA,MAAMA,WAI3B52B,QAASA,CACPu2B,UAAWA,WACT,IAAIzlB,EAAQ7S,KACZ,GAAI6B,SAASkR,cAAc,eAAgB,CACzC,IAAIqmB,EAAgBv3B,SAASkR,cAAc,eAAejQ,GAC1DjB,SAASA,eAAeA,YAAYA,UAAUA,OAAOA,QACrDA,SAASA,eAAeA,GAAeA,UAAUA,OAAOA,QACxDA,SAASA,eAAeA,YAAYA,WAAaA,mBACjDA,SAASA,eAAeA,YAAYA,WAAaA,WACjDA,SAASA,eAAeA,YAAYA,WAAaA,UACjDA,SAASA,eAAeA,YAAYA,UAAUA,OAAOA,cACrD,IAAIkW,EAAQ,CACZA,EAAUA,IACVA,EAAMA,EAAEA,GAAKA,EACblF,EAAMA,OAAOA,QAGbhR,SAASA,eAAeA,YAAYA,UAAUA,OAAOA,QACrDA,SAASA,eAAeA,YAAYA,WAAaA,QAEjDmR,qBACInR,SAASkR,cAAc,YAAYO,UAAUC,SAAS,WACxDV,EAAMA,aAAaA,SAASA,cAAcA,cAIhD2C,aAAcA,SAAlBA,GAC2B,eAAjBC,EAAG9L,UACL8L,EAAGA,UAAYA,MAEfA,EAAGA,UAAYA,cAGnB4jB,SAAUA,SAAdA,GACM,IAAK,IAAIv1B,EAAI,EAAGA,EAAI9D,KAAK4W,MAAM0iB,QAAQp3B,OAAQ4B,IAC7C,GAAI9D,KAAK4W,MAAM0iB,QAAQx1B,GAAGk1B,OAAOl2B,KAAO+wB,EACtC,OAAO/vB,GAIb+0B,QAASA,SAAbA,GAEM,GADAhF,GAAWA,EAAMA,EAAEA,GACf7zB,KAAK4W,MAAM0iB,QAAQp3B,OACrB0J,GAAQA,KAAKA,SAASA,IACtB5L,KAAK4W,MAAM0iB,QAAQ,IAAOL,OAAOC,gBACzC,CACQl5B,KAAK4W,MAAM0iB,QAAQL,OAAOC,YAC1B,IAAIK,EAAS13B,SAASkR,cAAc,gBAChCymB,EAAoBD,EAAOC,mBAAqBD,EAAOE,sBAAwBF,EAAOG,wBACtFF,GACFA,EAAkBA,KAAKA,EAAvBA,KAINf,OAAQA,SAAZA,GACM5E,GAAWA,EAAMA,EAAEA,GACfhyB,SAASkR,cAAc,iBACzB/S,KAAKs4B,aAEDt4B,KAAK4W,MAAM0iB,QAAQp3B,QACrB0J,GAAQA,KAAKA,SAASA,IACtB5L,KAAK4W,MAAM0iB,QAAQ,IAAOL,OAAOU,cAEjC35B,KAAK4W,MAAM0iB,QAAQL,OAAOU,cAExB93B,SAAS+3B,mBAAqB/3B,SAASg4B,yBAA2Bh4B,SAASi4B,uBAC7Ej4B,SAASA,mBAIf62B,SAAUA,SAAdA,GACM7E,GAAWA,EAAMA,EAAEA,GACf7zB,KAAK4W,MAAM0iB,QAAQp3B,QACrB0J,GAAQA,KAAKA,SAASA,IACtB5L,KAAK4W,MAAM0iB,QAAQ,IAAOL,OAAOc,aAEjC/5B,KAAK4W,MAAM0iB,QAAQL,OAAOc,YAExBl4B,SAASkR,cAAc,kBACzBlR,SAASA,cAAcA,qBAAqBA,QAE9CA,SAASA,iBACT7B,KAAKs4B,euBhIsV,MCQ7V,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,OAIa,M,QCnBX,GAAS,WAAa,IAAIv4B,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAQF,EAAU,OAAEI,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,iBAAiB,CAACF,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,gBAAgB,CAACF,EAAG,MAAM,CAACE,MAAM,CAAC,IAAMN,EAAIi6B,WAAW75B,EAAG,IAAI,CAACE,MAAM,CAAC,GAAK,kBAAkB,CAACN,EAAI6R,GAAG,IAAI7R,EAAI8R,GAAG9R,EAAIk6B,WAAW,WAAWl6B,EAAIiS,MACrT,GAAkB,GCYP,IACbzR,KAAMA,SACNI,KAFF,WAGI,MAAO,CACLq5B,QAASA,EAAQA,UAGrBxnB,SAAUA,CACRkV,OADJ,WAEM,OAAOnX,EAAA,KAAMmC,MAAMgb,QAErBuM,UAJJ,WAKM,OAAO1pB,EAAA,KAAMmC,MAAMwnB,aCzBsU,MCQ3V,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCnBX,GAAS,WAAa,IAAIn6B,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAC+Q,YAAY,SAAS7Q,MAAM,CAAC,GAAK,eAAe,CAACF,EAAG,MAAM,CAAC+Q,YAAY,SAAS1K,MAAM,CAAE2L,WAAYpS,EAAIY,KAAK6tB,WAAa,UAAY,UAAWnuB,MAAM,CAAC,GAAK,cAAc,CAACF,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,eAAegG,GAAG,CAAC,UAAY,SAASoL,GAAQ,OAAO1R,EAAIo6B,cAAc1oB,MAAW,CAACtR,EAAG,OAAO,CAAC+Q,YAAY,YAAY7Q,MAAM,CAAC,GAAK,aAAagG,GAAG,CAAC,MAAQ,SAASoL,GAAQ,OAAO1R,EAAIq6B,yBAAyBj6B,EAAG,OAAO,CAAC2Z,SAAS,CAAC,UAAY/Z,EAAI8R,GAAG9R,EAAIs6B,kBAAkBl6B,EAAG,OAAO,CAAC+Q,YAAY,IAAI7Q,MAAM,CAAC,GAAK,WAAWgG,GAAG,CAAC,MAAQtG,EAAI+tB,eAAgB/tB,EAAgB,aAAEI,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,YAAY,CAAEN,EAAa,UAAEI,EAAG,MAAM,CAAC+Q,YAAY,aAAa,CAAEnR,EAAe,YAAEI,EAAG,IAAI,CAACE,MAAM,CAAC,GAAK,oBAAoB,CAACN,EAAI6R,GAAG,IAAI7R,EAAI8R,GAAG9R,EAAIu6B,aAAa,OAAOv6B,EAAIiS,KAAKjS,EAAI8Z,GAAI9Z,EAAc,YAAE,SAASw6B,GAAQ,OAAOp6B,EAAG,MAAM,CAACoP,IAAIgrB,EAAO/zB,MAAM,CAAEqN,QAAU0mB,IAAWx6B,EAAIy6B,QAAW,QAAU,QAASn6B,MAAM,CAAC,GAAK,cAAgBk6B,IAAS,CAACx6B,EAAI8Z,GAAI9Z,EAAI06B,eAAeF,IAAS,SAASG,GAAS,OAAOv6B,EAAG,uBAAuB,CAACoP,IAAImrB,EAAQr6B,MAAM,CAAC,YAAY,IAAIyZ,SAAS,CAAC,UAAY/Z,EAAI8R,GAAG6oB,EAAU,WAAUv6B,EAAG,IAAI,CAACJ,EAAI6R,GAAG,mBAAmB7R,EAAI8R,GAAG9R,EAAI46B,YAAY56B,EAAI8R,GAAG9R,EAAI66B,iBAAiB76B,EAAI8R,GAAG0oB,GAAQ,OAAOx6B,EAAI6R,GAAG,KAAKzR,EAAG,OAAO,CAAC06B,MAAM96B,EAAI+6B,cAAc/6B,EAAIy6B,SAASn0B,GAAG,CAAC,MAAQ,SAASoL,GAAQ,OAAO1R,EAAIg7B,aAAatpB,EAAQ8oB,MAAW,CAACx6B,EAAI6R,GAAG,IAAI7R,EAAI8R,GAAG9R,EAAIi7B,YAAYT,IAAS,QAAQ,MAAKp6B,EAAG,KAAK,CAAC+Q,YAAY,SAAS7Q,MAAM,CAAC,GAAK,SAAS,OAASN,EAAIk7B,gBAAgB96B,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,eAAe,CAACF,EAAG,OAAO,CAAC+Q,YAAY,YAAY4I,SAAS,CAAC,UAAY/Z,EAAI8R,GAAG9R,EAAIm7B,iBAAiB/6B,EAAG,MAAMJ,EAAI8Z,GAAI9Z,EAAIo7B,uBAAuB,SAASC,EAAOC,GAAQ,OAAOl7B,EAAG,OAAO,CAACoP,IAAI8rB,GAAQ,CAACl7B,EAAG,uBAAuB,CAACE,MAAM,CAAC,YAAY,KAAK,CAACF,EAAG,IAAI,CAACA,EAAG,OAAO,CAAC2Z,SAAS,CAAC,UAAY/Z,EAAI8R,GAAGwpB,MAAWt7B,EAAI6R,GAAG,QAAQ7R,EAAI8Z,GAAG,GAAS,SAAS6gB,GAAS,OAAOv6B,EAAG,OAAO,CAACoP,IAAImrB,EAAQ5gB,SAAS,CAAC,UAAY/Z,EAAI8R,GAAG6oB,EAAW,aAAY,IAAI,MAAKv6B,EAAG,IAAI,CAACJ,EAAI6R,GAAG,2BAA2B7R,EAAI8R,GAAG9R,EAAIu7B,YAAY,OAAOn7B,EAAG,OAAO,CAAC06B,MAAM96B,EAAIw7B,gBAAgBl1B,GAAG,CAAC,MAAQ,SAASoL,GAAQ,OAAO1R,EAAIg7B,aAAatpB,MAAW,CAAC1R,EAAI6R,GAAG,IAAI7R,EAAI8R,GAAG9R,EAAIy7B,kBAAkB,QAAQ,IAAI,GAAGz7B,EAAIiS,KAAOjS,EAAI07B,WAAc17B,EAAI27B,aAA2Y37B,EAAIiS,KAAjY7R,EAAG,MAAM,CAAC+Q,YAAY,aAAa,CAAC/Q,EAAG,IAAI,CAAC2Z,SAAS,CAAC,UAAY/Z,EAAI8R,GAAG9R,EAAI47B,iBAAmB57B,EAAI80B,oBAA8Q90B,EAAIiS,KAA7P7R,EAAG,OAAO,CAAC06B,MAAM96B,EAAIy7B,iBAAmB,EAAI,YAAc,WAAWn1B,GAAG,CAAC,MAAQ,SAASoL,GAAQ1R,EAAIy7B,iBAAmB,GAAIz7B,EAAIg7B,aAAatpB,EAAQ,KAAM1R,EAAI47B,aAAajS,QAAQ,MAAO,QAAa,CAAC3pB,EAAI6R,GAAG,IAAI7R,EAAI8R,GAAG9R,EAAIy7B,kBAAkB,WAA6Bz7B,EAAIiS,KAAK7R,EAAG,MAAM,CAAC+Q,YAAY,UAAU1K,MAAM,CAAEqN,QAAS9T,EAAI07B,UAAY,QAAU,SAAU,CAACt7B,EAAG,OAAO,CAACJ,EAAI6R,GAAG,eAAe7R,EAAI6R,GAAG,KAAKzR,EAAG,OAAO,CAAC+Q,YAAY,YAAY,CAACnR,EAAI6R,GAAG,IAAI7R,EAAI8R,GAAG9R,EAAI46B,YAAY,SAAS56B,EAAI8Z,GAAI9Z,EAAc,YAAE,SAASw6B,GAAQ,OAAOp6B,EAAG,SAAS,CAACoP,IAAIgrB,EAAOM,MAAM96B,EAAI67B,kBAAkBrB,GAAQl6B,MAAM,CAAC,GAAK,cAAgBk6B,GAAQl0B,GAAG,CAAC,MAAQ,SAASoL,GAAQ,OAAO1R,EAAI87B,YAAYtB,MAAW,CAACx6B,EAAI6R,GAAG7R,EAAI8R,GAAG0oB,UAAc,KAAKp6B,EAAG,WAAW,CAACqU,WAAW,CAAC,CAACjU,KAAK,OAAOkU,QAAQ,SAASjF,MAAOzP,EAAY,SAAE2U,WAAW,aAAaxD,YAAY,SAAS7Q,MAAM,CAAC,GAAK,WAAW,UAAYN,EAAI0d,KAAK,MAAQ1d,EAAI2d,MAAM,YAAc3d,EAAI4d,gBAAgB,WAAa5d,EAAI6d,cAAczd,EAAG,aAAa,CAACqU,WAAW,CAAC,CAACjU,KAAK,OAAOkU,QAAQ,SAASjF,MAAOzP,EAAc,WAAE2U,WAAW,eAAerU,MAAM,CAAC,YAAcN,EAAI4d,gBAAgB,OAAS5d,EAAI8d,UAAU1d,EAAG,MAAM,CAAC+Q,YAAY,OAAO1K,MAAM,CAAE2L,WAAYpS,EAAIY,KAAK6tB,WAAa,UAAY,UAAWnuB,MAAM,CAAC,IAAMN,EAAI+7B,UAAU,GAAK,gBAAgB,IACpqH,GAAkB,GCQP,IACbv7B,KAAMA,QACNC,WAAYA,CACVmnB,SAAJA,GACI3N,mBAAJA,QACI4N,WAAJA,IAEEhV,MAAOA,CACLmpB,iBAAkBA,SAAtBA,GACM,IAAIlpB,EAAQ7S,KACZA,KAAKg8B,aACU,OAAXlpB,GAA8B,IAAXA,GACjB,oDACFD,EAAMA,qBACNA,EAAMA,sBAENA,EAAMA,WAAYA,EAEpB7S,KAAKi8B,SAAWnpB,GAEhBD,EAAMA,cAIZlS,KAxBF,WAyBI,MAAO,CACLm7B,UAAWA,EAAQA,QACnBjO,WAAYA,CAACA,IAAKA,IAAKA,IAAKA,IAAKA,IAAKA,IAAKA,IAAKA,IAAKA,IAAKA,IAAKA,IAAKA,IAAKA,IAAKA,IAAKA,IAAKA,IAAKA,IAAKA,IAAKA,IAAKA,KAC5GqO,aAAcA,CAACA,MAAOA,MAAOA,MAAOA,MAAOA,MAAOA,MAAOA,MAAOA,MAAOA,MAAOA,MAAOA,MAAOA,MAAOA,MAAOA,MAAOA,MAAOA,MAAOA,MAAOA,MAAOA,MAAOA,OACpJT,WAAWA,EACXjB,QAASA,KACTF,YAAaA,KACb3c,gBAAiBA,GACjBE,OAAQA,EACRkH,UAAUA,EACVoX,uBAAuBA,EACvB1e,KAAMA,KACNqH,YAAYA,EACZpH,MAAOA,EACPue,SAAUA,KACVjwB,IAAKA,CAACA,EAAGA,EAAGA,EAAGA,GACfowB,YAAYA,EACZC,YAAYA,EACZze,WAAYA,gBAGhBpL,SAAUA,+BACRupB,iBADJ,WAEM,OAAOxrB,EAAA,KAAMmC,MAAMqpB,kBAErBp7B,KAJJ,WAKM,MAAO,CACL2uB,eAAgBA,OAAMA,MAAMA,eAC5BgN,gBAAiBA,OAAMA,MAAMA,gBAC7B9N,WAAYA,OAAMA,MAAMA,WACxBK,UAAWA,OAAMA,MAAMA,UACvB0N,QAASA,OAAMA,MAAMA,QACrBR,iBAAkBA,OAAMA,MAAMA,oBAGtCppB,gBACA,UACA,iBACA,aACA,oBACA,qBACA,gBACA,eACA,iBACA,gBACA,aACA,eACA,eACA,yBA3BA,IA6BI6oB,iBA7BJ,WA8BM,IAAI3oB,EAAQ7S,KACZ,GAAI6S,EAAM4oB,UAAW,CAEnB,IADA,IAAR,IACA,8BACc5oB,EAAM2pB,mBAAqB3pB,EAAMyoB,YAActV,OAAOC,eAAe7e,KAAKyL,EAAM2pB,kBAAmB3pB,EAAMyoB,aAAetV,OAAOC,eAAe7e,KAAKyL,EAAM2pB,kBAAkB3pB,EAAMyoB,YAAazoB,EAAMgb,WAAW/pB,KAAOkiB,OAAOC,eAAe7e,KAAKyL,EAAM2pB,kBAAkB3pB,EAAMyoB,YAAYzoB,EAAMgb,WAAW/pB,IAAK,UACnT24B,GAAoCA,EAAMA,kBAAkBA,EAAMA,YAAYA,EAAMA,WAAWA,IAAIA,KAAKA,QAG5G,OAAOA,EAEP,OAAO5pB,EAAM6pB,kBAKnBC,QA3FF,WA4FI,IAAI9pB,EAAQ7S,KACZ8B,OAAOA,iBAAiBA,SAASA,SAArCA,GACM,IAAK+Q,EAAM+pB,IAAIrpB,SAASspB,EAAE/nB,SAAW+nB,EAAE/nB,OAAOuT,eAAiBxV,EAAMwnB,gBAC9DwC,EAAE/nB,OAAOuT,cAAcvlB,GAAGqQ,SAAS,QAAS,CAC/C,IAAV,uCACU,GAAI2pB,EAAOxpB,UAAUC,SAAS,aAAc,CAC1C,IAAZ,qCACYwpB,EAASA,cAMnBh7B,QAASA,CACPi7B,YADJ,SACAtY,GACU1kB,KAAKq6B,cAAclnB,SAAS,UAC9BuR,EAAYA,EAAIA,EAAYA,EAAIA,IAElC,IAAIuY,EAAevY,EAAYvjB,EAAI,SAAzC,sEACMU,SAASA,cAAcA,cAAcA,MAAMA,KAAOA,EAAeA,KAC7D6iB,EAAYthB,QAAU,EACxBvB,SAASA,cAAcA,eAAeA,MAAMA,IAAMA,EAA1DA,oFACA,aACQA,SAASA,cAAcA,eAAeA,MAAMA,IAAMA,EAA1DA,kBAEQA,SAASA,cAAcA,eAAeA,MAAMA,IAAMA,EAA1DA,gBAEMA,SAASA,cAAcA,eAAeA,MAAMA,KAAOA,EAAzDA,QACM,IAAIq7B,EAAer7B,SAASkR,cAAc,eAAewN,wBAAwBpf,EAAIU,SAASkR,cAAc,cAAcwN,wBAAwBjd,MAC9I,EAAV,oBAEQzB,SAASA,cAAcA,eAAeA,MAAMA,KAAOA,OAA3DA,sFAEUA,SAASkR,cAAc,cAAcwN,wBAAwBpf,EAAI,IACnEU,SAASA,cAAcA,eAAeA,MAAMA,KAAOA,UAGvDisB,UAxBJ,WA0BM,IAAIjb,EAAQ7S,KACPA,KAAKm8B,sBAGRn8B,KAAKm8B,uBAAwB,EAF7B5rB,OAAMA,OAAOA,gBAAiBA,IAI5BvQ,KAAKw8B,mBACP3pB,EAAMA,kBAGVmpB,WAAYA,WAEV,IAAN,uCACUc,EAAOxpB,UAAUC,SAAS,sBAC5BupB,EAAOA,UAAUA,OAAOA,oBACxBA,EAAOA,UAAUA,IAAIA,cAEvB,IAAN,uCACUhB,EAAUxoB,UAAUC,SAAS,UAC/BuoB,EAAUA,UAAUA,OAAOA,QAC3BA,EAAUA,UAAUA,IAAIA,SAG1Bj6B,SAASA,eAAeA,cAAcA,UAAUA,OAAOA,SAEzDs7B,mBAAoBA,WAGlBn9B,KAAKy7B,WAAY,EACjBz7B,KAAKw6B,QAAUx6B,KAAK+uB,mBAAmB/uB,KAAKs7B,YAAY8B,OAAOp9B,KAAKq9B,eAAe,GAAGlc,cACtFnhB,KAAKs6B,YAAct6B,KAAKs9B,iBACxBt9B,KAAKu9B,gBAEPxC,aA3DJ,SA2DAhjB,EAAAwiB,EAAAgC,GACMv8B,KAAKm8B,uBAAwB,EAC7B,IAAItpB,EAAQ7S,KACR+nB,EAAOhQ,EAAMylB,WAAWjd,wBAO5B,GANA1N,EAAMA,gBAAgBA,QAAUA,EAAKA,KACrCA,EAAMA,gBAAgBA,QAAUA,EAAKA,IACrCA,EAAMA,gBAAgBA,MAAQA,EAAKA,MACnCA,EAAMA,gBAAgBA,OAASA,EAAKA,OACpCA,EAAMA,OAASA,EAAMA,OAASA,EAC9BA,EAAMA,YAAaA,EACfA,EAAM2pB,mBAAqBxW,OAAOC,eAAe7e,KAAKyL,EAAM2pB,kBAAmB3pB,EAAMyoB,YAAa,CAElGzoB,EAAMA,MADJ0nB,EACY1nB,EAAMA,YAAYA,GAElBA,EAAMA,iBAGtB,IAAItR,EAAM,GAAlB,uDAEYgM,EAAc,GAClBA,EAAYA,SAAWA,CAACA,EAAMA,aAAaA,WAC3CA,EAAYA,WAAaA,EAAUA,CAACA,SAASA,IAAYA,CAACA,EAAMA,YAC5DgtB,IACFhtB,EAAYA,OAASA,GAEvB/L,IAAMA,CACJC,OAAQA,MACRF,IAAKA,EACLmM,OAAQA,IAClBhM,MAAA,YACUE,QAAQA,IAAIA,EAASA,MAErBiR,EAAMA,UAAWA,EACjBA,EAAMA,KAAOA,EAASA,YAEhC,CACQtR,EAAMA,GAAdA,uDAEQsR,EAAMA,MAAQA,EAAMA,iBACpBtF,EAAcA,GACdA,EAAYA,SAAWA,CAACA,EAAMA,aAAaA,WAC3C,IAAIwG,EAAYgE,EAAMylB,WAAWnV,cAActU,UAAUlK,MAAM,KAC3DkK,EAAU7R,OAAS,EACrBqL,EAAYA,WAAaA,CAACA,SAASA,EAAUA,GAAGA,MAAMA,YAAYA,KAElEA,EAAYA,WAAaA,CAACA,SAASA,EAAUA,GAAGA,MAAMA,YAAYA,KAEpE/L,IAAMA,CACJC,OAAQA,MACRF,IAAKA,EACLmM,OAAQA,IAClBhM,MAAA,YACUE,QAAQA,IAAIA,EAASA,MAErBiR,EAAMA,UAAWA,EACjBA,EAAMA,KAAOA,EAASA,QAG1B,OAAO,GAET8nB,SAAUA,WACR,OAAI3U,OAAOC,eAAe7e,KAAKpH,KAAK+uB,mBAAoB/uB,KAAKs7B,aAAetV,OAAOC,eAAe7e,KAAKpH,KAAK+uB,mBAAmB/uB,KAAKs7B,YAAa,SACxIt7B,KAAK+uB,mBAAmB/uB,KAAKs7B,YAAYrN,MAE3C,IAET4N,YA7HJ,SA6HA4B,GACMz9B,KAAKw6B,QAAUiD,EAAGtc,cAClB,IAAK,IAAX,iCACQtf,SAASA,eAAeA,cAAgBA,KAAKA,WAAWA,IAAIA,UAAUA,OAAOA,UAM/E,GAJAA,SAASA,eAAeA,cAAgBA,EAAGA,eAAeA,WAAaA,UACnEA,SAASkR,cAAc,mBACzBlR,SAASA,cAAcA,iBAAiBA,UAAYA,GAElDA,SAASkR,cAAc,UAAW,CACpC,IAAI2qB,EAAM19B,KAAK6tB,WAAW/jB,QAAQ2zB,GAClC57B,SAASA,cAAcA,UAAUA,UAAYA,KAAKA,aAAaA,KAGnE+5B,kBAAmBA,SAAvBA,GACM,IAAN,KACM,GAAI5V,OAAOC,eAAe7e,KAAKpH,KAAK+uB,mBAAoB/uB,KAAKs7B,aAAetV,OAAOC,eAAe7e,KAAKpH,KAAK+uB,mBAAmB/uB,KAAKs7B,YAAamC,GAC/I,IAAK,IAAb,6DACU,KAAV,wSACYE,GAAaA,GAInB,GAAI39B,KAAK+uB,oBAAsB/uB,KAAKs7B,WAAa,EAC/C,OAAmB,IAAfqC,EACEF,EAAGtc,cAAchO,SAASnT,KAAK+uB,mBAAmB/uB,KAAKs7B,YAAY8B,OAAOp9B,KAAKq9B,eAAe,GAAGlc,eAC5F,qBAEA,cAGLsc,EAAGtc,cAAchO,SAASnT,KAAK+uB,mBAAmB/uB,KAAKs7B,YAAY8B,OAAOp9B,KAAKq9B,eAAe,GAAGlc,eAC5F,mBAEA,aAKfsZ,eAAgBA,SAApBA,GACM,IAAImD,EAAmB,GACvB,GAAI5X,OAAOC,eAAe7e,KAAKpH,KAAK+uB,mBAAoB/uB,KAAKs7B,aAAetV,OAAOC,eAAe7e,KAAKpH,KAAK+uB,mBAAmB/uB,KAAKs7B,YAAamC,GAAK,CACpJ,IAAK,IAAb,8DAEQ,OAAOz9B,KAAK+uB,mBAAmB/uB,KAAKs7B,YAAYmC,GAEhD,OAAOG,GAGXC,eAAgBA,WAGV7X,OAAOC,eAAe7e,KAAKpH,KAAK+uB,mBAAoB/uB,KAAKs7B,aAAetV,OAAOC,eAAe7e,KAAKpH,KAAK+uB,mBAAmB/uB,KAAKs7B,YAAa,mBAAqBt7B,KAAKq9B,eAAiB,IAC1Lx7B,SAASA,eAAeA,cAAcA,UAAYA,KAAKA,mBAAmBA,KAAKA,YAAYA,eAAeA,KAAKA,gBAG7GmkB,OAAOC,eAAe7e,KAAKpH,KAAK+uB,mBAAoB/uB,KAAKs7B,aAAetV,OAAOC,eAAe7e,KAAKpH,KAAK+uB,mBAAmB/uB,KAAKs7B,YAAa,eAAiBt7B,KAAKq9B,eAAiB,IACtLx7B,SAASA,eAAeA,YAAYA,UAAYA,KAAKA,mBAAmBA,KAAKA,YAAYA,WAAWA,KAAKA,gBAI3G7B,KAAKu9B,eACD17B,SAASwR,eAAe,qBAC1BxR,SAASA,eAAeA,mBAAmBA,QAASA,IAE5B,IAAtB7B,KAAKi7B,eACPp5B,SAASA,eAAeA,UAAUA,QAASA,IAG/C+4B,cAAeA,WACb,MAA+B,kBAApB56B,KAAKs7B,YAA2Bt7B,KAAKs7B,WAAW1gB,MAAM,KACxD5a,KAAKs7B,WAAWzxB,MAAM,KAAK,GAE3B7J,KAAKs7B,YAGhBR,cAAeA,SAAnBA,GACM,GAAI96B,KAAKmoB,YAAcnC,OAAOC,eAAe7e,KAAKpH,KAAKmoB,WAAY,iBAAmBnC,OAAOC,eAAe7e,KAAKpH,KAAKmoB,WAAW6L,aAAc,WAAahO,OAAOC,eAAe7e,KAAKpH,KAAKmoB,WAAW6L,aAAc,aAAc,CACjO,IAAR,iFAEQ,OAAIh0B,KAAKs7B,YAAct7B,KAAKw8B,mBAAqBxW,OAAOC,eAAe7e,KAAKpH,KAAKw8B,kBAAmBx8B,KAAKs7B,aAAetV,OAAOC,eAAe7e,KAAKpH,KAAKw8B,kBAAkBx8B,KAAKs7B,YAAamC,IAAOzX,OAAOC,eAAe7e,KAAKpH,KAAKw8B,kBAAkBx8B,KAAKs7B,YAAYmC,GAAK,SAAWz9B,KAAKw8B,kBAAkBx8B,KAAKs7B,YAAYmC,GAAInZ,KAAKnR,SAAS5D,GACvU,gBACjB,gUACiB,kBAEA,KAIbgsB,cAAeA,WAIb,OAHA35B,QAAQA,IAAIA,2BACZA,QAAQA,IAAIA,KAAKA,mBACjBA,QAAQA,IAAIA,KAAKA,YACb5B,KAAKw8B,mBAAqBxW,OAAOC,eAAe7e,KAAKpH,KAAKw8B,kBAAmBx8B,KAAKs7B,aAAetV,OAAOC,eAAe7e,KAAKpH,KAAKw8B,kBAAkBx8B,KAAKs7B,YAAa,aAAkE,IAApDt7B,KAAKw8B,kBAAkBx8B,KAAKs7B,YAAYwC,QACtN,gBACf,+QACe,kBAEA,IAGX9C,YAAaA,SAAjBA,GAGM,OAAIh7B,KAAKw8B,mBAAqBxW,OAAOC,eAAe7e,KAAKpH,KAAKw8B,kBAAmBx8B,KAAKs7B,aAAetV,OAAOC,eAAe7e,KAAKpH,KAAKw8B,kBAAkBx8B,KAAKs7B,YAAamC,IAAOzX,OAAOC,eAAe7e,KAAKpH,KAAKw8B,kBAAkBx8B,KAAKs7B,YAAYmC,GAAK,QAC/Oz9B,KAAKw8B,kBAAkBx8B,KAAKs7B,YAAYmC,GAAInZ,KAAKpiB,OAEnD,GAET+4B,WAAYA,WACV,IAAN,wBAEA,KAKM,OAJIjV,OAAOC,eAAe7e,KAAKpH,KAAK+uB,mBAAoB/uB,KAAKs7B,aAAetV,OAAOC,eAAe7e,KAAKpH,KAAK+uB,mBAAmB/uB,KAAKs7B,YAAa,WAAat7B,KAAKq9B,eAAiB,GAAKr9B,KAAK6tB,WAAW1a,SAASnT,KAAK+uB,mBAAmB/uB,KAAKs7B,YAAY8B,OAAOp9B,KAAKq9B,eAAe,GAAGlc,iBACvR4c,GAASA,GAGS,KAAhBzD,IAAiC,IAAXyD,GAO5BT,eAAgBA,WAGd,OAAIt9B,KAAKs7B,YAAct7B,KAAK+uB,oBAAsB/I,OAAOC,eAAe7e,KAAKpH,KAAK+uB,mBAAoB/uB,KAAKs7B,aAAetV,OAAOC,eAAe7e,KAAKpH,KAAK+uB,mBAAmB/uB,KAAKs7B,YAAa,gBAAkBt7B,KAAKq9B,eAAiB,EAC9Nr9B,KAAK+uB,mBAAmB/uB,KAAKs7B,YAAYhB,YAAYt6B,KAAKq9B,eAE1D,IAGXlC,oBAAqBA,WACnB,OAAInV,OAAOC,eAAe7e,KAAKpH,KAAK+uB,mBAAoB/uB,KAAKs7B,aAAetV,OAAOC,eAAe7e,KAAKpH,KAAK+uB,mBAAmB/uB,KAAKs7B,YAAa,gBACxIt7B,KAAK+uB,mBAAmB/uB,KAAKs7B,YAAY0C,aAE3C,IAETT,aAAcA,WACZ,IAAI1qB,EAAQ7S,KAIZ,GAHA4B,QAAQA,IAAIA,sBACZA,QAAQA,IAAIA,KAAKA,eAEbokB,OAAOC,eAAe7e,KAAKpH,KAAK+uB,mBAAoB/uB,KAAKs7B,aAAetV,OAAOC,eAAe7e,KAAKpH,KAAK+uB,mBAAmB/uB,KAAKs7B,YAAa,WAAat7B,KAAKq9B,eAAiB,GAAKr9B,KAAK6tB,WAAW1a,SAASnT,KAAK+uB,mBAAmB/uB,KAAKs7B,YAAY8B,OAAOp9B,KAAKq9B,eAAe,GAAGlc,eACvRtO,EAAMA,YAAYA,KAAKA,mBAAmBA,KAAKA,YAAYA,OAAOA,KAAKA,eAAeA,GAAGA,mBAGjG,CACA,gBACQ,IADA,IACR,kCACU,IAAV,4DACA,qBAAqB,GAArB,WACYhR,SAASA,eAAeA,cAAgBA,KAAKA,WAAWA,IAAIA,QAASA,EACrEA,SAASA,eAAeA,cAAgBA,KAAKA,WAAWA,IAAIA,UAAUA,OAAOA,WAGjE7B,KAAK6tB,WAAW/pB,GAIhC+O,EAAMA,aAAaA,MAGvBorB,aAAcA,SAAlBA,GAEM,GADAr8B,QAAQA,IAAIA,uBAAyBA,EAAYA,KAAKA,eAClDC,SAASwR,eAAe,wBAO1B,GAAIrT,KAAK+uB,oBAAsB,OAAvC,4OAEU,IAAV,6BAEYltB,SAASA,eAAeA,SAASA,WADtB,IAAT67B,EAC2C77B,KAAKA,aAAaA,GAElBA,QAG/CA,SAASA,eAAeA,SAASA,UAAYA,GAKnDu4B,mBAAoBA,WAElB,IAAN,uCAEU0C,EAAOxpB,UAAUC,SAAS,qBAC5BupB,EAAOA,UAAUA,OAAOA,oBACxBA,EAAOA,UAAUA,IAAIA,cAC7B,oCACQA,EAAOA,UAAUA,OAAOA,aACxBA,EAAOA,UAAUA,IAAIA,sBAKzB3C,cAAeA,SAAnBA,GACM0C,EAAIA,GAAKA,OAAOA,MAChBA,EAAEA,iBAEF78B,KAAKgM,IAAI,GAAK6wB,EAAElY,QAChB3kB,KAAKgM,IAAI,GAAK6wB,EAAEqB,QAChBr8B,SAASA,UAAYA,KAAKA,iBAE1BA,SAASA,YAAcA,KAAKA,aAE9Bs8B,YAAaA,SAAjBA,GACMtB,EAAIA,GAAKA,OAAOA,MAChBA,EAAEA,iBACF,IAAIuB,EAAQv8B,SAASwR,eAAe,cAEpCrT,KAAKgM,IAAI,GAAKhM,KAAKgM,IAAI,GAAK6wB,EAAElY,QAC9B3kB,KAAKgM,IAAI,GAAKhM,KAAKgM,IAAI,GAAK6wB,EAAEqB,QAC9Bl+B,KAAKgM,IAAI,GAAK6wB,EAAElY,QAChB3kB,KAAKgM,IAAI,GAAK6wB,EAAEqB,QAEhBE,EAAMA,MAAMA,IAAMA,EAAxBA,2BACMA,EAAMA,MAAMA,KAAOA,EAAzBA,4BAEM,IAAN,uCACUtC,EAAUxoB,UAAUC,SAAS,UAC/BuoB,EAAUA,UAAUA,OAAOA,QAC3BA,EAAUA,UAAUA,IAAIA,UAG5BuC,iBAAkBA,WAEhBx8B,SAASA,UAAYA,KACrBA,SAASA,YAAcA,MAEzBq5B,WAAYA,WACV,IAAIpR,EAAa,uBACbX,EAAc,qBAAwBC,WACtCkV,EAAYxU,EAAWC,yBAAyB,EAAG/pB,KAAKs7B,WAAYt7B,KAAKiS,aAAaC,OAC1F,GAAIosB,EAAW,CACb,IAAItU,EAAOb,EAAYc,KAAKC,mBAAmB,EAAGoU,EAAU,GAAIA,EAAU,IACtEtH,EAAW7N,EAAYc,KAAKE,kBAAkBC,KAAKJ,GAAMuU,QAE7D,OADAvH,EAAWA,EAASA,OAAOA,EAAGA,GAAKA,EAASA,OAAOA,GAAGA,cAC/Ch3B,KAAK+R,QAAU,YAAc/R,KAAKs7B,WAAa,qDAAuDt7B,KAAKiS,aAAaxK,IAAM,IAAMzH,KAAKiS,aAAaC,MAAQ,YAAc8kB,EAAW,IAAMsH,EAAU,GAAK,IAEnN,OAAOt+B,KAAK+R,QAAU,YAAc/R,KAAKs7B,WAAa,qEAI5D5nB,QA/dF,WAie0B,OAAlB1T,KAAKi8B,UACPj8B,KAAKg9B,YAAYh9B,KAAKi8B,YC3eqU,MCS7V,I,oBAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,qBCiCA,IACb17B,KAAMA,UACNC,WAAYA,CACVg+B,iBAAJA,QACIC,OAAJA,EACIC,SAAJA,GACIC,eAAJA,GACIC,SAAJA,GACIC,gBAAJA,GACIC,KAAJA,GACIC,YAAJA,GACIC,MAAJA,GACIC,aAAJA,QACIC,OAAJA,GACIC,SAAJA,GACIzR,OAAJA,IAEErJ,MAAOA,CAACA,cACR7R,SAAUA,CACR7R,KADJ,WAEM,MAAO,CACL4R,KAAMA,OAAMA,MAAMA,KAClB6sB,cAAeA,CACvB,uEACA,kGAKEr9B,QAASA,CACPu2B,UAAWA,WACT,IAAIzlB,EAAQ7S,KACZ6B,SAASA,eAAeA,YAAYA,UAAUA,OAAOA,QACrDA,SAASA,eAAeA,YAAYA,WAAaA,QACjDA,SAASA,cAAcA,WAAWA,MAAMA,QAAUA,OAC9CA,SAASkR,cAAc,YAAYO,UAAUC,SAAS,YACxDP,qBACAH,EAAMA,aAAaA,SAASA,cAAcA,eAG9C2J,WAAYA,WACV,IAAIC,EAAW,CACrB,iBACA,mBACA,iBACA,OACA,SACA,QAGM,IAAIC,UAAUC,SAKZ,OAAO,EAJP,MAAOF,EAASva,OACd,GAAIwa,UAAUC,WAAaF,EAASG,OAAS,OAAvD,wCAMIyiB,cAAeA,WAEbx9B,SAASA,cAAcA,oBAAoBA,UAAYA,QACvD,IAAIy9B,EAAQ,OAAlB,+BACMz9B,SAASA,cAAcA,oBAAoBA,UAAYA,MAAQA,OAAOA,YAAcA,WAAaA,EAAQA,aAAeA,OAAOA,QAAUA,gBAAkBA,SAASA,KAAKA,cAE3KsP,aAAcA,WAEZtP,SAASA,cAAcA,UAAUA,UAAYA,OAE7C7B,KAAK+sB,OAAOnL,OAAO,YAAY,IAQjCpM,aAAcA,SAAlBA,GAC2B,eAAjBC,EAAG9L,YACL8L,EAAGA,UAAYA,SAIrBnU,QAlFF,WAoFIi+B,iCACAz9B,OAAOA,SAASA,EAAGA,KACnB+V,OAA0BA,CAACA,KAAKA,OAAOA,WAAWA,kBAAmBA,KAAKA,OAAOA,WAAWA,MAAOA,KAAKA,OAAOA,WAAWA,OAE1H/V,OAAOA,iBAAiBA,UAAUA,WAChCA,OAAOA,SAASA,EAAGA,KACnBD,SAASA,iBAAiBA,iBAAiBA,SAAQA,SAAzDA,GAAA,qBACMA,SAASA,iBAAiBA,wCAAwCA,SAAQA,SAAhFA,GAAA,qBACMukB,KACA,IAAIkZ,EAAQ,OAAlB,+BACMz9B,SAASA,cAAcA,oBAAoBA,UAAYA,MAAQA,OAAOA,YAAcA,WAAaA,EAAQA,aAAeA,OAAOA,QAAUA,gBAAkBA,SAASA,KAAKA,gBAE3KyX,YAAWA,WACLzX,SAASkR,cAAc,oBACzBlR,SAASA,cAAcA,kBAAkBA,MAAMA,WAAaA,SAC5DA,SAASA,cAAcA,kBAAkBA,MAAMA,QAAUA,UAEjE,OAEE6R,QAvGF,cCrDiV,MCQ7U,I,UAAY,eACd,GACA5T,EACAQ,GACA,EACA,KACA,KACA,OAIa,gB,8BCnBfkO,EAAOC,QAAU,IAA0B,yB,4CCA3CD,EAAOC,QAAU,IAA0B,iC,sDCM3CkL,EAAE6lB,GAAGC,OAAS,WACZ,OAAOz/B,KAAKihB,MAAK,WACftH,EAAE3Z,MAAMsG,KAAKqT,EAAE3Z,MAAMsG,OAAOojB,QAAQ,2BAA4B,YAMpE/P,EAAE9X,UAAU69B,OAAM,WACf/lB,EAAE,2CAA2CgmB,OAAM,WAClDhmB,EAAE,YAAYimB,YAAY,WAC1BjmB,EAAE,iBAAiBkmB,SAAS,cAG7BlmB,EAAE,WAAWmmB,UAGhBnmB,GAAE,WACAA,EAAE9X,UAAUiwB,QAAQ,CAAEzjB,SAAU,CAAE0xB,GAAI,eAAgBC,GAAI,eAAgBC,UAAW,SAAY,CAAEhV,KAAM,CAAEiV,MAAO,a,wDCxBpH,W,kCCAA,W,yDCAA,W,8HCAA,W,kCCAA,W,kCCAA","file":"js/wrapper.7654725f.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PopUpNew.vue?vue&type=style&index=1&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Coverage.vue?vue&type=style&index=0&id=69cdfee8&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"matrix\"}},[_c('MatrixHeader'),_c('LoadingPage'),_c('div',{attrs:{\"id\":\"container\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id='matrix'>\n    <MatrixHeader />\n    <LoadingPage />\n     <div id='container'>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport MatrixHeader from '../components/MatrixLayout/MatrixHeader'\nimport LoadingPage from '../components/MatrixLayout/LoadingPage'\nimport store from '@/store/index'\n\nexport default {\n  name: 'Matrix',\n  components: {\n    MatrixHeader,\n    LoadingPage\n  },\n  data () {\n    return {\n      hostname: store.state.url,\n      publicPath: process.env.BASE_URL,\n      structures: null,\n      totalStructures: 0,\n      d3: require('d3'),\n      green: '#7A9D5B',\n      backgroundColour: '#ffffff',\n      x: 0,\n      y: 15,\n      organismId: '2697049' // COVID:2697049 SARS:694009 MERS:1263720\n    }\n  },\n  mounted () {\n    let allStructures\n    // window.BACKEND = 'https://odonoghuelab.org:8011/'\n\n    // gets an organism and runs all the functions and loads everything\n    var url = `${window.BACKEND}/${this.organismId}`\n    axios({\n      method: 'get',\n      url: url\n    })\n      .then(response => {\n        allStructures = JSON.parse(response.data.primary_accessions)\n        this.getStructures(this.organismId, allStructures).then(response => { // creates a list of objects with info on each structure\n          console.log(response)\n          this.getMatchingStructures(response).then(response => {\n            this.getProteinSynonyms(response).then(response => {\n              this.loadShapes(response).then(() => {\n                if (document.querySelector('.matrixLoading')) {\n                  document.querySelector('.matrixLoading').style.visibility = 'hidden'\n                  document.querySelector('.matrixLoading').style.display = 'none'\n                }\n              })\n            })\n          })\n        })\n        this.structures = allStructures\n      })\n\n    window.addEventListener('resize', this.initialDisplay)\n  },\n  methods: {\n    // TODO: adding a gap if there is no gap between continous regions!!\n    // TODO: add a minimum image size as well as a max one.\n    // start writing a documentation about how things are done. IE, how polyproteins are split etc.\n\n    // given sequence length, return length of the rectangle to generate.\n    getResidueSize (scale, length) {\n      return length * scale\n    },\n\n    // This function takes in the protein data, and draws all the shapes\n    async loadShapes (data) {\n      // data in the format of [{name:string, primary_accession:string, sequence:string, position:int, length:int, clusters:array or 0, continuous:bool}]\n      data = this.partitionToThree(data)\n      var continuous = 0 // used to draw continuous axis over multiple proteins\n\n      var scale = 960 / Math.max(...(data.map(el => this.getListSum(el)))) // scale the viewport by the longest of the three lists in data\n\n      for (var i = 0; i < data.length; i++) {\n        var svg = this.d3.select('#container').append('svg').attr('class', 'row').attr('preserveAspectRatio', 'xMinYMin meet').attr('viewBox', '0 0 960 360') // 960 width preserving aspect ratio instead of using window.innerWidth\n\n        this.x = 0 // displacement from the left\n        this.y = 15\n        var offset = 0\n\n        if (i !== 0) { // if not the first residue, add placeholder grey arrow before it\n          // add arrow before\n          var prevLayer = data[i - 1]\n          var prefixName = prevLayer[prevLayer.length - 1]\n          var nextElem = data[i][0]\n          var prefixSize = Math.floor(nextElem.length / 500 + 1)\n          var large = false\n          if (prefixSize > 3) {\n            large = true\n          }\n          var placeholder = { id: 'placeholder', dark: true, placeholderLarge: large, primary_accession: prefixName.primary_accession, name: prefixName.name, synonym: prefixName.synonym, placeholder: true }\n          this.drawArrow(svg, placeholder, 150, 20, 20 / 1.5, offset, scale)\n          this.drawRuler(svg, placeholder, continuous, 150, 20 / 1.5, offset)\n          offset = offset + 150 + (20 / 1.5)\n        }\n\n        for (var n = 0; n < data[i].length; n++) {\n          var hadFragments = false\n          var height = 20 // the height of the rectangles, and the length of the triangle that is appended. Triangle width is 2*height\n          var triangleSize = height / 1.5\n          var width = this.getResidueSize(scale, data[i][n].length) - triangleSize // length of the residues, minus the width of the appended triangle\n          if (width < 0) {\n            triangleSize = this.getResidueSize(scale, data[i][n].length) // scale down the triangle\n            width = 0\n          }\n\n          // Draw the arrows for the protein\n          this.drawArrow(svg, data[i][n], width, height, triangleSize, offset, scale)\n\n          // draw the non-dark regions\n          // this.fillArrow(svg, data[i][n], width, height, triangleSize, offset, scale)\n\n          // Draw the axis\n          this.drawRuler(svg, data[i][n], continuous, width, triangleSize, offset)\n\n          if (data[i][n].continuous) {\n            continuous = data[i][n].length\n          } else {\n            continuous = 0\n          }\n\n          this.addNonDarkToFragments(data[i][n])\n\n          // Draw fragments if they exist\n          if (data[i][n].fragments.length !== 0) {\n            this.y = this.y + 33\n            hadFragments = true\n          }\n          this.drawFragments(svg, data[i][n].fragments, scale, offset)\n\n          // Draw the image of the protein if one exists, or fetch default if it does not\n          this.drawMatchingStructures(svg, data[i][n], width, height, triangleSize, offset, scale)\n\n          // Adjust the offset for the next protein\n          offset = offset + width + triangleSize\n          if (hadFragments) {\n            this.y = this.y - 33\n          }\n        }\n        if (i !== 0 && i !== data.length - 1) {\n          // add grey placeholder arrow after\n          var nextLayer = data[i + 1]\n          var nextName = nextLayer[0]\n          var prevElem = data[i - 1]\n          prefixSize = Math.floor(prevElem[prevElem.length - 1].length / 500 + 1)\n          large = false\n          if (prefixSize > 3) {\n            large = true\n          }\n          placeholder = { id: 'placeholder', dark: true, placeholderLarge: large, primary_accession: nextName.primary_accession, name: nextName.name, synonym: nextName.synonym, placeholder: true }\n          this.drawArrow(svg, placeholder, this.getResidueSize(scale, nextLayer[0].length) - 20 / 1.5, 20, 20 / 1.5, offset, scale)\n          // Draw the axis\n          this.drawRuler(svg, placeholder, continuous, this.getResidueSize(scale, nextLayer[0].length) - 20 / 1.5, 20 / 1.5, offset)\n        }\n\n        this.drawExpandButton(svg)\n      }\n      this.initialDisplay(false)\n    },\n\n    fillData (protein) {\n      var data = [{ offset: '0%', color: 'black' }]\n      if (protein.nonDark) {\n        console.log(protein.nonDark)\n        for (var i = 0; i < protein.nonDark.length; i++) {\n          var segment = protein.nonDark[i]\n          data.push({ offset: '' + 100 * (segment.Start / protein.length) + '%', color: 'black' }) // end of the black\n          data.push({ offset: '' + 100 * (segment.Start / protein.length) + '%', color: this.green }) // start of the green\n          data.push({ offset: '' + 100 * (segment.Stop / protein.length) + '%', color: this.green }) // end of the green\n          data.push({ offset: '' + 100 * (segment.Stop / protein.length) + '%', color: 'black' }) // start of the black\n        }\n      }\n      if (protein.placeholder) {\n        data = [{ offset: '0%', color: '#CCCCCC' }]\n      }\n      // data.push({ offset: '100%', color: 'black' })\n      return data\n    },\n\n    getNonDarkBetween (protein, start, stop) {\n      var nonDark = []\n      if (protein.nonDark) {\n        for (var i = 0; i < protein.nonDark.length; i++) {\n          if (protein.nonDark[i].Start <= start && protein.nonDark[i].Stop >= start) {\n            nonDark.push({ Start: 0, Stop: (protein.nonDark[i].Stop - start) })\n          } else if (protein.nonDark[i].Start >= start && protein.nonDark[i].Stop <= stop) {\n            nonDark.push({ Start: (protein.nonDark[i].Start - start), Stop: (protein.nonDark[i].Stop - start) })\n          } else if (protein.nonDark[i].Start <= stop && protein.nonDark[i].Stop >= stop) {\n            nonDark.push({ Start: (protein.nonDark[i].Start - start), Stop: (stop - start) })\n          }\n        }\n      }\n      return nonDark\n    },\n\n    splitToChunks (array, parts) {\n      var result = []\n      for (let i = parts; i > 0; i--) {\n        result.push(array.splice(0, Math.ceil(array.length / i)))\n      }\n      return result\n    },\n\n    addNonDarkToFragments (protein) {\n      if (protein.fragments) {\n        for (var j = 0; j < protein.fragments.length; j++) {\n          var fragment = protein.fragments[j]\n          protein.fragments[j].nonDark = this.getNonDarkBetween(protein, fragment.Start, fragment.Stop)\n        }\n      }\n    },\n\n    /* eslint-enable */\n\n    drawArrow (svg, protein, width, height, triangleSize, offset, scale) {\n      // var fill = protein.dark ? 'black' : this.green\n      // create a rectangle\n      var fill = this.fillData(protein)\n      var id = protein.id ? protein.id : protein.primary_accession\n      console.log(id)\n      var hoverText = protein.description ? protein.description : protein.name\n\n      // split longer proteins into multiple rectangles to get around chrome issue. No more than 7 explicit start / end definitions\n      // this is necessary for some browers like chrome, which renders large gradients with many explicit divisions incorrectly\n      if (fill.length > 14 && width > 300) {\n        var prevOffset = 0\n        var nonDarkFragments = JSON.parse(JSON.stringify(protein.nonDark))\n        var numChunks = Math.floor(fill.length / 10) > 4 ? Math.floor(fill.length / 10) : 4\n\n        var newFill = this.splitToChunks(nonDarkFragments, numChunks) // can split into more chunks if needed to get around chrome blurring\n        var prevStop = 0\n        for (var i = 0; i < newFill.length; i++) {\n          var len = newFill[i].slice(-1)[0].Stop - prevStop\n          if (i === newFill.length - 1) {\n            len = protein.length - prevStop\n          }\n          var fragmentWidth = this.getResidueSize(scale, len)\n          for (var k = 0; k < newFill[i].length; k++) {\n            newFill[i][k].Start = newFill[i][k].Start - prevStop\n            newFill[i][k].Stop = newFill[i][k].Stop - prevStop\n          }\n\n          var shapeFill = this.fillData({ length: len, nonDark: newFill[i] })\n\n          svg.append('linearGradient')\n            .attr('id', 'grad_partial_' + id + '_' + i)\n            .attr('x1', '0%').attr('y1', '0%')\n            .attr('x2', '100%').attr('y2', '0%')\n            .selectAll('stop')\n            .data(shapeFill)\n            // .data([{\"offset\":\"0%\",\"color\":\"black\"},{\"offset\":\"0%\",\"color\":\"black\"},{\"offset\":\"0%\",\"color\":\"#7A9D5B\"},{\"offset\":\"2%\",\"color\":\"#7A9D5B\"},{\"offset\":\"2%\",\"color\":\"black\"},{\"offset\":\"3%\",\"color\":\"black\"},{\"offset\":\"3%\",\"color\":\"#7A9D5B\"},{\"offset\":\"4%\",\"color\":\"#7A9D5B\"},{\"offset\":\"4%\",\"color\":\"black\"},{\"offset\":\"18%\",\"color\":\"black\"},{\"offset\":\"18%\",\"color\":\"#7A9D5B\"},{\"offset\":\"21%\",\"color\":\"#7A9D5B\"},{\"offset\":\"21%\",\"color\":\"black\"},{\"offset\":\"23%\",\"color\":\"black\"},{\"offset\":\"23%\",\"color\":\"#7A9D5B\"},{\"offset\":\"27%\",\"color\":\"#7A9D5B\"},{\"offset\":\"27%\",\"color\":\"black\"},{\"offset\":\"27%\",\"color\":\"black\"},{\"offset\":\"27%\",\"color\":\"#7A9D5B\"},{\"offset\":\"42%\",\"color\":\"#7A9D5B\"},{\"offset\":\"42%\",\"color\":\"black\"},{\"offset\":\"42%\",\"color\":\"black\"},{\"offset\":\"42%\",\"color\":\"#7A9D5B\"},{\"offset\":\"45%\",\"color\":\"#7A9D5B\"},{\"offset\":\"45%\",\"color\":\"black\"},{\"offset\":\"71%\",\"color\":\"black\"},{\"offset\":\"71%\",\"color\":\"#7A9D5B\"},{\"offset\":\"72%\",\"color\":\"#7A9D5B\"},{\"offset\":\"72%\",\"color\":\"black\"},{\"offset\":\"72%\",\"color\":\"black\"},{\"offset\":\"72%\",\"color\":\"#7A9D5B\"},{\"offset\":\"81%\",\"color\":\"#7A9D5B\"},{\"offset\":\"81%\",\"color\":\"black\"},{\"offset\":\"87%\",\"color\":\"black\"},{\"offset\":\"87%\",\"color\":\"#7A9D5B\"},{\"offset\":\"99%\",\"color\":\"#7A9D5B\"},{\"offset\":\"99%\",\"color\":\"black\"}])\n            .enter().append('stop')\n            .attr('offset', function (d) { return d.offset })\n            .attr('stop-color', function (d) { return d.color })\n            .attr('stop-opacity', 1)\n\n          if (i === newFill.length - 1) {\n            var rectLen = fragmentWidth - triangleSize\n            let p\n            if (rectLen > 0) {\n              p = [this.x, this.y, this.x, this.y + height, this.x + rectLen, this.y + height, this.x + rectLen, this.y + (0.5 * height) + triangleSize, this.x + rectLen + triangleSize, this.y + 0.5 * height, this.x + rectLen, this.y + (0.5 * height) - triangleSize, this.x + rectLen, this.y]\n            } else {\n              p = [this.x, this.y + (0.5 * height) - triangleSize, this.x, this.y + (0.5 * height) + triangleSize, this.x + triangleSize, this.y + (0.5 * height)] // point 1 x coords, y coords. Point 2 x, y. Point 3 x,y.\n            }\n\n            // create an arrow\n            svg.append('svg:polygon')\n              .attr('points', p)\n              // .attr('fill', fill)\n              .attr('fill', 'url(#grad_partial_' + id + '_' + i + ')')\n              .attr('id', id)\n              .attr('title', id)\n              .attr('transform', 'translate(' + (offset + prevOffset) + ',0)')\n              .attr('class', 'arrow')\n              .on('mouseover', function (d, i) {\n                var d3 = require('d3')\n                d3.select(this).attr('opacity', '.85')\n                d3.selectAll('rect#' + this.id).attr('opacity', '.85')\n                this.style.cursor = 'pointer'\n              })\n              .on('mouseout', function (d, i) {\n                var d3 = require('d3')\n                d3.select(this).attr('opacity', '1')\n                d3.selectAll('rect#' + this.id).attr('opacity', '1')\n              })\n              .on('click', function () {\n                var d3 = require('d3')\n                var baseUrl = window.location.origin\n                window.open(baseUrl + '/' + d3.select(this).attr('title'))\n              })\n              .append('svg:title')\n              .text(hoverText)\n          } else {\n            // create an arrow\n            svg.append('svg:rect')\n              .attr('fill', 'url(#grad_partial_' + id + '_' + i + ')')\n              .attr('x', this.x)\n              .attr('y', this.y)\n              .attr('width', fragmentWidth)\n              .attr('height', height)\n              .attr('id', id)\n              .attr('class', 'arrow')\n              .attr('title', id)\n              .attr('transform', 'translate(' + (offset + prevOffset) + ',0)')\n              .on('mouseover', function (d, i) {\n                var d3 = require('d3')\n                d3.select(this).attr('opacity', '.85')\n                d3.selectAll('rect#' + this.id).attr('opacity', '.85')\n                d3.selectAll('polygon#' + this.id).attr('opacity', '.85')\n                this.style.cursor = 'pointer'\n              })\n              .on('mouseout', function (d, i) {\n                var d3 = require('d3')\n                d3.select(this).attr('opacity', '1')\n                d3.selectAll('rect#' + this.id).attr('opacity', '1')\n                d3.selectAll('polygon#' + this.id).attr('opacity', '1')\n              })\n              .on('click', function () {\n                var d3 = require('d3')\n                var baseUrl = window.location.origin\n                window.open(baseUrl + '/' + d3.select(this).attr('title'))\n              })\n              .append('svg:title')\n              .text(hoverText)\n          }\n          prevStop = prevStop + len\n          prevOffset = prevOffset + fragmentWidth\n        }\n      } else {\n        svg.append('linearGradient')\n          .attr('id', 'grad_' + id)\n          .attr('x1', '0%').attr('y1', '0%')\n          .attr('x2', '100%').attr('y2', '0%')\n          .selectAll('stop')\n          .data(fill)\n          .enter().append('stop')\n          .attr('offset', function (d) { return d.offset })\n          .attr('stop-color', function (d) { return d.color })\n          .attr('stop-opacity', 1)\n\n        let p\n        if (width > 0) {\n          p = [this.x, this.y, this.x, this.y + height, this.x + width, this.y + height, this.x + width, this.y + (0.5 * height) + triangleSize, this.x + width + triangleSize, this.y + 0.5 * height, this.x + width, this.y + (0.5 * height) - triangleSize, this.x + width, this.y]\n        } else {\n          p = [this.x, this.y + (0.5 * height) - triangleSize, this.x, this.y + (0.5 * height) + triangleSize, this.x + triangleSize, this.y + (0.5 * height)] // point 1 x coords, y coords. Point 2 x, y. Point 3 x,y.\n        }\n\n        // create an arrow\n        svg.append('svg:polygon')\n          .attr('points', p)\n          // .attr('fill', fill)\n          .attr('fill', 'url(#grad_' + id + ')')\n          .attr('id', id)\n          .attr('title', id)\n          .attr('class', 'arrow')\n          .attr('transform', 'translate(' + offset + ',0)')\n          .on('mouseover', function (d, i) {\n            var d3 = require('d3')\n            this.style.cursor = 'pointer'\n            d3.select(this).attr('opacity', '.85')\n            // d3.select('rect#' + this.id).transition().duration('50').attr('opacity', '.85')\n          })\n          .on('mouseout', function (d, i) {\n            var d3 = require('d3')\n            d3.select(this).attr('opacity', '1')\n            // d3.select('rect#' + this.id).transition().duration('50').attr('opacity', '1')\n          })\n          .on('click', function () {\n            var d3 = require('d3')\n            var baseUrl = window.location.origin\n            window.open(baseUrl + '/' + d3.select(this).attr('title'))\n          })\n          .append('svg:title')\n          .text(hoverText)\n      }\n\n      // append protein names to the rectangles\n      var lab = svg.append('text')\n        .attr('x', this.x + 0.5 * (width + 0.5 * triangleSize))\n        .attr('y', this.y + 0.5 * height)\n        .attr('transform', 'translate(' + offset + ',0)')\n        .attr('dy', '.35em')\n        .style('text-anchor', 'middle')\n        .attr('class', 'arrow')\n        .style('fill', 'white')\n        .text(protein.name)\n\n      if (lab.node().getComputedTextLength() > width) {\n        lab.text(protein.synonym[0]) // prefer the first synonym\n        if (lab.node().getComputedTextLength() > width) { // if it's too long\n          var shortest = protein.synonym.reduce((a, b) => a.length <= b.length ? a : b)\n          shortest = shortest.replace('orf', '').replace('ORF', '')\n          lab.text(shortest) // use the shortest name\n          if (lab.node().getComputedTextLength() > width + 0.5 * triangleSize) {\n            // if the shortest name still doesn't fit, display it below the arrow in green\n            lab.attr('y', this.y + height * 1.5)\n            lab.style('fill', this.green)\n            lab.attr('class', 'rowContent')\n          }\n        }\n      }\n    },\n\n    drawRuler (svg, protein, continuous, width, triangleSize, offset) {\n      // Draw the axis\n      var range = [1, width + triangleSize - 1]\n      if (continuous) range = [0, width + triangleSize]\n      var xScale = this.d3.scale.linear()\n        .domain([continuous, continuous + protein.length]) // This is what is written on the Axis: from 0 to length of residue\n        .range(range) // This is where the axis is placed: from start to end of triangle. Add a tiny bit of spacing between the two\n\n      var ticks = Math.floor(protein.length / 500 + 1) // a tick every 500 residues\n      if (ticks > 3 || protein.placeholderLarge) { // if longer than 1500 residues\n        if (protein.placeholderLarge) ticks = 0\n        var axis = svg\n          .append('g')\n          .attr('transform', 'translate(' + offset + ',' + (this.y - 15) + ')') // This controls the vertical position of the Axis\n          .attr('style', '')\n          .style('fill', 'gray')\n          .style('font-size', '10px')\n          .attr('class', 'rowContent')\n          .call(this.d3.svg.axis().scale(xScale).tickSize(0, 1).tickFormat((interval, i) => { return (interval === 0 || interval % 1000 !== 0) ? ' ' : interval }).orient('bottom').ticks(ticks)) // render only thousand ticks\n          // .call(g => g.selectAll('text')\n          //   .attr('y', 4)\n          //   .attr('dx', -4)) // shifts text to the left.\n        if (protein.placeholder) {\n          axis.style('fill', '#CCCCCC')\n        }\n\n        axis.selectAll('.tick')\n          .attr('stroke', 'gray')\n          .attr('x1', this.x)\n          .attr('x2', this.x)\n          .attr('y2', 0)\n          .attr('y1', 3)\n          .attr('stroke-width', '1')\n      } else if (protein.length > 200 || protein.placeholder) {\n        ticks = 2\n        if (protein.placeholder) ticks = 0\n        var smallAxis = svg.append('g')\n          .attr('transform', 'translate(' + offset + ',' + (this.y - 10) + ')')\n          .style('fill', 'gray')\n          .attr('class', 'rowContent')\n          .call(this.d3.svg.axis().scale(this.d3.scale.linear().domain([0, 1]).range([1, width + triangleSize - 1])).tickSize(2, 1).orient('top').ticks(ticks).tickFormat(''))\n\n        smallAxis.selectAll('.tick')\n          .attr('stroke', 'gray')\n          .attr('x1', this.x)\n          .attr('y1', 4) // height of the ticks\n          .attr('y2', -1) // displacement from the line\n          .attr('stroke-width', '1')\n\n        if (protein.placeholder) {\n          smallAxis.style('fill', '#CCCCCC')\n        }\n\n        var axisLabel = svg.append('text')\n          .attr('x', this.x + 0.5 * (width + triangleSize))\n          .attr('y', this.y - 10)\n          .attr('dy', '.35em')\n          .style('text-anchor', 'middle')\n          .attr('transform', 'translate(' + offset + ',0)')\n          .style('fill', 'gray')\n          .style('font-size', '10px')\n          .attr('class', 'rowContent')\n          .text(protein.length)\n\n        svg.append('rect', 'text') // draw a white rectangle\n          .datum(function () { return axisLabel.node().getBBox() })\n          .attr('x', function (d) { return d.x - 2 })\n          .attr('y', function (d) { return d.y })\n          .style('fill', this.backgroundColour)\n          .attr('transform', 'translate(' + offset + ',0)')\n          .attr('class', 'rowContent')\n          .attr('width', function (d) { return d.width + 2 * 2 })\n          .attr('height', function (d) { return d.height })\n\n        axisLabel.node().parentNode.appendChild(axisLabel.node()) // put label above rectangle\n      }\n    },\n\n    drawFragments (svg, fragments, scale, offset) {\n      for (var i = 0; i < fragments.length; i++) {\n        console.log(fragments)\n        var protein = {\n          name: fragments[i].Name,\n          primary_accession: fragments[i].Primary_Accession,\n          synonym: [fragments[i].Short_Name].concat(fragments[i].Short_Name.match(/[0-9]+/g)),\n          Start: fragments[i].Start,\n          Stop: fragments[i].Stop,\n          pdb: null,\n          length: (fragments[i].Stop - fragments[i].Start),\n          id: fragments[i].Primary_Accession + '_' + fragments[i].Short_Name,\n          nonDark: fragments[i].nonDark,\n          description: fragments[i].Description\n        }\n        var len = fragments[i].Stop - fragments[i].Start\n        var height = 20 // the height of the rectangles, and the length of the triangle that is appended. Triangle width is 2*height\n        var triangleSize = height / 1.5\n        var width = this.getResidueSize(scale, len) - triangleSize // length of the residues, minus the width of the appended triangle\n        if (width < 0) {\n          triangleSize = this.getResidueSize(scale, len) // scale down the triangle\n          width = 0\n        }\n        if (i === 0) {\n          this.drawArrow(svg, protein, width, height, triangleSize, offset, scale)\n          offset = offset + width + triangleSize\n        // if the start of the fragment is after the end of the previous fragment (not occupying the same space)\n        } else if (fragments[i].Start >= fragments[i - 1].Stop) {\n          this.drawArrow(svg, protein, width, height, triangleSize, offset, scale) // draw the fragment\n          offset = offset + width + triangleSize\n        }\n      }\n    },\n\n    renderImage (svg, protein, width, height, offset, imgYOffset, link) {\n      // Add the image of the protein if one exists\n      // TODO: trim images and crop them down.\n      // Add a rectangle? pass in the pdb id and link?\n      var imgSize = (width < 120 ? width : 120) + 10\n      var xOffset = protein.Start ? protein.Start : 0\n\n      if (link) {\n        svg.append('rect', 'text') // draw a white rectangle\n          .attr('x', width * 0.5 + xOffset) // for the nsp matching structures, add the starting distance of the fragment\n          .attr('y', this.y + height)\n          .style('fill', this.backgroundColour)\n          .attr('transform', 'translate(' + (offset - imgSize / 2) + ',' + (20 + imgYOffset) + ')')\n          .attr('width', imgSize)\n          .attr('height', 200)\n          .attr('title', link)\n          .on('mouseover', function (d, i) {\n            var d3 = require('d3')\n            d3.select(this).transition().duration(500).style('fill', 'orange')\n            this.style.cursor = 'pointer'\n          })\n          .on('mouseout', function (d, i) {\n            var d3 = require('d3')\n            d3.select(this).transition().duration(500).style('fill', 'white')\n          })\n          .on('click', function () {\n            var d3 = require('d3')\n            var l = d3.select(this).attr('title')\n            if (l) {\n              var baseUrl = window.location.origin\n              window.open(baseUrl + '/' + d3.select(this).attr('title'))\n            }\n          })\n\n        var img = svg.append('svg:image') // add the image of the protein\n          .attr('x', width * 0.5 + xOffset) // for the nsp matching structures, add the starting distance of the fragment\n          .attr('y', this.y + height)\n          .attr('transform', 'translate(' + (offset - imgSize / 2) + ',' + (20 + imgYOffset) + ')') // - half its width to have image anchor center\n          .attr('width', imgSize)\n          .attr('height', imgSize)\n          // need to change this on error function so it doesnt loop infinitely if an image cannot be fetched\n          // .on('error', function () {\n          //   console.log('loading image from server')\n          //   var d3 = require('d3') // if a saved image doesnt exist, get one from server\n          //   d3.select(this).attr('xlink:href', 'https://aquaria.ws:8080/image/' + protein.primary_accession + '/' + protein.pdb + '?color=0x000000&alpha=0')\n          // })\n          .style('pointer-events', 'none')\n\n        if (!protein.dark && protein.pdb) {\n          img.attr('xlink:href', '../images/pdb/' + protein.pdb + '.png')\n        } else {\n          img.attr('xlink:href', '../images/covid19/unknown-structure_1000.png')\n          img.style('visibility', 'hidden')\n        }\n      }\n    },\n\n    splitLargeGaps (clusters) {\n      // split on 100 residues gaps. issues are caused by 188 residues\n      for (var i = 0; i < clusters.length; i++) {\n        var cluster = clusters[i]\n        if (cluster.seq_start.length > 1) { // if there are gaps in the alignment\n          for (var j = 0; j < cluster.seq_start.length - 1; j++) {\n            if (cluster.seq_start[j + 1] - cluster.seq_end[j] > 100) { // if there is a 100 length gap between two starts / stops\n              var newCluster = JSON.parse(JSON.stringify(cluster))\n              newCluster.seq_start = cluster.seq_start.slice(0, j + 1)\n              newCluster.seq_end = cluster.seq_end.slice(0, j + 1)\n              clusters[i].seq_start = cluster.seq_start.slice(j + 1)\n              clusters[i].seq_end = cluster.seq_end.slice(j + 1)\n              clusters.push(newCluster)\n              break\n            }\n          }\n        }\n      }\n      return clusters\n    },\n\n    // add url to the structures, and merge the overlapping structures into the top ranked structure if overlaps by more than 80%? 70%?\n\n    drawMatchingStructures (svg, protein, width, height, triangleSize, offset, s) {\n      var imgYOffset = 30\n      // draw the bottom matching structures axis\n\n      if (protein.clusters) {\n        protein.clusters = this.splitLargeGaps(protein.clusters)\n        protein.clusters = protein.clusters.filter(c => c.seq_start[0] >= 0) // for split proteins, take only the sections that start after 0\n\n        // sort by length of matched structure, largest first\n        protein.clusters.sort((a, b) => (a.cluster_size > b.cluster_size) ? -1 : ((b.cluster_size > a.cluster_size) ? 1 : 0))\n\n        var i = 1\n        // for each protein j, check all later proteins i and merge any compatible ones.\n        while (i < protein.clusters.length) {\n          var j = 0\n\n          var spliced = false\n\n          // if i not merged into j\n          // TODO: does not currently filter out the same pdb id created from splitting.\n          while (j < i && !spliced) {\n            // get the start and end of both sequences\n            var start1 = Math.min(...protein.clusters[j].seq_start)\n            var start2 = Math.min(...protein.clusters[i].seq_start)\n            var end1 = Math.max(...protein.clusters[j].seq_end)\n            var end2 = Math.max(...protein.clusters[i].seq_end)\n            // if i is within j, merge i into j\n            if (start1 <= start2 && end1 >= end2) {\n              protein.clusters[j].cluster_size += protein.clusters[i].cluster_size\n              protein.clusters.splice(i, 1)\n              spliced = true\n            // otherwise merge i into j if there is a significant % overlap\n            } else if ((start1 > start2 && start1 - start2 < 0.9 * (end2 - start2)) ||\n                      (end1 < end2 && end2 - end1 < 0.9 * (end2 - start2))) { // (Math.abs(start1 - start2) + Math.abs(end1 - end2) < 0.8 * (end1 - start1)) {\n              protein.clusters[j].cluster_size += protein.clusters[i].cluster_size\n              // modify the start and end locations of the new structure\n              protein.clusters[j].seq_start = [Math.min(start1, start2)]\n              protein.clusters[j].seq_end = [Math.max(end1, end2)]\n              protein.clusters.splice(i, 1)\n              spliced = true\n            }\n            j++\n          }\n\n          if (!spliced) {\n            i++\n          }\n        }\n\n        // TODO CURRENTLY JUST REMOVES ALL REMAINING < 20 RESIDUES in length\n        protein.clusters = protein.clusters.filter(c => Math.max(...c.seq_end) - Math.min(...c.seq_start) > 20)\n\n        protein.clusters.forEach(cluster => {\n          var start = this.getResidueSize(s, cluster.seq_start[0])\n          if (cluster.seq_start < 0) {\n            return\n          }\n          var end = this.getResidueSize(s, cluster.seq_end[cluster.seq_end.length - 1])\n          if (cluster.seq_end > protein.length) {\n            return\n          }\n\n          var matchingScale = this.d3.scale.linear()\n            .domain([0, 2]) // This is what is written on the Axis: from 0 to length of residue\n            // .range([2, width + triangleSize - 2]) // This is where the axis is placed: from start to end of triangle. Add a tiny bit of spacing between the two\n            .range([start + 1, end - 1]) // leave a small gap\n            .nice()\n\n          var matchingAxis = svg\n            .append('g')\n            .attr('transform', 'translate(' + offset + ',' + (this.y + height + 10) + ')') // This controls the vertical position of the Axis\n            .attr('style', '')\n            .style('fill', this.green)\n            .style('font-size', '10px')\n            .call(this.d3.svg.axis().scale(matchingScale).tickSize(0, 1).tickFormat('').orient('bottom').ticks(2)) // render only two ticks\n\n          // Create a long down tick in the centre of the bottom axis\n          this.d3.select(matchingAxis.selectAll('.tick')[0][1])\n            .attr('stroke', this.green)\n            .attr('x1', this.x)\n            .attr('x2', this.x)\n            .attr('y2', 0)\n            .attr('y1', imgYOffset)\n            .attr('stroke-width', '1')\n\n          var matchingLabel = svg.append('text') // set this as var la\n            .datum(function () { return matchingAxis.node().getBBox() })\n            // .attr('x', this.x + 0.5 * (width + triangleSize))\n            .attr('x', function (d) { return d.x + 0.5 * d.width })\n            .attr('y', this.y + height + imgYOffset + 5) // the axis offset from matchingAxis\n            .attr('dy', '.35em')\n            .style('text-anchor', 'middle')\n            .attr('transform', 'translate(' + offset + ',0)')\n            .style('fill', 'white')\n            .style('font-size', '12px')\n            .text(cluster.cluster_size)\n            .attr('title', protein.primary_accession + '/' + cluster.pdb_id)\n            .style('pointer-events', 'none')\n\n          svg.append('rect', 'text') // draw a green round rectangle\n            .datum(function () { return matchingLabel.node().getBBox() })\n            .attr('x', function (d) { return d.x - 4 })\n            .attr('y', function (d) { return d.y })\n            .attr('rx', 6)\n            .attr('ry', 10)\n            .style('fill', this.green)\n            .attr('transform', 'translate(' + offset + ',0)')\n            .attr('width', function (d) { return d.width + 4 * 2 })\n            .attr('height', function (d) { return d.height })\n            .attr('title', protein.primary_accession + '/' + cluster.pdb_id)\n            .on('click', function () {\n              var d3 = require('d3')\n              console.log(d3.select(this).attr('title'))\n              var baseUrl = window.location.origin\n              window.open(baseUrl + '/' + d3.select(this).attr('title'))\n            })\n            .on('mouseover', function () {\n              this.style.cursor = 'pointer'\n            })\n\n          matchingLabel.node().parentNode.appendChild(matchingLabel.node()) // put label above rectangle\n\n          var imageObj = {\n            name: cluster.pdb_id,\n            primary_accession: protein.primary_accession,\n            Start: start,\n            Stop: end,\n            pdb: cluster.pdb_id,\n            length: (end - start),\n            id: protein.primary_accession + '_' + cluster.pdb_id,\n            nonDark: true\n          }\n          // TODO: white rectangle behind render image?\n          this.renderImage(svg, imageObj, (end - start), height, offset, imgYOffset, protein.primary_accession + '/' + cluster.pdb_id)\n        })\n      } else {\n        this.renderImage(svg, protein, width, height, offset, imgYOffset, '')\n      }\n    },\n\n    drawExpandButton (svg) {\n      // Create the expand and collapse button\n      var expandButton = svg.append('svg:rect')\n        .attr('x', 0)\n        .attr('y', 0)\n        .attr('stroke', '#CCCCCC')\n        .attr('fill', '#CCCCCC')\n        .attr('opacity', 0.80)\n        .attr('width', window.innerWidth)\n        .attr('height', 30)\n        .attr('id', 'expand')\n\n      if (window.innerHeight > window.innerWidth) {\n        expandButton.attr('display', 'none')\n      }\n\n      expandButton.on('mouseover', function (d, i) {\n        var d3 = require('d3')\n        d3.select(this.parentNode).select('path#expand:last-child').attr('stroke', 'orange')\n        this.style.cursor = 'pointer'\n      })\n        .on('mouseout', function (d, i) {\n          var d3 = require('d3')\n          d3.select(this.parentNode).select('path#expand:last-child').attr('stroke', '#CCCCCC')\n        })\n\n      expandButton.on('click', function (d, i) {\n        var d3 = require('d3')\n\n        if (this.parentNode.className.baseVal.split(' ').indexOf('open') > -1) { // if current row is open\n          d3.select(this.parentNode).classed('open', false)\n          d3.selectAll('.row').transition().duration(1000).attr('viewBox', '0 0 960 35')\n          d3.selectAll('.rowContent').transition().duration(1000).attr('opacity', 0)\n        } else {\n          d3.selectAll('.open').selectAll('rect#expand').attr('opacity', 0)\n          d3.selectAll('.open').selectAll('rect#expand').attr('display', 'block')\n          d3.selectAll('.open').selectAll('rect#expand').transition().duration(1000).attr('opacity', 0.8)\n\n          d3.selectAll('.open').selectAll('path#expand').attr('opacity', 0)\n          d3.selectAll('.open').selectAll('path#expand').attr('display', 'block')\n          d3.selectAll('.open').selectAll('path#expand').transition().duration(1000).attr('opacity', 1)\n\n          d3.selectAll('.arrow').transition().duration(1000).attr('transform', function () {\n            var transform = d3.transform(d3.select(this).attr('transform'))\n            return 'translate(' + transform.translate[0] + ', -10)'\n          })\n\n          d3.selectAll('.row').classed('open', false)\n          d3.selectAll('.row').transition().duration(1000).attr('viewBox', '0 0 960 35')\n          d3.selectAll('.rowContent').transition().duration(1000).attr('opacity', 0)\n\n          d3.select(this.parentNode).classed('open', true)\n          d3.select(this).attr('display', 'none')\n          // d3.selectAll('.open').transition().duration(1000).attr('viewBox', '0 0 960 ' + viewboxHeight)\n          d3.select(this.parentNode).selectAll('path#expand').attr('display', 'none')\n          d3.selectAll('.open').transition().duration(1000).attr('viewBox', '0 0 960 360')\n          d3.selectAll('.open .rowContent').transition().duration(1000).attr('opacity', 1)\n\n          d3.select(this.parentNode).selectAll('.arrow').transition().duration(1000).attr('transform', function () {\n            var transform = d3.transform(d3.select(this).attr('transform'))\n            return 'translate(' + transform.translate[0] + ', 0)'\n          })\n\n          // change the direction of the semi-circle arrows\n          var rows = d3.selectAll('.row')\n          var foundOpen = false\n          var topOpen = true\n          for (var j = 0; j < rows[0].length; j++) {\n            if (d3.select(rows[0][j]).classed('open')) {\n              foundOpen = true\n            }\n            if (!foundOpen) {\n              topOpen = false\n              // document.getElementById('container').style.padding = '8px 0px 0px 0px'\n              d3.select('#container').transition().duration(1000).style('padding', '8px 0px 0px 0px')\n              d3.select(rows[0][j]).select('path#expand').attr('transform', 'translate(' + 480 + ',' + 30 + ')')\n              d3.select(rows[0][j]).select('path#expand:last-child').attr('transform', 'scale(1, -1) translate(' + 480 + ', -' + 30 + ')')\n            } else {\n              d3.select(rows[0][j]).select('path#expand').attr('transform', 'scale(1, -1) translate(' + 480 + ', -' + 0 + ')')\n              d3.select(rows[0][j]).select('path#expand:last-child').attr('transform', 'translate(' + 480 + ',' + 0 + ')')\n            }\n          }\n          if (topOpen) {\n            // document.getElementById('container').style.padding = '0px 0px 0px 0px'\n            d3.select('#container').transition().duration(1000).style('padding', '0px 0px 0px 0px')\n          }\n        }\n      })\n\n      this.renderHalfMoon(svg, 480, 0)\n    },\n\n    renderHalfMoon (svg, x, y) {\n      var arcGenerator = this.d3.svg.arc()\n        .outerRadius(20)\n        .innerRadius(0)\n        .startAngle(-Math.PI / 2)\n        .endAngle(Math.PI / 2)\n\n      var semicircle = svg.append('path')\n        .attr('transform', 'scale(1, -1) translate(' + x + ', -' + y + ')')\n        .attr('d', arcGenerator())\n        .attr('fill', 'gray')\n        .attr('id', 'expand')\n        .on('mouseover', function (d, i) {\n          var d3 = require('d3')\n          d3.select(this.parentNode).select('path#expand:last-child').attr('stroke', 'orange')\n          this.style.cursor = 'pointer'\n        })\n        .on('mouseout', function (d, i) {\n          var d3 = require('d3')\n          d3.select(this.parentNode).select('path#expand:last-child').attr('stroke', '#CCCCCC')\n        })\n\n      var arrow = svg.append('path')\n        .attr('transform', 'translate(' + x + ',' + y + ')')\n        .attr('d', 'M-8 12 0 5 8 12')\n        .attr('stroke', '#CCCCCC')\n        .attr('stroke-width', 3)\n        .attr('fill', 'transparent')\n        .attr('id', 'expand')\n        .on('mouseover', function (d, i) {\n          var d3 = require('d3')\n          d3.select(this).attr('stroke', 'orange')\n          this.style.cursor = 'pointer'\n        })\n        .on('mouseout', function (d, i) {\n          var d3 = require('d3')\n          d3.select(this).attr('stroke', '#CCCCCC')\n        })\n\n      arrow.on('click', function (d, i) {\n        var d3 = require('d3')\n\n        d3.selectAll('.open').selectAll('rect#expand').attr('opacity', 0)\n        d3.selectAll('.open').selectAll('rect#expand').attr('display', 'block')\n        d3.selectAll('.open').selectAll('rect#expand').transition().duration(1000).attr('opacity', 0.8)\n\n        d3.selectAll('.open').selectAll('path#expand').attr('opacity', 0)\n        d3.selectAll('.open').selectAll('path#expand').attr('display', 'block')\n        d3.selectAll('.open').selectAll('path#expand').transition().duration(1000).attr('opacity', 1)\n\n        d3.selectAll('.row').classed('open', false)\n        d3.selectAll('.row').transition().duration(1000).attr('viewBox', '0 0 960 35')\n        d3.selectAll('.rowContent').transition().duration(1000).attr('opacity', 0)\n\n        d3.selectAll('.arrow').transition().duration(1000).attr('transform', function () {\n          var transform = d3.transform(d3.select(this).attr('transform'))\n          return 'translate(' + transform.translate[0] + ', -10)'\n        })\n\n        d3.selectAll('.row').classed('open', false)\n        d3.selectAll('.row').transition().duration(1000).attr('viewBox', '0 0 960 35')\n        d3.selectAll('.rowContent').transition().duration(1000).attr('opacity', 0)\n\n        d3.select(this.parentNode).classed('open', true)\n        d3.select(this.parentNode).selectAll('rect#expand').attr('display', 'none')\n        d3.select(this.parentNode).selectAll('path#expand').attr('display', 'none')\n        d3.selectAll('.open').transition().duration(1000).attr('viewBox', '0 0 960 360')\n        d3.selectAll('.open .rowContent').transition().duration(1000).attr('opacity', 1)\n\n        d3.select(this.parentNode).selectAll('.arrow').transition().duration(1000).attr('transform', function () {\n          var transform = d3.transform(d3.select(this).attr('transform'))\n          return 'translate(' + transform.translate[0] + ', 0)'\n        })\n\n        // change the direction of the semi-circle arrows\n        var rows = d3.selectAll('.row')\n        var foundOpen = false\n        var topOpen = true\n        for (var j = 0; j < rows[0].length; j++) {\n          if (d3.select(rows[0][j]).classed('open')) {\n            foundOpen = true\n          }\n          if (!foundOpen) {\n            topOpen = false\n            d3.select('#container').transition().duration(1000).style('padding', '8px 0px 0px 0px')\n            d3.select(rows[0][j]).select('path#expand').attr('transform', 'translate(' + 480 + ',' + 30 + ')')\n            d3.select(rows[0][j]).select('path#expand:last-child').attr('transform', 'scale(1, -1) translate(' + 480 + ', -' + 30 + ')')\n          } else {\n            d3.select('#container').transition().duration(1000).style('padding', '0px 0px 0px 0px')\n            d3.select(rows[0][j]).select('path#expand').attr('transform', 'scale(1, -1) translate(' + 480 + ', -' + 0 + ')')\n            d3.select(rows[0][j]).select('path#expand:last-child').attr('transform', 'translate(' + 480 + ',' + 0 + ')')\n          }\n        }\n        if (topOpen) {\n          d3.select('#container').transition().duration(1000).style('padding', '0px 0px 0px 0px')\n        }\n      })\n\n      semicircle.on('click', function (d, i) {\n        var d3 = require('d3')\n\n        d3.selectAll('.open').selectAll('rect#expand').attr('opacity', 0)\n        d3.selectAll('.open').selectAll('rect#expand').attr('display', 'block')\n        d3.selectAll('.open').selectAll('rect#expand').transition().duration(1000).attr('opacity', 0.8)\n\n        d3.selectAll('.open').selectAll('path#expand').attr('opacity', 0)\n        d3.selectAll('.open').selectAll('path#expand').attr('display', 'block')\n        d3.selectAll('.open').selectAll('path#expand').transition().duration(1000).attr('opacity', 1)\n\n        d3.selectAll('.arrow').transition().duration(1000).attr('transform', function () {\n          var transform = d3.transform(d3.select(this).attr('transform'))\n          return 'translate(' + transform.translate[0] + ', -10)'\n        })\n\n        d3.selectAll('.row').classed('open', false)\n        d3.selectAll('.row').transition().duration(1000).attr('viewBox', '0 0 960 35')\n        d3.selectAll('.rowContent').transition().duration(1000).attr('opacity', 0)\n\n        d3.select(this.parentNode).classed('open', true)\n        d3.select(this.parentNode).selectAll('rect#expand').attr('display', 'none')\n        d3.select(this.parentNode).selectAll('path#expand').attr('display', 'none')\n        d3.selectAll('.open').transition().duration(1000).attr('viewBox', '0 0 960 360')\n        d3.selectAll('.open .rowContent').transition().duration(1000).attr('opacity', 1)\n\n        d3.select(this.parentNode).selectAll('.arrow').transition().duration(1000).attr('transform', function () {\n          var transform = d3.transform(d3.select(this).attr('transform'))\n          return 'translate(' + transform.translate[0] + ', 0)'\n        })\n\n        // change the direction of the semi-circle arrows\n        var rows = d3.selectAll('.row')\n        var foundOpen = false\n        var topOpen = true\n        for (var j = 0; j < rows[0].length; j++) {\n          if (d3.select(rows[0][j]).classed('open')) {\n            foundOpen = true\n          }\n          if (!foundOpen) {\n            topOpen = false\n            d3.select('#container').transition().duration(1000).style('padding', '8px 0px 0px 0px')\n            d3.select(rows[0][j]).select('path#expand').attr('transform', 'translate(' + 480 + ',' + 30 + ')')\n            d3.select(rows[0][j]).select('path#expand:last-child').attr('transform', 'scale(1, -1) translate(' + 480 + ', -' + 30 + ')')\n          } else {\n            d3.select(rows[0][j]).select('path#expand').attr('transform', 'scale(1, -1) translate(' + 480 + ', -' + 0 + ')')\n            d3.select(rows[0][j]).select('path#expand:last-child').attr('transform', 'translate(' + 480 + ',' + 0 + ')')\n          }\n        }\n        if (topOpen) {\n          d3.select('#container').transition().duration(1000).style('padding', '0px 0px 0px 0px')\n        }\n      })\n    },\n\n    initialDisplay (isResize) { // Change the display if the window is resized\n      if (window.innerHeight > window.innerWidth) { // expand everything\n        this.d3.selectAll('rect#expand').attr('display', 'none')\n        this.d3.selectAll('path#expand').attr('display', 'none')\n        this.d3.selectAll('.row').classed('open', true)\n        this.d3.selectAll('.open').transition().duration(1000).attr('viewBox', '0 0 960 360')\n        this.d3.selectAll('.open .rowContent').transition().duration(1000).attr('opacity', 1)\n        this.d3.selectAll('.arrow').transition().duration(1000).attr('transform', function () {\n          var d3 = require('d3')\n          var transform = d3.transform(d3.select(this).attr('transform'))\n          return 'translate(' + transform.translate[0] + ', 0)'\n        })\n      } else if (window.innerHeight < 0.25 * window.innerWidth) { // collapse everything\n        this.d3.selectAll('rect#expand').attr('display', 'block')\n        this.d3.selectAll('path#expand').attr('display', 'block')\n        this.d3.selectAll('.row').classed('open', false)\n        this.d3.selectAll('.row').transition().duration(500).attr('viewBox', '0 0 960 35')\n        this.d3.selectAll('.rowContent').transition().duration(500).attr('opacity', 0)\n        this.d3.selectAll('.arrow').transition().duration(1000).attr('transform', function () {\n          var d3 = require('d3')\n          var transform = d3.transform(d3.select(this).attr('transform'))\n          return 'translate(' + transform.translate[0] + ', -10)'\n        })\n      } else {\n        var opened = this.d3.select('.open')\n        this.d3.selectAll('rect#expand').attr('display', 'block')\n        this.d3.selectAll('path#expand').attr('display', 'block')\n        this.d3.selectAll('.row').classed('open', false)\n        this.d3.selectAll('.row').transition().duration(500).attr('viewBox', '0 0 960 35')\n        this.d3.selectAll('.rowContent').transition().duration(500).attr('opacity', 0)\n\n        if (!isResize) {\n          opened = this.d3.select('.row').classed('open', true)\n          this.d3.select('rect#expand').attr('display', 'none')\n          opened.selectAll('path#expand').attr('display', 'none')\n          this.d3.selectAll('.open').transition().duration(500).attr('viewBox', '0 0 960 360')\n          this.d3.selectAll('.open .rowContent').transition().duration(500).attr('opacity', 1)\n          this.d3.selectAll('.arrow').transition().duration(1000).attr('transform', function () {\n            var d3 = require('d3')\n            var transform = d3.transform(d3.select(this).attr('transform'))\n            return 'translate(' + transform.translate[0] + ', -10)'\n          })\n          opened.selectAll('.arrow').transition().duration(1000).attr('transform', function () {\n            var d3 = require('d3')\n            var transform = d3.transform(d3.select(this).attr('transform'))\n            return 'translate(' + transform.translate[0] + ', 0)'\n          })\n        } else {\n          opened.classed('open', true)\n          opened.select('rect#expand').attr('display', 'none')\n          opened.selectAll('path#expand').attr('display', 'none')\n          opened.transition().duration(1000).attr('viewBox', '0 0 960 360')\n          this.d3.selectAll('.open .rowContent').transition().duration(500).attr('opacity', 1)\n          this.d3.selectAll('.arrow').transition().duration(1000).attr('transform', function () {\n            var d3 = require('d3')\n            var transform = d3.transform(d3.select(this).attr('transform'))\n            return 'translate(' + transform.translate[0] + ', -10)'\n          })\n          opened.selectAll('.arrow').transition().duration(1000).attr('transform', function () {\n            var d3 = require('d3')\n            var transform = d3.transform(d3.select(this).attr('transform'))\n            return 'translate(' + transform.translate[0] + ', 0)'\n          })\n\n          // change the direction of the semi-circle arrows\n          var rows = this.d3.selectAll('.row')\n          var foundOpen = false\n          var topOpen = true\n          for (var j = 0; j < rows[0].length; j++) {\n            if (this.d3.select(rows[0][j]).classed('open')) {\n              foundOpen = true\n            }\n            if (!foundOpen) {\n              topOpen = false\n              this.d3.select('#container').transition().duration(1000).style('padding', '8px 0px 0px 0px')\n              this.d3.select(rows[0][j]).select('path#expand').attr('transform', 'translate(' + 480 + ',' + 30 + ')')\n              this.d3.select(rows[0][j]).select('path#expand:last-child').attr('transform', 'scale(1, -1) translate(' + 480 + ', -' + 30 + ')')\n            } else {\n              this.d3.select(rows[0][j]).select('path#expand').attr('transform', 'scale(1, -1) translate(' + 480 + ', -' + 0 + ')')\n              this.d3.select(rows[0][j]).select('path#expand:last-child').attr('transform', 'translate(' + 480 + ',' + 0 + ')')\n            }\n          }\n          if (topOpen) {\n            this.d3.select('#container').transition().duration(1000).style('padding', '0px 0px 0px 0px')\n          }\n        }\n      }\n    },\n\n    // algorithm to split the proteins list into three lists as close to equal as possible.\n    // It adds a new number to the list that is 1/3 the sum of all the numbers\n    // then it splits the new list into two roughly equal parts using parititionToTwo\n    // Remove the placeholder number from the part that contains it, and then split the other part into two with parititionToTwo\n    partitionToThree (list) {\n      var totalSum = this.getListSum(list)\n      var newNum = totalSum / 3\n      list.push({ name: 'newPlaceholderNum', length: newNum })\n      var twoPart = this.partitionToTwo(list)\n      twoPart[1].pop()\n\n      var threePart = this.partitionToTwo(twoPart[0])\n      return [threePart[0], threePart[1], twoPart[1]]\n    },\n\n    // This algorithm runs into weirdness if the last element is very large, as it would only contain placeholder num\n    // can get around it by just skipping any empty lists in loadShape or forcing each list to contain at least 1 element that isnt placeholder num\n    partitionToTwo (list) {\n      var totalSum = this.getListSum(list)\n      var index = list.length - 1\n      while (this.getListSum(list.slice(index)) < (totalSum / 2)) {\n        if (this.getListSum(list.slice(index - 1)) >= (totalSum / 2)) {\n          break\n        }\n        index--\n      }\n      return [list.slice(0, index), list.slice(index)]\n    },\n\n    getListSum (list) { // takes in data, and returns the sum of all elements .length\n      return list.reduce(function (prev, cur) { return prev + cur.length }, 0)\n    },\n\n    // Takes in an ID of the organism, and all the structures. Sorts all the structures by genomic position and returns it as a list\n    async sortStructures (organismId, allStructures) {\n      var pos = await this.getPositions(organismId)\n      for (let index = 0; index < allStructures.length; index++) {\n        allStructures[index].position = pos[allStructures[index].primary_accession]\n      }\n      allStructures.sort(function (first, second) {\n        return first.position - second.position\n      })\n      return allStructures\n    },\n\n    // checks if any proteins overlap in genomic position, and cuts them when necessary\n    async cleanProteins (proteins) {\n      var positionArrays = {}\n      proteins.forEach(function (protein) {\n        // Get the array for this position, if any\n        var positionArray = positionArrays[protein.position]\n        if (!positionArray) {\n          // There wasn't one, create it\n          positionArray = positionArrays[protein.position] = []\n        }\n        // Add this entry\n        positionArray.push(protein)\n      })\n\n      var proteinsCleaned = []\n      for (let i = 1; i <= Object.keys(positionArrays).length; i++) {\n        if (positionArrays[i].length !== 1) { // if there are multiple proteins at the same position\n          let longest\n          positionArrays[i].forEach(function (p) {\n            if (!longest) {\n              longest = p\n            } else if (p.length > longest.length) {\n              longest = p\n            }\n          })\n\n          var cur = longest\n          for (let n = 0; n < positionArrays[i].length; n++) {\n            if (positionArrays[i][n].sequence !== longest.sequence) {\n              // find longest common substring and delete it from cur\n              var substring = this.findSubstring(positionArrays[i][n].sequence, longest.sequence)\n              cur.sequence = cur.sequence.replace(substring, '')\n              cur.length = cur.sequence.length\n              cur.name = cur.name + ' (split)'\n              positionArrays[i][n].continuous = true\n              proteinsCleaned.push(positionArrays[i][n])\n\n              // if the protein has fragments, remove duplicate fragments from the longest protein\n              if (cur.fragments.length > 0) {\n                positionArrays[i][n].fragments.forEach(fragment => {\n                  cur.fragments = cur.fragments.filter(function (e) { return e.Name !== fragment.Name })\n                })\n              }\n\n              // change the starts and stops to be relative to the split protein\n              for (var k = 0; k < cur.fragments.length; k++) {\n                cur.fragments[k].Start = cur.fragments[k].Start - positionArrays[i][n].length\n                cur.fragments[k].Stop = cur.fragments[k].Stop - positionArrays[i][n].length\n                if (cur.fragments[k].Start < 0) {\n                  cur.fragments[k].Start = 0\n                }\n              }\n              cur.fragments = cur.fragments.filter(function (e) { return e.Start >= 0 })\n\n              // clean the non-dark regions data\n              var newNonDark = []\n              for (var j = 0; j < cur.nonDark.length; j++) {\n                if (cur.nonDark[j].Stop > positionArrays[i][n].length) {\n                  var start = cur.nonDark[j].Start - positionArrays[i][n].length\n                  if (start < 0) {\n                    start = 0\n                  }\n                  var stop = cur.nonDark[j].Stop - positionArrays[i][n].length\n                  newNonDark.push({ Primary_Accession: cur.primary_accession, Start: start, Stop: stop })\n                }\n              }\n\n              // clean the matching structure clusters data\n              if (cur.clusters) {\n                for (var cluster = 0; cluster < cur.clusters.length; cluster++) {\n                  for (var indexStart = 0; indexStart < cur.clusters[cluster].seq_start.length; indexStart++) {\n                    cur.clusters[cluster].seq_start[indexStart] = cur.clusters[cluster].seq_start[indexStart] - positionArrays[i][n].length\n                  }\n                  for (var indexEnd = 0; indexEnd < cur.clusters[cluster].seq_end.length; indexEnd++) {\n                    cur.clusters[cluster].seq_end[indexEnd] = cur.clusters[cluster].seq_end[indexEnd] - positionArrays[i][n].length\n                  }\n                }\n              }\n\n              cur.nonDark = newNonDark\n            }\n          }\n\n          cur.continuous = false\n          proteinsCleaned.push(cur) // append the modified longest protein to the protein list\n        } else {\n          positionArrays[i][0].continuous = false\n          proteinsCleaned.push(positionArrays[i][0])\n        }\n      }\n      return proteinsCleaned\n    },\n\n    findSubstring (a1, a2) {\n      var L = a1.length\n      var i = 0\n      while (i < L && a1.charAt(i) === a2.charAt(i)) i++\n      return a1.substring(0, i)\n    },\n\n    // get the genomic position of a particular protein using primary accession\n    async getPositions (id) {\n      var posUrl = `${window.BACKEND}/getGenomicPosition/${id}`\n      var r = {}\n      await axios({\n        method: 'get',\n        url: posUrl\n      })\n        .then(response => {\n          for (let i = 0; i < response.data.length; i++) {\n            r[response.data[i].primary_accession] = response.data[i].position_index\n          }\n        })\n      if (Object.keys(r).length === 0) {\n        console.log('cannot get genomic positions of ' + id + ' in getPositions() Coverage.vue')\n      }\n      return r\n    },\n\n    async getProteinSynonyms (proteins) {\n      for (var i = 0; i < proteins.length; i++) {\n        var synonym = await this.getSynonym(proteins[i].primary_accession)\n        proteins[i].synonym = synonym\n      }\n      return proteins\n    },\n\n    async getSynonym (id) {\n      var synUrl = `${window.BACKEND}/getProteinSynonyms/${id}`\n      var synonyms = []\n      await axios({\n        method: 'get',\n        url: synUrl\n      })\n        .then(response => {\n          if (response.data.Synonym) {\n            synonyms.push(response.data.Synonym) // TODO: if this gene name is short enough display it with priority over other synonyms\n          }\n          synonyms = synonyms.concat(response.data.synonyms)\n        })\n      return synonyms\n    },\n\n    async getMatchingStructures (proteins) {\n      for (var i = 0; i < proteins.length; i++) {\n        var loadRequest = {\n          selector: [proteins[i].primary_accession]\n        }\n        console.log(loadRequest)\n        var urlMatching = `${window.BACKEND}/get_matching_structures`\n        await axios({\n          method: 'get',\n          url: urlMatching,\n          params: loadRequest\n        })\n          .then(function (response) {\n            console.log(response)\n            if (response.data === '\\'Dark\\' protein') {\n              proteins[i].clusters = 0\n              proteins[i].pdb = null\n            } else {\n              proteins[i].clusters = response.data.clusters\n              proteins[i].pdb = response.data.Best_PDB.pdb_id\n            }\n          })\n      }\n      return this.cleanProteins(proteins)\n    },\n\n    countMatchingStructures (clusters) {\n      if (clusters === 0) {\n        return 0\n      } else {\n        return clusters.reduce(function (prev, cur) { return prev + cur.members.length }, 0)\n      }\n    },\n\n    async getNonDarkRegions (proteins) {\n      for (var i = 0; i < proteins.length; i++) {\n        console.log(proteins[i].primary_accession)\n        // the old getNonDark regions call\n        // var nonDark = await this.getNonDark(proteins[i].primary_accession)\n        var nonDark = await this.getNonDarkCoverage(proteins[i].primary_accession)\n        proteins[i].nonDark = nonDark\n      }\n      return proteins\n    },\n\n    // the old getNonDark Regions call\n    async getNonDark (id) {\n      var url = `${window.BACKEND}/getNonDarkRegions/${id}`\n      // var url = 'http://localhost:8010/getNonDarkRegions/' + id\n      var nonDark = []\n      await axios({\n        method: 'get',\n        url: url\n      })\n        .then(response => {\n          if (response.data) {\n            nonDark = response.data\n          }\n        })\n      return nonDark\n    },\n\n    // new getNonDark regions with auto updates\n    async getNonDarkCoverage (primaryAccession) {\n      var loadRequest = {\n        selector: [primaryAccession]\n      }\n      var urlCoverage = `${window.BACKEND}/getCoverageMap`\n      var nonDark = {}\n      var nonDarkCleaned = []\n      await axios({\n        method: 'get',\n        url: urlCoverage,\n        params: loadRequest\n      })\n        .then(response => {\n          if (response.data !== '\\'Dark\\' protein') {\n            nonDark = response.data\n            console.log('nondarK: ', nonDark)\n            for (var i = 0; i < nonDark.seq_start.length; i++) {\n              nonDarkCleaned.push({ Start: nonDark.seq_start[i], Stop: nonDark.seq_end[i] }) // if there is no seq end, length of protein is the end!\n            }\n          }\n        })\n      return nonDarkCleaned\n    },\n\n    // Gets all the structures of a particular organism, removes irrelevant information\n    async getStructures (organismId, allStructures) {\n      var proteins = []\n      var purl\n      allStructures = await this.sortStructures(organismId, allStructures)\n\n      for (let index = 0; index < allStructures.length; index++) {\n        allStructures[index].count = 0\n\n        var loadRequest = {\n          selector: [allStructures[index].primary_accession]\n        }\n        purl = `${window.BACKEND}/get_3D_alignment`\n        await axios({\n          method: 'get',\n          url: purl,\n          params: loadRequest\n        })\n          .then(response => {\n            var sequence = ''\n            if (response.data.sequences) {\n              sequence = response.data.sequences[0]\n              var seqLength = sequence.length\n              console.log('Loaded ', allStructures[index].synonym, seqLength)\n              proteins.push({ name: allStructures[index].synonym, primary_accession: allStructures[index].primary_accession, sequence: sequence.sequence, position: allStructures[index].position, length: seqLength })\n            } else {\n              // this is a dark protein\n              sequence = response.data[allStructures[index].primary_accession]\n              proteins.push({ name: allStructures[index].synonym, primary_accession: allStructures[index].primary_accession, sequence: sequence.sequence, position: allStructures[index].position, length: sequence.length })\n            }\n            return this.getFragments(allStructures[index].primary_accession) // get fragments of the structure\n          }).then(fragments => {\n            proteins[index].fragments = fragments\n          })\n      }\n      proteins = await this.getNonDarkRegions(proteins) // .then(response => { return this.cleanProteins(response) })\n      return proteins\n    },\n\n    async getFragments (id) {\n      var posUrl = `${window.BACKEND}/getProteinFragments/${id}`\n      var r = []\n      await axios({\n        method: 'get',\n        url: posUrl\n      })\n        .then(response => {\n          if (response.data.length > 0) {\n            r = response.data\n          }\n        })\n      return r\n    }\n  }\n}\n</script>\n\n<style scoped>\n.v-lazy-image{\n  width: 100vw;\n}\n\n.infoLink{\n    position: absolute;\n    top: 10px;\n    height: 42px;\n    right: 125px;\n}\n\n/* Christian's work */\n@media screen and (min-width: 550px){\n  #matrix{\n    height: 99vh;\n    background: #c0c0c0 url('../assets/img/Resource-banner.svg') no-repeat calc(6px + 0.4vw) calc(8px + 0.1vh);\n    background-size: calc(115px + 5vw) calc(26px + 2vw);\n    text-align: center;\n  }\n}\n @media screen and (max-width: 549px){\n   #matrix{\n  height: 99vh;\n  background: #c0c0c0 url('../assets/img/AquariaLogo.svg') no-repeat calc(6px + 0.4vw) calc(8px + 0.1vh);\n  background-size: calc(130px + 1.5vw) calc(35px + 1.5vw);\n  text-align: center;\n  }\n}\n/* general layout and colors */\n    body {\n        margin: 0;\n        padding: 0;\n        background: #bbbbbb;\n        overflow: hidden;\n    }\n\n    div.no_match h3 {\n        font-weight:400;\n    }\n\n    .rowContent {\n      display: none;\n    }\n\n    .open .rowContent {\n      position: relative;\n      width: 100%;\n      height: 100%;\n      display: block;\n    }\n\n    .arrow {\n      cursor: pointer;\n    }\n\n    /* * * * * CSS grid * * * * */\n    #container {\n        /* display: grid; c0c0c0 */\n        grid-gap: 6px;\n        background: #ffffff;\n        padding: 0px; /* removed the padding here */\n        height: 95%;\n        margin: 0 auto;\n        /* overflow: scroll; */\n    }\n\n    /* TYPOGRAPHY */\n    /* responsive sizes */\n\n    @media screen and (min-width: 320px) {\n        #matrix .cell {\n            font-size: calc(8px + 6 * ((100vw - 320px) / 680));\n        }\n    }\n    /* Alignment */\n    h1, h3, p {\n        margin: 0;\n    }\n    span#count {\n        color:#383838;\n        font-weight: 300;\n        font-size: 60%;\n        margin-left: 20px;\n        overflow: hidden;\n    }\n    a span#help {\n        display:inline-block;\n        color:#ffffff;\n        background:#0876d6;\n        font-weight: 700;\n        font-size: 80%;\n        border-radius: 50%;\n        margin-left: 20px;\n        width: 1.2em;\n        line-height: 1.2em;\n    }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Coverage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Coverage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Coverage.vue?vue&type=template&id=69cdfee8&scoped=true&\"\nimport script from \"./Coverage.vue?vue&type=script&lang=js&\"\nexport * from \"./Coverage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Coverage.vue?vue&type=style&index=0&id=69cdfee8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"69cdfee8\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/search_dark.012aee91.png\";","var LRU = require('lru-cache')\n\nvar TopTen = function (id, MAX_SIZE) {\n  var that = this\n  this.id = id\n  var existing = localStorage.getItem(this.id)\n  this.cache = new LRU(MAX_SIZE)\n  if (existing === null) {\n  } else {\n    var entries = JSON.parse(existing)\n    entries.forEach(function (entry) {\n\t\t  that.cache.set(entry.key, entry.value)\n    })\n  }\n}\n\nTopTen.prototype.submitFired = function (name, primary_accession, pdb_id) {\n  var last = { name: name, primary_accession: primary_accession, pdb_id: pdb_id }\n  this.cache.set(primary_accession + pdb_id, last)\n  this.save()\n}\n\nTopTen.prototype.save = function () {\n  var saveArray = []\n  this.cache.forEach(function (value, key) {\n    saveArray.push({ key: key, value: value })\n  })\n  var savedText = JSON.stringify(saveArray)\n  console.log('TopTen.save', saveArray)\n  localStorage.setItem(this.id, savedText)\n}\n\nTopTen.prototype.getAll = function () {\n  var ret = []\n  this.cache.forEach(function (value) {\n\t  ret.push(value)\n  })\n  return ret\n}\n\nTopTen.prototype.savePDB = function (primary_acccession, pdb) {\n  var store = {}\n  store.primary_acccession = primary_acccession\n  store.pdb = pdb\n  this.cache.push(store)\n}\n\nTopTen.prototype.previousLookup = function (primary_accession) {\n  var pdb = false\n  this.cache.forEach(function (value) {\n    if (value.primary_accession == primary_accession) {\n      pdb = value.pdb_id\n    }\n  })\n  return pdb\n}\n\nTopTen.prototype.previousLookupByName = function (name) {\n  var pdb = false\n  this.cache.forEach(function (value) {\n    if (value.name == name) {\n      pdb = value.pdb_id\n    }\n  })\n  return pdb\n}\n\nTopTen.prototype.updatePDB = function (primary_accession, pdb) {\n  this.cache.forEach(function (value) {\n    if (value.primary_accession == primary_accession) {\n      value.pdb_id = pdb\n    }\n  })\n  this.save()\n}\n\nmodule.exports = TopTen\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CoverageMap.vue?vue&type=style&index=0&id=1387a59d&scoped=true&lang=css&\"","module.exports = __webpack_public_path__ + \"img/aquaria-symbol-01.057e39d9.svg\";","module.exports = __webpack_public_path__ + \"img/up.64c3e14c.png\";","module.exports = __webpack_public_path__ + \"img/MS-01.f169151b.svg\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=style&index=0&id=1e15f6b6&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MatchingStructures.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TreeView.vue?vue&type=style&index=0&lang=css&\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAQCAYAAADqDXTRAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNq8020KgCAMBmAb0TGDQLyY0Ek6SbcoEHKg0YfWttLBK+iczy8bY8yilOpUvVrBL9rHVQLR0Yhan6EC7IJjIRyUhncQN3BolIJP4BUtAd/AFPonnARzaIT7D7AL8zbVhIfBUQhHcMxdgJcHuPArSEE5MAmkohSYDHLQJ5gFctEUzAYl6BFeJSBWK/yHCE0+s2R4E2AAhOs7b2YKWEMAAAAASUVORK5CYII=\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Playlist.vue?vue&type=style&index=0&lang=css&\"","module.exports = __webpack_public_path__ + \"img/down.7ae68b7a.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AboutAlignment.vue?vue&type=style&index=0&id=181d1cba&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Errors.vue?vue&type=style&index=0&id=72919d45&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loader.vue?vue&type=style&index=0&id=cb681734&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Title.vue?vue&type=style&index=0&id=0ec35694&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserHelp.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AboutUniprot.vue?vue&type=style&index=0&id=739206f9&scoped=true&lang=css&\"","module.exports = __webpack_public_path__ + \"img/aquaria-loader3.223aec7b.svg\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StructureViewer.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Menu.vue?vue&type=style&index=0&id=3cbdef84&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Wrapper.vue?vue&type=style&index=0&lang=css&\"","/* eslint-disable camelcase */\n\n//  Main client script that defines the AQUARIA namespace and primary functions.\n//  Page initialisation functions are at the end of this file.\n//  These functions try to follow code conventions specified in http://javascript.crockford.com/code.html\n//\n//  Copyright (c) CSIRO (2010-2017) and Garvan Institute of Medical Research (2010-)\n//\n//  Authors:\n//  Stuart Anderson <Stuart.Anderson@data61.csiro.au>\n//  Julian Heinrich <julian.heinrich@gmail.com>\n//  Sean O'Donoghue <sean@odonoghuelab.org>\n//  Kenny Sabir <traksewt@gmail.com>\n//  Neblina Sikta <n.sikta@garvan.org.au>\n//  Christian Stolte <christian.stolte@gmail.com>\n//  Sandeep Kaur <crystalsand10@gmail.com>\n//\n//  Jenny Vuong <vuong.jenny@gmail.com>\n//  Michael Joss <michael.joss@gmail.com>\n//  Vivian Ho <veeveearnh@gmail.com>\n//\n// This work is licensed under the terms of the GNU GPL version 2.\nvar TopTen = require('./topten')\n\nrequire('./utilities')\n\nvar MAX_PROTEIN_HISTORY = 10;\nvar proteinSubmitListeners = []\n  var addProteinSubmitListener = function (listener) {\n    proteinSubmitListeners.push(listener)\n  }\n\n  AQUARIA.proteinTopTen = new TopTen('protein_top_ten', MAX_PROTEIN_HISTORY)\n  AQUARIA.pdbTopTen = new TopTen('pdbTopten', MAX_PROTEIN_HISTORY)\n  addProteinSubmitListener(AQUARIA.proteinTopTen)\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FeatureMap.vue?vue&type=style&index=0&lang=css&\"","module.exports = __webpack_public_path__ + \"img/FT-01.e4a6c439.svg\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchPanel.vue?vue&type=style&index=0&lang=css&\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGoWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0NDYwLCAyMDIwLzA1LzEyLTE2OjA0OjE3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMC0xMS0wN1QxODo0Njo0OC0wNTowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjAtMTItMDlUMDg6NDk6MTYtMDU6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjAtMTItMDlUMDg6NDk6MTYtMDU6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjEzNGEyNTEtODFjYy00ZDNjLWJhMmQtY2VhMmM1MGY2YmQxIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ZTFkNTMwYWUtYzY2MS0wMjRlLTk1ZTItNTU4ODI4OWU1NTkxIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YjhlNjQyOWMtMjlkZS00NTc2LWEzN2MtMjM4NDJiNGUyZjA5IiB0aWZmOk9yaWVudGF0aW9uPSIxIiB0aWZmOlJlc29sdXRpb25Vbml0PSIyIiBleGlmOkNvbG9yU3BhY2U9IjEiIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSI3MDAiIGV4aWY6UGl4ZWxZRGltZW5zaW9uPSI3MDAiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiOGU2NDI5Yy0yOWRlLTQ1NzYtYTM3Yy0yMzg0MmI0ZTJmMDkiIHN0RXZ0OndoZW49IjIwMjAtMTItMDlUMDg6NDI6NTQtMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4yIChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoyMTM0YTI1MS04MWNjLTRkM2MtYmEyZC1jZWEyYzUwZjZiZDEiIHN0RXZ0OndoZW49IjIwMjAtMTItMDlUMDg6NDk6MTYtMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4yIChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtMh4BEAAAZoSURBVHja7Z17TNVlGMdPK4FlV3FqIDSJbF0sMqrF2rqR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\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main\"},[_c('GdprConsentModal'),_c('Header'),_c('Sequence'),_c('div',[_c('AboutAlignment')],1),_c('div',[_c('AboutPdb')],1),_c('div',[_c('AboutAquaria'),_c('UserHelp'),_c('Errors')],1),_c('div',{attrs:{\"id\":\"heightinspector\"}}),_c('StructureViewer'),_c('Tabs'),_c('CoverageMap'),_c('Loader'),_c('PopUp'),_c('a',{attrs:{\"href\":(_vm.data.hash)}},[_c('div',{staticClass:\"hide\",attrs:{\"id\":\"scrim\"},on:{\"click\":_vm.dismissPanel}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"header\"}},[_c('div',{staticClass:\"item fix level3\",attrs:{\"id\":\"logo\"}},[_c('a',{attrs:{\"href\":\"#About\"},on:{\"click\":_vm.showScrim}},[_c('img',{attrs:{\"src\":_vm.aquariasymbol}})])]),_c('Title'),_c('div',{staticClass:\"item fix level3\",attrs:{\"id\":\"menu-btn\"}},[_c('a',{attrs:{\"href\":\"#Menu\"}},[_c('img',{attrs:{\"src\":_vm.hamburger}})])]),_c('Menu')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"item title fix level5\",attrs:{\"id\":\"title\"}},[_c('span',{attrs:{\"id\":\"org_prot\"}},[(_vm.getOrganism && !_vm.seqRes)?_c('a',{staticClass:\"seqPanel\",attrs:{\"href\":\"#Sequence\"},on:{\"click\":function($event){return _vm.makeActive('seqPanel')}}},[_c('img',{attrs:{\"src\":_vm.search}}),_vm._v(\" \"+_vm._s(_vm.getOrganism.replaceAll('_', ' '))+\" \"),_c('strong',[_vm._v(_vm._s(_vm.getGene))])]):_vm._e(),(!_vm.getOrganism && !_vm.seqRes)?_c('a',{staticClass:\"seqPanel\",attrs:{\"href\":\"\"},on:{\"click\":function($event){return _vm.makeActive('seqPanel')}}},[_c('img',{attrs:{\"src\":_vm.search}}),_vm._v(\" Protein Sequence \")]):_vm._e()]),(!_vm.seqRes)?_c('span',{attrs:{\"id\":\"alignment\"}},[_c('a',{staticClass:\"alignPanel\",attrs:{\"href\":\"#Alignment\"},on:{\"click\":function($event){return _vm.makeActive('alignPanel')}}},[_vm._v(\"aligned onto\")])]):_vm._e(),(!_vm.seqRes)?_c('span',{attrs:{\"id\":\"struct\"}},[(!_vm.getStructure.pdb)?_c('a',{staticClass:\"structPanel\",attrs:{\"href\":\"#Structure\"},on:{\"click\":function($event){return _vm.makeActive('structPanel')}}},[_vm._v(\"PDB ID\")]):_vm._e(),(_vm.getStructure.pdb && !_vm.seqRes)?_c('a',{staticClass:\"structPanel\",attrs:{\"href\":\"#Structure\"},on:{\"click\":function($event){return _vm.makeActive('structPanel')}}},[_vm._v(_vm._s(_vm.getStructure.pdb + '-' + _vm.getStructure.chain))]):_vm._e(),_c('span',{style:({visibility: _vm.helpOption ? 'visible' : 'hidden'}),attrs:{\"id\":\"help\"},on:{\"click\":_vm.showHelp}},[_vm._v(\"?\")])]):_vm._e(),(_vm.seqRes)?_c('div',{attrs:{\"id\":\"titleAlign\"}},[_c('span',{staticClass:\"titlepanel\"},[_c('a',{staticClass:\"selectionPanel\",attrs:{\"href\":\"#Alignment\"},on:{\"click\":function($event){return _vm.makeActive('selectionPanel')}}},[_c('strong',[_vm._v(_vm._s(_vm.getGene))]),_vm._v(\" sequence: \"+_vm._s(_vm.seqRes)+\" \"),_c('br'),_c('strong',[_vm._v(_vm._s(_vm.pdb))]),_vm._v(\" structure: \"+_vm._s(_vm.structRes)+\" \")])])]):_vm._e(),_c('a',{staticClass:\"close\",attrs:{\"href\":_vm.data.hash},on:{\"click\":_vm.dismissPanel}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div id=\"title\" class=\"item title fix level5\">\n\n      <span id=\"org_prot\">\n        <a href=\"#Sequence\" class=\"seqPanel\" @click=\"makeActive('seqPanel')\" v-if=\"getOrganism && !seqRes\">\n          <img v-bind:src=\"search\">\n          {{ getOrganism.replaceAll('_', ' ') }} <strong>{{getGene}}</strong>\n        </a>\n        <a href=\"\" class=\"seqPanel\" @click=\"makeActive('seqPanel')\" v-if=\"!getOrganism && !seqRes\">\n          <img v-bind:src=\"search\">\n          Protein Sequence\n        </a>\n      </span>\n\n      <span id=\"alignment\" v-if=\"!seqRes\">\n          <a href=\"#Alignment\" class=\"alignPanel\" @click=\"makeActive('alignPanel')\" >aligned onto</a>\n      </span>\n\n      <span id=\"struct\" v-if=\"!seqRes\">\n        <a href=\"#Structure\" class=\"structPanel\" @click=\"makeActive('structPanel')\" v-if=\"!getStructure.pdb\">PDB ID</a>\n        <a href=\"#Structure\" class=\"structPanel\" @click=\"makeActive('structPanel')\" v-if=\"getStructure.pdb && !seqRes\">{{getStructure.pdb + '-' + getStructure.chain}}</a>\n        <span id='help' @click=\"showHelp\" :style=\"{visibility: helpOption ? 'visible' : 'hidden'}\">?</span>\n      </span>\n\n      <div id='titleAlign' class='' v-if=\"seqRes\">\n        <span class='titlepanel'>\n          <a href=\"#Alignment\" class=\"selectionPanel\" @click=\"makeActive('selectionPanel')\" >\n            <strong>{{getGene}}</strong> sequence: {{seqRes}} <br/>\n            <strong>{{pdb}}</strong> structure: {{structRes}}\n            </a>\n        </span>\n      </div>\n      <a  v-bind:href=\"data.hash\" class=\"close\" @click=\"dismissPanel\"></a>\n    </div>\n</template>\n\n<script>\nimport store from '../../store/index'\nimport * as Panels from '../AquariaLayout/helpers/hidePanels'\nimport * as panel3d from '../StructureViewer/helpers/joleculeAPI'\nimport { mapGetters } from 'vuex'\nexport default {\n  name: 'Title',\n  data () {\n    return {\n      pdb: null,\n      search: require('../../assets/img/search_100.png'),\n      seqRes: null,\n      structRes: null,\n      helpOption: true\n    }\n  },\n  computed: {\n    data () {\n      return {\n        hash: store.state.hash\n      }\n    },\n    scrim () {\n      return store.state.showScrim\n    },\n    ...mapGetters([\n      'getHash',\n      'getOrganism',\n      'getGene',\n      'getStructure'\n    ])\n  },\n  watch: {\n    scrim: function (newVal) {\n      var _this = this\n      if (!newVal) { // And error message is null\n        _this.dismissPanel()\n      }\n    }\n  },\n  methods: {\n    showHelp: function () {\n      store.commit('setHelpTitle', 'Aquaria Help')\n      store.commit('setUserStatus', false)\n      document.getElementById('UserHelp').classList.remove('hide')\n      document.getElementById('UserHelp').className += (' show')\n      // document.querySelector('#UserHelp').style.display = 'flex'\n      // document.querySelector('.main .dimmer').style.display = 'block'\n      if (!document.querySelector('div.dimmer')) {\n        Panels.overlay()\n        document.querySelector('div.dimmer').className += ' level7'\n      }\n      document.querySelector('div.dimmer').addEventListener('click', function () {\n        Panels.RemoveOverlay()\n        document.getElementById('UserHelp').classList.remove('show')\n        document.getElementById('UserHelp').className += (' hide')\n      })\n    },\n    storeHash: function () {\n      if (window.location.hash === '') {\n        store.commit('setHash', '#(0,0,0)')\n      } else {\n        if (window.location.hash.includes('-') || window.location.hash.includes('(')) {\n          store.commit('setHash', window.location.hash)\n        }\n      }\n    },\n    makeActive: function (className) {\n      this.helpOption = false\n      this.storeHash()\n      document.querySelectorAll('#title span a').forEach(el => {\n        el.classList.remove('active')\n      })\n      // if (ev.target.localName.includes('strong')) {\n      //   ev.target = ev.target.parentElement\n      // }\n      document.querySelector('.' + className).classList += ' active'\n      // ev.target.className = 'active'\n      if (document.querySelector('#title').className.indexOf('active') === -1) { document.querySelector('#title').className += ' active' }\n      document.querySelector('#scrim').className = 'show level2'\n      store.commit('setScrim', true)\n      if (document.querySelector('#titleAlign') !== null) {\n        document.querySelector('#titleAlign').className = 'active'\n        store.commit('setAlignment', panel3d.joleculeAlignment.copyToClipboard())\n        store.commit('setHash', window.location.hash)\n      }\n    },\n    dismissPanel: function () {\n      // hide scrim\n      // document.querySelector('#pdb_id > span#help').style.visibility = 'visible'\n      this.helpOption = true\n      var scrim = document.getElementById('scrim')\n      if (scrim.classList.contains('show')) {\n        scrim.classList.remove('show')\n        scrim.classList.add('hide')\n      }\n      // document.querySelector('#scrim').className = 'hide'\n      // reset title to neutral state\n      store.commit('setHash', this.getHash)\n      document.querySelector('#title').className = 'item title fix level6'\n      if (document.querySelector('#titleAlign') !== null) { document.querySelector('#titleAlign').className = '' }\n      document.querySelectorAll('#title span a').forEach(el => {\n        el.classList.remove('active')\n      })\n    },\n    resetSelection: function () {\n      document.querySelectorAll('#titlebar span').forEach(el => {\n        el.className = 'titlepanel'\n      })\n      document.querySelectorAll('.contents').forEach(el => {\n        el.style.display = 'none'\n      })\n    },\n    release: function () {\n      document.querySelector('#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection').style.display = 'none'\n      this.resetSelection()\n    }\n  },\n  mounted () {\n    this.resetSelection()\n  },\n  updated () {\n    var _this = this\n    _this.primary_accession = _this.getGene\n    var selectedRes = new MutationObserver(function () {\n      if (document.querySelector('#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection').style.display === 'none') {\n        _this.seqRes = null\n        _this.structRes = null\n        // _this.alignment = null\n        store.commit('setAlignment', '')\n      } else {\n        var residues = document.querySelector('#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection').innerText.split('\\n')\n        var pdb = window.AQUARIA.currentMember.pdb_id + '[' + window.AQUARIA.currentMember.model + ']-' + window.AQUARIA.currentMember.pdb_chain + ':'\n        var accession = _this.getGene + ':'\n        _this.seqRes = residues[1].split(accession)[1]\n        _this.structRes = residues[0].split(pdb)[1]\n        // _this.alignment = window.AQUARIA.panel3d.joleculeAlignment.copyToClipboard()\n      }\n    })\n    selectedRes.observe(document.querySelector('#threeDSpan-inner-jolecule-soup-display-canvas-wrapper-selection'), {\n      attributes: true, childList: true, characterData: true\n    })\n  }\n}\n</script>\n\n<style scoped>\n#struct > span#help {\n  background: white;\n  color: #595656;\n  padding: 0px 0.4em;\n  border-radius: 1.5rem;\n  margin: 2px;\n  font-size: 100%;\n}\n/* #pdb_id:hover{\n  background-color: var(--primary-link);\n} */\n#struct > span#help:hover {\n  background-color: var(--primary-link);\n  color: white;\n}\n.title {\n    flex-basis: auto;\n    color: white;\n    text-align: center;\n    line-height: 1.25;\n    padding: 0;\n    border-radius: 1.5rem;\n    margin: auto;\n    left: 50%;\n    top: 1.5vh;\n    transform: translate(-50%, -5%);\n    /* width: fit-content; */\n}\n#title.active, #titleAlign.active {\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: flex-start;\n  width: 78vw;\n  max-width: 29.5rem;\n  margin-top: .125rem;\n}\n#title span {\n  background-color: var(--primary-label);\n  white-space: nowrap;\n  text-align: left;\n  flex-shrink: 0;\n}\n#title.active span#struct, #title.active span#struct {\n  flex-grow: 2;\n  flex-shrink: 0;\n  /* width: 50%; */\n}\n#title span a {\n  display: inline-block;\n  background-color: var(--primary-label);\n  padding: calc(0.4rem + 3 * ((100vw - 320px) / 680)) 0.2rem;\n  transition: all 0.5s ease;\n  color: var(--text);\n  text-decoration: none;\n}\n#title span a:hover {\n  background-color: var(--primary-link);\n}\n\n#title span a:active, #title span a.active {\n  background-color: var(--primary-highlight);\n}\n\n#title:hover span#alignment a {\n  border-right: 1px dotted var(--background);\n  border-left: 1px dotted var(--background);\n}\nspan#org_prot, span#uniprotpanel {\n  border-top-left-radius: 2rem;\n  border-bottom-left-radius: 2rem;\n}\nspan#org_prot a, span#uniprotpanel a {\n  padding-left: 0.5rem;\n  border-top-left-radius: 2rem;\n  border-bottom-left-radius: 2rem;\n  transition: all 0.7s ease;\n}\nspan#org_prot img, span#uniprotpanel img, span#struct img  {\nheight: calc(10px + .4vw);\n}\nspan#struct , span#struct {\n  padding-right: 0.5rem;\n  font-weight: 600;\n  border-top-right-radius: 2rem;\n  border-bottom-right-radius: 2rem;\n}\n#titleAlign {\n  display: flex;\n  justify-content: center;\n}\n#titleAlign.active {\n  /* background-color: var(--primary-highlight); */\n  border-radius: 1.5rem;\n}\n#titleAlign span a {\n  padding: calc(0.2rem + 2 * ((100vw - 320px) / 680)) 1rem;\n  font-size: 95%;\n  line-height: 1rem;\n  border-radius: 1.25rem;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 15rem;\n  text-align: center;\n}\n\n#title span.titlepanel {\n  background-color: transparent;\n  text-align: left;\n}\n\n#titleAlign.active span.titlepanel a {\n  width: 80vw;\n  max-width: 29.5rem;\n}\n#titleAlign.active + a.close::after {\n    top: calc(0.5rem + 3 * ((100vw - 320px) / 680));\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Title.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Title.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Title.vue?vue&type=template&id=0ec35694&scoped=true&\"\nimport script from \"./Title.vue?vue&type=script&lang=js&\"\nexport * from \"./Title.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Title.vue?vue&type=style&index=0&id=0ec35694&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0ec35694\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel abs floating level7\",attrs:{\"id\":\"Menu\"}},[_c('a',{staticClass:\"close\",attrs:{\"href\":\"#\"}}),_vm._m(0),_vm._m(1),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selected),expression:\"selected\"}],on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selected=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},function($event){return _vm.onChange($event)}]}},[_c('option',{attrs:{\"id\":\"ribbon\",\"selected\":\"\"}},[_vm._v(\"Ribbon\")]),_c('option',{attrs:{\"id\":\"sphere\"}},[_vm._v(\"Sphere\")]),_c('option',{attrs:{\"id\":\"backbone\"}},[_vm._v(\"Backbone\")])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('a',{staticClass:\"lnk\",attrs:{\"id\":\"print\",\"href\":\"#\"}},[_vm._v(\"Print\")]),_c('a',{staticClass:\"lnk\",attrs:{\"id\":\"helpbtn\",\"href\":\"#\"}},[_vm._v(\"Help\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('a',{staticClass:\"lnk\",attrs:{\"id\":\"Sidechains\",\"href\":\"#Menu\"}},[_vm._v(\"Sidechains\")]),_c('a',{staticClass:\"lnk\",attrs:{\"id\":\"Neighbors\",\"href\":\"#Menu\"}},[_vm._v(\"Neighbors\")]),_c('a',{staticClass:\"lnk active\",attrs:{\"id\":\"Ligands\",\"href\":\"#Menu\"}},[_vm._v(\"Ligands\")]),_c('a',{staticClass:\"lnk\",attrs:{\"id\":\"Water\",\"href\":\"#Menu\"}},[_vm._v(\"Water\")])])}]\n\nexport { render, staticRenderFns }","<template>\n    <div id=\"Menu\" class=\"panel abs floating level7\">\n      <a href=\"#\" class=\"close\"></a>\n      <div>\n        <a class=\"lnk\" id='print' href=\"#\">Print</a>\n        <a class=\"lnk\" id='helpbtn' href=\"#\">Help</a>\n      </div>\n      <div>\n        <a class=\"lnk\" id='Sidechains' href=\"#Menu\">Sidechains</a>\n        <a class=\"lnk\" id='Neighbors' href=\"#Menu\">Neighbors</a>\n        <a class=\"lnk active\" id='Ligands' href=\"#Menu\">Ligands</a>\n        <a class=\"lnk\" id='Water' href=\"#Menu\">Water</a>\n      </div>\n      <select v-model=\"selected\" @change=\"onChange($event)\">\n        <option id='ribbon' selected>Ribbon</option>\n        <option id='sphere'>Sphere</option>\n        <option id='backbone'>Backbone</option>\n      </select>\n      <!-- <span>SElected: {{selected}} </span> -->\n    </div>\n</template>\n<script>\n\nimport { screenshot } from '../AquariaLayout/helpers/Screenshot'\nimport store from '../../store/index'\nimport * as Panels from '../AquariaLayout/helpers/hidePanels'\nimport * as viewUtils from '../InfoAbout/helpers/ViewUtils'\nexport default {\n  name: 'Menu',\n  data () {\n    return {\n      selected: 'Ribbon'\n    }\n  },\n  methods: {\n    onChange: function (event) {\n      const id = event.target.value.toLowerCase()\n      document.querySelector('#threeDSpan-inner-menu-' + id).click()\n    },\n    showHelp: function () {\n      var _this = this\n      store.commit('setHelpTitle', 'Aquaria Help')\n      store.commit('setUserStatus', false)\n      document.getElementById('UserHelp').classList.remove('hide')\n      document.getElementById('UserHelp').className += (' show')\n      if (!document.querySelector('div.dimmer')) {\n        Panels.overlay()\n        document.querySelector('div.dimmer').className += ' level7'\n      }\n      document.querySelector('div.dimmer').addEventListener('click', function () {\n        Panels.RemoveOverlay()\n        document.getElementById('UserHelp').classList.remove('show')\n        document.getElementById('UserHelp').className += (' hide')\n        var elem = {}\n        elem.target = document.querySelector('#helpbtn')\n        _this.toggleActive(elem)\n      })\n    },\n    toggleActive: function (ev) {\n      if (ev.target.className === 'lnk active') {\n        ev.target.className = 'lnk'\n      } else {\n        ev.target.className = 'lnk active'\n      }\n    }\n  },\n  mounted () {\n    var _this = this\n    document.querySelector('#print').addEventListener('click', async function (ev) {\n      ev.preventDefault() // prevent default navigation\n      const screenshotHref = await screenshot(7680, 4320, 0, 0)\n      // construct a temporary anchor element with a download attribute and click it\n      const a = document.createElement('a')\n      a.href = screenshotHref // href is always a string. whether blob uri (Object URL) or data uri depends on browser support\n      a.download = 'aquaria-screenshot.png' // @TODO consider a more meaningful filename here. maybe use protein name w/ a timestamp\n      a.click()\n    })\n    // document.querySelector('#xr').addEventListener('click', function (ev) {\n    //   ev.preventDefault() // prevent default navigation\n    //   document.querySelector('.xr-menu-button').click()\n    // })\n    document.querySelector('#helpbtn').addEventListener('click', function (ev) {\n      ev.preventDefault() // prevent default navigation\n      _this.toggleActive(ev) // toggle active state\n      _this.showHelp()\n    })\n    document.querySelector('#Sidechains').addEventListener('click', function (ev) {\n      ev.preventDefault() // prevent default navigation\n      _this.toggleActive(ev) // toggle active state\n      if (ev.currentTarget.classList.contains('active')) {\n        viewUtils.getCurrentView() // this doesn't do anything... it returns a value but has no side effects\n      }\n      document.querySelector('#threeDSpan-inner > div.jolecule-embed-header.jolecule-embed-toolbar > span:nth-child(5)').click()\n    })\n    document.querySelector('#Neighbors').addEventListener('click', function (ev) {\n      ev.preventDefault() // prevent default navigation\n      _this.toggleActive(ev) // toggle active state\n      document.querySelector('#threeDSpan-inner > div.jolecule-embed-header.jolecule-embed-toolbar > span:nth-child(6)').click()\n    })\n    document.querySelector('#Ligands').addEventListener('click', function (ev) {\n      ev.preventDefault() // prevent default navigation\n      _this.toggleActive(ev) // toggle active state\n      document.querySelector('#threeDSpan-inner-menu-ligand').click()\n    })\n    document.querySelector('#Water').addEventListener('click', function (ev) {\n      ev.preventDefault() // prevent default navigation\n      _this.toggleActive(ev) // toggle active state\n      document.querySelector('#threeDSpan-inner-menu-water').click()\n    })\n  }\n}\n</script>\n<style scoped>\n/* Menu */\n  @media only screen and (max-width: 570px) {\n    #Menu:target.panel.floating {\n    display: flex;\n    background-color: transparent;\n    width: 136px;\n    border-radius: 0.25rem;\n    top: 3rem;\n    right: 1rem;\n    }\n  }\n  @media only screen and (min-width: 571px) {\n    #Menu:target.panel.floating {\n    display: flex;\n    background-color: transparent;\n    width: 136px;\n    border-radius: 0.25rem;\n    top: 1rem;\n    right: 1rem;\n    }\n  }\n\n  #Menu a.lnk {\n    color: var(--text);\n    display: block;\n    background-color: var(--secondary-label);\n    border-radius: 0.25em;\n    padding: 0.2em 0.6em;\n    margin: 2px 0;\n    text-decoration: none;\n  }\n  #Menu a.lnk.active {\n    background-color: var(--primary-highlight);\n  }\n  #Menu a.lnk:hover {\n      background-color: var(--primary-link)\n  }\n  #Menu div {\n      margin-bottom: 4px;\n  }\n  #Menu select {\n      color: var(--text);\n      background-color: var(--primary-highlight);\n      border-radius: 0.25em;\n      border: 0px none;\n      padding: 0.2em;\n      margin: 2px 0;\n  }\n #Menu.panel .close::after {\n    top: -0.5rem;\n    right: -0.5rem;\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Menu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Menu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Menu.vue?vue&type=template&id=3cbdef84&scoped=true&\"\nimport script from \"./Menu.vue?vue&type=script&lang=js&\"\nexport * from \"./Menu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Menu.vue?vue&type=style&index=0&id=3cbdef84&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3cbdef84\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div id=\"header\">\n        <div id=\"logo\" class=\"item fix level3\"><a href=\"#About\" @click=\"showScrim\"><img v-bind:src=\"aquariasymbol\" /></a></div>\n        <Title />\n        <div id=\"menu-btn\" class=\"item fix level3\"><a href=\"#Menu\"><img v-bind:src=\"hamburger\" /></a></div>\n        <Menu />\n    </div>\n</template>\n<script>\nimport Title from './Title'\nimport Menu from './Menu'\nimport store from '../../store/index'\nexport default {\n  name: 'Header',\n  components: {\n    Title,\n    Menu\n  },\n  data () {\n    return {\n      aquariasymbol: require('../../assets/images/aquaria-symbol-01.svg'),\n      hamburger: require('../../assets/images/aquaria-menu.svg')\n    }\n  },\n  methods: {\n    showScrim: function () {\n      if (window.location.hash === '') {\n        store.commit('setHash', '#(0,0,0)')\n      }\n      if (window.location.hash.includes('(')) {\n        store.commit('setHash', window.location.hash)\n      }\n      document.querySelector('#scrim').className = 'show level3'\n      document.querySelector('#xr-button').click()\n    }\n  }\n}\n</script>\n<style scoped>\n#header {\n  display: flex;\n  flex-flow: row nowrap;\n  /* Then we define how to distribute the remaining space */\n  justify-content: space-between;\n  margin-top: 0.5rem;\n  width: 100%;\n  height: 4em;\n}\n.item {\n    flex-grow: 0;\n    flex-basis: calc(2rem + 3 * ((100vw - 320px) / 680));\n    display: flex;\n}\n.item a {\n    display: flex;\n}\n.item  img {\n    height: calc(1.75rem + 2vh);\n}\n#menu-btn {\n    right: 2vh;\n    top: 2vh;\n}\n#menu-btn.item img {\n    opacity: 0.8;\n    height: calc(1rem + 1vh);\n}\n#menu-btn.item img:hover {\n    opacity: 1;\n}\n#logo {\n    left: 1vw;\n    top: 0.75vw;\n}\nstrong {\n    font-weight: 600;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Header.vue?vue&type=template&id=1e15f6b6&scoped=true&\"\nimport script from \"./Header.vue?vue&type=script&lang=js&\"\nexport * from \"./Header.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Header.vue?vue&type=style&index=0&id=1e15f6b6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1e15f6b6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel overlay about level3\",attrs:{\"id\":\"Sequence\"}},[_c('SearchPanel'),_c('AboutUniprot')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"searchByName\"}},[_c('p',[_vm._v(\"Organism\")]),_c('SearchOrganism'),_vm._m(0),_c('p',[_vm._v(\"Protein\")]),_c('SearchProtein'),_c('div',{attrs:{\"id\":\"psyns\"}},[_c('p',[_vm._v(\"(example: \"),_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){return _vm.fillin('p53')}}},[_vm._v(\"p53\")]),_vm._v(\" or \"),_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){return _vm.fillin('P04637');}}},[_vm._v(\"P04637\")]),_vm._v(\")\")])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"osyns\"}},[_c('p',[_vm._v(\" \")])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('autocomplete',{ref:\"autocomplete\",attrs:{\"id\":\"organism_syn_input\",\"search\":_vm.search,\"get-result-value\":_vm.getResultValue},on:{\"submit\":_vm.handleSubmit}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n      <autocomplete\n      id=\"organism_syn_input\"\n      :search=\"search\"\n      :get-result-value=\"getResultValue\"\n      @submit=\"handleSubmit\"\n      ref=\"autocomplete\"\n    ></autocomplete>\n    </div>\n</template>\n<script>\nimport axios from 'axios'\nimport * as textpanel from '../InfoAbout/helpers/textpanels'\n// import * as resizeApp from '../AquariaLayout/helpers/resize_app'\n// import $ from 'jquery'\nimport store from '../../store/index'\nimport Autocomplete from '@trevoreyre/autocomplete-vue'\nimport '@trevoreyre/autocomplete-vue/dist/style.css'\n\nexport default {\n  name: 'SearchOrganism',\n  components: {\n    Autocomplete\n  },\n  data () {\n    return {\n      OrganismSynonyms: {}\n    }\n  },\n  computed: {\n    data () {\n      return {\n        OrgID: store.state.OrgID,\n        Organism: store.state.Organism\n      }\n    }\n  },\n  methods: {\n    getResultValue (result) {\n      return result.value\n    },\n    handleSubmit (result) {\n      var _this = this\n      // var AQUARIA = window.AQUARIA\n      if (result.value &&\n          result.value.indexOf('No organisms for: ') !== 0) {\n        if (result.id !== _this.data.OrgID) {\n          const url = `${window.BACKEND}/getOrganismSynonyms`\n          axios({\n            method: 'get',\n            url: url,\n            params: {\n              organism_id: result.id\n            }\n          })\n            .then(function (response) {\n              const orgNames = response.data\n              store.commit('setOrgID', result.id)\n              // AQUARIA.Organism.ID = result.id\n              localStorage.preferred_organism_name = result.value\n              textpanel.displayOrgSynonyms(orgNames)\n              document.querySelector('#organism_syn_input').setAttribute('size', result.value.length)\n            })\n        }\n      }\n    },\n    clear () {\n      this.value = ''\n      this.$refs.autocomplete.value = ''\n    },\n    search (input) {\n      var _this = this\n      var OrganismSynonyms = this.OrganismSynonyms\n      // resizeApp.startLogoSpin()\n      var labelValues\n      var term = input\n      this.value = input\n      //   const url = `${wikiUrl}/w/api.php?${\n      //     params\n      //   }&srsearch=${encodeURI(input)}`\n\n      return new Promise(resolve => {\n        if (term in OrganismSynonyms) {\n          resolve(OrganismSynonyms[term])\n          return\n        };\n        if (term !== '') {\n          var url = `${window.BACKEND}/getQueryOrganism/${term}`\n          axios({\n            method: 'get',\n            url: url\n          })\n            .then(function (res) {\n              const data = res.data\n              // AQUARIA.remote.queryOrganism(term,\n              // resize_appstopLogoSpin();\n              if (data.length > 0) {\n                labelValues = data.map(function (item) {\n                  return {\n                    label: item.Synonym,\n                    value: item.Synonym,\n                    id: item.Organism_ID\n                  }\n                })\n\n                OrganismSynonyms[term] = labelValues\n              } else {\n                labelValues = {\n                  label: 'No organisms for: ' + term,\n                  value: 0\n                }\n              }\n              document.querySelector('#autocomplete-result-list-1').style.zIndex = 99\n              document.querySelector('.autocomplete-result-list').style.maxHeight = '390px'\n              resolve(labelValues)\n            })\n        } else {\n          labelValues = {\n            label: _this.data.Organism,\n            value: _this.data.OrgID\n          }\n          resolve(labelValues)\n        }\n      })\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchOrganism.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchOrganism.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchOrganism.vue?vue&type=template&id=1b521cfe&\"\nimport script from \"./SearchOrganism.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchOrganism.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('autocomplete',{ref:\"autocomplete\",attrs:{\"id\":\"protein_syn_input\",\"search\":_vm.search,\"get-result-value\":_vm.getResultValue},on:{\"submit\":_vm.handleSubmit}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <autocomplete\n    id=\"protein_syn_input\"\n    :search=\"search\"\n    :get-result-value=\"getResultValue\"\n    @submit=\"handleSubmit\"\n    ref=\"autocomplete\"\n  ></autocomplete>\n</template>\n<script>\nimport axios from 'axios'\nimport * as textpanel from '../InfoAbout/helpers/textpanels'\n// import * as resizeApp from '../AquariaLayout/helpers/resize_app'\nimport Autocomplete from '@trevoreyre/autocomplete-vue'\nimport '@trevoreyre/autocomplete-vue/dist/style.css'\nimport * as LoadAQUARIA from '../../utils/loadData'\nimport store from '../../store/index'\n\nexport default {\n  name: 'SearchProtein',\n  components: {\n    Autocomplete\n  },\n  data () {\n    return {\n      callbackData: {\n        names: [],\n        ids: [],\n        pdbIDs: []\n      },\n      cacheProteinSynonyms: {},\n      term: null,\n      proteinSynonymOrgId: null,\n      pdbId: null,\n      collectResponsevalues: null\n    }\n  },\n  methods: {\n    getResultValue (result) {\n      return (result.value + ' (' + result.id + ')')\n    },\n    clear () {\n      this.value = ''\n      this.$refs.autocomplete.value = ''\n    },\n    handleSubmit (result) {\n      var _this = this\n      if (result.value &&\n          result.value.indexOf('No structures for: ') !== 0) {\n        var primaryAccession = result.id\n        if (primaryAccession.indexOf('/') > -1) {\n          var parts = primaryAccession.split('/')\n          primaryAccession = parts[0]\n          _this.pdbId = parts[1]\n        }\n        if (result.type === 'PDB') {\n          console.log('AQUARIA.proteinAutocomplete.select pdb', result.value)\n          store.commit('showLoader', true)\n          store.commit('setLoaderMsg', 'Waiting for data...')\n          //   var chain = null\n          var url = `${window.BACKEND}/getAccessionForPDB/${result.value}`\n          axios({\n            method: 'get',\n            url: url\n          })\n            .then(function (response) {\n              const accessionObject = response.data\n              LoadAQUARIA.loadAccession([accessionObject.Accession], result.value, null)\n            })\n            // AQUARIA.remote.getAccessionForPDB(ui.item.value, chain, function(accessionObject) {\n          // })\n        } else if (result.id === store.getters.getStructure.accession) {\n          if (result.value === store.getters.getGene) {\n            store.commit('showLoader', false)\n            // do nothing\n          } else {\n            console.log('AQUARIA.proteinAutocomplete.select same protein, different name', result.value)\n            store.commit('setGene', result.value)\n            url = `${window.BACKEND}/getProteinSynonyms/${store.getters.getStructure.accession};`\n            axios({\n              method: 'get',\n              url: url\n            })\n              .then(function (response) {\n                textpanel.displayProtSynonyms(response.data)\n              })\n            // Figure out a way to bring currentData\n            //   AQUARIA.update3DTitle(AQUARIA.structures2match.source_primary_accession,\n            //     currentData.pdb_id, AQUARIA.currentChain, AQUARIA.molecule_name, AQUARIA.currentMember.alignment_identity_score)\n            //   AQUARIA.updateDocumentTitle(AQUARIA.currentMember.alignment_identity_score, currentData.pdb_id, AQUARIA.currentChain)\n            //   featurelist.updateFeatureTabTitle(AQUARIA.preferred_protein_name)\n          }\n        } else {\n          /// console.log('AQUARIA.proteinAutocomplete.select new protein', ui.item.value);\n          document.querySelector('#protein_syn_input').placeholder = result.value\n          document.querySelector('#protein_syn_input').value = ''\n          store.commit('showLoader', true)\n          store.commit('setLoaderMsg', 'Waiting for data...')\n          store.commit('setGene', result.value)\n          LoadAQUARIA.loadAccession([primaryAccession], _this.pdbId, null)\n        }\n      } else {\n        event.preventDefault()\n      }\n    },\n    search (input) {\n      var _this = this\n      _this.term = input\n      _this.callbackData.LRU = _this.getLRU()\n      return new Promise(resolve => {\n        if (_this.term === '') {\n          _this.collectResponse()\n          if (_this.collectResponsevalues) {\n            resolve(_this.collectResponsevalues)\n          }\n        } else {\n          // resizeApp.startLogoSpin()\n          _this.proteinSynonymOrgId = _this.term + '%' + _this.$store.state.OrgID\n          if (_this.proteinSynonymOrgId in _this.cacheProteinSynonyms) {\n            resolve(_this.cacheProteinSynonyms[_this.proteinSynonymOrgId])\n            return\n          };\n          document.querySelector('.autocomplete-result-list').style.maxHeight = '390px'\n          var url = `${window.BACKEND}/queryProtein/${_this.term}/${_this.$store.state.OrgID}`\n          axios({\n            method: 'get',\n            url: url\n          })\n            .then(function (response) {\n              const data = response.data\n              if (!isNaN(parseInt(_this.term.charAt(0)))) {\n                _this.pdbCallback(data)\n                if (_this.collectResponsevalues) {\n                  resolve(_this.collectResponsevalues)\n                }\n              } else {\n                if (data.length > 0) {\n                  if (data[0].isID === 0) {\n                    _this.nameCallback(data)\n                    if (_this.collectResponsevalues) {\n                      resolve(_this.collectResponsevalues)\n                    }\n                  } else {\n                    _this.idCallback(data)\n                  }\n                } else {\n                  if (data.isID === 0) {\n                    _this.nameCallback(data)\n                    if (_this.collectResponsevalues) {\n                      resolve(_this.collectResponsevalues)\n                    }\n                  } else {\n                    _this.idCallback(data)\n                    if (_this.collectResponsevalues) {\n                      resolve(_this.collectResponsevalues)\n                    }\n                  }\n                }\n              }\n            })\n        }\n      })\n    },\n    getLRU: function () {\n      return window.AQUARIA.proteinTopTen.getAll().map(function (item) {\n        return {\n          label: item.name,\n          suffix: item.primary_accession + ', ' + item.pdb_id,\n          value: item.name,\n          type: 'LRU',\n          category: 'Recent',\n          id: item.primary_accession + '/' + item.pdb_id\n        }\n      })\n    },\n    collectResponse: function () {\n      var _this = this\n      var lruMatches = _this.callbackData.LRU\n      if (lruMatches.length > 0 && _this.term && _this.term.length > 0) {\n        lruMatches = lruMatches.filter(function (val) {\n          if (val.label) {\n            return val.label.toLowerCase().startsWith(_this.term.toLowerCase())\n          }\n        })\n      }\n      var showPopup = true\n      var allValues = lruMatches.concat(_this.callbackData.names).concat(_this.callbackData.ids).concat(_this.callbackData.pdbIDs)\n      if (allValues.length === 0) {\n        if (_this.term && _this.term.length > 0) {\n          allValues = [{\n            label: 'No structures for: ' + _this.term,\n            value: 0\n          }]\n        } else {\n          showPopup = false\n        }\n      }\n      /// console.log('AQUARIA.proteinAutocomplete received', allValues)\n      _this.cacheProteinSynonyms[_this.proteinSynonymOrgId] = allValues\n      if (showPopup) {\n        _this.collectResponsevalues = allValues\n      }\n    },\n    // Autocomplete for gene name\n    nameCallback: function (nameData) {\n      var labelValues\n      var _this = this\n      labelValues = nameData.map(function (item) {\n        return {\n          label: item.Synonym,\n          suffix: null,\n          value: item.Synonym,\n          type: 'Synonym',\n          category: 'Names',\n          id: item.Primary_Accession,\n          organism: item.Organism_ID\n        }\n      })\n      labelValues.sort(function (a, b) {\n        return a.label > b.label ? 1 : -1\n      })\n      labelValues.reduce(function (previous, current) {\n        var a = previous\n        var b = current\n        if (a && a.value === b.value) {\n          if (a.dup) {} else {\n            a.suffix = a.id\n            a.dup = true\n          }\n          if (b.dup) {\n\n          } else {\n            b.suffix = b.id\n            b.dup = true\n          }\n        }\n        return current\n      }, null)\n      _this.callbackData.names = labelValues\n      _this.collectResponse()\n      // resizeApp.stopLogoSpin()\n    },\n    // Autocomplete for Primary Accession\n    idCallback: function (idData) {\n      var _this = this\n      var labelValues\n      labelValues = idData.map(function (item) {\n        var suffix = item.Source_Field\n        if (suffix === 'AC' || suffix === 'ID') {\n          suffix = 'UniProt'\n        }\n        return {\n          label: item.Synonym,\n          suffix: suffix,\n          value: item.Synonym,\n          type: suffix,\n          category: 'Identifiers',\n          id: item.Primary_Accession\n        }\n      })\n      labelValues.sort(function (a, b) {\n        return a.label > b.label ? 1 : -1\n      })\n      _this.callbackData.ids = labelValues\n      _this.collectResponse()\n      // resizeApp.stopLogoSpin()\n    },\n    // Autocomplete for PDB\n    pdbCallback: function (pdbData) {\n      var _this = this\n      var labelValues\n      labelValues = pdbData.map(function (item) {\n        return {\n          label: item.Synonym,\n          suffix: 'PDB',\n          type: 'PDB',\n          value: item.Synonym,\n          category: item.Category,\n          id: item.Synonym\n        }\n      })\n      _this.callbackData.pdbIDs = labelValues\n      _this.collectResponse()\n      // resizeApp.stopLogoSpin()\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchProtein.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchProtein.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchProtein.vue?vue&type=template&id=7f50d070&\"\nimport script from \"./SearchProtein.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchProtein.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"searchByName\">\n    <p>Organism</p>\n    <SearchOrganism/>\n    <div id='osyns'>\n      <p>&nbsp;</p>\n    </div>\n    <p>Protein</p>\n    <SearchProtein/>\n    <div id='psyns'>\n      <p>(example: <a href=\"#\" v-on:click=\"fillin('p53')\">p53</a> or <a href=\"#\" v-on:click=\"fillin('P04637');\">P04637</a>)</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport $ from 'jquery'\nimport SearchOrganism from './SearchOrganism'\nimport SearchProtein from './SearchProtein'\nexport default {\n  components: {\n    SearchOrganism,\n    SearchProtein\n  },\n  name: 'SearchPanel',\n  data () {\n    return {\n      search: require('../../assets/img/search_dark.png')\n    }\n  },\n  methods: {\n    fillin: function (term) {\n      document.getElementById('protein_syn_input').value = term\n      setTimeout(function () {\n        window.location.href = '/P04637'\n      }, 300)\n    },\n    selectOrganism: function (event) {\n\n    },\n    placeholderText: function (organism, protein) {\n      var orgInput = document.querySelector('#organism_syn_input')\n      var protInput = document.querySelector('#protein_syn_input')\n      orgInput.placeholder = organism\n      orgInput.setAttribute('size', orgInput.getAttribute('placeholder').length)\n      protInput.placeholder = protein\n      protInput.setAttribute('size', protInput.getAttribute('placeholder').length)\n\n      $('#organism_syn_input').focus(function () {\n        $(this).attr('placeholder', 'Specify an organism')\n        orgInput.setAttribute('size', orgInput.getAttribute('placeholder').length)\n      }).blur(function () {\n        $(this).attr('placeholder', organism)\n        orgInput.setAttribute('size', orgInput.getAttribute('placeholder').length)\n      })\n\n      $('#protein_syn_input').focus(function () {\n        $(this).attr('placeholder', 'Specify a protein')\n        protInput.setAttribute('size', protInput.getAttribute('placeholder').length)\n      }).blur(function () {\n        $(this).attr('placeholder', protein)\n        protInput.setAttribute('size', protInput.getAttribute('placeholder').length)\n      })\n    }\n  }\n}\n</script>\n\n<style>\n#searchByName {\n  width: 100%;\n}\n.contents p {\n  margin: 0.5em 0;\n}\n  input {\n    z-index: 40;\n    border: none;\n    color: #333333;\n    padding: 0.2rem 0.5rem;\n    font-size: 0.9rem;\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchPanel.vue?vue&type=template&id=2d21ac4c&\"\nimport script from \"./SearchPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchPanel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SearchPanel.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"scrollable\",attrs:{\"data-intro\":\"UniProt summary of the specified protein's function.\",\"data-position\":\"right\"}},[_vm._m(0),(_vm.uniprotDesc)?_c('div',{attrs:{\"id\":\"uniProtDesc\"}}):_vm._e(),_vm._l((_vm.descriptions),function(description,i){return _c('div',{key:i,staticClass:\"expandable\"},[_c('expandable-text-line',{attrs:{\"use-hover\":\"\"},domProps:{\"innerHTML\":_vm._s('<strong>' + description[0] + '</strong>:' + description[1])}})],1)})],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"gsyns\"}},[_c('p',[_vm._v(\"Genes:  \")])])}]\n\nexport { render, staticRenderFns }","<template>\n    <!-- About Uniprot -->\n    <div data-intro=\"UniProt summary of the specified protein's function.\" data-position=\"right\" class=\"scrollable\">\n      <div style=\"display:none;\"\n            id='gsyns'>\n        <p>Genes: &nbsp;</p>\n      </div>\n      <div id=\"uniProtDesc\" v-if=\"uniprotDesc\"></div>\n        <div v-for=\"(description, i) in descriptions\" :key=\"i\" class='expandable'>\n          <expandable-text-line use-hover v-html=\"'<strong>' + description[0] + '</strong>:' + description[1]\">\n          </expandable-text-line>\n      </div>\n    </div>\n</template>\n\n<script>\nimport ExpandableTextLine from 'vue-expandable-text-line'\nimport { mapGetters } from 'vuex'\n\nexport default {\n  name: 'AboutUniprot',\n  components: {\n    ExpandableTextLine\n  },\n  data () {\n    return {\n      uniprotDesc: null,\n      sections: [],\n      descriptions: [],\n      a: [1, 2, 3],\n      tightSections: [],\n      desc: null,\n      list: []\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'getSequences'\n    ])\n  },\n  watch: {\n    getSequences (newCount) {\n      var _this = this\n      if (newCount.length > 0) {\n        _this.uniprotDesc = _this.getSequences[0].description\n        _this.updateUniprotInfo(_this.uniprotDesc)\n      }\n    }\n  },\n  methods: {\n    updateUniprotInfo: function (info) {\n      var _this = this\n      _this.list = []\n      _this.tightSections = []\n      var patt = /\\n[A-Z ]+:.*?$/\n      function extractLines () {\n        if (info && info.length > 0) {\n          var match = info.match(patt)\n          if (match !== null) {\n            _this.sections.unshift(match[0].split(': '))\n            info = info.replace(match[0], '')\n            extractLines()\n          } else {\n            _this.sections.unshift(info.split(': '))\n          }\n        }\n      }\n\n      extractLines()\n      this.sections.forEach(function (k) {\n        // format URLs\n        if (k[1].indexOf('URL=') !== -1) { /// /console.log(\"URL found in section[\"+k+\"]\");\n          var linkCode = ''; var lhref = ''; var lname = ''; var ltitle = ''\n          var parts = k[1].split(';')\n          parts.forEach(function (n) { // parts is max. 3 strings (Name, URL, Note)\n            n = n.split('=') /// /console.log(\"parts[\"+n+\"]: \"+ parts[n].toString());\n            if (n[0].indexOf('URL') !== -1) { lhref = n[1] }\n            if (n[0].indexOf('Name') !== -1) { lname = n[1] }\n            if (n[0].indexOf('Note') !== -1) { ltitle = n[1] }\n          })\n          linkCode = '<a href=' + lhref + ' title=\"' + ltitle + '\" target=\"_blank\">' + lname + '</a>' /// /console.log(\"linkCode: \"+linkCode);\n          k[1] = linkCode\n        }\n      })\n\n      function makeLists (fromCollection) { // convert items with the same header to bullet lists:\n        var list = null\n        for (var n = 0; n < fromCollection.length; n++) {\n          if (n < fromCollection.length - 2) {\n            var head = fromCollection[n][0]\n            var nextHead = fromCollection[(n + 1)][0]\n            // if the next header matches the current header, start a bullet list\n            if (nextHead === head) {\n              if (list === null) { list = '<ul>' }\n              list += '<li>' + fromCollection[n][1] + '</li>'\n            } else {\n              if (list === null) { // no open list\n                // since the next header is different, add the current item to the new array\n                _this.tightSections.push(fromCollection[n])\n              } else { // make a list item, close the list, and add it to the new array\n                list += '<li>' + fromCollection[n][1] + '</li></ul>'\n                var newList = [head, list]\n                _this.tightSections.push(newList)\n                list = null\n              }\n            }\n          } else { // n has reached the end of the sections array\n            if (list === null) { // no open list\n              _this.tightSections.push(fromCollection[n])\n            } else {\n              list += '<li>' + fromCollection[n][1] + '</li></ul>'\n              newList = [head, list]\n              _this.tightSections.push(newList)\n              list = null\n            }\n          }\n        } /// /console.log(tightSections.toString());\n        return _this.tightSections\n      }\n      var finalList = makeLists(_this.sections)\n      finalList.forEach(function (section) {\n        var EachSec = ''\n        if (section.length > 2) {\n          for (var i = 1; i < section.length; i++) {\n            EachSec = EachSec + ' ' + section[i]\n          }\n          section[1] = EachSec\n        }\n        _this.list.push(section)\n      })\n      _this.descriptions = _this.list\n    }\n  }\n}\n</script>\n\n<style scoped>\n.expandable {\n  margin: 8px 0px;\n  /* cursor: ns-resize; */\n}\n.expandable-text-line {\n  cursor: s-resize;\n}\n.expandable-text-line.__extl-expanded{\n  cursor: n-resize;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AboutUniprot.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AboutUniprot.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AboutUniprot.vue?vue&type=template&id=739206f9&scoped=true&\"\nimport script from \"./AboutUniprot.vue?vue&type=script&lang=js&\"\nexport * from \"./AboutUniprot.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AboutUniprot.vue?vue&type=style&index=0&id=739206f9&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"739206f9\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div id=\"Sequence\" class=\"panel overlay about level3\">\n      <SearchPanel />\n      <AboutUniprot />\n    </div>\n</template>\n<script>\nimport SearchPanel from '../Search/SearchPanel'\nimport AboutUniprot from './AboutUniprot'\nexport default {\n  name: 'Sequence',\n  components: {\n    SearchPanel,\n    AboutUniprot\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sequence.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sequence.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Sequence.vue?vue&type=template&id=70424d2c&\"\nimport script from \"./Sequence.vue?vue&type=script&lang=js&\"\nexport * from \"./Sequence.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel overlay about level3\",attrs:{\"id\":\"Alignment\"}},[_c('div',{staticClass:\"scrollable\"},[(_vm.data.alignment)?_c('p',{staticClass:\"spacer\"},[_vm._v(\" \")]):_vm._e(),_c('p',[_vm._v(\"What you see in the 3D viewer is the experimentally-determined structure of \"+_vm._s(_vm.pdbName)+\" from \"),_c('a',{attrs:{\"href\":\"http://www.rcsb.org/pdb/explore.do?structureId={{}}\",\"target\":\"_blank\"}},[_vm._v(\" PDB entry \"+_vm._s(_vm.pdbId))]),_vm._v(\" chain \"+_vm._s(_vm.chainId)+\". \")]),_c('p',[_vm._v(\" The full-length sequence of the protein you specified (\"+_vm._s(_vm.uniprotName)+\") has been aligned onto the sequence used to determine this PDB structure.\")]),_c('p',[_vm._v(\" Overall, the two sequences align with \"+_vm._s(_vm.score)+\"% identity; any amino acid substitutions are indicated using dark coloring (see legend).\")]),_c('p',{staticClass:\"quality\"},[_vm._v(\" This alignment has an HHblits E-value of \"+_vm._s(_vm.evalueString)+\" × \"),_c('nobr',[_vm._v(\"10\"),_c('sup',[_vm._v(_vm._s(_vm.power))])]),_vm._v(\", which is considered to be \"+_vm._s(_vm.quality)+\". Based on cross-validation, the likelihood that your specified protein (\"+_vm._s(_vm.uniprotName)+\") adopts a structure similar to that shown is estimated to be \"+_vm._s(_vm.precisiontxt)+\"%.\")],1),_c('p',[_vm._v(\"Note that the structure shown is taken directly from the PDB; it has not been derived by ab-initio or comparative modeling.\")]),(_vm.data.alignment)?_c('div',[_c('p',[_c('b',[_vm._v(\"Alignment:\")]),_c('br'),_c('pre',[_vm._v(_vm._s(_vm.data.alignment))])])]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <!-- About Alignment -->\n    <div id=\"Alignment\" class=\"panel overlay about level3\" >\n      <div class=\"scrollable\">\n        <p class=\"spacer\" v-if=\"data.alignment\">&nbsp;</p>\n        <p>What you see in the 3D viewer is the experimentally-determined structure of {{pdbName}} from\n        <a href='http://www.rcsb.org/pdb/explore.do?structureId={{}}' target='_blank'> PDB entry {{pdbId}}</a> chain {{chainId}}.\n        </p>\n        <p> The full-length sequence of the protein you specified ({{uniprotName}}) has been aligned onto the sequence used to determine this PDB structure.</p>\n        <p> Overall, the two sequences align with {{score}}% identity; any amino acid substitutions are indicated using dark coloring (see legend).</p>\n        <p class='quality'> This alignment has an HHblits E-value of {{evalueString}} &times; <nobr>10<sup>{{power}}</sup></nobr>, which is considered to be {{quality}}.\n            Based on cross-validation, the likelihood that your specified protein ({{uniprotName}}) adopts a structure similar to that shown is estimated to be {{precisiontxt}}%.</p>\n            <p>Note that the structure shown is taken directly from the PDB; it has not been derived by ab-initio or comparative modeling.</p>\n        <div v-if=\"data.alignment\"> <!-- :use-click=\"hover\" -->\n            <!-- <p v-if=\"$mq === 'laptop' || $mq === 'tablet'\"><b>Alignment:</b><br/> -->\n            <p><b>Alignment:</b><br/>\n              <pre>{{ data.alignment }}</pre>\n            </p>\n        </div>\n      </div>\n    </div>\n</template>\n<script>\nimport store from '../../store/index'\nimport { mapGetters } from 'vuex'\n// import ExpandableTextLine from 'vue-expandable-text-line'\n\nexport default {\n  name: 'AboutAlignment',\n  // components: {\n  //   ExpandableTextLine\n  // },\n  // props: ['alignment'],\n  ...mapGetters([\n    'getPdbData'\n  ]),\n  computed: {\n    data () {\n      return {\n        alignment: store.state.alignment\n      }\n    },\n    pdb () {\n      return store.state.pdbData\n    }\n  },\n  data () {\n    return {\n      pdbName: null,\n      pdbId: null,\n      chainId: null,\n      score: null,\n      qualClass: null,\n      evalueString: null,\n      quality: null,\n      uniprotName: null,\n      precisiontxt: null,\n      power: null\n    }\n  },\n  watch: {\n    pdb: function (newData) {\n      var _this = this\n      if (newData.pdbName) {\n        _this.pdbName = newData.pdbName\n        _this.pdbId = newData.pdb_id\n        _this.chainId = newData.pdb_chain\n        _this.score = newData.score\n        _this.qualClass = newData.qualClass\n        _this.evalueString = newData.evalueString\n        _this.quality = newData.quality\n        _this.uniprotName = newData.uniprotName\n        _this.precisiontxt = newData.precisiontxt\n        _this.power = newData.power\n      }\n    }\n  },\n  methods: {\n    resetSelection: function () {\n      document.querySelectorAll('#titlebar span').forEach(el => {\n        el.className = 'titlepanel'\n      })\n      document.querySelectorAll('.contents').forEach(el => {\n        el.style.display = 'none'\n      })\n    }\n  },\n  mounted () {\n    this.resetSelection()\n  }\n}\n</script>\n<style scoped>\npre {\n  font-size: clamp(0.5rem, -0.254rem + 1.4141vw, 0.85rem);\n  max-height: 33vh;\n  overflow: auto;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AboutAlignment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AboutAlignment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AboutAlignment.vue?vue&type=template&id=181d1cba&scoped=true&\"\nimport script from \"./AboutAlignment.vue?vue&type=script&lang=js&\"\nexport * from \"./AboutAlignment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AboutAlignment.vue?vue&type=style&index=0&id=181d1cba&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"181d1cba\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel overlay about level3\",attrs:{\"id\":\"Structure\"}},[_c('div',{staticClass:\"scrollable\",attrs:{\"id\":\"description\",\"data-intro\":\"PDB summary for the shown structure.\",\"data-position\":\"bottom\"}},[_c('span',{staticClass:\"content\",attrs:{\"id\":\"description\",\"data-intro\":\"PDB summary for the shown structure.\",\"data-position\":\"bottom\"}},[_c('span',{staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"biounitDisplay\"}},[_c('span',{staticStyle:{\"display\":\"inline-block\"},attrs:{\"id\":\"biounitLeft\",\"title\":\"Navigate to other assemblies\"}},[_vm._v(\"<\")]),_vm._v(\"  \"),_c('span',{staticStyle:{\"display\":\"inline-block\"},attrs:{\"id\":\"biounitType\"}},[_vm._v(\"biounit\")]),_vm._v(\"  \"),_c('span',{staticStyle:{\"display\":\"inline-block\"},attrs:{\"id\":\"biounitCount\"}},[_vm._v(\"x/x\")]),_vm._v(\"   \"),_c('span',{staticStyle:{\"display\":\"inline-block\"},attrs:{\"id\":\"biounitRight\",\"title\":\"Navigate to other assemblies\"}},[_vm._v(\">\")]),_c('a',{attrs:{\"id\":\"helpBiounit\",\"href\":\"https://pdb101.rcsb.org/learn/guide-to-understanding-pdb-data/biological-assemblies#Anchor-BioUnit\",\"target\":\"_blank\",\"title\":\"Go to PDB to view explanation of assembly\"}},[_c('span',{staticClass:\"help roundButton\"})])]),_c('span',{staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"aboutPDBHider\",\"data-intro\":\"PubMed Information about PDB structure\",\"data-position\":\"left\"}},[_c('p',{attrs:{\"id\":\"classification\"}},[_vm._v(\"Classification unavailable\")]),_c('h4',{attrs:{\"id\":\"reference_title\"}},[_vm._v(\"Title unavailable\")]),_c('p',{attrs:{\"id\":\"reference_link\"}},[_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(\"PubMed Link unavailable\")])]),_c('p',{attrs:{\"id\":\"molecule\",\"title\":\"View this structure in Aquaria\",\"data-intro\":\"Information about currently focused PDB chain.\",\"data-position\":\"left\"}},[_c('strong',[_vm._v(\"Molecule: \")]),_c('span',{staticClass:\"text\"},[_vm._v(\"unavailable\")])])]),_c('p',{attrs:{\"id\":\"organism\"}},[_c('strong',[_vm._v(\"Organism: \")]),_c('span',{staticClass:\"text\"},[_vm._v(\"unavailable\")])]),_c('p',{attrs:{\"id\":\"small_molecules\"}},[_c('strong',[_vm._v(\"Small molecules: \")]),_c('span',{staticClass:\"text\"},[_vm._v(\"unavailable\")])]),_c('p',{attrs:{\"id\":\"method\"}},[_c('strong',[_vm._v(\"Method: \")]),_c('span',{staticClass:\"text\"},[_vm._v(\"unavailable\")])]),_c('p',{attrs:{\"id\":\"resolution\"}},[_c('strong',[_vm._v(\"Resolution: \")]),_c('span',{staticClass:\"text\"},[_vm._v(\"unavailable\")])]),_c('p',{attrs:{\"id\":\"pdb\"}},[_c('strong',[_vm._v(\"Protein Data Bank: \")]),_c('span',{staticClass:\"text\"},[_vm._v(\"unavailable\")])])])])])}]\n\nexport { render, staticRenderFns }","<template>\n    <!-- About PDB -->\n    <div id=\"Structure\" class=\"panel overlay about level3\">\n      <div class=\"scrollable\"  id=\"description\" data-intro=\"PDB summary for the shown structure.\" data-position=\"bottom\">\n        <span class=\"content\" id=\"description\" data-intro=\"PDB summary for the shown structure.\" data-position=\"bottom\">\n            <span id=\"biounitDisplay\" style=\"display: none;\">\n                <span id=\"biounitLeft\" style=\"display: inline-block;\" title=\"Navigate to other assemblies\">&lt;</span>\n                &nbsp;<span id=\"biounitType\" style=\"display: inline-block;\">biounit</span>\n                &nbsp;<span id=\"biounitCount\" style=\"display: inline-block;\">x/x</span>\n                &nbsp;\n                <span id=\"biounitRight\" style=\"display: inline-block;\" title=\"Navigate to other assemblies\">&gt;</span>\n                <a id=\"helpBiounit\" href=\"https://pdb101.rcsb.org/learn/guide-to-understanding-pdb-data/biological-assemblies#Anchor-BioUnit\" target=\"_blank\" title=\"Go to PDB to view explanation of assembly\">\n                    <span class=\"help roundButton\"> </span>\n                </a>\n            </span>\n            <span id=\"aboutPDBHider\" style=\"display: none;\" data-intro=\"PubMed Information about PDB structure\" data-position=\"left\">\n                <p id=\"classification\">Classification unavailable</p>\n                <h4 id=\"reference_title\">Title unavailable</h4>\n                <p id=\"reference_link\"><a href=\"#\">PubMed Link unavailable</a></p>\n                <p id=\"molecule\" title=\"View this structure in Aquaria\" data-intro=\"Information about currently focused PDB chain.\" data-position=\"left\">\n                    <strong>Molecule: </strong>\n                    <span class=\"text\">unavailable</span>\n                </p>\n            </span>\n            <p id=\"organism\"><strong>Organism: </strong><span class=\"text\">unavailable</span></p>\n            <p id=\"small_molecules\"><strong>Small molecules: </strong><span class=\"text\">unavailable</span></p>\n            <p id=\"method\"><strong>Method: </strong><span class=\"text\">unavailable</span></p>\n            <p id=\"resolution\"><strong>Resolution: </strong><span class=\"text\">unavailable</span></p>\n            <p id=\"pdb\"><strong>Protein Data Bank: </strong><span class=\"text\">unavailable</span></p>\n        </span>\n      </div>\n    </div>\n</template>\n<script>\nexport default {\n  name: 'AboutPdb'\n}\n</script>\n\n<style scoped>\n#aboutPDBHider{\n    height: 350px;\n    overflow: scroll;\n}\n\n#description span.content {\n    height: fit-content;\n    overflow: hidden;\n    display: block;\n}\ndiv.panel span.content, div.panel p {\n    padding: 0 6px;\n}\ndiv.panel span, span.section {\n    display: inline;\n}\n\nspan.explanation a {\n    color: #6df;\n    text-decoration: none;\n}\n\ndiv.panel span#biounitDisplay {\n    color: #555;\n    padding: 2px 0;\n    /* background-image: -webkit-linear-gradient(top, #ccc, #aaa); */\n}\n\n#biounitLeft {\n    background: transparent url('../../assets/images/ar-le.png') no-repeat center;\n}\n#biounitRight {\n    background: transparent url('../../assets/images/ar-ri.png') no-repeat center;\n}\n#biounitLeft, #biounitRight {\n    cursor: pointer;\n    color: transparent;\n    width: 16px;\n    text-align: center;\n}\n\ndiv.panel span.help {\n    display: inline-block;\n    width: 17px;\n    height: 17px;\n    background: url('../../assets/images/UI-help.png') no-repeat 0px 0px;\n    margin-left: 8px;\n}\n\ndiv.panel h4#reference_title {\n    padding: 0 6px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AboutPdb.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AboutPdb.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AboutPdb.vue?vue&type=template&id=01dba514&scoped=true&\"\nimport script from \"./AboutPdb.vue?vue&type=script&lang=js&\"\nexport * from \"./AboutPdb.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AboutPdb.vue?vue&type=style&index=0&id=01dba514&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"01dba514\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"structure-viewer\"}},[_c('span',{attrs:{\"id\":\"threeDSpan\"}},[_c('div',{attrs:{\"id\":\"threeDSpan-inner\"}})])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"structure-viewer\">\n    <span id=\"threeDSpan\">\n      <div id=\"threeDSpan-inner\"></div>\n    </span>\n    <!-- <Loader/> -->\n  </div>\n</template>\n\n<script>\n// import store from '../../store/index'\n// import Loader from '../AquariaLayout/Loader'\nexport default {\n  name: 'StructureViewer',\n  // components: {\n  //   Loader\n  // },\n  // @TODO On residue click, if new chain selected, remove sequence bar and diselect\n  // computed: {\n  //   sequence () {\n  //     return store.state.structure\n  //   }\n  // },\n  // watch: {\n  //   sequence (newVal, oldVal) {\n  //     if (oldVal.accession !== newVal.accession && oldVal.accession !== null) { // Only redraw coverage map if new chain\n  //       window.scrollBy(0, 100)\n  //       document.querySelector('#vis > .ruler').remove()\n  //       document.querySelectorAll('#vis > #allclusters .outer_container').forEach(el => el.remove())\n  //       window.AQUARIA.refresh() // This redraws matching structures panel\n  //       var hDiff = (window.outerHeight - window.innerHeight)\n  //       document.querySelector('#heightinspector').innerHTML = 'HO:' + window.outerHeight + ', hDiff:' + hDiff + ', scroll: ' + window.scrollY + ' bodyHeight: ' + document.body.scrollHeight\n  //     }\n  //   }\n  // },\n  mounted () {\n    function checkPhone () {\n      var iDevices = [\n        'iPad Simulator',\n        'iPhone Simulator',\n        'iPod Simulator',\n        'iPad',\n        'iPhone',\n        'iPod'\n      ]\n\n      if (navigator.platform) {\n        while (iDevices.length) {\n          if (navigator.platform === iDevices.pop() || (screen.width >= 300 && screen.width <= 600)) { return true }\n        }\n      } else {\n        return false\n      }\n    }\n    var isPhone = checkPhone()\n    if (isPhone) {\n      const baseWindowHeight = Math.max(window.innerHeight)\n      const documentBody = document.body\n      document.addEventListener('scroll', function (e) {\n        var newWindowHeight = Math.max(window.innerHeight)\n        if (newWindowHeight - 50 > baseWindowHeight) {\n          if (!documentBody.classList.contains('ios-toolbar')) {\n            documentBody.classList.add('ios-toolbar')\n          }\n        } else {\n          if (documentBody.classList.contains('ios-toolbar')) {\n            documentBody.classList.remove('ios-toolbar')\n          }\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style>\n.aquariaWarning {\n    position: absolute;\n    top: 50px;\n    left: 30%;\n    background: #FAC88C;\n    border: 15px solid transparent;\n    border-image: url('../../assets/images/border-1.png') 15 15 round;\n    margin: 12px auto;\n    width: 40%;\n    padding: 20px 20px 14px 20px;\n    text-align: left;\n    box-shadow: 6px 6px 15px #669;\n    z-index: 999;\n}\n\n#selectionText {\n    overflow: hidden;\n    position: absolute;\n    z-index: 95;\n    pointer-events: none;\n    display: none;\n    padding: 0px;\n    margin: 0px;\n    width: 200px;\n    height: 100px;\n}\n\n#threeDSpan-inner {\n  padding-bottom: 2px;\n  box-sizing: border-box;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n}\n\n#threeDSpan, #threeDSpan-inner-jolecule-soup-display {\n    height: 100vh;\n    width: 100vw;\n    overflow: hidden;\n    position: absolute;\n    z-index: 0;\n    top: 0%;\n}\n\n.jolecule-embed-toolbar, .jolecule-embed-toolbar a {\n    color: #777;\n    text-decoration: none;\n}\n.jolecule-embed-toolbar {\n    padding: 5px 5px 2px 5px;\n    vertical-align: middle;\n    background-color: #CCC;\n    color: #666;\n    font-size: 12px;\n    overflow: hidden;\n    box-sizing: border-box;\n    position: relative;\n    top: 6rem;\n}\n.jolecule-embed-footer {\n  position: absolute;\n  bottom: 0%;\n  width: 100%;\n}\n.jolecule-embed-body {\n    font-size: 12px;\n    letter-spacing: 0;\n    line-height: 1.2em;\n    color: #666;\n}\n.jolecule-button {\n  letter-spacing: 0;\n  font-family: \"Source Sans Pro\", sans-serif;\n}\n.jolecule-overlay-text {\n    z-index: 5001;\n    padding: 10px;\n    opacity: 0.7;\n    text-align: left;\n    line-height: 1.5em;\n    font-family: \"Source Sans Pro\", sans-serif;\n    font-size: 12px;\n    border: 1px solid #888;\n    background-color: rgba(200, 200, 200, 0);\n    color: #333;\n}\n.ios-toolbar .tabs {\n        transform: translateY(-25px);\n      }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StructureViewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StructureViewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StructureViewer.vue?vue&type=template&id=1cedbe50&\"\nimport script from \"./StructureViewer.vue?vue&type=script&lang=js&\"\nexport * from \"./StructureViewer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./StructureViewer.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"tabs rel level3\"},[_c('div',{staticClass:\"tab\",attrs:{\"id\":\"Structures\"},on:{\"click\":_vm.renderClusters}},[_c('a',{attrs:{\"href\":\"#Structures\"}},[_c('span',{staticClass:\"icon\"},[_c('img',{attrs:{\"src\":_vm.MS}})]),_vm._v(\"  Matching Structures  \"),(_vm.getStructCount > 0)?_c('span',{staticClass:\"counter\"},[_vm._v(\" \"+_vm._s(_vm.getStructCount.toLocaleString()))]):_vm._e()])]),_c('MatchingStructures'),_c('div',{staticClass:\"tab\",attrs:{\"id\":\"Features\"},on:{\"click\":_vm.renderFeatures}},[_c('a',{attrs:{\"href\":\"#Features\"}},[_c('span',{staticClass:\"icon\"},[_c('img',{attrs:{\"src\":_vm.FT}})]),_vm._v(\"  Features  \"),(_vm.getFeatCount)?_c('span',{staticClass:\"counter\",attrs:{\"id\":\"featureCounter\"}},[_vm._v(_vm._s(_vm.getFeatCount.toLocaleString()))]):_vm._e()])]),_c('Features')],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel\"},[_c('a',{staticClass:\"close intab\",attrs:{\"href\":_vm.data.hash},on:{\"click\":_vm.closeTab}}),_vm._m(0),_c('TreeView',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showTree),expression:\"showTree\"}],staticClass:\"level5\",attrs:{\"id\":\"treeView\",\"treeReady\":_vm.prop,\"count\":_vm.count,\"coordinates\":_vm.treeCoordinates,\"parentElem\":_vm.parentElem}}),_c('NodeLoader',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showLoader),expression:\"showLoader\"}],attrs:{\"coordinates\":_vm.treeCoordinates,\"change\":_vm.change}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"vis\"}},[_c('div',{attrs:{\"id\":\"allclusters\",\"data-intro\":\"Visual summary of all structures in PDB matching the specified protein, grouped by region of match.\",\"data-position\":\"left\"}})])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"scrim level6\",on:{\"click\":_vm.hideTree}}),_c('div',{staticClass:\"level7\",attrs:{\"id\":\"arc\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import d3 from 'd3'\nimport $ from 'jquery'\nimport * as Panels from '../../AquariaLayout/helpers/hidePanels'\nimport * as common from '../../AquariaLayout/helpers/common'\nimport * as panel3d from '../../StructureViewer/helpers/joleculeAPI'\nvar Highcharts = require('./highstocks.js')\nimport store from '../../../store/index'\n\nvar firstSpecifiedId = \"\";\nvar isPopupOpened = false\n\nexport function createFeatureMap (datum, extServerIds_, isAuto) {\n\n  // console.log('DOES IT COME HERE .... FEATURE MAP')\n  document.querySelectorAll(\"#selectedCluster [id*='r_'] rect\").forEach(function (part) {\n    part.style.fill = '#a5a5a5'\n    part.style.stroke = '#a5a5a5'\n  })\n  document.querySelectorAll(\"#selectedCluster [id*='r_'] polygon\").forEach(function (part) {\n    part.style.fill = '#a5a5a5'\n    part.style.stroke = '#a5a5a5'\n  })\n  this.width = document.getElementById('structure-viewer').offsetWidth / 1.2 - store.state.margin.right - store.state.margin.left\n  this.height = 40 - store.state.margin.top - store.state.margin.bottom + 35 // height\n  this.datum = datum\n  var outerdiv = d3.select('#selectedFeature').append('div').attr('id', 'outerFeatureMap')\n  this.drawTrack(this.datum, this.createSVGforFeature(outerdiv, '100vw', this.height + 10, this.width + 1), extServerIds_, isAuto)\n  d3.select('#outerFeatureMap > svg').attr('class', 'loadedFeature')\n}\n\n// Create SVG for selected feature\nexport function createSVGforFeature (outerdiv, width, height, viewboxWidth) {\n  this.nusvg = outerdiv.append('svg').attr('width', width)\n    .attr('height', height)\n    .attr('viewBox', '0 0 ' + viewboxWidth + ' ' + height)\n    .attr('preserveAspectRatio', 'none')\n  return this.nusvg\n}\n\n// Draw selected feature track\n/**\n * @\n */\nexport function drawTrack (datum, svg, extServerIds_, isAuto) {\n  var _this = this\n  var features = []\n  this.nusvg = svg\n  const AQUARIA = window.AQUARIA\n  if (AQUARIA.currentFeature.oid && datum && datum.Tracks && datum.Tracks.length > 1) {\n    features[0] = datum.Tracks[AQUARIA.currentFeature.oid]\n  } else if (datum && datum.Tracks) {\n    features = datum.Tracks\n  }\n\n  this.nusvg.on('click', function () {\n    if (d3.select(this).attr('class').includes('loaded')) {\n      // deselect feature (it's already displayed)\n    //   if (document.querySelector('.featureHeader.actived')) {\n    //     document.querySelector('.featureHeader.actived').click()\n    //   }\n      if (window.location.hash.includes('Features')) {\n        d3.select('svg.loaded').classed('loaded', false)\n        store.commit('showLoader', true)\n        store.commit('setLoaderMsg', 'Removing feature...')\n        store.commit('showLoader', false)\n        // Stu hack to detect feature changes\n        if (typeof AQUARIA.onFeatureChange === 'function') {\n          AQUARIA.onFeatureChange(null, 0)\n        }\n        _this.removeCurrentAnnotationFrom3DViewer()\n        AQUARIA.currentFeature.oid = null\n        AQUARIA.currentFeature.data = null\n        document.querySelector('#outerFeatureMap').remove()\n        document.querySelector('#popup').style.display = 'none'\n        Panels.hidePanels()\n      } else {\n\n      }\n    } else { // console.log(\"clicked to display feature\");\n      document.querySelector('.featureHeader.actived').click()\n      if (document.querySelector('#outerFeatureMap')) {\n        document.querySelector('#outerFeatureMap').remove()\n      }\n      var oid = d3.select(this).attr('id').split('_')[2]\n      store.commit('showLoader', true)\n      store.commit('setLoaderMsg', 'Loading feature...')\n      store.commit('showLoader', false)\n      if (datum.Server !== 'Added Features') {\n        AQUARIA.addedFeature = false\n      }\n      AQUARIA.passFeature(datum, oid, this)\n      // Stu hack to detect feature changes\n      if (typeof AQUARIA.onFeatureChange === 'function') {\n        AQUARIA.onFeatureChange(datum, oid)\n      }\n      // console.log(\"Datum\");\n      // console.log(datum);\n      // console.log(oid);\n      d3.selectAll('svg.loaded rect.feature').attr('fill', '#a4abdf')\n      d3.select('svg.loaded').classed('loaded', false)\n      d3.select(this).attr('class', 'loaded') // console.log(\"it's \" + d3.select(this).attr(\"class\"));\n      _this.createFeatureMap(datum, extServerIds_)\n      Panels.hidePanels()\n    }\n  })\n\n  this.nusvg.append('rect')\n    .attr('width', this.width + store.state.margin.left)\n    .attr('height', 25)\n    .attr('class', 'bg')\n    .attr('fill', 'none')\n\n  for (var o in features) {\n    // draw outline of the whole chain\n    this.nusg = this.nusvg.append('g').attr('transform', 'translate(0 ,20)')\n    // add center line\n    this.nusg.append('rect')\n      .attr('width', this.width)\n      .attr('height', 1)\n      .attr('transform', 'translate(0,13)')\n      .attr('class', 'insertion')\n  }\n\n\n  for (var p in features[o]) {\n    if (isPopupOpened == false && isAuto && typeof isAuto !== 'undefined' && isAuto == true){\n\n        var arrayPositions = getTrackWithOrder0Label(features)\n        if (arrayPositions.o != -1 && arrayPositions.p != -1){\n          for (var i =0; i<features[arrayPositions.o].length; i++){\n            this.drawFeatures(i, arrayPositions.o, features, extServerIds_)\n          }\n          // Apply colour\n          d3.selectAll('#selectedFeature rect.feature').attr(\n            'fill', function () {\n              return d3.select(this).attr('color')\n            })\n\n            // Dispatch first event.\n            firstSpecifiedId = 'r_' + arrayPositions.o + '_' + arrayPositions.p\n\n            var element = document.getElementById(firstSpecifiedId)\n            // console.log(\"The first specified element is \" + element)\n            var event = new MouseEvent('mouseover', {\n              'view': window,\n              'bubbles': true,\n              'cancelable': true\n            });\n\n            element.dispatchEvent(event);\n            d3.select('#' + firstSpecifiedId).attr('stroke-width', '0px')\n\n        }\n        else {\n          this.drawFeatures(p, o, features, extServerIds_, this)\n        }\n        isPopupOpened = true\n    }\n    else {\n      this.drawFeatures(p, o, features, extServerIds_, this)\n\n    }\n  }\n\n\n  d3.selectAll('#selectedFeature rect.feature').attr(\n    'fill', function () {\n      return d3.select(this).attr('color')\n    })\n\n\n\n}\n\nfunction getTrackWithOrder0Label(features) { // if exists\n  // return new Promise(function(resolve, reject){\n    var varRes = store.getters.getVariantResidues\n\n    var origFeatStr = ''\n    var resNums = Object.keys(varRes)\n    for (var i=0; i < resNums.length; i++){\n      if (varRes[resNums[i]].hasOwnProperty('order') && varRes[resNums[i]].order.includes(0)){\n        var idx = varRes[resNums[i]].order.indexOf(0)\n        if (idx !== -1) {\n          origFeatStr = varRes[resNums[i]].theOrigFeatStr[idx]\n        }\n      }\n    }\n\n    var values = {o: -1, p: -1}; var featNames = {}; // dict{featName} => [i, j]\n    if (origFeatStr != '' && features.length > 0){\n      for (var i=0; i < features.length; i++){\n        for (var j=0; j<features[i].length; j++){\n          featNames[features[i][j].name] = [i, j]\n          if (features[i][j].name.includes(origFeatStr)) {\n           values.o = i;\n           values.p = j;\n\n           // console.log(\"YAY THE FEATURE STRING WAS FOUND \" + values.o + \" \" + values.p)\n          }\n        }\n        /*\n        if (i == features.length - 1){\n          resolve(values)\n        }\n        */\n      }\n    }\n\n\n\n    var minOrder = -1;\n\n\n    if (values.o == -1 && values.p == -1){\n\n      for (var i=0; i < features.length; i++){\n        for (var j=0; j<features[i].length; j++){\n          featNames[features[i][j].name] = [i, j]\n        }\n      }\n\n\n\n      var featNames_keys = Object.keys(featNames)\n      for (var i=0; i < resNums.length; i++){\n        for (var j=0; j < varRes[resNums[i]].theOrigFeatStr.length; j++){\n          for (var k=0; k < featNames_keys.length; k++){\n            // console.log(\"This value is \" + varRes[resNums[i]].theOrigFeatStr[j] + \" \" + varRes[resNums[i]].order[j])\n            if (featNames_keys[k].includes(varRes[resNums[i]].theOrigFeatStr[j])){\n\n              if (minOrder == -1){\n                minOrder = varRes[resNums[i]].order[j]\n                values.o = featNames[featNames_keys[k]][0] \n                values.p = featNames[featNames_keys[k]][1] \n              }\n              else if (varRes[resNums[i]].order[j] < minOrder) { \n                minOrder = varRes[resNums[i]].order[j]\n                values.o = featNames[featNames_keys[k]][0] \n                values.p = featNames[featNames_keys[k]][1] \n              }\n\n            }\n          }\n          // varRes[resNum[i]].theOrigFeatStr[j]\n        }\n        \n        /* if (varRes[resNums[i]].hasOwnProperty('order') && varRes[resNums[i]].order.includes(0)){\n          var idx = varRes[resNums[i]].order.indexOf(0)\n          if (idx !== -1) {\n            origFeatStr = varRes[resNums[i]].theOrigFeatStr[idx]\n          }\n        } */\n      }\n    }\n    /*\n    else {\n      resolve(values)\n    }*/\n\n\n    return values\n  // })\n}\n\n// Draw feature by residue\nexport function drawFeatures (p, o, features, extServerIds_) {\n  var offsetWidth = document.getElementById('structure-viewer').offsetWidth\n  var seqLength = store.state.sequences[0].length\n\n  var myScale = d3.scale.linear().domain([1, seqLength]).range([1, document.getElementById('structure-viewer').offsetWidth / 1.2 - store.state.margin.right - store.state.margin.left - 5])\n  var trans_x = myScale(parseInt(features[o][p].start))\n  // var trans_x = Math.floor(parseInt(features[o][p].start)/seqLength * (offsetWidth - 300)) // ((parseInt(features[o][p].start)) * (parseFloat(window.AQUARIA.srw)))\n  this.nusg.append('rect')\n    .attr('width', function () { return (parseInt((features[o][p].size + 1) * window.AQUARIA.coverageMapsrw) > 2) ? parseInt((features[o][p].size + 1) * window.AQUARIA.coverageMapsrw) : 2 })\n    .attr('height', 14)\n    .attr('id', 'r_' + o + '_' + p)\n    .attr('x', trans_x)\n    .attr('transform', 'translate(0,6)')\n    .attr('color', features[o][p].color).attr('fill', '#a4abdf')\n    .attr('class', 'feature')\n    .on('mouseover', createMouseOverCallback(features[o][p], extServerIds_))\n    .on('mouseout',\n      function () {\n        var ID = d3.select(this).attr('id')\n        return d3.select(this).call(mouseoutFeature, ID)\n      })\n    // .attr('fill-opacity', function () {\n    //   return (this.datum.Class.track === 'single_track') ? 0.3 : 1\n    // })\n}\n\nexport function createMouseOverCallback (feature, extServerIds_) {\n  return function () {\n    // console.log(\">>>>>>>>>> over here ....???\");\n    var ID = d3.select(this).attr('id')\n    d3.select(this).call(mouseoverFeature, feature, ID, extServerIds_)\n  }\n}\n\nconst oneAaCodes = ['A', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'K', 'L', 'M', 'N', 'P', 'Q', 'R', 'S', 'T', 'V', 'W', 'Y']\n\n// show feature pop-up\nfunction showAnnotation (f, eid, extServerIds_) {\n\n  // console.log('showAnnotation.f is ')\n  // console.log(f)\n  // console.log(eid)\n\n  var urlhtml = ''\n  if (f.urls.length > 0) {\n    // var lnx = f.urls.split(\";\");\n    urlhtml = '<p>'\n    for (var i = 0; i < f.urls.length; i++) {\n      urlhtml += \"<a href='\" + f.urls[i].href + \"' target='_blank'>\" + f.urls[i].text + '</a>'\n    }\n    urlhtml += '</p>'\n  }\n  // $('div.popup').remove()\n  var balloon = '';\n  // var balloon = '<div style=\"display: none;\"> <div id=\"divVariantInfo\" class=\"aaLightBg\"></div><div id=\"divVI_chosen\"></div> <div id=\"divVI_posInfo\"><hr class=\"anAaHr\"><b>Residue ' + f.start + '</b></div> '\n\n  let oldAa = ''\n  if (f.name.includes('&#8201;&#8594;&#8201;')) {\n    oldAa = f.name.replace(/^.*\\(/, '')\n    // eslint-disable-next-line\n    oldAa = oldAa.replace(/\\&.*$/, '')\n  }\n  let btnsDiv = '<div id=\"buttons_eachAa\"> <b>See also:</b><p class=\"pAaColor\"> ' + oldAa + ' &rarr;</p>'\n  // balloon = balloon + \"<div id='divVI_varInfo'>\"\n  oneAaCodes.forEach(function (anAa, _i) {\n    if (anAa !== oldAa) {\n      // balloon = balloon + \"<div id='divVI_varInfo_\" + anAa + \"'></div>\"\n      const isUniCosOrFun = isUniCosOrFunPresent(anAa, f.desc, f.start)\n      btnsDiv = btnsDiv + \"<button id='btnVI_\" + anAa + \"'\"\n      if (isUniCosOrFun === true) {\n        btnsDiv = btnsDiv + ' class=\"btnAaBold_b\"> <b>' + anAa + '</b> '\n      } else {\n        btnsDiv = btnsDiv + ' class=\"btnAaBold\"> ' + anAa\n      }\n      btnsDiv = btnsDiv + '</button>'\n    }\n  })\n\n//  balloon = balloon + '</div>'\n  btnsDiv = btnsDiv + '</div>'\n//  balloon = balloon + btnsDiv\n//  balloon = balloon + '</div><div class=\"balloon\" id=\"balloon\"><span class=\"x\">&nbsp;</span><p id=\"popupheader\">'\n\n  if (f.name.includes('span_missenseHeading')) {\n    if (typeof extServerIds_ !== 'undefined') {\n      let isAnyFalse = false\n      for (const serverId in extServerIds_) {\n        if (extServerIds_[serverId] === false) {\n          isAnyFalse = true\n        }\n      }\n      if (isAnyFalse === true) {\n        // balloon = balloon + '<img src=\"/images/ajax-loader1.gif\" alt=\"Loading...\"  width=15/> '\n      }\n      // console.log(extServerIds_)\n    }\n  }\n  let balloonTitle = '<b>' + f.label + '</b>'\n\n  // balloon = balloon + f.label\n  if (!f.name.includes('span_missenseHeading')) {\n    // balloon = balloon + ' ('\n    balloonTitle = balloonTitle + ' ('\n    if (f.start === f.end) {\n      balloonTitle = balloonTitle + 'Residue ' + f.start\n      // store.commit('setPopupTitle', 'Residue ' + f.start)\n      // balloon = balloon + 'Residue ' + f.start\n    } else {\n      balloonTitle = balloonTitle + 'Residues ' + f.start + '-' + f.end\n      // balloon = balloon + 'Residues ' + f.start + '-' + f.end\n    }\n    // balloon = balloon + ') '\n    balloonTitle = balloonTitle + ') '\n  }\n\n  if (!f.name.includes('span_missenseHeading')) {\n    // balloon = balloon + '<br/>'\n  }\n\n  // balloon = balloon.append(f.desc);\n  // balloon = balloon + f.desc + '</p>' + urlhtml + '</div>'\n  let balloonText = f.desc + \"<br>\" + urlhtml;\n  if (f.name.includes('span_missenseHeading')){\n    if (f.start != f.end){\n      store.commit('setVariant', f.start + '-' + f.end)\n      store.commit('setPopupTitle', f.label)\n      getIdxInVarRes(f.start + '-' + f.end, f.label)\n    }\n    else {\n      store.commit('setVariant', f.start)\n      store.commit('setPopupTitle', f.label)\n      getIdxInVarRes(f.start, f.label)\n    }\n  }\n  else {\n    store.commit('setVariant', -1)\n    store.commit('setPopupTitle', balloonTitle)\n    store.commit('setPopupText', balloonText)\n    store.commit('setVariantIdx', -1)\n  }\n\n\n\n  // store.commit('setPopupText', balloonText)\n  // d3.select('#popuptext')\n  //   // .append('div')\n  //   // .attr('class', 'popup')\n  //   .html(balloon)\n\n  // $('div.popup').fadeIn()\n  // var popheight = $('div.popup').innerHeight()\n  var fpos = document.querySelector('#' + eid).getBoundingClientRect()\n  var svgdim = document.querySelector('#' + eid).getBBox()\n  var fwidth = svgdim.width\n  if (Object.prototype.hasOwnProperty.call(f, 'hc_go') && Object.prototype.hasOwnProperty.call(f, 'hc_ec') && Object.prototype.hasOwnProperty.call(f, 'hc_species')) {\n    // console.log('CATH plot data')\n    // console.log(f)\n    handleCathPopups(f).then(function () {\n      updateTheStyleOfHc()\n      // var fleft = d3.select('#' + eid).attr('transform').split('(')[1].split(',')[0]\n      // var ftop = fpos.top\n      common.appendPopup(balloon, fpos, fwidth, true)\n    })\n  } else {\n    console.log('CATH plot no data')\n    common.appendPopup(balloon, fpos, fwidth, true)\n    // console.log(f)\n  }\n\n  \n\n  // var bleft = parseInt(fpos.left + (fwidth / 2) - 235)\n  // var btop = parseInt(fpos.top - popheight)\n\n  // if (bleft < 0) {\n  //   bleft = 0\n  //   document.querySelector('div#popup').style.backgroundPositionX = '0px'\n  // } else if (parseInt(fpos.left + (fwidth / 2)) + (470 / 2) > window.innerWidth) {\n  //   bleft = bleft - 470 / 2\n  //   document.querySelector('div#popup').style.backgroundPositionX = 'right'\n  // } else {\n  //   document.querySelector('div#popup').style.backgroundPositionX = 'center'\n  // }\n\n  // $('div#popup').css({\n  //   left: bleft + 'px',\n  //   top: btop + 'px',\n  //   width: '470px'\n  // })\n\n  // // Click on X to close popup\n  // $('span.x').on('click', function () {\n  //   $('div.popup').fadeOut()\n  // })\n\n  // $('div.popup').on('hover', function () {\n  //   clearTimeout(s)\n  // }, function () {\n  //   s = setTimeout(function () {\n  //     $('div#popup').fadeOut()\n  //   }, 500)\n  // })\n}\n\nfunction getIdxInVarRes(resNum, popupText){\n  var varRes = store.getters.getVariantResidues\n  // console.log(\"GAMMA \" + resNum + \" \" + popupText)\n  // console.log(varRes)\n\n  if (varRes.hasOwnProperty(resNum) && varRes[resNum].hasOwnProperty('theOrigFeatStr')){\n    for (let i=0; i < varRes[resNum].theOrigFeatStr.length; i++){\n      if (popupText.includes(varRes[resNum].theOrigFeatStr[i])){\n        store.commit('setVariantIdx', i)\n        console.log(\"Set variant idx \" + i)\n        break\n      }\n    }\n  }\n  /*\n  else { // handle the ranges (when seems like residue is only plotted on a single residue in track)\n    let resNums = Object.keys(varRes)\n    for (let j =0; j < resNums.length; j++) {\n      if (resNums[j].match(\"-\")) {\n        let arr = resNums[j].split(\"-\")\n        if (arr[0] == resNum){\n          for (let i=0; i < varRes[resNums[j]].theOrigFeatStr.length; i++){\n            if (popupText.includes(varRes[resNums[j]].theOrigFeatStr[i])){\n              store.commit('setVariantIdx', i)\n              console.log(\"Set variant idx \" + i)\n              break\n            }\n          }\n        }\n      }\n    }\n  }\n  */\n}\n\nvar t, s\nexport function mouseoverFeature (el, f, eid, extServerIds_) {\n  t = setTimeout(function () {\n    showAnnotation(f, eid, extServerIds_)\n  }, 500)\n  d3.select('#' + eid).attr('stroke-width', '2px').attr('stroke', 'white')\n}\n\n// Mouseout from feature\nexport function mouseoutFeature (el, eid) {\n  clearTimeout(t)\n  d3.select('#' + eid).attr('stroke-width', '0px')\n  s = setTimeout(function () {\n    moveTheDiv()\n      .then(function () {\n        $('div.popup').fadeOut()\n      })\n      .catch(\n        function (error) {\n          console.log(error)\n        })\n  }, 500)\n}\n\nexport function moveTheDiv () {\n  return new Promise(function (resolve, reject) {\n    const aSuperFamFeature = document.getElementById('superFamCharts_0_go')\n    document.getElementById('superFamCharts').append(aSuperFamFeature)\n  })\n}\n\nfunction isUniCosOrFunPresent (anAa, desc, resNum) {\n  // console.log('These values are: ' + anAa + ' ' + resNum)\n  const tagOpen = '<toReplace_varInfo_' + anAa + '>'\n  const tagClose = '</toReplace_varInfo_' + anAa + '>'\n\n  const firstOpenPos = desc.indexOf(tagOpen)\n  const lastClosePos = desc.lastIndexOf(tagClose)\n\n  const description = desc.substring(firstOpenPos, lastClosePos)\n\n  if (description.match('UniProt') || description.match('FunVar') || description.match('COSMIC') || (window.AQUARIA.hasOwnProperty('variantStructs') && window.AQUARIA.variantStructs && window.AQUARIA.variantStructs.hasOwnProperty(resNum) && window.AQUARIA.variantStructs[resNum].hasOwnProperty(anAa) && window.AQUARIA.variantStructs[resNum][anAa].hasOwnProperty('pdbs') && window.AQUARIA.variantStructs[resNum][anAa]['pdbs'].length > 0)) {\n    return true\n  }\n  return false\n}\n\n// DAS annotation handling\n\n/**\n * removes the current annotation track from the 3D viewer\n */\nexport function removeCurrentAnnotationFrom3DViewer () {\n  // remove existing Annotation\n  const currentAnnotationsIn3DViewer = window.AQUARIA.currentAnnotationsIn3DViewer\n  if (currentAnnotationsIn3DViewer !== undefined) {\n    for (var i in currentAnnotationsIn3DViewer) {\n      // API call\n      panel3d.removeAnnotation(currentAnnotationsIn3DViewer[i].id,\n        currentAnnotationsIn3DViewer[i].annotationName)\n    }\n    currentAnnotationsIn3DViewer.length = 0\n  }\n}\n\n// ////////////////////// CATH in popup\n\nfunction handleCathPopups (f) {\n  return new Promise(function (resolve, reject) {\n    // console.log(\"here...??\");\n    // handle this one.\n    if (typeof f.hc_go !== 'undefined' && Object.prototype.hasOwnProperty.call(f.hc_go, 'data') && Object.prototype.hasOwnProperty.call(f.hc_go.data, 'series') && f.hc_go.data.series.length >= 2) {\n      doThePlottingV2('hc_go_div', f.hc_go.data.series[0].data, f.hc_go.data.series[1].data, '', f.hc_go.data.series[0].size, f.hc_go.data.series[0].dataLabels.color, f.hc_go.data.series[0].dataLabels.dist, f.hc_go.data.series[1].innerSize, f.hc_go.data.series[0].name, f.hc_go.data.series[1].name, f.hc_go.data.series[1].dataLabels.color).then(function () {\n        // console.log('CATH plot: 1')\n        document.getElementById('hc_go').prepend(document.getElementById('hc_go_div'))\n      })\n        .catch(function (error) {\n          // console.log(\"CATH plot: 2\");\n          // if (!document.getElementById('hc_go_noData')){\n          // create element\n          createANewDivHcNoData('hc_go_noData').then(function () {\n            document.getElementById('hc_go').prepend(document.getElementById('hc_go_noData'))\n            document.getElementById('hc_go_noData').innerHTML = document.getElementById('hc_go_noData').innerHTML + '<br> <br> <center> No data</center>'\n            console.log('featureslist.showAnnotation ERROR ' + error)\n          })\n        // }\n        })\n    } else {\n      // no data.\n\n      // if (!document.getElementById('hc_go_noData')){\n      // create element\n      createANewDivHcNoData('hc_go_noData').then(function () {\n        document.getElementById('hc_go').prepend(document.getElementById('hc_go_noData'))\n        document.getElementById('hc_go_noData').innerHTML = document.getElementById('hc_go_noData').innerHTML + '<br> <br> <center> No data</center>'\n      })\n      // }\n      // console.log('CATH plot: 3')\n\n      // document.getElementById('hc_go_div').style['background-color'] = \"white\";\n    }\n\n    if (typeof f.hc_ec !== 'undefined' && Object.prototype.hasOwnProperty.call(f.hc_ec, 'data') && Object.prototype.hasOwnProperty.call(f.hc_ec.data, 'series') && f.hc_ec.data.series.length >= 2) {\n      doThePlottingV2('hc_ec_div', f.hc_ec.data.series[0].data, f.hc_ec.data.series[1].data, '', f.hc_ec.data.series[0].size, f.hc_ec.data.series[0].dataLabels.color, f.hc_ec.data.series[0].dataLabels.dist, f.hc_ec.data.series[1].innerSize, f.hc_ec.data.series[0].name, f.hc_ec.data.series[1].name, f.hc_ec.data.series[1].dataLabels.color).then(function () {\n        document.getElementById('hc_ec').prepend(document.getElementById('hc_ec_div'))\n      })\n        .catch(function (error) {\n          // if (!document.getElementById('hc_ec_noData')){\n          // create element\n          createANewDivHcNoData('hc_ec_noData').then(function () {\n            document.getElementById('hc_ec').prepend(document.getElementById('hc_ec_noData'))\n            document.getElementById('hc_ec_noData').innerHTML = document.getElementById('hc_ec_noData').innerHTML + '<br> <br> <center> No data</center>'\n            console.log('featureslist.showAnnotation ERROR ' + error)\n          })\n          // }\n        })\n    } else {\n      // no data\n      // document.getElementById('hc_ec').innerHTML = document.getElementById('hc_ec').innerHTML + ' <br> No data';\n      // if (!document.getElementById('hc_ec_noData')){\n      // create element\n      createANewDivHcNoData('hc_ec_noData').then(function () {\n        document.getElementById('hc_ec').prepend(document.getElementById('hc_ec_noData'))\n        document.getElementById('hc_ec_noData').innerHTML = document.getElementById('hc_ec_noData').innerHTML + '<br> <br> <center> No data</center>'\n      })\n        .catch(function () {\n        })\n      // }\n    }\n\n    if (typeof f.hc_species !== 'undefined' && Object.prototype.hasOwnProperty.call(f.hc_species, 'data') && Object.prototype.hasOwnProperty.call(f.hc_species.data, 'series') && f.hc_species.data.series.length >= 2) {\n      doThePlottingV2('hc_species_div', f.hc_species.data.series[0].data, f.hc_species.data.series[1].data, '', f.hc_species.data.series[0].size, f.hc_species.data.series[0].dataLabels.color, f.hc_species.data.series[0].dataLabels.dist, f.hc_species.data.series[1].innerSize, f.hc_species.data.series[0].name, f.hc_species.data.series[1].name, f.hc_species.data.series[1].dataLabels.color).then(function () {\n        document.getElementById('hc_species').prepend(document.getElementById('hc_species_div'))\n      })\n        .catch(function (error) {\n        // if (!document.getElementById('hc_species_noData')){\n        // create element\n          createANewDivHcNoData('hc_species_noData').then(function () {\n            document.getElementById('hc_species').prepend(document.getElementById('hc_species_noData'))\n            document.getElementById('hc_species_noData').innerHTML = document.getElementById('hc_species_noData').innerHTML + '<br> <br> <center> No data</center>'\n\n            console.log('featureslist.showAnnotation ERROR ' + error)\n          })\n          // }\n        })\n    } else {\n      createANewDivHcNoData('hc_species_noData').then(function () {\n        document.getElementById('hc_species').prepend(document.getElementById('hc_species_noData'))\n        document.getElementById('hc_species_noData').innerHTML = document.getElementById('hc_species_noData').innerHTML + '<br> <br> <center> No data</center>'\n      })\n    }\n    resolve()\n  })\n}\n\nfunction updateTheStyleOfHc () {\n  const hcSeriesGroup = document.getElementsByClassName('highcharts-pie-series')\n  // console.log(\"The highcharts series group are: \");\n  // console.log(hcSeriesGroup);\n  // console.log(hcSeriesGroup.children('path'));\n\n  for (const key in hcSeriesGroup) {\n    if (Object.prototype.hasOwnProperty.call(hcSeriesGroup, key)) {\n      /* hcSeriesGroup[key].childNodes.forEach(function(item, i){\n      console.log(\"The item is\");\n      console.log(item);\n      }); */\n\n      const thePaths = hcSeriesGroup[key].getElementsByTagName('path')\n      // console.log(\"The paths are\");\n      // console.log(thePaths);\n\n      for (const pathKey in thePaths) {\n        if (Object.prototype.hasOwnProperty.call(thePaths, pathKey)) {\n          // console.log('The path is ');\n          // console.log(thePaths[pathKey]);\n          // console.log(thePaths[pathKey].getAttribute('fill'));\n\n          const theColor = thePaths[pathKey].getAttribute('fill')\n\n          thePaths[pathKey].removeAttribute('fill')\n          thePaths[pathKey].setAttribute('style', 'fill:' + theColor)\n        }\n      }\n    }\n  }\n}\n\nfunction doThePlottingV2 (divId, theSeriesDataInner, theSeriesDataOuter, theTitle, theSizeInner, labelColInner, labelDistInner, innerSizeOuter, nameInner, nameOuter, labelColOuter) {\n  return new Promise(function (resolve, reject) {\n    createANewDivHcNoData(divId).then(function () {\n      // First add new Div.\n      try {\n        Highcharts.chart(divId, {\n          chart: {\n            type: 'pie',\n            margin: 0\n          },\n          title: {\n            text: theTitle\n          }, /*\n          subtitle: {\n          text: 'Source: <a href=\"http://statcounter.com\" target=\"_blank\">statcounter.com</a>'\n          }, */\n          plotOptions: {\n            pie: {\n              shadow: false,\n              center: ['50%', '50%']\n            }\n          },\n          tooltip: {\n            valueSuffix: '%'\n          },\n          series: [{\n            name: nameInner,\n            data: theSeriesDataInner,\n            size: theSizeInner,\n            dataLabels: {\n              enabled: false,\n              formatter: function () {\n                return this.y > 3 ? this.point.name : null\n              },\n              color: labelColInner,\n              distance: labelDistInner\n            }\n          }, {\n            name: nameOuter,\n            data: theSeriesDataOuter,\n            // size: '80%',\n            innerSize: innerSizeOuter,\n            dataLabels: {\n              enabled: false,\n              formatter: function () {\n                // display only if larger than 1\n                return this.y > 1 ? '<b>' + this.point.name + ':</b> ' +\n                this.y + '%' : null\n              },\n              color: labelColOuter\n            },\n            id: 'versions'\n          }],\n          responsive: {\n            rules: [{\n              condition: {\n                maxWidth: 100\n              },\n              chartOptions: {\n                series: [{\n                }, {\n                  id: 'versions',\n                  dataLabels: {\n                    enabled: false\n                  }\n                }]\n              }\n            }]\n          }\n        })\n        resolve()\n        // console.log('In the highcharts plotting function')\n      } catch (error) {\n        console.log('Highcharts error')\n        console.log(error)\n        resolve()\n        // console.log('In the highcharts plotting function')\n      }\n    })\n    /* }\n    catch(error){\n    console.log(\"Highcharts error\");\n    console.log(error);\n    } */\n  })\n}\n\nfunction createANewDivHcNoData (divId) {\n  return new Promise(function (resolve, reject) {\n    if (document.getElementById(divId)) {\n      document.getElementById(divId).remove() //  = '';\n    }\n    // if (!document.getElementById(divId)){\n    const newDiv = document.createElement('div')\n    document.getElementById('superFamCharts').append(newDiv)\n    newDiv.id = divId\n    newDiv.style = 'width: 100px; height: 100px; margin: 0 auto; background-color: white;'\n\n    // if (document.getElementById(divId)){\n    resolve()\n    // }\n    // }\n  })\n}\n","/* eslint-disable no-mixed-spaces-and-tabs */\n/* eslint-disable no-tabs */\nimport ClusterRenderer from './clusterRenderer'\nimport d3 from 'd3'\nimport store from '../../../store/index'\nimport * as loadData from '../../../utils/loadData'\nvar width, height, xScale, rank, clusters\nvar clusterRenderers = []\n// Render 2D structures in SVG.\n//\n// Authors: Christian Stolte, Vivian Ho, Kenny Sabir\n// Utilises new format (see matching_structures_multipleuniprotinput.js)\n// as opposed to matching_structures_singleuniprotinput.js\n// new tree drawing routine\n\nfunction onTextClick (d, clickCoord) {\n  // Sets tree data for clusters\n  var clusterN = parseInt(d.attr('id').substr(15))\n  store.commit('setTreeData', clusterN)\n  store.commit('setTreeCoordinates', clickCoord)\n}\n\nexport function selectCluster (cluster, clusterNumber) {\n  if (document.querySelector('g.loaded')) document.querySelector('g.loaded').classList.remove('loaded')\n  d3.select('div.container.loaded').classed('loaded', false)\n  d3.select('g#structure_' + cluster.pdb_id + '_' + clusterNumber).classed('loaded', true)\n  d3.select('div#c_' + cluster.pdb_id + '_' + clusterNumber).classed('loaded', true)\n}\n\nexport function initialise (sequence) {\n  rank = 0\n  var seqLength = sequence.length\n\n  width = document.getElementById('structure-viewer').offsetWidth - store.state.margin.right - store.state.margin.left - 50\n  height = 40 - store.state.margin.top - store.state.margin.bottom + 35 // height\n  xScale = d3.scale.linear().domain([1, seqLength]).range([1, width]) // .range([1, width]);\n\n  // set single residue width\n  AQUARIA.srw = xScale(100) / 100\n\n  if (document.querySelector('#vis > .ruler')) {\n    document.querySelector('#vis > .ruler').remove()\n  }\n  // draw axis ruler\n  drawAxisRuler('vis')\n}\n\nexport function updateSizes (newClusters) {\n  clusters = newClusters\n  for (var i = 0; i < newClusters.length; i++) {\n    clusterRenderers[i].updateCluster(newClusters[i])\n  }\n}\n\nexport function refresh () {\n  clusterRenderers = []\n  clusters = []\n  initialise (store.state.sequences[0])\n  var existingClusters = store.state.Matches.clusters\n  existingClusters.forEach(function (cluster) {\n    RenderCluster(cluster)\n  })\n  updateSizes(existingClusters)\n  selectCluster()\n}\n\nexport function RenderCluster (cluster) {\n  var clusterRenderer = new ClusterRenderer(cluster, rank, xScale, width, height, function (d, clickCoord) {\n      console.log('ShowMatchingStructures.addCluster.onclick', clickCoord)\n      onTextClick(d, clickCoord)\n    }, clusterItemClick, '#allclusters')\n  clusterRenderers.push(clusterRenderer)\n  rank++\n}\n\nfunction getClusterId (d) {\n  return parseInt(d.attr('id').substr(15))\n}\n\nfunction clusterItemClick (d) {\n  history.pushState('', document.title, window.location.pathname + window.location.search)\n  var shortId = d.attr('id').substr(10, 4)\n  var cluster_nbr = getClusterId(d)\n\n  // Load structure\n  selectCluster(shortId, cluster_nbr)\n  console.log(\n    'ShowMatchingStructures.clusterItemClick',\n    'shortId: ' + shortId,\n    'cluster-number: ' + cluster_nbr,\n    clusters[cluster_nbr]\n  )\n\n  var member = clusters[cluster_nbr].members[0]\n  loadData.displayMember(member)\n}\n\nexport function drawAxisRuler (layerId) { // console.log(\"Ruler// \"+width+\",\n  width = document.getElementById('structure-viewer').offsetWidth - store.state.margin.right - store.state.margin.left - 50\n  var rsvg = d3.select('#' + layerId)\n    .insert('div', ':first-child')\n    .attr('class', 'ruler')\n    .attr('data-intro', \"Graphical representation of the specified protein's sequence\")\n    .attr('data-position', 'left')\n    .append('svg').attr('width',\n      parseInt(width + store.state.margin.left)).attr('viewBox',\n      '0 0 ' + parseInt(width + store.state.margin.left) + ' 15').attr(\n      'preserveAspectRatio', 'none').attr('height', 15).append('g').attr(\n      'transform', 'translate(' + store.state.margin.left + ',0)')\n\n  rsvg.append('g').attr('class', 'x axis').call(\n    d3.svg.axis()\n      .scale(xScale)\n      .orient('bottom')\n      .tickSize(4, 2, 6)\n      .tickPadding(2)\n    //\t.tickValues([allTicks,this.sequence.length])\n  )\n\n  var tickList = []\n  var allTicks = d3.selectAll('#vis div.ruler g.x text')[0]\n\n  for (var n = 0; n < allTicks.length; n++) {\n    tickList.push(+allTicks[n].textContent)\t\t// console.log(n+\":\"+tickList);\n  }\n\n  tickList = tickList.filter(doesItFit) // console.log(\"filtered:\"+tickList);\n  tickList.push(store.state.sequences[0].length)\n  tickList.unshift(1)\n  // left\n  // console.log(\" = = = ticks: \"+allTicks)\t;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// margin:\n  // console.log(tickList);\n\n  d3.select('#' + layerId + ' div.ruler g.x').call(\n    d3.svg.axis()\n      .scale(xScale)\n      .orient('bottom')\n      .tickSize(4, 2, 6)\n      .tickPadding(2)\n      .tickValues(tickList)\n  )\n\n  d3.selectAll('g.x text').attr('text-anchor', 'end')\n}\n\nfunction doesItFit (x) {\n  var rulerEnd = store.state.sequences[0].length\n  return (x !== 1 && x !== rulerEnd && x * AQUARIA.srw < (rulerEnd * AQUARIA.srw - 30))\n}","// var Cluster = require('./cluster')\nimport d3 from 'd3'\nimport store from '../../../store/index'\nvar Panels = require('../../AquariaLayout/helpers/hidePanels')\n\nexport default class ClusterRenderer {\n  constructor(cluster, rank, xScale, width, height, onTextClick, onClusterItemClick) {\n    this.width = width\n    this.height = height\n    this.xScale = xScale\n    this.onTextClick = onTextClick\n    this.clustSize = 0\n    this.onClusterItemClick = onClusterItemClick\n    this.rank = rank\n    this.cluster = cluster\n    var container = this.drawClusterContainer(cluster, rank)\n    if (typeof container !== 'undefined') {\n      this.drawCluster(cluster, rank)\n    }\n  }\n\n  updateCluster (clusterToUpdate) {\n    var that = this\n    this.cluster = clusterToUpdate\n    this.clustSize = clusterToUpdate.cluster_size\n    var id = this.cluster.pdb_id.toLowerCase() + '_' + this.rank\n    if (typeof this.nusvg !== 'undefined') {\n      this.nusvg.select('g#structure_' + id + ' text')\n        .text(function () {\n          return that.clustSize\n        })\n    }\n  }\n  \n  drawClusterContainer (cluster, s) {\n    // scale start and end coordinates\n    var that = this\n    var member = cluster.members[0]\n    var pdb_chain = cluster.pdb_chain[0]\n    // //var repeat_domain = data.Repeat_domains[0];\n  \n    if (cluster.secondary_structure.length === 0 || cluster.secondary_structure[0].length === 0) {\n      console.log('ClusterRenderer.drawClusterContainer error: cannot draw cluster as it has no secondary structure: ', cluster)\n      return\n    }\n  \n    var structStart = this.xScale(cluster.secondary_structure[0][0].start)\n    var structEnd = this.xScale(cluster.secondary_structure[0][cluster.secondary_structure[0].length - 1].end)\n    // console.log (\"structStart: \" + structStart + \", structEnd: \" +\n    // structEnd);\n    var id = cluster.pdb_id.toLowerCase() + '_' + s\n    this.clustSize = cluster.cluster_size\n    // ///var cluster_nbr = s;\n    var identity_score = cluster.alignment_identity_score\n    // set padding for labels\n    var pad = 0\n    if (this.clustSize > 99) {\n      pad = 8\n    }\n    if (this.clustSize > 999) {\n      pad = 18\n    }\n    if (this.clustSize < 10) {\n      pad = -6\n    }\n  \n    var outerdiv = d3.select('#allclusters').append('div').attr('id', 'out_' + id).attr(\n      'class', 'outer_container')\n    outerdiv.append('svg').attr('width', 40).attr('height', 40).attr('viewBox',\n      '0 0 40 40').attr('preserveAspectRatio', 'none')\n    // add identity percentage\n      .append('text').attr('text-anchor', 'end').attr('class', 'percentage').attr(\n        'x', 28).attr('y', 26).text(identity_score + '%')\n  \n    // draw outline of the whole chain\n    this.nusvg = outerdiv.append('div').attr('id', 'c_' + id).attr('class',\n      'container').append('svg').attr('width', this.width + 200).attr('height',\n      this.height + 30)\n      .attr('viewBox', '0 0 ' + (this.width + 200) + ' ' + (this.height + 30)).attr(\n        'preserveAspectRatio', 'none')\n  \n    this.nusvg.append('g').attr('id', 'structure_' + id).attr('transform',\n      'translate(' + (store.state.margin.left + structStart) + ',20)').on(\n      'mouseover', function () {\n        return d3.select(this).call(that.mouseover, that)\n      }).on('mouseout', function () {\n      return d3.select(this).call(that.mouseout, that)\n    }).append('rect') // background shape for cluster size label\n      .attr('transform', 'translate(' + (structEnd - structStart - 5) + ',5)')\n      .attr('class', 'handle').attr('width', 32 + pad).attr('height', 16).attr(\n        'rx', 6)\n  \n    this.nusvg.select('g#structure_' + id).append('g').attr('class', 'cluster').attr(\n      'title',\n      'Click to load ' + id.substr(0, 4) + ', chain ' + pdb_chain +\n            ' into structure view. Compared to the specified protein, this structure has ' + identity_score + '% sequence identity. ').attr('width', structEnd - structStart + 2)\n      .attr('height', 26).on('click', function () {\n        return d3.select(this.parentNode).call(function (d) {\n          console.log('ClusterRenderer.nusvg.select clicked! ' + d)\n          Panels.hidePanels()\n          that.onClusterItemClick(d)\n        })\n      })\n  \n    this.nusvg.select('g#structure_' + id + ' g.cluster').append('rect').attr('class',\n      'cluster').attr('width', structEnd - structStart + 3).attr('height', 26)\n      .attr('rx', 6)\n  \n    // add center line\n    this.nusvg.select('g#structure_' + id + ' g.cluster').append('rect').attr('width',\n      structEnd - structStart).attr('height', 1).attr('transform',\n      'translate(0,13)').attr('class', 'insertion')\n  \n    // add thumbnail images\n    this.addThumbnails(id, structStart, structEnd, pad)\n  \n    this.nusvg.select('g#structure_' + id).append('text') // label for cluster size\n      .attr('text-anchor', 'end').attr('fill', 'white').style(\"font-size\", \"16px\").attr('x',\n        (structEnd - structStart + 24 + pad)).attr('y', 13).attr('dx', -3) // padding-right\n      .attr('dy', '.35em') // vertical-align: middle)\n  \n    var clickTitle = 'Click to see ' + that.clustSize + ' structures in this cluster'\n    this.nusvg.select('g#structure_' + id + ' text, g#structure_' + id).attr('class',\n      'expandable').attr('title',\n      clickTitle)\n  \n    //\tvar clickClusterEvent = new CustomEvent(\n    //\t\t\t\"clusterExpanded\",\n    //\t\t\t{\n    //\t\t\t\tdetail: {\n    //\t\t\t\t\tmessage: clickTitle,\n    //\t\t\t\t\ttime: new Date(),\n    //\t\t\t\t},\n    //\t\t\t\tbubbles: true,\n    //\t\t\t\tcancelable: true\n    //\t\t\t}\n    //\t\t);\n  \n    this.nusvg.select('g#structure_' + id + ' text').on('click', function () {\n        that.onTextClick(d3.select(this.parentNode), this.getBoundingClientRect())\n      })\n  \n    return outerdiv\n  }\n  \n  drawCluster (cluster, rank) {\n    var that = this\n    cluster.secondary_structure[0].forEach(function (d, index) {\n      // convert strings to numbers\n      d.start = +d.start\n      d.end = +d.end // console.log(d.type +\" \"+index+\", from \"+d.start+\" to\n      // \"+d.end);\n  \n      // draw the secondary structure, etc.\n      that.drawResidues(cluster, rank, d)\n    })\n    this.setConservation(rank, cluster)\n  }\n  \n  drawResidues (cluster, rank, el) {\n    // for each residue, draw one rectangle with a unique position id, so we can\n    // assign a class/status later\n    var offset = cluster.secondary_structure[0][0].start\n  \n    var thickness = 0\n  \n    for (var n = el.start; n <= el.end; n++) {\n      var conservation = cluster.conservationArray[0][n]\n      if (n != el.end && conservation === cluster.conservationArray[0][n + 1]) {\n        thickness++\n        continue\n      }\n      var rect = this.nusvg.select(\n        'g#structure_' + cluster.pdb_id.toLowerCase() + '_' + rank +\n              ' g.cluster').append('g').attr('class', 'residue ' + el.type)\n        .attr('id', 'r_' + rank + '_' + n).attr('transform',\n          'translate(' + (n - offset - thickness) * AQUARIA.srw + ',8)')\n        .append('rect').attr('class', conservation).attr('width',\n          AQUARIA.srw * (thickness + 1)).attr('height', 10)\n  \n      // if (data.conservationArray[n] === 'conserved') {\n      // rect.attr(\"class\", \"conserved\");\n      // }\n      if (el.type == 'SHEET') {\n        rect.attr('height', 14).attr('transform', 'translate(0,-2)')\n        if (n == el.end) {\n          rect.attr('width', AQUARIA.srw * (thickness))\n          //      }\n          //\t\t\tif (n == el.end) {\n          this.nusvg.select('g.residue#r_' + rank + '_' + n).append('svg:polygon')\n            .attr('class', conservation).attr('transform',\n              'translate(' + (AQUARIA.srw * thickness) + ',0)').attr(\n              'points', AQUARIA.srw + ',0 0,-6 0,16 ' + AQUARIA.srw + ',10')\n          // this.nusvg.select(\"g.residue#r_\"+rank+\"_\"+n+\" rect\").remove();\n        } else {\n          // console.log(' not at the end:' + n);\n        }\n      }\n      if (el.type == 'HELIX') {\n        this.nusvg.select('g.residue#r_' + rank + '_' + n + ' rect')\n          .attr('height', 16).attr('class', conservation).attr('transform',\n            'translate(0,-3)')\n      }\n      thickness = 0\n    }\n  }\n  setConservation (index, data) { // console.log(\"setting conservation\n    // for cluster \"+index);\n  \n    // @TODO account for gaps=insertions ( .clusters[n].seq_end[m]+1 ,\n    // .clusters[n].seq_start[m+1]-1 )\n    // draw rect height=2\n    var insertions = []\n    var that = this\n    for (var i = 0; i < data.seq_end.length - 1; i++) {\n      var gap = []\n      gap[0] = data.seq_end[i] + 1\n      gap[1] = data.seq_start[i + 1] - 1\n      insertions.push(gap) // console.log(\"insertion: \" + gap.toString());\n    }\n  \n    var subst3 = this.nusvg.selectAll('g.residue').data(insertions).each(\n      function (d) { // console.log(\"d.length: \"+d.length);\n        for (var k = d[0]; k <= d[1]; k++) { // console.log(\"insertion at: \" +\n          // k);\n          that.nusvg.select('g.residue#r_' + index + '_' + k + ' rect').attr(\n            'height', 1).attr('transform', 'translate(0,5)').attr('class',\n            'insertion')\n        }\n      })\n  }\n  addThumbnails (protein, offset, end, pad) {\n    var imgName = protein.substring(0, 4).toUpperCase()\n  \n    d3.select('g#structure_' + protein + ' g.cluster').append('line').attr('x1',\n      (end - offset + 6 + pad)).attr('y1', 13)\n      .attr('x2', (this.width - offset + 60)).attr('y2', 13).attr('class',\n        'connector').attr('stroke-width', 1)\n  \n    d3.select('g#structure_' + protein).append('g').attr('class', 'thumbnail')\n      .attr('transform', 'translate(' + (this.width - offset + 28) + ',-18)')\n      .append('circle').attr('cx', 30).attr('cy', 30).attr('r', 16).attr(\n        'fill', '#FFF').attr('stroke', '#797979').attr('stroke-width', 2)\n  \n    d3.select('g#structure_' + protein + ' g.thumbnail').append('clipPath').attr(\n      'id', 'path_' + protein).append('circle').attr('cx', 30).attr('cy', 30)\n      .attr('r', 15).attr('clip-rule', 'evenodd')\n  \n    var thumb = d3.select('g#structure_' + protein + ' g.thumbnail').append(\n      'image').attr('width', '30px').attr('height', '30px').attr('x', 15).attr(\n      'y', 15).attr('xlink:href',\n      'https://www.ebi.ac.uk/pdbe/static/entry/' + imgName.toLowerCase() + '_assembly_1_chain_front_image-200x200.png')\n      .attr('clip-path', 'url(#path_' + protein + ')')\n    // \"https://www.rcsb.org/pdb/images/\" + imgName + \"_bio_r_65.jpg\").attr(\n  }\n  \n  mouseover (d, that) {\n    that.origin = d3.select('#' + d.attr('id') + ' g.thumbnail').attr('transform') // //////console.log(origin);\n    var over = parseFloat(that.origin.substring((that.origin.indexOf('(')) + 1, that.origin\n      .indexOf(',')))// //////console.log(\"over:\n    // \"+over);\n    var shortId = d.attr('id').substr(9) // //////console.log(\"shortId:\n    // \"+shortId);\n    d3.select('#' + d.attr('id') + ' g.cluster, #' + d.attr('id')).classed(\n      'active', true)\n    d3.select('#' + d.attr('id') + ' g.thumbnail').attr('transform',\n      'translate(' + (over + 32) + ', -18)')\n    d3.select('#' + d.attr('id') + ' g.thumbnail circle').attr('r', 30)\n    d3.select('#' + d.attr('id') + ' g.thumbnail #path' + shortId + ' circle')\n      .attr('r', 29)\n    d3.select('#' + d.attr('id') + ' g.thumbnail image').attr('width', '60px')\n      .attr('height', '60px').attr('x', 0).attr('y', 0)\n  }\n  mouseout (d, that) {\n    var shortId = d.attr('id').substr(9) // //////console.log(\"shortId:\n    // \"+shortId);\n    d3.select('#' + d.attr('id') + ' g.cluster, #' + d.attr('id')).classed(\n      'active', false)\n    d3.select('#' + d.attr('id') + ' g.thumbnail').attr('transform', that.origin)\n    d3.select('#' + d.attr('id') + ' g.thumbnail circle').attr('r', 16)\n    d3.select('#' + d.attr('id') + ' g.thumbnail #path' + shortId + ' circle')\n      .attr('r', 15)\n    d3.select('#' + d.attr('id') + ' g.thumbnail image').attr('width', '30px')\n      .attr('height', '30px').attr('x', 15).attr('y', 15)\n  }\n\n}\n","<template>\n    <div>\n        <div class=\"scrim level6\" @click=\"hideTree\"></div>\n        <div id='arc' class=\"level7\"></div>\n    </div>\n</template>\n\n<script>\nimport * as d3 from 'd3'\nimport * as d3Shape from 'd3-shape'\nimport { mapGetters } from 'vuex'\nimport store from '../../store/index'\nimport * as featureMap from '../Features/helpers/featureMap'\nimport * as showMatchingStructures from '../MatchingStructures/helpers/show_matching_structures'\nimport * as loadData from '../../utils/loadData'\n\nvar limit = 10\nconst w = 450\nconst h = 450\nconst radius = 14\nvar featureRegex = new RegExp(/(p\\.)?[A-Za-z]+[0-9]+[A-Za-z\\*\\_\\?\\[\\]\\(\\)\\%\\=\\.]+/) //eslint-disable-line\n\nexport default {\n  name: 'TreeView',\n  props: ['treeReady', 'count', 'coordinates', 'parentElem'],\n  data () {\n    return {\n      pdbs: [],\n      up: require('../../assets/img/up.png'),\n      down: require('../../assets/img/down.png')\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'getGene',\n      'getOrganism',\n      'getMatches'\n    ])\n  },\n  watch: {\n    treeReady: function (newVal, oldVal) { // watch it\n      var _this = this\n      if (_this.coordinates.clientX + w + 5 >= window.innerWidth && window.innerWidth > 500) {\n        document.querySelector(_this.parentElem + ' #arc').style.left = (window.innerWidth - w - 5) + 'px'\n      } else if (_this.coordinates.clientX + w + 5 >= window.innerWidth) {\n        document.querySelector(_this.parentElem + ' #arc').style.left = '50px'\n      } else {\n        document.querySelector(_this.parentElem + ' #arc').style.left = _this.coordinates.clientX + 'px'\n      }\n      document.querySelector(_this.parentElem + ' #arc').style.top = (_this.coordinates.clientY - 400) + 'px'\n      if (this.$parent.showLoader === true) {\n        this.$parent.showLoader = false\n      } else {\n        this.$parent.showTree = false\n      }\n      console.log(_this.count)\n      console.log('Prop changed: ', newVal, ' | was: ', oldVal)\n      var pdbs = newVal\n      var parent = pdbs[0]\n      d3.selectAll(_this.parentElem + ' #arc > *').remove()\n      if (pdbs.length > limit) {\n        var chunks = _this.chunk(pdbs, limit)\n        _this.generateArc(chunks, parent, 0)\n      } else {\n        _this.generateArc(pdbs, parent)\n      }\n    }\n  },\n  methods: {\n    hideTree () {\n      store.commit('setTreeData', null)\n      this.$parent.showTree = false\n    },\n    nodeClick (d) {\n      var _this = this\n      var parent = d[2].children[0]\n      var index = 0\n      parent.name = d[2].label\n      parent.length = d[2].children.length\n      if (d[2].children.length > limit) {\n        var chunks = _this.chunk(d[2].children, limit)\n        _this.generateArc(chunks, parent, index)\n        // chunks.forEach(function (chunk) {\n        //   index = index + 1\n        // })\n      } else {\n        index = index + 1\n        this.generateArc(d[2].children, parent)\n      }\n    },\n    chunk (items, size) {\n      const chunks = []\n      items = [].concat(...items)\n\n      while (items.length) {\n        chunks.push(\n          items.splice(0, size)\n        )\n      }\n\n      return chunks\n    },\n    reversePdbArray (array) {\n      var outputArray = []\n      array.forEach(function (arr) {\n        outputArray.unshift(arr)\n      })\n      return outputArray\n    },\n    generateArc (pdblist, parentPDB, index) {\n      var _this = this\n      var gap = 60\n      var node, pdbs, nodes, elems, pdbArray\n      if (index !== undefined) {\n        pdbArray = pdblist\n        pdbs = pdbArray[index]\n      } else {\n        pdbArray = _this.reversePdbArray(pdblist)\n        pdbs = pdbArray\n      }\n\n      if (Object.prototype.hasOwnProperty.call(pdbs[0], 'children')) {\n        if (index !== undefined && document.querySelector('svg#tree') !== null) {\n          document.querySelector('svg#tree').remove()\n        }\n        var svg = d3\n          .select(_this.parentElem + ' #arc')\n          .append('svg')\n          .attr('id', 'tree')\n          .attr('width', w)\n          .attr('height', h)\n\n        elems = _this.createLinks(svg, 'parent', pdbArray, parentPDB, index)\n      } else {\n        document.querySelectorAll('outerElem').forEach(el => el.remove())\n        document.querySelectorAll('[id^=children_]').forEach(e => e.parentNode.removeChild(e))\n        svg = d3\n          .select(_this.parentElem + ' #arc')\n          .append('svg')\n          .attr('id', 'children_' + pdbs[0].pdb_id + '_' + index)\n          .attr('width', w)\n          .attr('height', h)\n\n        elems = _this.createLinks(svg, 'child', pdbArray, parentPDB, index)\n      }\n\n      nodes = elems.nodes\n      svg = elems.svg\n\n      // Append the nodes to the svg element\n      if (Object.prototype.hasOwnProperty.call(pdbs[0], 'children')) {\n        nodes.shift()\n        node = d3.select('svg#tree')\n          .selectAll('g#gParent')\n          .data(nodes)\n          .enter()\n      } else {\n        parentPDB.dx = (nodes[1][0] - gap)\n        parentPDB.dy = (nodes[1][1] - radius / 2)\n        nodes.push([nodes[1][0] - gap, nodes[1][1], parentPDB, 'parent'])\n        document.querySelector('#tree').classList.add('hide')\n        nodes.shift()\n        node = d3\n          .select('svg#children_' + pdbs[0].pdb_id + '_' + index)\n          .selectAll('g')\n          .data(nodes)\n          .enter()\n      }\n\n      node = node\n        .append('g')\n        .attr('class', function (d, i) {\n          if (d.length > 1) {\n            if (Object.prototype.hasOwnProperty.call(d[2], 'children')) {\n              return 'outerElem'\n            } else {\n              return 'innerElem'\n            }\n          }\n        })\n        .attr('id', function (d, i) {\n          //             if (d[2].member === 0 && d[2].depth === 0) { d[2].id = 0 }\n          if (d.length > 1) {\n            if (Object.prototype.hasOwnProperty.call(d[2], 'children')) {\n              return 'out_' + d[2].children[0].pdb_id\n            } else if (d[3] !== undefined && d[3].includes('parent')) {\n              return 'parentNode'\n            } else {\n              return 'in_' + d[2].pdb_id\n            }\n          }\n        })\n        .attr('width', radius)\n        .attr('height', radius)\n        .on('click', function (d, i) {\n          if (i >= 0) {\n            if (Object.prototype.hasOwnProperty.call(d[2], 'children')) {\n              // Initiate nodeClick if parent node\n              _this.nodeClick(d)\n            } else {\n              if (d[3] === undefined) { // Clicked on child node\n                var urlParams = window.location.search\n                history.pushState('', document.title, '/' + _this.getOrganism + '/' + _this.getGene + '/' + d[2].pdb_id + '/' + d[2].pdb_chain + urlParams)\n                _this.getMatches.clusters.forEach(function (cluster, i) {\n                  if (cluster.members.length > 1) {\n                    cluster.members.forEach(function (member) {\n                      if (member.pdb_id === d[2].pdb_id && member.pdb_chain[0] === d[2].pdb_chain) {\n                        loadData.displayMember(member)\n                        showMatchingStructures.selectCluster(cluster, i)\n                        return null\n                      }\n                    })\n                  } else {\n                    if (cluster.members[0].pdb_id === d[2].pdb_id && cluster.members[0].pdb_chain[0] === d[2].pdb_chain) {\n                      cluster.E_value = cluster.members[0].E_value\n                      loadData.displayMember(cluster)\n                      showMatchingStructures.selectCluster(cluster, i)\n                      return null\n                    }\n                  }\n                })\n                if (featureRegex.test(urlParams)) {\n                  _this.waitForElement()\n                }\n              } else { // Clicked on parent node\n                document.querySelector('#tree').classList.remove('hide')\n                document.querySelectorAll('[id^=children_]').forEach(e => e.parentNode.removeChild(e))\n              }\n            }\n          }\n        })\n\n      if (Object.prototype.hasOwnProperty.call(pdbs[0], 'children')) {\n        node.append('rect')\n          .attr('transform', function (d) {\n            return 'translate(' + d[0] + ',' + (d[1] - radius / 2) + ')'\n          })\n          .attr('class', 'label')\n          .attr('width', function (d, i) {\n            return d[2].children ? (d[2].children.length > 9 ? 32 : 26) : 0\n          }\n          )\n          .attr('height', function (d, i) {\n            return d[2].children ? 16 : 0\n          })\n          .attr('rx', 6)\n          .attr('fill', '#a3a3a3')\n          .attr('stroke', 'none')\n      } else {\n        var pNode = d3.select('g#parentNode').selectAll('g').data([parentPDB])\n          .enter()\n\n        pNode.append('text')\n          .attr('x', function (d) { return d.dx - 40 - 20 })\n          .attr('dy', function (d) { return d.dy + 40 })\n          .attr('class', 'nbr_label')\n          .text(function (d) {\n            if (d.name.length > 15) { return d.name.substr(0, 15) + '...' } else { return d.name }\n          })\n          .attr('text-anchor', 'start')\n          .style('fill-opacity', 1)\n          .style('fill', 'white')\n          .style('font-weight', 500)\n\n        pNode.append('rect')\n          .attr('transform', function (d) {\n            return 'translate(' + d.dx + ',' + d.dy + ')'\n          })\n          .attr('class', 'label')\n          .attr('width', function (d, i) {\n            return d.length ? (d.length > 9 ? 32 : 26) : 0\n          })\n          .attr('height', 16)\n          .attr('rx', 6)\n          .attr('fill', '#a3a3a3')\n          .attr('stroke', 'none')\n\n        pNode.append('text')\n          .attr('x', function (d) { return d.dx + radius + 2 })\n          .attr('dy', function (d) { return d.dy + radius - 1 })\n          .attr('class', 'nbr_label')\n          .text(function (d) {\n            return d.length\n          })\n          .attr('text-anchor', 'start')\n          .style('fill-opacity', 1)\n          .style('fill', 'white')\n          .style('font-weight', 500)\n      }\n\n      node\n        .append('circle')\n        .attr('cx', function (d) { return d[0] })\n        .attr('cy', function (d) { return d[1] })\n        .attr('r', (radius))\n        .style('fill', 'white')\n        .style('stroke', '#999999')\n        .style('stroke-width', '1')\n\n      node.append('clipPath')\n        .attr('id', 'clip_' + function (d, i) { return i })\n        .append('circle')\n        .attr('cx', function (d) { return d[0] })\n        .attr('cy', function (d) { return d[1] })\n        .attr('r', (radius))\n        .attr('clip-rule', 'evenodd')\n\n      node.append('image')\n        .attr('width', 2 * (radius - 1) + 'px')\n        .attr('height', 2 * (radius - 1) + 'px')\n        .attr('x', function (d) { return d[0] - 13 })\n        .attr('y', function (d) { return d[1] - 13 })\n        .attr('clip-path', function (d, i) {\n          var pathNm = ' '\n          if (d[2].pdb_id) { pathNm = 'url(#clip_' + d[2].pdb_id + ')' }\n          if (d[2].children && d[2].children[0].pdb_id) { pathNm = 'url(#clip_' + d[2].children[0].pdb_id + ')' }\n          return pathNm\n        })\n        .attr('xlink:href', function (d, i) {\n          var imgNm = ' '\n          if (d[2].pdb_id && typeof d[2].children === 'undefined') { imgNm = d[2].pdb_id.toUpperCase() }\n          if (d[2].children && d[2].children[0].pdb_id) { imgNm = d[2].children[0].pdb_id.toUpperCase() }\n          return (imgNm === ' ') ? ' ' : 'https://www.ebi.ac.uk/pdbe/static/entry/' + imgNm.toLowerCase() + '_assembly_1_chain_front_image-200x200.png'\n          // return (imgNm === \" \") ? \" \" : \"https://www.rcsb.org/pdb/images/\"+imgNm+\"_bio_r_65.jpg\";\n        })\n\n      node.append('text')\n        .attr('x', function (d) { return d[0] + radius + 2 })\n        .attr('dy', function (d) { return d[1] + radius / 2 - 1 })\n        .attr('class', 'nbr_label')\n        .text(function (d, i) {\n          if (d[2].label && d[2].label !== 'undefined') {\n            var nodeLabel = d[2].label\n            if (d[2].label.length > 30) { nodeLabel = d[2].label.substr(0, 15) + ' ... ' + d[2].label.substr(d[2].label.length - 15) }\n            return d[2].children ? d[2].children.length + '      ' + nodeLabel : ' '\n          } else {\n            if (d[3] === undefined) {\n              return d[2].pdb_id + '-' + d[2].pdb_chain\n            }\n          }\n        })\n        .attr('title', function (d, i) {\n          return (d[2].label_long) ? d[2].label_long : d[2].label\n        })\n        .attr('text-anchor', 'start')\n        .style('fill-opacity', 1)\n        .style('fill', 'white')\n        .style('font-weight', 500)\n    },\n    createLinks (svg, tier, pdbArray, parentPDB, index) {\n      var links = []\n      var gap = 0\n      var nodes = []\n      var output = {}\n      var _this = this\n      var pdbs\n      var verticalMargin = 40\n\n      if (index !== undefined) {\n        pdbs = pdbArray[index]\n        pdbs = _this.reversePdbArray(pdbs)\n      } else {\n        pdbs = pdbArray\n      }\n      if (tier === 'child') {\n        gap = 60\n      }\n      var nodeStartY = h - verticalMargin\n      // Configure node 0\n      nodes.push([10, nodeStartY])\n\n      // Configure all other nodes\n      for (let i = 0; i < pdbs.length; i++) {\n        nodes.push([80 + gap, (nodeStartY - i * verticalMargin)])\n        nodes[i + 1].push(pdbs[i])\n      }\n      // Configure link fron node 0 to node 1\n      links.push(d3Shape.linkHorizontal()({\n        source: nodes[0],\n        target: nodes[1]\n      })\n      )\n\n      // Append connector\n      if (pdbs.length > 1) {\n        var points = [\n          { xpoint: 30 + gap, ypoint: nodeStartY },\n          { xpoint: 45 + gap, ypoint: nodeStartY - 10 },\n          { xpoint: 47 + gap, ypoint: nodeStartY - 20 }\n        ]\n\n        var Gen = d3Shape.line()\n          .x((p) => p.xpoint)\n          .y((p) => p.ypoint)\n          .curve(d3Shape.curveCardinal)\n\n        svg.append('path')\n          .attr('d', Gen(points))\n          .attr('fill', 'none')\n          .attr('class', function () {\n            return 'outerElem'\n          })\n          .attr('stroke', '#76c276')\n          .style('stroke-width', 2)\n\n        for (let i = 2; i < nodes.length; i++) {\n          var connector = [\n            { xpoint: 47 + gap, ypoint: nodes[i][1] + 10 },\n            { xpoint: 55 + gap, ypoint: nodes[i][1] },\n            { xpoint: 80 + gap, ypoint: nodes[i][1] }\n          ]\n          svg.append('path')\n            .attr('d', Gen(connector))\n            .attr('fill', 'none')\n            .attr('stroke', '#76c276')\n            .style('stroke-width', 2)\n            .attr('class', function (d) {\n              return 'outerElem'\n            })\n        }\n\n        svg.append('line')\n          .style('stroke', '#76c276')\n          .style('stroke-width', 2)\n          .attr('x1', 47 + gap)\n          .attr('y1', nodeStartY + 10 - (nodes.length - 2) * verticalMargin)\n          .attr('x2', 47 + gap)\n          .attr('y2', nodeStartY - 20)\n          .attr('class', function () {\n            if (tier === 1) {\n              return 'outerElem'\n            } else {\n              return 'innerElem'\n            }\n          })\n      }\n      // Append the link to the svg element\n      svg\n        .append('path')\n        .attr('d', links)\n        .attr('stroke', '#76c276')\n        .attr('fill', 'none')\n        .style('stroke-width', 2)\n\n      // Append Next and Previous arrows\n      if (pdbArray.length > 1) {\n        if (index + 1 < pdbArray.length) {\n          svg\n            .append('circle')\n            .attr('cx', 80 + gap)\n            .attr('cy', nodeStartY + 30)\n            .attr('r', 10)\n            .style('fill', '#00b2ff')\n\n          svg.append('image')\n            .attr('width', '18px')\n            .attr('height', '18px')\n            .attr('x', 80 + gap - 9)\n            .attr('y', nodeStartY + 21)\n            .attr('xlink:href', _this.down)\n            .on('click', function () {\n              if (index < pdbArray.length - 1) {\n                _this.generateArc(pdbArray, parentPDB, index + 1)\n              }\n            })\n\n          svg.append('text')\n            .attr('x', 95 + gap)\n            .attr('dy', nodeStartY + 35)\n            .attr('class', 'nbr_label')\n            .text('Next ' + pdbArray[index + 1].length)\n            .attr('text-anchor', 'start')\n            .style('fill-opacity', 1)\n            .style('fill', 'white')\n            .style('font-weight', 500)\n        }\n\n        if (index + 1 > 1) {\n          svg\n            .append('circle')\n            .attr('cx', 80 + gap)\n            .attr('cy', h - (nodes.length * verticalMargin) + 10)\n            .attr('r', 10)\n            .style('fill', '#00b2ff')\n          // #616161\n\n          svg.append('image')\n            .attr('width', '18px')\n            .attr('height', '18px')\n            .attr('x', 80 + gap - 9)\n            .attr('y', h - (nodes.length * verticalMargin) + 1)\n            .attr('xlink:href', _this.up)\n            .on('click', function () {\n              if (index - 1 >= 0) {\n                _this.generateArc(pdbArray, parentPDB, index - 1)\n              }\n            })\n\n          svg.append('text')\n            .attr('x', 95 + gap)\n            .attr('dy', h - (nodes.length * verticalMargin) + radius)\n            .attr('class', 'nbr_label')\n            .text('Previous')\n            .attr('text-anchor', 'start')\n            .style('fill-opacity', 1)\n            .style('fill', 'white')\n            .style('font-weight', 500)\n        }\n      }\n\n      // Source node\n      svg\n        .append('rect')\n        .attr('x', 0)\n        .attr('y', 400)\n        .attr('rx', 6)\n        .attr('ry', 6)\n        .attr('width', _this.coordinates.width + 2)\n        .attr('height', _this.coordinates.height)\n        .style('fill', 'orange')\n        .attr('class', 'handle')\n        .on('click', function () {\n          _this.hideTree()\n        })\n\n      svg.append('text')\n        .attr('x', 3)\n        .attr('dy', 415)\n        .attr('class', 'nbr_label')\n        .text(_this.count)\n        .attr('text-anchor', 'start')\n        .style('fill-opacity', 1)\n        .style('fill', 'white')\n        .style('font-weight', 500)\n\n      output.nodes = nodes\n      output.links = links\n      output.svg = svg\n      return output\n    },\n    waitForElement () {\n      var _this = this\n      window.AQUARIA.addedFeature = true\n      if (document.getElementById('waitingFrame').style.display !== 'none') {\n        setTimeout(_this.waitForElement, 5)\n      } else {\n        window.AQUARIA.passFeature(window.AQUARIA.customfeatureSet, window.AQUARIA.customfeatureSetioid)\n        // if (window.AQUARIA.customfeatureSet.length === 'undefined') {\n        featureMap.createFeatureMap(window.AQUARIA.customfeatureSet)\n        // } else {\n        //   featureMap.createFeatureMap(window.AQUARIA.customfeatureSet[window.AQUARIA.customfeatureSetioid])\n        // }\n        d3.selectAll('svg.loaded rect.feature').attr('fill', '#a4abdf')\n        d3.select('svg.loaded').classed('loaded', false)\n      }\n    }\n  }\n}\n</script>\n\n<style>\ndiv.scrim {\n    background: #5E5E5E;\n    height: 100%;\n    position: fixed;\n    left: 0;\n    top: 0;\n    opacity: 0.68;\n    -moz-opacity: 0.68;\n    width: 100%;\n}\n#arc {\n    position: fixed;\n    /* top: calc(80vh - 290px); */\n    left: 16px;\n    /* bottom: 2vh; */\n}\n.node {\n    cursor: pointer;\n}\n\n.node circle {\n    fill: #fff;\n    stroke: steelblue;\n    stroke-width: 3px;\n}\n\nsvg text {\n    font: 100% sans-serif;\n    /* font-size: calc(0.8rem + 3 * ((100vw - 320px) / 680)); */\n    font-size: 12px;\n}\n\n.link {\n    fill: none;\n    stroke: #ccc;\n    stroke-width: 2px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TreeView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TreeView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TreeView.vue?vue&type=template&id=2de6fc09&\"\nimport script from \"./TreeView.vue?vue&type=script&lang=js&\"\nexport * from \"./TreeView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TreeView.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"scrim level6\",attrs:{\"id\":\"nodeLoader\"},on:{\"click\":_vm.hideLoader}},[_c('img',{attrs:{\"src\":_vm.loader}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"scrim level6\" @click=\"hideLoader\" id='nodeLoader'>\n        <img :src='loader' />\n    </div>\n</template>\n\n<script>\nexport default {\n  name: 'NodeLoader',\n  data () {\n    return {\n      loader: require('../../assets/img/node.gif')\n    }\n  },\n  props: ['coordinates', 'change'],\n  watch: {\n    change: function (newVal, oldVal) {\n      var _this = this\n      document.querySelectorAll('#nodeLoader > img').forEach(function (elem) {\n        elem.style.marginLeft = _this.coordinates.clientX + 'px'\n        elem.style.marginTop = _this.coordinates.clientY - 10 + 'px'\n      })\n      // document.querySelector('#nodeLoader > img').style.marginLeft = _this.coordinates.clientX + 'px'\n      // document.querySelector('#nodeLoader > img').style.marginTop = _this.coordinates.clientY - 10 + 'px'\n    }\n  },\n  methods: {\n    hideLoader () {\n      this.$parent.showLoader = false\n      this.$parent.showTree = false\n    }\n  }\n}\n</script>\n\n<style scoped>\nimg {\n    width: 5vh;\n    background: #4d4d4d;\n    border-radius: 29px;\n    padding: 5px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NodeLoader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NodeLoader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NodeLoader.vue?vue&type=template&id=d0db7e78&scoped=true&\"\nimport script from \"./NodeLoader.vue?vue&type=script&lang=js&\"\nexport * from \"./NodeLoader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NodeLoader.vue?vue&type=style&index=0&id=d0db7e78&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d0db7e78\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"panel\">\n        <a v-bind:href=\"data.hash\" class=\"close intab\" @click=\"closeTab\"></a>\n        <div id=\"vis\">\n          <div id='allclusters' data-intro='Visual summary of all structures in PDB matching the specified protein, grouped by region of match.' data-position='left'></div>\n        </div>\n        <TreeView v-show=\"showTree\" id='treeView' class='level5' v-bind:treeReady='prop' :count='count' :coordinates=\"treeCoordinates\" :parentElem='parentElem'/>\n        <NodeLoader v-show=\"showLoader\" :coordinates=\"treeCoordinates\" :change='change'/>\n    </div>\n</template>\n\n<script>\nimport * as Panels from '../AquariaLayout/helpers/hidePanels'\nimport store from '../../store/index'\nimport TreeView from '../MatchingStructures/TreeView'\nimport NodeLoader from '../AquariaLayout/NodeLoader'\nimport { mapGetters } from 'vuex'\nimport axios from 'axios'\n\nexport default {\n  name: 'MatchingStructures',\n  components: {\n    TreeView,\n    NodeLoader\n  },\n  data () {\n    return {\n      showTree: false,\n      prop: null,\n      count: 0,\n      treeCoordinates: {},\n      change: 0,\n      showLoader: false,\n      parentElem: '.panel'\n    }\n  },\n  watch: {\n    sequence (newVal, oldVal) {\n      if (oldVal.accession !== newVal.accession && oldVal.accession !== null) { // Only redraw coverage map if new chain\n        window.scrollBy(0, 100)\n        // document.querySelector('#vis > .ruler').remove()\n        // document.querySelectorAll('#vis > #allclusters .outer_container').forEach(el => el.remove())\n        // window.AQUARIA.refresh() // This redraws matching structures panel\n        // var hDiff = (window.outerHeight - window.innerHeight)\n        // document.querySelector('#heightinspector').innerHTML = 'HO:' + window.outerHeight + ', hDiff:' + hDiff + ', scroll: ' + window.scrollY + ' bodyHeight: ' + document.body.scrollHeight\n      }\n    },\n    treeData (clusterN) {\n      var _this = this\n      if (clusterN !== null) {\n        _this.change = _this.change + 1\n        var cord = _this.getTreeCoordinates\n        _this.treeCoordinates.clientX = cord.left\n        _this.treeCoordinates.clientY = cord.top\n        _this.treeCoordinates.width = cord.width\n        _this.treeCoordinates.height = cord.height\n        _this.showLoader = true\n        var url = `${window.BACKEND}/get_secondary_clusters/`\n        url = url + _this.getStructure.accession + '/' + _this.getStructure.pdb + '/' + _this.getStructure.chain + '/' + clusterN\n        axios({\n          method: 'get',\n          url: url\n        }).then(function (response) {\n          _this.showTree = true\n          _this.prop = response.data\n          _this.count = 0\n          response.data.forEach(obj => {\n            _this.count += obj.children.length\n          })\n        })\n      } else {\n        _this.showTree = false\n      }\n    }\n  },\n  computed: {\n    data () {\n      return {\n        hash: store.state.hash,\n        prop: null\n      }\n    },\n    sequence () {\n      return store.state.structure\n    },\n    treeData () {\n      return store.state.treeData\n    },\n    ...mapGetters([\n      'getMatches',\n      'getTreeCoordinates',\n      'getStructure'\n    ])\n  },\n  methods: {\n    closeTab: function () {\n      window.scrollBy(0, 100)\n      Panels.hidePanels()\n    }\n  },\n  mounted () {\n    var _this = this\n    if (_this.getMatches && Object.hasOwnProperty.call(_this.getMatches, 'clusters')) {\n      var inputs = document.querySelectorAll('[id ^= structure_] > text')\n      for (var i = 0; i < inputs.length; i++) {\n        inputs[i].addEventListener('click', function () {\n          var elem = this.parentElement.id\n          console.log(elem)\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style>\n  /* .thumbnail text {\n    font-size: 16px;\n  } */\n  #vis {\n    max-height: 40vh;\n    overflow: scroll;\n    /* margin-bottom: -54px; */\n    margin-bottom: -55px;\n    width: 100vw;\n    background: var(--primary-tab);\n  }\n  div.ruler {\n    margin-left: 40px;\n  }\n  .outer_container{\n    display: inline-flex;\n  }\n\n  .outer_container svg{\n    margin-left: 4px;\n  }\n\n  div[data-id=\"structurematches\"].chardinjs-helper-layer.chardinjs-top {\n    border-top: 0 none;\n  }\n\n  div[data-id=\"structurematches\"] .chardinjs-tooltip.chardinjs-top:after {\n    height: 0;\n    width: 0;\n    display: none;\n  }\n  #allclusters {\n    background-color: var(--background);\n    overflow: hidden;\n  }\n  .panel .close.intab::after { top: -0.1em; }\n\n  /**** SVG styles ****/\n  svg {\n    font-weight: 400;\n  }\n\n  .container>svg {\n    display: block;\n    position: relative;\n    top: -13px;\n  }\n\n  line,\n  path {\n    fill: none;\n    /*stroke: #000;*/\n  }\n\n  line.connector {\n    stroke: #808080;\n  }\n\n  .minor :not(.minor) {\n    display: none;\n  }\n\n  .SHEET rect,\n  .HELIX rect,\n  .COIL rect,\n  polygon {\n    /*shape-rendering: geometric-precision;*/\n    stroke-width: 0.6px;\n  }\n\n  .SHEET polygon,\n  .SHEET rect {\n    fill: #f6c719;\n    stroke: #f6c719;\n  }\n\n  .SHEET polygon.conserved,\n  .SHEET rect.conserved {\n    fill: #998436;\n    stroke: #998436;\n  }\n\n  .SHEET polygon.nonconserved,\n  .SHEET rect.nonconserved {\n    fill: #4d4d4d;\n    stroke: #4d4d4d;\n  }\n\n  .HELIX rect {\n    fill: #6491b6;\n    stroke: #6491b6;\n  }\n\n  .HELIX rect.conserved {\n    fill: #586c7c;\n    stroke: #586c7c;\n  }\n\n  .HELIX rect.nonconserved {\n    fill: #4d4d4d;\n    stroke: #4d4d4d;\n  }\n\n  .COIL rect {\n    fill: #6f9e52;\n    stroke: #6f9e52;\n  }\n\n  .COIL rect.conserved {\n    fill: #5d724f;\n    stroke: #5d724f;\n  }\n\n  .COIL rect.nonconserved {\n    fill: #4d4d4d;\n    stroke: #4d4d4d;\n  }\n\n  .COIL rect.insertion,\n  .HELIX rect.insertion,\n  .SHEET rect.insertion,\n  rect.insertion {\n    fill: #777777;\n    stroke: #777777;\n    stroke-width: 0.25px;\n    opacity: 0.1;\n  }\n\n  rect.handle text {\n    color: white;\n  }\n\n  rect.handle {\n    fill: #888;\n    stroke: none;\n  }\n\n  text.percentage {\n    font-size: 11px;\n    fill: #777;\n  }\n\n  text.percentage:hover {\n    fill: #333333;\n  }\n\n  text.expandable:hover,\n  g.expandable.active text:hover {\n    cursor: pointer;\n  }\n\n  g.active rect.cluster,\n  g.active line,\n  g.active g.thumbnail circle {\n    stroke: orange;\n  }\n\n  g.expandable.active rect.handle {\n    fill: orange;\n  }\n\n  .active rect:hover {\n    cursor: pointer;\n  }\n\n  rect.cluster {\n    fill: #CCC;\n    stroke: #808080;\n    stroke-width: 1px;\n  }\n\n  g.active rect.cluster {\n    fill: #FFF;\n  }\n\n  g.loaded rect.cluster {\n    fill: #FFF;\n    stroke: #333;\n  }\n\n  g.x line.tick {\n    stroke: #666;\n  }\n\n  g.x.minor line.tick {\n    stroke: #AAA;\n  }\n\n  g.x text {\n    font-size: 10px;\n    fill: #999;\n  }\n\n  g.x path.domain {\n    fill: none;\n    stroke: black;\n    opacity: 0.5;\n  }\n\n  .node circle {\n    cursor: pointer;\n    fill: #fff;\n    stroke: steelblue;\n    stroke-width: 1.5px;\n  }\n\n  path.link {\n    fill: none;\n    stroke: #888888;\n    stroke-width: 1.5px;\n  }\n\n  .expansion text {\n    fill: #fff;\n  }\n  /******** features *****/\n\n  div.track:nth-child(even) {\n    background: #D6D6D6;\n  }\n\n  div.track svg:hover {\n    background: #E9E9E9;\n    cursor: pointer;\n  }\n\n  div.panel span.source {\n    display: inline-block;\n    font-size: 80%;\n    text-transform: uppercase;\n    letter-spacing: 0.2em;\n    color: #b3b3b3;\n    margin-left: 1em;\n  }\n\n  /********** PSSH VIEW ***********/\n\n  div.panel#structure-viewer.fullscreen {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n\n  #threeD.threedcontent.fullscreen {\n    height: 100%;\n  }\n\n  div.container {\n    height: 40px;\n    margin-left: -4px;\n  }\n\n  div.container:hover {\n    background: #D6D6D6;\n  }\n\n  svg rect.bg {\n    fill: none;\n  }\n\n  /*div*/\n  .loaded {\n    background: #DEDEDE;\n  }\n\n  svg.loaded rect.bg {\n    fill: #EEE;\n    cursor: pointer;\n  }\n\n  /*div*/\n  .loaded:hover {\n    background: #EEE;\n  }\n\n  svg.loaded rect.bg:hover {\n    fill: #FFF;\n  }\n\n  div#wait4tree {\n    position: relative;\n    z-index: 100;\n  }\n\n  div.expansion {\n    position: absolute;\n    width: 0px;\n    z-index: 102;\n  }\n\n  div.expansion div.longtitle,\n  div.longtitle {\n    background: #555;\n    border-radius: 8px;\n    box-shadow: 3px 3px 6px #222;\n    color: white;\n    display: none;\n    padding: 8px;\n    position: absolute;\n    width: 300px;\n    z-index: 103;\n\n  }\n\n  .blank {\n    background: black;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    opacity: 0.68;\n    -moz-opacity: 0.68;\n    width: 100%;\n    z-index: 90;\n  }\n\n  div.panel span.help {\n    display: inline-block;\n    width: 17px;\n    height: 17px;\n    background: url('../../assets/images/UI-help.png') no-repeat 0px 0px;\n    margin-left: 8px;\n  }\n\n  .fakelink:hover,\n  span.applauncher:hover,\n  span#expander:hover span#threedSwitcher:hover {\n    cursor: pointer;\n    background-position: 0px -21px;\n  }\n\n  /*div.panel span.help:hover { background-position: 0px -16px; cursor: pointer; }*/\n\n  div.balloon {\n    background: #666;\n    border-radius: 10px;\n    color: #CCC;\n    padding: 8px;\n  }\n\n  div.balloon p {\n    margin: 0 0 6px 0;\n  }\n\n  div.balloon p a {\n    color: #6AF;\n  }\n\n  div.balloon h3 {\n    background-color: #999;\n    margin-bottom: 1em;\n  }\n\n  div.popup.top div.balloon {\n    border-radius: 16px;\n    box-shadow: 0px 2px 16px #555;\n    cursor: -moz-grab;\n    cursor: -webkit-grab;\n    cursor: grab;\n    padding-left: 14px;\n  }\n\n  div.popup.top div.balloon:active {\n    cursor: -moz-grabbing;\n    cursor: -webkit-grabbing;\n    cursor: grabbing;\n  }\n\n  .windows div.popup.top div.balloon {\n    border-radius: 0;\n  }\n\n  div.popup {\n    background: url('../../assets/images/point.png') no-repeat center bottom;\n    display: none;\n    padding: 0 0 14px 0;\n    position: absolute;\n    /* width: 320px; */\n    width: 90vw;\n    max-width: 30rem;\n    z-index: 999;\n  }\n\n  div.popup.top {\n    background: transparent none;\n  }\n\n  div.large-ppi-diagram {\n    position: absolute;\n    width: 400px;\n    z-index: 100;\n  }\n\n  /*new stuff from david*/\n\n  path.arc {\n    cursor: move;\n    fill: #fff;\n  }\n\n  .proteinNode,\n  .complexNode {\n    font-size: 10px;\n  }\n\n  .proteinNode:hover,\n  .complexNode:hover {\n    fill: #1f77b4;\n  }\n\n  .ppiLink {\n    fill: none;\n    stroke: #1f77b4;\n    stroke-opacity: .4;\n    pointer-events: none;\n  }\n\n  .ppiLink.source,\n  .ppiLink.target {\n    stroke-opacity: 1;\n    stroke-width: 2px;\n  }\n\n  .proteinNode.target,\n  .complexNode.target {\n    fill: #d62728 !important;\n  }\n\n  .ppiLink.source {\n    stroke: #d62728;\n  }\n\n  .proteinNode.source,\n  .complexNode.source {\n    fill: #2ca02c;\n  }\n\n  .ppiLink.target {\n    stroke: #2ca02c;\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MatchingStructures.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MatchingStructures.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MatchingStructures.vue?vue&type=template&id=3a6dfd71&\"\nimport script from \"./MatchingStructures.vue?vue&type=script&lang=js&\"\nexport * from \"./MatchingStructures.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MatchingStructures.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel\"},[_c('a',{staticClass:\"close\",attrs:{\"href\":\"#\"},on:{\"click\":_vm.closeTab}}),_c('div',{attrs:{\"id\":\"featurePanel\"}},[(_vm.getfeatureSets)?_c('div',{staticClass:\"ui-sortable\",attrs:{\"id\":\"groupedFeatures\"}},_vm._l((_vm.getfeatureSets),function(structure){return _c('div',{key:structure[0],staticClass:\"featureCollection ui-sortable-handle\",attrs:{\"id\":structure[0]},on:{\"click\":function($event){return _vm.toggleTrack(structure[0])}}},[_c('div',{staticClass:\"featureHeader\",on:{\"mouseover\":function($event){return _vm.hightlight(structure[0])},\"mouseout\":function($event){return _vm.removeHightlight(structure[0])}}},[_c('p',{attrs:{\"id\":\"arrow\"}},[_vm._v(\"►\")]),_c('p',{staticClass:\"featureName\"},[_vm._v(_vm._s(structure[0]))]),_c('div',{staticClass:\"info\",on:{\"mouseover\":function($event){return _vm.showInfo(structure, $event)}}},[_vm._v(\"?\")])]),_c('div',{staticClass:\"featureTrack ui-sortable\",staticStyle:{\"cursor\":\"move\"}})])}),0):_vm._e(),_c('br')])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import store from '../../../store/index'\nimport _ from 'lodash'\nimport * as panel3d from '../../StructureViewer/helpers/joleculeAPI'\nAQUARIA.currentAnnotationsIn3DViewer = new Array()\n\nexport function loadFeature (datum, oid) {\n  sentAnnotationTo3DViewer(datum, parseInt(oid))\n}\n\n/**\n * removes the current annotation track from the 3D viewer\n */\nexport function removeFearture () {\n  // remove existing Annotation\n  const currentAnnotationsIn3DViewer = AQUARIA.currentAnnotationsIn3DViewer\n  if (currentAnnotationsIn3DViewer !== undefined) {\n    for (var i in currentAnnotationsIn3DViewer) {\n      // API call\n      panel3d.removeAnnotation(currentAnnotationsIn3DViewer[i].id,\n        currentAnnotationsIn3DViewer[i].annotationName)\n    }\n    currentAnnotationsIn3DViewer.length = 0\n  }\n}\n\n/**\n * Shows feature with sidechain on the structure\n */\n\nexport function showSideChains (query) {\n  var jController = panel3d.embededJolecule.controller\n  query.forEach(function (resQuery) {\n    resSideChain(resQuery)\n  })\n  jController.soupView.isUpdateSidechain = true\n  jController.soupView.isChanged = true\n}\n\nfunction resSideChain (query) {\n  // Configure residues to enable sidechain\n  var residues = query.split('.')[0]\n  var chain = typeof (store.state.structure.chain) === 'object' ? store.state.structure.chain[0] : store.state.structure.chain\n  if (residues.includes('-')) {\n    var start = parseInt(residues.split('-')[0].replace(/\\D/g, ''))\n    var end = parseInt(residues.split('-')[1].replace(/\\D/g, '')) + 1\n    _.range(start, end).forEach((proxy) => {\n      sideChainOn(proxy, chain)\n    })\n  } else if (residues.includes(',')) {\n    residues.split(',').forEach((proxy) => {\n      proxy = parseInt(proxy.replace(/\\D/g, ''))\n      sideChainOn(proxy, chain)\n    })\n  } else {\n    residues = parseInt(residues.replace(/\\D/g, ''))\n    sideChainOn(residues, chain)\n  }\n}\n\nfunction sideChainOn (residues, chain) {\n  var jAlignment = panel3d.joleculeAlignment\n  var jController = panel3d.embededJolecule.controller\n  residues = jAlignment.mapSeqResToPdbResOfChain(0, residues, chain)\n  var iRes = jController.soup.findResidueIndices(0, chain, residues[2])[0]\n  jController.soup.getResidueProxy().load(iRes).sidechain = true\n}\n\n\n/**\n * send the annotation track to the 3D viewer\n */\n function sentAnnotationTo3DViewer (annotations, trackNumber) {\n  // default is to send of all track lines unless trackNumber has been\n  // specified\n  trackNumber = typeof trackNumber !== 'undefined' ? trackNumber : -1\n\n  // remove existing Annotation\n  //removeCurrentAnnotationFrom3DViewer()\n\n  // send specific track if requested\n  if (trackNumber >= 0) {\n    reformatAndAddFeatureTo3DViewer(annotations, trackNumber)\n  } else {\n    // send all tracks\n    for (trackNumber in annotations.Tracks) {\n      reformatAndAddFeatureTo3DViewer(annotations, trackNumber)\n    }\n  }\n}\n\n/**\n * reformat an annotation track into the format required by the API\n */\nfunction reformatAndAddFeatureTo3DViewer (annotations, trackNumber) {\n  var featureColours = new Array()\n  var featureNames = new Array()\n  var featureDescriptions = new Array()\n  var featurePositions = new Array()\n  var featureURLs = new Array()\n  var featureURLtexts = new Array()\n  var featureCategories = {}\n  var lastColour = '#ffffff'\n  if (annotations != undefined) {\n    if (annotations.featureColours && annotations.featureColours.length > 0) {\n\t  lastColour = annotations.featureColours[0]\n    }\n    // send specified track only\n    for (var j in annotations.Tracks[trackNumber]) {\n      // only transfer features flagged as visible\n      if (annotations.Tracks[trackNumber][j].show) {\n        if (annotations.Class.color !== 'multi_color') {\n          // 0.3 o\n          var alphaColor = '#4d' +\n\t\t\t\t\t\tannotations.Tracks[trackNumber][j].color.substring(1)\n        }\n\t\t  if (annotations.Tracks[trackNumber][j].color) {\n          //\t\t    lastColour = annotations.Tracks[trackNumber][j].color;\n\t        featureColours.push(annotations.Tracks[trackNumber][j].color)\n        } else {\n          featureColours.push(lastColour)\n\t    }\n      featureNames.push(annotations.Tracks[trackNumber][j].label)\n      featureDescriptions.push(annotations.Tracks[trackNumber][j].desc)\n      featurePositions.push(annotations.Tracks[trackNumber][j].start +\n        ':' + annotations.Tracks[trackNumber][j].end)\n\n      var fURLs = new Array()\n      var fURLtxts = new Array()\n\n      for (var k in annotations.Tracks[trackNumber][j].urls) {\n        fURLs.push(annotations.Tracks[trackNumber][j].urls[k].href)\n        fURLtxts.push(annotations.Tracks[trackNumber][j].urls[k].text)\n      }\n      featureURLs.push(fURLs)\n      featureURLtexts.push(fURLtxts)\n    }\n  }\n    var protId = annotations.ProteinID;\n    if (annotations.hasOwnProperty('SeqHash') && annotations.SeqHash != ''){\n      for (let i =0; i < panel3d.attributes.sequences.length; i++){\n        if (annotations.SeqHash == panel3d.attributes.sequences[i].uniprot_hash){\n          protId = panel3d.attributes.sequences[i].primary_accession;\n          annotations.ProteinID = protId\n        }\n      }\n    }\n\n\n\n    var annotationToAdd = {\n      id: annotations.ProteinID,\n      annotationName: annotations.Category,\n      featureColours: featureColours,\n      featureNames: featureNames,\n      featureDescriptions: featureDescriptions,\n      featurePositions: featurePositions,\n      featureURLs, featureURLs,\n      featureURLtexts, featureURLtexts\n    }\n\n    // if (annotations.ProteinID == protId){\n      AQUARIA.currentAnnotationsIn3DViewer.push(annotationToAdd)\n      // API call\n\n      if (Array.isArray(annotationToAdd.id)){\n        panel3d.addAnnotation(annotationToAdd.id[0],\n          annotationToAdd.annotationName, featureColours,\n          featureNames, featureDescriptions, featurePositions,\n          featureURLs, featureURLtexts)\n\n      }\n      else {\n        panel3d.addAnnotation(annotationToAdd.id,\n          annotationToAdd.annotationName, featureColours,\n          featureNames, featureDescriptions, featurePositions,\n          featureURLs, featureURLtexts)\n\n      }\n\n    // }\n\n  }\n}","<template>\n    <div class=\"panel\">\n        <a href=\"#\" class=\"close\" @click=\"closeTab\"></a>\n        <div id=\"featurePanel\">\n          <div id=\"groupedFeatures\" class=\"ui-sortable\" v-if=\"getfeatureSets\">\n            <div :id=\"structure[0]\" class=\"featureCollection ui-sortable-handle\" v-for=\"structure in getfeatureSets\" :key=\"structure[0]\" @click=\"toggleTrack(structure[0])\" >\n              <div class=\"featureHeader\" @mouseover=\"hightlight(structure[0])\" @mouseout=\"removeHightlight(structure[0])\">\n                <p id=\"arrow\">►</p>\n                <p class=\"featureName\">{{ structure[0] }}</p>\n                <div class=\"info\" @mouseover=\"showInfo(structure, $event)\">?</div>\n              </div>\n              <div class=\"featureTrack ui-sortable\" style=\"cursor: move;\"></div>\n            </div>\n          </div>\n          <br/>\n        </div>\n    </div>\n</template>\n<script>\nimport * as Panels from '../AquariaLayout/helpers/hidePanels'\nimport store from '../../store/index'\nimport * as loadFeature from './helpers/loadFeature'\nimport { mapGetters } from 'vuex'\nimport * as fetchAnnotations from './helpers/fetch_features'\nimport _ from 'lodash'\nimport * as panel3d from '../StructureViewer/helpers/joleculeAPI'\n\nexport default {\n  name: 'Features',\n  data () {\n    return {\n      jAlignment: null,\n      jController: null\n    }\n  },\n  methods: {\n    closeTab: function () {\n      window.scrollBy(0, 100)\n      Panels.hidePanels()\n    },\n    clearResidues: function () {\n      panel3d.embededJolecule.controller.clearSelectedResidues()\n    },\n    toggleTrack: function (event) {\n      var trackElem = document.getElementById(event).lastChild\n      event = event.replace(/\\s/g, '\\\\ ')\n      if (trackElem.style.display !== 'block') {\n        trackElem.style.display = 'block'\n        document.querySelector('#' + event + ' #arrow').innerText = '▼'\n      } else {\n        trackElem.style.display = 'none'\n        document.querySelector('#' + event + ' #arrow').innerText = '►'\n      }\n    },\n    hightlight: function (id) {\n      document.querySelector('#' + id.replace(/\\s/g, '\\\\ ') + ' > .featureHeader').style.background = '#bebebe'\n    },\n    removeHightlight: function (id) {\n      document.querySelector('#' + id.replace(/\\s/g, '\\\\ ') + ' > .featureHeader').style.background = '#ccc'\n    },\n    showInfo: function (feature, event) {\n      store.commit('setPopupTitle', feature[0])\n      store.commit('setPopupText', feature[1][0].About)\n      store.commit('setIsDefaultFeature', true)\n      store.commit('setVariantIdx', -1)\n      store.commit('setPopupCoordinates', event.srcElement.getBoundingClientRect())\n    },\n    fetch_features: function (sequences) {\n      var primaryAccession = []\n      var uniprotMD5hash = []\n\n      sequences.forEach(function (sequence) {\n        primaryAccession.push(sequence.primary_accession)\n        uniprotMD5hash.push(sequence.uniprot_hash)\n      })\n      fetchAnnotations.fetch_annotations(primaryAccession)\n    },\n    groupFeatureSets: function (featureList, extServerIds) {\n      if (featureList.length > 0) {\n        var featureSet = featureList || featureSet\n        var extServerIds_ = extServerIds || extServerIds_\n        // Group by feature source\n        var groupedFeatures = _.groupBy(featureSet, function (feature) {\n          return feature.Server\n        })\n        // Store as an object\n        groupedFeatures = Object.keys(groupedFeatures).map(function (key) {\n          return [String(key), groupedFeatures[key]]\n        })\n        /**\n         * Replace setfeatureSets by completeExtServers\n         */\n        if (store.getters.getfeatureSets === null) {\n          store.commit('setfeatureSets', groupedFeatures)\n        } else if (store.getters.getfeatureSets.length < groupedFeatures.length) {\n          store.commit('setfeatureSets', groupedFeatures)\n        }\n      }\n    },\n    checkAddedFeature () {\n      var _this = this\n      var featureSets = this.$store.state.featureSets ? this.$store.state.featureSets : []\n      if (featureSets.length > 0) {\n        featureSets.forEach(function (f) {\n          if (f[0].includes('Added') && _this.getLoadedFeature.set === null) {\n            store.commit('setLoadedFeature', { set: f[1][0], track: 0 })\n          }\n        })\n      }\n    }\n  },\n  watch: {\n    /**\n     * When complete server object updated using newly fetched features, update feature panel\n     */\n    getcompleteServerNum: function (newVal, oldVal) {\n      var _this = this\n      var featureInfo = this.$store.state.aggregatedAnnotations\n      var completeServers = this.$store.state.completeExtServers\n      if (newVal !== oldVal) {\n        _this.groupFeatureSets(featureInfo, completeServers)\n        if (_this.getCoverageMap && _this.$route.query) {\n          _this.checkAddedFeature()\n        }\n      }\n    },\n    Loader: function (newVal) {\n      var _this = this\n      if (!newVal) {\n        _this.fetch_features(this.$store.state.Matches.sequences)\n      }\n    },\n    getLoadedFeature: function (data) {\n      loadFeature.loadFeature(data.set, data.track)\n      if (this.sideChain !== null) {\n        loadFeature.showSideChains(this.sideChain)\n      }\n    },\n    getCoverageMap: function (data) {\n      var _this = this\n      if (data && _this.$route.query) {\n        if (!_this.getLoadedFeature.set) {\n          _this.checkAddedFeature()\n        }\n      }\n    }\n  },\n  computed: {\n    Loader () {\n      return store.state.Loader\n    },\n    sideChain () {\n      return store.state.sidechain\n    },\n    ...mapGetters([\n      'getfeatureSets',\n      'getcompleteServerNum',\n      'getLoadedFeature',\n      'getCoverageMap'\n    ])\n  }\n}\n</script>\n\n<style>\n#arrow {\n  font-size: calc(9px + 0.2vw);\n  color: #848484;\n  margin: 10px -7px 0px 0px;\n}\n.complete{\n  display:none;\n}\n\n.more{\n  background:lightblue;\n  color:navy;\n  font-size:13px;\n  padding:3px;\n  cursor:pointer;\n}\n\n#featurePanel{\n  max-height: 40vh;\n  overflow: scroll;\n  margin-bottom: -55px;\n  width: 100vw;\n  background: var(--primary-tab);\n}\n#groupedFeatures{\n  margin-left:  6px;\n  height: 100%;\n}\n\ndiv.featureHeader{\n  display:  inline-flex;\n  width:  100%;\n  padding-bottom:  6px;\n  height:  fit-content;\n  max-height:  30px;\n}\n\ndiv.featureHeader  p{\n  cursor:  pointer;\n}\n\n.featureName{\n  font-size:  calc(16px  +  0.2vw);\n  padding-left:  8px;\n  color:  #5a5959;\n  margin:  9px;\n}\n\n.featureSetName{\n  font-size:  calc(14px  +  0.2vw);\n  padding-left:  8px;\n  color:  #5a5959;\n  margin:  9px;\n}\n\n.featureSetName_{\n  font-size:  calc(12px  +  0.2vw);\n  padding-left:  8px;\n  color:  #7B7A7A;\n  margin:  9px;\n}\n\ndiv.featureHeader  .info{\n  font-size:  calc(10px  +  0.2vw);\n  padding:  0px  5px  8px  5px;\n  color:  #5a5959;\n  background-color:  white;\n  border-radius:  12px;\n  height:  15px;\n  margin-top:  10px;\n  position:  relative;\n}\n\ndiv.featureHeader  .info:hover{\n  font-size:  calc(10px  +  0.2vw);\n  padding:  0px  5px  8px  5px;\n  color:  white;\n  background-color: var(--primary-link);\n  border-radius:  12px;\n  height:  15px;\n  margin-top:  10px;\n  position:  relative;\n}\n\nspan.info{\n  font-size:  calc(10px  +  0.2vw);\n  padding:  1px  5px  1px  5px;\n  color:  #5a5959;\n  background-color:  white;\n  border-radius:  12px;\n  height:  15px;\n  margin-top:  10px;\n  position:  relative;\n  cursor: pointer;\n}\n\n/*  Tooltip  text  */\nspan.tooltiptext  {\n  visibility:  hidden;\n  width:  fit-content;\n  max-width:  38vw;\n  min-width:  25vw;\n  background-color:  #fff;\n  color:  black;\n  text-align:  left;\n  padding:  5px  10px;\n  border-radius:  6px;\n  /*  Position  the  tooltip  text  -  see  examples  below!  */\n  position:  fixed;\n  z-index:  1;\n  overflow-wrap:  break-word;\n  margin-top:  -5px;\n  left:  22vw;\n}\n\n/*  Show  the  tooltip  text  when  you  mouse  over  the  tooltip  container  */\n/*  .info:hover  span.tooltiptext  {\n  visibility:  visible;\n  }  */\n\n.infoHeader{\n  background-color:  white;\n  color:  black;\n}\n\n#remove{\n  margin-left:  auto;\n  margin-right:  4px;\n  height:  19px;\n  margin-right:  10px;\n}\n\n/*  #share{\n  height:  19px;\n  margin-right:  10px;\n}  */\n\n.featureButtons{\n  margin-top:  10px;\n  background:  #777777;\n  color:  #e8e2e2;\n  border-radius:  10px;\n  padding-top:  0px;\n  cursor:  pointer;\n}\n\n.featureButtons{\n  visibility:  hidden;\n}\n\ndiv.featureTrack{\n  display:  none;\n  background:  none;\n  height:  fit-content;\n}\n\n#classification  a{\n  color:  #9a9999;\n  font-size:  14px;\n}\n\n#classification{\n  padding-top:  5px;\n}\n\n#classification:hover  >  a{\n  color:  #08C;\n  font-size:  14px;\n}\n\n.track  >  p{\n  text-align:  left;\n  margin-left:  10px;\n}\n\ndiv.balloon  {\n  background:  #666;\n  border-radius:  10px;\n  color:  #CCC;\n  padding:  8px;\n}\n\ndiv.balloon  p  {\n  margin:  0  0  6px  0;\n}\n\ndiv.balloon  p  a  {\n  color:  #6AF;\n}\n\ndiv.balloon  h3  {\n  background-color:  #999;\n  margin-bottom:  1em;\n  }\n\ndiv.balloon{\n  overflow: scroll;\n  max-height: 800px;\n}\n\ndiv.popup.top  div.balloon  {\n  border-radius:  16px;\n  box-shadow:  0px  2px  16px  #555;\n  cursor:  -moz-grab;\n  cursor:  -webkit-grab;\n  cursor:  grab;\n  padding-left:  14px;\n}\n\ndiv.popup.top  div.balloon:active  {\n  cursor:  -moz-grabbing;\n  cursor:  -webkit-grabbing;\n  cursor:  grabbing;\n}\n\n.windows  div.popup.top  div.balloon  {\n  border-radius:  0;\n}\n\ndiv.popup  {\n  background:  url(../../../public/images/point.png)  no-repeat  center  bottom;\n  display:  none;\n  padding:  0  0  14px  0;\n  position:  absolute;\n  width:  320px;\n  z-index:  999;\n}\n\n.highcharts-figure,  .highcharts-data-table  table  {\n  min-width:  100px;\n  max-width:  150px;\n  margin:  1em  auto;\n}\n\n.highcharts-data-table  table  {\n  font-family:  'Source Sans Pro',  sans-serif;\n  border-collapse:  collapse;\n  border:  1px  solid  #EBEBEB;\n  margin:  10px  auto;\n  text-align:  center;\n  width:  150px;\n  max-width:  200px;\n}\n\n.highcharts-data-table  caption  {\n  padding:  1em  0;\n  font-size:  1.2em;\n  color:  #555;\n}\n\n.highcharts-data-table  th  {\n  font-weight:  600;\n  padding:  0.5em;\n}\n\n.highcharts-data-table  td,  .highcharts-data-table  th,  .highcharts-data-table  caption  {\n  padding:  0.5em;\n}\n\n.highcharts-data-table  thead  tr,  .highcharts-data-table  tr:nth-child(even)  {\n  background:  #f8f8f8;\n}\n\n.highcharts-data-table  tr:hover  {\n  background:  #f1f7ff;\n}\n\n.column  {\n  /* float:  left; */\n  width:  25%;\n  padding:  2px;\n  display:  inline-block;\n  /*  border:1px  solid  orange;  */\n  width:  105px;\n  height:  130px;\n  font-size:11px;\n}\n\n/*  Clear  floats  after  image  containers  */\n.row::after  {\n  content:  \"\";\n  clear:  both;\n  display:  table;\n}\n\n.popupTitle  {\n  font-weight:  bold;\n}\n\n.popupText  {\n  padding-top:  5px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Features.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Features.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Features.vue?vue&type=template&id=e7086b9e&\"\nimport script from \"./Features.vue?vue&type=script&lang=js&\"\nexport * from \"./Features.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Features.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import store from '../../../store/index'\nvar Highcharts = require('./highstocks.js')\nconst oneAaCodes = ['A', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'K', 'L', 'M', 'N', 'P', 'Q', 'R', 'S', 'T', 'V', 'W', 'Y']\n  \nexport function hidePopup () {\n    store.commit('setPopupCoordinates', 0)\n}\n  \nexport function showPopup (f, eid) {\n    var urlhtml = ''\n    if (f.urls.length > 0) {\n        urlhtml = '<p>'\n        for (var i = 0; i < f.urls.length; i++) {\n            urlhtml += \"<a href='\" + f.urls[i].href + \"' target='_blank'>\" +\n                    f.urls[i].text + '</a><br>'\n        }\n        urlhtml += '</p>'\n    }\n\n    let oldAa = ''\n    if (f.name.includes('&#8201;&#8594;&#8201;')) {\n        oldAa = f.name.replace(/^.*\\(/, '')\n        oldAa = oldAa.replace(/\\&.*$/, '')\n    }\n\n    let btnsDiv = \"<div id='buttons_eachAa'> <b>See also:</b><p class='pAaColor'> \" + oldAa + ' &rarr;</p>'\n\n    oneAaCodes.forEach(function (anAa, _i) {\n        if (anAa != oldAa) {\n            // balloon = balloon + \"<div id='divVI_varInfo_\" + anAa + \"'></div>\"\n      const isUniCosOrFun = isUniCosOrFunPresent(anAa, f.desc, f.start)\n            btnsDiv = btnsDiv + \"<button id='btnVI_\" + anAa + \"'\"\n            if (isUniCosOrFun == true) {\n                btnsDiv = btnsDiv + \"class='btnAaBold_b'> <b>\" + anAa + '</b> '\n            } else {\n                btnsDiv = btnsDiv + \" class='btnAaBold'> \" + anAa\n            }\n            btnsDiv = btnsDiv + '</button>'\n        }\n    })\n    btnsDiv = btnsDiv + '</div>'\n\n    let balloonText = f.desc + \"<br>\" + urlhtml;\n\n    let popupTitle = '<b>' + f.label + '</b>'\n    if (f.name.includes('span_missenseHeading')){\n        store.commit('setIsDefaultFeature', false)\n        if (f.start != f.end){\n        store.commit('setVariant', f.start + '-' + f.end)\n        store.commit('setPopupTitle', f.label)\n        getIdxInVarRes(f.start + '-' + f.end, f.label)\n        }\n        else {\n        store.commit('setVariant', f.start)\n        store.commit('setPopupTitle', f.label)\n\n        getIdxInVarRes(f.start, f.label)\n        }\n    }\n    else {\n        store.commit('setVariant', -1)\n        store.commit('setIsDefaultFeature', true)\n        if (f.start === f.end){\n            popupTitle = popupTitle + '( Residue ' + f.start + ') '\n        } else {\n            popupTitle = popupTitle + '( Residues ' + f.start + '-' + f.end + ') '\n        }\n        store.commit('setPopupTitle', popupTitle)\n        store.commit('setPopupText', balloonText)\n        store.commit('setVariantIdx', -1)\n        store.commit('setPopupCoordinates', document.querySelector('#' + eid.id).getBoundingClientRect())\n    }\n\n    if (f.hasOwnProperty('hc_go') && f.hasOwnProperty('hc_ec') && f.hasOwnProperty('hc_species')) {\n        console.log('CATH plot data')\n        console.log(f)\n        handleCathPopups(f).then(function () {\n            updateTheStyleOfHc()\n        })\n    } else {\n        console.log('CATH plot no data')\n        console.log(f)\n    }\n}\n\nfunction getIdxInVarRes(resNum, popupText){\nvar varRes = store.getters.getVariantResidues\n//console.log(\"GAMMA \" + resNum + \" \" + popupText)\n//console.log(varRes)\n\n\nif (varRes.hasOwnProperty(resNum) && varRes[resNum].hasOwnProperty('theOrigFeatStr')){\n  for (let i=0; i < varRes[resNum].theOrigFeatStr.length; i++){\n    if (popupText.includes(varRes[resNum].theOrigFeatStr[i])){\n      store.commit('setVariantIdx', i)\n      // console.log(\"Set variant idx \" + i)\n      break\n    }\n  }\n}\n}\n\nfunction isUniCosOrFunPresent (anAa, desc, resNum) {\nconst tag_open = '<toReplace_varInfo_' + anAa + '>'\nconst tag_close = '</toReplace_varInfo_' + anAa + '>'\n\nconst\tfirstOpenPos = desc.indexOf(tag_open)\nconst lastClosePos = desc.lastIndexOf(tag_close)\n\nconst description = desc.substring(firstOpenPos, lastClosePos)\n\nif (description.match('UniProt') || description.match('FunVar') || description.match('COSMIC') || (window.AQUARIA.hasOwnProperty('variantStructs') && window.AQUARIA.variantStructs.hasOwnProperty(resNum) && window.AQUARIA.variantStructs[resNum].hasOwnProperty(anAa) && window.AQUARIA.variantStructs[resNum][anAa].hasOwnProperty('pdbs') && window.AQUARIA.variantStructs[resNum][anAa]['pdbs'].length > 0)) {\n  return true\n}\nreturn false\n}\n\nfunction handleCathPopups (f) {\nreturn new Promise(function (resolve, reject) {\n  // handle this one.\n  if (typeof f.hc_go !== 'undefined' && f.hc_go.hasOwnProperty('data') && f.hc_go.data.hasOwnProperty('series') && f.hc_go.data.series.length >= 2) {\n    doThePlotting_v2('hc_go_div', f.hc_go.data.series[0].data, f.hc_go.data.series[1].data, '', f.hc_go.data.series[0].size, f.hc_go.data.series[0].dataLabels.color, f.hc_go.data.series[0].dataLabels.distance, f.hc_go.data.series[1].innerSize, f.hc_go.data.series[0].name, f.hc_go.data.series[1].name, f.hc_go.data.series[1].dataLabels.color).then(function () {\n      // console.log(\"CATH plot: 1\");\n      document.getElementById('hc_go').prepend(document.getElementById('hc_go_div'))\n    })\n      .catch(function (error) {\n        console.log('CATH plot: 2')\n        // if (!document.getElementById('hc_go_noData')){\n        // create element\n        createANewDiv_hcNoData('hc_go_noData').then(function () {\n          document.getElementById('hc_go').prepend(document.getElementById('hc_go_noData'))\n          document.getElementById('hc_go_noData').innerHTML = document.getElementById('hc_go_noData').innerHTML + '<br> <br> <center> No data</center>'\n          console.log('featureslist.showAnnotation ERROR ' + error)\n        })\n        // }\n      })\n  } else {\n    // no data.\n\n    // if (!document.getElementById('hc_go_noData')){\n    // create element\n    createANewDiv_hcNoData('hc_go_noData').then(function () {\n      document.getElementById('hc_go').prepend(document.getElementById('hc_go_noData'))\n      document.getElementById('hc_go_noData').innerHTML = document.getElementById('hc_go_noData').innerHTML + '<br> <br> <center> No data</center>'\n    })\n    // }\n    console.log('CATH plot: 3')\n\n    // document.getElementById('hc_go_div').style['background-color'] = \"white\";\n  }\n\n  if (typeof f.hc_ec !== 'undefined' && f.hc_ec.hasOwnProperty('data') && f.hc_ec.data.hasOwnProperty('series') && f.hc_ec.data.series.length >= 2) {\n    doThePlotting_v2('hc_ec_div', f.hc_ec.data.series[0].data, f.hc_ec.data.series[1].data, '', f.hc_ec.data.series[0].size, f.hc_ec.data.series[0].dataLabels.color, f.hc_ec.data.series[0].dataLabels.distance, f.hc_ec.data.series[1].innerSize, f.hc_ec.data.series[0].name, f.hc_ec.data.series[1].name, f.hc_ec.data.series[1].dataLabels.color).then(function () {\n      document.getElementById('hc_ec').prepend(document.getElementById('hc_ec_div'))\n    })\n      .catch(function (error) {\n        // if (!document.getElementById('hc_ec_noData')){\n        // create element\n        createANewDiv_hcNoData('hc_ec_noData').then(function () {\n          document.getElementById('hc_ec').prepend(document.getElementById('hc_ec_noData'))\n          document.getElementById('hc_ec_noData').innerHTML = document.getElementById('hc_ec_noData').innerHTML + '<br> <br> <center> No data</center>'\n          console.log('featureslist.showAnnotation ERROR ' + error)\n        })\n        // }\n      })\n  } else {\n    // no data\n    // document.getElementById('hc_ec').innerHTML = document.getElementById('hc_ec').innerHTML + ' <br> No data';\n    // if (!document.getElementById('hc_ec_noData')){\n    // create element\n    createANewDiv_hcNoData('hc_ec_noData').then(function () {\n      document.getElementById('hc_ec').prepend(document.getElementById('hc_ec_noData'))\n      document.getElementById('hc_ec_noData').innerHTML = document.getElementById('hc_ec_noData').innerHTML + '<br> <br> <center> No data</center>'\n    })\n      .catch(function () {\n\n      })\n    // }\n  }\n\n  if (typeof f.hc_species !== 'undefined' && f.hc_species.hasOwnProperty('data') && f.hc_species.data.hasOwnProperty('series') && f.hc_species.data.series.length >= 2) {\n    doThePlotting_v2('hc_species_div', f.hc_species.data.series[0].data, f.hc_species.data.series[1].data, '', f.hc_species.data.series[0].size, f.hc_species.data.series[0].dataLabels.color, f.hc_species.data.series[0].dataLabels.distance, f.hc_species.data.series[1].innerSize, f.hc_species.data.series[0].name, f.hc_species.data.series[1].name, f.hc_species.data.series[1].dataLabels.color).then(function () {\n      document.getElementById('hc_species').prepend(document.getElementById('hc_species_div'))\n    })\n      .catch(function (error) {\n        // if (!document.getElementById('hc_species_noData')){\n        // create element\n        createANewDiv_hcNoData('hc_species_noData').then(function () {\n          document.getElementById('hc_species').prepend(document.getElementById('hc_species_noData'))\n          document.getElementById('hc_species_noData').innerHTML = document.getElementById('hc_species_noData').innerHTML + '<br> <br> <center> No data</center>'\n\n          console.log('featureslist.showAnnotation ERROR ' + error)\n        })\n        // }\n      })\n  } else {\n    // no data\n    // document.getElementById('hc_species').innerHTML = document.getElementById('hc_species').innerHTML + ' <br> No data';\n    //\tif (!document.getElementById('hc_species_noData')){\n    // create element\n    createANewDiv_hcNoData('hc_species_noData').then(function () {\n      document.getElementById('hc_species').prepend(document.getElementById('hc_species_noData'))\n      document.getElementById('hc_species_noData').innerHTML = document.getElementById('hc_species_noData').innerHTML + '<br> <br> <center> No data</center>'\n    })\n    //\t}\n  }\n\n  resolve()\n})\n}\n\nfunction updateTheStyleOfHc () {\nconst hcSeriesGroup = document.getElementsByClassName('highcharts-pie-series')\n// console.log(\"The highcharts series group are: \");\n// console.log(hcSeriesGroup);\n// console.log(hcSeriesGroup.children('path'));\n\nfor (const key in hcSeriesGroup) {\n  if (hcSeriesGroup.hasOwnProperty(key)) {\n    /* hcSeriesGroup[key].childNodes.forEach(function(item, i){\n              console.log(\"The item is\");\n              console.log(item);\n          }); */\n\n    const thePaths = hcSeriesGroup[key].getElementsByTagName('path')\n    // console.log(\"The paths are\");\n    // console.log(thePaths);\n\n    for (const pathKey in thePaths) {\n      if (thePaths.hasOwnProperty(pathKey)) {\n        // console.log('The path is ');\n        // console.log(thePaths[pathKey]);\n        // console.log(thePaths[pathKey].getAttribute('fill'));\n\n        const theColor = thePaths[pathKey].getAttribute('fill')\n\n        thePaths[pathKey].removeAttribute('fill')\n        thePaths[pathKey].setAttribute('style', 'fill:' + theColor)\n      }\n    }\n  }\n}\n}\n\nfunction doThePlotting_v2 (divId, theSeriesData_inner, theSeriesData_outer, theTitle, theSize_inner, labelCol_inner, labelDist_inner, innerSize_outer, name_inner, name_outer, labelCol_outer) {\n    return new Promise(function (resolve, reject) {\n      // try{\n      //\tlet newDiv = document.createElement('div');\n      //\tnewDiv.id = divId;\n      //\tnewDiv.style = \"width: 100px; height: 100px; margin: 0 auto\";\n      //\tdocument.getElementById('superFamCharts').append(newDiv);\n  \n            createANewDiv_hcNoData(divId).then(function () {\n        // First add new Div.\n        try {\n          Highcharts.chart(divId, {\n                          chart: {\n                              type: 'pie',\n              margin: 0\n                          },\n                          title: {\n                              text: theTitle\n                          }, /*\n                          subtitle: {\n                              text: 'Source: <a href=\"http://statcounter.com\" target=\"_blank\">statcounter.com</a>'\n                          }, */\n                          plotOptions: {\n                              pie: {\n                                  shadow: false,\n                                  center: ['50%', '50%']\n                              }\n                          },\n                          tooltip: {\n                              valueSuffix: '%'\n                          },\n                          series: [{\n                              name: name_inner,\n                              data: theSeriesData_inner,\n                              size: theSize_inner,\n                              dataLabels: {\n                enabled: false,\n                                  formatter: function () {\n                                      return this.y > 3 ? this.point.name : null\n                                  },\n                                  color: labelCol_inner,\n                                  distance: labelDist_inner\n                              }\n                          }, {\n                              name: name_outer,\n                              data: theSeriesData_outer,\n                              // size: '80%',\n                              innerSize: innerSize_outer,\n                              dataLabels: {\n                enabled: false,\n                                  formatter: function () {\n                                      // display only if larger than 1\n                                      return this.y > 1 ? '<b>' + this.point.name + ':</b> ' +\n                                          this.y + '%' : null\n                                  },\n                color: labelCol_outer\n                              },\n                              id: 'versions'\n                          }],\n                          responsive: {\n                              rules: [{\n                                  condition: {\n                                      maxWidth: 100\n                                  },\n                                  chartOptions: {\n                                      series: [{\n                                      }, {\n                                          id: 'versions',\n                                          dataLabels: {\n                                              enabled: false\n                                          }\n                                      }]\n                                  }\n                              }]\n                          }\n          })\n          resolve()\n          // console.log('In the highcharts plotting function')\n        } catch (error) {\n          console.log('Highcharts error')\n          console.log(error)\n          resolve()\n          console.log('In the highcharts plotting function')\n        }\n      })\n      /* }\n          catch(error){\n              console.log(\"Highcharts error\");\n              console.log(error);\n          } */\n    })\n  }\n\n  function createANewDiv_hcNoData (divId) {\n    return new Promise(function (resolve, reject) {\n      if (document.getElementById(divId)) {\n        document.getElementById(divId).remove() //  = '';\n      }\n      // if (!document.getElementById(divId)){\n      const newDiv = document.createElement('div')\n      document.getElementById('superFamCharts').append(newDiv)\n      newDiv.id = divId\n      newDiv.style = 'width: 100px; height: 100px; margin: 0 auto; background-color: white;'\n  \n      // if (document.getElementById(divId)){\n      resolve()\n      // }\n      // }\n    })\n  }","import d3 from 'd3'\nimport * as panels from '../../AquariaLayout/helpers/hidePanels'\nimport store from '../../../store/index'\nimport * as viewer from './loadFeature'\nimport * as popup from './handleFeaturePop'\nimport * as showMatchingStructures from '../../MatchingStructures/helpers/show_matching_structures'\nvar featureSetCount = 0\nvar width = 0\n\nexport function updateFeatureUI (data) {\n  if (document.querySelector('#featurePanel > .ruler')) {\n    document.querySelector('#featurePanel > .ruler').remove()\n  }\n  /**\n   * @todo\n   * Resize tracks on resize\n   */\n  showMatchingStructures.drawAxisRuler('featurePanel')\n  data.forEach(function (key) {\n    var featureHeader = d3.select('#' + key[0].replace(/\\s/g, '\\\\ '))\n    var fh = featureHeader.select('.featureTrack').selectAll('div')\n    for (var aFsIdx in key[1]){\n      if (((key[0] != 'Added Features') || (!key[1][aFsIdx].hasOwnProperty('SeqHash')) || (key[1][aFsIdx].SeqHash == '') || (key[1][aFsIdx].SeqHash == store.state.sequences[0].uniprot_hash))) {\n        fh.data([key[1][aFsIdx]])\n        .enter()\n        .append('div') \n        .attr('class', 'track')\n        .attr('id', function(d){\n          return 'track_' + d.Category\n        })\n        .html(\n          function (d) {\n            if (d.Type != '') {\n              if (d.Server == 'UniProt' || d.Server == 'PredictProtein' || d.Server == 'CATH' || d.Server == 'SNAP2' || d.Server == 'COSMIC' || d.Server == 'FunVar') {\n                    var source = 'Curated Features'\n              } else {\n                  source = d.Server\n              }\n              return \"<p><span class='featureSetName'>\" +\n                    d.Category +\n                    '</span> <i class=\"featureSetName_\">(' +\n                    d.Type.replace(/_/g, ' ') +\n                    \")</i> &nbsp;&nbsp; <span class='info'>?</span>  <span class='source'>\" +\n                    source.replace(/[sS]$/, '') +\n                    '</span> </p> <span class=\\'tooltiptext\\'>' + d.Description + '</span>'\n            } else {\n              if (d.Server == 'UniProt' || d.Server == 'PredictProtein' || d.Server == 'CATH' || d.Server == 'SNAP2' || d.Server == 'COSMIC' || d.Server == 'FunVar') {\n                source = 'Curated Features'\n            } else {\n                source = d.Server\n            }\n              return '<p><span class=\"featureSetName\">' +\n                    d.Category +\n                    \"</span> &nbsp;&nbsp; <span class='info'>?</span> <span class='source'>\" +\n                    source.replace(/[sS]$/, '')  +\n                    '</span></p> <span class=\\'tooltiptext\\'>' + d.Description + '</span>'\n            }\n          }\n        )\n        .each(drawTrack)\n      }\n    }\n  })\n}\n\n/** \n * @TODO\n * draw track using document fragment\n */\nexport function drawTrack (datum, i) {\n    var features = datum.Tracks\n    for (var track in features) {\n      var outerdiv = d3.select(this)\n      var nusvg = createSVGforFeature(outerdiv)\n      nusvg\n        .attr('id', 'ftrack_' + featureSetCount + '_' + track)  \n        .on('click', function () {\n          if (d3.select(this).attr('class') == 'loaded') { // deselect feature (it's already displayed)\n            /** \n             * @TODO\n             * Improve functions to:\n             * 1. Deselect feature track\n             * 2. Collapse feature set\n            */\n            store.commit('setLoadedFeature', {set: null, track: null})\n            d3.select('svg.loaded').classed('loaded', false)\n            document.querySelector('.featureHeader').click()\n            viewer.removeFearture()\n            popup.hidePopup()\n            panels.hidePanels()\n          } else {\n            /** \n             * @TODO\n             * Use vuex to remove or update feature map\n             * Use vuex to detect if loaded feature is an user-defined feature\n            */\n            if (document.querySelector('#outerFeatureMap')) {\n              document.querySelector('#outerFeatureMap').remove()\n            }\n            if (datum.Server != 'Added Features') {\n              AQUARIA.addedFeature = false\n            }\n            // Store selected feature in vuex store\n            var oid = d3.select(this).attr('id').split('_')[2]\n            store.commit('setLoadedFeature', {set: datum, track: oid})\n\n            d3.selectAll('svg.loaded rect.feature').attr('fill', '#a4abdf')\n            d3.select('svg.loaded').classed('loaded', false)\n            d3.select(this).attr('class', 'loaded')\n            panels.hidePanels()\n          }\n        })\n        .on('mouseover', function () {\n          d3.select(this).selectAll('rect.feature').attr(\n            'fill', function () {\n              return d3.select(this).attr('color')\n            })\n        })\n        .on('mouseout', function () {\n          if (d3.select(this).attr('class') !== 'loaded') {\n            d3.select(this).selectAll('rect.feature')\n              .attr('fill', '#a4abdf')\n          }\n        })\n      // add background for highlighting\n        .append('rect')\n        .attr('width', width + store.state.margin.left)\n        .attr('height', 25)\n        .attr('class', 'bg')\n        .attr('fill', 'none')\n  \n      d3.select('svg#ftrack_' + featureSetCount + '_' + track)\n        .append('g')\n        .attr('transform', 'translate(' + store.state.margin.left + ',0)')\n      // add center line\n        .append('rect')\n        .attr('width', width)\n        .attr('height', 1)\n        .attr('transform', 'translate(0,13)')\n        .attr('class', 'insertion')\n      \n        drawSingleFeature(datum, features, track)\n    }\n    featureSetCount++\n}\n\nexport function drawSingleFeature (datum, features, track) {\n  for (var feature in features[track]) {\n    var featureCount = store.state.featCount + 1\n    store.commit('setFeatCount', featureCount)\n    d3\n      .select('#ftrack_' + featureSetCount + '_' + track + ' g')\n      .append('rect')\n      .attr('width', function () {\n        return (/* parseInt */((features[track][feature].size + 1) * AQUARIA.srw) > 2) ? /* parseInt */((features[track][feature].size + 1) * AQUARIA.srw) : 2\n      })\n      .attr('height', 14)\n      .attr('id', 'feature_' + featureSetCount + '_' + track + '_' + feature)\n      .attr('transform', 'translate(' + /* parseInt */ (features[track][feature].start * (AQUARIA.srw - 0.0085)) + ',6)')\n      .attr('color', features[track][feature].color).attr('fill', '#a4abdf')\n      .attr('fill-opacity', function () { return (datum.Class == 'single_track') ? 0.3 : 1 })\n      .attr('class', 'feature')\n      .on('mouseover', function () {\n        d3.select(this).attr('stroke-width', '2px').attr('stroke', 'white')\n        popup.showPopup(features[this.id.split('_')[2]][this.id.split('_')[3]], this)\n      })\n      .on('mouseout',\tfunction () {\n        d3.select(this).attr('stroke-width', '0px')\n        popup.hidePopup()\n      })\n  }\n}\n\nexport function createSVGforFeature (outerdiv) {\n  var viewBoxwidth = document.getElementById('structure-viewer').offsetWidth - store.state.margin.right - store.state.margin.left\n  width = document.getElementById('structure-viewer').offsetWidth - store.state.margin.right\n  var height = 40 - store.state.margin.top - store.state.margin.bottom + 35 \n  var nusvg = outerdiv.append('svg').attr('width', width)\n    .attr('height', height)\n    .attr('viewBox', '0 0 ' + viewBoxwidth + ' ' + height)\n    .attr('preserveAspectRatio', 'none')\n  return nusvg\n}\n\n","<template>\n  <div>\n    <div class=\"tabs rel level3\">\n      <div class=\"tab\"  id=\"Structures\" v-on:click=\"renderClusters\">\n        <a href=\"#Structures\"><span class=\"icon\"><img v-bind:src=\"MS\" /></span>&nbsp;&nbsp;Matching Structures&nbsp;&nbsp;<span class=\"counter\" v-if=\"getStructCount > 0\"> {{ getStructCount.toLocaleString() }}</span></a>\n      </div>\n      <MatchingStructures />\n      <div class=\"tab\" id=\"Features\" v-on:click=\"renderFeatures\">\n        <a href=\"#Features\"><span class=\"icon\"><img v-bind:src=\"FT\" /></span>&nbsp;&nbsp;Features&nbsp;&nbsp;<span class=\"counter\" id=\"featureCounter\" v-if=\"getFeatCount\">{{ getFeatCount.toLocaleString() }}</span></a>\n      </div>\n      <Features />\n    </div>\n  </div>\n</template>\n<script>\nimport MatchingStructures from '../MatchingStructures/MatchingStructures'\nimport Features from '../Features/Features'\nimport * as Panels from './helpers/hidePanels'\nimport store from '../../store/index'\nimport { mapGetters } from 'vuex'\nimport * as renderFeature from '../Features/helpers/renderPanel'\nimport * as showMatchingStructures from '../MatchingStructures/helpers/show_matching_structures'\nimport * as panel3d from '../StructureViewer/helpers/joleculeAPI'\n\nexport default {\n  name: 'Tabs',\n  components: {\n    MatchingStructures,\n    Features\n  },\n  data () {\n    return {\n      MS: require('../../assets/img/MS-01.svg'),\n      FT: require('../../assets/img/FT-01.svg')\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'getFeatCount',\n      'getStructCount',\n      'getMatches'\n    ])\n  },\n  methods: {\n    storeHash: function () {\n      // Store fragment value before it gets replaced\n      if (window.location.hash === '') {\n        store.commit('setHash', '#(0,0,0)')\n      }\n      if (window.location.hash.includes('(')) {\n        store.commit('setHash', window.location.hash)\n      }\n    },\n    renderClusters: function () {\n      this.storeHash()\n      // @TODO Rewrite cluster rendering methods.\n      showMatchingStructures.initialise(this.$store.state.Matches.sequences[0])\n      if (!document.querySelector('.outer_container')) {\n        var newClusters = this.getMatches.clusters\n        for (var i = 0; i < newClusters.length; i++) {\n          showMatchingStructures.RenderCluster(newClusters[i])\n        }\n        showMatchingStructures.updateSizes(this.getMatches.clusters)\n      }\n      var clusterNumber = this.getMatches.Selected_PDB.cluster_number\n      var cluster = this.getMatches.clusters[clusterNumber]\n      showMatchingStructures.selectCluster(cluster, clusterNumber)\n    },\n    renderFeatures: function () {\n      this.storeHash()\n      showMatchingStructures.initialise(this.$store.state.Matches.sequences[0])\n      renderFeature.updateFeatureUI(store.state.featureSets)\n    },\n    showPanel: function (elem1, elem2) {\n      document.querySelector('#' + elem1).style.display = 'block'\n      document.querySelectorAll('.tab').className = 'tab inactive'\n      document.querySelector('#' + elem2).className = 'tab active'\n    },\n    showMatches: function () {\n      var _this = this\n      if (panel3d) {\n        const soupController = panel3d.embededJolecule.controller\n        soupController.clearSelectedResidues()\n      }\n      _this.showPanel('vis', 'Structures')\n      Panels.hidePanel('featurePanel', 'Features')\n      if (document.getElementsByClassName('dimmer').length === 0) {\n        Panels.overlay()\n      }\n      document.querySelector('div.dimmer').className += ' level0'\n      // document.querySelector('div.dimmer').style.zIndex = '0'\n      document.querySelector('div.dimmer').addEventListener('click', function () {\n        // document.querySelector('div.tabs').style.bottom = '50px'\n        Panels.hidePanels()\n      })\n    },\n    showFeatures: function () {\n      var _this = this\n      if (panel3d) {\n        const soupController = panel3d.embededJolecule.controller\n        soupController.clearSelectedResidues()\n      }\n      Panels.hidePanel('vis', 'Structures')\n      _this.showPanel('featurePanel', 'Features')\n      if (document.getElementsByClassName('dimmer').length === 0) {\n        Panels.overlay()\n      }\n      document.querySelector('div.dimmer').className += ' level0'\n      document.querySelector('div.dimmer').addEventListener('click', function () {\n        document.querySelector('a.close').click()\n        // document.querySelector('div.tabs').style.bottom = '50px'\n        Panels.hidePanels()\n      })\n    }\n  },\n  mounted () {\n    var _this = this\n    window.addEventListener('hashchange', function () {\n      if (window.location.hash.includes('Structures')) {\n        _this.showMatches()\n      }\n      if (window.location.hash.includes('Features')) {\n        _this.showFeatures()\n      }\n    })\n  }\n}\n</script>\n<style scoped>\n.tabs {\n    display: flex;\n    flex-flow: row wrap;\n    justify-content: center;\n    top: var(--spacer-bottom);\n}\n\n.tab {\n    flex: 0 0 auto;\n    height: 2rem;\n    padding: 0.25rem 0.5rem 0 0.5rem;\n    transition: All 0.5s ease;\n    min-width: 8.5rem;\n    border-top-left-radius: 0.5rem;\n    border-top-right-radius: 0.5rem;\n}\n@media screen and (min-width: 550px) {\n  .tab {  min-width: 9.5rem; }\n}\n@media screen and (min-width: 950px) {\n  .tab {  min-width: 11.5rem; }\n}\n@media screen and (min-width: 1850px) {\n  .tab {\n    min-width: 14.5rem;\n  }\n}\n.tab#Structures {\n    order: 1;\n    text-align: right;\n}\n.tab#Features {\n    order: 2;\n}\nspan.icon {\n    display: inline-block;\n    background-color: var(--background);\n    width: calc(1.25rem + 1vh);\n    height: calc(1.25rem + 1vh);\n    border-radius: 50%;\n    transition: All 0.5s ease;\n}\n\n.tab.active a, .tab.active a:hover {\n    color: var(--dark-text);\n    font-size: inherit;\n}\n\n.tab.active, .tab.active:hover {\n    background-color: var(--bg-highlite);\n}\n.tab.active span.counter, .tab.inactive span.counter, .tab:hover span.counter {\n    background: #707070;\n    color: #fff;\n    border-radius: 10px;\n    padding: 0 6px;\n}\n.tab:hover, .tab.inactive  {\n    background-color: rgba(180, 180, 180, 0.7);\n}\nspan.icon {\n    display: inline-block;\n    background-color: transparent;\n    width: calc(1.25rem + 1vh);\n    height: calc(1.25rem + 1vh);\n    border-radius: 50%;\n    transition: All 0.5s ease;\n}\n.tab a:hover, .tab:hover a{\n    color: #FFF;\n    text-decoration: none;\n    transition: All 0.5s ease;\n    font-size: inherit;\n}\n.tab.inactive a {\n  font-size: inherit;\n  color: #dedede;\n}\n\n:target a {\n    color: var(--dark-text);\n}\n.tab a {\n    color: var(--transparent);\n    text-decoration: none;\n    transition: All 0.5s ease;\n    font-size: 0px;\n}\n.tab:target {\n    background-color: var(--bg-highlite);\n    border-top-left-radius: 0.5rem;\n    border-top-right-radius: 0.5rem;\n}\n\na.to-right {\n    float: right;\n    margin-right: 0.5rem;\n    text-decoration: none;\n    font-size: 150%;\n}\n\n/* from test branch */\n#Structures, #Features {\n    color: transparent;\n}\n</style>\n","<template>\n  <div id=\"map\" class='rel'>\n    <FeatureMap :drawFeature=\"drawFeature\"/>\n    <mapLoader v-if=\"showLoader\"/>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport * as d3 from 'd3'\nimport FeatureMap from '../Features/FeatureMap.vue'\nimport * as panel3d from '../StructureViewer/helpers/joleculeAPI'\nimport { mapGetters } from 'vuex'\nimport mapLoader from './mapLoader.vue'\nimport store from '../../store/index'\nimport * as View from '../InfoAbout/helpers/ViewUtils'\n\n// var w = window.outerWidth\nvar h = 50\nvar transitionVar = 200\nvar greyScale = [61, 28]\nvar svgElem\nexport default {\n  name: 'CoverageMap',\n  components: {\n    FeatureMap,\n    mapLoader\n  },\n  data () {\n    return {\n      seqLength: 0,\n      scale: null,\n      coverageMapsrw: 0,\n      residueColor: null,\n      densityScale: null,\n      darkRegions: [],\n      myArray: [1],\n      coverageMapData: null,\n      drawFeature: false,\n      showLoader: true,\n      structure: {\n        accession: null\n      },\n      docFrag: null\n    }\n  },\n  computed: {\n    getLoadedFeature () {\n      return store.state.loadedFeature\n    },\n    secondaryStructure () {\n      return store.state.secondaryStructure\n    },\n    sequence () {\n      return store.state.structure\n    },\n    loader () {\n      return store.state.Loader\n    },\n    ...mapGetters([\n      'getGene',\n      'getStructure',\n      'getOneAaCodes',\n      'getThreeAaCodes',\n      'getLoadedFeature',\n      'getSequences'\n    ])\n  },\n  watch: {\n    getLoadedFeature (newCount) {\n      var _this = this\n      if (newCount.set === null) {\n        _this.drawFeature = false\n        _this.selectStructmap(window.AQUARIA.currentMember)\n      } else {\n        if (!document.querySelector('#map > #coverageMap')) {\n          _this.updateUI()\n        } else {\n          _this.setStructFeatmap(window.AQUARIA.currentMember)\n          _this.drawFeature = true\n        }\n      }\n    },\n    secondaryStructure () {\n      // Update structure map when new structure selected\n      var _this = this\n      if (document.querySelector('#map > #coverageMap')) {\n        _this.selectStructmap(window.AQUARIA.currentMember)()\n      }\n    },\n    sequence (newVal, oldVal) {\n      // Render new coverage map if new chain selected\n      var _this = this\n      if (oldVal.accession !== newVal.accession && oldVal.accession !== null) {\n        document.querySelector('#map > #coverageMap').remove()\n        _this.init(newVal.accession)\n        var loadRequest = {\n          selector: [newVal.accession],\n          selectPDB: newVal.pdb, // optional fields\n          selectChain: newVal.chain // optional fields\n        }\n        var url = `${window.BACKEND}/get_3D_alignment`\n        axios({\n          method: 'get',\n          url: url,\n          params: loadRequest\n        }).then(function (response) {\n          const newData = response.data\n          store.commit('setSecondaryStructure', newData.secondary_structure)\n        })\n      }\n    },\n    loader: function (newVal) {\n      // Render coverage map after structure finishes loading\n      var _this = this\n      if (!newVal) {\n        const joleculeWatcher = new View.JoleculeWatcher(panel3d.embededJolecule)\n        joleculeWatcher.addEventListener('viewcommit', () => {\n          _this.updateUI()\n        })\n      }\n    }\n  },\n  mounted () {\n    // Fetch coverage map data\n    this.init(this.$route.params.uniprotAccession)\n  },\n  methods: {\n    updateUI () {\n      // Render coverage map\n      var _this = this\n      // Render coverage map for the first time\n      if (!document.querySelector('#map > #coverageMap')) {\n        _this.drawMap(_this.coverageMapData)\n        document.querySelector('#map').appendChild(_this.docFrag)\n        // If feature applied, draw feature map\n        if (_this.getLoadedFeature.set !== null) {\n          _this.setStructFeatmap(window.AQUARIA.currentMember)\n          _this.drawFeature = true\n        } else {\n          _this.selectStructmap(window.AQUARIA.currentMember)\n        }\n        _this.showLoader = false\n        store.commit('setCoverageMap', true)\n      }\n    },\n    init (accession) {\n      var _this = this\n      var url = `${window.BACKEND}/getCoverageMap`\n      var loadRequest = {\n        selector: [accession]\n      }\n      axios({\n        method: 'get',\n        url: url,\n        params: loadRequest\n      }).then(function (response) {\n        console.log(response.data)\n        _this.coverageMapData = response.data\n      })\n    },\n    drawMap (data) {\n      var _this = this\n      svgElem = _this.renderSVG()\n      svgElem.append('rect')\n        .attr('id', 'selection')\n      this.drawLine(svgElem)\n      this.setScales(data)\n      this.drawDarkRegions(data)\n      data.secondaryStructures.forEach(function (d) {\n        // convert strings to numbers\n        d.start = +d.start\n        d.end = +d.end\n        _this.drawResidues(d, data)\n      })\n    },\n    setScales (data) {\n      this.seqLength = data.seqLength\n      this.scale = d3.scale.linear().domain([1, this.seqLength]).range([1, window.innerWidth]) // Scale seq length by screen width\n      this.coverageMapsrw = (this.scale(data.seqLength)) / (data.seqLength) // Single residue width\n      var maxStruct = Math.max(...data.densityMap)\n      if (maxStruct <= transitionVar) { // Use absolute scale for density map when total number of struct < 200\n        this.densityScale = d3.scale.linear().domain([Math.log(1), Math.log(transitionVar)]).range(greyScale)\n      } else { // Use relative scale for density map when total number of struct > 200\n        this.densityScale = d3.scale.linear().domain([Math.log(1), Math.log(Math.max(...data.densityMap))]).range(greyScale)\n      }\n    },\n    drawLine (svg) {\n      svg\n        .append('line')\n        .style('stroke', '#434343')\n        .attr('x1', 1)\n        .attr('y1', 26)\n        .attr('x2', window.innerWidth)\n        .attr('y2', 26)\n    },\n    renderSVG () {\n      this.docFrag = document.createDocumentFragment()\n      var svg = d3\n        // .select('#map')\n        .select(this.docFrag)\n        .append('svg')\n        .attr('id', 'coverageMap')\n        .attr('height', h)\n        .attr('width', '100%')\n        .attr('viewBox', '0, 0, ' + window.innerWidth + ',' + h)\n        .attr('preserveAspectRatio', 'none')\n        // .attr('height', 40)\n\n      var rect = svg.append('g')\n      return rect\n    },\n    drawResidues (el, data) {\n      var svg = svgElem\n      // var thickness = 0\n      var ptext = ''\n      var ptitle = ''\n      var _this = this\n      if (el.Type === 'SHEET') {\n        var height = 18\n        // var color = '#f6c719'\n        var translate = 17\n        var className = 'sheet'\n      } else if (el.Type === 'COIL') {\n        height = 14\n        // color = '#6f9e52'\n        translate = 19\n        className = 'coil'\n      } else {\n        height = 19\n        // color = '#6491b6'\n        translate = 16\n        className = 'helix'\n      }\n      for (var n = el.start; n <= el.end; n++) {\n        var color = 'hsl(0, 0%,' + _this.densityScale(Math.log(data.densityMap[n - 1])) + '%)'\n        svg\n          .append('g')\n          .attr('id', 'residue_' + n + '_' + el.Type + '_' + data.densityMap[n - 1])\n          .append('rect')\n          .attr('transform', 'translate(' + (n * _this.coverageMapsrw - _this.coverageMapsrw) + ',' + translate + ')')\n          .attr('width', function () {\n            if (_this.coverageMapsrw < 0.5) {\n              return _this.coverageMapsrw + 0.25\n            } else {\n              return _this.coverageMapsrw\n            }\n          })\n          .attr('height', height)\n          .attr('fill', color)\n          .attr('class', className)\n          .attr('stroke-width', 1)\n          .on('mouseover', function (d) {\n            _this.residueColor = d3.select(this).style('fill') // Store original residue color\n            d3.select(this)\n              .attr('stroke', 'white')\n              .attr('stroke-width', 1)\n            var resNum = this.parentElement.id.split('_')[1]\n            store.commit('setRes', resNum)\n            var sequenceAa = _this.getSequences[0].sequence[resNum - 1]\n            var idx = _this.getOneAaCodes.indexOf(sequenceAa)\n            var longAa = _this.getThreeAaCodes[idx]\n            // @TODO Fetch amino acid codes in store\n            ptitle = '<span style=\"font-weight: 700;\">' + _this.getGene + '</span> sequence: ' + longAa + '–' + resNum\n            if (this.parentElement.id.includes('active')) {\n              // @TODO Create separate method to fetch structure amino acid code\n              var jAlignment = panel3d.joleculeAlignment\n              var jController = panel3d.embededJolecule.controller\n              var pdbResNum = jAlignment.mapSeqResToPdbResOfChain(0, resNum, _this.getStructure.chain)\n              var iRes = jController.soup.findResidueIndices(0, pdbResNum[1], pdbResNum[2])\n              var structAa = jController.soup.getResidueProxy().load(iRes).resType\n              structAa = structAa.substr(0, 1) + structAa.substr(1).toLowerCase()\n              ptext = _this.getStructure.pdb + '-' + _this.getStructure.chain + ' structure: ' + structAa + '-' + pdbResNum[2] + '</br> Structures with residue ' + this.parentElement.id.split('_')[1] + ': '\n            } else {\n              ptext = 'Structures with residue ' + this.parentElement.id.split('_')[1] + ': '\n            }\n            store.commit('setPopupTitle', ptitle)\n            store.commit('setPopupText', ptext)\n            store.commit('setTotalPDBres', this.parentElement.id.split('_')[3])\n            store.commit('setPopupCoordinates', this.getBoundingClientRect())\n          })\n          .on('mouseout', function () {\n            // store.commit('setPopupCoordinates', 0)\n            d3.select(this)\n              .attr('stroke', _this.residueColor)\n              .attr('stroke-width', 0)\n          })\n      }\n    },\n    // This function resets the coverage map residue properties\n    // And highlights the selected region in the coverage map\n    selectStructmap (selectedClus) {\n      var _this = this\n      d3.selectAll('[id^=\"residue_\"')[0].map(function (d, i) { // Reset coverage map residue properties\n        var density = d.id.split('_')[3]\n        if (d.id.includes('active')) {\n          d.id = d.id.split('_active')[0]\n        }\n        d3.select(d)\n          .select('rect')\n          .attr('fill', 'hsl(0, 0%,' + _this.densityScale(Math.log(density)) + '%)')\n      })\n      var secondaryStruct = store.getters.getSecondaryStructure[0]\n      var seqStart = selectedClus.seq_start[0]\n      var seqEnd = selectedClus.seq_end[selectedClus.seq_start.length - 1]\n      var width = (seqEnd - seqStart) * _this.coverageMapsrw + _this.coverageMapsrw\n\n      if (document.querySelector('#map > #coverageMap > rect')) {\n        document.querySelector('#map > #coverageMap > rect').remove()\n      }\n      d3.select('#map > #coverageMap > g > #selection')\n        .attr('width', width)\n        .attr('height', 30)\n        .attr('transform', 'translate(' + (seqStart * _this.coverageMapsrw - _this.coverageMapsrw) + ',' + 11 + ')')\n        .attr('fill', 'white')\n        .attr('stroke', '#434343')\n        .attr('stroke-width', 1)\n        .attr('rx', 6)\n        .attr('ry', 6)\n\n      secondaryStruct.map(function (index) {\n        if (index.end) {\n          var start = index.start\n          var end = index.end\n          var type = index.type\n        } else {\n          start = index.split('\\n')[0].split(':')[1].split('-')[0]\n          end = index.split('\\n')[0].split(':')[1].split('-')[1]\n          type = index.split('\\n')[0].split(':')[0]\n        }\n        for (var j = start; j <= end; j++) {\n          var elemId = '[id^=\"residue_' + j + '_\"]'\n          // var type = document.querySelector(elemId).id.split('_')[2]\n          d3.select(elemId + '> rect').attr({\n            fill: _this.getStructureColor(type)\n          })\n          // Indicate which residues are active\n          if (!document.querySelector(elemId)) { // TO DO: Fix secondary structure calculation on server-side\n            var el = {}\n            el.Type = 'COIL'\n            el.start = j\n            el.end = j\n            _this.drawResidues(el, _this.coverageMapData)\n            document.querySelector(elemId).id = document.querySelector(elemId).id + '_active'\n          } else {\n            document.querySelector(elemId).id = document.querySelector(elemId).id + '_active'\n          }\n        }\n      })\n    },\n    setStructFeatmap (selectedClus) {\n      var _this = this\n      // Select correct region in the coverage map\n      d3.selectAll('[id^=\"residue_\"')[0].map(function (d, i) {\n        var density = d.id.split('_')[3]\n        d3.select(d)\n          .select('rect')\n          .attr('fill', 'hsl(0, 0%,' + _this.densityScale(Math.log(density)) + '%)')\n      })\n      var secondaryStruct = store.getters.getSecondaryStructure[0]\n      var seqStart = selectedClus.seq_start[0]\n      var seqEnd = selectedClus.seq_end[selectedClus.seq_start.length - 1]\n      var width = (seqEnd - seqStart) * _this.coverageMapsrw + _this.coverageMapsrw\n\n      if (document.querySelector('#map > #coverageMap > rect')) {\n        document.querySelector('#map > #coverageMap > rect').remove()\n      }\n      d3.select('#map > #coverageMap > g > #selection')\n        .attr('width', width)\n        .attr('height', 30)\n        .attr('transform', 'translate(' + (seqStart * _this.coverageMapsrw - _this.coverageMapsrw) + ',' + 11 + ')')\n        .attr('fill', 'white')\n        .attr('stroke', '#434343')\n        .attr('stroke-width', 1)\n        .attr('rx', 6)\n        .attr('ry', 6)\n\n      secondaryStruct.map(function (index) {\n        if (index.end) {\n          var start = index.start\n          var end = index.end\n        } else {\n          start = index.split('\\n')[0].split(':')[1].split('-')[0]\n          end = index.split('\\n')[0].split(':')[1].split('-')[1]\n        }\n        for (var j = start; j <= end; j++) {\n          var elemId = '[id^=\"residue_' + j + '_\"]'\n          // var type = document.querySelector(elemId).id.split('_')[2]\n          d3.select(elemId + '> rect').attr({\n            fill: '#cccccc'\n          })\n        }\n      })\n    },\n    getStructureColor (type) {\n      if (type === 'SHEET') {\n        return '#f6c719'\n      } else if (type === 'COIL') {\n        return '#6f9e52'\n      } else {\n        return '#6491b6'\n      }\n    },\n    drawDarkRegions (data) {\n      var arr = []\n      var _this = this\n      var svg = svgElem\n      data.densityMap.forEach(function (item, index) {\n        if (item === 0) {\n          var n = index + 1\n          svg\n            .append('g')\n            .attr('id', 'residue_' + n + '_Dark_0')\n            .append('rect')\n            .attr('transform', 'translate(' + (n * _this.coverageMapsrw - _this.coverageMapsrw) + ',' + 14 + ')')\n            .attr('width', function () {\n              if (_this.coverageMapsrw < 0.5) {\n                return _this.coverageMapsrw + 0.25\n              } else {\n                return _this.coverageMapsrw\n              }\n            })\n            .attr('height', 30)\n            .attr('fill', '#434343')\n            .attr('opacity', 0)\n            .attr('stroke-width', 1)\n            .on('mouseover', function (d) {\n              _this.residueColor = d3.select(this).style('fill') // Store original residue color\n              d3.select(this)\n                .attr('stroke', 'white')\n                .attr('stroke-width', 1)\n              store.commit('setPopupTitle', 'Residue ' + this.parentElement.id.split('_')[1] + ' : Dark region')\n              store.commit('setDensityScore', data.densityMap)\n              store.commit('setPopupText', 'Structures with residue ' + this.parentElement.id.split('_')[1] + ': ')\n              store.commit('setTotalPDBres', this.parentElement.id.split('_')[3])\n              store.commit('setPopupCoordinates', this.getBoundingClientRect())\n            })\n            .on('mouseout', function () {\n              store.commit('setPopupCoordinates', 0)\n              d3.select(this)\n                .attr('stroke', _this.residueColor)\n                .attr('stroke-width', 0)\n            })\n        }\n      })\n      return arr\n    }\n  }\n}\n</script>\n\n<style scoped>\n#map {\n  top: var(--spacer-bottom);\n  height: 3rem;\n}\n/* @media screen and (min-width: 550px) {\n  #map { top: 3rem; }\n}\n@media screen and (min-width: 950px) {\n  #map { top: 3.5rem; }\n} */\n/* @media screen and (min-width: 1850px) {\n  #map { top: 4rem; }\n} */\n#selectedCluster{\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  left: 0.2%;\n  height: 2.5rem;\n}\n#selectedFeature{\n  position: absolute;\n  bottom: 0px;\n  width: 100%;\n  left: 0.2%;\n}\n</style>\n","<template>\n    <div id=\"UserHelp\" class=\"HelpPanel hide dialouge-window overlay level7\">\n        <a href=\"#\" class=\"close\" @click=\"closeHelp\"></a>\n          <div id='fullwindow-video' class='fill'>\n            <youtube v-for=\"video in videos\" :key=\"video.id\" :id='video.id' :video-id=\"video.id\" class='hide' ref=\"youtube\" @paused=\"paused($event)\" @ended=\"finished($event)\"></youtube>\n          </div>\n          <div id='contents'>\n            <p class=\"thetitle\">{{data.title}}</p>\n            <p class=\"intro\">Watch tutorial videos to get started.</p>\n            <p class=\"intro\">Skip watching tutorial videos and start using Aquaria.</p>\n            <Playlist v-if=\"!data.newUser\" v-bind:playlist='videos'/>\n            <div v-if=\"data.newUser\">\n              <youtube id='intro-video' video-id=\"FAQ3yVGYSzY\" ref=\"youtube\" @playing=\"playing($event)\" @paused=\"paused($event)\" @ended=\"finished($event)\"></youtube>\n            </div>\n            <a href=\"#\" id='skip' @click=\"closeHelp\">Skip > </a>\n          </div>\n    </div>\n</template>\n\n<script>\nimport store from '@/store/index'\nimport Playlist from './Playlist'\nimport * as Panels from '../AquariaLayout/helpers/hidePanels'\nvar targetId\nvar index\nexport default {\n  name: 'UserHelp',\n  components: {\n    Playlist\n  },\n  data () {\n    return {\n      videos: [\n        { id: 'FAQ3yVGYSzY', title: 'Introduction to Aquaria' },\n        { id: 'UZNEmPOaVrA', title: 'How to Calculate Distances' }\n      ]\n    }\n  },\n  computed: {\n    data () {\n      return {\n        title: store.state.helpTitle,\n        newUser: store.state.newUser\n      }\n    }\n  },\n  methods: {\n    closeHelp: function () {\n      var _this = this\n      if (document.querySelector('iframe.show')) {\n        var activeVideoID = document.querySelector('iframe.show').id\n        document.getElementById('contents').classList.remove('hide')\n        document.getElementById(activeVideoID).classList.remove('show')\n        document.getElementById('UserHelp').className += ' dialouge-window'\n        document.getElementById('UserHelp').className += ' overlay'\n        document.getElementById('UserHelp').className += ' level7'\n        document.getElementById('UserHelp').classList.remove('fullwindow')\n        var event = {}\n        event.h = {}\n        event.h.id = activeVideoID\n        _this.paused(event)\n      } else {\n        // window.AQUARIA.RemoveOverlay()\n        document.getElementById('UserHelp').classList.remove('show')\n        document.getElementById('UserHelp').className += (' hide')\n        // document.querySelector('#UserHelp').style.display = 'none'\n        Panels.RemoveOverlay()\n        if (document.querySelector('#helpbtn').classList.contains('active')) {\n          _this.toggleActive(document.querySelector('#helpbtn'))\n        }\n      }\n    },\n    toggleActive: function (ev) {\n      if (ev.className === 'lnk active') {\n        ev.className = 'lnk'\n      } else {\n        ev.className = 'lnk active'\n      }\n    },\n    getIndex: function (targetId) {\n      for (var i = 0; i < this.$refs.youtube.length; i++) {\n        if (this.$refs.youtube[i].$attrs.id === targetId) {\n          return i\n        }\n      }\n    },\n    playing: function (event) {\n      targetId = event.h.id\n      if (this.$refs.youtube.length) {\n        index = this.getIndex(targetId)\n        this.$refs.youtube[index].player.playVideo()\n      } else {\n        this.$refs.youtube.player.playVideo()\n        var iframe = document.querySelector('#intro-video')\n        var requestFullScreen = iframe.requestFullScreen || iframe.mozRequestFullScreen || iframe.webkitRequestFullScreen\n        if (requestFullScreen) {\n          requestFullScreen.bind(iframe)()\n        }\n      }\n    },\n    paused: function (event) {\n      targetId = event.h.id\n      if (document.querySelector('iframe.active')) {\n        this.closeHelp()\n      } else {\n        if (this.$refs.youtube.length) {\n          index = this.getIndex(targetId)\n          this.$refs.youtube[index].player.pauseVideo()\n        } else {\n          this.$refs.youtube.player.pauseVideo()\n        }\n        if (document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement) {\n          document.exitFullscreen()\n        }\n      }\n    },\n    finished: function (event) {\n      targetId = event.h.id\n      if (this.$refs.youtube.length) {\n        index = this.getIndex(targetId)\n        this.$refs.youtube[index].player.stopVideo()\n      } else {\n        this.$refs.youtube.player.stopVideo()\n      }\n      if (document.querySelector('iframe.active')) {\n        document.querySelector('#UserHelp a.close').click()\n      }\n      document.exitFullscreen()\n      this.closeHelp()\n    }\n  }\n}\n</script>\n\n<style>\n.intro {\n  padding: 0px 4px;\n}\n.dialouge-window {\n  left: 50%;\n  max-height: 86vh;\n}\n#fullwindow-video iframe, .fill {\n  width: 100%;\n  height: 100%;\n}\n.fullwindow {\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  max-height: 100vh;\n}\n.deactive{\n  display: none;\n}\n.active {\n  display: block;\n}\n.showIframe {\n  display: flex;\n  left: 0;\n  width: 100%;\n  max-height: 98vh;\n  position: absolute;\n  height: 100vh;\n}\niframe#intro-video {\n  height: 29vh;\n  margin-bottom: 0.5rem;\n}\n#skip {\n  float: right;\n  padding: 2px;\n}\n#UserHelp{\n    overflow: scroll;\n    /* display: none; */\n    position: absolute;\n    z-index: 9;\n    top: 1vh;\n    background: var(--primary-tab);\n    padding: 0.5rem 0.5rem 0.75rem 0.5rem;\n    border-radius: 1rem;\n    flex-direction: column;\n}\n\n#AboutError:target.HelpPanel {\n      display: flex;\n      font-size: 90%;\n      max-width: 40rem;\n}\np.thetitle {\n    display: flex;\n    background-color: var(--primary-label);\n    flex-basis: auto;\n    color: var(--text);\n    text-align: center;\n    line-height: 1.25;\n    padding: 0.5rem 1rem;\n    border-radius: 1.5rem;\n    margin: auto;\n}\n.HelpPanel.overlay {\n    border-radius: 1rem;\n    /* box-shadow: 0 0 0 9999px rgba(0,0,0,0.6); /* dark background overlay */\n    /* -webkit-box-shadow: 0 0 0 999px rgba(0,0,0,0.6); */\n    padding: 0.5rem 0.75rem;\n    position: absolute;\n    top: 1vh;\n    left: 50%;\n    transform: translate(-50%, 0%);\n    width: 90vw;\n    max-width: calc(23rem + 3vw);\n  }\n  /* .HelpPanel .close::after {\n    width: calc(1.25rem + 0.5vw);\n    height: calc(1.25rem + 0.5vw);\n  } */\n\n  .HelpPanel .close {\n    position: relative;\n    display: block;\n  }\n  .HelpPanel .close::after {\n    right: 0.25rem;\n    top: 0.25rem;\n    width: calc(1.25rem + 0.5vw);\n    height: calc(1.25rem + 0.5vw);\n    position: absolute;\n    display: flex;\n    z-index: 11;\n    align-items: center;\n    justify-content: center;\n    background-color: rgba(0,0,0,.5);\n    border-radius: 50%;\n    color: white;\n    content: \"×\";\n    cursor: pointer;\n    font-size: calc(1rem + 0.5vw)\n  }\n  .HelpPanel .close:hover::after {\n      background-color: var(--primary-highlight);\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tabs.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tabs.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tabs.vue?vue&type=template&id=2be7ee96&scoped=true&\"\nimport script from \"./Tabs.vue?vue&type=script&lang=js&\"\nexport * from \"./Tabs.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Tabs.vue?vue&type=style&index=0&id=2be7ee96&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2be7ee96\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"rel\",attrs:{\"id\":\"map\"}},[_c('FeatureMap',{attrs:{\"drawFeature\":_vm.drawFeature}}),(_vm.showLoader)?_c('mapLoader'):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"featureMap\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div id='featureMap'></div>\n</template>\n\n<script>\nimport store from '../../store/index'\nimport * as d3 from 'd3'\nimport { mapGetters } from 'vuex'\n\nexport default {\n  name: 'FeatureMap',\n  props: ['drawFeature'],\n  data () {\n    return {\n      seqLength: 0,\n      scale: null,\n      coverageMapsrw: 0,\n      residueColor: null\n    }\n  },\n  computed: {\n    getLoadedFeature () {\n      return store.state.loadedFeature\n    },\n    ...mapGetters([\n      'getVariantResidues',\n      'getLoadedFeature',\n      'getVariantIdx',\n      'getVariant',\n      'getMatches'\n    ])\n  },\n  watch: { // Watch if new feature is loaded\n    getLoadedFeature () {\n      var _this = this\n      if (_this.getLoadedFeature.set === null) {\n        // history.pushState(null, '', window.location.href.split('?')[0] + window.location.hash)\n        document.querySelectorAll('[id^=\"feature_residue_').forEach(function (el) { el.remove() })\n      } else {\n        if (document.querySelector('[id^=\"feature_residue_')) { // check if a feature is already selected. If so, remove and redraw\n          document.querySelectorAll('[id^=\"feature_residue_').forEach(function (el) { el.remove() })\n          _this.drawMap(_this.getLoadedFeature)\n        } else {\n          _this.drawMap(_this.getLoadedFeature)\n        }\n      }\n    }\n  },\n  methods: {\n    drawMap (data) {\n      var _this = this\n      var svg = null\n      this.setScales()\n      data.set.Tracks[0].forEach(function (d, i) {\n        // convert strings to numbers\n        d.start = +d.start\n        d.end = +d.end\n        _this.drawResidues(d, svg)\n      })\n      if (!this.$store.getters.getIsDefaultFeature && this.getVariantResidues) { // if feature is a variant, open popup\n        _this.loadPopup(data)\n        console.log('The data here is ' + _this.getVariantIdx + ' ' + _this.getVariant)\n        console.log(data)\n      }\n    },\n    loadPopup (data) {\n      var _this = this\n\n      var allKeys = Object.keys(_this.getVariantResidues).sort(function (a, b) {\n        return _this.getVariantResidues[a].order - _this.getVariantResidues[b].order\n      })\n      var res = allKeys[0]\n      var id = '[id^=\"feature_residue_' + res + '\"]'\n      var elem = document.querySelector(id)\n      data.set.Tracks[0].forEach(function (el) {\n        if (_this.getVariantResidues[el.start]) {\n          var popupText = _this.getVariantResidues[el.start]\n          store.commit('setPopupTitle', el.label)\n          store.commit('setPopupText', popupText)\n          store.commit('setVariantIdx', 0)\n          store.commit('setIsDefaultFeature', false)\n          store.commit('setVariant', el.start)\n          if (elem != null) {\n            store.commit('setPopupCoordinates', elem.getBoundingClientRect())\n          }\n        }\n      })\n    },\n    setScales () {\n      this.seqLength = this.getMatches.sequences[0].length\n      this.scale = d3.scale.linear().domain([1, this.seqLength]).range([1, window.innerWidth])\n      this.coverageMapsrw = (this.scale(this.seqLength)) / (this.seqLength)\n    },\n    drawResidues (el) {\n      var _this = this\n      var popupText = ''\n      var translate = ''\n      var fResidueHeight = ''\n      for (var n = el.start; n <= el.end; n++) {\n        var elem = '[id^=\"residue_' + n + '\"]'\n        var tmp1 = document.querySelector(elem)\n        var tmp2 = document.querySelector(elem + '> rect')\n        if (tmp1.id.includes('Dark')) {\n          translate = 15\n          fResidueHeight = 20\n        } else {\n          translate = 25\n          fResidueHeight = document.querySelector(elem + '> rect').getBoundingClientRect().height\n        }\n        if (tmp1 === 'undefined' || tmp2 === 'undefined' || tmp1 == null || tmp2 == null) {\n          continue\n        } else {\n          var covMap = d3.select('#map > #coverageMap > g')\n          covMap\n            .append('g')\n            .attr('id', 'feature_residue_' + n + '_' + document.querySelector(elem).id.split('_')[3])\n            .append('rect')\n            .attr('width', _this.coverageMapsrw)\n            .attr('height', fResidueHeight)\n            .attr('transform', function () {\n              var elemHeight = document.querySelector(elem + '> rect').getBoundingClientRect().height\n              if (elemHeight === 18) {\n                return 'translate(' + (n * _this.coverageMapsrw - _this.coverageMapsrw) + ',' + 17 + ')'\n              } else if (elemHeight === 14) {\n                return 'translate(' + (n * _this.coverageMapsrw - _this.coverageMapsrw) + ',' + 19 + ')'\n              } else if (elemHeight === 19) {\n                return 'translate(' + (n * _this.coverageMapsrw - _this.coverageMapsrw) + ',' + 16 + ')'\n              } else {\n                return 'translate(' + (n * _this.coverageMapsrw - _this.coverageMapsrw) + ',' + translate + ')'\n              }\n            })\n            .attr('fill', el.color)\n            .on('mouseover', function (d) {\n              _this.residueColor = d3.select(this).style('fill') // Store original residue color\n              d3.select(this)\n                .attr('stroke', 'white')\n                .attr('stroke-width', 1)\n              if (tmp1.id.includes('Dark')) {\n                store.commit('setPopupTitle', el.label + ': Dark region')\n              } else {\n                store.commit('setPopupTitle', el.label)\n              }\n              if (el.desc !== el.label) {\n                if (_this.getVariantResidues[el.start]) {\n                  popupText = _this.getVariantResidues[el.start]\n                  //   popupText += 'Structures with residue ' + this.parentElement.id.split('_')[1] + ': '\n                  store.commit('setPopupText', popupText)\n                  store.commit('setVariantIdx', 0)\n                  store.commit('setVariant', el.start)\n                } else if (el.desc.length > 0) {\n                  popupText = el.desc + ' </br> '\n                  popupText += 'Structures with residue ' + this.parentElement.id.split('_')[1] + ': '\n                  store.commit('setPopupText', popupText)\n                  store.commit('setVariant', -1)\n                  store.commit('setIsDefaultFeature', false)\n                } else {\n                  store.commit('setPopupText', 'Structures with residue ' + this.parentElement.id.split('_')[2] + ': ')\n                }\n              } else {\n                store.commit('setPopupText', 'Structures with residue ' + this.parentElement.id.split('_')[2] + ': ')\n                store.commit('setVariant', -1)\n              }\n              store.commit('setIsDefaultFeature', false)\n              store.commit('setTotalPDBres', this.parentElement.id.split('_')[3])\n              store.commit('setPopupCoordinates', this.getBoundingClientRect())\n            })\n            .on('mouseout', function () {\n              d3.select(this)\n                .attr('stroke', _this.residueColor)\n                .attr('stroke-width', 0)\n            })\n        }\n      }\n    }\n  }\n}\n</script>\n\n<style>\n#featureMap {\n    position: relative;\n    bottom: 47px ;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FeatureMap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FeatureMap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FeatureMap.vue?vue&type=template&id=37f474ba&\"\nimport script from \"./FeatureMap.vue?vue&type=script&lang=js&\"\nexport * from \"./FeatureMap.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FeatureMap.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"animated\"},[_c('div',{staticClass:\"innerGradient\"})])}]\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"animated\">\n        <div class=\"innerGradient\"></div>\n    </div>\n</template>\n\n<script>\nexport default {\n  name: 'mapLoader'\n}\n</script>\n\n<style scoped>\n    .animated {\n        width: 100vw;\n        height: 2rem;\n        overflow: hidden;\n        bottom: 6px;\n        position: fixed;\n    }\n    .innerGradient {\n        z-index: -1;\n        width: 300%;\n        height: 300%;\n        position: absolute;\n        animation: 2s infinite alternate ease-out breathing-color--dark;\n        -webkit-animation: 2s infinite alternate ease-out breathing-color--dark;\n    }\n    @keyframes breathing-color--dark {\n        from\n        {\n            background-color: #afafafab;\n        }\n        to\n        {\n            background-color: var(--structurecoverage);\n        }\n    }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mapLoader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mapLoader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./mapLoader.vue?vue&type=template&id=6934c327&scoped=true&\"\nimport script from \"./mapLoader.vue?vue&type=script&lang=js&\"\nexport * from \"./mapLoader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./mapLoader.vue?vue&type=style&index=0&id=6934c327&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6934c327\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CoverageMap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CoverageMap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CoverageMap.vue?vue&type=template&id=1387a59d&scoped=true&\"\nimport script from \"./CoverageMap.vue?vue&type=script&lang=js&\"\nexport * from \"./CoverageMap.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CoverageMap.vue?vue&type=style&index=0&id=1387a59d&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1387a59d\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.data.error)?_c('div',{staticClass:\"ErrorPanel overlay level3\",attrs:{\"id\":\"AboutError\"}},[_c('a',{staticClass:\"close\",attrs:{\"href\":\"#\"},on:{\"click\":_vm.loadLastSuccess}}),_c('div',[_c('p',{staticClass:\"thetitle\"},[_vm._v(_vm._s(_vm.data.error))]),_c('p',{staticClass:\"intro1\"},[_vm._v(_vm._s(_vm.data.errorMsg)+\" \"),(_vm.data.errorMsg)?_c('br'):_vm._e(),_vm._v(\" \"),(_vm.data.errorMsg)?_c('br'):_vm._e(),_vm._v(\" Press 'Report Issue' to tell the Aquaria team, or press 'OK' to return to previous structure.\")]),_c('div',[_c('md-button',{staticClass:\"md-raised md-primary\",attrs:{\"href\":_vm.lastURL}},[_vm._v(\"OK\")]),_c('md-button',{staticClass:\"md-raised md-primary\",attrs:{\"href\":_vm.issuesURL,\"target\":\"_blank\"}},[_vm._v(\"Report Issue\")])],1)])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"AboutError\" v-if=\"data.error\" class='ErrorPanel overlay level3'>\n    <a href=\"#\" class=\"close\" @click=\"loadLastSuccess\"></a>\n    <div>\n      <p class=\"thetitle\">{{data.error}}</p>\n      <p class=\"intro1\">{{data.errorMsg}} <br v-if=\"data.errorMsg\"> <br v-if=\"data.errorMsg\"> Press 'Report Issue' to tell the Aquaria team, or press 'OK' to return to previous structure.</p>\n      <div>\n        <md-button class=\"md-raised md-primary\" :href='lastURL'>OK</md-button>\n        <md-button class=\"md-raised md-primary\" :href='issuesURL' target='_blank'>Report Issue</md-button>\n      </div>\n      <!-- <p>We encourage you to <a v-bind:href=\"issues\" target=\"_blank\" title=\"Go to Github\">report issues</a>, <a :href=\"changes\" target=\"_blank\" title=\"Go to Github\">propose code changes</a>, or <a href=\"mailto:contact@aquaria.app\" title=\"Email us\">contact us</a> regarding suggestions.</p> -->\n      <!-- <p><i>Last updated May, 2020. PDB entries released since then are not yet available in Aquaria.</i><p> -->\n    </div>\n  </div>\n</template>\n<script>\nimport store from '@/store/index'\nexport default {\n  name: 'Errors',\n  data () {\n    return {\n      issues: '',\n      title: '',\n      changes: 'https://github.com/aqclient/dev.aqclient.github.io/issues/new?labels=enhancement',\n      logo: require('../../assets/img/logo-large.png')\n    }\n  },\n  computed: {\n    data () {\n      return {\n        message: store.state.message,\n        error: store.state.error,\n        errorMsg: store.state.errorMsg\n      }\n    },\n    issuesURL () {\n      return 'https://github.com/aqclient/dev.aqclient.github.io/issues/new?title=Problem with this page&labels=bug&body=<a href=\"' + encodeURIComponent(window.location.href) + '\">' + this.data.error + '</a>'\n    },\n    pageUrl () {\n      return window.location.href\n    },\n    lastURL () {\n      return window.location.origin\n      // + (localStorage.getItem('LastSuccess') ? localStorage.getItem('LastSuccess') : '/P04637')\n    }\n  },\n  methods: {\n    loadLastSuccess: function () {\n      window.location.pathname = localStorage.getItem('LastSuccess') ? localStorage.getItem('LastSuccess') : '/P04637'\n    }\n  }\n}\n</script>\n<style scoped>\n.md-button.md-theme-default.md-raised:not([disabled]).md-primary{\n  background: #707070;\n  float: right;\n}\n.intro1{\n  padding-left: 10px;\n}\n#AboutError{\n    display: flex;\n    position: absolute;\n    z-index: 9999999999999;\n    top: 1vh;\n    left: 50%;\n    background: var(--primary-tab);\n    padding: 0.5rem 0.75rem;\n    border-radius: 1rem;\n    flex-direction: column;\n}\np.thetitle {\n  display: flex;\n    background-color: var(--primary-label);\n    flex-basis: auto;\n    color: var(--text);\n    text-align: center;\n    line-height: 1.25;\n    padding: 0.5rem 2rem;\n    border-radius: 1.5rem;\n    margin: auto;\n}\n  #AboutError:target.ErrorPanel {\n      display: flex;\n      font-size: 90%;\n      max-width: 40rem;\n  }\n  p#starter {\n      text-align: center;\n  }\n  #AboutError p.thetitle {\n      text-transform: uppercase;\n      letter-spacing: 0.25em;\n  }\n #AboutError a {\n   /* color: var(--primary-link); */\n   text-decoration: none;\n }\n  .affiliations {\n    font-size: 70%;\n  }\n  /* #AboutError span {\n    display: inline-block;\n    white-space: nowrap;\n    margin-right: 0.25em;\n  }\n  .affiliations span {\n      margin-right: 1.2em;\n  } */\n  /* .ErrorPanel .close::after {\n    width: 1.5rem;\n    height: 1.5rem;\n  } */\n\n  .ErrorPanel .close {\n    position: relative;\n    display: block;\n  }\n  .ErrorPanel .close::after {\n    right: 0.25rem;\n    top: 0.25rem;\n    width: calc(1.25rem + 0.5vw);\n    height: calc(1.25rem + 0.5vw);\n    position: absolute;\n    display: flex;\n    z-index: 11;\n    align-items: center;\n    justify-content: center;\n    background-color: rgba(0,0,0,.5);\n    border-radius: 50%;\n    color: white;\n    content: \"×\";\n    cursor: pointer;\n    font-size: calc(1.25rem + 0.5vw);\n  }\n  .ErrorPanel .close:hover::after {\n      background-color: var(--primary-highlight);\n  }\n .ErrorPanel.overlay {\n    border-radius: 1rem;\n    /* box-shadow: 0 0 0 9999px rgba(0,0,0,0.6); /* dark background overlay */\n    /* -webkit-box-shadow: 0 0 0 999px rgba(0,0,0,0.6); */\n    padding: 0.5rem 0.75rem;\n    position: absolute;\n    top: 1vh;\n    left: 50%;\n    transform: translate(-50%, 0%);\n    width: 90vw;\n    max-width: 30rem;\n  }\n </style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Errors.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Errors.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Errors.vue?vue&type=template&id=72919d45&scoped=true&\"\nimport script from \"./Errors.vue?vue&type=script&lang=js&\"\nexport * from \"./Errors.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Errors.vue?vue&type=style&index=0&id=72919d45&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"72919d45\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"HelpPanel hide dialouge-window overlay level7\",attrs:{\"id\":\"UserHelp\"}},[_c('a',{staticClass:\"close\",attrs:{\"href\":\"#\"},on:{\"click\":_vm.closeHelp}}),_c('div',{staticClass:\"fill\",attrs:{\"id\":\"fullwindow-video\"}},_vm._l((_vm.videos),function(video){return _c('youtube',{key:video.id,ref:\"youtube\",refInFor:true,staticClass:\"hide\",attrs:{\"id\":video.id,\"video-id\":video.id},on:{\"paused\":function($event){return _vm.paused($event)},\"ended\":function($event){return _vm.finished($event)}}})}),1),_c('div',{attrs:{\"id\":\"contents\"}},[_c('p',{staticClass:\"thetitle\"},[_vm._v(_vm._s(_vm.data.title))]),_c('p',{staticClass:\"intro\"},[_vm._v(\"Watch tutorial videos to get started.\")]),_c('p',{staticClass:\"intro\"},[_vm._v(\"Skip watching tutorial videos and start using Aquaria.\")]),(!_vm.data.newUser)?_c('Playlist',{attrs:{\"playlist\":_vm.videos}}):_vm._e(),(_vm.data.newUser)?_c('div',[_c('youtube',{ref:\"youtube\",attrs:{\"id\":\"intro-video\",\"video-id\":\"FAQ3yVGYSzY\"},on:{\"playing\":function($event){return _vm.playing($event)},\"paused\":function($event){return _vm.paused($event)},\"ended\":function($event){return _vm.finished($event)}}})],1):_vm._e(),_c('a',{attrs:{\"href\":\"#\",\"id\":\"skip\"},on:{\"click\":_vm.closeHelp}},[_vm._v(\"Skip > \")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"playlists\"}},_vm._l((_vm.playlist),function(video){return _c('span',{key:video.id,attrs:{\"id\":video.id},on:{\"click\":function($event){return _vm.play(video.id)}}},[_c('div',{staticClass:\"thumbnail-container\"},[_c('img',{attrs:{\"src\":'https://img.youtube.com/vi/' + video.id + '/0.jpg'}}),_c('button',{staticClass:\"btn\"},[_vm._v(\"▶\")])]),_c('p',[_vm._v(_vm._s(video.title))])])}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div id='playlists'>\n        <span v-for=\"video in playlist\" :key=\"video.id\" :id='video.id' @click=\"play(video.id)\">\n            <div class='thumbnail-container'>\n                <img :src=\"'https://img.youtube.com/vi/' + video.id + '/0.jpg'\">\n                <button class=\"btn\">&#9654;</button>\n            </div>\n            <p>{{video.title}}</p>\n        </span>\n    </div>\n</template>\n\n<script>\nexport default {\n  name: 'Playlist',\n  props: ['playlist'],\n  methods: {\n    play: function (id) {\n      document.querySelector('#contents').className = ' hide'\n      document.getElementById(id).className += ' show'\n      document.getElementById('UserHelp').classList.remove('overlay')\n      document.getElementById('UserHelp').classList.remove('level7')\n      document.getElementById('UserHelp').classList.remove('dialouge-window')\n      document.getElementById('UserHelp').className += ' fullwindow'\n      for (var i = 0; i < this.$parent.$children.length; i++) {\n        if (this.$parent.$children[i].$attrs.id === id) {\n          var index = i\n        }\n      }\n      this.$parent.$children[index].player.playVideo()\n    }\n  }\n}\n</script>\n\n<style>\n.thumbnail-container{\n    position: relative;\n    width: 50%;\n}\n.thumbnail-container img {\n    width: 100%;\n    height: 100%;\n    padding: 3px 7px 3px 3px;\n}\n.thumbnail-container .btn {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    -ms-transform: translate(-50%, -50%);\n    background-color: #555;\n    color: white;\n    font-size: 16px;\n    padding: 12px 24px;\n    border: none;\n    border-radius: 5px;\n\n}\nspan:hover .thumbnail-container  .btn{\n  background-color: red;\n}\n#playlists p{\n    font-size: 90%;\n    float: right;\n    width: 50%;\n}\n#playlists iframe {\n    display: none\n}\n#playlists span {\n    display: flex;\n    height: 114px;\n    cursor: pointer;\n}\n#playlists span:hover {\n    background: #e1e0e0;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Playlist.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Playlist.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Playlist.vue?vue&type=template&id=0cbc0558&\"\nimport script from \"./Playlist.vue?vue&type=script&lang=js&\"\nexport * from \"./Playlist.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Playlist.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserHelp.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserHelp.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserHelp.vue?vue&type=template&id=55803b08&\"\nimport script from \"./UserHelp.vue?vue&type=script&lang=js&\"\nexport * from \"./UserHelp.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserHelp.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.loader)?_c('div',{attrs:{\"id\":\"waitingFrame\"}},[_c('div',{attrs:{\"id\":\"waitinghtml\"}},[_c('img',{attrs:{\"src\":_vm.overlay}}),_c('p',{attrs:{\"id\":\"appletMessage\"}},[_vm._v(\" \"+_vm._s(_vm.loaderMsg)+\" \")])])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div id='waitingFrame' v-if=\"loader\">\n        <div id='waitinghtml'>\n          <img :src='overlay' />\n          <p id=\"appletMessage\">\n          {{loaderMsg}}\n          </p>\n        </div>\n    </div>\n</template>\n\n<script>\nimport store from '../../store/index'\nexport default {\n  name: 'Loader',\n  data () {\n    return {\n      overlay: require('../../assets/img/aquaria-loader3.svg')\n    }\n  },\n  computed: {\n    loader () {\n      return store.state.Loader\n    },\n    loaderMsg () {\n      return store.state.LoaderMsg\n    }\n  }\n}\n</script>\n\n<style type=text/css scoped>\n#waitinghtml {\nbackground-color: rgba(0,0,0,0.7);\npointer-events: none;\nheight: 100vh;\nwidth: 100vw;\ndisplay: flex;\nflex-flow: column wrap;\ntext-align: center;\n}\np#appletMessage {\ncolor: white;\ntext-align: center;\nmargin: 2rem auto;\nheight: 5rem;\n}\n#waitingFrame {\n    overflow: hidden;\n    width: 100vw;\n    top: 0px;\n    left: 0px;\n    height: 100vh;\n    position: fixed;\n    z-index: 6;\n    pointer-events: none;\n    display: block;\n}\nimg {\n    width: 20vh;\n    margin: auto;\n    transform: translate(0, 10vh);\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Loader.vue?vue&type=template&id=cb681734&scoped=true&\"\nimport script from \"./Loader.vue?vue&type=script&lang=js&\"\nexport * from \"./Loader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Loader.vue?vue&type=style&index=0&id=cb681734&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cb681734\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"level4\",attrs:{\"id\":\"popupshell\"}},[_c('div',{staticClass:\"level4\",style:({visibility: _vm.data.popupTitle ? 'visible' : 'hidden'}),attrs:{\"id\":\"popupbody\"}},[_c('div',{attrs:{\"id\":\"popupheader\"},on:{\"mousedown\":function($event){return _vm.dragMouseDown($event)}}},[_c('span',{staticClass:\"loadedPin\",attrs:{\"id\":\"loadedPin\"},on:{\"click\":function($event){return _vm.togglePinBehaviour()}}}),_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.getPopupTitle)}}),_c('span',{staticClass:\"x\",attrs:{\"id\":\"x_close\"},on:{\"click\":_vm.hidePopup}})]),(_vm.getPopupText)?_c('div',{attrs:{\"id\":\"content\"}},[(_vm.isVariant)?_c('div',{staticClass:\"aaLightBg\"},[(_vm.defaultDesc)?_c('p',{attrs:{\"id\":\"spanDefaultDesc\"}},[_vm._v(\" \"+_vm._s(_vm.defaultDesc)+\" \")]):_vm._e(),_vm._l((_vm.oneAaCodes),function(aaCode){return _c('div',{key:aaCode,style:({display: (aaCode === _vm.variant) ? 'block' : 'none'}),attrs:{\"id\":'divVarInfo_' + aaCode}},[_vm._l((_vm.getAaDataAsArr(aaCode)),function(dataStr){return _c('expandable-text-line',{key:dataStr,attrs:{\"use-click\":\"\"},domProps:{\"innerHTML\":_vm._s(dataStr + '.')}})}),_c('i',[_vm._v(\"Structures with \"+_vm._s(_vm.getOldAa())+_vm._s(_vm.getVarDisplay())+_vm._s(aaCode)+\":\")]),_vm._v(\" \"),_c('span',{class:_vm.getIsShownVar(_vm.variant),on:{\"click\":function($event){return _vm.showTreeView($event, aaCode)}}},[_vm._v(\" \"+_vm._s(_vm.getPdbCount(aaCode))+\" \")])],2)}),_c('hr',{staticClass:\"anAaHr\",attrs:{\"id\":\"anAaHr\",\"hidden\":_vm.isHrHidden()}}),_c('div',{attrs:{\"id\":\"divPosInfo\"}},[_c('span',{staticClass:\"weight600\",domProps:{\"innerHTML\":_vm._s(_vm.getResInfo())}}),_c('br'),_vm._l((_vm.getPosInfoDataAsArr()),function(arrObj,keyStr){return _c('span',{key:keyStr},[_c('expandable-text-line',{attrs:{\"use-click\":\"\"}},[_c('i',[_c('span',{domProps:{\"innerHTML\":_vm._s(keyStr)}}),_vm._v(\": \")]),_vm._l((arrObj),function(dataStr){return _c('span',{key:dataStr,domProps:{\"innerHTML\":_vm._s(dataStr  + '. ')}})})],2)],1)}),_c('i',[_vm._v(\"Structures with residue \"+_vm._s(_vm.getVariant)+\":\")]),_c('span',{class:_vm.getIsShownRes(),on:{\"click\":function($event){return _vm.showTreeView($event)}}},[_vm._v(\" \"+_vm._s(_vm.getTotalPdbCount)+\" \")])],2)],2):_vm._e(),(!_vm.isVariant && !_vm.getInfoPopup)?_c('div',{staticClass:\"aaLightBg\"},[_c('i',{domProps:{\"innerHTML\":_vm._s(_vm.getPopupText)}}),(!_vm.getIsDefaultFeature)?_c('span',{class:_vm.getTotalPdbCount > 0 ? 'hasStruct' : 'noStruct',on:{\"click\":function($event){_vm.getTotalPdbCount > 0 ? _vm.showTreeView($event, null, _vm.getPopupText.replace(/\\D/g, '')) : ''}}},[_vm._v(\" \"+_vm._s(_vm.getTotalPdbCount)+\" \")]):_vm._e()]):_vm._e()]):_vm._e(),_c('div',{staticClass:\"btnsDiv\",style:({display: _vm.isVariant ? 'block' : 'none'})},[_c('span',[_vm._v(\"See also:\")]),_vm._v(\" \"),_c('span',{staticClass:\"pAaColor\"},[_vm._v(\" \"+_vm._s(_vm.getOldAa())+\" → \")]),_vm._l((_vm.oneAaCodes),function(aaCode){return _c('button',{key:aaCode,class:_vm.getIfBoldInfoPres(aaCode),attrs:{\"id\":'btnVarInfo_' + aaCode},on:{\"click\":function($event){return _vm.highlightAa(aaCode)}}},[_vm._v(_vm._s(aaCode))])})],2)]),_c('TreeView',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showTree),expression:\"showTree\"}],staticClass:\"level5\",attrs:{\"id\":\"treeView\",\"treeReady\":_vm.prop,\"count\":_vm.count,\"coordinates\":_vm.treeCoordinates,\"parentElem\":_vm.parentElem}}),_c('NodeLoader',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showLoader),expression:\"showLoader\"}],attrs:{\"coordinates\":_vm.treeCoordinates,\"change\":_vm.change}}),_c('img',{staticClass:\"show\",style:({visibility: _vm.data.popupTitle ? 'visible' : 'hidden'}),attrs:{\"src\":_vm.popupTail,\"id\":\"popupTail\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport TreeView from '../MatchingStructures/TreeView'\nimport ExpandableTextLine from 'vue-expandable-text-line'\nimport NodeLoader from './NodeLoader'\nimport store from '../../store/index'\nimport { mapGetters } from 'vuex'\nimport axios from 'axios'\nimport * as panel3d from '../StructureViewer/helpers/joleculeAPI'\n\nexport default {\n  name: 'PopUp',\n  components: {\n    TreeView,\n    ExpandableTextLine,\n    NodeLoader\n  },\n  watch: {\n    popupCoordinates: function (newVal) {\n      var _this = this\n      this.setDefault() // Revert to default style\n      if (newVal !== null || newVal !== 0) { // Hide popup when no coordinates passed\n        if (typeof (store.state.popupText) === 'object') {\n          _this.handleVariantPopup() // Handle popup cases for variants\n          _this.togglePinBehaviour()\n        } else {\n          _this.isVariant = false\n        }\n        this.PopupPos = newVal // Store residue coordinates to update popup position when popup body updated\n      } else {\n        _this.hidePopup()\n      }\n    }\n  },\n  data () {\n    return {\n      popupTail: require('../../assets/img/popupTail.png'),\n      oneAaCodes: ['A', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'K', 'L', 'M', 'N', 'P', 'Q', 'R', 'S', 'T', 'V', 'W', 'Y'],\n      threeAaCodes: ['Ala', 'Cys', 'Asp', 'Glu', 'Phe', 'Gly', 'His', 'Ile', 'Lys', 'Leu', 'Met', 'Asn', 'Pro', 'Gln', 'Arg', 'Ser', 'Thr', 'Val', 'Trp', 'Tyr'],\n      isVariant: false,\n      variant: null,\n      defaultDesc: null,\n      treeCoordinates: {},\n      change: 0,\n      showTree: false,\n      isShowTreeViewClicked: false,\n      prop: null,\n      showLoader: false,\n      count: 0,\n      PopupPos: null,\n      pos: [0, 0, 0, 0],\n      hasVariant: false,\n      hasResidue: false,\n      parentElem: '#popupshell'\n    }\n  },\n  computed: {\n    popupCoordinates () {\n      return store.state.popupCoordinates\n    },\n    data () {\n      return {\n        variantStructs: store.state.variantStructs,\n        variantResidues: store.state.variantResidues,\n        popupTitle: store.state.popupTitle,\n        popupText: store.state.popupText,\n        residue: store.state.residue,\n        popupCoordinates: store.state.popupCoordinates\n      }\n    },\n    ...mapGetters([\n      'getGene',\n      'getTotalPDBres',\n      'getVariant',\n      'getVariantStructs',\n      'getVariantResidues',\n      'getPopupTitle',\n      'getPopupText',\n      'getServersDone',\n      'getVariantIdx',\n      'getMatches',\n      'getStructure',\n      'getInfoPopup',\n      'getIsDefaultFeature'\n    ]),\n    getTotalPdbCount () {\n      var _this = this\n      if (_this.isVariant) {\n        let totalNumStructs = 0\n        for (let i = 0; i < _this.oneAaCodes.length; i++) {\n          if (_this.getVariantStructs && _this.getVariant && Object.hasOwnProperty.call(_this.getVariantStructs, _this.getVariant) && Object.hasOwnProperty.call(_this.getVariantStructs[_this.getVariant], _this.oneAaCodes[i]) && Object.hasOwnProperty.call(_this.getVariantStructs[_this.getVariant][_this.oneAaCodes[i]], 'pdbs')) {\n            totalNumStructs = totalNumStructs + _this.getVariantStructs[_this.getVariant][_this.oneAaCodes[i]].pdbs.length\n          }\n        }\n        return totalNumStructs\n      } else {\n        return _this.getTotalPDBres\n      }\n    }\n  },\n  // Fix click event functions\n  created () {\n    var _this = this\n    window.addEventListener('click', (e) => {\n      if (!_this.$el.contains(e.target) && e.target.parentElement && _this.getPopupTitle) {\n        if (!e.target.parentElement.id.includes('tree')) {\n          const thePin = document.getElementById('loadedPin')\n          if (thePin.classList.contains('loadedPin')) {\n            const closeBtn = document.getElementById('x_close')\n            closeBtn.click()\n          }\n        }\n      }\n    })\n  },\n  methods: {\n    setPopupPos (coordinates) {\n      if (this.getPopupTitle.includes('Dark')) { // position popup tail on the line\n        coordinates.y = coordinates.y + 20\n      }\n      var tailPosition = coordinates.x - (document.querySelector('#popupTail').getBoundingClientRect().width / 2) + (coordinates.width / 2)\n      document.querySelector('#popupTail').style.left = tailPosition + 'px'\n      if (coordinates.height <= 2) { // This is for popup position in dark regions\n        document.querySelector('#popupshell').style.top = (coordinates.y - coordinates.height - document.querySelector('#popupTail').getBoundingClientRect().height) + 'px'\n      } else if (coordinates.height >= 18) {\n        document.querySelector('#popupshell').style.top = (coordinates.y - coordinates.height + 5) + 'px'\n      } else {\n        document.querySelector('#popupshell').style.top = (coordinates.y - coordinates.height) + 'px'\n      }\n      document.querySelector('#popupshell').style.left = (tailPosition - 10) + 'px'\n      var popupbodyPos = document.querySelector('#popupshell').getBoundingClientRect().x + document.querySelector('#popupbody').getBoundingClientRect().width\n      if ((popupbodyPos) > window.innerWidth) {\n        // Shift popupshell to the left. Add 10px to offset any gaps.\n        document.querySelector('#popupshell').style.left = (window.innerWidth - document.querySelector('#popupbody').getBoundingClientRect().width + 7) + 'px'\n      }\n      if (document.querySelector('#popupbody').getBoundingClientRect().x < 0) {\n        document.querySelector('#popupshell').style.left = '-10px'\n      }\n    },\n    hidePopup () {\n      // setTimeout(function () { document.getElementById('popupshell').classList.add('fade') }, 3000)\n      var _this = this\n      if (!this.isShowTreeViewClicked) {\n        store.commit('setPopupTitle', '')\n      } else {\n        this.isShowTreeViewClicked = false\n      }\n      if (this.getVariantStructs) {\n        _this.resetToInitVar()\n      }\n    },\n    setDefault: function () {\n      // Sets default popup style\n      const thePin = document.getElementById('loadedPin')\n      if (thePin.classList.contains('loadedPin_active')) {\n        thePin.classList.remove('loadedPin_active')\n        thePin.classList.add('loadedPin')\n      }\n      const popupTail = document.getElementById('popupTail')\n      if (popupTail.classList.contains('hide')) {\n        popupTail.classList.remove('hide')\n        popupTail.classList.add('show')\n      }\n\n      document.getElementById('popupshell').classList.remove('fade')\n    },\n    handleVariantPopup: function () {\n      // Enable amino acid buttons\n      // show default variant text\n      this.isVariant = true\n      this.variant = this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase()\n      this.defaultDesc = this.getDefaultDesc()\n      this.handleInitAa()\n    },\n    showTreeView (event, aaCode, residue) {\n      this.isShowTreeViewClicked = true\n      var _this = this\n      var cord = event.srcElement.getBoundingClientRect()\n      _this.treeCoordinates.clientX = cord.left\n      _this.treeCoordinates.clientY = cord.top\n      _this.treeCoordinates.width = cord.width\n      _this.treeCoordinates.height = cord.height\n      _this.change = _this.change + 1\n      _this.showLoader = true\n      if (_this.getVariantStructs && Object.hasOwnProperty.call(_this.getVariantStructs, _this.getVariant)) {\n        if (aaCode) {\n          _this.count = _this.getPdbCount(aaCode)\n        } else {\n          _this.count = _this.getTotalPdbCount\n        }\n\n        var url = `${window.BACKEND}/secondaryClusteringByResidue`\n        // var url = `${window.BACKEND}/get_secondary_clusters/P16277/5zj6/A/1`\n        var loadRequest = {}\n        loadRequest.selector = [_this.getStructure.accession]\n        loadRequest.sortedKeys = residue ? [parseInt(residue)] : [_this.getVariant]\n        if (aaCode) {\n          loadRequest.aaCode = aaCode\n        }\n        axios({\n          method: 'get',\n          url: url,\n          params: loadRequest\n        }).then(function (response) {\n          console.log(response.data)\n          // pdbs = response.data\n          _this.showTree = true\n          _this.prop = response.data\n        })\n      } else {\n        url = `${window.BACKEND}/secondaryClusteringByResidue`\n        // var url = `${window.BACKEND}/get_secondary_clusters/P16277/5zj6/A/1`\n        _this.count = _this.getTotalPdbCount\n        loadRequest = {}\n        loadRequest.selector = [_this.getStructure.accession]\n        var innerText = event.srcElement.parentElement.innerText.split(':')\n        if (innerText.length > 2) {\n          loadRequest.sortedKeys = [parseInt(innerText[1].split('residue ')[1])]\n        } else {\n          loadRequest.sortedKeys = [parseInt(innerText[0].split('residue ')[1])]\n        }\n        axios({\n          method: 'get',\n          url: url,\n          params: loadRequest\n        }).then(function (response) {\n          console.log(response.data)\n          // pdbs = response.data\n          _this.showTree = true\n          _this.prop = response.data\n        })\n      }\n      return 0\n    },\n    getOldAa: function () {\n      if (Object.hasOwnProperty.call(this.getVariantResidues, this.getVariant) && Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant], 'oldAa')) {\n        return this.getVariantResidues[this.getVariant].oldAa\n      }\n      return ''\n    },\n    highlightAa (aa) {\n      this.variant = aa.toUpperCase()\n      for (let i = 0; i < this.oneAaCodes.length; i++) {\n        document.getElementById('btnVarInfo_' + this.oneAaCodes[i]).classList.remove('selCol')\n      }\n      document.getElementById('btnVarInfo_' + aa.toUpperCase()).classList += ' selCol'\n      if (document.querySelector('#varSpe_toRep')) {\n        document.querySelector('#varSpe_toRep').innerText = aa\n      }\n      if (document.querySelector('#newAa')) {\n        var idx = this.oneAaCodes.indexOf(aa)\n        document.querySelector('#newAa').innerText = this.threeAaCodes[idx]\n      }\n    },\n    getIfBoldInfoPres: function (aa) {\n      let isMakeBold = false\n      if (Object.hasOwnProperty.call(this.getVariantResidues, this.getVariant) && Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant], aa)) {\n        for (let i = 0; i < this.getVariantResidues[this.getVariant][aa].length; i++) {\n          if (/* this.getVariantResidues[this.getVariant][aa][i].match('UniProt') || this.getVariantResidues[this.getVariant][aa][i].match('FunVar') || this.getVariantResidues[this.getVariant][aa][i].match('COSMIC') || */ (this.getVariantStructs && Object.hasOwnProperty.call(this.getVariantStructs, this.getVariant) && Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant], aa) && Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][aa], 'pdbs') && this.getVariantStructs[this.getVariant][aa].pdbs.length > 0)) {\n            isMakeBold = true\n          }\n        }\n      }\n      if (this.getVariantResidues && this.getVariant > 0) {\n        if (isMakeBold === true) {\n          if (aa.toUpperCase().includes(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase())) {\n            return 'btnAaBold_b selCol'\n          } else {\n            return 'btnAaBold_b'\n          }\n        } else {\n          if (aa.toUpperCase().includes(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase())) {\n            return 'btnAaBold selCol'\n          } else {\n            return 'btnAaBold'\n          }\n        }\n      }\n    },\n    getAaDataAsArr: function (aa) {\n      var arrForExpandable = []\n      if (Object.hasOwnProperty.call(this.getVariantResidues, this.getVariant) && Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant], aa)) {\n        for (let i = 0; i < this.getVariantResidues[this.getVariant][aa].length; i++) {\n        }\n        return this.getVariantResidues[this.getVariant][aa]\n      } else {\n        return arrForExpandable\n      }\n    },\n    resetToInitVar: function () {\n      // console.log('Reset to init variant')\n      // 1. Update userSpecified feature str.\n      if (Object.hasOwnProperty.call(this.getVariantResidues, this.getVariant) && Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant], 'theOrigFeatStr') && this.getVariantIdx > -1) {\n        document.getElementById('urlVariant').innerHTML = this.getVariantResidues[this.getVariant].theOrigFeatStr[this.getVariantIdx]\n      }\n      // 2. Update consequenct str\n      if (Object.hasOwnProperty.call(this.getVariantResidues, this.getVariant) && Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant], 'consequent') && this.getVariantIdx > -1) {\n        document.getElementById('consInfo').innerHTML = this.getVariantResidues[this.getVariant].consequent[this.getVariantIdx]\n      }\n      // 3. Update div\n      // 4. Update buttons at bottom & span_missense at top.\n      this.handleInitAa()\n      if (document.getElementById('spanDefaultDesc')) {\n        document.getElementById('spanDefaultDesc').hidden = false\n      }\n      if (this.isHrHidden() === true) {\n        document.getElementById('anAaHr').hidden = true\n      }\n    },\n    getVarDisplay: function () {\n      if (typeof this.getVariant === 'string' && this.getVariant.match('-')) {\n        return this.getVariant.split('-')[0]\n      } else {\n        return this.getVariant\n      }\n    },\n    getIsShownVar: function (aa) {\n      if (this.getMatches && Object.hasOwnProperty.call(this.getMatches, 'Selected_PDB') && Object.hasOwnProperty.call(this.getMatches.Selected_PDB, 'pdb_id') && Object.hasOwnProperty.call(this.getMatches.Selected_PDB, 'pdb_chain')) {\n        const key = this.getMatches.Selected_PDB.pdb_id + ':' + this.getMatches.Selected_PDB.pdb_chain\n\n        if (this.getVariant && this.getVariantStructs && Object.hasOwnProperty.call(this.getVariantStructs, this.getVariant) && Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant], aa) && Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][aa], 'pdbs') && this.getVariantStructs[this.getVariant][aa].pdbs.includes(key)) {\n          return 'selCol_padded'\n        } else if (this.getVariant && this.getVariantStructs && Object.hasOwnProperty.call(this.getVariantStructs, this.getVariant) && Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant], aa) && Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][aa], 'pdbs') && !this.getVariantStructs[this.getVariant][aa].pdbs.includes(key)) {\n          return 'noSelCol_padded'\n        } else {\n          return ''\n        }\n      }\n    },\n    getIsShownRes: function () {\n      console.log('The variant structs is ')\n      console.log(this.getVariantStructs)\n      console.log(this.getMatches)\n      if (this.getVariantStructs && Object.hasOwnProperty.call(this.getVariantStructs, this.getVariant) && Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant], 'isShown') && this.getVariantStructs[this.getVariant].isShown === true) {\n        return 'selCol_padded'\n      } else if ((this.getVariantStructs && this.getVariant > -1 && Object.hasOwnProperty.call(this.getVariantStructs, this.getVariant) && Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant], 'isShown') && this.getVariantStructs[this.getVariant].isShown === false) || this.getTotalPdbCount !== 0) {\n        return 'noSelCol_padded'\n      } else {\n        return ''\n      }\n    },\n    getPdbCount: function (aa) {\n      // console.log(store.getters.getVariant)\n      // return 100// store.getters.getPdbCount(aa)\n      if (this.getVariantStructs && Object.hasOwnProperty.call(this.getVariantStructs, this.getVariant) && Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant], aa) && Object.hasOwnProperty.call(this.getVariantStructs[this.getVariant][aa], 'pdbs')) {\n        return this.getVariantStructs[this.getVariant][aa].pdbs.length\n      }\n      return 0\n    },\n    isHrHidden: function () {\n      const defaultDesc = this.getDefaultDesc()\n      // const divPopupTextVar = document.getElementById('popupText_variant')\n      let isAnAa = false\n      if (Object.hasOwnProperty.call(this.getVariantResidues, this.getVariant) && Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant], 'newAas') && this.getVariantIdx > -1 && this.oneAaCodes.includes(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase())) {\n        isAnAa = true\n      }\n\n      if (defaultDesc === '' && isAnAa === false) {\n        // console.log('Num children count is: ') // + // divPopupTextVar.children.length)\n        return true\n      } else {\n        return false\n      }\n    },\n    getDefaultDesc: function () {\n      // console.log('Restaurant ' + this.getVariantIdx + ' ' + this.getVariantResidues[this.getVariant].defaultDesc[this.getVariantIdx])\n\n      if (this.getVariant && this.getVariantResidues && Object.hasOwnProperty.call(this.getVariantResidues, this.getVariant) && Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant], 'defaultDesc') && this.getVariantIdx > -1) {\n        return this.getVariantResidues[this.getVariant].defaultDesc[this.getVariantIdx]\n      } else {\n        return ''\n      }\n    },\n    getPosInfoDataAsArr: function () {\n      if (Object.hasOwnProperty.call(this.getVariantResidues, this.getVariant) && Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant], 'positionInfo')) {\n        return this.getVariantResidues[this.getVariant].positionInfo\n      }\n      return []\n    },\n    handleInitAa: function () {\n      var _this = this\n      console.log('handleInitAa runs ')//  + this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx])\n      console.log(this.getVariantIdx)\n      // console.log('handleInitAa runs (2) ' + this.getVariantResidues[this.getVariant].newAas + ' ' + this.getVariantIdx)\n      if (Object.hasOwnProperty.call(this.getVariantResidues, this.getVariant) && Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant], 'newAas') && this.getVariantIdx > -1 && this.oneAaCodes.includes(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase())) {\n        _this.highlightAa(this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase())\n        // const aaBtn = document.getElementById('btnVarInfo_' + this.getVariantResidues[this.getVariant].newAas[this.getVariantIdx][0].toUpperCase())\n        // aaBtn.click()\n      } else { // Hide all the divs\n        const oldAa = this.getOldAa()\n        for (let i = 0; i < this.oneAaCodes.length; i++) {\n          const theDiv = document.getElementById('divVarInfo_' + this.oneAaCodes[i])\n          if (typeof (theDiv) !== 'undefined' && theDiv !== null) {\n            document.getElementById('divVarInfo_' + this.oneAaCodes[i]).hidden = true\n            document.getElementById('btnVarInfo_' + this.oneAaCodes[i]).classList.remove('selCol')\n          }\n          // Hide oldAa btn\n          if (oldAa === this.oneAaCodes[i]) {\n            // document.getElementById('btnVarInfo_' + this.oneAaCodes[i]).hidden = true\n          }\n        }\n        _this.updateSpanAa('')\n      }\n    },\n    updateSpanAa: function (valToDisp) {\n      console.log('Value to display is ' + valToDisp + this.getVariantIdx)\n      if (document.getElementById('span_missenseHeading')) {\n        /*\n        let a = document.getElementById('span_missenseHeading').innerHTML\n        a = a.replace(/[A-Z]*\\)$/, valToDisp + ')')\n        document.getElementById('span_missenseHeading').innerHTML = a\n        */\n\n        if (this.getVariantResidues && (Object.hasOwnProperty.call(this.getVariantResidues, this.getVariant) && Object.hasOwnProperty.call(this.getVariantResidues[this.getVariant], 'isOne') && this.getVariantIdx > -1 && this.getVariantResidues[this.getVariant].isOne[this.getVariantIdx] === true)) {\n          // specify as 3 letters.\n          const idx = this.oneAaCodes.indexOf(valToDisp)\n          if (idx !== -1) {\n            document.getElementById('newAa').innerHTML = this.threeAaCodes[idx]\n          } else {\n            document.getElementById('newAa').innerHTML = ''\n          }\n        } else {\n          document.getElementById('newAa').innerHTML = valToDisp\n        }\n        // console.log('the heading is updating here ' + valToDisp)\n      }\n    },\n    togglePinBehaviour: function () {\n      // 1. Get pin status.\n      const thePin = document.getElementById('loadedPin')\n\n      if (thePin.classList.contains('loadedPin_active')) {\n        thePin.classList.remove('loadedPin_active')\n        thePin.classList.add('loadedPin')\n      } else if (thePin.classList.contains('loadedPin')) {\n        thePin.classList.remove('loadedPin')\n        thePin.classList.add('loadedPin_active')\n      }\n    },\n    // The code below uses examples from https://www.w3schools.com/howto/howto_js_draggable.asp\n    // Used to make the popup body draggable\n    dragMouseDown: function (e) {\n      e = e || window.event\n      e.preventDefault()\n      // get the mouse cursor position at startup:\n      this.pos[2] = e.clientX\n      this.pos[3] = e.clientY\n      document.onmouseup = this.closeDragElement\n      // call a function whenever the cursor moves:\n      document.onmousemove = this.elementDrag\n    },\n    elementDrag: function (e) {\n      e = e || window.event\n      e.preventDefault()\n      var elmnt = document.getElementById('popupshell')\n      // calculate the new cursor position:\n      this.pos[0] = this.pos[2] - e.clientX\n      this.pos[1] = this.pos[3] - e.clientY\n      this.pos[2] = e.clientX\n      this.pos[3] = e.clientY\n      // set the element's new position:\n      elmnt.style.top = (elmnt.offsetTop - this.pos[1]) + 'px'\n      elmnt.style.left = (elmnt.offsetLeft - this.pos[0]) + 'px'\n\n      const popupTail = document.getElementById('popupTail')\n      if (popupTail.classList.contains('show')) {\n        popupTail.classList.remove('show')\n        popupTail.classList.add('hide')\n      }\n    },\n    closeDragElement: function () {\n      // stop moving when mouse button is released:\n      document.onmouseup = null\n      document.onmousemove = null\n    },\n    getResInfo: function () {\n      var jAlignment = panel3d.joleculeAlignment\n      var jController = panel3d.embededJolecule.controller\n      var pdbResNum = jAlignment.mapSeqResToPdbResOfChain(0, this.getVariant, this.getStructure.chain)\n      if (pdbResNum) {\n        var iRes = jController.soup.findResidueIndices(0, pdbResNum[1], pdbResNum[2])\n        var structAa = jController.soup.getResidueProxy().load(iRes).resType\n        structAa = structAa.substr(0, 1) + structAa.substr(1).toLowerCase()\n        return this.getGene + ' residue ' + this.getVariant + '<span style=\"font-weight: 400; color: #a6a5a6;\"> (' + this.getStructure.pdb + '-' + this.getStructure.chain + ' residue ' + structAa + '-' + pdbResNum[2] + ')'\n      } else {\n        return this.getGene + ' residue ' + this.getVariant + '<span style=\"font-weight: 400; color: #a6a5a6;\"> ( Dark region )'\n      }\n    }\n  },\n  updated () {\n    // Set popup position after popup body updated\n    if (this.PopupPos !== null) {\n      this.setPopupPos(this.PopupPos)\n    }\n  }\n}\n</script>\n\n<template>\n    <div id=\"popupshell\" class='level4'>\n        <div id=\"popupbody\" class='level4' :style=\"{visibility: data.popupTitle ? 'visible' : 'hidden'}\">\n            <div id=\"popupheader\" @mousedown=\"dragMouseDown($event)\">\n               <span id=\"loadedPin\" class='loadedPin' v-on:click='togglePinBehaviour()'></span>\n               <span v-html=\"getPopupTitle\"> </span>\n               <span class='x' id='x_close' @click=\"hidePopup\"></span>\n            </div>\n            <div id=\"content\" v-if=\"getPopupText\">\n                <!-- <expandable-text-line use-hover v-html=\"getPopupText\"></expandable-text-line> -->\n                <div class='aaLightBg' v-if=\"isVariant\">\n                    <p id='spanDefaultDesc' v-if=\"defaultDesc\"> {{defaultDesc}} </p>\n                    <div v-for='aaCode in oneAaCodes' v-bind:key='aaCode' :id=\"'divVarInfo_' + aaCode\" :style=\"{display: (aaCode === variant) ? 'block' : 'none'}\">\n                        <expandable-text-line use-click v-html=\"dataStr + '.'\" v-for='dataStr in getAaDataAsArr(aaCode)' v-bind:key='dataStr'>\n                        </expandable-text-line>\n                        <i>Structures with {{getOldAa()}}{{getVarDisplay()}}{{aaCode}}:</i> <span :class='getIsShownVar(variant)' @click=\"showTreeView($event, aaCode)\"> {{ getPdbCount(aaCode) }} </span>\n                    </div>\n                    <hr id='anAaHr' class='anAaHr' :hidden='isHrHidden()'>\n                    <div id='divPosInfo'>\n                        <span class=\"weight600\" v-html='getResInfo()'></span><br>\n                        <!-- <span class=\"weight600\" v-html='getResInfo'> Residue {{ getVariant }} </span><br> -->\n                        <span v-for='(arrObj, keyStr) in getPosInfoDataAsArr()' v-bind:key='keyStr'>\n                            <expandable-text-line use-click>\n                                <i><span v-html='keyStr'></span>: </i>\n                                <span v-for='dataStr in arrObj' v-bind:key=\"dataStr\" v-html=\"dataStr  + '. '\">\n                                </span>\n                            </expandable-text-line>\n                        </span>\n                        <i>Structures with residue {{ getVariant }}:</i>\n                        <span :class='getIsShownRes()' @click=\"showTreeView($event)\"> {{ getTotalPdbCount }} </span>\n                    </div>\n                </div>\n                <div v-if=\"!isVariant && !getInfoPopup\" class='aaLightBg'><i v-html=\"getPopupText\"></i><span v-if=\"!getIsDefaultFeature\" :class=\"getTotalPdbCount > 0 ? 'hasStruct' : 'noStruct'\" @click=\"getTotalPdbCount > 0 ? showTreeView($event, null, getPopupText.replace(/\\D/g, '')) : ''\"> {{ getTotalPdbCount }} </span></div>\n            </div>\n            <div class=\"btnsDiv\" :style=\"{display: isVariant ? 'block' : 'none'}\">\n              <span>See also:</span> <span class='pAaColor'> {{getOldAa()}} &rarr; </span>\n              <button v-for='aaCode in oneAaCodes' v-bind:key='aaCode' :id=\"'btnVarInfo_' + aaCode\" :class=\"getIfBoldInfoPres(aaCode)\" @click=\"highlightAa(aaCode)\">{{aaCode}}</button>\n            </div>\n        </div>\n      <TreeView v-show=\"showTree\" id='treeView' class='level5' v-bind:treeReady='prop' :count='count' :coordinates=\"treeCoordinates\" :parentElem=\"parentElem\"/>\n      <NodeLoader v-show=\"showLoader\" :coordinates=\"treeCoordinates\" :change='change'/>\n      <img v-bind:src=\"popupTail\" class='show' id='popupTail' :style=\"{visibility: data.popupTitle ? 'visible' : 'hidden'}\">\n    </div>\n</template>\n\n<style scoped>\n.hasStruct:hover {\n    background:orange;\n    color: white;\n    border-radius: 6px;\n    padding: 0px 3px;\n}\n.hasStruct {\n    background: #cccccc;\n    color: #666666;\n    border-radius: 6px;\n    padding: 0px 3px;\n}\n#popupshell.fade {\n      display: none;\n      height: 0;\n      opacity: 0;\n      overflow: hidden;\n      transition: height 350ms ease-in-out, opacity 750ms ease-in-out;\n    }\n.aaLightBg {\n    background-color: #7f7e7f;\n    padding-top: 10px;\n    padding-bottom: 10px;\n    padding-left: 10px;\n    padding-right: 10px;\n    cursor: pointer;\n    color: #ccc;\n}\n#popupshell {\n    position: fixed;\n    opacity: 1;\n    transition: opacity 1s;\n    display: block;\n    /* bottom: 0px; */\n}\n#popupbody{\n    max-width: 30rem;\n    position: absolute;\n    height: fit-content;\n    padding: 0px 5px 2px 5px;\n    /* bottom: 2.9rem; */\n    bottom: 0px;\n    background: #666;\n    width: max-content;\n    margin-left: 0px;\n    border-radius: 10px;\n}\n#popupheader {\n    margin-left: 1rem;\n    margin-top: 0.5rem;\n    color: #ccc;\n    cursor: move;\n}\n\n/* #popupheader > span {\n  padding-top: 2px;\n  padding-bottom: 2px;\n  align-items: center;\n  cursor: move;\n} */\n#content {\n    overflow-wrap: break-word;\n    margin: 10px 12px 12px 12px;\n    background: #7f7e7f;\n    border-radius: 10px;\n}\n#popupTail {\n    position: fixed;\n    /* bottom: 1.9rem; */\n}\nspan.x {\n    background: url('../../assets/images/UI-close.png') no-repeat;\n    display: block;\n    float: right;\n    height: 19px;\n    width: 19px;\n    margin-right: 8px;\n}\n\nspan.x:hover {\n    background-position: 0 -21px;\n    cursor: pointer;\n}\n.btnsDiv {\n    display: block;\n    margin-left: 16px;\n    margin-bottom: 10px;\n}\n\n.btnsDiv > span:nth-of-type(1) {\n    font-weight: 600 !important;\n    font-size: 18px !important;\n    color: white;\n}\n.pAaColor {\n    display: inline;\n    color: #929192 !important;\n    cursor: move; /* fallback if grab cursor is unsupported */\n}\n.btnAaBold {\n    border: none;\n    background-color: inherit;\n    cursor: pointer;\n    color: #929192 !important;\n    padding-left: 3px;\n    padding-right: 3px;\n    display: inline;\n}\n.btnAaBold_b {\n    border: none;\n    background-color: inherit;\n    cursor: pointer;\n    color: #a6a5a6 !important;\n    padding-left: 3px;\n    padding-right: 3px;\n    display: inline;\n    font-weight: bold;\n}\n.btnAaBold:hover {\n    background-color: var(--primary-link);\n}\n\n.btnAaBold_b:hover {\n    background-color: var(--primary-link);\n    font-weight: bold;\n}\n.selCol {\n    color: var(--text) !important;\n    background-color: var(--primary-highlight);\n    border-radius: 25%;\n}\n.selCol_padded {\n  background-color: orange;\n}\n.noSelCol_padded {\n  background-color: #999;\n}\n.noSelCol_padded, .selCol_padded {\n  color: var(--text) !important;\n  border-radius: 25%;\n  padding-right: 4px;\n  margin-left: 4px;\n  padding-left: 4px;\n}\n\n.selCol_padded:hover {\n    background-color: var(--primary-link);\n}\n\n.noSelCol_padded:hover {\n    background-color: var(--primary-link);\n}\nspan.loadedPin {\n      background: url('../../assets/images/UI-pin.png') no-repeat;\n      display: block;\n      float: left;\n      height: 19px;\n      width: 19px;\n      cursor: pointer;\n    }\n\nspan.loadedPin_active {\n  background: url('../../assets/images/UI-pin.png') no-repeat;\n  display: block;\n  float: left;\n  height: 19px;\n  width: 19px;\n  background-position: 0 -21px;\n  cursor: pointer;\n  /* cursor: pointer; */\n}\n.weight600{\n  font-weight: 600!important;\n  font-size: 18px!important;\n}\n</style>\n<style>\n#content a{\n    color: var(--background);\n}\n.pAaColor {\n    display: inline;\n    color: #929192!important;\n    cursor: move;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PopUpNew.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PopUpNew.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PopUpNew.vue?vue&type=template&id=6531e42c&scoped=true&\"\nimport script from \"./PopUpNew.vue?vue&type=script&lang=js&\"\nexport * from \"./PopUpNew.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PopUpNew.vue?vue&type=style&index=0&id=6531e42c&scoped=true&lang=css&\"\nimport style1 from \"./PopUpNew.vue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6531e42c\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"main\">\n    <GdprConsentModal />\n    <!-- Header -->\n    <Header />\n    <!-- InfoAbout -->\n    <Sequence />\n    <div>\n      <AboutAlignment />  <!--  v-bind:alignment=\"alignment\"/> -->\n    </div>\n    <div>\n      <AboutPdb />\n    </div>\n    <div>\n      <AboutAquaria />\n      <!-- <div class='dimmer' @click=\"closeHelp\"></div> -->\n      <UserHelp />\n      <Errors />\n    </div>\n    <div id=\"heightinspector\"></div>\n    <!-- StructureViewer -->\n    <StructureViewer />\n    <!-- AquariaLayout -->\n    <Tabs />\n    <CoverageMap />\n    <!-- <PopUp /> -->\n    <Loader />\n    <PopUp />\n    <a v-bind:href=\"(data.hash)\"><div id=\"scrim\" class=\"hide\" @click=\"dismissPanel\"></div></a>\n  </div>\n</template>\n\n<script>\nimport store from '../store/index'\nimport '../components/AquariaLayout/helpers/aquaria' // most legacy code bundling is triggered from here (expects global jolecule)\nimport Header from '../components/Header/Header'\nimport Sequence from '../components/InfoAbout/Sequence'\nimport AboutAlignment from '../components/InfoAbout/AboutAlignment'\nimport AboutPdb from '../components/InfoAbout/AboutPdb'\nimport StructureViewer from '../components/StructureViewer/StructureViewer'\nimport Tabs from '../components/AquariaLayout/Tabs'\nimport CoverageMap from '../components/MatchingStructures/CoverageMap'\nimport AboutAquaria from '../components/InfoAbout/AboutAquaria'\nimport Errors from '../components/InfoAbout/Errors'\nimport UserHelp from '../components/InfoAbout/UserHelp'\nimport * as Panels from '../components/AquariaLayout/helpers/hidePanels'\nimport * as LoadAQUARIA from '../utils/loadData'\nimport Loader from '../components/AquariaLayout/Loader'\nimport PopUp from '../components/AquariaLayout/PopUpNew.vue'\nimport GdprConsentModal from '../views/GdprConsent.vue'\nimport * as showMatchingStructures from '../components/MatchingStructures/helpers/show_matching_structures'\nimport { initialisePanel3d } from '../components/StructureViewer/helpers/joleculeAPI'\n\nexport default {\n  name: 'Wrapper',\n  components: {\n    GdprConsentModal,\n    Header,\n    Sequence,\n    AboutAlignment,\n    AboutPdb,\n    StructureViewer,\n    Tabs,\n    CoverageMap,\n    PopUp,\n    AboutAquaria,\n    Errors,\n    UserHelp,\n    Loader\n  },\n  props: ['urlRequest'],\n  computed: {\n    data () {\n      return {\n        hash: store.state.hash,\n        arrayOfVideos: [\n          'https://youtu.be/FAQ3yVGYSzY?list=PLsGaleFn8YydVFkxDhOvHHE5NoTsl6D1e',\n          'https://www.youtube.com/watch?v=UZNEmPOaVrA&list=PLsGaleFn8YydVFkxDhOvHHE5NoTsl6D1e&index=2'\n        ]\n      }\n    }\n  },\n  methods: {\n    closeHelp: function () {\n      var _this = this\n      document.getElementById('UserHelp').classList.remove('show')\n      document.getElementById('UserHelp').className += (' hide')\n      document.querySelector('.dimmer').style.display = 'none'\n      if (document.querySelector('#helpbtn').classList.contains('active')) {\n        Panels.RemoveOverlay()\n        _this.toggleActive(document.querySelector('#helpbtn'))\n      }\n    },\n    checkPhone: function () {\n      var iDevices = [\n        'iPad Simulator',\n        'iPhone Simulator',\n        'iPod Simulator',\n        'iPad',\n        'iPhone',\n        'iPod'\n      ]\n\n      if (navigator.platform) {\n        while (iDevices.length) {\n          if (navigator.platform === iDevices.pop() || (screen.width >= 300 && screen.width <= 600)) { return true }\n        }\n      } else {\n        return false\n      }\n    },\n    inspectHeight: function () {\n      // var visible = window.toolbar.visible\n      document.querySelector('#heightinspector').innerHTML = 'reset'\n      var hDiff = (window.outerHeight - window.innerHeight)\n      document.querySelector('#heightinspector').innerHTML = 'HO:' + window.outerHeight + ', hDiff:' + hDiff + ', scroll: ' + window.scrollY + ' bodyHeight: ' + document.body.scrollHeight\n    },\n    dismissPanel: function () {\n      // hide scrim\n      document.querySelector('#scrim').className = 'hide'\n      // reset title to neutral state\n      this.$store.commit('setScrim', false)\n      // document.querySelector('#title').className = 'item title fix level6'\n      // if (document.querySelector('#titleAlign') !== null) { document.querySelector('#titleAlign').className = '' }\n      // document.querySelectorAll('#title span a').forEach(el => {\n      //   el.className = ''\n      // })\n      // document.querySelector('#pdb_id > span#help').style.visibility = 'visible'\n    },\n    toggleActive: function (ev) {\n      if (ev.className === 'lnk active') {\n        ev.className = 'lnk'\n      }\n    }\n  },\n  mounted () {\n    // Functions to run immediately after home page DOM first finishes loading.\n    initialisePanel3d()\n    window.scrollBy(0, 100)\n    LoadAQUARIA.loadAccession([this.$props.urlRequest.uniprotAccession], this.$props.urlRequest.pdbID, this.$props.urlRequest.chain)\n    // this.inspectHeight()\n    window.addEventListener('resize', function () {\n      window.scrollBy(0, 100)\n      document.querySelectorAll('#vis > .ruler').forEach(el => el.remove())\n      document.querySelectorAll('#vis > #allclusters .outer_container').forEach(el => el.remove())\n      showMatchingStructures.refresh()\n      var hDiff = (window.outerHeight - window.innerHeight)\n      document.querySelector('#heightinspector').innerHTML = 'HO:' + window.outerHeight + ', hDiff:' + hDiff + ', scroll: ' + window.scrollY + ' bodyHeight: ' + document.body.scrollHeight\n    })\n    setTimeout(function () {\n      if (document.querySelector('.matrixLoading')) {\n        document.querySelector('.matrixLoading').style.visibility = 'hidden'\n        document.querySelector('.matrixLoading').style.display = 'none'\n      }\n    }, 1500)\n  },\n  updated () {\n    // const isPhone = this.checkPhone()\n    // this.inspectHeight()\n  }\n}\n</script>\n\n<style>\n/* .dimmer {\n  z-index: 99;\n  display: none;\n} */\n/* .close {\n  float: right;\n}\n#helpDoc {\n  background: white;\n  z-index: 9999;\n  position: relative;\n  padding: 4px;\n}\n#help {\n  position: absolute;\n  width: 90vw;\n  height: 90vh;\n  margin: 5vh 5vw 5vh 5vw;\n}\n\n#playlist {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  z-index: 9999;\n  background: black;\n} */\ndiv#heightinspector {\n  display: none;\n  position: absolute;\n  top:10em;\n  left:2em;\n  z-index: 1000;\n}\n/* general layout + styling */\n.main {\n    margin: auto;\n    display: flex;\n    flex-flow: column nowrap;\n    align-content: stretch;\n    height: 95vh;\n}\n#scrim {\n  background: dimgrey;\n  position: fixed;\n  opacity: 0.7;\n  width: 100vw;\n  height: 100vh;\n  top: 0;\n}\n/* 3D structure viewer */\n#structure-viewer {\n    width: 100%;\n    height: calc(100% - 70px);\n    display: flex;\n}\n\n#structure-viewer:target {\n    /* when residue is selected */\n    background: radial-gradient(closest-side,var(--secondary-label), var(--background));\n}\n.panel.overlay.about {\n  padding-top: 4em;\n  max-height: 85vh;\n}\n.about p {\n  margin: 0.25em 0;\n}\n.scrollable {\n  overflow-y: scroll;\n  max-height: 80vh;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Wrapper.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Wrapper.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Wrapper.vue?vue&type=template&id=789c9560&\"\nimport script from \"./Wrapper.vue?vue&type=script&lang=js&\"\nexport * from \"./Wrapper.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Wrapper.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/node.cac6f4f6.gif\";","module.exports = __webpack_public_path__ + \"img/aquaria-menu.1a89fbab.svg\";","/** generic functions and stuff to run once document is loaded\n *\n */\n\n// jQuery - format numbers with commas every 3 digits;   to use:  $(\"span.numbers\").digits();\n\n$.fn.digits = function () {\n  return this.each(function () {\n    $(this).text($(this).text().replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, '$1,'))\n  })\n}\n\n// Once document is ready, move focus to protein input field\n\n$(document).ready(function () {\n\t  $('#protein_syn_input, #organism_syn_input').focus(function () {\n\t\t  $('.infocus').removeClass('infocus')\n\t\t  $('#searchByName').addClass('infocus')\n\t  })\n\n\t  $('#help3D').hide()\n})\n\n$(function () {\n  $(document).tooltip({ position: { my: 'right top+15', at: 'right center', collision: 'none' } }, { show: { delay: 1200 } })\n})\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mapLoader.vue?vue&type=style&index=0&id=6934c327&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PopUpNew.vue?vue&type=style&index=0&id=6531e42c&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NodeLoader.vue?vue&type=style&index=0&id=d0db7e78&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tabs.vue?vue&type=style&index=0&id=2be7ee96&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AboutPdb.vue?vue&type=style&index=0&id=01dba514&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Features.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}